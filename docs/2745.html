<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Detecting Anomalies in Social Media Volume Time Series</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Detecting Anomalies in Social Media Volume Time Series</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/detecting-anomalies-in-social-media-volume-time-series-9cae614a11d0?source=collection_archive---------5-----------------------#2024-11-11">https://towardsdatascience.com/detecting-anomalies-in-social-media-volume-time-series-9cae614a11d0?source=collection_archive---------5-----------------------#2024-11-11</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="bd32" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx"><strong class="al">How I detect anomalies in social Media volumes: A Residual-Based Approach</strong></h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@lorenzo.mezzini?source=post_page---byline--9cae614a11d0--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Lorenzo Mezzini" class="l ep by dd de cx" src="../Images/e4df2ae1cd2e9bfde4c7fd636781de74.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*nouvuLzkk4v5oA5iV9rkNA.jpeg"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--9cae614a11d0--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@lorenzo.mezzini?source=post_page---byline--9cae614a11d0--------------------------------" rel="noopener follow">Lorenzo Mezzini</a></p></div></div></div><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ib ic ah ai aj ak al am an ao ap aq ar id ie if" disabled="">Follow</button></p></div></div></span></div></div><div class="l ig"><span class="bf b bg z dx"><div class="ab cn ih ii ij"><div class="ik il ab"><div class="bf b bg z dx ab im"><span class="in l ig">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--9cae614a11d0--------------------------------" rel="noopener follow"><p class="bf b bg z io ip iq ir is it iu iv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">7 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Nov 11, 2024</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w ea eb q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon ed in kg kh ki"><div class=""><div class="kj kk kl km kn ko kp am kq kr ks ki"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kt ku kv kw kx ky kz"><p class="bf b dy z dx"><span class="kk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kj lc ld ab q ee le lf" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lb"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count la lb">1</span></p></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lg k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lh an ao ap id li lj lk" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep ll cn"><div class="l ae"><div class="ab cb"><div class="lm ln lo lp lq lr ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ml"><img src="../Images/aa6c46de491ac7955aced3b1c58d4cf0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*nlF7RCBaNPvQAUgD"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Photo by <a class="af nc" href="https://unsplash.com/@joshua_hoehne?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Joshua Hoehne</a> on <a class="af nc" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="18f7" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">In the age of social media, analyzing conversation volumes has become crucial for understanding user behaviours, detecting trends, and, most importantly, identifying anomalies. Knowing when an anomaly is occurring can help management and marketing respond in crisis scenarios.</p><p id="915c" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">In this article, we’ll explore a residual-based approach for detecting anomalies in social media volume time series data, using a real-world example from Twitter. For such a task, I am going to use data from <a class="af nc" href="https://github.com/numenta/NAB" rel="noopener ugc nofollow" target="_blank">Numenta Anomaly Benchmark</a>, which provides volume data from Twitter posts with a 5-minute frame window amongst its benchmarks.</p><p id="7143" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">We will analyze the data from two perspectives: as a first exercise we will detect anomalies using the full dataset, and then we will detect anomalies in a real-time scenario to check how responsive this method is.</p></div></div></div><div class="ab cb nz oa ob oc" role="separator"><span class="od by bm oe of og"/><span class="od by bm oe of og"/><span class="od by bm oe of"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="02a3" class="oh oi fq bf oj ok ol gq om on oo gt op oq or os ot ou ov ow ox oy oz pa pb pc bk">Detecting anomalies with the full dataset</h1><h2 id="dffb" class="pd oi fq bf oj pe pf pg om ph pi pj op nm pk pl pm nq pn po pp nu pq pr ps pt bk"><strong class="al">Analyzing a Sample Twitter Volume Dataset</strong></h2><p id="7839" class="pw-post-body-paragraph nd ne fq nf b go pu nh ni gr pv nk nl nm pw no np nq px ns nt nu py nw nx ny fj bk">Let’s start by loading and visualizing a sample Twitter volume dataset for Apple:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk pz"><img src="../Images/22c65890ffd6b0b6c1656361831c0dfa.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Nx7KmnJnzgmck5qCdVC6JQ.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Volume and log-Volume observed for AAPL Twitter volumes<br/>Image by Author</figcaption></figure><p id="1bd2" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">From this plot, we can see that there are several spikes (anomalies) in our data. These spikes in volumes are the ones we want to identify.</p><p id="d34b" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Looking at the second plot (log-scale) we can see that the Twitter volume data shows a clear daily cycle, with higher activity during the day and lower activity at night. This seasonal pattern is common in social media data, as it reflects the day-night activity of users. It also presents a weekly seasonality, but we will ignore it.</p><h2 id="d682" class="pd oi fq bf oj pe pf pg om ph pi pj op nm pk pl pm nq pn po pp nu pq pr ps pt bk">Removing Seasonal Trends</h2><p id="7593" class="pw-post-body-paragraph nd ne fq nf b go pu nh ni gr pv nk nl nm pw no np nq px ns nt nu py nw nx ny fj bk">We want to make sure that this cycle does not interfere with our conclusions, thus we will remove it. To remove this seasonality, we’ll perform a seasonal decomposition.</p><p id="6daa" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">First, we’ll calculate the moving average (MA) of the volume, which will capture the trend. Then, we’ll compute the ratio of the observed volume to the MA, which gives us the multiplicative seasonal effect.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk qa"><img src="../Images/f501a6697ad6760f04208d3af5c9ae29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1260/format:webp/1*T7rUg13QQfjf7Iiv6yohCQ.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Multiplicative effect of time on volumes <br/>Image by Author</figcaption></figure><p id="1918" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">As expected, the seasonal trend follows a day/night cycle with its peak during the day hours and its saddle at nighttime.</p><p id="5079" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">To further proceed with the decomposition we need to calculate the expected value of the volume given the multiplicative trend found before.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk pz"><img src="../Images/9c15e62b66dce0ae415eba2189620db1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*z0f6Qhf77jlWxmxq7HnUiQ.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Volume and log-Volume observed and expected for AAPL Twitter volumes<br/>Image by Author</figcaption></figure><h2 id="4ad6" class="pd oi fq bf oj pe pf pg om ph pi pj op nm pk pl pm nq pn po pp nu pq pr ps pt bk"><strong class="al">Analyzing Residuals and Detecting Anomalies</strong></h2><p id="12ad" class="pw-post-body-paragraph nd ne fq nf b go pu nh ni gr pv nk nl nm pw no np nq px ns nt nu py nw nx ny fj bk">The final component of the decomposition is the error resulting from the subtraction between the expected value and the true value. We can consider this measure as the de-meaned volume accounting for seasonality:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk pz"><img src="../Images/3b054b29c8ae1dff7458a90e29410cc8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*CbJsPVMUoOehuTfwFpahlQ.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Absolute Error and log-Error after seasonal decomposition of AAPL Twitter volumes<br/>Image by Author</figcaption></figure><p id="121f" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Interestingly, the residual distribution closely follows a Pareto distribution. This property allows us to use the Pareto distribution to set a threshold for detecting anomalies, as we can flag any residuals that fall above a certain percentile (e.g., 0.9995) as potential anomalies.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk pz"><img src="../Images/cbf2d33f41a5ccc3349225eb0e711028.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1ylhtSJuOv7upAalzAv4jg.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Absolute Error and log-Error quantiles Vs Pareto quantiles<br/>Image by Author</figcaption></figure><p id="a7b1" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Now, I have to do a big disclaimer: this property I am talking about is not “True” per se. In my experience in social listening, I’ve observed that holds true with most social data. Except for some right skewness in a dataset with many anomalies.</p><p id="729a" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">In this specific case, we have well over 15k observations, hence we will set the p-value at 0.9995. Given this threshold, roughly 5 anomalies for every 10.000 observations will be detected (assuming a perfect Pareto distribution).</p><p id="d0fb" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Therefore, if we check which observation in our data has an error whose p-value is higher than 0.9995, we get the following signals:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk pz"><img src="../Images/825a02da7c854a300393682312658db1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EjiddgIapcXVRUCQV_f1CQ.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Signals anomalies of AAPL Twitter volumes<br/>Image by Author</figcaption></figure><p id="90dc" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">From this graph, we see that the observations with the highest volumes are highlighted as anomalies. Of course, if we desire more or fewer signals, we can adjust the selected p-value, keeping in mind that, as it decreases, it will increase the number of signals.</p></div></div></div><div class="ab cb nz oa ob oc" role="separator"><span class="od by bm oe of og"/><span class="od by bm oe of og"/><span class="od by bm oe of"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="5587" class="oh oi fq bf oj ok ol gq om on oo gt op oq or os ot ou ov ow ox oy oz pa pb pc bk"><strong class="al">Real-Time Anomaly Detection</strong></h1><p id="4874" class="pw-post-body-paragraph nd ne fq nf b go pu nh ni gr pv nk nl nm pw no np nq px ns nt nu py nw nx ny fj bk">Now let’s switch to a real-time scenario. In this case, we will run the same algorithm for every new observation and check both which signals are returned and how quickly the signals are returned after the observation takes place:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk pz"><img src="../Images/caf3d10fbb73d8281539f2b18a4b19ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*73b_MPUQ8ZEaIp4LrTGfbA.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Live Signals of AAPL Twitter volumes<br/>Image by Author</figcaption></figure><p id="747c" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">We can clearly see that this time, we have more signals. This is justified as the Pareto curve we fit changes as the data at our disposal changes. The first three signals can be considered anomalies if we check the data up to “2015–03–08” but these are less important if we consider the entire dataset.</p><p id="07b6" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">By construction, the code provided returns with a signal limiting itself to the previous 24 hours. However, as we can see below, most of the signals are returned as soon as the new observation is considered, with a few exceptions already bolded:</p><pre class="mm mn mo mp mq qb qc qd bp qe bb bk"><span id="5a85" class="qf oi fq qc b bg qg qh l qi qj">New signal at datetime 2015-03-03 21:02:53, relative to timestamp 2015-03-03 21:02:53<br/>New signal at datetime 2015-03-03 21:07:53, relative to timestamp 2015-03-03 21:07:53<br/>New signal at datetime 2015-03-03 21:12:53, relative to timestamp 2015-03-03 21:12:53<br/>New signal at datetime 2015-03-03 21:17:53, relative to timestamp 2015-03-03 21:17:53 **<br/>New signal at datetime 2015-03-05 05:37:53, relative to timestamp 2015-03-04 20:07:53 <br/>New signal at datetime 2015-03-07 09:47:53, relative to timestamp 2015-03-06 19:42:53 ** <br/>New signal at datetime 2015-03-09 15:57:53, relative to timestamp 2015-03-09 15:57:53 <br/>New signal at datetime 2015-03-09 16:02:53, relative to timestamp 2015-03-09 16:02:53<br/>New signal at datetime 2015-03-09 16:07:53, relative to timestamp 2015-03-09 16:07:53<br/>New signal at datetime 2015-03-14 01:37:53, relative to timestamp 2015-03-14 01:37:53<br/>New signal at datetime 2015-03-14 08:52:53, relative to timestamp 2015-03-14 08:52:53<br/>New signal at datetime 2015-03-14 09:02:53, relative to timestamp 2015-03-14 09:02:53<br/>New signal at datetime 2015-03-15 16:12:53, relative to timestamp 2015-03-15 16:12:53<br/>New signal at datetime 2015-03-16 02:52:53, relative to timestamp 2015-03-16 02:52:53<br/>New signal at datetime 2015-03-16 02:57:53, relative to timestamp 2015-03-16 02:57:53<br/>New signal at datetime 2015-03-16 03:02:53, relative to timestamp 2015-03-16 03:02:53<br/>New signal at datetime 2015-03-30 17:57:53, relative to timestamp 2015-03-30 17:57:53<br/>New signal at datetime 2015-03-30 18:02:53, relative to timestamp 2015-03-30 18:02:53<br/>New signal at datetime 2015-03-31 03:02:53, relative to timestamp 2015-03-31 03:02:53<br/>New signal at datetime 2015-03-31 03:07:53, relative to timestamp 2015-03-31 03:07:53<br/>New signal at datetime 2015-03-31 03:12:53, relative to timestamp 2015-03-31 03:12:53<br/>New signal at datetime 2015-03-31 03:17:53, relative to timestamp 2015-03-31 03:17:53<br/>New signal at datetime 2015-03-31 03:22:53, relative to timestamp 2015-03-31 03:22:53<br/>New signal at datetime 2015-03-31 03:27:53, relative to timestamp 2015-03-31 03:27:53<br/>New signal at datetime 2015-03-31 03:32:53, relative to timestamp 2015-03-31 03:32:53<br/>New signal at datetime 2015-03-31 03:37:53, relative to timestamp 2015-03-31 03:37:53<br/>New signal at datetime 2015-03-31 03:42:53, relative to timestamp 2015-03-31 03:42:53<br/>New signal at datetime 2015-03-31 20:22:53, relative to timestamp 2015-03-31 20:22:53 **<br/>New signal at datetime 2015-04-02 12:52:53, relative to timestamp 2015-04-01 20:42:53 ** <br/>New signal at datetime 2015-04-14 14:12:53, relative to timestamp 2015-04-14 14:12:53<br/>New signal at datetime 2015-04-14 22:52:53, relative to timestamp 2015-04-14 22:52:53<br/>New signal at datetime 2015-04-14 22:57:53, relative to timestamp 2015-04-14 22:57:53<br/>New signal at datetime 2015-04-14 23:02:53, relative to timestamp 2015-04-14 23:02:53<br/>New signal at datetime 2015-04-14 23:07:53, relative to timestamp 2015-04-14 23:07:53<br/>New signal at datetime 2015-04-14 23:12:53, relative to timestamp 2015-04-14 23:12:53<br/>New signal at datetime 2015-04-14 23:17:53, relative to timestamp 2015-04-14 23:17:53<br/>New signal at datetime 2015-04-14 23:22:53, relative to timestamp 2015-04-14 23:22:53<br/>New signal at datetime 2015-04-14 23:27:53, relative to timestamp 2015-04-14 23:27:53<br/>New signal at datetime 2015-04-21 20:12:53, relative to timestamp 2015-04-21 20:12:53</span></pre><p id="a3cd" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">As we can see, the algorithm is able to detect anomalies in real time, with most signals being raised as soon as the new observation is considered. This allows organizations to respond quickly to unexpected changes in social media conversation volumes.</p></div></div></div><div class="ab cb nz oa ob oc" role="separator"><span class="od by bm oe of og"/><span class="od by bm oe of og"/><span class="od by bm oe of"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="e0ee" class="oh oi fq bf oj ok ol gq om on oo gt op oq or os ot ou ov ow ox oy oz pa pb pc bk">Conclusions and Further Improvements</h1><p id="3dc4" class="pw-post-body-paragraph nd ne fq nf b go pu nh ni gr pv nk nl nm pw no np nq px ns nt nu py nw nx ny fj bk">The residual-based approach presented in this article provides a responsive tool for detecting anomalies in social media volume time series. This method can help companies and marketers identify important events, trends, and potential crises as they happen.</p><p id="c08b" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">While this algorithm is already effective, there are several points that can be further developed, such as:</p><ul class=""><li id="3f8c" class="nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny qk ql qm bk">Dependence on a fixed window for real-time detection, as for now depends on all previous data</li><li id="2981" class="nd ne fq nf b go qn nh ni gr qo nk nl nm qp no np nq qq ns nt nu qr nw nx ny qk ql qm bk">Exploring different time granularities (e.g., hourly instead of 5-minute intervals)</li><li id="2bb3" class="nd ne fq nf b go qn nh ni gr qo nk nl nm qp no np nq qq ns nt nu qr nw nx ny qk ql qm bk">Validating the Pareto distribution assumption using statistical tests</li><li id="142e" class="nd ne fq nf b go qn nh ni gr qo nk nl nm qp no np nq qq ns nt nu qr nw nx ny qk ql qm bk">…</li></ul></div></div></div><div class="ab cb nz oa ob oc" role="separator"><span class="od by bm oe of og"/><span class="od by bm oe of og"/><span class="od by bm oe of"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="72f2" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Please leave some claps if you enjoyed the article and feel free to comment, any suggestion and feedback is appreciated!</p><p id="1078" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk"><a class="af nc" href="https://github.com/lorenzomezzini/MediumPosts/tree/main/AnomalyDetection" rel="noopener ugc nofollow" target="_blank"><em class="qs">Here you can find a notebook with an implementation</em></a><em class="qs">.</em></p></div></div></div></div>    
</body>
</html>