<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>8 Practical Prompt Engineering Tips for Better LLM Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>8 Practical Prompt Engineering Tips for Better LLM Apps</h1>
<blockquote>ÂéüÊñáÔºö<a href="https://towardsdatascience.com/8-practical-prompt-engineering-tips-for-better-llm-apps-430eef9b0950?source=collection_archive---------4-----------------------#2024-08-01">https://towardsdatascience.com/8-practical-prompt-engineering-tips-for-better-llm-apps-430eef9b0950?source=collection_archive---------4-----------------------#2024-08-01</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="gr gs gt gu gv ab"><div><div class="ab gw"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@almogbaku?source=post_page---byline--430eef9b0950--------------------------------" rel="noopener follow"><div class="l gx gy by gz ha"><div class="l ed"><img alt="Almog Baku" class="l ep by dd de cx" src="../Images/3ac36986f6ca0ba56c8edced6ec7dd07.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*-aPltT37mZxh8ag6FPhcHw.jpeg"/><div class="hb by l dd de em n hc eo"/></div></div></a></div></div><div class="hd ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--430eef9b0950--------------------------------" rel="noopener follow"><div class="l he hf by gz hg"><div class="l ed"><img alt="Towards Data Science" class="l ep by br hh cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hb by l br hh em n hc eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hi ab q"><div class="ab q hj"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hk hl bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hm" data-testid="authorName" href="https://medium.com/@almogbaku?source=post_page---byline--430eef9b0950--------------------------------" rel="noopener follow">Almog Baku</a></p></div></div></div><span class="hn ho" aria-hidden="true"><span class="bf b bg z dx">¬∑</span></span><p class="bf b hk hl dx"><button class="hp hq ah ai aj ak al am an ao ap aq ar hr hs ht" disabled="">Follow</button></p></div></div></span></div></div><div class="l hu"><span class="bf b bg z dx"><div class="ab cn hv hw hx"><div class="hy hz ab"><div class="bf b bg z dx ab ia"><span class="ib l hu">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hm ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--430eef9b0950--------------------------------" rel="noopener follow"><p class="bf b bg z ic id ie if ig ih ii ij bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hn ho" aria-hidden="true"><span class="bf b bg z dx">¬∑</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">9 min read</span><div class="ik il l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">¬∑</span></span></div><span data-testid="storyPublishDate">Aug 1, 2024</span></div></span></div></span></div></div></div><div class="ab cp im in io ip iq ir is it iu iv iw ix iy iz ja jb"><div class="h k w ea eb q"><div class="jr l"><div class="ab q js jt"><div class="pw-multi-vote-icon ed ib ju jv jw"><div class=""><div class="jx jy jz ka kb kc kd am ke kf kg jw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kh ki kj kk kl km kn"><p class="bf b dy z dx"><span class="jy">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao jx kq kr ab q ee ks kt" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="kp"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count ko kp">4</span></p></button></div></div></div><div class="ab q jc jd je jf jg jh ji jj jk jl jm jn jo jp jq"><div class="ku k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al kv an ao ap hr kw kx ky" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep kz cn"><div class="l ae"><div class="ab cb"><div class="la lb lc ld le lf ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al kv an ao ap hr lg lh kt li lj lk ll lm s ln lo lp lq lr ls lt u lu lv lw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al kv an ao ap hr lg lh kt li lj lk ll lm s ln lo lp lq lr ls lt u lu lv lw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al kv an ao ap hr lg lh kt li lj lk ll lm s ln lo lp lq lr ls lt u lu lv lw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><p id="da5d" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">‚Å§Prompt engineering is undoubtedly the most critical skill in developing an LLM-native application, as crafting the right prompts can significantly impact your application‚Äôs performance and reliability.‚Å§</p><p id="4e48" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">Over the past two years, I‚Äôve been helping organizations build and deploy dozens of LLM applications for real-world use cases. ‚Å§‚Å§This experience gave me valuable insights into effective prompting techniques. ‚Å§</p><p id="dc6d" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">This article, informed by the <a class="af mv" rel="noopener" target="_blank" href="/the-llm-triangle-principles-to-architect-reliable-ai-apps-d3753dd8542e">LLM Triangle Principles</a>, presents <strong class="lz fr">eight practical tips</strong> for prompt engineering to level up your LLM prompting game.</p><blockquote class="mw"><p id="ae8d" class="mx my fq bf mz na nb nc nd ne nf mu dx">‚ÄúLLM-Native apps are 10% sophisticated model, and 90% experimenting data-driven engineering work.‚Äù</p></blockquote><figure class="nj nk nl nm nn no ng nh paragraph-image"><div role="button" tabindex="0" class="np nq ed nr bh ns"><div class="ng nh ni"><img src="../Images/605d5e3a9c4a90b2659fc5bd57d9585e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bhanm35Uo5Bhb1Vc5NARUg.png"/></div></div><figcaption class="nu nv nw ng nh nx ny bf b bg z dx">(Generated with Midjourney)</figcaption></figure><p id="6673" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">Throughout this article, we'll use the ‚ÄúLanding Page Generator‚Äù example to demonstrate how each tip can be applied to enhance a real-world LLM application.</p><blockquote class="nz oa ob"><p id="ccc6" class="lx ly oc lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">You can also check out <a class="af mv" href="https://gist.github.com/AlmogBaku/5de026a355f9ef8984fa6a5bebd8f51f" rel="noopener ugc nofollow" target="_blank">the full script of Landing Page Generator example</a>, for a complete lookout.<br/><strong class="lz fr">Note:</strong> This is a simplified, non-production example created to illustrate these tips. The code and prompts are intentionally basic to highlight the concepts discussed.</p></blockquote></div></div></div><div class="ab cb od oe of og" role="separator"><span class="oh by bm oi oj ok"/><span class="oh by bm oi oj ok"/><span class="oh by bm oi oj"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="54c9" class="ol om fq bf on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg ph pi bk">1. Define Clear Cognitive Process Boundaries</h1><p id="0496" class="pw-post-body-paragraph lx ly fq lz b ma pj mc md me pk mg mh mi pl mk ml mm pm mo mp mq pn ms mt mu fj bk">Start by defining the objective for each agent or prompt. Stick to <strong class="lz fr">one cognitive process type per agent</strong>, such as: conceptualizing a landing page, selecting components, or generating content for specific sections.<br/>Having clear boundaries maintains focus and clarity in your LLM interactions, aligning with the <a class="af mv" rel="noopener" target="_blank" href="/the-llm-triangle-principles-to-architect-reliable-ai-apps-d3753dd8542e#3221"><em class="oc">Engineering Techniques</em></a> apex of the <a class="af mv" rel="noopener" target="_blank" href="/the-llm-triangle-principles-to-architect-reliable-ai-apps-d3753dd8542e#3221">LLM Triangle Principle</a>.</p><blockquote class="mw"><p id="4718" class="mx my fq bf mz na nb nc nd ne nf mu dx"><em class="po">‚Äú</em>Each step in our flow is a standalone process that must occur to achieve our task.<em class="po">‚Äù</em></p></blockquote><p id="97be" class="pw-post-body-paragraph lx ly fq lz b ma pp mc md me pq mg mh mi pr mk ml mm ps mo mp mq pt ms mt mu fj bk">For example, avoid combining different cognitive processes in the same prompt, which might yield suboptimal results. Instead, break these into separate, focused agents:</p><pre class="pu pv pw px py pz qa qb bp qc bb bk"><span id="de6b" class="qd om fq qa b bg qe qf l qg qh">def generate_landing_page_concept(input_data: LandingPageInput) -&gt; LandingPageConcept:<br/>    """<br/>    Generate a landing page concept based on the input data.<br/>    This function focuses on the creative process of conceptualizing the landing page.<br/>    """<br/>    pass<br/><br/>def select_landing_page_components(concept: LandingPageConcept) -&gt; List[LandingPageComponent]:<br/>    """<br/>    Select appropriate components for the landing page based on the concept.<br/>    This function is responsible only for choosing components,<br/>    not for generating their content or layout.<br/>    """<br/>    pass<br/><br/>def generate_component_content(component: LandingPageComponent, concept: LandingPageConcept) -&gt; ComponentContent:<br/>    """<br/>    Generate content for a specific landing page component.<br/>    This function focuses on creating appropriate content based on the component type and overall concept.<br/>    """<br/>    pass</span></pre><p id="3190" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">By defining <em class="oc">clear boundaries </em>for each agent, we can ensure that each step in our workflow is tailored to a specific mental task. This will <strong class="lz fr">improve the quality of outputs</strong> and make it <strong class="lz fr">easier to debug</strong> and refine.</p><h1 id="a3ee" class="ol om fq bf on oo qi oq or os qj ou ov ow qk oy oz pa ql pc pd pe qm pg ph pi bk">2. Specify Input/Output Clearly</h1><p id="dce6" class="pw-post-body-paragraph lx ly fq lz b ma pj mc md me pk mg mh mi pl mk ml mm pm mo mp mq pn ms mt mu fj bk">Define <strong class="lz fr">clear input and output</strong> structures to reflect the objectives and create explicit data models. This practice touches on the <a class="af mv" rel="noopener" target="_blank" href="/the-llm-triangle-principles-to-architect-reliable-ai-apps-d3753dd8542e">LLM Triangle Principles</a>' <a class="af mv" rel="noopener" target="_blank" href="/the-llm-triangle-principles-to-architect-reliable-ai-apps-d3753dd8542e#3221"><em class="oc">Engineering Techniques</em></a> and <a class="af mv" rel="noopener" target="_blank" href="/the-llm-triangle-principles-to-architect-reliable-ai-apps-d3753dd8542e#7b49"><em class="oc">Contextual Data</em></a> apexes.</p><pre class="pu pv pw px py pz qa qb bp qc bb bk"><span id="822f" class="qd om fq qa b bg qe qf l qg qh">class LandingPageInput(BaseModel):<br/>    brand: str<br/>    product_desc: str<br/>    campaign_desc: str<br/>    cta_message: str<br/>    target_audience: str<br/>    unique_selling_points: List[str]<br/><br/>class LandingPageConcept(BaseModel):<br/>    campaign_desc_reflection: str<br/>    campaign_motivation: str<br/>    campaign_narrative: str<br/>    campaign_title_types: List[str]<br/>    campaign_title: str<br/>    tone_and_style: List[str]</span></pre><p id="ccd0" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">These <a class="af mv" href="https://pydantic.dev/" rel="noopener ugc nofollow" target="_blank">Pydantic</a> models define the structure of our <strong class="lz fr">input and output data</strong> and define clear boundaries and expectations for the agent.</p><h1 id="2362" class="ol om fq bf on oo qi oq or os qj ou ov ow qk oy oz pa ql pc pd pe qm pg ph pi bk">3. Implement Guardrails</h1><p id="a000" class="pw-post-body-paragraph lx ly fq lz b ma pj mc md me pk mg mh mi pl mk ml mm pm mo mp mq pn ms mt mu fj bk">Place validations to ensure the quality and moderation of the LLM outputs. <a class="af mv" href="https://pydantic.dev/" rel="noopener ugc nofollow" target="_blank">Pydantic</a> is excellent for implementing these guardrails, and we can utilize its native features for that.</p><pre class="pu pv pw px py pz qa qb bp qc bb bk"><span id="f6b1" class="qd om fq qa b bg qe qf l qg qh">class LandingPageConcept(BaseModel):<br/>    campaign_narrative: str = Field(..., min_length=50)  # native validations<br/>    tone_and_style: List[str] = Field(..., min_items=2)  # native validations<br/><br/>    # ...rest of the fields... #<br/><br/>    @field_validator("campaign_narrative")<br/>    @classmethod<br/>    def validate_campaign_narrative(cls, v):<br/>        """Validate the campaign narrative against the content policy, using another AI model."""<br/>        response = client.moderations.create(input=v)<br/><br/>        if response.results[0].flagged:<br/>            raise ValueError("The provided text violates the content policy.")<br/><br/>        return v</span></pre><p id="03f6" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">In this example, ensuring the quality of our application by defining two types of validators:</p><ul class=""><li id="eac2" class="lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu qn qo qp bk"><strong class="lz fr">Using Pydanitc‚Äôs </strong><code class="cx qq qr qs qa b"><strong class="lz fr">Field</strong></code> to define simple validations, such as a minimum of 2 tone/style attributes, or a minimum of 50 characters in the narrative</li><li id="4d95" class="lx ly fq lz b ma qt mc md me qu mg mh mi qv mk ml mm qw mo mp mq qx ms mt mu qn qo qp bk"><strong class="lz fr">Using a custom </strong><code class="cx qq qr qs qa b"><strong class="lz fr">field_validator</strong></code><strong class="lz fr"> </strong>that ensures the generated narrative is complying with our content moderation policy (using AI)</li></ul><h1 id="5f8f" class="ol om fq bf on oo qi oq or os qj ou ov ow qk oy oz pa ql pc pd pe qm pg ph pi bk">4. Align with Human Cognitive Processes</h1><p id="eb62" class="pw-post-body-paragraph lx ly fq lz b ma pj mc md me pk mg mh mi pl mk ml mm pm mo mp mq pn ms mt mu fj bk">Structure your LLM workflow to mimic human cognitive processes by breaking down complex tasks into smaller steps that follow a logical sequence. To do that, follow the <em class="oc">SOP (Standard Operating Procedure)</em> guiding principle of the <a class="af mv" rel="noopener" target="_blank" href="/the-llm-triangle-principles-to-architect-reliable-ai-apps-d3753dd8542e#be9a">LLM Triangle Principles</a>.</p><blockquote class="mw"><p id="1b65" class="mx my fq bf mz na nb nc nd ne nf mu dx"><em class="po">‚ÄúWithout an SOP, even the most powerful LLM will fail to deliver consistently high-quality results.‚Äù</em></p></blockquote><h2 id="9c68" class="qy om fq bf on qz ra rb or rc rd re ov mi rf rg rh mm ri rj rk mq rl rm rn ro bk">4.1 Capture hidden implicit cognition jumps</h2><p id="c099" class="pw-post-body-paragraph lx ly fq lz b ma pj mc md me pk mg mh mi pl mk ml mm pm mo mp mq pn ms mt mu fj bk">In our example, we expect the model to return <code class="cx qq qr qs qa b">LandingPageConcept</code> as a result. By asking the model to output certain fields, we guide the LLM similar to how a human marketer or designer might approach creating a landing page concept.</p><pre class="pu pv pw px py pz qa qb bp qc bb bk"><span id="473f" class="qd om fq qa b bg qe qf l qg qh">class LandingPageConcept(BaseModel):<br/>    campaign_desc_reflection: str  # Encourages analysis of the campaign description<br/>    campaign_motivation: str       # Prompts thinking about the 'why' behind the campaign<br/>    campaign_narrative: str        # Guides creation of a cohesive story for the landing page<br/>    campaign_title_types: List[str]# Promotes brainstorming different title approaches<br/>    campaign_title: str            # The final decision on the title<br/>    tone_and_style: List[str]      # Defines the overall feel of the landing page</span></pre><p id="d3ee" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">The <code class="cx qq qr qs qa b">LandingPageConcept</code> structure encourages the LLM to follow a human-like reasoning process, mirroring the <em class="oc">subtle mental leaps </em>(<a class="af mv" rel="noopener" target="_blank" href="/the-llm-triangle-principles-to-architect-reliable-ai-apps-d3753dd8542e#f8c9">implicit cognition "jumps"</a>) that an expert would make instinctively, just as we modeled in our SOP.</p><h2 id="5629" class="qy om fq bf on qz rp rb or rc rq re ov mi rr rg rh mm rs rj rk mq rt rm rn ro bk">4.2 Breaking complex processes into multiple steps/agents</h2><p id="3b00" class="pw-post-body-paragraph lx ly fq lz b ma pj mc md me pk mg mh mi pl mk ml mm pm mo mp mq pn ms mt mu fj bk">For complex tasks, break the process down into various steps, each handled by a separate LLM call or <em class="oc">"agent"</em>:</p><pre class="pu pv pw px py pz qa qb bp qc bb bk"><span id="f8f7" class="qd om fq qa b bg qe qf l qg qh">async def generate_landing_page(input_data: LandingPageInput) -&gt; LandingPageOutput:<br/>    # Step 1: Conceptualize the campaign<br/>    concept = await generate_concept(input_data)<br/>    <br/>    # Step 2: Select appropriate components<br/>    selected_components = await select_components(concept)<br/>    <br/>    # Step 3: Generate content for each selected component<br/>    component_contents = {<br/>        component: await generate_component_content(input_data, concept, component)<br/>        for component in selected_components<br/>    }<br/>    <br/>    # Step 4: Compose the final HTML<br/>    html = await compose_html(concept, component_contents)<br/>    <br/>    return LandingPageOutput(concept, selected_components, component_contents, html)</span></pre><figure class="pu pv pw px py no ng nh paragraph-image"><div role="button" tabindex="0" class="np nq ed nr bh ns"><div class="ng nh ru"><img src="../Images/7faf32bd345890ba949330bc1e8ad532.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*an2EMLfy3uNmSWEDWOhvwg.png"/></div></div><figcaption class="nu nv nw ng nh nx ny bf b bg z dx">Illustration of the multi-agent process code. (Image by author)</figcaption></figure><p id="d2e1" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">This multi-agent approach aligns with how humans tackle complex problems ‚Äî by breaking them into smaller parts.</p><h1 id="63d6" class="ol om fq bf on oo qi oq or os qj ou ov ow qk oy oz pa ql pc pd pe qm pg ph pi bk">5. Leverage Structured Data (YAML)</h1><p id="df7a" class="pw-post-body-paragraph lx ly fq lz b ma pj mc md me pk mg mh mi pl mk ml mm pm mo mp mq pn ms mt mu fj bk"><a class="af mv" href="https://en.wikipedia.org/wiki/YAML" rel="noopener ugc nofollow" target="_blank">YAML</a> is a <em class="oc">popular</em> human-friendly data serialization format. It‚Äôs designed to be easily readable by humans while still being easy for machines to parse ‚Äî which makes it classic for LLM usage.</p><p id="b450" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">I found YAML is particularly effective for LLM interactions and yields much better results across different models. It focuses the token processing on valuable content rather than syntax.</p><p id="136d" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">YAML is also much more portable across different LLM providers and allows you to maintain a structured output format.</p><pre class="pu pv pw px py pz qa qb bp qc bb bk"><span id="80bd" class="qd om fq qa b bg qe qf l qg qh">async def generate_component_content(input_data: LandingPageInput, concept: LandingPageConcept,component: LandingPageComponent) -&gt; ComponentContent:<br/>    few_shots = {<br/>        LandingPageComponent.HERO: {<br/>            "input": LandingPageInput(<br/>                brand="Mustacher",<br/>                product_desc="Luxurious mustache cream for grooming and styling",<br/>                # ... rest of the input data ...<br/>            ),<br/>            "concept": LandingPageConcept(<br/>                campaign_title="Celebrate Dad's Dash of Distinction",<br/>                tone_and_style=["Warm", "Slightly humorous", "Nostalgic"]<br/>                # ... rest of the concept ...<br/>            ),<br/>            "output": ComponentContent(<br/>                motivation="The hero section captures attention and communicates the core value proposition.",<br/>                content={<br/>                    "headline": "Honor Dad's Distinction",<br/>                    "subheadline": "The Art of Mustache Care",<br/>                    "cta_button": "Shop Now"<br/>                }<br/>            )<br/>        },<br/>        # Add more component examples as needed<br/>    }<br/><br/>    sys = "Craft landing page component content. Respond in YAML with motivation and content structure as shown."<br/>    <br/>    messages = [{"role": "system", "content": sys}]<br/>    messages.extend([<br/>        message for example in few_shots.values() for message in [<br/>            {"role": "user", "content": to_yaml({"input": example["input"], "concept": example["concept"], "component": component.value})},<br/>            {"role": "assistant", "content": to_yaml(example["output"])}<br/>        ]<br/>    ])<br/>    messages.append({"role": "user", "content": to_yaml({"input": input_data, "concept": concept, "component": component.value})})<br/><br/>    response = await client.chat.completions.create(model="gpt-4o", messages=messages)<br/>    raw_content = yaml.safe_load(sanitize_code_block(response.choices[0].message.content))<br/>    return ComponentContent(**raw_content)</span></pre><p id="3194" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">Notice how we're using few-shot examples to <em class="oc">"show, don't tell"</em> the expected YAML format. This approach is more effective than explicit instructions in prompt for the output structure.</p><h1 id="9149" class="ol om fq bf on oo qi oq or os qj ou ov ow qk oy oz pa ql pc pd pe qm pg ph pi bk">6. Craft Your Contextual Data</h1><p id="e6e3" class="pw-post-body-paragraph lx ly fq lz b ma pj mc md me pk mg mh mi pl mk ml mm pm mo mp mq pn ms mt mu fj bk">Carefully consider how to model and present data to the LLM. This tip is central to the <a class="af mv" rel="noopener" target="_blank" href="/the-llm-triangle-principles-to-architect-reliable-ai-apps-d3753dd8542e#7b49"><em class="oc">Contextual Data</em></a> apex of the <a class="af mv" rel="noopener" target="_blank" href="/the-llm-triangle-principles-to-architect-reliable-ai-apps-d3753dd8542e#7b49">LLM Triangle Principles</a>.</p><blockquote class="mw"><p id="6b30" class="mx my fq bf mz na nb nc nd ne nf mu dx"><em class="po">‚ÄúEven the most powerful model requires relevant and well-structured contextual data to shine.‚Äù</em></p></blockquote><p id="d8db" class="pw-post-body-paragraph lx ly fq lz b ma pp mc md me pq mg mh mi pr mk ml mm ps mo mp mq pt ms mt mu fj bk">Don‚Äôt throw away all the data you have on the model. Instead, inform the model with the pieces of information that are relevant to the objective you defined.</p><pre class="pu pv pw px py pz qa qb bp qc bb bk"><span id="cb6a" class="qd om fq qa b bg qe qf l qg qh">async def select_components(concept: LandingPageConcept) -&gt; List[LandingPageComponent]:<br/>    sys_template = jinja_env.from_string("""<br/>    Your task is to select the most appropriate components for a landing page based on the provided concept.<br/>    Choose from the following components:<br/>    {% for component in components %}<br/>    - {{ component.value }}<br/>    {% endfor %}<br/>    You MUST respond ONLY in a valid YAML list of selected components.<br/>    """)<br/><br/>    sys = sys_template.render(components=LandingPageComponent)<br/><br/>    prompt = jinja_env.from_string("""<br/>    Campaign title: "{{ concept.campaign_title }}"<br/>    Campaign narrative: "{{ concept.campaign_narrative }}"<br/>    Tone and style attributes: {{ concept.tone_and_style | join(', ') }}<br/>    """)<br/><br/>    messages = [{"role": "system", "content": sys}] + few_shots + [<br/>        {"role": "user", "content": prompt.render(concept=concept)}]<br/><br/>    response = await client.chat.completions.create(model="gpt-4", messages=messages)<br/><br/>    selected_components = yaml.safe_load(response.choices[0].message.content)<br/>    return [LandingPageComponent(component) for component in selected_components]</span></pre><p id="56b5" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">In this example, we're using <a class="af mv" href="https://jinja.palletsprojects.com/en/3.1.x/" rel="noopener ugc nofollow" target="_blank">Jinja</a> templates to dynamically compose our prompts. This creates focused and relevant contexts for each LLM interaction elegantly.</p><blockquote class="mw"><p id="7a31" class="mx my fq bf mz na nb nc nd ne nf mu dx">‚ÄúData fuels the engine of LLM-native applications. A strategic design of contextual data unlocks their true potential.‚Äù</p></blockquote><h1 id="3a2a" class="ol om fq bf on oo qi oq or os qj ou ov ow rv oy oz pa rw pc pd pe rx pg ph pi bk">6.1 Harness the power of few-shot learning</h1><p id="a5a5" class="pw-post-body-paragraph lx ly fq lz b ma pj mc md me pk mg mh mi pl mk ml mm pm mo mp mq pn ms mt mu fj bk">Few-shot learning is a must-have technique in prompt engineering. Providing the LLM with relevant examples significantly improves its understanding of the task.</p><p id="d8e5" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">Notice that in both approaches we discuss below, we <strong class="lz fr">reuse our Pydantic models for the few-shots</strong> ‚Äî this trick ensures consistency between the examples and our actual task! Unfortunately, I learned it the hard way.</p><h2 id="68ae" class="qy om fq bf on qz rp rb or rc rq re ov mi rr rg rh mm rs rj rk mq rt rm rn ro bk">6.1.1 Examples Few-Shot Learning</h2><p id="b964" class="pw-post-body-paragraph lx ly fq lz b ma pj mc md me pk mg mh mi pl mk ml mm pm mo mp mq pn ms mt mu fj bk">Take a look at the <code class="cx qq qr qs qa b">few_shots</code> dictionary in section 5. In this approach:</p><p id="dca5" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">Examples are added to the <code class="cx qq qr qs qa b">messages</code> list as separate user and assistant messages, followed by the actual user input.</p><pre class="pu pv pw px py pz qa qb bp qc bb bk"><span id="e83a" class="qd om fq qa b bg qe qf l qg qh">messages.extend([<br/>    message for example in few_shots for message in [<br/>        {"role": "user", "content": to_yaml(example["input"])},<br/>        {"role": "assistant", "content": to_yaml(example["output"])}<br/>    ]<br/>])<br/># then we can add the user prompt<br/>messages.append({"role": "user", "content": to_yaml(input_data)})</span></pre><p id="9560" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">By placing the examples as <code class="cx qq qr qs qa b">messages</code>, we align with the training methodology of instruction models. It allows the model to see multiple ‚Äúexample interactions‚Äù before processing the user input ‚Äî helping it understand the expected input-output pattern.</p><p id="27ef" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">As your application grows, you can add more few-shots to cover more use-cases. For even more advanced applications, consider implementing <a class="af mv" href="https://arxiv.org/abs/1804.09458" rel="noopener ugc nofollow" target="_blank">dynamic few-shot</a> selection, where the most relevant examples are chosen based on the current input.</p><h2 id="869d" class="qy om fq bf on qz rp rb or rc rq re ov mi rr rg rh mm rs rj rk mq rt rm rn ro bk">6.1.2 Task-Specific Few-Shot Learning</h2><p id="8944" class="pw-post-body-paragraph lx ly fq lz b ma pj mc md me pk mg mh mi pl mk ml mm pm mo mp mq pn ms mt mu fj bk">This method uses examples directly related to the current task <em class="oc">within the </em><strong class="lz fr"><em class="oc">prompt</em></strong><em class="oc"> itself. </em>For instance, this prompt template is used for generating additional unique selling points:</p><pre class="pu pv pw px py pz qa qb bp qc bb bk"><span id="6da9" class="qd om fq qa b bg qe qf l qg qh">Generate {{ num_points }} more unique selling points for our {{ brand }} {{ product_desc }}, following this style:<br/>{% for point in existing_points %}<br/>- {{ point }}<br/>{% endfor %}</span></pre><p id="e59b" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">This provides targeted guidance for specific content generation tasks by including the examples <strong class="lz fr">directly in the prompt</strong> rather than as separate messages.</p><h1 id="a711" class="ol om fq bf on oo qi oq or os qj ou ov ow qk oy oz pa ql pc pd pe qm pg ph pi bk">7. KISS ‚Äî Keep It Simple, Stupid</h1><p id="5982" class="pw-post-body-paragraph lx ly fq lz b ma pj mc md me pk mg mh mi pl mk ml mm pm mo mp mq pn ms mt mu fj bk">While fancy prompt engineering techniques like ‚ÄúTree of Thoughts‚Äù or ‚ÄúGraph of Thoughts‚Äù are intriguing, especially for research, I found them quite impractical and often overkill for production. For real applications, focus on designing a proper LLM architecture(aka workflow engineering).</p><p id="4657" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">This extends to the use of agents in your LLM applications. It's crucial to understand the distinction between standard agents and autonomous agents:</p><blockquote class="nz oa ob"><p id="379e" class="lx ly oc lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk"><strong class="lz fr">Agents:</strong> ‚ÄúTake me from A ‚Üí B by doing XYZ.‚Äù</p><p id="3b44" class="lx ly oc lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk"><strong class="lz fr">Autonomous Agents:</strong>‚ÄúTake me from A ‚Üí B by doing something, I don‚Äôt care how.‚Äù</p></blockquote><p id="9301" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">While autonomous agents offer flexibility and quicker development, they can also introduce unpredictability and debugging challenges. Use autonomous agents carefully ‚Äî only when the benefits <em class="oc">clearly outweigh</em> the potential loss of control and increased complexity.</p><figure class="pu pv pw px py no ng nh paragraph-image"><div role="button" tabindex="0" class="np nq ed nr bh ns"><div class="ng nh ni"><img src="../Images/cd8b67d63da85cbb333002cf95f30b70.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EI5g2QsYL8k4vAiNFuZvDg.png"/></div></div><figcaption class="nu nv nw ng nh nx ny bf b bg z dx">(Generated with Midjourney)</figcaption></figure><h1 id="19b5" class="ol om fq bf on oo qi oq or os qj ou ov ow qk oy oz pa ql pc pd pe qm pg ph pi bk">8. Iterate, Iterate, Iterate!</h1><p id="aa34" class="pw-post-body-paragraph lx ly fq lz b ma pj mc md me pk mg mh mi pl mk ml mm pm mo mp mq pn ms mt mu fj bk">Continuous experimentation is vital to improving your LLM-native applications. Don't be intimidated by the idea of experiments ‚Äî they can be as small as tweaking a prompt. As outlined in <a class="af mv" rel="noopener" target="_blank" href="/building-llm-apps-a-clear-step-by-step-guide-1fe1e6ef60fd">"Building LLM Apps: A Clear Step-by-Step Guide,"</a> it's crucial to <em class="oc">establish a baseline </em>and<em class="oc"> </em>track improvements against it.</p><blockquote class="mw"><p id="bdce" class="mx my fq bf mz na nb nc nd ne nf mu dx">Like everything else in ‚ÄúAI,‚Äù LLM-native apps require a <strong class="al">research and experimentation <em class="po">mindset</em>.</strong></p></blockquote><p id="802d" class="pw-post-body-paragraph lx ly fq lz b ma pp mc md me pq mg mh mi pr mk ml mm ps mo mp mq pt ms mt mu fj bk">Another great trick is to try your prompts on a weaker model than the one you aim to use in production(such as open-source 8B models) ‚Äî an ‚Äúokay‚Äù performing prompt on a smaller model will perform much better on a larger model.</p></div></div></div><div class="ab cb od oe of og" role="separator"><span class="oh by bm oi oj ok"/><span class="oh by bm oi oj ok"/><span class="oh by bm oi oj"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="9408" class="ol om fq bf on oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg ph pi bk">Conclusion</h1><p id="ede3" class="pw-post-body-paragraph lx ly fq lz b ma pj mc md me pk mg mh mi pl mk ml mm pm mo mp mq pn ms mt mu fj bk">These eight tips provide a solid foundation for effective prompt engineering in LLM-native applications. By applying these tips in your prompts, you'll be able to create more reliable, efficient, and scalable LLM-native applications.</p><p id="1372" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">Remember, the goal isn't to create the most complex system but to build something that works in the real world. Keep experimenting, learning, and building ‚Äî the possibilities are endless.</p></div></div></div><div class="ab cb od oe of og" role="separator"><span class="oh by bm oi oj ok"/><span class="oh by bm oi oj ok"/><span class="oh by bm oi oj"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="3047" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">If you find this article helpful, please give it a few <strong class="lz fr">claps</strong> üëè on Medium and <strong class="lz fr">share</strong> it with your fellow AI enthusiasts. Your support means the world to me! üåç</p><p id="b655" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">Let's keep the conversation going ‚Äî feel free to reach out via <a class="af mv" href="mailto:almog.baku@gmail.com" rel="noopener ugc nofollow" target="_blank">email</a> or <a class="af mv" href="https://www.linkedin.com/in/almogbaku/" rel="noopener ugc nofollow" target="_blank">connect on LinkedIn</a> ü§ù</p><p id="1bb2" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">Special thanks to <span class="ho"><span class="ho" aria-hidden="false"><a class="ry hp rz" href="https://medium.com/u/251cd1007ce8?source=post_page---user_mention--430eef9b0950--------------------------------" rel="noopener" target="_blank">Liron Izhaki Allerhand</a></span></span> and <span class="ho"><span class="ho" aria-hidden="false"><a class="ry hp rz" href="https://medium.com/u/e0607cd7607d?source=post_page---user_mention--430eef9b0950--------------------------------" rel="noopener" target="_blank">Yam Peleg</a></span></span>; this article is based on insights from our conversations.</p></div></div></div></div>    
</body>
</html>