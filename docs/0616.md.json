["```py\nlocals {\n  region = \"us-east-1\"\n}\n\nresource \"aws_security_group\" \"vpce_sg\" {\n  name        = \"AllowTLS\"\n  description = \"Allow TLS inbound traffic and all outbound traffic\"\n  vpc_id      = aws_vpc.your_vpc.id\n\n  tags = {\n    Name = \"allow_tls_for_vpce\"\n  }\n}\n\nresource \"aws_vpc_security_group_ingress_rule\" \"allow_tls_ipv4\" {\n  security_group_id = aws_security_group.allow_tls.id\n  cidr_ipv4         = aws_vpc.your_vpc.cidr_block\n  from_port         = 443\n  ip_protocol       = \"tcp\"\n  to_port           = 443\n}\n\ndata \"aws_iam_policy_document\" \"codeartifact_vpce_base_policy\" {\n  statement {\n    sid    = \"EnableRoles\"\n    effect = \"Allow\"\n    actions = [\n      \"codeartifact:GetAuthorizationToken\",\n      \"codeartifact:GetRepositoryEndpoint\",\n      \"codeartifact:ReadFromRepository\",\n      \"sts:GetServiceBearerToken\"\n    ]\n    resources = [\n      \"*\",\n    ]\n    principals {\n      type = \"AWS\"\n      identifiers = [\n        aws_iam_role.your_sagemaker_execution_role.arn\n      ]\n    }\n  }\n}\n\nresource \"aws_vpc_endpoint\" \"codeartifact_api_vpce\" {\n  vpc_id            = aws_vpc.your_vpc.id\n  service_name      = \"com.amazonaws.${local.region}.codeartifact.api\"\n  vpc_endpoint_type = \"Interface\"\n  subnet_ids        = aws_subnets.your_private_subnets.ids\n\n  security_group_ids = [\n    aws_security_group.vpce_sg.id,\n  ]\n\n  private_dns_enabled = true\n  policy              = data.aws_iam_policy_document.codeartifact_vpce_base_policy.json\n  tags = { Name = \"codeartifact-api-vpc-endpoint\" }\n}\n```", "```py\nresource \"aws_codeartifact_domain\" \"my_domain\" {\n  domain = \"my-domain\"\n\n  encryption_key = \"\"\n\n  tags = { Name = \"my-codeartifact-domain\" }\n}\n\nresource \"aws_codeartifact_repository\" \"public_pypi\" {\n  repository = \"pypi-store\"\n  domain     = aws_codeartifact_domain.my_domain.domain\n\n  external_connections {\n    external_connection_name = \"public:pypi\"\n  }\n\n  tags = { Name = \"pypi-store-repository\" }\n}\n\nresource \"aws_codeartifact_repository\" \"my_repository\" {\n  repository = \"my_repository\"\n  domain     = aws_codeartifact_domain.my_domain.domain\n\n  upstream {\n    repository_name = aws_codeartifact_repository.public_pypi.repository\n  }\n\n  tags = { Name = \"my-codeartifact-repository\" }\n}\n\ndata \"aws_iam_policy_document\" \"my_repository_policy_document\" {\n  statement {\n    effect = \"Allow\"\n\n    principals {\n      type        = \"AWS\"\n      identifiers = [aws_iam_role.your_sagemaker_execution_role.arn]\n    }\n\n    actions   = [\"codeartifact:ReadFromRepository\"]\n    resources = [aws_codeartifact_repository.my_repository.arn]\n  }\n}\n\nresource \"aws_codeartifact_repository_permissions_policy\" \"my_repository_policy\" {\n  repository      = aws_codeartifact_repository.my_repository.repository\n  domain          = aws_codeartifact_domain.my_domain.domain\n  policy_document = data.aws_iam_policy_document.my_repository_policy_document.json\n}\n```", "```py\naws codeartifact login --tool pip --repository $CODE_ARTIFACT_REPOSITOR_ARN --domain $CODE_ARTIFACT_DOMAIN_ID --domain-owner $ACCOUNT_ID --region $REGION\n```", "```py\ndata \"aws_iam_policy_document\" \"codeartifact_vpce_base_policy\" {\n  statement {\n    sid    = \"EnableRoles\"\n    effect = \"Allow\"\n    actions = [\n      \"codeartifact:GetAuthorizationToken\",\n      \"codeartifact:GetRepositoryEndpoint\",\n      \"codeartifact:ReadFromRepository\",\n      \"sts:GetServiceBearerToken\"\n    ]\n    resources = [\n      \"*\",\n    ]\n    principals {\n      type = \"AWS\"\n      identifiers = [\n        aws_iam_role.your_sagemaker_execution_role.arn\n      ]\n    }\n  }\n}\n\nresource \"aws_vpc_endpoint\" \"codeartifact_api_vpce\" {\n  vpc_id            = aws_vpc.your_vpc.id\n  service_name      = \"com.amazonaws.${local.region}.codeartifact.api\"\n  vpc_endpoint_type = \"Interface\"\n  subnet_ids        = aws_subnets.your_private_subnets.ids\n\n  security_group_ids = [\n    aws_security_group.vpce_sg.id,\n  ]\n\n  private_dns_enabled = true\n  policy              = data.aws_iam_policy_document.codeartifact_vpce_base_policy.json\n  tags = { Name = \"codeartifact-api-vpc-endpoint\" }\n}\n```"]