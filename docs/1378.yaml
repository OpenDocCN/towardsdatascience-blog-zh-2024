- en: Measuring The Intrinsic Causal Influence Of Your Marketing Campaigns
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/measuring-the-intrinsic-causal-influence-of-your-marketing-campaigns-aa8354c26b7b?source=collection_archive---------1-----------------------#2024-06-02](https://towardsdatascience.com/measuring-the-intrinsic-causal-influence-of-your-marketing-campaigns-aa8354c26b7b?source=collection_archive---------1-----------------------#2024-06-02)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Causal AI, exploring the integration of causal reasoning into machine learning
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://medium.com/@raz1470?source=post_page---byline--aa8354c26b7b--------------------------------)[![Ryan
    O''Sullivan](../Images/7cd161d38d67d2c0b7da2d8f3e7d33fe.png)](https://medium.com/@raz1470?source=post_page---byline--aa8354c26b7b--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--aa8354c26b7b--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--aa8354c26b7b--------------------------------)
    [Ryan O''Sullivan](https://medium.com/@raz1470?source=post_page---byline--aa8354c26b7b--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--aa8354c26b7b--------------------------------)
    ·10 min read·Jun 2, 2024
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/53a2610606f77459b2f6d61dc9fa2372.png)'
  prefs: []
  type: TYPE_IMG
- en: Photo by [Melanie Deziel](https://unsplash.com/@storyfuel?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  prefs: []
  type: TYPE_NORMAL
- en: What is this series of articles about?
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Welcome to my series on Causal AI, where we will explore the integration of
    causal reasoning into machine learning models. Expect to explore a number of practical
    applications across different business contexts.
  prefs: []
  type: TYPE_NORMAL
- en: In the last article we covered *optimising non-linear treatment effects in pricing
    and promotions*. This time round we will cover *measuring the intrinsic causal
    influence of your marketing campaigns*.
  prefs: []
  type: TYPE_NORMAL
- en: 'If you missed the last article on non-linear treatment effects in pricing and
    promotions, check it out here:'
  prefs: []
  type: TYPE_NORMAL
- en: '[](/optimising-non-linear-treatment-effects-in-pricing-and-promotions-011ce140d180?source=post_page-----aa8354c26b7b--------------------------------)
    [## Optimising Non-Linear Treatment Effects in Pricing and Promotions'
  prefs: []
  type: TYPE_NORMAL
- en: Causal AI, exploring the integration of causal reasoning into machine learning
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/optimising-non-linear-treatment-effects-in-pricing-and-promotions-011ce140d180?source=post_page-----aa8354c26b7b--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: Introduction
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: In this article I will help you understand how you can measure the intrinsic
    causal influence of your marketing campaigns.
  prefs: []
  type: TYPE_NORMAL
- en: '**The following aspects will be covered:**'
  prefs: []
  type: TYPE_NORMAL
- en: What are the challenges when it comes to marketing measurement?
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: What is intrinsic causal influence and how does it work?
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: A worked case study in Python showcasing how we can use intrinsic causal influence
    to give marketing campaigns the credit they deserve.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 'The full notebook can be found here:'
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://github.com/raz1470/causal_ai/blob/main/notebooks/understanding%20the%20intrinsic%20causal%20influence%20of%20your%20marketing%20campaigns.ipynb?source=post_page-----aa8354c26b7b--------------------------------)
    [## causal_ai/notebooks/understanding the intrinsic causal influence of your marketing
    campaigns.ipynb…'
  prefs: []
  type: TYPE_NORMAL
- en: This project introduces Causal AI and how it can drive business value. - causal_ai/notebooks/understanding
    the…
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: github.com](https://github.com/raz1470/causal_ai/blob/main/notebooks/understanding%20the%20intrinsic%20causal%20influence%20of%20your%20marketing%20campaigns.ipynb?source=post_page-----aa8354c26b7b--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: What are the challenges when it comes to marketing measurement?
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: What are the different types of marketing campaigns?
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Organisations use marketing to grow their business by acquiring new customers
    and retaining existing ones. Marketing campaigns are often split into 3 main categories:'
  prefs: []
  type: TYPE_NORMAL
- en: Brand
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Performance
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Retention
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Each one has it’s own unique challenges when it comes to measurement — Understanding
    these challenges is crucial.
  prefs: []
  type: TYPE_NORMAL
- en: Brand campaigns
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The aim of brand campaigns is to raise awareness of your brand in new audiences.
    They are often run across TV and social media, with the latter often in the format
    of a video. They don’t usually have a direct call-to-action e.g. “our product
    will last you a lifetime”.
  prefs: []
  type: TYPE_NORMAL
- en: The challenge with measuring TV is immediately obvious — We can’t track who
    has seen a TV ad! But we also have similar challenges when it’s comes to social
    media — If I watch a video on Facebook and then organically visit the website
    and purchase the product the next day it is very unlikely we will be able to tie
    these two events together.
  prefs: []
  type: TYPE_NORMAL
- en: There is also a secondary challenge of a delayed effect. When raising awareness
    in new audiences, it might take days/weeks/months for them to get to the point
    where they consider purchasing your product.
  prefs: []
  type: TYPE_NORMAL
- en: There is a debatable argument that brand campaigns do all the hard work — However,
    when it comes to marketing measurement, they often get undervalued because of
    some of the challenges we highlighted above.
  prefs: []
  type: TYPE_NORMAL
- en: Performance campaigns
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: In general performance campaigns are aimed at customers in-market for your product.
    They run across paid search, social and affiliate channels. They usually have
    a call-to-action e.g. “click now to get 5% off your first purchase”.
  prefs: []
  type: TYPE_NORMAL
- en: When it comes to performance campaigns it isn’t immediately obvious why they
    are challenging to measure. It’s very likely that we will be able to link the
    event of a customer clicking on a performance campaign and that customer purchasing
    that day.
  prefs: []
  type: TYPE_NORMAL
- en: But would they have clicked if they weren't already familiar with the brand?
    How did they get familiar with the brand? If we hadn’t of shown them the campaign,
    would they have purchased organically anyway? These are tough questions to answer
    from a data science perspective!
  prefs: []
  type: TYPE_NORMAL
- en: Retention campaigns
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The other category of campaigns is retention. This is marketing aimed at retaining
    existing customers. We can usually run AB tests to measure these campaigns.
  prefs: []
  type: TYPE_NORMAL
- en: Acquisition marketing graph
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: It is common to refer to brand and performance campaigns as acquisition marketing.
    As I mentioned earlier, it is challenging to measure brand and performance campaigns
    — We often undervalue brand campaigns and overvalue performance campaigns.
  prefs: []
  type: TYPE_NORMAL
- en: 'The graph below is a motivating (but simplified) example of how acquisition
    marketing works:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/10701f0d7ea8bedd7cc6187be62b73da.png)'
  prefs: []
  type: TYPE_IMG
- en: User generated image
  prefs: []
  type: TYPE_NORMAL
- en: How can we (fairly) estimate how much each node contributed to revenue? This
    is where intrinsic causal influence comes into the picture — Lets’ dive into what
    it is in the next section!
  prefs: []
  type: TYPE_NORMAL
- en: What is intrinsic causal influence and how does it work?
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Where does the concept come from?
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The concept was originally proposed in a paper back in 2020, with an update
    this year:'
  prefs: []
  type: TYPE_NORMAL
- en: '[## Quantifying intrinsic causal contributions via structure preserving interventions'
  prefs: []
  type: TYPE_NORMAL
- en: We propose a notion of causal influence that describes the 'intrinsic' part
    of the contribution of a node on a target…
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: proceedings.mlr.press](https://proceedings.mlr.press/v238/janzing24a.html?source=post_page-----aa8354c26b7b--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: 'It is implemented in the GCM module within the python package DoWhy:'
  prefs: []
  type: TYPE_NORMAL
- en: '[## Quantifying Intrinsic Causal Influence - DoWhy documentation'
  prefs: []
  type: TYPE_NORMAL
- en: 'By quantifying intrinsic causal influence, we answer the question: How strong
    is the causal influence of an upstream…'
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: www.pywhy.org](https://www.pywhy.org/dowhy/v0.11.1/user_guide/causal_tasks/quantify_causal_influence/icc.html?source=post_page-----aa8354c26b7b--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: I personally found the concept quite hard to grasp initially, so in the next
    section let’s break it down step by step.
  prefs: []
  type: TYPE_NORMAL
- en: Recap on causal graphs
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Before we try and understand intrinsic causal influence, it is important to
    have an understanding of causal graphs, structural causal models (SCM) and additive
    noise models (ANM). My article earlier in the series should help bring you up
    to speed:'
  prefs: []
  type: TYPE_NORMAL
- en: '[](/using-causal-graphs-to-answer-causal-questions-5fd1dd82fa90?source=post_page-----aa8354c26b7b--------------------------------)
    [## Using Causal Graphs to answer causal questions'
  prefs: []
  type: TYPE_NORMAL
- en: Causal AI, exploring the integration of causal reasoning into machine learning
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: towardsdatascience.com](/using-causal-graphs-to-answer-causal-questions-5fd1dd82fa90?source=post_page-----aa8354c26b7b--------------------------------)
  prefs: []
  type: TYPE_NORMAL
- en: 'As a reminder, each node in a causal graph can be seen as the target in a model
    where it’s direct parents are used as features. It is common to use an additive
    noise model for each non-root node:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/7a53c88f3047851b720211ef9a58afd4.png)'
  prefs: []
  type: TYPE_IMG
- en: User generated image
  prefs: []
  type: TYPE_NORMAL
- en: What really is intrinsic causal influence?
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Now we have recapped causal graphs, let’s start to understand what intrinsic
    causal influence really is…
  prefs: []
  type: TYPE_NORMAL
- en: The dictionary definition of intrinsic is “belonging naturally”. In my head
    I think of a funnel, and the stuff at the top of the funnel are doing the heavy
    lifting — We want to attribute them the causal influence that they deserve.
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s take the example graph below to help us start to unpick intrinsic causal
    influence further:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/881d59714c222dacbf265e92471283e5.png)'
  prefs: []
  type: TYPE_IMG
- en: User generated image
  prefs: []
  type: TYPE_NORMAL
- en: A, B and C are root nodes.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: D is a non-root node, which we can model using it’s direct parents (A, B, C)
    and a noise term.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: E is a non-root node, which similar to D, we can model using it’s direct parents
    (A, B, C) and a noise term.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: F is our target node, which we can model using it’s direct parents (D, E) and
    a noise term.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Let’s focus on node D. It inherits some of it’s influence on node F from node
    A, B and C. The intrinsic part of its influence on node F, the part that has not
    simply been ‘inherited’ from A, B, and C, comes from the noise term. Therefore
    we are saying that each nodes noise term can be used to estimate the intrinsic
    causal influence on a target node. It’s worth noting that root nodes are just
    made up of noise.
  prefs: []
  type: TYPE_NORMAL
- en: In the case study, we will delve deeper into exactly how to calculate intrinsic
    causal influence.
  prefs: []
  type: TYPE_NORMAL
- en: How can it help us measure our marketing campaigns?
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: Hopefully you can already see the link between the acquisition marketing example
    and intrinsic causal influence — Can intrinsic causal infleunce help us stop undervaluing
    brand campaigns and stop overvaluing performance campaigns? Let’s find out in
    the case study!
  prefs: []
  type: TYPE_NORMAL
- en: Case study
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: Background
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: It’s coming towards the end of the year and the Director of Marketing is coming
    under pressure from the Finance team to justify why she plans to spend so much
    on marketing next year. The Finance team use a last click model in which revenue
    is attributed to the last thing a customer clicked on. They question why they
    even need to spend anything on TV when everyone comes through organic or social
    channels!
  prefs: []
  type: TYPE_NORMAL
- en: The Data Science team are tasked with estimating the intrinsic causal influence
    of each marketing channel.
  prefs: []
  type: TYPE_NORMAL
- en: Setting up the Graph (DAG)
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We start by setting up a DAG using expert domain knowledge, re-using the marketing
    acquisition example from earlier:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: In essence, the last click model which the finance team are using only uses
    the direct parents of revenue to measure marketing.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/10701f0d7ea8bedd7cc6187be62b73da.png)'
  prefs: []
  type: TYPE_IMG
- en: User generated image
  prefs: []
  type: TYPE_NORMAL
- en: Data generating process
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We create some samples of data following the data generating process of the
    DAG:'
  prefs: []
  type: TYPE_NORMAL
- en: 3 root nodes made up of noise terms; Demand, Brand spend and Social spend.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 2 non-root nodes, both inheriting influence from the 3 root nodes plus some
    noise terms; Organic clicks, Social clicks.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: 1 target nodes, inheriting influence from the 2 non-root nodes plus a noise
    term; Revenue
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Training the SCM
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'Now we can train the SCM using the GCM module from the python package DoWhy.
    We setup the data generating process with linear relationships therefore we can
    use ridge regression as the causal mechanism for each non-root node:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: Alternatively, we can use the auto_assignment function to assign the models
    automatically (instead of defining them manually).
  prefs: []
  type: TYPE_NORMAL
- en: 'I will skip over the model evaluation, as this is not the focus on my article.
    However, we can can also evaluate the causal model using GCM:'
  prefs: []
  type: TYPE_NORMAL
- en: '[](https://www.pywhy.org/dowhy/v0.11.1/user_guide/modeling_gcm/model_evaluation.html?source=post_page-----aa8354c26b7b--------------------------------#evaluating-a-fitted-gcm)
    [## Evaluate a GCM - DoWhy documentation'
  prefs: []
  type: TYPE_NORMAL
- en: Modeling a graphical causal model (GCM) requires various assumptions and choices
    of models, all of which can influence…
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
- en: www.pywhy.org](https://www.pywhy.org/dowhy/v0.11.1/user_guide/modeling_gcm/model_evaluation.html?source=post_page-----aa8354c26b7b--------------------------------#evaluating-a-fitted-gcm)
  prefs: []
  type: TYPE_NORMAL
- en: Intrinsic causal influence
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We can easily compute the intrinsic causal influence using the GCM module.
    We do so and convert the contributions to percentages:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/c14365497df9456fd24f942070d8c77f.png)'
  prefs: []
  type: TYPE_IMG
- en: User generated image
  prefs: []
  type: TYPE_NORMAL
- en: 'Let’s show these on a bar chart:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: '![](../Images/5088e850f9e4750a68c05e563914e555.png)'
  prefs: []
  type: TYPE_IMG
- en: User generated image
  prefs: []
  type: TYPE_NORMAL
- en: Are our results intuitive? If you take a look back at the data generating process
    code you will see they are! Pay close attention to what each non-root node is
    inheriting and what additional noise is being added.
  prefs: []
  type: TYPE_NORMAL
- en: The intrinsic causal influence module is really easy to use, but it doesn’t
    help us understand the method behind it — To finish off, let’s explore the inner
    working of intrinsic causal influence!
  prefs: []
  type: TYPE_NORMAL
- en: Intrinsic causal influence — How does it work?
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'We want to estimate how much the noise term of each node contributes to the
    target node:'
  prefs: []
  type: TYPE_NORMAL
- en: It is worth remembering that root nodes are just made up of a noise term.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In the non-root nodes, we separate the noise term from the what was inherited
    from parents.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: We also include the noise term from the target node – This could be interpreted
    as the contribution of unobserved confounders or unseen factors which effect revenue
    but not upstream nodes (although it could also be down the model mis-specification).
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The noise terms are then used to explain the variance in the target node – This
    can be seen as a model with noise terms as features and the target node as the
    outcome.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: The model is used to estimate the conditional distribution of the target node
    given subsets of noise variables.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Shapley is then used to estimate the contribution of each noise term – If changing
    the noise term has little impact on the target, then the intrinsic causal influence
    will be very small.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Closing thoughts
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 'Today we covered how you can estimate the intrinsic causal influence of your
    marketing campaigns. Here are some closing thoughts:'
  prefs: []
  type: TYPE_NORMAL
- en: Intrinsic causal influence is a powerful concept that could be applied across
    different use cases, not just marketing.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Understanding the inner workings will help you apply it more effectively.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Identifying the DAG and estimating the graph accurately is key to getting reasonable
    intrinsic causal influence estimates.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: In the marketing acquisition example, you may want to think about adding lagged
    effects for brand marketing.
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: Follow me if you want to continue this journey into Causal AI — In the next
    article we will explore how we can validate and calibrate our causal models using
    Synthetic Controls.
  prefs: []
  type: TYPE_NORMAL
- en: References
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: '*Dominik Janzing, Patrick Blöbaum, Atalanti A Mastakouri, Philipp M Faller,
    Lenon Minorics, Kailash Budhathoki. “Quantifying intrinsic causal contributions
    via structure preserving interventions “; Proceedings of The 27th International
    Conference on Artificial Intelligence and Statistics, PMLR 238:2188–2196:* [https://proceedings.mlr.press/v238/janzing24a.html](https://proceedings.mlr.press/v238/janzing24a.html)'
  prefs: []
  type: TYPE_NORMAL
- en: '*Patrick Blöbaum, Peter Götz, Kailash Budhathoki, Atalanti A. Mastakouri, Dominik
    Janzing. “DoWhy-GCM: An Extension of DoWhy for Causal Inference in Graphical Causal
    Models”; Journal of Machine Learning Research, MLOSS 25(147):1−7, 2024:* [https://jmlr.org/papers/v25/22-1258.html](https://jmlr.org/papers/v25/22-1258.html)'
  prefs: []
  type: TYPE_NORMAL
