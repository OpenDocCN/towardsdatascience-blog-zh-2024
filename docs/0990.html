<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>How to Read and Analyze GDAT Files Using Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>How to Read and Analyze GDAT Files Using Python</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-read-and-analyze-gdat-files-using-python-5c8dece157d4?source=collection_archive---------10-----------------------#2024-04-18">https://towardsdatascience.com/how-to-read-and-analyze-gdat-files-using-python-5c8dece157d4?source=collection_archive---------10-----------------------#2024-04-18</a></blockquote><div><div class="em ff fg fh fi fj"/><div class="fk fl fm fn fo"><div class="ab cb"><div class="ci bh ew ex ey ez"><div/><div><h2 id="a242" class="pw-subtitle-paragraph go fq fr bf b gp gq gr gs gt gu gv gw gx gy gz ha hb hc hd cq dx">A quick tutorial on how to work with these computer-modelled binary files.</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="he hf hg hh hi ab"><div><div class="ab hj"><div><div class="bm" aria-hidden="false"><a href="https://madison13.medium.com/?source=post_page---byline--5c8dece157d4--------------------------------" rel="noopener follow"><div class="l hk hl by hm hn"><div class="l ed"><img alt="Madison Hunter" class="l ep by dd de cx" src="../Images/fa84176a13175e75944b49e110b92e14.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*WE_v8m4E4u_CdWLHwYGP9A.jpeg"/><div class="ho by l dd de em n hp eo"/></div></div></a></div></div><div class="hq ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--5c8dece157d4--------------------------------" rel="noopener follow"><div class="l hr hs by hm ht"><div class="l ed"><img alt="Towards Data Science" class="l ep by br hu cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="ho by l br hu em n hp eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hv ab q"><div class="ab q hw"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hx hy bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hz" data-testid="authorName" href="https://madison13.medium.com/?source=post_page---byline--5c8dece157d4--------------------------------" rel="noopener follow">Madison Hunter</a></p></div></div></div><span class="ia ib" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hx hy dx"><button class="ic id ah ai aj ak al am an ao ap aq ar ie if ig" disabled="">Follow</button></p></div></div></span></div></div><div class="l ih"><span class="bf b bg z dx"><div class="ab cn ii ij ik"><div class="il im ab"><div class="bf b bg z dx ab in"><span class="io l ih">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hz ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--5c8dece157d4--------------------------------" rel="noopener follow"><p class="bf b bg z ip iq ir is it iu iv iw bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="ia ib" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">9 min read</span><div class="ix iy l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Apr 18, 2024</span></div></span></div></span></div></div></div><div class="ab cp iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo"><div class="h k w ea eb q"><div class="ke l"><div class="ab q kf kg"><div class="pw-multi-vote-icon ed io kh ki kj"><div class=""><div class="kk kl km kn ko kp kq am kr ks kt kj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l ku kv kw kx ky kz la"><p class="bf b dy z dx"><span class="kl">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kk lb lc ab q ee ld le" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lf"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg></button></div></div></div><div class="ab q jp jq jr js jt ju jv jw jx jy jz ka kb kc kd"><div class="lg k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lh an ao ap ie li lj lk" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep ll cn"><div class="l ae"><div class="ab cb"><div class="lm ln lo lp lq lr ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lh an ao ap ie ls lt le lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lh an ao ap ie ls lt le lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lh an ao ap ie ls lt le lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ml"><img src="../Images/58606c4133be520f96406ac6d15f979c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*VR6q0qtCNGAhSL3c"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Photo by <a class="af nc" href="https://unsplash.com/@werclive?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Werclive 👹</a> on <a class="af nc" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2a98" class="pw-post-body-paragraph nd ne fr nf b gp ng nh ni gs nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fk bk">Data comes in all shapes and sizes.</p><p id="d926" class="pw-post-body-paragraph nd ne fr nf b gp ng nh ni gs nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fk bk">While many of us spend most of our data education and careers working with data in relatively “friendly” formats, such as spreadsheets and CSV files, there may come a time when you’re confronted with data that isn’t so friendly. You might not even be able to visualize it straight out of the box.</p><p id="04f3" class="pw-post-body-paragraph nd ne fr nf b gp ng nh ni gs nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fk bk">This happened to me recently, when a computer model I was running was outputting data in a gridded binary format. The tricky thing about binary files is figuring out how to read them to access and analyze their contained data. After scouring the edges of the internet for a solution, I cobbled together a simple Python function that allows you to read gridded binary data so that it can later be analyzed using your favorite Python libraries, such as matplotlib, or NumPy.</p><p id="6161" class="pw-post-body-paragraph nd ne fr nf b gp ng nh ni gs nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fk bk">This niche solution will allow you to read gridded binary data files with GDAT file endings produced from computer models, particularly those modeling natural processes, such as environmental or meteorological phenomena. As such, the code below makes these assumptions:</p><ul class=""><li id="029d" class="nd ne fr nf b gp ng nh ni gs nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa ob bk">Your GDAT file follows <a class="af nc" href="http://cola.gmu.edu/grads/" rel="noopener ugc nofollow" target="_blank">GrADS</a> conventions (though this will likely work for various other binary files).</li><li id="64d6" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny nz oa ob bk">Your GDAT file represents a gridded study area over a specified study period.</li><li id="6509" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny nz oa ob bk">In the GDAT file, there is a grid of data values for each day in the specified study period.</li><li id="a97a" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny nz oa ob bk">Each cell in the grid of data values contains a tuple of values.</li><li id="12db" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny nz oa ob bk">The grid of data values has a set number of rows and columns that can be used to index cells.</li></ul><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk oh"><img src="../Images/1d2bd1f4334c609319a16f93f7d4f316.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DxX2Tl4C1b63h7GpaZS3fA.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Visual representation of the gridded binary data, with each grid of values representing a study area organized into days (for each day of the study period). The cells in each grid can be indexed using row and column indices. Figure by the author using <a class="af nc" href="https://www.canva.com/" rel="noopener ugc nofollow" target="_blank">Canva</a>.</figcaption></figure></div></div></div><div class="ab cb oi oj ok ol" role="separator"><span class="om by bm on oo op"/><span class="om by bm on oo op"/><span class="om by bm on oo"/></div><div class="fk fl fm fn fo"><div class="ab cb"><div class="ci bh ew ex ey ez"><h1 id="6861" class="oq or fr bf os ot ou gr ov ow ox gu oy oz pa pb pc pd pe pf pg ph pi pj pk pl bk">Reading the binary GDAT file</h1><pre class="mm mn mo mp mq pm pn po bp pp bb bk"><span id="032c" class="pq or fr pn b bg pr ps l pt pu">import struct<br/><br/>def read_gdat_file(file_path, format_string, number_rows, <br/>number_columns, number_days):<br/>  data = []<br/>  with open(file_path, 'rb') as f:<br/>    for _ in range(number_days):<br/>      day_data = []<br/>        for _ in range(number_rows):<br/>          row_data = []<br/>          for _ in range(number_columns):<br/>            value = struct.unpack(format_string, f.read(4))[0]<br/>            row_data.append(value)<br/>          day_data.append(row_data)<br/>        data.append(day_data)<br/>  return data</span></pre><p id="3b50" class="pw-post-body-paragraph nd ne fr nf b gp ng nh ni gs nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fk bk">The above code reads a binary GDAT file and structures its data to resemble the grid of your study area for easier interpretation and analysis.</p><ol class=""><li id="8a87" class="nd ne fr nf b gp ng nh ni gs nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny pv oa ob bk"><strong class="nf fs">import struct</strong>: <a class="af nc" href="https://docs.python.org/3/library/struct.html" rel="noopener ugc nofollow" target="_blank">struct</a> is a Python module that allows you to work with binary data. This module contains functions that allow you to convert binary data into Python objects and vice versa.</li><li id="d6bc" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">def read_gdat_file(file_path, format_string, number_rows, number_columns, number_days): </strong>This line begins the function that will allow us to read a binary file. For it to work, we will need to pass in arguments that detail the path to the correct GDAT file, the format type of the GDAT file, the number of rows and columns representing the study area, and finally the number of days the GDAT data covers. Knowing the number of days represented in the GDAT file allows the function to correctly partition the binary data into the rows and columns necessary to represent the study area for each day. This facilitates accurate analysis of the data later on. You should be able to find the number of days, as well as the number of rows and columns needed to represent the study area within whatever computer model parameters you’re using to generate the GDAT data.</li><li id="4e2f" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">data = []</strong>: This line initializes an empty Python list that will be used to contain the GDAT data in its final grid format.</li><li id="b282" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">with open(file_path, ‘rb’) as f: </strong>This line opens the binary file in read mode (designated by the <strong class="nf fs">‘rb’</strong> argument), allowing the function to access its data. Opening the binary file using the <strong class="nf fs">‘with’</strong> statement ensures that the file is closed after you have accessed the data.</li><li id="9625" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">for _ in range(number_days):</strong> This for loop iterates through the binary data and reads the data for each specified day. I’ve opted to use an underscore in this for loop (as well as the following for loops) because the variable doesn’t need to have a name as I will not be using it later. You can use typical iteration counter variables, such as <strong class="nf fs">i</strong>, or <strong class="nf fs">j </strong>if it better suits your programming style.</li><li id="b11c" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">day_data = []</strong>: This line initializes an empty Python list that will be used to contain the binary data for each day. It will contain all of the rows of binary data relating to that specific day.</li><li id="ad63" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">for _ in range(number_rows): </strong>This for loop iterates through the specified number of rows within the specified day.</li><li id="a2ea" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">row_data = []</strong>: This line initializes an empty Python list that will be used to contain the binary data for the current row within the specified day.</li><li id="3b8e" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">for _ in range(number_columns): </strong>This for loop iterates through the data found in the specified number of columns within the specified row.</li><li id="24ce" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">value = struct.unpack(format_string, f.read(4))[0]</strong>: This line initializes a variable called <strong class="nf fs">value</strong> and, using the <strong class="nf fs">unpack</strong> function from the <strong class="nf fs">struct</strong> module, reads however many bytes of binary data from the GDAT file at a time and interprets it according to the <strong class="nf fs">format_string</strong> specified (read section <a class="af nc" href="https://docs.python.org/3/library/struct.html" rel="noopener ugc nofollow" target="_blank">“Format Characters”</a> to understand which format string you need to specify). The <strong class="nf fs">unpack </strong>function returns a tuple. In the code line, <strong class="nf fs">[0]</strong> is placed at the end to indicate that the function should only return the first (and in some instances, the only) value of the tuple. If each cell in your modeled study area contains a tuple with multiple values, it is unnecessary to include <strong class="nf fs">[0]</strong> at the end of the line unless you’re only interested in one of the cell values. For example, a scenario where you may have cells containing tuples with multiple values arises when the value measured in the cell has x and y components (i.e., wind).</li><li id="bb7c" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">row_data.append(value): </strong>This line appends the unpacked float value to <strong class="nf fs">row_data, </strong>which represents the current row.</li><li id="45ba" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">day_data.append(row_data): </strong>This line appends the current row to <strong class="nf fs">day_data</strong>, which represents the current day.</li><li id="a73d" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">data.append(day_data): </strong>This line appends the data for the current day to <strong class="nf fs">data</strong>, which represents the overall dataset.</li><li id="34a9" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">return data</strong>: This function will continue iterating through the binary data file until it has read the grid data for each day into the overall dataset, designated as <strong class="nf fs">data</strong>. This line returns the overall dataset, converted from the binary file into a Python list. <strong class="nf fs">data </strong>returns gridded data separated into each day of the study period. This dataset can now be analyzed.</li></ol><h1 id="d589" class="oq or fr bf os ot pw gr ov ow px gu oy oz py pb pc pd pz pf pg ph qa pj pk pl bk">Returning the data for a particular cell in the study area grid for the entire study period</h1><p id="6f55" class="pw-post-body-paragraph nd ne fr nf b gp qb nh ni gs qc nk nl nm qd no np nq qe ns nt nu qf nw nx ny fk bk">While your computer model likely produces data for a large study area, you may only be interested in analyzing the data for a particular cell within the grid across the entire study period.</p><p id="b364" class="pw-post-body-paragraph nd ne fr nf b gp ng nh ni gs nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fk bk">Say, for example, you want to see how closely the computer model produced wind speed values compared to observed wind speed values. There exists a meteorological station with wind speed observations in a particular cell. We will extract the data for the cell containing the meteorological station for the entire study period, after which you will be able to plot the observed versus the modeled data to determine how accurate the model is.</p><p id="fe00" class="pw-post-body-paragraph nd ne fr nf b gp ng nh ni gs nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fk bk">The Python function below uses the Python list data returned from the previous function.</p><pre class="mm mn mo mp mq pm pn po bp pp bb bk"><span id="05dd" class="pq or fr pn b bg pr ps l pt pu">def read_cell_data_for_study_period(data, row_index, column_index):<br/>  cell_data = []<br/>  for day_data in data:<br/>    reversed_day_data = day_data[::-1] #Optional<br/>    cell_value = reversed_day_data[row_index][column_index]<br/>    cell_data.append(cell_value)<br/>  return cell_data</span></pre><p id="fd2f" class="pw-post-body-paragraph nd ne fr nf b gp ng nh ni gs nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fk bk">The above code extracts the specified cell data for the entire study period.</p><ol class=""><li id="05f1" class="nd ne fr nf b gp ng nh ni gs nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny pv oa ob bk"><strong class="nf fs">def read_cell_data_for_study_period(data, row_index, column_index)</strong>: This line begins the function that will extract the cell data for a specified cell using a row index and a column index to specify the cell’s location. The <strong class="nf fs">data</strong> argument takes the variable containing the list holding the GDAT data in its final grid format (this was created using the previous function). The <strong class="nf fs">row_index </strong>and <strong class="nf fs">column_index </strong>arguments take the integers specifying the row and column where the cell of interest is located.</li><li id="6fc0" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">cell_data = []</strong>: This line initializes an empty Python list that will contain the cell data for the entire study period.</li><li id="3d4a" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">for day_data in data:</strong> This for loop iterates through the gridded data for each day of the study period.</li><li id="5b90" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">reversed_day_data = day_data[::-1]</strong>: This optional line of code is used if, upon printing out the cell data for the specified study period, you find that the gridded data is not being read from the correct starting point. In most scenarios, gridded data will be read from the upper left corner and will therefore be “0 indexed”. However, in some scenarios, the gridded data is read from the lower left corner. This phenomenon causes the grid indexing to be wrong, resulting in the wrong cell being read using your specified <strong class="nf fs">row_index</strong> and <strong class="nf fs">column_index</strong>. Therefore, this optional line of code flips the gridded data vertically so it is read beginning from the upper left corner. <strong class="nf fs">Note: This line should only be used if it is determined that the grid of data is being read from the lower left corner. Omit this line if your data grid is being read correctly to avoid erroneous data readings.</strong></li><li id="3fe8" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">cell_value = reversed_day_data[row_index][column_index]</strong>: This line initializes a variable called <strong class="nf fs">cell_value </strong>which will contain the cell data at the specified row and column index for each day of the study period. As you can see, your specified <strong class="nf fs">row_index</strong> and <strong class="nf fs">column_index</strong> arguments are used to access the correct cell in the gridded data.</li><li id="9bb6" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">cell_data.append(cell_value)</strong>: This line appends the cell data for the current day to <strong class="nf fs">cell_data</strong>, which represents the overall list containing all of the cell values for the entire study period.</li><li id="3f16" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny pv oa ob bk"><strong class="nf fs">return cell_data</strong>: This function will continue iterating through each day of data and appending the value at a specific cell to the list designated as <strong class="nf fs">cell_data</strong>. This line returns the list, after which you will be able to print out and analyze the cell values for each day of the study period.</li></ol><h1 id="e7d6" class="oq or fr bf os ot pw gr ov ow px gu oy oz py pb pc pd pz pf pg ph qa pj pk pl bk">Example of how you can analyze cell data</h1><pre class="mm mn mo mp mq pm pn po bp pp bb bk"><span id="02eb" class="pq or fr pn b bg pr ps l pt pu">import struct<br/>import matplotlib.pyplot as plt<br/><br/>#Function that reads the binary file (see above)<br/>def read_gdat_file(file_path, format_string, number_rows, <br/>number_columns, number_days):<br/>  data = []<br/>  with open(file_path, 'rb') as f:<br/>    for _ in range(number_days):<br/>      day_data = []<br/>        for _ in range(number_rows):<br/>          row_data = []<br/>          for _ in range(number_columns):<br/>            value = struct.unpack('f', f.read(4))[0]<br/>            row_data.append(value)<br/>          day_data.append(row_data)<br/>        data.append(day_data)<br/>  return data<br/><br/>#Function that returns the data for a specific cell for the entire study<br/># period (see above)<br/>def read_cell_data_for_study_period(data, row_index, column_index):<br/>  cell_data = []<br/>  for day_data in data:<br/>    reversed_day_data = day_data[::-1] #Optional<br/>    cell_value = reversed_day_data[row_index][column_index]<br/>    cell_data.append(cell_value)<br/>  return cell_data<br/><br/>#Specifying the file path to the binary file, wherever it's located<br/># on your system; also, specifying the format_string for the file.<br/>file_path_binary_data = "file-path-binary-data.gdat"<br/>format_string = 'f'<br/><br/>#Specifying the number of rows, columns, and days represented in the <br/># binary file<br/>number_rows_in_gridded_study_area = 45<br/>number_columns_in_gridded_study_area = 108<br/>number_days_in_study_period = 365<br/><br/>#Reading the binary file<br/>data = read_gdat_file(<br/>  file_path=file_path_binary_data, <br/>  format_string=format_string, <br/>  row_index=number_rows_in_gridded_study_area,<br/>  column_index=number_columns_in_gridded_study_area,<br/>  day_index=number_days_in_study_period)<br/><br/>#Specifying the day, row, and column index used to read the values from<br/># a specific cell. These index values must abide by the specified number<br/># of rows and columns in the study area (above).<br/>day_index = 0<br/>row_index = 30<br/>column_index = 90<br/><br/>#Reading the cell data for each day in the study period<br/>data_for_specific_cell_for_study_period = read_cell_data_for_study_period(<br/>  data=data,<br/>  row_index=row_index,<br/>  column_index=column_index)<br/><br/>#Plotting the cell data for each day in the study period<br/>plt.figure(figsize=(10,6))<br/>plt.plot(1, len(data_for_specific_cell_for_study_period) +1), <br/>  data_for_specific_cell_for_study_period, <br/>  label='Simulated Data',<br/>  color='blue')<br/>plt.xlabel('Day')<br/>plt.ylabel('Unit of simulated data')<br/>plt.title('Simulated data at specified cell for study period')<br/>plt.legend()<br/>plt.show()</span></pre><h1 id="d3c9" class="oq or fr bf os ot pw gr ov ow px gu oy oz py pb pc pd pz pf pg ph qa pj pk pl bk">Troubleshooting</h1><ul class=""><li id="1c3b" class="nd ne fr nf b gp qb nh ni gs qc nk nl nm qd no np nq qe ns nt nu qf nw nx ny nz oa ob bk">Read your computer model documentation to understand how its output is formatted. This will help you determine which values you want to extract from the tuple of data representing each cell, as well as what format the cell values are in (i.e., floating point, etc.).</li><li id="cc7e" class="nd ne fr nf b gp oc nh ni gs od nk nl nm oe no np nq of ns nt nu og nw nx ny nz oa ob bk">If possible, create TIF files from your GDAT files and open them in a GIS program. This will allow you to visualize your gridded data, as well as to check that your gridded data is being read from the upper left corner by the function used to read cell data for each day of your study period.</li></ul></div></div></div><div class="ab cb oi oj ok ol" role="separator"><span class="om by bm on oo op"/><span class="om by bm on oo op"/><span class="om by bm on oo"/></div><div class="fk fl fm fn fo"><div class="ab cb"><div class="ci bh ew ex ey ez"><p id="aa3d" class="pw-post-body-paragraph nd ne fr nf b gp ng nh ni gs nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fk bk">Subscribe to get my stories sent directly to your inbox: <a class="af nc" href="https://madison13.medium.com/subscribe" rel="noopener">Story Subscription</a></p><p id="4517" class="pw-post-body-paragraph nd ne fr nf b gp ng nh ni gs nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fk bk">Please become a member to get unlimited access to Medium using my referral link (I will receive a small commission at no extra cost to you): <a class="af nc" href="https://madison13.medium.com/membership" rel="noopener">Medium Membership</a></p><p id="497e" class="pw-post-body-paragraph nd ne fr nf b gp ng nh ni gs nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fk bk">Subscribe to my newsletter to get more exclusive data-driven content with an environmentalist spin: <a class="af nc" href="https://datadrivenenvironmentalist.substack.com/?r=1kyrup&amp;utm_campaign=pub-share-checklist" rel="noopener ugc nofollow" target="_blank">DataDrivenEnvironmentalist</a></p></div></div></div></div>    
</body>
</html>