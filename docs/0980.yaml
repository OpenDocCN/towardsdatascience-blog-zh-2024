- en: Create an AI-Driven Movie Quiz with Gemini LLM, Python, FastAPI, Pydantic, RAG
    and more
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åˆ›å»ºä¸€ä¸ª AI é©±åŠ¨çš„ç”µå½±é—®ç­”æ¸¸æˆï¼Œä½¿ç”¨ Gemini LLMã€Pythonã€FastAPIã€Pydanticã€RAG ç­‰
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/create-an-ai-driven-movie-quiz-with-gemini-llm-python-fastapi-pydantic-rag-and-more-e15322be4f66?source=collection_archive---------0-----------------------#2024-04-18](https://towardsdatascience.com/create-an-ai-driven-movie-quiz-with-gemini-llm-python-fastapi-pydantic-rag-and-more-e15322be4f66?source=collection_archive---------0-----------------------#2024-04-18)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/create-an-ai-driven-movie-quiz-with-gemini-llm-python-fastapi-pydantic-rag-and-more-e15322be4f66?source=collection_archive---------0-----------------------#2024-04-18](https://towardsdatascience.com/create-an-ai-driven-movie-quiz-with-gemini-llm-python-fastapi-pydantic-rag-and-more-e15322be4f66?source=collection_archive---------0-----------------------#2024-04-18)
- en: Discover the basics of using Gemini with Python via VertexAI, creating APIs
    with FastAPI, data validation with Pydantic and the fundamentals of Retrieval-Augmented
    Generation (RAG)
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: äº†è§£å¦‚ä½•é€šè¿‡ VertexAI ä½¿ç”¨ Gemini ä¸ Pythonï¼Œä½¿ç”¨ FastAPI åˆ›å»º APIï¼Œä½¿ç”¨ Pydantic è¿›è¡Œæ•°æ®éªŒè¯ï¼Œä»¥åŠæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰çš„åŸºæœ¬åŸç†
- en: '[](https://vojay.medium.com/?source=post_page---byline--e15322be4f66--------------------------------)[![Volker
    Janz](../Images/0825160d6d521f4152948f0187cf354b.png)](https://vojay.medium.com/?source=post_page---byline--e15322be4f66--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--e15322be4f66--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--e15322be4f66--------------------------------)
    [Volker Janz](https://vojay.medium.com/?source=post_page---byline--e15322be4f66--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://vojay.medium.com/?source=post_page---byline--e15322be4f66--------------------------------)[![Volker
    Janz](../Images/0825160d6d521f4152948f0187cf354b.png)](https://vojay.medium.com/?source=post_page---byline--e15322be4f66--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--e15322be4f66--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--e15322be4f66--------------------------------)
    [Volker Janz](https://vojay.medium.com/?source=post_page---byline--e15322be4f66--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--e15322be4f66--------------------------------)
    Â·21 min readÂ·Apr 18, 2024
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘å¸ƒäº [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--e15322be4f66--------------------------------)
    Â·21åˆ†é’Ÿé˜…è¯»Â·2024å¹´4æœˆ18æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/50e962ece900e09fb6fcb997adafede4.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/50e962ece900e09fb6fcb997adafede4.png)'
- en: Photo by [Kenny Eliason](https://unsplash.com/@neonbrand?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”± [Kenny Eliason](https://unsplash.com/@neonbrand?utm_source=medium&utm_medium=referral)
    æä¾›ï¼Œæ¥æºäº [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: 'Within this article, I share some of the basics to create a LLM-driven web-application,
    using various technologies, such as: Python, [FastAPI](https://fastapi.tiangolo.com/),
    [Pydantic](https://docs.pydantic.dev/latest/), [VertexAI](https://cloud.google.com/vertex-ai)
    and more.'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†åˆ†äº«ä¸€äº›åˆ›å»ºåŸºäº LLM çš„ Web åº”ç”¨ç¨‹åºçš„åŸºç¡€çŸ¥è¯†ï¼Œä½¿ç”¨çš„æŠ€æœ¯åŒ…æ‹¬ï¼šPythonã€[FastAPI](https://fastapi.tiangolo.com/)ã€[Pydantic](https://docs.pydantic.dev/latest/)ã€[VertexAI](https://cloud.google.com/vertex-ai)
    ç­‰ç­‰ã€‚
- en: You will learn how to create such a project from the very beginning and get
    an overview of the underlying concepts, including **Retrieval-Augmented Generation**
    (RAG).
  id: totrans-9
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ä½ å°†å­¦ä¹ å¦‚ä½•ä»å¤´å¼€å§‹åˆ›å»ºè¿™æ ·ä¸€ä¸ªé¡¹ç›®ï¼Œå¹¶äº†è§£å…¶åŸºæœ¬æ¦‚å¿µï¼ŒåŒ…æ‹¬**æ£€ç´¢å¢å¼ºç”Ÿæˆ**ï¼ˆRAGï¼‰ã€‚
- en: '*Disclaimer: I am using data from The Movie Database within this project. The
    API is free to use for non-commercial purposes and complies with the Digital Millennium
    Copyright Act (DMCA). For further information about TMDB data usage, please* [*read
    the official FAQ*](https://developer.themoviedb.org/docs/faq)*.*'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: '*å…è´£å£°æ˜ï¼šåœ¨æœ¬é¡¹ç›®ä¸­ï¼Œæˆ‘ä½¿ç”¨äº†æ¥è‡ªç”µå½±æ•°æ®åº“çš„æ•°æ®ã€‚è¯¥ API å¯å…è´¹ç”¨äºéå•†ä¸šç”¨é€”ï¼Œå¹¶ç¬¦åˆã€Šæ•°å­—åƒå¹´ç‰ˆæƒæ³•æ¡ˆã€‹ï¼ˆDMCAï¼‰ã€‚æœ‰å…³ TMDB æ•°æ®ä½¿ç”¨çš„æ›´å¤šä¿¡æ¯ï¼Œè¯·*
    [*é˜…è¯»å®˜æ–¹ FAQ*](https://developer.themoviedb.org/docs/faq)*ã€‚*'
- en: Table of contents
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç›®å½•
- en: â€“ [Inspiration](#bf8e)
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [çµæ„Ÿæ¥æº](#bf8e)
- en: â€“ [System Architecture](#a588)
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [ç³»ç»Ÿæ¶æ„](#a588)
- en: â€“ [Understanding Retrieval-Augmented Generation (RAG)](#d0b3)
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [ç†è§£æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰](#d0b3)
- en: â€“ [Python projects with Poetry](#4cfd)
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [ä½¿ç”¨ Poetry è¿›è¡Œ Python é¡¹ç›®ç®¡ç†](#4cfd)
- en: â€“ [Create the API with FastAPI](#ca13)
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [ä½¿ç”¨ FastAPI åˆ›å»º API](#ca13)
- en: â€“ [Data validation and quality with Pydantic](#103f)
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [ä½¿ç”¨ Pydantic è¿›è¡Œæ•°æ®éªŒè¯å’Œè´¨é‡æ§åˆ¶](#103f)
- en: â€“ [TMDB client with httpx](#fe62)
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [ä½¿ç”¨ httpx çš„ TMDB å®¢æˆ·ç«¯](#fe62)
- en: â€“ [Gemini LLM client with VertexAI](#040c)
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [Gemini LLM å®¢æˆ·ç«¯ä¸ VertexAI](#040c)
- en: â€“ [Modular prompt generator with Jinja](#2bf6)
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [ä½¿ç”¨ Jinja çš„æ¨¡å—åŒ–æç¤ºç”Ÿæˆå™¨](#2bf6)
- en: â€“ [Frontend](#f4be)
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [å‰ç«¯](#f4be)
- en: â€“ [API examples](#809a)
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [API ç¤ºä¾‹](#809a)
- en: â€“ [Conclusion](#165c)
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [ç»“è®º](#165c)
- en: The best way to share this knowledge is through a practical example. Hence,
    Iâ€™ll use my project **Gemini Movie Detectives** to cover the various aspects.
    The project was created as part of the [Google AI Hackathon 2024](https://googleai.devpost.com/),
    which is still running while I am writing this.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ†äº«è¿™äº›çŸ¥è¯†çš„æœ€ä½³æ–¹å¼æ˜¯é€šè¿‡ä¸€ä¸ªå®é™…çš„ä¾‹å­ã€‚å› æ­¤ï¼Œæˆ‘å°†ä½¿ç”¨æˆ‘çš„é¡¹ç›®**Geminiç”µå½±ä¾¦æ¢**æ¥æ¶µç›–å„ä¸ªæ–¹é¢ã€‚è¯¥é¡¹ç›®æ˜¯ä½œä¸º[Google AI Hackathon
    2024](https://googleai.devpost.com/)çš„ä¸€éƒ¨åˆ†åˆ›å»ºçš„ï¼Œè€Œæˆ‘å†™è¿™ç¯‡æ–‡ç« æ—¶ï¼Œè¯¥æ¯”èµ›ä»åœ¨è¿›è¡Œä¸­ã€‚
- en: '![](../Images/3d44844866ab4bb81b2e6b5acaf52bf1.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3d44844866ab4bb81b2e6b5acaf52bf1.png)'
- en: Gemini Movie Detectives (by author)
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: Geminiç”µå½±ä¾¦æ¢ï¼ˆä½œè€…ï¼‰
- en: Gemini Movie Detectives is a project aimed at leveraging the power of the Gemini
    Pro model via VertexAI to create an engaging quiz game using the latest movie
    data from [The Movie Database (TMDB)](https://www.themoviedb.org/).
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: Geminiç”µå½±ä¾¦æ¢æ˜¯ä¸€ä¸ªæ—¨åœ¨åˆ©ç”¨Gemini Proæ¨¡å‹çš„å¼ºå¤§åŠŸèƒ½é€šè¿‡VertexAIåˆ›å»ºä¸€ä¸ªå¼•äººå…¥èƒœçš„é—®ç­”æ¸¸æˆï¼Œä½¿ç”¨æ¥è‡ª[ç”µå½±æ•°æ®åº“ï¼ˆTMDBï¼‰](https://www.themoviedb.org/)çš„æœ€æ–°ç”µå½±æ•°æ®ã€‚
- en: 'Part of the project was also to make it deployable with Docker and to create
    a live version. Try it yourself: [movie-detectives.com](https://movie-detectives.com/).
    Keep in mind that this is a simple prototype, so there might be unexpected issues.
    Also, I had to add some limitations in order to control costs that might be generated
    by using GCP and VertexAI.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: é¡¹ç›®çš„ä¸€éƒ¨åˆ†è¿˜æ˜¯ä½¿å…¶å¯ä»¥ä½¿ç”¨Dockeréƒ¨ç½²å¹¶åˆ›å»ºä¸€ä¸ªåœ¨çº¿ç‰ˆæœ¬ã€‚è‡ªå·±è¯•è¯•å§ï¼š[movie-detectives.com](https://movie-detectives.com/)ã€‚è¯·è®°ä½ï¼Œè¿™åªæ˜¯ä¸€ä¸ªç®€å•çš„åŸå‹ï¼Œæ‰€ä»¥å¯èƒ½ä¼šå‡ºç°æ„å¤–é—®é¢˜ã€‚æ­¤å¤–ï¼Œä¸ºäº†æ§åˆ¶ä½¿ç”¨GCPå’ŒVertexAIå¯èƒ½äº§ç”Ÿçš„æˆæœ¬ï¼Œæˆ‘ä¸å¾—ä¸æ·»åŠ ä¸€äº›é™åˆ¶ã€‚
- en: '![](../Images/f949342e71bc028936d5836525e42f0d.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f949342e71bc028936d5836525e42f0d.png)'
- en: Gemini Movie Detectives (by author)
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: Geminiç”µå½±ä¾¦æ¢ï¼ˆä½œè€…ï¼‰
- en: 'The project is **fully open-source** and is split into two separate repositories:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥é¡¹ç›®æ˜¯**å®Œå…¨å¼€æº**çš„ï¼Œåˆ†ä¸ºä¸¤ä¸ªç‹¬ç«‹çš„ä»“åº“ï¼š
- en: '**ğŸš€ Github repository for backend**: [https://github.com/vojay-dev/gemini-movie-detectives-api](https://github.com/vojay-dev/gemini-movie-detectives-api)'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ğŸš€ åç«¯çš„Githubä»“åº“**: [https://github.com/vojay-dev/gemini-movie-detectives-api](https://github.com/vojay-dev/gemini-movie-detectives-api)'
- en: '**ğŸ–¥ï¸ Github repository for frontend**: [https://github.com/vojay-dev/gemini-movie-detectives-ui](https://github.com/vojay-dev/gemini-movie-detectives-ui)'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ğŸ–¥ï¸ å‰ç«¯çš„Githubä»“åº“**: [https://github.com/vojay-dev/gemini-movie-detectives-ui](https://github.com/vojay-dev/gemini-movie-detectives-ui)'
- en: The focus of the article is the backend project and underlying concepts. It
    will therefore only briefly explain the frontend and its components.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æ–‡çš„é‡ç‚¹æ˜¯åç«¯é¡¹ç›®å’ŒåŸºæœ¬æ¦‚å¿µã€‚å› æ­¤ï¼Œå®ƒå°†ç®€è¦è§£é‡Šå‰ç«¯åŠå…¶ç»„ä»¶ã€‚
- en: 'In the following video, I also give an overview over the project and its components:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä»¥ä¸‹è§†é¢‘ä¸­ï¼Œæˆ‘è¿˜å°†æ¦‚è¿°è¯¥é¡¹ç›®åŠå…¶ç»„ä»¶ï¼š
- en: Inspiration
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: çµæ„Ÿ
- en: 'Growing up as a passionate gamer and now working as a Data Engineer, Iâ€™ve always
    been drawn to the intersection of gaming and data. With this project, I combined
    two of my greatest passions: gaming and data. Back in the 90â€™ I always enjoyed
    the video game series You Donâ€™t Know Jack, a delightful blend of trivia and comedy
    that not only entertained but also taught me a thing or two. Generally, the usage
    of games for educational purposes is another concept that fascinates me.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œä¸ºä¸€ä¸ªçƒ­è¡·äºæ¸¸æˆçš„ç©å®¶ï¼Œç°åœ¨ä½œä¸ºæ•°æ®å·¥ç¨‹å¸ˆå·¥ä½œï¼Œæˆ‘ä¸€ç›´è¢«æ¸¸æˆå’Œæ•°æ®çš„äº¤æ±‡æ‰€å¸å¼•ã€‚é€šè¿‡è¿™ä¸ªé¡¹ç›®ï¼Œæˆ‘ç»“åˆäº†æˆ‘æœ€å¤§çš„ä¸¤ä¸ªçƒ­æƒ…ï¼šæ¸¸æˆå’Œæ•°æ®ã€‚åœ¨90å¹´ä»£ï¼Œæˆ‘æ€»æ˜¯å–œæ¬¢ã€Šä½ ä¸çŸ¥é“æ°å…‹ã€‹ç³»åˆ—è§†é¢‘æ¸¸æˆï¼Œè¿™æ˜¯ä¸€ä¸ªæœ‰è¶£çš„çŸ¥è¯†é—®ç­”å’Œå–œå‰§èåˆï¼Œä¸ä»…å¨±ä¹äº†æˆ‘ï¼Œè¿˜æ•™ä¼šäº†æˆ‘ä¸€äº›ä¸œè¥¿ã€‚é€šå¸¸ï¼Œæˆ‘å¯¹å°†æ¸¸æˆç”¨äºæ•™è‚²ç›®çš„çš„æ¦‚å¿µä¹Ÿå¾ˆç€è¿·ã€‚
- en: In 2023, I organized a workshop to teach kids and young adults game development.
    They learned about mathematical concepts behind collision detection, yet they
    had fun as everything was framed in the context of gaming. It was eye-opening
    that gaming is not only a huge market but also holds a great potential for knowledge
    sharing.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 2023å¹´ï¼Œæˆ‘ç»„ç»‡äº†ä¸€ä¸ªç ”è®¨ä¼šï¼Œæ•™å­©å­å’Œå¹´è½»äººæ¸¸æˆå¼€å‘ã€‚ä»–ä»¬äº†è§£äº†ç¢°æ’æ£€æµ‹èƒŒåçš„æ•°å­¦æ¦‚å¿µï¼Œä½†ä»–ä»¬ç©å¾—å¾ˆå¼€å¿ƒï¼Œå› ä¸ºä¸€åˆ‡éƒ½æ˜¯åœ¨æ¸¸æˆçš„èƒŒæ™¯ä¸‹å±•å¼€çš„ã€‚ä»¤äººå¤§å¼€çœ¼ç•Œçš„æ˜¯ï¼Œæ¸¸æˆä¸ä»…æ˜¯ä¸€ä¸ªå·¨å¤§çš„å¸‚åœºï¼Œè€Œä¸”è¿˜å…·æœ‰å·¨å¤§çš„çŸ¥è¯†åˆ†äº«æ½œåŠ›ã€‚
- en: With this project, called Movie Detectives, I aim to showcase the magic of Gemini,
    and AI in general, in crafting engaging trivia and educational games, but also
    how game design can profit from these technologies in general.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡è¿™ä¸ªåä¸ºç”µå½±ä¾¦æ¢çš„é¡¹ç›®ï¼Œæˆ‘æ—¨åœ¨å±•ç¤ºGeminiä»¥åŠAIåœ¨æ‰“é€ å¼•äººå…¥èƒœçš„çŸ¥è¯†é—®ç­”å’Œæ•™è‚²æ¸¸æˆæ–¹é¢çš„é­”åŠ›ï¼Œä»¥åŠæ¸¸æˆè®¾è®¡å¦‚ä½•ä»è¿™äº›æŠ€æœ¯ä¸­å—ç›Šã€‚
- en: By feeding the Gemini LLM with accurate and up-to-date movie metadata, I could
    ensure the accuracy of the questions from Gemini. An important aspect, because
    without this Retrieval-Augmented Generation (RAG) methodology to enrich queries
    with real-time metadata, thereâ€™s a risk of propagating misinformation â€” a typical
    pitfall when using AI for this purpose.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡å°†å‡†ç¡®ä¸”æœ€æ–°çš„ç”µå½±å…ƒæ•°æ®æä¾›ç»™ Gemini LLMï¼Œæˆ‘å¯ä»¥ç¡®ä¿æ¥è‡ª Gemini çš„é—®é¢˜å‡†ç¡®æ— è¯¯ã€‚è¿™ä¸€ç‚¹éå¸¸é‡è¦ï¼Œå› ä¸ºå¦‚æœæ²¡æœ‰è¿™ç§åŸºäºå®æ—¶å…ƒæ•°æ®çš„æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ–¹æ³•æ¥ä¸°å¯ŒæŸ¥è¯¢ï¼Œå°±æœ‰å¯èƒ½ä¼ æ’­é”™è¯¯ä¿¡æ¯â€”â€”è¿™æ˜¯ä½¿ç”¨
    AI è¿›è¡Œæ­¤ç±»ä»»åŠ¡æ—¶å¸¸è§çš„é™·é˜±ã€‚
- en: Another game-changer lies in the modular prompt generation framework Iâ€™ve crafted
    using Jinja templates. Itâ€™s like having a Swiss Army knife for game design â€” effortlessly
    swapping show master personalities to tailor the game experience. And with the
    language module, translating the quiz into multiple languages is a breeze, eliminating
    the need for costly translation processes.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: å¦ä¸€ä¸ªæ”¹å˜æ¸¸æˆè§„åˆ™çš„åœ°æ–¹åœ¨äºæˆ‘ä½¿ç”¨ Jinja æ¨¡æ¿åˆ›å»ºçš„æ¨¡å—åŒ–æç¤ºç”Ÿæˆæ¡†æ¶ã€‚è¿™å°±åƒæ‹¥æœ‰ä¸€æŠŠç‘å£«å†›åˆ€ï¼Œç”¨äºæ¸¸æˆè®¾è®¡â€”â€”è½»æ¾åˆ‡æ¢ä¸»æŒäººä¸ªæ€§ä»¥å®šåˆ¶æ¸¸æˆä½“éªŒã€‚é€šè¿‡è¯­è¨€æ¨¡å—ï¼Œç¿»è¯‘é—®ç­”æˆå¤šç§è¯­è¨€å˜å¾—è½»æ¾ï¼Œå®Œå…¨ä¸éœ€è¦æ˜‚è´µçš„ç¿»è¯‘è¿‡ç¨‹ã€‚
- en: Taking that on a business perspective, it can be used to reach a much broader
    audience of customers, without the need of expensive translation processes.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: ä»å•†ä¸šè§’åº¦æ¥çœ‹ï¼Œå®ƒå¯ä»¥å¸®åŠ©æ¥è§¦åˆ°æ›´å¹¿æ³›çš„å®¢æˆ·ç¾¤ï¼Œæ— éœ€æ˜‚è´µçš„ç¿»è¯‘è¿‡ç¨‹ã€‚
- en: From a business standpoint, this modularization opens doors to a wider customer
    base, transcending language barriers without breaking a sweat. And personally,
    Iâ€™ve experienced firsthand the transformative power of these modules. Switching
    from the default quiz master to the dad-joke-quiz-master was a riot â€” a nostalgic
    nod to the heyday of You Donâ€™t Know Jack, and a testament to the versatility of
    this project.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: ä»å•†ä¸šè§’åº¦æ¥çœ‹ï¼Œè¿™ç§æ¨¡å—åŒ–ä¸ºæ›´å¹¿æ³›çš„å®¢æˆ·ç¾¤æ‰“å¼€äº†å¤§é—¨ï¼Œè½»æ¾è·¨è¶Šè¯­è¨€éšœç¢ã€‚æ­¤å¤–ï¼Œä¸ªäººæ¥è¯´ï¼Œæˆ‘äº²èº«ä½“éªŒäº†è¿™äº›æ¨¡å—çš„å˜é©åŠ›é‡ã€‚ä»é»˜è®¤çš„é—®ç­”ä¸»æŒäººåˆ‡æ¢åˆ°â€œè€çˆ¸ç¬‘è¯é—®ç­”ä¸»æŒäººâ€ç®€ç›´å¤ªæœ‰è¶£äº†â€”â€”è¿™ä¸ä»…æ˜¯å¯¹ã€Šä½ ä¸çŸ¥é“æ°å…‹ã€‹é»„é‡‘æ—¶ä»£çš„æ€€å¿µï¼Œä¹Ÿæ˜¯è¿™ä¸ªé¡¹ç›®å¤šåŠŸèƒ½æ€§çš„è§è¯ã€‚
- en: '![](../Images/44ed0a40a77f059c48e616639864e51e.png)'
  id: totrans-44
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/44ed0a40a77f059c48e616639864e51e.png)'
- en: 'Movie Detectives â€” Example: Santa Claus personality (by author)'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: ç”µå½±ä¾¦æ¢â€”â€”ç¤ºä¾‹ï¼šåœ£è¯è€äººæ€§æ ¼ï¼ˆä½œè€…æä¾›ï¼‰
- en: System Architecture
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç³»ç»Ÿæ¶æ„
- en: Before we jump into details, letâ€™s get an overview of how the application was
    built.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ·±å…¥ç»†èŠ‚ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å…ˆäº†è§£ä¸€ä¸‹åº”ç”¨æ˜¯å¦‚ä½•æ„å»ºçš„ã€‚
- en: '**Tech Stack: ğŸš€ Backend**'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: '**æŠ€æœ¯æ ˆï¼šğŸš€ åç«¯**'
- en: Python 3.12 + [FastAPI](https://fastapi.tiangolo.com/) API development
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Python 3.12 + [FastAPI](https://fastapi.tiangolo.com/) API å¼€å‘
- en: '[httpx](https://www.python-httpx.org/) for TMDB integration'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[httpx](https://www.python-httpx.org/) ç”¨äº TMDB é›†æˆ'
- en: '[Jinja](https://jinja.palletsprojects.com/) templating for modular prompt generation'
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Jinja](https://jinja.palletsprojects.com/) æ¨¡æ¿å¼•æ“ç”¨äºæ¨¡å—åŒ–æç¤ºç”Ÿæˆ'
- en: '[Pydantic](https://docs.pydantic.dev/latest/) for data modeling and validation'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Pydantic](https://docs.pydantic.dev/latest/) ç”¨äºæ•°æ®å»ºæ¨¡å’ŒéªŒè¯'
- en: '[Poetry](https://python-poetry.org/) for dependency management'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Poetry](https://python-poetry.org/) ç”¨äºä¾èµ–ç®¡ç†'
- en: '[Docker](https://www.docker.com/) for deployment'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Docker](https://www.docker.com/) ç”¨äºéƒ¨ç½²'
- en: '[TMDB API](https://www.themoviedb.org/) for movie data'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[TMDB API](https://www.themoviedb.org/) ç”¨äºç”µå½±æ•°æ®'
- en: '[VertexAI](https://cloud.google.com/vertex-ai) and [Gemini](https://cloud.google.com/vertex-ai/docs/generative-ai/model-reference/gemini)
    for generating quiz questions and evaluating answers'
  id: totrans-56
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[VertexAI](https://cloud.google.com/vertex-ai) å’Œ [Gemini](https://cloud.google.com/vertex-ai/docs/generative-ai/model-reference/gemini)
    ç”¨äºç”Ÿæˆé—®ç­”å’Œè¯„ä¼°ç­”æ¡ˆ'
- en: '[Ruff](https://docs.astral.sh/ruff/) as linter and code formatter together
    with [pre-commit](https://pre-commit.com/) hooks'
  id: totrans-57
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Ruff](https://docs.astral.sh/ruff/) ä½œä¸ºä»£ç æ£€æŸ¥å™¨å’Œä»£ç æ ¼å¼åŒ–å·¥å…·ï¼Œç»“åˆ [pre-commit](https://pre-commit.com/)
    é’©å­'
- en: Github Actions to automatically run tests and linter on every push
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ Github Actions åœ¨æ¯æ¬¡æ¨é€æ—¶è‡ªåŠ¨è¿è¡Œæµ‹è¯•å’Œä»£ç æ£€æŸ¥
- en: '**Tech Stack: ğŸ–¥ï¸ Frontend**'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '**æŠ€æœ¯æ ˆï¼šğŸ–¥ï¸ å‰ç«¯**'
- en: '[VueJS](https://vuejs.org/) 3.4 as the frontend framework'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[VueJS](https://vuejs.org/) 3.4 ä½œä¸ºå‰ç«¯æ¡†æ¶'
- en: '[Vite](https://vitejs.dev/) for frontend tooling'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[Vite](https://vitejs.dev/) ç”¨äºå‰ç«¯å·¥å…·é“¾'
- en: Essentially, the application fetches up-to-date movie metadata from an external
    API (TMDB), constructs a prompt based on different modules (personality, language,
    â€¦), enriches this prompt with the metadata and that way, uses Gemini to initiate
    a movie quiz in which the user has to guess the correct title.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬è´¨ä¸Šï¼Œåº”ç”¨ä»å¤–éƒ¨ APIï¼ˆTMDBï¼‰è·å–æœ€æ–°çš„ç”µå½±å…ƒæ•°æ®ï¼Œæ ¹æ®ä¸åŒçš„æ¨¡å—ï¼ˆå¦‚ä¸ªæ€§ã€è¯­è¨€ç­‰ï¼‰æ„å»ºæç¤ºï¼Œåˆ©ç”¨è¿™äº›å…ƒæ•°æ®ä¸°å¯Œæç¤ºï¼Œä»è€Œä½¿ç”¨ Gemini å‘èµ·ä¸€ä¸ªç”µå½±é—®ç­”ï¼Œç”¨æˆ·éœ€è¦çŒœå‡ºæ­£ç¡®çš„ç”µå½±åç§°ã€‚
- en: The backend infrastructure is built with FastAPI and Python, employing the Retrieval-Augmented
    Generation (RAG) methodology to enrich queries with real-time metadata. Utilizing
    Jinja templating, the backend modularizes prompt generation into base, personality,
    and data enhancement templates, enabling the generation of accurate and engaging
    quiz questions.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: åç«¯åŸºç¡€è®¾æ–½æ˜¯é€šè¿‡ FastAPI å’Œ Python æ„å»ºçš„ï¼Œé‡‡ç”¨æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ–¹æ³•ï¼Œé€šè¿‡å®æ—¶å…ƒæ•°æ®ä¸°å¯ŒæŸ¥è¯¢ã€‚åˆ©ç”¨ Jinja æ¨¡æ¿ï¼Œåç«¯å°†æç¤ºç”Ÿæˆæ¨¡å—åŒ–ä¸ºåŸºç¡€ã€ä¸ªæ€§å’Œæ•°æ®å¢å¼ºæ¨¡æ¿ï¼Œä»è€Œèƒ½å¤Ÿç”Ÿæˆå‡†ç¡®ä¸”å¯Œæœ‰å¸å¼•åŠ›çš„æµ‹éªŒé—®é¢˜ã€‚
- en: The frontend is powered by Vue 3 and Vite, supported by daisyUI and Tailwind
    CSS for efficient frontend development. Together, these tools provide users with
    a sleek and modern interface for seamless interaction with the backend.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: å‰ç«¯ç”± Vue 3 å’Œ Vite æä¾›æ”¯æŒï¼Œå¹¶ç”± daisyUI å’Œ Tailwind CSS æ”¯æŒï¼Œä¾¿äºé«˜æ•ˆçš„å‰ç«¯å¼€å‘ã€‚è¿™äº›å·¥å…·å…±åŒä¸ºç”¨æˆ·æä¾›äº†ä¸€ä¸ªç°ä»£åŒ–ä¸”æµç•…çš„ç•Œé¢ï¼Œä»¥ä¾¿ä¸åç«¯è¿›è¡Œæ— ç¼äº’åŠ¨ã€‚
- en: In Movie Detectives, quiz answers are interpreted by the Language Model (LLM)
    once again, allowing for dynamic scoring and personalized responses. This showcases
    the potential of integrating LLM with RAG in game design and development, paving
    the way for truly individualized gaming experiences. Furthermore, it demonstrates
    the potential for creating engaging quiz trivia or educational games by involving
    LLM. Adding and changing personalities or languages is as easy as adding more
    Jinja template modules. With very little effort, this can change the full game
    experience, reducing the effort for developers.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ã€Šç”µå½±ä¾¦æ¢ã€‹ä¸­ï¼Œæµ‹éªŒç­”æ¡ˆä¼šå†æ¬¡ç”±è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰è¿›è¡Œè§£é‡Šï¼Œä»è€Œå®ç°åŠ¨æ€è¯„åˆ†å’Œä¸ªæ€§åŒ–å“åº”ã€‚è¿™å±•ç¤ºäº†å°† LLM ä¸ RAG é›†æˆåœ¨æ¸¸æˆè®¾è®¡å’Œå¼€å‘ä¸­çš„æ½œåŠ›ï¼Œä¸ºçœŸæ­£ä¸ªæ€§åŒ–çš„æ¸¸æˆä½“éªŒé“ºå¹³äº†é“è·¯ã€‚æ­¤å¤–ï¼Œå®ƒè¿˜å±•ç¤ºäº†é€šè¿‡å¼•å…¥
    LLM åˆ›å»ºå¼•äººå…¥èƒœçš„é—®ç­”æˆ–æ•™è‚²ç±»æ¸¸æˆçš„æ½œåŠ›ã€‚æ·»åŠ å’Œæ›´æ”¹ä¸ªæ€§æˆ–è¯­è¨€å°±åƒæ·»åŠ æ›´å¤š Jinja æ¨¡æ¿æ¨¡å—ä¸€æ ·ç®€å•ã€‚é€šè¿‡éå¸¸å°‘çš„å·¥ä½œï¼Œå°±å¯ä»¥æ”¹å˜æ•´ä¸ªæ¸¸æˆä½“éªŒï¼Œå‡å°‘å¼€å‘äººå‘˜çš„å·¥ä½œé‡ã€‚
- en: '![](../Images/b33ff35fa8348020b98001d766fc0b0f.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b33ff35fa8348020b98001d766fc0b0f.png)'
- en: System Overview (by author)
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: ç³»ç»Ÿæ¦‚è¿°ï¼ˆä½œè€…æä¾›ï¼‰
- en: As can be seen in the overview, Retrieval-Augmented Generation (RAG) is one
    of the essential ideas of the backend. Letâ€™s have a closer look at this particular
    paradigm.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: æ­£å¦‚æ¦‚è¿°æ‰€ç¤ºï¼Œæ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰æ˜¯åç«¯çš„æ ¸å¿ƒæ€æƒ³ä¹‹ä¸€ã€‚è®©æˆ‘ä»¬æ›´ä»”ç»†åœ°çœ‹çœ‹è¿™ä¸€ç‰¹å®šèŒƒå¼ã€‚
- en: Understanding Retrieval-Augmented Generation (RAG)
  id: totrans-69
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç†è§£æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰
- en: In the realm of Large Language Models (LLM) and AI, one paradigm becoming more
    and more popular is Retrieval-Augmented Generation (RAG). But what does RAG entail,
    and how does it influence the landscape of AI development?
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMï¼‰å’Œäººå·¥æ™ºèƒ½é¢†åŸŸï¼Œè¶Šæ¥è¶Šæµè¡Œçš„ä¸€ç§èŒƒå¼æ˜¯æ£€ç´¢å¢å¼ºç”Ÿæˆï¼ˆRAGï¼‰ã€‚é‚£ä¹ˆ RAG åŒ…æ‹¬äº†ä»€ä¹ˆå†…å®¹ï¼Œå®ƒåˆæ˜¯å¦‚ä½•å½±å“äººå·¥æ™ºèƒ½å‘å±•çš„æ ¼å±€çš„å‘¢ï¼Ÿ
- en: At its essence, RAG enhances LLM systems by incorporating external data to enrich
    their predictions. Which means, you pass relevant context to the LLM as an additional
    part of the prompt, but how do you find relevant context? Usually, this data can
    be automatically retrieved from a database with vector search or dedicated vector
    databases. Vector databases are especially useful, since they store data in a
    way, so that it can be queried for similar data quickly. The LLM then generates
    the output based on both, the query and the retrieved documents.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬è´¨ä¸Šï¼ŒRAG é€šè¿‡ç»“åˆå¤–éƒ¨æ•°æ®æ¥å¢å¼º LLM ç³»ç»Ÿï¼Œä»è€Œä¸°å¯Œå®ƒä»¬çš„é¢„æµ‹ã€‚è¿™æ„å‘³ç€ï¼Œä½ å°†ç›¸å…³çš„ä¸Šä¸‹æ–‡ä½œä¸ºæç¤ºçš„é™„åŠ éƒ¨åˆ†ä¼ é€’ç»™ LLMï¼Œä½†å¦‚ä½•æ‰¾åˆ°ç›¸å…³çš„ä¸Šä¸‹æ–‡å‘¢ï¼Ÿé€šå¸¸ï¼Œè¿™äº›æ•°æ®å¯ä»¥é€šè¿‡å‘é‡æœç´¢æˆ–ä¸“ç”¨çš„å‘é‡æ•°æ®åº“ä»æ•°æ®åº“ä¸­è‡ªåŠ¨æ£€ç´¢ã€‚å‘é‡æ•°æ®åº“å°¤å…¶æœ‰ç”¨ï¼Œå› ä¸ºå®ƒä»¬ä»¥ä¸€ç§æ–¹å¼å­˜å‚¨æ•°æ®ï¼Œä½¿å¾—å¯ä»¥å¿«é€ŸæŸ¥è¯¢ç›¸ä¼¼æ•°æ®ã€‚ç„¶åï¼ŒLLM
    ä¼šåŸºäºæŸ¥è¯¢å’Œæ£€ç´¢åˆ°çš„æ–‡æ¡£ç”Ÿæˆè¾“å‡ºã€‚
- en: 'Picture this: you have an LLM capable of generating text based on a given prompt.
    RAG takes this a step further by infusing additional context from external sources,
    like up-to-date movie data, to enhance the relevance and accuracy of the generated
    text.'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: æƒ³è±¡ä¸€ä¸‹ï¼šä½ æœ‰ä¸€ä¸ªèƒ½å¤Ÿæ ¹æ®ç»™å®šæç¤ºç”Ÿæˆæ–‡æœ¬çš„ LLMã€‚RAG æ›´è¿›ä¸€æ­¥ï¼Œé€šè¿‡æ³¨å…¥æ¥è‡ªå¤–éƒ¨æ¥æºçš„é¢å¤–ä¸Šä¸‹æ–‡ï¼Œä¾‹å¦‚æœ€æ–°çš„ç”µå½±æ•°æ®ï¼Œæ¥å¢å¼ºç”Ÿæˆæ–‡æœ¬çš„ç›¸å…³æ€§å’Œå‡†ç¡®æ€§ã€‚
- en: 'Letâ€™s break down the key components of RAG:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬æ¥æ‹†è§£ä¸€ä¸‹ RAG çš„å…³é”®ç»„æˆéƒ¨åˆ†ï¼š
- en: '**LLMs**: LLMs serve as the backbone of RAG workflows. These models, trained
    on vast amounts of text data, possess the ability to understand and generate human-like
    text.'
  id: totrans-74
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**LLMs**ï¼šLLM æ˜¯ RAG å·¥ä½œæµçš„æ ¸å¿ƒã€‚è¿™äº›æ¨¡å‹åœ¨å¤§é‡æ–‡æœ¬æ•°æ®ä¸Šè¿›è¡Œè®­ç»ƒï¼Œå…·å¤‡ç†è§£å’Œç”Ÿæˆç±»äººæ–‡æœ¬çš„èƒ½åŠ›ã€‚'
- en: '**Vector Indexes for contextual enrichment**: A crucial aspect of RAG is the
    use of vector indexes, which store embeddings of text data in a format understandable
    by LLMs. These indexes allow for efficient retrieval of relevant information during
    the generation process. In the context of the project this could be a database
    of movie metadata.'
  id: totrans-75
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ç”¨äºä¸Šä¸‹æ–‡å¢å¼ºçš„å‘é‡ç´¢å¼•**ï¼šRAG çš„ä¸€ä¸ªå…³é”®æ–¹é¢æ˜¯ä½¿ç”¨å‘é‡ç´¢å¼•ï¼Œè¿™äº›ç´¢å¼•ä»¥ LLM å¯ç†è§£çš„æ ¼å¼å­˜å‚¨æ–‡æœ¬æ•°æ®çš„åµŒå…¥ã€‚è¿™äº›ç´¢å¼•å…è®¸åœ¨ç”Ÿæˆè¿‡ç¨‹ä¸­é«˜æ•ˆåœ°æ£€ç´¢ç›¸å…³ä¿¡æ¯ã€‚åœ¨æœ¬é¡¹ç›®çš„ä¸Šä¸‹æ–‡ä¸­ï¼Œè¿™å¯ä»¥æ˜¯ä¸€ä¸ªç”µå½±å…ƒæ•°æ®çš„æ•°æ®åº“ã€‚'
- en: '**Retrieval process**: RAG involves retrieving pertinent documents or information
    based on the given context or prompt. This retrieved data acts as the additional
    input for the LLM, supplementing its understanding and enhancing the quality of
    generated responses. This could be getting all relevant information known and
    connected to a specific movie.'
  id: totrans-76
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**æ£€ç´¢è¿‡ç¨‹**ï¼šRAG æ¶‰åŠæ ¹æ®ç»™å®šçš„ä¸Šä¸‹æ–‡æˆ–æç¤ºæ£€ç´¢ç›¸å…³çš„æ–‡æ¡£æˆ–ä¿¡æ¯ã€‚è¿™äº›æ£€ç´¢åˆ°çš„æ•°æ®ä½œä¸º LLM çš„é¢å¤–è¾“å…¥ï¼Œè¡¥å……å…¶ç†è§£å¹¶æå‡ç”Ÿæˆå›åº”çš„è´¨é‡ã€‚è¿™å¯èƒ½æ˜¯è·å–æ‰€æœ‰ä¸ç‰¹å®šç”µå½±ç›¸å…³çš„å·²çŸ¥ä¿¡æ¯ã€‚'
- en: '**Generative Output**: With the combined knowledge from both the LLM and the
    retrieved context, the system generates text that is not only coherent but also
    contextually relevant, thanks to the augmented data.'
  id: totrans-77
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ç”Ÿæˆè¾“å‡º**ï¼šé€šè¿‡å°† LLM å’Œæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡çš„çŸ¥è¯†ç»“åˆï¼Œç³»ç»Ÿç”Ÿæˆçš„æ–‡æœ¬ä¸ä»…è¿è´¯ï¼Œè€Œä¸”åœ¨ä¸Šä¸‹æ–‡ä¸Šç›¸å…³ï¼Œè¿™å¾—ç›Šäºå¢å¼ºçš„æ•°æ®ã€‚'
- en: '![](../Images/256066ba8bd31d76d97009fb106ed7d4.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/256066ba8bd31d76d97009fb106ed7d4.png)'
- en: RAG architecture (by author)
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: RAG æ¶æ„ï¼ˆä½œè€…æä¾›ï¼‰
- en: While in the Gemini Movie Detectives project, the prompt is enhanced with external
    API data from The Movie Database, RAG typically involves the use of vector indexes
    to streamline this process. It is using much more complex documents as well as
    a much higher amount of data for enhancement. Thus, these indexes act like signposts,
    guiding the system to relevant external sources quickly.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: è€Œåœ¨ Gemini ç”µå½±ä¾¦æ¢é¡¹ç›®ä¸­ï¼Œæç¤ºé€šè¿‡æ¥è‡ªç”µå½±æ•°æ®åº“ï¼ˆThe Movie Databaseï¼‰çš„å¤–éƒ¨ API æ•°æ®è¿›è¡Œäº†å¢å¼ºï¼ŒRAG é€šå¸¸æ¶‰åŠä½¿ç”¨å‘é‡ç´¢å¼•æ¥ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚å®ƒä½¿ç”¨æ›´å¤æ‚çš„æ–‡æ¡£ä»¥åŠæ›´å¤§é‡çš„æ•°æ®æ¥è¿›è¡Œå¢å¼ºã€‚å› æ­¤ï¼Œè¿™äº›ç´¢å¼•åƒè·¯æ ‡ä¸€æ ·ï¼Œå¼•å¯¼ç³»ç»Ÿè¿…é€Ÿæ‰¾åˆ°ç›¸å…³çš„å¤–éƒ¨æ•°æ®æºã€‚
- en: In this project, it is therefore a mini version of RAG but showing the basic
    idea at least, demonstrating the power of external data to augment LLM capabilities.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œå®é™…ä¸Šæ˜¯ RAG çš„ä¸€ä¸ªè¿·ä½ ç‰ˆï¼Œä½†è‡³å°‘å±•ç¤ºäº†åŸºæœ¬çš„æ€è·¯ï¼Œå±•ç¤ºäº†å¤–éƒ¨æ•°æ®å¦‚ä½•å¢å¼º LLM çš„èƒ½åŠ›ã€‚
- en: In more general terms, RAG is a very important concept, especially when crafting
    trivia quizzes or educational games using LLMs like Gemini. This concept can avoid
    the risk of false positives, asking wrong questions, or misinterpreting answers
    from the users.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: æ›´ä¸€èˆ¬æ¥è¯´ï¼ŒRAG æ˜¯ä¸€ä¸ªéå¸¸é‡è¦çš„æ¦‚å¿µï¼Œç‰¹åˆ«æ˜¯åœ¨ä½¿ç”¨åƒ Gemini è¿™æ ·çš„ LLM æ„å»ºè¶£å‘³é—®ç­”æˆ–æ•™è‚²æ¸¸æˆæ—¶ã€‚è¿™ä¸ªæ¦‚å¿µå¯ä»¥é¿å…å‡ºç°è¯¯æŠ¥ã€æé—®é”™è¯¯çš„é—®é¢˜æˆ–è¯¯è§£ç”¨æˆ·çš„ç­”æ¡ˆã€‚
- en: 'Here are some open-source projects that might be helpful when approaching RAG
    in one of your projects:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ˜¯ä¸€äº›å¼€æºé¡¹ç›®ï¼Œåœ¨ä½ å¤„ç†é¡¹ç›®ä¸­çš„ RAG æ—¶å¯èƒ½ä¼šæœ‰å¸®åŠ©ï¼š
- en: '[**txtai**](https://github.com/neuml/txtai): All-in-one open-source embeddings
    database for semantic search, LLM orchestration and language model workflows.'
  id: totrans-84
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[**txtai**](https://github.com/neuml/txtai): ä¸€ä½“åŒ–å¼€æºåµŒå…¥æ•°æ®åº“ï¼Œç”¨äºè¯­ä¹‰æœç´¢ã€LLM ååŒå’Œè¯­è¨€æ¨¡å‹å·¥ä½œæµã€‚'
- en: '[**LangChain**](https://python.langchain.com/): LangChain is a framework for
    developing applications powered by large language models (LLMs).'
  id: totrans-85
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[**LangChain**](https://python.langchain.com/): LangChain æ˜¯ä¸€ä¸ªç”¨äºå¼€å‘ç”±å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰é©±åŠ¨çš„åº”ç”¨ç¨‹åºçš„æ¡†æ¶ã€‚'
- en: '[**Qdrant**](https://github.com/qdrant/qdrant): Vector Search Engine for the
    next generation of AI applications.'
  id: totrans-86
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[**Qdrant**](https://github.com/qdrant/qdrant): é¢å‘ä¸‹ä¸€ä»£äººå·¥æ™ºèƒ½åº”ç”¨çš„å‘é‡æœç´¢å¼•æ“ã€‚'
- en: '[**Weaviate**](https://github.com/weaviate/weaviate): Weaviate is a cloud-native,
    open source vector database that is robust, fast, and scalable.'
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[**Weaviate**](https://github.com/weaviate/weaviate): Weaviate æ˜¯ä¸€ä¸ªäº‘åŸç”Ÿã€å¼€æºçš„å‘é‡æ•°æ®åº“ï¼Œå…·æœ‰å¼ºå¤§çš„æ€§èƒ½ã€å¿«é€Ÿçš„å¤„ç†é€Ÿåº¦å’Œå¯æ‰©å±•æ€§ã€‚'
- en: Of course, with the potential value of this approach for LLM-based applications,
    there are many more open- and close-source alternatives, but with these, you should
    be able to get your research on the topic started.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç„¶ï¼Œè€ƒè™‘åˆ°è¿™ç§æ–¹æ³•åœ¨ LLM åº”ç”¨ä¸­çš„æ½œåœ¨ä»·å€¼ï¼Œè¿˜æœ‰æ›´å¤šçš„å¼€æºå’Œé—­æºæ›¿ä»£æ–¹æ¡ˆï¼Œä½†é€šè¿‡è¿™äº›ï¼Œä½ åº”è¯¥èƒ½å¼€å§‹åœ¨è¯¥ä¸»é¢˜ä¸Šçš„ç ”ç©¶ã€‚
- en: Python projects with Poetry
  id: totrans-89
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ Poetry çš„ Python é¡¹ç›®
- en: Now that the main concepts are clear, letâ€™s have a closer look how the project
    was created and how dependencies are managed in general.
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ä¸»è¦æ¦‚å¿µå·²ç»æ¸…æ™°ï¼Œæˆ‘ä»¬æ¥ä»”ç»†çœ‹çœ‹è¿™ä¸ªé¡¹ç›®æ˜¯å¦‚ä½•åˆ›å»ºçš„ï¼Œä»¥åŠä¾èµ–å…³ç³»æ˜¯å¦‚ä½•ç®¡ç†çš„ã€‚
- en: 'The three main tasks Poetry can help you with are: Build, Publish and Track.
    The idea is to have a deterministic way to manage dependencies, to share your
    project and to track dependency states.'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: Poetryå¯ä»¥å¸®åŠ©ä½ å®Œæˆçš„ä¸‰ä¸ªä¸»è¦ä»»åŠ¡æ˜¯ï¼šæ„å»ºã€å‘å¸ƒå’Œè·Ÿè¸ªã€‚å…¶ç†å¿µæ˜¯ä»¥ä¸€ç§ç¡®å®šæ€§çš„æ–¹å¼ç®¡ç†ä¾èµ–å…³ç³»ï¼Œåˆ†äº«ä½ çš„é¡¹ç›®ï¼Œå¹¶è·Ÿè¸ªä¾èµ–çŠ¶æ€ã€‚
- en: '![](../Images/989ff4a10f32ee19b1a7a4fcd1be4171.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/989ff4a10f32ee19b1a7a4fcd1be4171.png)'
- en: Photo by [Kat von Wood](https://unsplash.com/@kat_von_wood?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡æ¥æºï¼š[Kat von Wood](https://unsplash.com/@kat_von_wood?utm_source=medium&utm_medium=referral)
    äº[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: 'Poetry also handles the creation of virtual environments for you. Per default,
    those are in a centralized folder within your system. However, if you prefer to
    have the virtual environment of project in the project folder, like I do, it is
    a simple config change:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: Poetryè¿˜ä¼šä¸ºä½ å¤„ç†è™šæ‹Ÿç¯å¢ƒçš„åˆ›å»ºã€‚é»˜è®¤æƒ…å†µä¸‹ï¼Œå®ƒä»¬ä½äºä½ ç³»ç»Ÿä¸­çš„ä¸€ä¸ªé›†ä¸­æ–‡ä»¶å¤¹å†…ã€‚ä¸è¿‡ï¼Œå¦‚æœä½ æ›´å–œæ¬¢å°†é¡¹ç›®çš„è™šæ‹Ÿç¯å¢ƒæ”¾åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ï¼Œåƒæˆ‘ä¸€æ ·ï¼Œåªéœ€è¿›è¡Œç®€å•çš„é…ç½®æ›´æ”¹ï¼š
- en: '[PRE0]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'With `poetry new` you can then create a new Python project. It will create
    a virtual environment linking you systems default Python. If you combine this
    with [pyenv](https://github.com/pyenv/pyenv), you get a flexible way to create
    projects using specific versions. Alternatively, you can also tell Poetry directly
    which Python version to use: `poetry env use /full/path/to/python`.'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨`poetry new`ï¼Œä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªæ–°çš„Pythoné¡¹ç›®ã€‚å®ƒä¼šåˆ›å»ºä¸€ä¸ªè™šæ‹Ÿç¯å¢ƒï¼Œå¹¶é“¾æ¥åˆ°ç³»ç»Ÿé»˜è®¤çš„Pythonã€‚å¦‚æœä½ å°†æ­¤ä¸[pyenv](https://github.com/pyenv/pyenv)ç»“åˆä½¿ç”¨ï¼Œä½ å¯ä»¥çµæ´»åœ°ä½¿ç”¨ç‰¹å®šç‰ˆæœ¬åˆ›å»ºé¡¹ç›®ã€‚æˆ–è€…ï¼Œä½ ä¹Ÿå¯ä»¥ç›´æ¥å‘Šè¯‰Poetryä½¿ç”¨å“ªä¸ªPythonç‰ˆæœ¬ï¼š`poetry
    env use /full/path/to/python`ã€‚
- en: Once you have a new project, you can use `poetry add` to add dependencies to
    it.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦ä½ æœ‰äº†ä¸€ä¸ªæ–°é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨`poetry add`å‘½ä»¤å°†ä¾èµ–é¡¹æ·»åŠ åˆ°å…¶ä¸­ã€‚
- en: 'With this, I created the project for Gemini Movie Detectives:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡è¿™ä¸ªï¼Œæˆ‘ä¸ºâ€œåŒå­åº§ç”µå½±ä¾¦æ¢â€åˆ›å»ºäº†é¡¹ç›®ï¼š
- en: '[PRE1]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The metadata about your projects, including the dependencies with the respective
    versions, are stored in the `poetry.toml` and `poetry.lock` files. I added more
    dependencies later, which resulted in the following `poetry.toml` for the project:'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºä½ çš„é¡¹ç›®çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬å„ä¸ªä¾èµ–é¡¹åŠå…¶ç‰ˆæœ¬ï¼Œéƒ½ä¼šå­˜å‚¨åœ¨`poetry.toml`å’Œ`poetry.lock`æ–‡ä»¶ä¸­ã€‚æˆ‘ç¨åæ·»åŠ äº†æ›´å¤šçš„ä¾èµ–é¡¹ï¼Œå¯¼è‡´é¡¹ç›®çš„`poetry.toml`æ–‡ä»¶å¦‚ä¸‹æ‰€ç¤ºï¼š
- en: '[PRE2]'
  id: totrans-101
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Create the API with FastAPI
  id: totrans-102
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä½¿ç”¨FastAPIåˆ›å»ºAPI
- en: FastAPI is a Python framework that allows for rapid API development. Built on
    open standards, it offers a seamless experience without new syntax to learn. With
    automatic documentation generation, robust validation, and integrated security,
    FastAPI streamlines development while ensuring great performance.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: FastAPIæ˜¯ä¸€ä¸ªPythonæ¡†æ¶ï¼Œå¯ä»¥å¿«é€Ÿå¼€å‘APIã€‚å®ƒå»ºç«‹åœ¨å¼€æ”¾æ ‡å‡†ä¹‹ä¸Šï¼Œæä¾›æ— ç¼çš„ä½“éªŒï¼Œæ— éœ€å­¦ä¹ æ–°çš„è¯­æ³•ã€‚é€šè¿‡è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£ã€å¼ºå¤§çš„éªŒè¯åŠŸèƒ½å’Œé›†æˆçš„å®‰å…¨æ€§ï¼ŒFastAPIç®€åŒ–äº†å¼€å‘è¿‡ç¨‹ï¼ŒåŒæ—¶ç¡®ä¿äº†å“è¶Šçš„æ€§èƒ½ã€‚
- en: '![](../Images/65d620d2f1c52e0d1241ecb8e0fbd0b8.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/65d620d2f1c52e0d1241ecb8e0fbd0b8.png)'
- en: Photo by [Florian Steciuk](https://unsplash.com/@flo_stk?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡æ¥æºï¼š[Florian Steciuk](https://unsplash.com/@flo_stk?utm_source=medium&utm_medium=referral)
    äº[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: 'Implementing the API for the Gemini Movie Detectives projects, I simply started
    from a Hello World application and extended it from there. Here is how to get
    started:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: å®ç°â€œåŒå­åº§ç”µå½±ä¾¦æ¢â€é¡¹ç›®çš„APIæ—¶ï¼Œæˆ‘ä»ä¸€ä¸ªHello Worldåº”ç”¨ç¨‹åºå¼€å§‹ï¼Œå¹¶ä»é‚£é‡Œæ‰©å±•ã€‚ä¸‹é¢æ˜¯å¦‚ä½•å¼€å§‹çš„ï¼š
- en: '[PRE3]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'Assuming you also keep the virtual environment within the project folder as
    `.venv/` and use uvicorn, this is how to start the API with the reload feature
    enabled, in order to test code changes without the need of a restart:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾ä½ ä¹Ÿå°†è™šæ‹Ÿç¯å¢ƒä¿å­˜åœ¨é¡¹ç›®æ–‡ä»¶å¤¹ä¸­ï¼Œè·¯å¾„ä¸º`.venv/`ï¼Œå¹¶ä½¿ç”¨uvicornï¼Œä»¥ä¸‹æ˜¯å¦‚ä½•å¯åŠ¨APIå¹¶å¯ç”¨è‡ªåŠ¨é‡è½½åŠŸèƒ½ï¼Œä»¥ä¾¿åœ¨ä¸éœ€è¦é‡å¯çš„æƒ…å†µä¸‹æµ‹è¯•ä»£ç æ›´æ”¹ï¼š
- en: '[PRE4]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'If you have not yet installed [jq](https://jqlang.github.io/jq/), I highly
    recommend doing it now. I might cover this wonderful JSON Swiss Army knife in
    a future article. This is how the response looks like:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ è¿˜æ²¡æœ‰å®‰è£…[jq](https://jqlang.github.io/jq/)ï¼Œæˆ‘å¼ºçƒˆæ¨èä½ ç°åœ¨å®‰è£…ã€‚æˆ‘å¯èƒ½ä¼šåœ¨æœªæ¥çš„æ–‡ç« ä¸­ä»‹ç»è¿™ä¸ªç¥å¥‡çš„JSONç‘å£«å†›åˆ€ã€‚ä»¥ä¸‹æ˜¯å“åº”çš„æ ·å­ï¼š
- en: '![](../Images/154da389d897c5178844dd5d3a349398.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/154da389d897c5178844dd5d3a349398.png)'
- en: Hello FastAPI (by author)
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: Hello FastAPIï¼ˆä½œè€…ï¼‰
- en: 'From here, you can develop your API endpoints as needed. This is how the API
    endpoint implementation to start a movie quiz in Gemini Movie Detectives looks
    like for example:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: ä»è¿™é‡Œå¼€å§‹ï¼Œä½ å¯ä»¥æ ¹æ®éœ€è¦å¼€å‘APIç«¯ç‚¹ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹æ˜¯å®ç°å¯åŠ¨ç”µå½±é—®ç­”çš„APIç«¯ç‚¹çš„æ ·å­ï¼š
- en: '[PRE5]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'Within this code, you can see already three of the main components of the backend:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™æ®µä»£ç ä¸­ï¼Œä½ å¯ä»¥çœ‹åˆ°åç«¯çš„ä¸‰ä¸ªä¸»è¦ç»„ä»¶ï¼š
- en: '`tmdb_client`: A client I implemented using `httpx` to fetch data from The
    Movie Database (TMDB).'
  id: totrans-116
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`tmdb_client`ï¼šæˆ‘ä½¿ç”¨ `httpx` å®ç°çš„å®¢æˆ·ç«¯ï¼Œç”¨äºä»ç”µå½±æ•°æ®åº“ï¼ˆTMDBï¼‰è·å–æ•°æ®ã€‚'
- en: '`prompt_generator`: A class that helps to generate modular prompts based on
    Jinja templates.'
  id: totrans-117
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`prompt_generator`ï¼šä¸€ä¸ªå¸®åŠ©åŸºäº Jinja æ¨¡æ¿ç”Ÿæˆæ¨¡å—åŒ–æç¤ºçš„ç±»ã€‚'
- en: '`gemini_client`: A client to interact with the Gemini LLM via VertexAI in Google
    Cloud.'
  id: totrans-118
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`gemini_client`ï¼šä¸€ä¸ªé€šè¿‡ Google Cloud çš„ VertexAI ä¸ Gemini LLM äº¤äº’çš„å®¢æˆ·ç«¯ã€‚'
- en: We will look at these components in detail later, but first some more helpful
    insights regarding the usage of FastAPI.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç¨åä¼šè¯¦ç»†è®¨è®ºè¿™äº›ç»„ä»¶ï¼Œä½†é¦–å…ˆæ˜¯ä¸€äº›å…³äº FastAPI ä½¿ç”¨çš„æœ‰ç”¨è§è§£ã€‚
- en: 'FastAPI makes it really easy to define the HTTP method and data to be transferred
    to the backend. For this particular function, I expect a `POST` request as this
    creates a new quiz. This can be done with the `post` decorator:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: FastAPI ä½¿å¾—å®šä¹‰ HTTP æ–¹æ³•å’Œè¦ä¼ è¾“åˆ°åç«¯çš„æ•°æ®å˜å¾—éå¸¸ç®€å•ã€‚å¯¹äºè¿™ä¸ªç‰¹å®šçš„å‡½æ•°ï¼Œæˆ‘æœŸæœ›ä¸€ä¸ª `POST` è¯·æ±‚ï¼Œå› ä¸ºå®ƒåˆ›å»ºäº†ä¸€ä¸ªæ–°çš„æµ‹éªŒã€‚è¿™å¯ä»¥é€šè¿‡
    `post` è£…é¥°å™¨æ¥å®Œæˆï¼š
- en: '[PRE6]'
  id: totrans-121
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Also, I am expecting some data within the request sent as JSON in the body.
    In this case, I am expecting an instance of `QuizConfig` as JSON. I simply defined
    `QuizConfig` as a subclass of `BaseModel` from Pydantic (*will be covered later*)
    and with that, I can pass it in the API function and FastAPI will do the rest:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œæˆ‘è¿˜æœŸæœ›è¯·æ±‚ä¸­çš„æ•°æ®ä»¥ JSON æ ¼å¼å‘é€åœ¨è¯·æ±‚ä½“å†…ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘æœŸæœ› `QuizConfig` çš„å®ä¾‹ä½œä¸º JSONã€‚ æˆ‘ç®€å•åœ°å°† `QuizConfig`
    å®šä¹‰ä¸º Pydantic çš„ `BaseModel` å­ç±»ï¼ˆ*ç¨åä¼šä»‹ç»*ï¼‰ï¼Œé€šè¿‡è¿™æ ·åšï¼Œæˆ‘å¯ä»¥å°†å®ƒä¼ é€’ç»™ API å‡½æ•°ï¼ŒFastAPI ä¼šå¤„ç†å…¶ä½™éƒ¨åˆ†ï¼š
- en: '[PRE7]'
  id: totrans-123
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Furthermore, you might notice two custom decorators:'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œä½ å¯èƒ½ä¼šæ³¨æ„åˆ°ä¸¤ä¸ªè‡ªå®šä¹‰è£…é¥°å™¨ï¼š
- en: '[PRE8]'
  id: totrans-125
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: These I implemented to reduce duplicate code. They wrap the API function to
    retry the function in case of errors and to introduce a global rate limit of how
    many movie quizzes can be started per day.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘å®ç°äº†è¿™äº›åŠŸèƒ½æ¥å‡å°‘é‡å¤ä»£ç ã€‚å®ƒä»¬åŒ…è£…äº† API å‡½æ•°ï¼Œåœ¨å‘ç”Ÿé”™è¯¯æ—¶é‡è¯•è¯¥å‡½æ•°ï¼Œå¹¶å¼•å…¥äº†ä¸€ä¸ªå…¨å±€çš„é€Ÿç‡é™åˆ¶ï¼Œé™åˆ¶æ¯å¤©å¯ä»¥å¯åŠ¨å¤šå°‘ä¸ªç”µå½±æµ‹éªŒã€‚
- en: 'What I also liked personally is the error handling with FastAPI. You can simply
    raise a `HTTPException`, give it the desired status code and the user will then
    receive a proper response, for example, if no movie could be found with a given
    configuration:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä¸ªäººä¹Ÿå¾ˆå–œæ¬¢ä½¿ç”¨ FastAPI è¿›è¡Œé”™è¯¯å¤„ç†ã€‚ä½ å¯ä»¥ç®€å•åœ°æŠ›å‡ºä¸€ä¸ª`HTTPException`ï¼ŒæŒ‡å®šæ‰€éœ€çš„çŠ¶æ€ç ï¼Œç”¨æˆ·å°±ä¼šæ”¶åˆ°ä¸€ä¸ªåˆé€‚çš„å“åº”ï¼Œä¾‹å¦‚ï¼Œå¦‚æœåœ¨ç»™å®šçš„é…ç½®ä¸‹æ‰¾ä¸åˆ°ç”µå½±ï¼š
- en: '[PRE9]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'With this, you should have an overview of creating an API like the one for
    Gemini Movie Detectives with FastAPI. Keep in mind: all code is open-source, so
    feel free to have a look at the [API repository on Github](https://github.com/vojay-dev/gemini-movie-detectives-api).'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡è¿™ä¸€ç‚¹ï¼Œä½ åº”è¯¥èƒ½å¤Ÿæ¦‚è§ˆå¦‚ä½•ä½¿ç”¨ FastAPI åˆ›å»ºç±»ä¼¼ Gemini Movie Detectives çš„ APIã€‚è®°ä½ï¼šæ‰€æœ‰ä»£ç éƒ½æ˜¯å¼€æºçš„ï¼Œæ¬¢è¿æŸ¥çœ‹
    [GitHub ä¸Šçš„ API ä»“åº“](https://github.com/vojay-dev/gemini-movie-detectives-api)ã€‚
- en: Data validation and quality with Pydantic
  id: totrans-130
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ Pydantic è¿›è¡Œæ•°æ®éªŒè¯å’Œè´¨é‡æ§åˆ¶
- en: One of the main challenges with todays AI/ML projects is data quality. But that
    does not only apply to ETL/ELT pipelines, which prepare datasets to be used in
    model training or prediction, but also to the AI/ML application itself. Using
    Python for example usually enables Data Engineers and Scientist to get a reasonable
    result with little code but being (mostly) dynamically typed, Python lacks of
    data validation when used in a naive way.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: å½“å‰çš„ AI/ML é¡¹ç›®é¢ä¸´çš„ä¸»è¦æŒ‘æˆ˜ä¹‹ä¸€æ˜¯æ•°æ®è´¨é‡ã€‚ä½†è¿™ä¸ä»…ä»…é€‚ç”¨äº ETL/ELT ç®¡é“ï¼Œè¿™äº›ç®¡é“å‡†å¤‡çš„æ•°æ®é›†ç”¨äºæ¨¡å‹è®­ç»ƒæˆ–é¢„æµ‹ï¼Œä¹Ÿé€‚ç”¨äº AI/ML
    åº”ç”¨æœ¬èº«ã€‚ä¾‹å¦‚ï¼Œä½¿ç”¨ Python é€šå¸¸å¯ä»¥è®©æ•°æ®å·¥ç¨‹å¸ˆå’Œç§‘å­¦å®¶é€šè¿‡å°‘é‡ä»£ç è·å¾—åˆç†çš„ç»“æœï¼Œä½†ç”±äº Pythonï¼ˆå¤§å¤šæ•°æƒ…å†µä¸‹ï¼‰æ˜¯åŠ¨æ€ç±»å‹çš„ï¼Œè‹¥ä»¥å¤©çœŸæ–¹å¼ä½¿ç”¨ï¼ŒPython
    ç¼ºä¹æ•°æ®éªŒè¯ã€‚
- en: 'That is why in this project, I combined FastAPI with Pydantic, a powerful data
    validation library for Python. The goal was to make the API lightweight but strict
    and strong, when it comes to data quality and validation. Instead of plain dictionaries
    for example, the Movie Detectives API strictly uses custom classes inherited from
    the `BaseModel` provided by Pydantic. This is the configuration for a quiz for
    example:'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘å°† FastAPI ä¸ Pydantic ç»“åˆä½¿ç”¨ï¼ŒPydantic æ˜¯ä¸€ä¸ªå¼ºå¤§çš„ Python æ•°æ®éªŒè¯åº“ã€‚ç›®æ ‡æ˜¯ä½¿ API
    è½»é‡åŒ–ï¼Œä½†åœ¨æ•°æ®è´¨é‡å’ŒéªŒè¯æ–¹é¢ä¸¥æ ¼ä¸”å¼ºå¤§ã€‚ä¾‹å¦‚ï¼ŒMovie Detectives API ä¸¥æ ¼ä½¿ç”¨ä» Pydantic æä¾›çš„ `BaseModel` ç»§æ‰¿çš„è‡ªå®šä¹‰ç±»ï¼Œè€Œä¸æ˜¯ç®€å•çš„å­—å…¸ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªå°æµ‹éªŒçš„é…ç½®ç¤ºä¾‹ï¼š
- en: '[PRE10]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: This example illustrates, how not only correct type is ensured, but also further
    validation is applied to the actual values.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªç¤ºä¾‹è¯´æ˜äº†å¦‚ä½•ç¡®ä¿ä¸ä»…æ˜¯æ­£ç¡®çš„ç±»å‹ï¼Œè¿˜åº”ç”¨äº†è¿›ä¸€æ­¥çš„éªŒè¯åˆ°å®é™…å€¼ä¸Šã€‚
- en: 'Furthermore, up-to-date Python features, like `StrEnum` are used to distinguish
    certain types, like personalities:'
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œè¿˜ä½¿ç”¨äº† Python çš„æœ€æ–°ç‰¹æ€§ï¼Œæ¯”å¦‚ `StrEnum`ï¼Œç”¨äºåŒºåˆ†æŸäº›ç±»å‹ï¼Œæ¯”å¦‚ä¸ªæ€§ï¼š
- en: '[PRE11]'
  id: totrans-136
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Also, duplicate code is avoided by defining custom decorators. For example,
    the following decorator limits the number of quiz sessions today, to have control
    over GCP costs:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œé€šè¿‡å®šä¹‰è‡ªå®šä¹‰è£…é¥°å™¨å¯ä»¥é¿å…é‡å¤ä»£ç ã€‚ä¾‹å¦‚ï¼Œä»¥ä¸‹è£…é¥°å™¨é™åˆ¶ä»Šå¤©çš„æµ‹éªŒä¼šè¯æ¬¡æ•°ï¼Œä»è€Œæ§åˆ¶ GCP æˆæœ¬ï¼š
- en: '[PRE12]'
  id: totrans-138
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'It is then simply applied to the related API function:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶ååªéœ€å°†å…¶åº”ç”¨äºç›¸å…³çš„ API å‡½æ•°ï¼š
- en: '[PRE13]'
  id: totrans-140
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: The combination of up-to-date Python features and libraries, such as FastAPI,
    Pydantic or Ruff makes the backend less verbose but still very stable and ensures
    a certain data quality, to ensure the LLM output has the expected quality.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: ç»“åˆäº†æœ€æ–°çš„ Python ç‰¹æ€§å’Œåº“ï¼Œå¦‚ FastAPIã€Pydantic æˆ– Ruffï¼Œä½¿åç«¯æ›´åŠ ç®€æ´ï¼ŒåŒæ—¶ä»ç„¶éå¸¸ç¨³å®šï¼Œç¡®ä¿ä¸€å®šçš„æ•°æ®è´¨é‡ï¼Œä»è€Œç¡®ä¿
    LLM è¾“å‡ºçš„è´¨é‡ç¬¦åˆé¢„æœŸã€‚
- en: TMDB client with httpx
  id: totrans-142
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ httpx çš„ TMDB å®¢æˆ·ç«¯
- en: The TMDB Client class is using [httpx](https://www.python-httpx.org/) to perform
    requests against the TMDB API.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: TMDB å®¢æˆ·ç«¯ç±»ä½¿ç”¨ [httpx](https://www.python-httpx.org/) å¯¹ TMDB API è¿›è¡Œè¯·æ±‚ã€‚
- en: '`httpx` is a rising star in the world of Python libraries. While `requests`
    has long been the go-to choice for making HTTP requests, `httpx` offers a valid
    alternative. One of its key strengths is asynchronous functionality. `httpx` allows
    you to write code that can handle multiple requests concurrently, potentially
    leading to significant performance improvements in applications that deal with
    a high volume of HTTP interactions. Additionally, `httpx` aims for broad compatibility
    with `requests`, making it easier for developers to pick it up.'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: '`httpx` æ˜¯ Python åº“é¢†åŸŸçš„å†‰å†‰å‡èµ·çš„æ–°æ˜Ÿã€‚å°½ç®¡ `requests` é•¿æœŸä»¥æ¥ä¸€ç›´æ˜¯è¿›è¡Œ HTTP è¯·æ±‚çš„é¦–é€‰ï¼Œä½† `httpx` æä¾›äº†ä¸€ä¸ªæœ‰æ•ˆçš„æ›¿ä»£æ–¹æ¡ˆã€‚å…¶ä¸€ä¸ªå…³é”®ä¼˜åŠ¿æ˜¯å¼‚æ­¥åŠŸèƒ½ã€‚`httpx`
    å…è®¸ä½ ç¼–å†™å¯ä»¥å¹¶å‘å¤„ç†å¤šä¸ªè¯·æ±‚çš„ä»£ç ï¼Œè¿™å¯èƒ½ä¼šæ˜¾è‘—æé«˜å¤„ç†å¤§é‡ HTTP è¯·æ±‚çš„åº”ç”¨ç¨‹åºçš„æ€§èƒ½ã€‚æ­¤å¤–ï¼Œ`httpx` è¿˜è‡´åŠ›äºä¸ `requests` çš„å¹¿æ³›å…¼å®¹æ€§ï¼Œä½¿å¼€å‘äººå‘˜æ›´å®¹æ˜“ä¸Šæ‰‹ã€‚'
- en: 'In case of Gemini Movie Detectives, there are two main requests:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ Gemini ç”µå½±ä¾¦æ¢ä¸­ï¼Œæœ‰ä¸¤ä¸ªä¸»è¦è¯·æ±‚ï¼š
- en: '`get_movies`: Get a list of random movies based on specific settings, like
    average number of votes'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`get_movies`ï¼šè·å–åŸºäºç‰¹å®šè®¾ç½®çš„éšæœºç”µå½±åˆ—è¡¨ï¼Œæ¯”å¦‚å¹³å‡æŠ•ç¥¨æ•°ã€‚'
- en: '`get_movie_details`: Get details for a specific movie to be used in a quiz'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`get_movie_details`ï¼šè·å–ç‰¹å®šç”µå½±çš„è¯¦ç»†ä¿¡æ¯ï¼Œç”¨äºæµ‹éªŒ'
- en: 'In order to reduce the amount of external requests, the latter one uses the
    `lru_cache` decorator, which stands for â€œLeast Recently Used cacheâ€. Itâ€™s used
    to cache the results of function calls so that if the same inputs occur again,
    the function doesnâ€™t have to recompute the result. Instead, it returns the cached
    result, which can significantly improve the performance of the program, especially
    for functions with expensive computations. In our case, we cache the details for
    1024 movies, so if 2 players get the same movie, we do not need to make a request
    again:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å‡å°‘å¤–éƒ¨è¯·æ±‚çš„æ•°é‡ï¼Œåè€…ä½¿ç”¨ `lru_cache` è£…é¥°å™¨ï¼Œå³â€œæœ€è¿‘æœ€å°‘ä½¿ç”¨ç¼“å­˜â€ã€‚å®ƒç”¨äºç¼“å­˜å‡½æ•°è°ƒç”¨çš„ç»“æœï¼Œä»¥ä¾¿åœ¨ç›¸åŒçš„è¾“å…¥å†æ¬¡å‡ºç°æ—¶ï¼Œå‡½æ•°æ— éœ€é‡æ–°è®¡ç®—ç»“æœã€‚ç›¸åï¼Œå®ƒä¼šè¿”å›ç¼“å­˜çš„ç»“æœï¼Œè¿™å¯ä»¥æ˜¾è‘—æé«˜ç¨‹åºçš„æ€§èƒ½ï¼Œç‰¹åˆ«æ˜¯å¯¹äºè®¡ç®—å¼€é”€è¾ƒå¤§çš„å‡½æ•°ã€‚åœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬ç¼“å­˜äº†
    1024 éƒ¨ç”µå½±çš„è¯¦ç»†ä¿¡æ¯ï¼Œå› æ­¤å¦‚æœä¸¤ä½ç©å®¶è·å¾—ç›¸åŒçš„ç”µå½±ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦å†æ¬¡å‘èµ·è¯·æ±‚ï¼š
- en: '[PRE14]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Accessing data from The Movie Database (TMDB) is for free for non-commercial
    usage, you can simply [generate an API key](https://developer.themoviedb.org/docs/getting-started)
    and start making requests.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: ä»ç”µå½±æ•°æ®åº“ï¼ˆTMDBï¼‰è®¿é—®æ•°æ®å¯¹äºéå•†ä¸šç”¨é€”æ˜¯å…è´¹çš„ï¼Œä½ åªéœ€ [ç”Ÿæˆä¸€ä¸ª API å¯†é’¥](https://developer.themoviedb.org/docs/getting-started)
    å³å¯å¼€å§‹å‘èµ·è¯·æ±‚ã€‚
- en: Gemini LLM client with VertexAI
  id: totrans-151
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Gemini LLM å®¢æˆ·ç«¯ä¸ VertexAI
- en: Before Gemini via VertexAI can be used, you need a Google Cloud project with
    VertexAI enabled and a Service Account with sufficient access together with its
    JSON key file.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä½¿ç”¨é€šè¿‡ VertexAI çš„ Gemini ä¹‹å‰ï¼Œä½ éœ€è¦ä¸€ä¸ªå¯ç”¨äº† VertexAI çš„ Google Cloud é¡¹ç›®å’Œä¸€ä¸ªå…·æœ‰è¶³å¤Ÿæƒé™çš„æœåŠ¡è´¦æˆ·ï¼Œä»¥åŠå…¶
    JSON å¯†é’¥æ–‡ä»¶ã€‚
- en: '![](../Images/45142cdb2203e3f44a702c25a5395b06.png)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/45142cdb2203e3f44a702c25a5395b06.png)'
- en: Create GCP project (by author)
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ›å»º GCP é¡¹ç›®ï¼ˆç”±ä½œè€…ï¼‰
- en: After creating a new project, navigate to *APIs & Services* â€“> *Enable APIs
    and service* â€“> search for *VertexAI API* â€“> *Enable*.
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ›å»ºæ–°é¡¹ç›®åï¼Œå¯¼èˆªåˆ° *APIs & Services* â€“> *Enable APIs and service* â€“> æœç´¢ *VertexAI API*
    â€“> *Enable*ã€‚
- en: '![](../Images/67fec39048c6afd73eb41b485431904b.png)'
  id: totrans-156
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/67fec39048c6afd73eb41b485431904b.png)'
- en: Enable VertexAI (by author)
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: å¯ç”¨ VertexAIï¼ˆç”±ä½œè€…ï¼‰
- en: To create a Service Account, navigate to *IAM & Admin* â€“> *Service Accounts*
    â€“> *Create service account*. Choose a proper name and go to the next step.
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: è¦åˆ›å»ºæœåŠ¡è´¦æˆ·ï¼Œè¯·å¯¼èˆªåˆ° *IAM & Admin* â€“> *Service Accounts* â€“> *Create service account*ã€‚é€‰æ‹©ä¸€ä¸ªåˆé€‚çš„åç§°å¹¶è¿›å…¥ä¸‹ä¸€æ­¥ã€‚
- en: '![](../Images/fc8a142ea8bcd0bd9da74ed24cd518e6.png)'
  id: totrans-159
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fc8a142ea8bcd0bd9da74ed24cd518e6.png)'
- en: Create Service Account (by author)
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ›å»ºæœåŠ¡è´¦æˆ·ï¼ˆç”±ä½œè€…ï¼‰
- en: Now ensure to assign the account the pre-defined role *Vertex AI User*.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œç¡®ä¿å°†è´¦æˆ·åˆ†é…ç»™é¢„å®šä¹‰è§’è‰² *Vertex AI User*ã€‚
- en: '![](../Images/3cfa198c9646a12a29bac51e718d2dba.png)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3cfa198c9646a12a29bac51e718d2dba.png)'
- en: Assign correct role (by author)
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ†é…æ­£ç¡®çš„è§’è‰²ï¼ˆç”±ä½œè€…æä¾›ï¼‰
- en: Finally you can generate and download the JSON key file by clicking on the new
    user â€“> *Keys* â€“> *Add Key* â€“> *Create new key* â€“> *JSON*. With this file, you
    are good to go.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œä½ å¯ä»¥é€šè¿‡ç‚¹å‡»æ–°ç”¨æˆ· â€“> *å¯†é’¥* â€“> *æ·»åŠ å¯†é’¥* â€“> *åˆ›å»ºæ–°å¯†é’¥* â€“> *JSON* æ¥ç”Ÿæˆå¹¶ä¸‹è½½JSONå¯†é’¥æ–‡ä»¶ã€‚æ‹¥æœ‰è¿™ä¸ªæ–‡ä»¶åï¼Œä½ å°±å¯ä»¥å¼€å§‹ä½¿ç”¨äº†ã€‚
- en: '![](../Images/7e3e4f8e583b623603de57bb4a372e75.png)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7e3e4f8e583b623603de57bb4a372e75.png)'
- en: Create JSON key file (by author)
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ›å»ºJSONå¯†é’¥æ–‡ä»¶ï¼ˆç”±ä½œè€…æä¾›ï¼‰
- en: 'Using Gemini from Google with Python via VertexAI starts by adding the necessary
    dependency to the project:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡VertexAIä½¿ç”¨Googleçš„Geminiä¸Pythoné›†æˆï¼Œé¦–å…ˆéœ€è¦å°†å¿…è¦çš„ä¾èµ–é¡¹æ·»åŠ åˆ°é¡¹ç›®ä¸­ï¼š
- en: '[PRE15]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'With that, you can import and initialize `vertexai` with your JSON key file.
    Also you can load a model, like the newly released Gemini 1.5 Pro model, and start
    a chat session like this:'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰äº†è¿™ä¸ªï¼Œä½ å¯ä»¥ä½¿ç”¨ä½ çš„JSONå¯†é’¥æ–‡ä»¶å¯¼å…¥å¹¶åˆå§‹åŒ–`vertexai`ã€‚ä½ è¿˜å¯ä»¥åŠ è½½ä¸€ä¸ªæ¨¡å‹ï¼Œæ¯”å¦‚æ–°å‘å¸ƒçš„Gemini 1.5 Proæ¨¡å‹ï¼Œå¹¶åƒè¿™æ ·å¼€å§‹ä¸€ä¸ªèŠå¤©ä¼šè¯ï¼š
- en: '[PRE16]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'You can now use `chat.send_message()` to send a prompt to the model. However,
    since you get the response in chunks of data, I recommend using a little helper
    function, so that you simply get the full response as one String:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œä½ å¯ä»¥ä½¿ç”¨`chat.send_message()`å‘æ¨¡å‹å‘é€æç¤ºã€‚ç„¶è€Œï¼Œç”±äºä½ ä¼šæ”¶åˆ°åˆ†å—çš„æ•°æ®å›å¤ï¼Œæˆ‘å»ºè®®ä½¿ç”¨ä¸€ä¸ªå°åŠ©æ‰‹å‡½æ•°ï¼Œè¿™æ ·ä½ å°±å¯ä»¥å°†å®Œæ•´çš„å›å¤ä½œä¸ºä¸€ä¸ªå­—ç¬¦ä¸²è·å¾—ï¼š
- en: '[PRE17]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'A full example can then look like this:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªå®Œæ•´çš„ç¤ºä¾‹å¯èƒ½çœ‹èµ·æ¥åƒè¿™æ ·ï¼š
- en: '[PRE18]'
  id: totrans-174
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: 'Running this, Gemini gave me the following response:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: è¿è¡Œæ­¤ä»£ç åï¼ŒGeminiç»™å‡ºäº†ä»¥ä¸‹å›å¤ï¼š
- en: '![](../Images/cda38295b73a2e42d444a20a344055f2.png)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/cda38295b73a2e42d444a20a344055f2.png)'
- en: You are awesome (by author)
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ çœŸæ£’ï¼ˆç”±ä½œè€…æä¾›ï¼‰
- en: 'I agree with Gemini:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘åŒæ„Geminiçš„çœ‹æ³•ï¼š
- en: '***Eres increÃ­ble***'
  id: totrans-179
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***ä½ çœŸäº†ä¸èµ·***'
- en: 'Another hint when using this: you can also configure the model generation by
    passing a configuration to the `generation_config` parameter as part of the `send_message`
    function. For example:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨æ—¶çš„å¦ä¸€ä¸ªæç¤ºï¼šä½ è¿˜å¯ä»¥é€šè¿‡å°†é…ç½®ä¼ é€’ç»™`send_message`å‡½æ•°ä¸­çš„`generation_config`å‚æ•°æ¥é…ç½®æ¨¡å‹çš„ç”Ÿæˆã€‚ä¾‹å¦‚ï¼š
- en: '[PRE19]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'I am using this in Gemini Movie Detectives to set the `temperature` to 0.5,
    which gave me best results. In this context `temperature` means: how creative
    are the generated responses by Gemini. The value must be between 0.0 and 1.0,
    whereas closer to 1.0 means more creativity.'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘åœ¨Geminiç”µå½±ä¾¦æ¢ä¸­ä½¿ç”¨æ­¤æ–¹æ³•å°†`temperature`è®¾ç½®ä¸º0.5ï¼Œè¿™ç»™äº†æˆ‘æœ€ä½³çš„ç»“æœã€‚åœ¨è¿™ä¸ªä¸Šä¸‹æ–‡ä¸­ï¼Œ`temperature`çš„æ„æ€æ˜¯ï¼šGeminiç”Ÿæˆçš„å›å¤æœ‰å¤šå…·åˆ›æ„ã€‚è¿™ä¸ªå€¼å¿…é¡»ä»‹äº0.0å’Œ1.0ä¹‹é—´ï¼Œå€¼è¶Šæ¥è¿‘1.0ï¼Œè¡¨ç¤ºåˆ›æ„è¶Šå¤šã€‚
- en: One of the main challenges apart from sending a prompt and receive the reply
    from Gemini is to parse the reply in order to extract the relevant information.
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: é™¤äº†å‘é€æç¤ºå¹¶ä»Geminiæ¥æ”¶å›å¤ä¹‹å¤–ï¼Œä¸»è¦çš„æŒ‘æˆ˜ä¹‹ä¸€æ˜¯è§£æå›å¤ä»¥æå–ç›¸å…³ä¿¡æ¯ã€‚
- en: 'One learning from the project is:'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: ä»è¿™ä¸ªé¡¹ç›®ä¸­å­¦åˆ°çš„ä¸€ç‚¹æ˜¯ï¼š
- en: '***Specify a format for Gemini, which does not rely on exact words but uses
    key symbols to separate information elements***'
  id: totrans-185
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***ä¸ºGeminiæŒ‡å®šä¸€ç§æ ¼å¼ï¼Œä¸ä¾èµ–äºç²¾ç¡®çš„è¯è¯­ï¼Œè€Œæ˜¯ä½¿ç”¨å…³é”®ç¬¦å·æ¥åˆ†éš”ä¿¡æ¯å…ƒç´ ***'
- en: 'For example, the question prompt for Gemini contains this instruction:'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼ŒGeminiçš„æé—®æç¤ºåŒ…å«ä»¥ä¸‹æŒ‡ä»¤ï¼š
- en: '[PRE20]'
  id: totrans-187
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'The naive approach would be, to parse the answer by looking for a line that
    starts with `Question:`. However, if we use another language, like German, the
    reply would look like: `Antwort:`.'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: å¹¼ç¨šçš„åšæ³•æ˜¯ï¼Œé€šè¿‡æŸ¥æ‰¾ä»¥`Question:`å¼€å¤´çš„è¡Œæ¥è§£æç­”æ¡ˆã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨å¦ä¸€ç§è¯­è¨€ï¼Œæ¯”å¦‚å¾·è¯­ï¼Œå›å¤ä¼šæ˜¯ï¼š`Antwort:`ã€‚
- en: 'Instead, focus on the structure and key symbols. Read the reply like this:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: ç›¸åï¼Œè¦å…³æ³¨ç»“æ„å’Œå…³é”®ç¬¦å·ã€‚åƒè¿™æ ·é˜…è¯»å›å¤ï¼š
- en: It has 3 lines
  id: totrans-190
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å®ƒæœ‰3è¡Œ
- en: The first line is the question
  id: totrans-191
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€è¡Œæ˜¯é—®é¢˜
- en: Second line the first hint
  id: totrans-192
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¬¬äºŒè¡Œç¬¬ä¸€ä¸ªæç¤º
- en: Third line the second hint
  id: totrans-193
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¬¬ä¸‰è¡Œç¬¬äºŒä¸ªæç¤º
- en: Key and value are separated by `:`
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: é”®å’Œå€¼ä¹‹é—´ç”±`:`åˆ†éš”
- en: 'With this approach, the reply can be parsed language agnostic, and this is
    my implementation in the actual client:'
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™ç§æ–¹æ³•ï¼Œå›å¤å¯ä»¥æ— è¯­è¨€ä¾èµ–åœ°è¿›è¡Œè§£æï¼Œè¿™æ˜¯æˆ‘åœ¨å®é™…å®¢æˆ·ç«¯ä¸­çš„å®ç°ï¼š
- en: '[PRE21]'
  id: totrans-196
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: In the future, the parsing of responses will become even easier. During the
    Google Cloud Next â€™24 conference, Google announced that Gemini 1.5 Pro is now
    publicly available and with that, they also announced some features including
    a JSON mode to have responses in JSON format. Checkout [this article](https://developers.googleblog.com/2024/04/gemini-15-pro-in-public-preview-with-new-features.html)
    for more details.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: æœªæ¥ï¼Œå›å¤çš„è§£æå°†å˜å¾—æ›´åŠ ç®€å•ã€‚åœ¨2024å¹´Google Cloud Nextä¼šè®®æœŸé—´ï¼ŒGoogleå®£å¸ƒGemini 1.5 Proç°å·²å…¬å¼€å‘å¸ƒï¼Œå¹¶å®£å¸ƒäº†ä¸€äº›æ–°ç‰¹æ€§ï¼ŒåŒ…æ‹¬æ”¯æŒJSONæ¨¡å¼ï¼Œä»¥ä¾¿å›å¤ä»¥JSONæ ¼å¼è¿”å›ã€‚æœ‰å…³æ›´å¤šç»†èŠ‚ï¼Œè¯·æŸ¥çœ‹[è¿™ç¯‡æ–‡ç« ](https://developers.googleblog.com/2024/04/gemini-15-pro-in-public-preview-with-new-features.html)ã€‚
- en: Apart from that, I wrapped the Gemini client into a configurable class. You
    can find the [full implementation open-source on Github](https://github.com/vojay-dev/gemini-movie-detectives-api/blob/main/gemini_movie_detectives_api/gemini.py).
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: é™¤æ­¤ä¹‹å¤–ï¼Œæˆ‘å°† Gemini å®¢æˆ·ç«¯å°è£…æˆäº†ä¸€ä¸ªå¯é…ç½®çš„ç±»ã€‚ä½ å¯ä»¥åœ¨ [Github ä¸ŠæŸ¥çœ‹å®Œæ•´çš„å¼€æºå®ç°](https://github.com/vojay-dev/gemini-movie-detectives-api/blob/main/gemini_movie_detectives_api/gemini.py)ã€‚
- en: Modular prompt generator with Jinja
  id: totrans-199
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ Jinja çš„æ¨¡å—åŒ–æç¤ºç”Ÿæˆå™¨
- en: The Prompt Generator is a class wich combines and renders Jinja2 template files
    to create a modular prompt.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºç”Ÿæˆå™¨æ˜¯ä¸€ä¸ªç±»ï¼Œç»“åˆå¹¶æ¸²æŸ“ Jinja2 æ¨¡æ¿æ–‡ä»¶ï¼Œåˆ›å»ºæ¨¡å—åŒ–çš„æç¤ºã€‚
- en: 'There are two base templates: one for generating the question and one for evaluating
    the answer. Apart from that, there is a metadata template to enrich the prompt
    with up-to-date movie data. Furthermore, there are language and personality templates,
    organized in separate folders with a template file for each option.'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰ä¸¤ä¸ªåŸºæœ¬æ¨¡æ¿ï¼šä¸€ä¸ªç”¨äºç”Ÿæˆé—®é¢˜ï¼Œä¸€ä¸ªç”¨äºè¯„ä¼°ç­”æ¡ˆã€‚é™¤æ­¤ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€ä¸ªå…ƒæ•°æ®æ¨¡æ¿ï¼Œç”¨äºé€šè¿‡æœ€æ–°çš„ç”µå½±æ•°æ®ä¸°å¯Œæç¤ºã€‚è¿›ä¸€æ­¥åœ°ï¼Œè¿˜æœ‰è¯­è¨€å’Œä¸ªæ€§æ¨¡æ¿ï¼Œè¿™äº›æ¨¡æ¿è¢«ç»„ç»‡åœ¨ä¸åŒçš„æ–‡ä»¶å¤¹ä¸­ï¼Œæ¯ä¸ªé€‰é¡¹éƒ½æœ‰ä¸€ä¸ªæ¨¡æ¿æ–‡ä»¶ã€‚
- en: '![](../Images/1ca5d024d4a77205380c152045e2a02e.png)'
  id: totrans-202
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1ca5d024d4a77205380c152045e2a02e.png)'
- en: Prompt Generator (by author)
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: æç¤ºç”Ÿæˆå™¨ï¼ˆä½œè€…ï¼‰
- en: Using Jinja2 allows to have advanced features like template inheritance, which
    is used for the metadata.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ Jinja2 ä½¿å¾—å¯ä»¥ä½¿ç”¨ä¸€äº›é«˜çº§åŠŸèƒ½ï¼Œæ¯”å¦‚æ¨¡æ¿ç»§æ‰¿ï¼Œè¿™åœ¨å…ƒæ•°æ®ä¸­æœ‰ä½¿ç”¨ã€‚
- en: This makes it easy to extend this component, not only with more options for
    personalities and languages, but also to extract it into its own open-source project
    to make it available for other Gemini projects.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä½¿å¾—æ‰©å±•è¿™ä¸ªç»„ä»¶å˜å¾—å®¹æ˜“ï¼Œä¸ä»…å¯ä»¥æ·»åŠ æ›´å¤šçš„ä¸ªæ€§å’Œè¯­è¨€é€‰é¡¹ï¼Œè¿˜å¯ä»¥å°†å…¶æå–ä¸ºç‹¬ç«‹çš„å¼€æºé¡¹ç›®ï¼Œä»¥ä¾¿å…¶ä»– Gemini é¡¹ç›®ä½¿ç”¨ã€‚
- en: Frontend
  id: totrans-206
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å‰ç«¯
- en: The Gemini Movie Detectives frontend is split into four main components and
    uses `vue-router` to navigate between them.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: Gemini ç”µå½±ä¾¦æ¢çš„å‰ç«¯åˆ†ä¸ºå››ä¸ªä¸»è¦ç»„ä»¶ï¼Œå¹¶ä½¿ç”¨`vue-router`åœ¨å®ƒä»¬ä¹‹é—´è¿›è¡Œå¯¼èˆªã€‚
- en: The Home component simply displays the welcome message.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: Home ç»„ä»¶ç®€å•åœ°æ˜¾ç¤ºæ¬¢è¿ä¿¡æ¯ã€‚
- en: The Quiz component displays the quiz itself and talks to the API via `fetch`.
    To create a quiz, it sends a POST request to `api/quiz` with the desired settings.
    The backend is then selecting a random movie based on the user settings, creates
    the prompt with the modular prompt generator, uses Gemini to generate the question
    and hints and finally returns everything back to the component so that the quiz
    can be rendered.
  id: totrans-209
  prefs: []
  type: TYPE_NORMAL
  zh: æµ‹éªŒç»„ä»¶å±•ç¤ºæµ‹éªŒæœ¬èº«ï¼Œå¹¶é€šè¿‡`fetch`ä¸ API è¿›è¡Œäº¤äº’ã€‚è¦åˆ›å»ºä¸€ä¸ªæµ‹éªŒï¼Œå®ƒå‘`api/quiz`å‘é€ä¸€ä¸ªåŒ…å«æ‰€éœ€è®¾ç½®çš„ POST è¯·æ±‚ã€‚ç„¶åï¼Œåç«¯æ ¹æ®ç”¨æˆ·è®¾ç½®é€‰æ‹©ä¸€éƒ¨éšæœºç”µå½±ï¼Œä½¿ç”¨æ¨¡å—åŒ–æç¤ºç”Ÿæˆå™¨åˆ›å»ºæç¤ºï¼Œåˆ©ç”¨
    Gemini ç”Ÿæˆé—®é¢˜å’Œæç¤ºï¼Œæœ€åå°†æ‰€æœ‰å†…å®¹è¿”å›ç»™ç»„ä»¶ï¼Œä»¥ä¾¿æ¸²æŸ“æµ‹éªŒã€‚
- en: Additionally, each quiz gets a session ID assigned in the backend and is stored
    in a limited LRU cache.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œæ¯ä¸ªæµ‹éªŒåœ¨åç«¯éƒ½ä¼šåˆ†é…ä¸€ä¸ªä¼šè¯ IDï¼Œå¹¶å­˜å‚¨åœ¨ä¸€ä¸ªæœ‰é™çš„ LRU ç¼“å­˜ä¸­ã€‚
- en: For debugging purposes, this component fetches data from the `api/sessions`
    endpoint. This returns all **active** sessions from the cache.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†è°ƒè¯•ï¼Œè¿™ä¸ªç»„ä»¶ä»`api/sessions`ç«¯ç‚¹è·å–æ•°æ®ã€‚è¯¥ç«¯ç‚¹è¿”å›æ‰€æœ‰**æ´»åŠ¨**çš„ä¼šè¯ã€‚
- en: This component displays statistics about the service. However, so far there
    is only one category of data displayed, which is the quiz limit. To limit the
    costs for VertexAI and GCP usage in general, there is a daily limit of quiz sessions,
    which will reset with the first quiz of the next day. Data is retrieved form the
    `api/limit` endpoint.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥ç»„ä»¶å±•ç¤ºäº†æœåŠ¡çš„ç»Ÿè®¡ä¿¡æ¯ã€‚ç„¶è€Œï¼Œåˆ°ç›®å‰ä¸ºæ­¢ï¼Œåªæœ‰ä¸€ç§ç±»åˆ«çš„æ•°æ®è¢«å±•ç¤ºï¼Œå³æµ‹éªŒé™åˆ¶ã€‚ä¸ºäº†é™åˆ¶ VertexAI å’Œ GCP ä½¿ç”¨çš„æˆæœ¬ï¼Œæµ‹éªŒä¼šè¯æœ‰ä¸€ä¸ªæ¯æ—¥é™åˆ¶ï¼Œæ¬¡æ—¥çš„ç¬¬ä¸€ä¸ªæµ‹éªŒå°†é‡ç½®è¯¥é™åˆ¶ã€‚æ•°æ®é€šè¿‡`api/limit`ç«¯ç‚¹è·å–ã€‚
- en: '![](../Images/260549abb360ab6e866e64b9ae1cd851.png)'
  id: totrans-213
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/260549abb360ab6e866e64b9ae1cd851.png)'
- en: Vue components (by author)
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: Vue ç»„ä»¶ï¼ˆä½œè€…ï¼‰
- en: API examples
  id: totrans-215
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: API ç¤ºä¾‹
- en: Of course using the frontend is a nice way to interact with the application,
    but it is also possible to just use the API.
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç„¶ï¼Œä½¿ç”¨å‰ç«¯æ˜¯ä¸åº”ç”¨äº¤äº’çš„ä¸€ä¸ªå¥½æ–¹æ³•ï¼Œä½†ä¹Ÿå¯ä»¥ä»…ä½¿ç”¨ APIã€‚
- en: 'The following example shows how to start a quiz via the API using the Santa
    Claus / Christmas personality:'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹ä¾‹å­å±•ç¤ºäº†å¦‚ä½•é€šè¿‡ API å¯åŠ¨ä¸€ä¸ªæµ‹éªŒï¼Œä½¿ç”¨åœ£è¯è€äºº/åœ£è¯èŠ‚ä¸ªæ€§ï¼š
- en: '[PRE22]'
  id: totrans-218
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '[PRE23]'
  id: totrans-219
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: '![](../Images/44ed0a40a77f059c48e616639864e51e.png)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/44ed0a40a77f059c48e616639864e51e.png)'
- en: 'Movie Detectives â€” Example: Santa Claus personality (by author)'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: ç”µå½±ä¾¦æ¢ â€” ç¤ºä¾‹ï¼šåœ£è¯è€äººä¸ªæ€§ï¼ˆä½œè€…ï¼‰
- en: 'This example shows how to change the language for a quiz:'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªä¾‹å­å±•ç¤ºäº†å¦‚ä½•ä¸ºæµ‹éªŒæ›´æ”¹è¯­è¨€ï¼š
- en: '[PRE24]'
  id: totrans-223
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: '[PRE25]'
  id: totrans-224
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: 'And this is how to answer to a quiz via an API call:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯é€šè¿‡ API è°ƒç”¨å›ç­”æµ‹éªŒçš„æ–¹æ³•ï¼š
- en: '[PRE26]'
  id: totrans-226
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '[PRE27]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: Conclusion
  id: totrans-228
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“è®º
- en: After I finished the basic project, adding more personalities and languages
    was so easy with the modular prompt approach, that I was impressed by the possibilities
    this opens up for game design and development. I could change this game from a
    pure educational game about movies, into a comedy trivia â€œYou Donâ€™t Know Jackâ€-like
    game within a minute by adding another personality.
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘å®ŒæˆåŸºæœ¬é¡¹ç›®åï¼Œé€šè¿‡æ¨¡å—åŒ–æç¤ºæ–¹æ³•è½»æ¾æ·»åŠ æ›´å¤šä¸ªæ€§å’Œè¯­è¨€ï¼Œæˆ‘å¯¹æ¸¸æˆè®¾è®¡å’Œå¼€å‘çš„å¯èƒ½æ€§æ„Ÿåˆ°å°è±¡æ·±åˆ»ã€‚é€šè¿‡æ·»åŠ å¦ä¸€ä¸ªä¸ªæ€§ï¼Œæˆ‘å¯ä»¥åœ¨ä¸€åˆ†é’Ÿå†…å°†è¿™ä¸ªæ¸¸æˆä»ä¸€ä¸ªå…³äºç”µå½±çš„çº¯æ•™è‚²æ¸¸æˆå˜æˆä¸€ä¸ªå–œå‰§é—®ç­”ç±»ä¼¼äºâ€œYou
    Donâ€™t Know Jackâ€çš„æ¸¸æˆã€‚
- en: Also, combining up-to-date Python functionality with validation libraries like
    Pydantic is very powerful and can be used to ensure good data quality for LLM
    input.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œå°†æœ€æ–°çš„PythonåŠŸèƒ½ä¸Pydanticç­‰éªŒè¯åº“ç»“åˆèµ·æ¥éå¸¸å¼ºå¤§ï¼Œå¯ç”¨äºç¡®ä¿LLMè¾“å…¥çš„æ•°æ®è´¨é‡è‰¯å¥½ã€‚
- en: And there you have it, folks! Youâ€™re now equipped to craft your own LLM-powered
    web application.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸Šå°±æ˜¯ï¼Œæœ‹å‹ä»¬ï¼ç°åœ¨ä½ å·²ç»å…·å¤‡äº†æ‰“é€ è‡ªå·±çš„LLMé©±åŠ¨ç½‘ç»œåº”ç”¨çš„èƒ½åŠ›ã€‚
- en: 'Feeling inspired but need a starting point? Check out the open-source code
    for the Gemini Movie Detectives project:'
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: æ„Ÿåˆ°çµæ„Ÿè¿¸å‘ä½†éœ€è¦ä¸€ä¸ªèµ·ç‚¹å—ï¼ŸæŸ¥çœ‹Gemini Movie Detectivesé¡¹ç›®çš„å¼€æºä»£ç ï¼š
- en: '**ğŸš€ Github repository for backend**: [https://github.com/vojay-dev/gemini-movie-detectives-api](https://github.com/vojay-dev/gemini-movie-detectives-api)'
  id: totrans-233
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ğŸš€ åç«¯Githubä»“åº“**: [https://github.com/vojay-dev/gemini-movie-detectives-api](https://github.com/vojay-dev/gemini-movie-detectives-api)'
- en: '**ğŸ–¥ï¸ Github repository for frontend**: [https://github.com/vojay-dev/gemini-movie-detectives-ui](https://github.com/vojay-dev/gemini-movie-detectives-ui)'
  id: totrans-234
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ğŸ–¥ï¸ å‰ç«¯Githubä»“åº“**: [https://github.com/vojay-dev/gemini-movie-detectives-ui](https://github.com/vojay-dev/gemini-movie-detectives-ui)'
- en: The future of AI-powered applications is bright, and youâ€™re holding the paintbrush!
    Letâ€™s go make something remarkable. And if you need a break, feel free to try
    [https://movie-detectives.com/](https://movie-detectives.com/).
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: äººå·¥æ™ºèƒ½é©±åŠ¨åº”ç”¨çš„æœªæ¥å…‰æ˜æ— é™ï¼Œè€Œä½ å°±æ˜¯é‚£ä½æ‹¿ç€ç”»ç¬”çš„äººï¼è®©æˆ‘ä»¬ä¸€èµ·åˆ›é€ ä¸€äº›éå‡¡çš„ä¸œè¥¿ã€‚å¦‚æœä½ éœ€è¦ä¼‘æ¯ï¼Œå¯ä»¥å°è¯•ä¸€ä¸‹[https://movie-detectives.com/](https://movie-detectives.com/)ã€‚
