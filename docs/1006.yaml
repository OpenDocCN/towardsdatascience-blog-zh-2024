- en: Youâ€™ve Got a Time Series. Now What?
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä½ æœ‰ä¸€ä¸ªæ—¶é—´åºåˆ—ã€‚é‚£æ¥ä¸‹æ¥è¯¥åšä»€ä¹ˆï¼Ÿ
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/youve-got-a-time-series-now-what-38803e079175?source=collection_archive---------1-----------------------#2024-04-20](https://towardsdatascience.com/youve-got-a-time-series-now-what-38803e079175?source=collection_archive---------1-----------------------#2024-04-20)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/youve-got-a-time-series-now-what-38803e079175?source=collection_archive---------1-----------------------#2024-04-20](https://towardsdatascience.com/youve-got-a-time-series-now-what-38803e079175?source=collection_archive---------1-----------------------#2024-04-20)
- en: How to do exploratory data analysis of a time series
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å¦‚ä½•è¿›è¡Œæ—¶é—´åºåˆ—çš„æ¢ç´¢æ€§æ•°æ®åˆ†æ
- en: '[](https://medium.com/@alexroz?source=post_page---byline--38803e079175--------------------------------)[![Aleksei
    Rozanov](../Images/748b69bfaccf39c9aa568a9e6f41eec3.png)](https://medium.com/@alexroz?source=post_page---byline--38803e079175--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--38803e079175--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--38803e079175--------------------------------)
    [Aleksei Rozanov](https://medium.com/@alexroz?source=post_page---byline--38803e079175--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@alexroz?source=post_page---byline--38803e079175--------------------------------)[![Aleksei
    Rozanov](../Images/748b69bfaccf39c9aa568a9e6f41eec3.png)](https://medium.com/@alexroz?source=post_page---byline--38803e079175--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--38803e079175--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--38803e079175--------------------------------)
    [Aleksei Rozanov](https://medium.com/@alexroz?source=post_page---byline--38803e079175--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--38803e079175--------------------------------)
    Â·8 min readÂ·Apr 20, 2024
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘å¸ƒäº [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--38803e079175--------------------------------)
    Â·é˜…è¯»æ—¶é•¿8åˆ†é’ŸÂ·2024å¹´4æœˆ20æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/92a060eae44518a5f0d674f9be8d1280.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/92a060eae44518a5f0d674f9be8d1280.png)'
- en: Image by [author](https://medium.com/@alexroz).
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”± [ä½œè€…](https://medium.com/@alexroz) æä¾›ã€‚
- en: One of the most popular types of data is a time series. Videos, images, pixels,
    signals, literally anything having a time component could be turned into it. Formally,
    **a time series** is a sequence of *historical* measurements of an observable
    variable at **equal time intervals**.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€å¸¸è§çš„æ•°æ®ç±»å‹ä¹‹ä¸€å°±æ˜¯æ—¶é—´åºåˆ—ã€‚è§†é¢‘ã€å›¾ç‰‡ã€åƒç´ ã€ä¿¡å·ï¼Œä»»ä½•å¸¦æœ‰æ—¶é—´æˆåˆ†çš„ä¸œè¥¿éƒ½å¯ä»¥è½¬åŒ–ä¸ºæ—¶é—´åºåˆ—ã€‚å½¢å¼ä¸Šï¼Œ**æ—¶é—´åºåˆ—**æ˜¯å¯¹å¯è§‚å¯Ÿå˜é‡åœ¨**ç­‰æ—¶é—´é—´éš”**ä¸‹çš„*å†å²*æµ‹é‡åºåˆ—ã€‚
- en: In this article I want to suggest a small pipeline which anyone can use when
    analyzing a time series. It could help you to derive meaningful insights about
    the data itself, prepare it for modeling and draw some preliminary conclusions.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘æƒ³å»ºè®®ä¸€ä¸ªå°å‹çš„æµç¨‹ï¼Œä»»ä½•äººåœ¨åˆ†ææ—¶é—´åºåˆ—æ—¶éƒ½å¯ä»¥ä½¿ç”¨å®ƒã€‚å®ƒå¯ä»¥å¸®åŠ©ä½ ä»æ•°æ®æœ¬èº«æå–æœ‰æ„ä¹‰çš„æ´å¯Ÿï¼Œå‡†å¤‡æ•°æ®è¿›è¡Œå»ºæ¨¡ï¼Œå¹¶å¾—å‡ºä¸€äº›åˆæ­¥ç»“è®ºã€‚
- en: Since my favorite word is geospatial ğŸŒ, today we will analyze a meteorological
    time series. In particular, we will explore 2 m air temperature, total precipitation,
    surface net solar radiation and surface pressure at the point in South-Eastern
    Siberia over 2023 derived from hourly [ERA5 Land](https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-land?tab=overview)
    [1] climate reanalysis.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæˆ‘æœ€å–œæ¬¢çš„è¯æ˜¯â€œåœ°ç†ç©ºé—´â€ğŸŒï¼Œä»Šå¤©æˆ‘ä»¬å°†åˆ†æä¸€ç»„æ°”è±¡æ—¶é—´åºåˆ—ã€‚å…·ä½“æ¥è¯´ï¼Œæˆ‘ä»¬å°†æ¢è®¨ä½äºä¸œå—è¥¿ä¼¯åˆ©äºšçš„æŸç‚¹åœ¨2023å¹´æœŸé—´çš„2ç±³æ°”æ¸©ã€æ€»é™æ°´é‡ã€åœ°è¡¨å‡€å¤ªé˜³è¾å°„å’Œåœ°è¡¨æ°”å‹ï¼Œè¿™äº›æ•°æ®æ¥è‡ªæ¯å°æ—¶çš„
    [ERA5 Land](https://cds.climate.copernicus.eu/cdsapp#!/dataset/reanalysis-era5-land?tab=overview)
    [1] æ°”å€™é‡åˆ†æã€‚
- en: As always, to follow up the tutorial, you can download and run the notebook
    [**here**](https://github.com/alexxxroz/Medium/blob/main/Time_Series_EDA.ipynb)**.**
  id: totrans-11
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ä¸€å¦‚æ—¢å¾€ï¼Œè¦è·Ÿè¿›æœ¬æ•™ç¨‹ï¼Œä½ å¯ä»¥ä¸‹è½½å¹¶è¿è¡Œè¿™ä¸ªç¬”è®°æœ¬ [**åœ¨è¿™é‡Œ**](https://github.com/alexxxroz/Medium/blob/main/Time_Series_EDA.ipynb)**ã€‚**
- en: 'To accomplish the analysis we need to import several libraries:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å®Œæˆåˆ†æï¼Œæˆ‘ä»¬éœ€è¦å¯¼å…¥å‡ ä¸ªåº“ï¼š
- en: '[PRE0]'
  id: totrans-13
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'I also decided to try a new matplotlib style from two libraries, [opinionated](https://github.com/saforem2/opinionated)
    and [ambivalent](https://github.com/saforem2/ambivalent?tab=readme-ov-file#user-content-fn-1-97838fc778b9f9f773da6819bae071bb):'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘è¿˜å†³å®šå°è¯•ä½¿ç”¨æ¥è‡ªä¸¤ä¸ªåº“çš„æ–° matplotlib é£æ ¼ï¼Œåˆ†åˆ«æ˜¯ [opinionated](https://github.com/saforem2/opinionated)
    å’Œ [ambivalent](https://github.com/saforem2/ambivalent?tab=readme-ov-file#user-content-fn-1-97838fc778b9f9f773da6819bae071bb)ï¼š
- en: '[PRE1]'
  id: totrans-15
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 1\. Line plots
  id: totrans-16
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 1\. æŠ˜çº¿å›¾
- en: First of all, letâ€™s upload and visualize the data we have. To handle geospatial
    multidimensional arrays we will use [xarray](https://docs.xarray.dev/en/stable/)
    library.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œè®©æˆ‘ä»¬ä¸Šä¼ å¹¶å¯è§†åŒ–æˆ‘ä»¬æ‹¥æœ‰çš„æ•°æ®ã€‚ä¸ºäº†å¤„ç†åœ°ç†ç©ºé—´å¤šç»´æ•°ç»„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ [xarray](https://docs.xarray.dev/en/stable/)
    åº“ã€‚
- en: '[PRE2]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![](../Images/1185e28466ddf068044199a5b20f8d4a.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1185e28466ddf068044199a5b20f8d4a.png)'
- en: Image by [author](https://medium.com/@alexroz).
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±[ä½œè€…](https://medium.com/@alexroz)æä¾›ã€‚
- en: 'Now we need to slice the data specifically for the chosen location and convert
    to a pandas dataframe and create a line plot:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬éœ€è¦æ ¹æ®é€‰æ‹©çš„ä½ç½®åˆ‡å‰²æ•°æ®ï¼Œè½¬æ¢ä¸º pandas æ•°æ®æ¡†ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæŠ˜çº¿å›¾ï¼š
- en: '[PRE3]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[PRE4]'
  id: totrans-23
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '![](../Images/9e4ef447f5b5d88c1e3351cf263e5168.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9e4ef447f5b5d88c1e3351cf263e5168.png)'
- en: Image by [author](https://medium.com/@alexroz).
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±[ä½œè€…](https://medium.com/@alexroz)æä¾›ã€‚
- en: Itâ€™s already clear from the line plots that all the four time series have different
    features, so letâ€™s investigate them using mathematical tools.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: ä»æŠ˜çº¿å›¾ä¸­å·²ç»å¯ä»¥çœ‹å‡ºï¼Œæ‰€æœ‰å››ä¸ªæ—¶é—´åºåˆ—å…·æœ‰ä¸åŒçš„ç‰¹å¾ï¼Œå› æ­¤è®©æˆ‘ä»¬ä½¿ç”¨æ•°å­¦å·¥å…·è¿›ä¸€æ­¥åˆ†æå®ƒä»¬ã€‚
- en: 2\. Decomposition and Stationarity
  id: totrans-27
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 2\. åˆ†è§£ä¸å¹³ç¨³æ€§
- en: 'Any time series has three important attributes to consider:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: ä»»ä½•æ—¶é—´åºåˆ—éƒ½æœ‰ä¸‰ä¸ªé‡è¦å±æ€§éœ€è¦è€ƒè™‘ï¼š
- en: '**Trend**, which is a smooth long-term change in a time series;'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**è¶‹åŠ¿**ï¼Œå³æ—¶é—´åºåˆ—ä¸­å¹³æ»‘çš„é•¿æœŸå˜åŒ–ï¼›'
- en: '**Seasonality**, which is referred to a time series with a regular periodic
    change in the mean of the series;'
  id: totrans-30
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**å­£èŠ‚æ€§**ï¼ŒæŒ‡çš„æ˜¯æ—¶é—´åºåˆ—ä¸­å‡å€¼å…·æœ‰è§„å¾‹æ€§å‘¨æœŸæ€§å˜åŒ–çš„ç‰¹å¾ï¼›'
- en: '**Noise (residuals),** which isa random component of a signal with a mean equal
    to zero.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**å™ªå£°ï¼ˆæ®‹å·®ï¼‰**ï¼Œå³ä¿¡å·ä¸­çš„éšæœºæˆåˆ†ï¼Œå…¶å‡å€¼ä¸ºé›¶ã€‚'
- en: To get each of these components separately, itâ€™s possible to produce **classical
    decomposition** (additive or multiplicative). This operation is produced by applying
    a convolutional filter, so then each time series component is defined as either
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: è¦å•ç‹¬è·å–è¿™äº›ç»„ä»¶ï¼Œå¯ä»¥è¿›è¡Œ**ç»å…¸åˆ†è§£**ï¼ˆåŠ æ³•å‹æˆ–ä¹˜æ³•å‹ï¼‰ã€‚æ­¤æ“ä½œé€šè¿‡åº”ç”¨å·ç§¯æ»¤æ³¢å™¨æ¥æ‰§è¡Œï¼Œå› æ­¤æ¯ä¸ªæ—¶é—´åºåˆ—ç»„ä»¶å®šä¹‰ä¸ºï¼š
- en: '![](../Images/1fab0b93d051c464fe77f0949360141e.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1fab0b93d051c464fe77f0949360141e.png)'
- en: Additive decomposition. Image by [author](https://medium.com/@alexroz).
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: åŠ æ³•åˆ†è§£ã€‚å›¾ç‰‡ç”±[ä½œè€…](https://medium.com/@alexroz)æä¾›ã€‚
- en: or
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ–
- en: '![](../Images/b7e7f1653141537fd4ffe0403de86f00.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b7e7f1653141537fd4ffe0403de86f00.png)'
- en: Multiplicative decomposition. Image by [author](https://medium.com/@alexroz).
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: ä¹˜æ³•åˆ†è§£ã€‚å›¾ç‰‡ç”±[ä½œè€…](https://medium.com/@alexroz)æä¾›ã€‚
- en: where **y** â€” is a value from a time series, **S** â€” seasonal components, **T**
    â€” trend component and **n** â€” noise.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ä¸­ **y** â€” ä¸ºæ—¶é—´åºåˆ—ä¸­çš„å€¼ï¼Œ**S** â€” ä¸ºå­£èŠ‚æ€§æˆåˆ†ï¼Œ**T** â€” ä¸ºè¶‹åŠ¿æˆåˆ†ï¼Œ**n** â€” ä¸ºå™ªå£°ã€‚
- en: To produce decomposition, besides selecting the decomposition type, you need
    to set a seasonal period (e.g. p=1 for annual, p=4 for quarterly, p=12 for monthly
    data etc.).
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: è¦è¿›è¡Œåˆ†è§£ï¼Œé™¤äº†é€‰æ‹©åˆ†è§£ç±»å‹å¤–ï¼Œè¿˜éœ€è¦è®¾ç½®å­£èŠ‚æ€§å‘¨æœŸï¼ˆä¾‹å¦‚ p=1 è¡¨ç¤ºå¹´åº¦ï¼Œp=4 è¡¨ç¤ºå­£åº¦ï¼Œp=12 è¡¨ç¤ºæœˆåº¦æ•°æ®ç­‰ï¼‰ã€‚
- en: Itâ€™s important to mention that the aforementioned classical decomposition is
    a really naive and simple methods. It has significant limitations such as its
    linearity, inability to capture dynamic seasonality and difficulty in handling
    non-stationarity in a time series. However, for the purpose of this article this
    method is more than enough.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: éœ€è¦ç‰¹åˆ«æåˆ°çš„æ˜¯ï¼Œä¸Šè¿°çš„ç»å…¸åˆ†è§£æ–¹æ³•éå¸¸ç®€å•ä¸”æœ´ç´ ã€‚å®ƒæœ‰æ˜¾è‘—çš„å±€é™æ€§ï¼Œå¦‚å…¶çº¿æ€§å‡è®¾ã€æ— æ³•æ•æ‰åŠ¨æ€å­£èŠ‚æ€§ä»¥åŠåœ¨å¤„ç†æ—¶é—´åºåˆ—çš„éå¹³ç¨³æ€§æ—¶çš„å›°éš¾ã€‚ç„¶è€Œï¼Œå°±æœ¬æ–‡çš„ç›®çš„è€Œè¨€ï¼Œè¿™ç§æ–¹æ³•è¶³å¤Ÿäº†ã€‚
- en: 'To do the classical decomposition we will use *seasonal_decompose* function
    from statsmodels library with a period equal 24, since we are dealing with hourly
    data:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†è¿›è¡Œç»å…¸åˆ†è§£ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æ¥è‡ª statsmodels åº“çš„ *seasonal_decompose* å‡½æ•°ï¼Œå‘¨æœŸè®¾ç½®ä¸º 24ï¼Œå› ä¸ºæˆ‘ä»¬å¤„ç†çš„æ˜¯å°æ—¶æ•°æ®ï¼š
- en: '[PRE5]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '![](../Images/9c2814e11f60837ef7f83577d16bf39e.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9c2814e11f60837ef7f83577d16bf39e.png)'
- en: Image by [author](https://medium.com/@alexroz).
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±[ä½œè€…](https://medium.com/@alexroz)æä¾›ã€‚
- en: '![](../Images/3d544b1c9cd662ef6ebec53a0dd01671.png)'
  id: totrans-45
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3d544b1c9cd662ef6ebec53a0dd01671.png)'
- en: Image by [author](https://medium.com/@alexroz).
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±[ä½œè€…](https://medium.com/@alexroz)æä¾›ã€‚
- en: '![](../Images/2eaee716dd06aa5037556f2a052b8d43.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2eaee716dd06aa5037556f2a052b8d43.png)'
- en: Image by [author](https://medium.com/@alexroz).
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±[ä½œè€…](https://medium.com/@alexroz)æä¾›ã€‚
- en: '![](../Images/b550fe4f8fec269dbbba972d9b9e81f7.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b550fe4f8fec269dbbba972d9b9e81f7.png)'
- en: Image by [author](https://medium.com/@alexroz).
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±[ä½œè€…](https://medium.com/@alexroz)æä¾›ã€‚
- en: You can see that for all the variables seasonal component looks like a mess.
    Since we analyze hourly data, these seasonal variations are observed within one
    day, and not really informative. In this case, itâ€™s worth trying to resample the
    data to daily resolution and do the decomposition for the period of one day.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥çœ‹åˆ°ï¼Œå¯¹äºæ‰€æœ‰å˜é‡ï¼Œå­£èŠ‚æ€§æˆåˆ†çœ‹èµ·æ¥å¾ˆæ‚ä¹±ã€‚ç”±äºæˆ‘ä»¬åˆ†æçš„æ˜¯å°æ—¶æ•°æ®ï¼Œè¿™äº›å­£èŠ‚æ€§å˜åŒ–å‡ºç°åœ¨ä¸€å¤©ä¹‹å†…ï¼Œå› æ­¤å¹¶æ²¡æœ‰æä¾›å¤ªå¤šä¿¡æ¯ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œå€¼å¾—å°è¯•å°†æ•°æ®é‡æ–°é‡‡æ ·ä¸ºæ—¥åˆ†è¾¨ç‡ï¼Œå¹¶è¿›è¡Œä¸€å¤©å‘¨æœŸçš„åˆ†è§£ã€‚
- en: '[PRE6]'
  id: totrans-52
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '![](../Images/8cd6a2e794670aeaab6898ec9ad8da9b.png)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8cd6a2e794670aeaab6898ec9ad8da9b.png)'
- en: Image by [author](https://medium.com/@alexroz).
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±[ä½œè€…](https://medium.com/@alexroz)æä¾›ã€‚
- en: By now some of you have probably noticed the Dickey-Fuller test label in the
    upper-right corner of the plot. This is a **stationarity** test, which was done
    using the *adfuller* function of the same library. In case of a time series, stationarity
    means that the properties of a time series do not change over time. Saying properties,
    I mean variance, seasonality, trend and autocorrelation.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°ç›®å‰ä¸ºæ­¢ï¼Œä½ ä»¬ä¸­çš„ä¸€äº›äººå¯èƒ½å·²ç»æ³¨æ„åˆ°å›¾è¡¨å³ä¸Šè§’çš„è¿ªåŸº-å¯Œå‹’æ£€éªŒæ ‡ç­¾ã€‚è¿™æ˜¯ä¸€ä¸ª**å¹³ç¨³æ€§**æ£€éªŒï¼Œä½¿ç”¨äº†åŒä¸€åº“ä¸­çš„*adfuller*å‡½æ•°ã€‚åœ¨æ—¶é—´åºåˆ—çš„æƒ…å†µä¸‹ï¼Œå¹³ç¨³æ€§æ„å‘³ç€æ—¶é—´åºåˆ—çš„å±æ€§éšæ—¶é—´ä¸å‘ç”Ÿå˜åŒ–ã€‚è¿™é‡Œçš„å±æ€§åŒ…æ‹¬æ–¹å·®ã€å­£èŠ‚æ€§ã€è¶‹åŠ¿å’Œè‡ªç›¸å…³æ€§ã€‚
- en: When applying the Augmented Dickey-Fuller (ADF) test to a time series we pose
    a null-hypothesis that the time series is non-stationary. Then we select a significance
    level Î±, which is usually 5%. In essence, Î± is the probability of incorrectly
    rejecting the null hypothesis when it is actually true. So in our case, Î±=5%,
    there is 5% risk of concluding that the time series is stationary, when itâ€™s actually
    not.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å¯¹æ—¶é—´åºåˆ—åº”ç”¨å¢å¼ºå‹è¿ªåŸº-å¯Œå‹’ï¼ˆADFï¼‰æ£€éªŒæ—¶ï¼Œæˆ‘ä»¬æå‡ºåŸå‡è®¾ï¼Œå³æ—¶é—´åºåˆ—æ˜¯éå¹³ç¨³çš„ã€‚ç„¶åæˆ‘ä»¬é€‰æ‹©æ˜¾è‘—æ€§æ°´å¹³Î±ï¼Œé€šå¸¸ä¸º5%ã€‚æœ¬è´¨ä¸Šï¼ŒÎ±æ˜¯é”™è¯¯æ‹’ç»åŸå‡è®¾ï¼ˆå®é™…ä¸ŠåŸå‡è®¾ä¸ºçœŸï¼‰çš„æ¦‚ç‡ã€‚å› æ­¤ï¼Œåœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼ŒÎ±=5%ï¼Œæ„å‘³ç€æœ‰5%çš„é£é™©å¾—å‡ºç»“è®ºè®¤ä¸ºæ—¶é—´åºåˆ—æ˜¯å¹³ç¨³çš„ï¼Œå®é™…ä¸Šå®ƒå¹¶éå¦‚æ­¤ã€‚
- en: The test result will give us a p-value. If itâ€™s lower than 0.05, we can reject
    our null-hypothesis.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: æµ‹è¯•ç»“æœå°†ç»™å‡ºä¸€ä¸ªpå€¼ã€‚å¦‚æœpå€¼å°äº0.05ï¼Œæˆ‘ä»¬å¯ä»¥æ‹’ç»åŸå‡è®¾ã€‚
- en: As you can see, all 4 variables are stationary according to the ADF test.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œæ‰€æœ‰å››ä¸ªå˜é‡æ ¹æ®ADFæ£€éªŒéƒ½æ˜¯å¹³ç¨³çš„ã€‚
- en: Usually, to apply some time series forecasting models such as ARIMA and others,
    stationarity is a must-have, so we are lucky here. Generally, meteorological and
    climatic data are often analyzed in different time-series related learning materials,
    since they are stationary in most cases.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: é€šå¸¸ï¼Œä¸ºäº†åº”ç”¨ä¸€äº›æ—¶é—´åºåˆ—é¢„æµ‹æ¨¡å‹ï¼Œå¦‚ARIMAç­‰ï¼Œå¹³ç¨³æ€§æ˜¯å¿…éœ€çš„ï¼Œå› æ­¤æˆ‘ä»¬åœ¨è¿™é‡Œå¾ˆå¹¸è¿ã€‚ä¸€èˆ¬æ¥è¯´ï¼Œæ°”è±¡å’Œæ°”å€™æ•°æ®é€šå¸¸åœ¨å„ç§æ—¶é—´åºåˆ—ç›¸å…³çš„å­¦ä¹ ææ–™ä¸­è¢«åˆ†æï¼Œå› ä¸ºå®ƒä»¬åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹æ˜¯å¹³ç¨³çš„ã€‚
- en: 3\. Distributions
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 3\. åˆ†å¸ƒ
- en: After concluding that all our time series are stationary, letâ€™s have a look
    at how they are distributed. To do that we will use the well-known seaborn library
    and its function *pairplot*, which allows to create informative plots with hists
    and kdes.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å¾—å‡ºæ‰€æœ‰æ—¶é—´åºåˆ—éƒ½æ˜¯å¹³ç¨³çš„ç»“è®ºåï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹å®ƒä»¬æ˜¯å¦‚ä½•åˆ†å¸ƒçš„ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨è‘—åçš„seabornåº“åŠå…¶*pairplot*å‡½æ•°ï¼Œè¯¥å‡½æ•°å…è®¸åˆ›å»ºåŒ…å«ç›´æ–¹å›¾å’Œæ ¸å¯†åº¦ä¼°è®¡çš„æœ‰ä¿¡æ¯é‡çš„å›¾è¡¨ã€‚
- en: '[PRE7]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '![](../Images/7e170e4e1b89387902da9d18d0263fc3.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7e170e4e1b89387902da9d18d0263fc3.png)'
- en: Image by [author](https://medium.com/@alexroz).
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±[ä½œè€…](https://medium.com/@alexroz)æä¾›ã€‚
- en: Letâ€™s consider the example of t2m (1 row and 1 column). When analyzing the kernel
    density estimation (kde) plot itâ€™s clear that the distribution of this variable
    is multimodal, meaning it has 2 or more â€œbellsâ€. So during the following stages
    of the current article we will try to transform the variable to resemble a **normal
    distribution**.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬è€ƒè™‘t2mï¼ˆ1è¡Œ1åˆ—ï¼‰çš„ä¾‹å­ã€‚å½“åˆ†ææ ¸å¯†åº¦ä¼°è®¡ï¼ˆkdeï¼‰å›¾æ—¶ï¼Œæ˜¾ç„¶è¿™ä¸ªå˜é‡çš„åˆ†å¸ƒæ˜¯å¤šå³°çš„ï¼Œè¿™æ„å‘³ç€å®ƒæœ‰ä¸¤ä¸ªæˆ–æ›´å¤šçš„â€œé’Ÿå½¢æ›²çº¿â€ã€‚å› æ­¤ï¼Œåœ¨æœ¬æ–‡çš„åç»­é˜¶æ®µï¼Œæˆ‘ä»¬å°†å°è¯•å°†è¯¥å˜é‡è½¬åŒ–ä¸º**æ­£æ€åˆ†å¸ƒ**ã€‚
- en: Other plots in the 1st column and row are identical in terms of the information
    they provide, but they are visualized differently. Basically, these are scatter
    plots, which allow to identify how two variables are correlated. So the darker
    the color of a point or the closer a point to the central circle, the higher the
    density of points in this area.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€åˆ—å’Œç¬¬ä¸€è¡Œä¸­çš„å…¶ä»–å›¾è¡¨åœ¨æä¾›çš„ä¿¡æ¯ä¸Šæ˜¯ç›¸åŒçš„ï¼Œä½†å®ƒä»¬çš„å¯è§†åŒ–æ–¹å¼ä¸åŒã€‚åŸºæœ¬ä¸Šï¼Œè¿™äº›æ˜¯æ•£ç‚¹å›¾ï¼Œå…è®¸æˆ‘ä»¬è¯†åˆ«ä¸¤ä¸ªå˜é‡ä¹‹é—´çš„ç›¸å…³æ€§ã€‚å› æ­¤ï¼Œç‚¹çš„é¢œè‰²è¶Šæ·±ï¼Œæˆ–ç‚¹è¶Šæ¥è¿‘ä¸­å¤®åœ†åœˆï¼Œè¯´æ˜è¯¥åŒºåŸŸå†…çš„ç‚¹å¯†åº¦è¶Šé«˜ã€‚
- en: '**4\. Box-Cox Transformation**'
  id: totrans-67
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**4\. Box-Coxå˜æ¢**'
- en: Since we have discovered that the air temperature time series is stationary,
    but not normally distributed, letâ€™s try to fix that using Box-Cox transformation.
    To do that we will use scipy package and its function *boxcox*.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæˆ‘ä»¬å·²ç»å‘ç°ç©ºæ°”æ¸©åº¦æ—¶é—´åºåˆ—æ˜¯å¹³ç¨³çš„ï¼Œä½†ä¸æ˜¯æ­£æ€åˆ†å¸ƒçš„ï¼Œè®©æˆ‘ä»¬å°è¯•ä½¿ç”¨Box-Coxå˜æ¢æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨scipyåŒ…åŠå…¶*boxcox*å‡½æ•°ã€‚
- en: '[PRE8]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '![](../Images/1b8b07eba99a1d17396bcfb5708d1747.png)'
  id: totrans-70
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1b8b07eba99a1d17396bcfb5708d1747.png)'
- en: Image by [author](https://medium.com/@alexroz).
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±[ä½œè€…](https://medium.com/@alexroz)æä¾›ã€‚
- en: The left part of the plot is our time series distribution after BoxCox transformation,
    and as you can see, itâ€™s still far from being called â€œnormallyâ€ distributed. But
    if we compare it with the one on the right, we can say it definitely got closer
    to a normal one.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾çš„å·¦ä¾§æ˜¯æˆ‘ä»¬ç»è¿‡BoxCoxå˜æ¢åçš„æ—¶é—´åºåˆ—åˆ†å¸ƒï¼Œæ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œå®ƒä»ç„¶è¿œæœªè¾¾åˆ°â€œæ­£æ€â€åˆ†å¸ƒã€‚ä½†å¦‚æœä¸å³ä¾§çš„åˆ†å¸ƒè¿›è¡Œæ¯”è¾ƒï¼Œæˆ‘ä»¬å¯ä»¥è¯´å®ƒè‚¯å®šå·²ç»æ›´æ¥è¿‘æ­£æ€åˆ†å¸ƒäº†ã€‚
- en: Another thing we can do to make sure that the performed transformation was useful
    is to create a probability plot. In essence, we plot quantiles of a theoretical
    distribution (in our case normal) against samples of our empirical data (i.e.
    the time series we consider). The closer the points to the white line, the better.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥åšçš„å¦ä¸€ä»¶äº‹æ¥ç¡®ä¿æ‰€æ‰§è¡Œçš„å˜æ¢æ˜¯æœ‰ç”¨çš„ï¼Œå°±æ˜¯åˆ›å»ºä¸€ä¸ªæ¦‚ç‡å›¾ã€‚æœ¬è´¨ä¸Šï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªç†è®ºåˆ†å¸ƒçš„åˆ†ä½æ•°ï¼ˆåœ¨æˆ‘ä»¬çš„ä¾‹å­ä¸­æ˜¯æ­£æ€åˆ†å¸ƒï¼‰ä¸æˆ‘ä»¬çš„ç»éªŒæ•°æ®ï¼ˆå³æˆ‘ä»¬æ‰€è€ƒè™‘çš„æ—¶é—´åºåˆ—ï¼‰çš„æ ·æœ¬è¿›è¡Œæ¯”è¾ƒã€‚ç‚¹è¶Šæ¥è¿‘ç™½çº¿ï¼Œæ•ˆæœè¶Šå¥½ã€‚
- en: '[PRE9]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '![](../Images/b5ef301fb62270b7c6e400ffceac1241.png)'
  id: totrans-75
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b5ef301fb62270b7c6e400ffceac1241.png)'
- en: Image by [author](https://medium.com/@alexroz).
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡æ¥æºï¼š[ä½œè€…](https://medium.com/@alexroz)ã€‚
- en: If you are going to use the transformed time series for ML modeling, donâ€™t forget
    to apply reverse BoxCox transformation, otherwise youâ€™ll have to deal with inadequate
    numbers!
  id: totrans-77
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æ‰“ç®—å°†å˜æ¢åçš„æ—¶é—´åºåˆ—ç”¨äºæœºå™¨å­¦ä¹ å»ºæ¨¡ï¼Œè¯·ä¸è¦å¿˜è®°åº”ç”¨é€†BoxCoxå˜æ¢ï¼Œå¦åˆ™ä½ å°†ä¸å¾—ä¸å¤„ç†ä¸é€‚å½“çš„æ•°å€¼ï¼
- en: '**5\. Autocorrelation**'
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**5. è‡ªç›¸å…³**'
- en: And the last step in our analysis is autocorrelation. Autocorrelation function(ACF)
    estimates correlation between a time series and a lagged version of it. Or in
    other words, how a specific value of a time series correlates with other prior
    values in different time intervals.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬åˆ†æçš„æœ€åä¸€æ­¥æ˜¯è‡ªç›¸å…³ã€‚è‡ªç›¸å…³å‡½æ•°ï¼ˆACFï¼‰ä¼°è®¡æ—¶é—´åºåˆ—ä¸å…¶æ»åç‰ˆæœ¬ä¹‹é—´çš„ç›¸å…³æ€§ã€‚æ¢å¥è¯è¯´ï¼Œå®ƒæè¿°äº†æ—¶é—´åºåˆ—çš„æŸä¸€ç‰¹å®šå€¼ä¸åœ¨ä¸åŒæ—¶é—´é—´éš”å†…å…¶ä»–å…ˆå‰å€¼çš„ç›¸å…³æ€§ã€‚
- en: It might also be helpful to plot partial autocorrelation function (PACF), which
    is the same as autocorrelation, but with correlation at shorter lags removed.
    So it estimates the correlation between values within a certain timestamp, but
    controlling the influence of other values.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: ç»˜åˆ¶éƒ¨åˆ†è‡ªç›¸å…³å‡½æ•°ï¼ˆPACFï¼‰ä¹Ÿå¯èƒ½ä¼šå¾ˆæœ‰å¸®åŠ©ï¼ŒPACFä¸è‡ªç›¸å…³ç›¸åŒï¼Œä½†ç§»é™¤äº†çŸ­æœŸæ»åçš„ç›¸å…³æ€§ã€‚å› æ­¤ï¼Œå®ƒä¼°è®¡çš„æ˜¯åœ¨æŸä¸ªæ—¶é—´æˆ³å†…çš„å€¼ä¹‹é—´çš„ç›¸å…³æ€§ï¼ŒåŒæ—¶æ§åˆ¶å…¶ä»–å€¼çš„å½±å“ã€‚
- en: '[PRE10]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '![](../Images/0dd2ecabf7f1fdb15e13be386904ee29.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0dd2ecabf7f1fdb15e13be386904ee29.png)'
- en: Image by [author](https://medium.com/@alexroz).
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡æ¥æºï¼š[ä½œè€…](https://medium.com/@alexroz)ã€‚
- en: As you can see there is a really strong partial autocorrelation in the surface
    pressure time series with 1 day lag. Then it weakens significantly and after the
    3 day lag itâ€™s almost absent. Such an analysis might help you to better understand
    the nature of the data you are dealing with, and hence, derive more meaningful
    conclusions.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œåœ°é¢æ°”å‹æ—¶é—´åºåˆ—åœ¨1å¤©æ»åæ—¶å­˜åœ¨éå¸¸å¼ºçš„éƒ¨åˆ†è‡ªç›¸å…³ã€‚ç„¶åè‡ªç›¸å…³æ˜¾è‘—å‡å¼±ï¼Œç»è¿‡3å¤©æ»ååå‡ ä¹æ¶ˆå¤±ã€‚è¿™æ ·çš„åˆ†æå¯ä»¥å¸®åŠ©ä½ æ›´å¥½åœ°ç†è§£æ‰€å¤„ç†æ•°æ®çš„æ€§è´¨ï¼Œä»è€Œå¾—å‡ºæ›´æœ‰æ„ä¹‰çš„ç»“è®ºã€‚
- en: This is it, a really short and straight-forward pipeline to conduct an exploratory
    data analysis when dealing with time series. Itâ€™s important to remember that the
    methods you should use are highly depended on the questions you need to tackle.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: å°±è¿™æ ·ï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸ç®€çŸ­ä¸”ç›´æ¥çš„ç®¡é“ï¼Œç”¨äºåœ¨å¤„ç†æ—¶é—´åºåˆ—æ—¶è¿›è¡Œæ¢ç´¢æ€§æ•°æ®åˆ†æã€‚é‡è¦çš„æ˜¯è¦è®°ä½ï¼Œä½ åº”è¯¥ä½¿ç”¨çš„æ–¹æ³•é«˜åº¦ä¾èµ–äºä½ éœ€è¦è§£å†³çš„é—®é¢˜ã€‚
- en: Hopefully this article was informative and insightful for you!
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ æœ‰æ‰€å¯å‘ï¼
- en: ===========================================
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: ===========================================
- en: '**Reference:**'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '**å‚è€ƒæ–‡çŒ®ï¼š**'
- en: '[1] MuÃ±oz Sabater, J. (2019): ERA5-Land hourly data from 1950 to present. Copernicus
    Climate Change Service (C3S) Climate Data Store (CDS). DOI: 10.24381/cds.e2161bac
    (Accessed on 16â€“04â€“2024)'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '[1] MuÃ±oz Sabater, J. (2019)ï¼šERA5-Land æ¯å°æ—¶æ•°æ®ï¼Œæ—¶é—´èŒƒå›´ä»1950å¹´è‡³ä»Šã€‚å“¥ç™½å°¼æ°”å€™å˜åŒ–æœåŠ¡ï¼ˆC3Sï¼‰æ°”å€™æ•°æ®å­˜å‚¨ï¼ˆCDSï¼‰ã€‚DOIï¼š10.24381/cds.e2161bacï¼ˆè®¿é—®æ—¥æœŸï¼š2024å¹´4æœˆ16æ—¥ï¼‰'
- en: ===========================================
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: ===========================================
- en: '***All my publications on Medium are free and open-access, thatâ€™s why Iâ€™d really
    appreciate if you followed me here!***'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: '***æˆ‘åœ¨Mediumä¸Šçš„æ‰€æœ‰å‡ºç‰ˆç‰©éƒ½æ˜¯å…è´¹çš„ï¼Œå…¬å¼€è®¿é—®çš„ï¼Œå› æ­¤å¦‚æœä½ åœ¨è¿™é‡Œå…³æ³¨æˆ‘ï¼Œæˆ‘å°†éå¸¸æ„Ÿæ¿€ï¼***'
- en: P.s. Iâ€™m extremely passionate about (Geo)Data Science, ML/AI and Climate Change.
    So if you want to work together on some project pls contact me in [LinkedIn](https://www.linkedin.com/in/alexxxroz/).
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: P.S. æˆ‘å¯¹ï¼ˆåœ°ç†ï¼‰æ•°æ®ç§‘å­¦ã€æœºå™¨å­¦ä¹ /äººå·¥æ™ºèƒ½ä»¥åŠæ°”å€™å˜åŒ–éå¸¸çƒ­è¡·ã€‚å¦‚æœä½ æƒ³ä¸€èµ·åˆä½œè¿›è¡ŒæŸä¸ªé¡¹ç›®ï¼Œè¯·åœ¨[LinkedIn](https://www.linkedin.com/in/alexxxroz/)ä¸Šè”ç³»æˆ‘ã€‚
- en: ğŸ›°ï¸Follow for moreğŸ›°ï¸
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ›°ï¸å…³æ³¨æˆ‘è·å–æ›´å¤šå†…å®¹ğŸ›°ï¸
