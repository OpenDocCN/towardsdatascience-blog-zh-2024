<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Streamlining E-commerce: Leveraging Entity Resolution for Product Matching</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Streamlining E-commerce: Leveraging Entity Resolution for Product Matching</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/streamlining-e-commerce-leveraging-entity-resolution-for-product-matching-6a507fd5e925?source=collection_archive---------12-----------------------#2024-05-28">https://towardsdatascience.com/streamlining-e-commerce-leveraging-entity-resolution-for-product-matching-6a507fd5e925?source=collection_archive---------12-----------------------#2024-05-28</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="b10f" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">How Google figures out the price of a product across websites</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@vjoshi345?source=post_page---byline--6a507fd5e925--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Varun Joshi" class="l ep by dd de cx" src="../Images/e71683e268bdd7145555ef9b7d1df404.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*KKEoZkrH_FgXxC1JlFHRtA.jpeg"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--6a507fd5e925--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@vjoshi345?source=post_page---byline--6a507fd5e925--------------------------------" rel="noopener follow">Varun Joshi</a></p></div></div></div><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ib ic ah ai aj ak al am an ao ap aq ar id ie if" disabled="">Follow</button></p></div></div></span></div></div><div class="l ig"><span class="bf b bg z dx"><div class="ab cn ih ii ij"><div class="ik il ab"><div class="bf b bg z dx ab im"><span class="in l ig">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--6a507fd5e925--------------------------------" rel="noopener follow"><p class="bf b bg z io ip iq ir is it iu iv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">9 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">May 28, 2024</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w ea eb q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon ed in kg kh ki"><div class=""><div class="kj kk kl km kn ko kp am kq kr ks ki"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kt ku kv kw kx ky kz"><p class="bf b dy z dx"><span class="kk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kj la lb ab q ee lc ld" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="le"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lf k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lg an ao ap id lh li lj" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep lk cn"><div class="l ae"><div class="ab cb"><div class="ll lm ln lo lp lq ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><p id="7c37" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk"><em class="ne">Written by </em><span class="ia"><span class="ia" aria-hidden="false"><a class="nf ib ng" href="https://medium.com/u/73aa01507754?source=post_page---user_mention--6a507fd5e925--------------------------------" rel="noopener" target="_blank"><em class="ne">Varun Joshi</em></a></span></span><em class="ne"> and </em><span class="ia"><span class="ia" aria-hidden="false"><a class="nf ib ng" href="https://medium.com/u/59894ece9ffd?source=post_page---user_mention--6a507fd5e925--------------------------------" rel="noopener" target="_blank"><em class="ne">Gauri Kamat</em></a></span></span></p><figure class="nk nl nm nn no np nh ni paragraph-image"><div role="button" tabindex="0" class="nq nr ed ns bh nt"><div class="nh ni nj"><img src="../Images/82913d1dabcf38fd01f9f1f58151f133.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*AdDgjZa07fTC2wKR0pFgsw.png"/></div></div><figcaption class="nv nw nx nh ni ny nz bf b bg z dx">Image from Google Shopping for query “red polo ralph lauren”</figcaption></figure><p id="3db5" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">As e-commerce continues to dominate the retail space, the challenge of accurately matching products across platforms and databases grows more complex. In this article, we demonstrate that product matching can simply be an instance of the wider statistical framework of entity resolution.</p><p id="15a2" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Product matching (PM) refers to the problem of figuring out if two separate listings actually refer to the same product. There are a variety of situations where this is important. For example, consider the use-cases below:</p><ol class=""><li id="fd7d" class="mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd oa ob oc bk">With the rapid expansion of online marketplaces, e-commerce platforms (e.g., Amazon) have thousands of sellers offering their products, and new sellers are regularly on-boarded to the platform. Moreover, these sellers potentially add thousands of new products to the platform every day [1]. However, the same product might already be available on the website from other sellers. Product matching is required to group these different offers into a single listing so that customers can have a clear view of the different offers available for a product</li><li id="910f" class="mi mj fq mk b go od mm mn gr oe mp mq mr of mt mu mv og mx my mz oh nb nc nd oa ob oc bk">In e-commerce marketplaces, sellers can also create duplicate listings to acquire more real estate on the search page. In other words, they can list the same product multiple times (with slight variation in title, description, etc.) to increase the probability that their product will be seen by the customer. To improve customer experience, product matching is required to detect and remove such duplicate listings</li><li id="d197" class="mi mj fq mk b go od mm mn gr oe mp mq mr of mt mu mv og mx my mz oh nb nc nd oa ob oc bk">Another important use case is competitor analysis. To set competitive prices and make decisions on the inventory, e-commerce companies need to be aware of the offers for the same product across their competition.</li><li id="95c1" class="mi mj fq mk b go od mm mn gr oe mp mq mr of mt mu mv og mx my mz oh nb nc nd oa ob oc bk">Finally, price comparison services e.g., Google shopping [2], need product matching to figure out the price for a product across different platforms.</li></ol><p id="93e4" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">In this article, we show how the Entity Resolution (ER) framework helps us solve the PM problem. Specifically, we describe a framework widely used in ER, and demonstrate its application on a synthetic PM dataset. We begin by providing relevant background on ER.</p><h1 id="34c1" class="oi oj fq bf ok ol om gq on oo op gt oq or os ot ou ov ow ox oy oz pa pb pc pd bk"><strong class="al">What is entity resolution?</strong></h1><p id="b465" class="pw-post-body-paragraph mi mj fq mk b go pe mm mn gr pf mp mq mr pg mt mu mv ph mx my mz pi nb nc nd fj bk">Entity Resolution (ER) is a technique that identifies duplicate entities either within, or across data sources. ER within the same database is commonly called <em class="ne">deduplication</em>, while ER across multiple databases is called <em class="ne">record linkage</em>. When unique identifiers (like social security numbers) are available, ER is a fairly easy task. However, such identifiers are typically unavailable for reasons owing to data privacy. In these cases, ER becomes considerably more complex.</p><p id="f766" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Why does ER matter? ER can help augment existing databases with data from additional sources. This allows users to perform new analyses, without the added cost of collecting more data. ER has found applications across multiple domains, including e-commerce, human rights research, and healthcare. A <a class="af pj" href="https://www.demographic-research.org/articles/volume/41/27" rel="noopener ugc nofollow" target="_blank">recent application</a> involves counting casualties in the El Salvadoran civil war, by applying ER to retrospective mortality surveys. Another <a class="af pj" href="https://www.tandfonline.com/doi/full/10.1080/00031305.2023.2191664" rel="noopener ugc nofollow" target="_blank">interesting application</a> is deduplicating inventor names in a patents database maintained by the U.S. Patents and Trademarks Office.</p><h2 id="8418" class="pk oj fq bf ok pl pm pn on po pp pq oq mr pr ps pt mv pu pv pw mz px py pz qa bk"><strong class="al">Deterministic and Probabilistic ER</strong></h2><p id="f07d" class="pw-post-body-paragraph mi mj fq mk b go pe mm mn gr pf mp mq mr pg mt mu mv ph mx my mz pi nb nc nd fj bk">Deterministic ER methods rely on exact agreement on all attributes of any record pair. For instance, suppose that we have two files A and B. Say we are comparing record <em class="ne">a</em> from file A and <em class="ne">b</em> from file B. Further, suppose that the comparison is based on two attributes: product type (for e.g., clothing, electronics) and manufacturing year. A deterministic rule declares (<em class="ne">a, b</em>) to be a link, if product typeᵃ = product typeᵇ and yearᵃ= yearᵇ. This is workable, as long as all attributes are categorical. If we have a textual attribute like product name, then deterministic linking may produce errors. For example, if nameᵃ = “Sony TV 4” and nameᵇ = “Sony TV4”, then (<em class="ne">a,b</em>) will be declared a non-link, even though the two names only differ by a space.</p><p id="4126" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">What we then need is something that takes into account partial levels of agreement. This is where probabilistic ER can be used. In probabilistic ER, every pair (<em class="ne">a,b</em>) is assigned a probability of being a link, based on (1) how many attributes agree; and (2) how well they agree. For example, if product typeᵃ = product typeᵇ, yearᵃ= yearᵇ, and nameᵃ and nameᵇ are fairly close, then (<em class="ne">a,b</em>) will be assigned a high probability of being a link. If product typeᵃ = product typeᵇ, yearᵃ= yearᵇ, but nameᵃ and nameᵇ are poles apart (e.g. “AirPods” and “Sony TV4”), then this probability will be much lower. For textual attributes, probabilistic ER relies on <a class="af pj" href="https://isr.unm.edu/reports/2019/assessing-record-linkage-matches-using-string-distance-measures.pdf" rel="noopener ugc nofollow" target="_blank">string distance metrics</a>, such as the <em class="ne">Jaro-Winkler</em> and the <em class="ne">Levenshtein</em> distances.</p><h2 id="fb88" class="pk oj fq bf ok pl pm pn on po pp pq oq mr pr ps pt mv pu pv pw mz px py pz qa bk"><strong class="al">The Fellegi-Sunter model</strong></h2><p id="3124" class="pw-post-body-paragraph mi mj fq mk b go pe mm mn gr pf mp mq mr pg mt mu mv ph mx my mz pi nb nc nd fj bk">The Fellegi-Sunter model [3] provides a probabilistic framework, allowing analysts to quantify the likelihood of a match between records, based on the similarity of their attributes. The model operates by calculating a match weight for each record pair from both files. This weight reflects the degree of agreement between their respective attributes. For a given record-pair the match weight is</p><figure class="nk nl nm nn no np nh ni paragraph-image"><div class="nh ni qb"><img src="../Images/74afb244d1449d4bf4ef9ed87a7fe226.png" data-original-src="https://miro.medium.com/v2/resize:fit:768/format:webp/1*E3jibQFFykKhDj1Qb0bNtA.png"/></div><figcaption class="nv nw nx nh ni ny nz bf b bg z dx">match weight for a record pair</figcaption></figure><p id="39a5" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">where mᵢ is the the probability that the two records agree on attribute <em class="ne">i </em><strong class="mk fr">given that they are a match;</strong> uᵢ is the probability that the two records agree on attribute <em class="ne">i </em><strong class="mk fr">given that they are a non-match;</strong> and <em class="ne">lambda</em> is the prior probability of a match, i.e. the probability of matching given no other information about the record pair. The <em class="ne">m</em> probability generally reflects the quality of the variables used for linking, while the <em class="ne">u</em> probability reflects incidental agreement between non matching record pairs.</p><p id="dc7f" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">The match weight is converted to a match probability between two records.</p><figure class="nk nl nm nn no np nh ni paragraph-image"><div class="nh ni qc"><img src="../Images/0c4ff9257377c25834a209a2dec67726.png" data-original-src="https://miro.medium.com/v2/resize:fit:614/format:webp/1*FZ3IUcJ_YYa9LMnzwakmew.png"/></div><figcaption class="nv nw nx nh ni ny nz bf b bg z dx">match probability</figcaption></figure><p id="24a1" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Finally, the match probability is compared to a chosen threshold value to decide whether the record pair is a match, a non-match, or requires further manual review.</p><h1 id="fc31" class="oi oj fq bf ok ol om gq on oo op gt oq or os ot ou ov ow ox oy oz pa pb pc pd bk"><strong class="al">Illustration with synthetic product data</strong></h1><h2 id="4ce4" class="pk oj fq bf ok pl pm pn on po pp pq oq mr pr ps pt mv pu pv pw mz px py pz qa bk"><strong class="al">Data Generation</strong></h2><p id="8100" class="pw-post-body-paragraph mi mj fq mk b go pe mm mn gr pf mp mq mr pg mt mu mv ph mx my mz pi nb nc nd fj bk">We generate data to reflect a realistic product matching scenario. Specifically, we generate file A comprising 79 records, and file B comprising 192 records. There are 59 overlapping records between the two files. Both files contain four linking variables, namely the product name, product type, brand, and price. For example, a record in file A representing Apple airpods has the product name “Apple AirPods”, product type “Earbuds”, the recorded brand is “Apple” and the product price is $200. The product name, type, and brand are string-valued variables, while the price is a continuous-valued numeric variable. We also generate errors in each of the linking variables. In the string valued fields, we introduce deletion errors; for example, a series 6 Apple watch may be recorded as “Apple Watch Series 6” in file A and as “Apple Watch 6” in file B. We also introduce case-change errors in the string fields; for example, the same product may be recorded as “apple watch series 6” in file A and as “Apple Watch 6” in file B. The continuous nature of the price variable may automatically induce errors. For example, a product may be priced at $55 in one file, but $55.2 in the other.</p><p id="85ee" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">For synthetic data generation, we used the free version of ChatGPT (i.e., GPT 3.5) [4]. The following three prompts were used for data generation:</p><p id="af78" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk"><strong class="mk fr">Prompt 1: to generate the dataset with links</strong></p><pre class="nk nl nm nn no qd qe qf bp qg bb bk"><span id="d1d6" class="qh oj fq qe b bg qi qj l qk ql">Generate a synthetic dataset which links 59 distinct products from two different sources. <br/>The dataset should have the following columns: Title_A, Product_Type_A, Brand_A, Price_A, Title_B, Product_Type_B, Brand_B, Price_B. <br/>Each row of the dataset refers to the same product but the values of the corresponding columns from Dataset A and Dataset B can be slightly different. There can be typos or missing value in each column. <br/><br/>As an example, check out the following couple of rows:<br/><br/>Title_A | Product_Type_A | Brand_A | Price_A | Title_B | Product_Type_B | Brand_B | Price_B<br/>Levis Men 505 Regular | Jeans | Levis | 55 | Levs Men 505 | Jeans | Levis | 56<br/>Toshiba C350 55 in 4k | Smart TV | Toshiba | 350 | Toshiba C350 4k Fire TV | Smart TV | Toshiba Inc | 370<br/>Nike Air Max 90 | Sneakers | Nike | 120 | Nike Air Max 90 | Shoes | Nikes | 120<br/>Sony WH-1000XM4 | Headphones | Sony | 275 | Sony WH-1000XM4 | | Sony | 275 |<br/><br/>Make sure that |Price_A - Price_B| *100/Price_A &lt;= 10<br/><br/>Output the dataset as a table with 59 rows which can be exported to Excel</span></pre><p id="ac5e" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">The above prompt generates the dataset with links. The number of rows can be modified to generate a dataset with a different number of links.</p><p id="e6e3" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">To generate more records for each individual dataset (dataset A or dataset B) the following two prompts were used.</p><p id="be0b" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk"><strong class="mk fr">Prompt 2: to generate more records for dataset A</strong></p><pre class="nk nl nm nn no qd qe qf bp qg bb bk"><span id="89b6" class="qh oj fq qe b bg qi qj l qk ql">Generate 20 more distinct products for the above dataset. But this time, I only need the information about dataset A. The dataset should have the following columns: Title_A, Product_Type_A, Brand_A, Price_A</span></pre><p id="8d9f" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk"><strong class="mk fr">Prompt 3: to generate more records for dataset B</strong></p><pre class="nk nl nm nn no qd qe qf bp qg bb bk"><span id="0004" class="qh oj fq qe b bg qi qj l qk ql">Now generate 60 more distinct products for the above dataset. But this time, I only need the information about dataset B. The dataset should have the following columns: Title_B, Product_Type_B, Brand_B, Price_B. Don't just get me electronic products. Instead, try to get a variety of different product types e.g., clothing, furniture, auto, home improvement, household essentials, etc.</span></pre><h2 id="3aca" class="pk oj fq bf ok pl pm pn on po pp pq oq mr pr ps pt mv pu pv pw mz px py pz qa bk"><strong class="al">Record Linkage</strong></h2><p id="ba3e" class="pw-post-body-paragraph mi mj fq mk b go pe mm mn gr pf mp mq mr pg mt mu mv ph mx my mz pi nb nc nd fj bk">Our goal is to identify the overlapping records between files A and B using the Fellegi-Sunter (FS) model. We implement the FS model using the <strong class="mk fr"><em class="ne">splink </em></strong>package [5] in Python.</p><p id="21e9" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">To compare the product title, product type, and brand, we use the default <em class="ne">name</em> comparison function available in the <em class="ne">splink </em>package. Specifically, the comparison function has the following 4 comparison levels:</p><ul class=""><li id="af34" class="mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd qm ob oc bk">Exact match</li><li id="df51" class="mi mj fq mk b go od mm mn gr oe mp mq mr of mt mu mv og mx my mz oh nb nc nd qm ob oc bk">Damerau-Levenshtein Distance &lt;= 1</li><li id="d980" class="mi mj fq mk b go od mm mn gr oe mp mq mr of mt mu mv og mx my mz oh nb nc nd qm ob oc bk">Jaro Winkler similarity &gt;= 0.9</li><li id="8732" class="mi mj fq mk b go od mm mn gr oe mp mq mr of mt mu mv og mx my mz oh nb nc nd qm ob oc bk">Jaro Winkler similarity &gt;= 0.8</li></ul><p id="a472" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">If a pair of products does not fall into any of the 4 levels, a default <em class="ne">Anything Else </em>level is assigned to the pair.</p><p id="a07b" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">The <em class="ne">splink </em>package does not have a function to compare numerical columns. Therefore, for price comparison, we first convert the price into a categorical variable by splitting it up into the following buckets: [&lt;$100, $100–200, $200–300, $300–400, $400–500, $500–600, $600–700, $700–800, $800–900, $900–1000, &gt;=$1000]. Then, we check if the price falls into the same bucket for a pair of records. In other words, we use the <em class="ne">Exact Match</em> comparison level.</p><p id="3915" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">All the comparisons can be specified through a settings dictionary in the <em class="ne">splink </em>package</p><figure class="nk nl nm nn no np"><div class="qn io l ed"><div class="qo qp l"/></div></figure><p id="0dea" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">The parameters of the FS model are estimated using the expectation maximization algorithm. In <em class="ne">splink</em>, there are built-in functions for doing this</p><figure class="nk nl nm nn no np"><div class="qn io l ed"><div class="qo qp l"/></div></figure><p id="7613" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">To evaluate how the FS model performs, we note the number of linked records, precision, recall, and F1 score of the prediction. Precision is defined as the proportion of linked records that are true links. And Recall is defined as the proportion of true links that are correctly identified. The F1 score is equal to 2*Precision*Recall/(Precision + Recall). s<em class="ne">plink </em>provides a function to generate all these metrics as shown below</p><figure class="nk nl nm nn no np"><div class="qn io l ed"><div class="qo qp l"/></div></figure><p id="35b4" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">The full code to train and evaluate this model is available here: <a class="af pj" href="https://github.com/vjoshi345/product-matching-article/blob/main/train_synthetic_fellegi_sunter.py" rel="noopener ugc nofollow" target="_blank">https://github.com/vjoshi345/product-matching-article/blob/main/train_synthetic_fellegi_sunter.py</a></p><h1 id="7984" class="oi oj fq bf ok ol om gq on oo op gt oq or os ot ou ov ow ox oy oz pa pb pc pd bk">Results</h1><p id="cc2a" class="pw-post-body-paragraph mi mj fq mk b go pe mm mn gr pf mp mq mr pg mt mu mv ph mx my mz pi nb nc nd fj bk">We run the FS model on all possible pairs of products from the two datasets. Specifically, there are 15,168 product pairs (79 * 192). The <em class="ne">splink </em>package has a function to automatically generate predictions (i.e., matching links) for different match probability thresholds. Below we show the confusion matrix for match probability=0.913 (the threshold for which we get the highest F1 score).</p><figure class="nk nl nm nn no np nh ni paragraph-image"><div class="nh ni qq"><img src="../Images/b196a424d656dc219cf10c083e84e82b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1154/format:webp/1*f6OyXaQN9NdgJ0R6ApbRwQ.png"/></div><figcaption class="nv nw nx nh ni ny nz bf b bg z dx">Confusion matrix for PM prediction</figcaption></figure><p id="72b5" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Total number of linked records = 82</p><p id="523d" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Precision = 58/82 = 0.707</p><p id="67a0" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Recall = 58/59 = 0.983</p><p id="07bb" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">F1 = (2 * 0.707 * 0.983)/(0.707 + 0.983) = 0.823</p><h1 id="818c" class="oi oj fq bf ok ol om gq on oo op gt oq or os ot ou ov ow ox oy oz pa pb pc pd bk"><strong class="al">Conclusion</strong></h1><p id="9934" class="pw-post-body-paragraph mi mj fq mk b go pe mm mn gr pf mp mq mr pg mt mu mv ph mx my mz pi nb nc nd fj bk">The purpose of this article was to show how product matching is a specific instance of the more general Entity Resolution problem. We demonstrated this by utilizing one of the popular models from the ER framework to solve the product matching problem. Since we wanted this to be an introductory article, we created a relatively simple synthetic dataset. In a real-world scenario, the data will be much more complex with dozens of different variables e.g., product description, color, size, etc. For accurate matching, we would need more advanced NLP techniques beyond text distance metrics. For example, we can utilize embeddings derived from Transformer models to semantically match products. This can help us match two products with syntactically different descriptions e.g., two products with Product Type <em class="ne">Jeans</em> and <em class="ne">Denims </em>respectively.</p><p id="6f74" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Further, the number of products for real-world datasets will be in the range of hundreds of millions with potentially hundreds of thousands of links. Such datasets require more efficient methods as well as compute resources for effective product matching.</p><h1 id="0548" class="oi oj fq bf ok ol om gq on oo op gt oq or os ot ou ov ow ox oy oz pa pb pc pd bk">References</h1><p id="a428" class="pw-post-body-paragraph mi mj fq mk b go pe mm mn gr pf mp mq mr pg mt mu mv ph mx my mz pi nb nc nd fj bk">[1]: <a class="af pj" href="https://medium.com/walmartglobaltech/product-matching-in-ecommerce-4f19b6aebaca" rel="noopener">https://medium.com/walmartglobaltech/product-matching-in-ecommerce-4f19b6aebaca</a></p><p id="f430" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">[2]: <a class="af pj" href="https://shopping.google.com/?pli=1" rel="noopener ugc nofollow" target="_blank">https://shopping.google.com/?pli=1</a></p><p id="ccc1" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">[3] I. Fellegi and A.B. Sunter (1969). A theory for record linkage. <em class="ne">Journal of the American Statistical Association</em></p><p id="7127" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">[4]: <a class="af pj" href="https://chat.openai.com/" rel="noopener ugc nofollow" target="_blank">https://chat.openai.com/</a></p><p id="3488" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">[5]: <a class="af pj" href="https://moj-analytical-services.github.io/splink/index.html" rel="noopener ugc nofollow" target="_blank">https://moj-analytical-services.github.io/splink/index.html</a></p></div></div></div></div>    
</body>
</html>