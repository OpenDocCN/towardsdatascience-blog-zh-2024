<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Numpy’s random choice in GoLang</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Numpy’s random choice in GoLang</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/numpys-random-choice-in-go-d65bc2838191?source=collection_archive---------12-----------------------#2024-01-23">https://towardsdatascience.com/numpys-random-choice-in-go-d65bc2838191?source=collection_archive---------12-----------------------#2024-01-23</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="gr gs gt gu gv ab"><div><div class="ab gw"><div><div class="bm" aria-hidden="false"><a href="https://mlefarov.medium.com/?source=post_page---byline--d65bc2838191--------------------------------" rel="noopener follow"><div class="l gx gy by gz ha"><div class="l ed"><img alt="Max Lefarov" class="l ep by dd de cx" src="../Images/cb8c4df2e894bf4957f0206ee3df7e5f.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*JY0aIlKCHqRxOiKRHF6jSA.jpeg"/><div class="hb by l dd de em n hc eo"/></div></div></a></div></div><div class="hd ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--d65bc2838191--------------------------------" rel="noopener follow"><div class="l he hf by gz hg"><div class="l ed"><img alt="Towards Data Science" class="l ep by br hh cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hb by l br hh em n hc eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hi ab q"><div class="ab q hj"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hk hl bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hm" data-testid="authorName" href="https://mlefarov.medium.com/?source=post_page---byline--d65bc2838191--------------------------------" rel="noopener follow">Max Lefarov</a></p></div></div></div><span class="hn ho" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hk hl dx"><button class="hp hq ah ai aj ak al am an ao ap aq ar hr hs ht" disabled="">Follow</button></p></div></div></span></div></div><div class="l hu"><span class="bf b bg z dx"><div class="ab cn hv hw hx"><div class="hy hz ab"><div class="bf b bg z dx ab ia"><span class="ib l hu">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hm ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--d65bc2838191--------------------------------" rel="noopener follow"><p class="bf b bg z ic id ie if ig ih ii ij bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hn ho" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">5 min read</span><div class="ik il l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Jan 23, 2024</span></div></span></div></span></div></div></div><div class="ab cp im in io ip iq ir is it iu iv iw ix iy iz ja jb"><div class="h k w ea eb q"><div class="jr l"><div class="ab q js jt"><div class="pw-multi-vote-icon ed ib ju jv jw"><div class=""><div class="jx jy jz ka kb kc kd am ke kf kg jw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kh ki kj kk kl km kn"><p class="bf b dy z dx"><span class="jy">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao jx ko kp ab q ee kq kr" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="ks"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg></button></div></div></div><div class="ab q jc jd je jf jg jh ji jj jk jl jm jn jo jp jq"><div class="kt k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al ku an ao ap hr kv kw kx" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep ky cn"><div class="l ae"><div class="ab cb"><div class="kz la lb lc ld le ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al ku an ao ap hr lf lg kr lh li lj lk ll s lm ln lo lp lq lr ls u lt lu lv"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al ku an ao ap hr lf lg kr lh li lj lk ll s lm ln lo lp lq lr ls u lt lu lv"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al ku an ao ap hr lf lg kr lh li lj lk ll s lm ln lo lp lq lr ls u lt lu lv"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="lz ma mb mc md me lw lx paragraph-image"><div role="button" tabindex="0" class="mf mg ed mh bh mi"><div class="lw lx ly"><img src="../Images/a8b5ef60ccf65bdd8b82b5bb8edf3698.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2enDpuNRjqnuz2daemnWIQ.png"/></div></div><figcaption class="mk ml mm lw lx mn mo bf b bg z dx">Generated with ChatGPT</figcaption></figure><p id="42d6" class="pw-post-body-paragraph mp mq fq mr b ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Recently I’ve assisted with implementing some logic in Java that could easily be achieved with a single call of Numpy’s <code class="cx nn no np nq b">random.choice</code>. It ended up being one of those tasks that allow looking into things you’re using every day but never have time to fully understand how they work. Also for quite some time I wanted to start learning Go, so why not kill two birds with one stone and reimplement <code class="cx nn no np nq b">random.choice</code> once again this time in Go?</p><p id="2f74" class="pw-post-body-paragraph mp mq fq mr b ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk"><code class="cx nn no np nq b">random.choice</code> allows us to sample N elements from a provided collection according to the specified probabilities. Importantly (for the use case that motivated this work), it allows us to sample these elements without replacements. I.e. if an element of collection was already sampled it won’t be sampled again. For example, if we have a collection [A, B, C] with associated probabilities [0.1, 0.7, 0.2] and we want to sample 3 elements without replacements, most of the time we’ll get [B, C, A] as an output. If we sample with replacement, the expected output would be [B, B, B].</p><p id="9f87" class="pw-post-body-paragraph mp mq fq mr b ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">First, let’s define the signature of the Go function. We want to keep it as close to Numpy’s counterpart as possible.</p><pre class="nr ns nt nu nv nw nq nx bp ny bb bk"><span id="4955" class="nz oa fq nq b bg ob oc l od oe">func Choice[T any](<br/> arr []T,<br/> size int,<br/> replace bool,<br/> probs []float64,<br/> rng *rand.Rand,<br/>) ([]T, error) {}</span></pre><p id="2111" class="pw-post-body-paragraph mp mq fq mr b ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">A few things to notice about the function signature:</p><ul class=""><li id="3b0b" class="mp mq fq mr b ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm of og oh bk">We’re using the generic type T. It allows calling this function for arrays of different types (as long as it satisfies the type constraint, which is none in our case). This should mimic the Pythonic semantics of <code class="cx nn no np nq b">random.choice</code>, i.e. it doesn’t care about the type of elements stored in the input array.</li><li id="f9f5" class="mp mq fq mr b ms oi mu mv mw oj my mz na ok nc nd ne ol ng nh ni om nk nl nm of og oh bk">We also pass the pointer to a random number generator (rng) object that we’ll use for sampling. I’ve picked up this style of defining random functions (compared to accessing the global instance of rng) from Jax. In my experience, it simplifies testing and reproducibility.</li><li id="0119" class="mp mq fq mr b ms oi mu mv mw oj my mz na ok nc nd ne ol ng nh ni om nk nl nm of og oh bk">The function has two returns, one is the array of samples, and the second one of the type <code class="cx nn no np nq b">error</code> . That’s the way to handle the “exception” execution flow in Go (Go doesn’t have assertions or exceptions).</li></ul><p id="3d17" class="pw-post-body-paragraph mp mq fq mr b ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Now we need to figure out how to sample elements from the discrete probability distribution defined by the <code class="cx nn no np nq b">probs</code> argument using only float random numbers sampled uniformly between [0, 1] returned by the rng. Luckily there’s a method for doing exactly that.</p><h1 id="1c56" class="on oa fq bf oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg ph pi pj bk">CDF Inversion Method</h1><p id="6a6b" class="pw-post-body-paragraph mp mq fq mr b ms pk mu mv mw pl my mz na pm nc nd ne pn ng nh ni po nk nl nm fj bk">First of, CDF stands for cumulative distribution function. In the discrete case, it can be represented as the array where an element at index <code class="cx nn no np nq b">i</code> is equal to the sum of all input probabilities up to and including the position <code class="cx nn no np nq b">i</code>. Let’s materialize this formulation in a simple helper function.</p><pre class="nr ns nt nu nv nw nq nx bp ny bb bk"><span id="0a9e" class="nz oa fq nq b bg ob oc l od oe">func CDF(probs []float64) []float64 {<br/> cdf := make([]float64, len(probs))<br/> cum := 0.0<br/><br/> for i := range cdf {<br/>  cum += probs[i]<br/>  cdf[i] = cum<br/> }<br/><br/> return cdf<br/>}</span></pre><p id="233e" class="pw-post-body-paragraph mp mq fq mr b ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">With CDF of the discrete probability distribution and the random number generator, we can sample elements from the input collection by:</p><ol class=""><li id="2f6e" class="mp mq fq mr b ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm pp og oh bk">Sample a random float between [0, 1] from the Unirofrm distribution.</li><li id="b4aa" class="mp mq fq mr b ms oi mu mv mw oj my mz na ok nc nd ne ol ng nh ni om nk nl nm pp og oh bk">Find the first index where the CDF value is ≥ to the random float.</li><li id="d9fb" class="mp mq fq mr b ms oi mu mv mw oj my mz na ok nc nd ne ol ng nh ni om nk nl nm pp og oh bk">Return the element of the original collection at this index.</li></ol><p id="c314" class="pw-post-body-paragraph mp mq fq mr b ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">To understand why it works, we can do a simple visual experiment. We can think about values in the CDF array being the right borders of the bins placed on the interval between [0, 1]. The width of a bin is proportional to the input probability. When generating the uniform random float between [0, 1] we can think about randomly throwing the ball on the interval and choosing the bin that we hit. The probability of hitting the bin is then proportional to the input probability (exactly what we need). Here’s the visual demonstration for our last example of collection [A, B, C] with associated probabilities [0.1, 0.7, 0.2].</p><figure class="nr ns nt nu nv me lw lx paragraph-image"><div role="button" tabindex="0" class="mf mg ed mh bh mi"><div class="lw lx pq"><img src="../Images/9a22c4e1bb87c7c5af9188bff8d5a420.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_IZVPQmt-jQHJ-HzvlS89Q.png"/></div></div><figcaption class="mk ml mm lw lx mn mo bf b bg z dx">Created by the author in Excalidraw</figcaption></figure><p id="a476" class="pw-post-body-paragraph mp mq fq mr b ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">To get the index of the bin we can return the index of the first right border that is greater or equal to the sampled value. Again, a simple helper function for doing exactly this:</p><pre class="nr ns nt nu nv nw nq nx bp ny bb bk"><span id="fde9" class="nz oa fq nq b bg ob oc l od oe">func FindIndexFromRight(val float64, cdf []float64) int {<br/> for i, cumProb := range cdf {<br/>  if cumProb &gt;= val {<br/>   return i<br/>  }<br/> }<br/><br/> return len(cdf) - 1<br/>}</span></pre><h1 id="0391" class="on oa fq bf oo op oq or os ot ou ov ow ox oy oz pa pb pc pd pe pf pg ph pi pj bk">Putting everything together</h1><p id="df9d" class="pw-post-body-paragraph mp mq fq mr b ms pk mu mv mw pl my mz na pm nc nd ne pn ng nh ni po nk nl nm fj bk">With that, we have everything to implement <code class="cx nn no np nq b">random.choice</code> with repetitions. Sampling without repetitions requires one more trick. To ensure that we don’t draw the element that was already sampled, we can mask its probability with 0 after sampling. This, however, will invalidate our discrete probability distribution because its sum will no longer amount to 1. To correct for that we need to re-normalize the probabilities by dividing them by the new total sum. As a bonus, we can perform re-normalization directly on CDF instead of re-normalizing input probabilities and then computing CDF. Putting everything together:</p><pre class="nr ns nt nu nv nw nq nx bp ny bb bk"><span id="4835" class="nz oa fq nq b bg ob oc l od oe">func Choice[T any](<br/> arr []T,<br/> size int,<br/> replace bool,<br/> probs []float64,<br/> rng *rand.Rand,<br/>) ([]T, error) {<br/> if !replace &amp;&amp; (size &gt; len(arr)) {<br/>  return nil, errors.New("cannot sample more than array size without replacements")<br/> }<br/><br/> samples := make([]T, size)<br/> probsCopy := make([]float64, len(probs))<br/> copy(probsCopy, probs)<br/><br/> for i := 0; i &lt; size; i++ {<br/>  cdf := CDF(probsCopy)<br/><br/>  if !replace {<br/>   total := cdf[len(cdf)-1]<br/>   for cdfInd := range cdf {<br/>    cdf[cdfInd] /= total<br/>   }<br/>  }<br/><br/>  randFloat := rng.Float64()<br/>  sampledIndex := FindIndexFromRight(randFloat, cdf)<br/>  samples[i] = arr[sampledIndex]<br/><br/>  if !replace {<br/>   probsCopy[sampledIndex] = 0.0<br/>  }<br/> }<br/><br/> return samples, nil<br/>}</span></pre><p id="cb02" class="pw-post-body-paragraph mp mq fq mr b ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Again, a few things to pay attention to:</p><ul class=""><li id="bde7" class="mp mq fq mr b ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm of og oh bk">If we sample without replacement we can’t sample more than the initial size of an input collection.</li><li id="c549" class="mp mq fq mr b ms oi mu mv mw oj my mz na ok nc nd ne ol ng nh ni om nk nl nm of og oh bk">Go passes “slices” (arrays without defined size) as mutable arguments. Thus, we make a copy the of input probabilities for not to mess up the original array with masking.</li></ul><p id="c8a1" class="pw-post-body-paragraph mp mq fq mr b ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">And the driver code:</p><pre class="nr ns nt nu nv nw nq nx bp ny bb bk"><span id="a4bc" class="nz oa fq nq b bg ob oc l od oe">rngSource := rand.NewSource(time.Now().UnixNano())<br/>rng := rand.New(rngSource)<br/><br/>arr := []string{"A", "B", "C", "D"}<br/>probs := []float64{0.1, 0.6, 0.2, 0.1}<br/><br/>samples, err := Choice(arr, 3, false, probs, rng)<br/>if err != nil {<br/> log.Fatal(err)<br/>}<br/><br/>fmt.Println("Samples: ", samples)</span></pre><p id="1905" class="pw-post-body-paragraph mp mq fq mr b ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">That’s it, feel free to drop a question in the comments.</p></div></div></div></div>    
</body>
</html>