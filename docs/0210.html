<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Tips and Tricks to Organize Jupyter Notebook Visualizations</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Tips and Tricks to Organize Jupyter Notebook Visualizations</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/an-easier-way-to-wrangle-jupyter-notebook-visualizations-620a86cd9279?source=collection_archive---------2-----------------------#2024-01-22">https://towardsdatascience.com/an-easier-way-to-wrangle-jupyter-notebook-visualizations-620a86cd9279?source=collection_archive---------2-----------------------#2024-01-22</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="7b53" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">Optimize your data science workflow by automating matplotlib output — with 1 line of code. Here’s how.</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@mmore500?source=post_page---byline--620a86cd9279--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Matthew Andres Moreno" class="l ep by dd de cx" src="../Images/ca7da9fd9e5c744ee0ebd2aa5d979eb5.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/da:true/resize:fill:88:88/0*BPeYKv9EZYk1X1hH"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--620a86cd9279--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@mmore500?source=post_page---byline--620a86cd9279--------------------------------" rel="noopener follow">Matthew Andres Moreno</a></p></div></div></div><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ib ic ah ai aj ak al am an ao ap aq ar id ie if" disabled="">Follow</button></p></div></div></span></div></div><div class="l ig"><span class="bf b bg z dx"><div class="ab cn ih ii ij"><div class="ik il ab"><div class="bf b bg z dx ab im"><span class="in l ig">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--620a86cd9279--------------------------------" rel="noopener follow"><p class="bf b bg z io ip iq ir is it iu iv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">6 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Jan 22, 2024</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w ea eb q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon ed in kg kh ki"><div class=""><div class="kj kk kl km kn ko kp am kq kr ks ki"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kt ku kv kw kx ky kz"><p class="bf b dy z dx"><span class="kk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kj la lb ab q ee lc ld" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="le"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lf k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lg an ao ap id lh li lj" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep lk cn"><div class="l ae"><div class="ab cb"><div class="ll lm ln lo lp lq ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><p id="180d" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Naming things is hard. After a long enough day, we’ve all ended up with the highly-descriptive likes of “<code class="cx ne nf ng nh b">graph7(1)_FINAL(2).png</code>” and “<code class="cx ne nf ng nh b">output.pdf</code>" Look familiar?</p><p id="d9eb" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">We can do better — and quite easily, actually.</p><p id="bdcd" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">When we use data-oriented “<em class="ni">seaborn</em>-esque” plotting mechanisms, the ingredients for a descriptive filename are all there. A typical call looks like this,</p><pre class="nj nk nl nm nn no nh np bp nq bb bk"><span id="c89f" class="nr ns fq nh b bg nt nu l nv nw">sns.scatterplot(data=tips, x="total_bill", y="tip", hue="time")</span></pre><p id="8e7f" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Right there we know we’ve got “<code class="cx ne nf ng nh b">total_bill</code>” on the<strong class="mk fr"> <em class="ni">x </em>axis</strong>, “<code class="cx ne nf ng nh b">time</code>” <strong class="mk fr">color coded</strong>, etc. So what if we used the <strong class="mk fr">plotting function name</strong> and those semantic <strong class="mk fr">column keys</strong> to organize the output for us?</p><p id="d5f0" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Here’s what that workflow looks like, using the <strong class="mk fr"><em class="ni">teeplot</em></strong><em class="ni"> </em>tool.</p><pre class="nj nk nl nm nn no nh np bp nq bb bk"><span id="e679" class="nr ns fq nh b bg nt nu l nv nw">import seaborn as sns; import teeplot as tp<br/>tp.save = {".eps": True, ".pdf": True}  # set custom output behavior</span></pre><pre class="nx no nh ny nz ay oa bk"><span id="6573" class="ob ns fq nh b hw oc od l im nw">tp.tee(sns.scatterplot,<br/>   data=sns.load_data("tips"), x="total_bill", y="tip", hue="time")</span></pre><figure class="nj nk nl nm nn oh oe of paragraph-image"><div role="button" tabindex="0" class="oi oj ed ok bh ol"><div class="oe of og"><img src="../Images/2ff934bb137db56e6f6e5497ab52e969.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*iGwdMeZMnZRVmxzBVs6Cfg.png"/></div></div></figure><blockquote class="on oo op"><p id="e660" class="mi mj ni mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">teeplots/hue=time+viz=scatterplot+x=total-bill+y=tip+ext=.eps<br/>teeplots/hue=time+viz=scatterplot+x=total-bill+y=tip+ext=.pdf</p></blockquote><p id="9d4e" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">We’ve actually done <strong class="mk fr"><em class="ni">three things</em></strong> in this example — <em class="ni">1)</em> we rendered the plot in the notebook and <em class="ni">2)</em> we’ve saved our visualization to file with a meaningful filename and <em class="ni">3)</em> we’ve<em class="ni"> </em>hooked our visualization into a framework where notebook outputs can be<em class="ni"> </em><strong class="mk fr"><em class="ni">managed at a global level (</em></strong>in this case, enabling <em class="ni">eps/pdf</em> output<em class="ni">).</em></p><p id="c683" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">This article will explain how to harness the <strong class="mk fr"><em class="ni">teeplot </em></strong>Python package to get better organized and free up your mental workload to focus on more interesting things.</p><p id="912f" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">I am the primary author and maintainer of the project, which I have used in my own workflow for several years and found useful enough to package and share more widely with the community. <strong class="mk fr"><em class="ni">teeplot </em></strong>is open source under the MIT license.</p><h1 id="cbeb" class="oq ns fq bf or os ot gq ou ov ow gt ox oy oz pa pb pc pd pe pf pg ph pi pj pk bk">The teeplot Workflow</h1><p id="7e00" class="pw-post-body-paragraph mi mj fq mk b go pl mm mn gr pm mp mq mr pn mt mu mv po mx my mz pp nb nc nd fj bk"><strong class="mk fr"><em class="ni">teeplot </em></strong>is designed to simplify work with data visualizations created with libraries like <em class="ni">matplotlib</em>, <em class="ni">seaborn</em>, and <em class="ni">pandas</em>. It acts as a wrapper around your plotting calls to handle output management for you.</p><figure class="nj nk nl nm nn oh oe of paragraph-image"><div role="button" tabindex="0" class="oi oj ed ok bh ol"><div class="oe of pq"><img src="../Images/947b3f58acf23f40400530b4c26d3d85.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Zwhq0fHkhbl0L1v0wovSTA.gif"/></div></div><figcaption class="pr ps pt oe of pu pv bf b bg z dx">teeplot workflow in action</figcaption></figure><p id="1714" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Here’s how to <strong class="mk fr">use <em class="ni">teeplot</em></strong> in <strong class="mk fr">3 steps</strong>,</p><ol class=""><li id="fed1" class="mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd pw px py bk"><strong class="mk fr">Choose Your Plotting Function:</strong> Start by selecting your preferred plotting function, whether it’s from <em class="ni">matplotlib</em>, <em class="ni">seaborn</em>,<em class="ni"> pandas</em>, etc. or one you wrote yourself.</li><li id="eeb9" class="mi mj fq mk b go pz mm mn gr qa mp mq mr qb mt mu mv qc mx my mz qd nb nc nd pw px py bk"><strong class="mk fr">Add Your Plotting Arguments:</strong> Pass your plotting function as the first argument to <code class="cx ne nf ng nh b">tee</code>, followed by the arguments you want to use for your visualization.</li><li id="ed16" class="mi mj fq mk b go pz mm mn gr qa mp mq mr qb mt mu mv qc mx my mz qd nb nc nd pw px py bk"><strong class="mk fr">Automatic Plotting and Saving:</strong> <em class="ni">teeplot</em> captures your plotting function and its arguments, executes the plot, and then takes care of wrangling the plot outputs for you.</li></ol><p id="0ae6" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">That’s it!</p><p id="c1f2" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Next, let’s look at <strong class="mk fr">3 brief examples</strong> that demonstrate: <strong class="mk fr">a)</strong> <em class="ni">basic use</em>, <strong class="mk fr">b)</strong> <em class="ni">custom post-processing</em>, and <strong class="mk fr">c)</strong><em class="ni"> custom plotting functions</em>.</p><h1 id="dd9f" class="oq ns fq bf or os ot gq ou ov ow gt ox oy oz pa pb pc pd pe pf pg ph pi pj pk bk">Example 1: Using a built-in pandas Plotter</h1><p id="8295" class="pw-post-body-paragraph mi mj fq mk b go pl mm mn gr pm mp mq mr pn mt mu mv po mx my mz pp nb nc nd fj bk">In this example, we pass a DataFrame <code class="cx ne nf ng nh b">df</code>’s member function <code class="cx ne nf ng nh b">df.plot.box</code> as our plotter and two semantic keys: “age” and “gender.” <em class="ni">teeplot </em>takes care of the rest.</p><pre class="nj nk nl nm nn no nh np bp nq bb bk"><span id="df71" class="nr ns fq nh b bg nt nu l nv nw"># adapted pandas.pydata.org/docs/reference/api/pandas.DataFrame.plot.box.html<br/>import pandas as pd; from teeplot import teeplot as tp<br/><br/>age_list = [8, 10, 12, 14, 72, 74, 76, 78, 20, 25, 30, 35, 60, 85]<br/>df = pd.DataFrame({"gender": list("MMMMMMMMFFFFFF"), "age": age_list})<br/><br/>tp.tee(df.plot.box,  # plotter...<br/>    column="age", by="gender", figsize=(4, 3))  # ...forwaded to plotter</span></pre><blockquote class="on oo op"><p id="df4b" class="mi mj ni mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">teeplots/by=gender+column=age+viz=box+ext=.pdf<br/>teeplots/by=gender+column=age+viz=box+ext=.png</p></blockquote><figure class="nj nk nl nm nn oh oe of paragraph-image"><div role="button" tabindex="0" class="oi oj ed ok bh ol"><div class="oe of qe"><img src="../Images/020f0d97db5ab73a7ef2c6468a875d52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eXw5W4w9RGoEiBlw.png"/></div></div></figure></div></div></div><div class="ab cb qf qg qh qi" role="separator"><span class="qj by bm qk ql qm"/><span class="qj by bm qk ql qm"/><span class="qj by bm qk ql"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="aaae" class="oq ns fq bf or os qn gq ou ov qo gt ox oy qp pa pb pc qq pe pf pg qr pi pj pk bk">Example 2: Matplotlib with Manual Tweaks</h1><p id="0448" class="pw-post-body-paragraph mi mj fq mk b go pl mm mn gr pm mp mq mr pn mt mu mv po mx my mz pp nb nc nd fj bk">Like it or not, getting good results from matplotlib and its derivative libraries often requires some manual tweaks after the initial plotting call.</p><p id="1d29" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk"><em class="ni">teeplot </em>fully supports this pattern. Just pass the <code class="cx ne nf ng nh b">teeplot_callback</code> kwarg, and teeplot will give you back a callable handle in addition to the output of the initial plotting call. After you’ve finished adjusting your plot, just invoke the handle to save and display as usual.</p><pre class="nj nk nl nm nn no nh np bp nq bb bk"><span id="f8a8" class="nr ns fq nh b bg nt nu l nv nw"># adapted from https://matplotlib.org/stable/tutorials/pyplot.html<br/>from matplotlib import pyplot as plt<br/>import numpy as np; from teeplot import teeplot as tp<br/><br/># tee output format can be configured globally (or per call to tp.tee)<br/>tp.save = {".eps": True}  # make calls output to .eps only<br/><br/># set up example data<br/>df = {'weight': np.arange(50), 'profit': np.random.randint(0, 50, 50),<br/>        'carbon': np.random.randn(50)}<br/>df['price'], = df['weight'] + 10 * np.random.randn(50)<br/>df['carbon'] = np.abs(df['carbon']) * 100<br/><br/># ----- begin plotting -----<br/>saveit, __ = tp.tee(  # --- "saveit" is callback to finalize output<br/>    plt.scatter,  # plotter...<br/>    data=df,  # then plotting kwargs<br/>    x='weight', y='price', c='profit', s='carbon',<br/>    teeplot_callback=True)  # defer plotting to callback<br/><br/># tweak visualization as you usually would...<br/>plt.xlabel('entry a')  <br/>plt.ylabel('entry b')<br/>plt.gcf().set_size_inches(5, 3)<br/>saveit()  # dispatch output callback</span></pre><blockquote class="on oo op"><p id="8b97" class="mi mj ni mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">teeplots/c=profit+s=carbon+viz=scatter+x=weight+y=price+ext=.eps</p></blockquote><figure class="nj nk nl nm nn oh oe of paragraph-image"><div role="button" tabindex="0" class="oi oj ed ok bh ol"><div class="oe of qe"><img src="../Images/ff2943c73549e3d6bd14cb4efc52cfdc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*5bF4Mz8Gtgv97y8R.png"/></div></div></figure><p id="924b" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Note the <code class="cx ne nf ng nh b">__</code> value unpacked from the <code class="cx ne nf ng nh b">tp.tee</code> call above. This is because <code class="cx ne nf ng nh b">plt.scatter</code>’s return value is a line collection that’s not useful for our tweaks.</p></div></div></div><div class="ab cb qf qg qh qi" role="separator"><span class="qj by bm qk ql qm"/><span class="qj by bm qk ql qm"/><span class="qj by bm qk ql"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="5b32" class="oq ns fq bf or os qn gq ou ov qo gt ox oy qp pa pb pc qq pe pf pg qr pi pj pk bk">Example 3: Custom Plotter</h1><p id="3666" class="pw-post-body-paragraph mi mj fq mk b go pl mm mn gr pm mp mq mr pn mt mu mv po mx my mz pp nb nc nd fj bk">Custom plotters work just like external library plotters — <em class="ni">teeplot </em>can infer your plotting function’s name for the <code class="cx ne nf ng nh b">viz=</code> output key.</p><pre class="nj nk nl nm nn no nh np bp nq bb bk"><span id="d86d" class="nr ns fq nh b bg nt nu l nv nw">from matplotlib import pyplot as plt; import seaborn as sns<br/>from teeplot import teeplot as tp<br/><br/>def cuteplot(subject, descriptor, amount):  # custom plotter<br/>    sns.dogplot()<br/>    plt.gca().text(10, 400, <br/>        f"{subject} \n is a {descriptor} dog" + "!" * amount,<br/>        color="white", size=40)<br/><br/>tp.tee(cuteplot,  # plotter<br/>    amount=4, subject="who", descriptor="good",  # plotting args<br/>    teeplot_outinclude="amount")  # override to use numeric kwarg in filename</span></pre><blockquote class="on oo op"><p id="40e5" class="mi mj ni mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">teeplots/amount=4+descriptor=good+subject=who+viz=cuteplot+ext=.png<br/>teeplots/amount=4+descriptor=good+subject=who+viz=cuteplot+ext=.pdf</p></blockquote><figure class="nj nk nl nm nn oh oe of paragraph-image"><div role="button" tabindex="0" class="oi oj ed ok bh ol"><div class="oe of og"><img src="../Images/93d5c7a746f966f71dc9282d108a9152.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Es-bNFMxEX_Psdi9tVm3Yw.png"/></div></div><figcaption class="pr ps pt oe of pu pv bf b bg z dx">via seaborn-data, BSD License/Copyright © 2012–2023, Michael L. Waskom</figcaption></figure><p id="8254" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Shout-out <code class="cx ne nf ng nh b">sns.dogplot</code>… always a howl!</p><h1 id="6fac" class="oq ns fq bf or os ot gq ou ov ow gt ox oy oz pa pb pc pd pe pf pg ph pi pj pk bk">Further Information</h1><figure class="nj nk nl nm nn oh oe of paragraph-image"><div role="button" tabindex="0" class="oi oj ed ok bh ol"><div class="oe of qs"><img src="../Images/637567441a096bd6d8840f8f4185fc29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*xuPk9iLLG-6c97xD.png"/></div></div></figure><p id="e26e" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">And that’s all there is to it!</p><p id="1f5f" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">I’ve been using this tool regularly for the last two years, and recently decided to take the time to package it up and share. Hope it can be an asset to the community.</p><p id="0532" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">The <em class="ni">teeplot</em> library has a few additional advanced features beyond what was covered here, like configurability via environment variables (useful in CI!). You can read more in the project’s <a class="af qt" href="https://github.com/mmore500/teeplot/blob/master/README.rst#usage" rel="noopener ugc nofollow" target="_blank"><em class="ni">usage guide</em></a> and <a class="af qt" href="https://github.com/mmore500/teeplot/blob/master/README.rst#api" rel="noopener ugc nofollow" target="_blank"><em class="ni">API listing</em></a>. The project is open source on GitHub at <a class="af qt" href="https://github.com/mmore500/teeplot" rel="noopener ugc nofollow" target="_blank"><em class="ni">mmore500/teeplot</em></a><em class="ni">— consider leaving a ⭐️!</em></p><p id="d628" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk"><em class="ni">teeplot</em> can be installed as <code class="cx ne nf ng nh b">python3 -m pip install teeplot</code></p><h1 id="0c79" class="oq ns fq bf or os ot gq ou ov ow gt ox oy oz pa pb pc pd pe pf pg ph pi pj pk bk">Authorship</h1><p id="c39d" class="pw-post-body-paragraph mi mj fq mk b go pl mm mn gr pm mp mq mr pn mt mu mv po mx my mz pp nb nc nd fj bk">This tutorial is contributed by me, <a class="af qt" href="https://mmore500.com/" rel="noopener ugc nofollow" target="_blank">Matthew Andres Moreno</a>.</p><figure class="nj nk nl nm nn oh oe of paragraph-image"><div class="oe of qu"><img src="../Images/6a74bc3879e65ad0ded64e1e434af933.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Du-ibFa85WV35H-K.jpeg"/></div></figure><p id="e194" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">I currently serve as a postdoctoral scholar at the <a class="af qt" href="https://umich.edu" rel="noopener ugc nofollow" target="_blank">University of Michigan</a>, where my work is supported by the Eric and Wendy Schmidt AI in Science Postdoctoral Fellowship, a Schmidt Futures program.</p><p id="9885" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">My appointment is split between the university’s Ecology and Evolutionary Biology Department, the Center for the Study of Complexity, and the Michigan Institute for Data Science.</p><p id="2ce0" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Find me on Twitter as <a class="af qt" href="https://twitter.com/morenomatthewa" rel="noopener ugc nofollow" target="_blank">@MorenoMatthewA</a> and on GitHub as <a class="af qt" href="https://github.com/mmore500/" rel="noopener ugc nofollow" target="_blank">@mmore500</a>.</p><p id="4e9f" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk"><em class="ni">Disclaimer</em>: I am the <code class="cx ne nf ng nh b">teeplot</code> library author.</p><h1 id="99ba" class="oq ns fq bf or os ot gq ou ov ow gt ox oy oz pa pb pc pd pe pf pg ph pi pj pk bk">Citations</h1><p id="ef33" class="pw-post-body-paragraph mi mj fq mk b go pl mm mn gr pm mp mq mr pn mt mu mv po mx my mz pp nb nc nd fj bk"><em class="ni">J. D. Hunter, “Matplotlib: A 2D Graphics Environment”, Computing in Science &amp; Engineering, vol. 9, no. 3, pp. 90–95, 2007. </em><a class="af qt" href="https://doi.org/10.1109/MCSE.2007.55" rel="noopener ugc nofollow" target="_blank"><em class="ni">https://doi.org/10.1109/MCSE.2007.55</em></a></p><p id="5a70" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk"><em class="ni">Data structures for statistical computing in python, McKinney, Proceedings of the 9th Python in Science Conference, Volume 445, 2010. </em><a class="af qt" href="https://doi.org/" rel="noopener ugc nofollow" target="_blank"><em class="ni">https://doi.org/</em></a><em class="ni"> 10.25080/Majora-92bf1922–00a</em></p><p id="92d8" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk"><em class="ni">Matthew Andres Moreno. (2023). mmore500/teeplot. Zenodo. </em><a class="af qt" href="https://doi.org/10.5281/zenodo.10440670" rel="noopener ugc nofollow" target="_blank"><em class="ni">https://doi.org/10.5281/zenodo.10440670</em></a></p><p id="d586" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk"><em class="ni">Waskom, M. L., (2021). seaborn: statistical data visualization. Journal of Open Source Software, 6(60), 3021, </em><a class="af qt" href="https://doi.org/10.21105/joss.03021." rel="noopener ugc nofollow" target="_blank"><em class="ni">https://doi.org/10.21105/joss.03021.</em></a></p><h1 id="50f4" class="oq ns fq bf or os ot gq ou ov ow gt ox oy oz pa pb pc pd pe pf pg ph pi pj pk bk">Appendix</h1><p id="6dfe" class="pw-post-body-paragraph mi mj fq mk b go pl mm mn gr pm mp mq mr pn mt mu mv po mx my mz pp nb nc nd fj bk">To install dependencies for examples in this article,</p><pre class="nj nk nl nm nn no nh np bp nq bb bk"><span id="1869" class="nr ns fq nh b bg nt nu l nv nw">python3 -m pip install \<br/>    matplotlib `# ==3.8.2`\<br/>    numpy `# ==1.26.2` \<br/>    teeplot `# ==1.0.1` \<br/>    pandas `# ==2.1.3` \<br/>    seaborn `# ==0.13.0`</span></pre><p id="13d8" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk"><em class="ni">Unless otherwise noted, all images are works of the author. “dogplot” image is via seaborn, find the a copy of the seaborn license </em><a class="af qt" href="https://github.com/mwaskom/seaborn/blob/master/LICENSE.md" rel="noopener ugc nofollow" target="_blank"><em class="ni">here</em></a><em class="ni">.</em></p></div></div></div></div>    
</body>
</html>