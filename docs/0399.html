<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Powerful Collaboration of AI Agents with CrewAI</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Powerful Collaboration of AI Agents with CrewAI</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/powerful-collaboration-of-ai-agents-with-crewai-17f84378430b?source=collection_archive---------3-----------------------#2024-02-12">https://towardsdatascience.com/powerful-collaboration-of-ai-agents-with-crewai-17f84378430b?source=collection_archive---------3-----------------------#2024-02-12</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="ebd7" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">A hands-on marketing use case</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://toon-beerten.medium.com/?source=post_page---byline--17f84378430b--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Toon Beerten" class="l ep by dd de cx" src="../Images/f169eaa8cefa00f17176955596972d57.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*3w8mZni8l3LBABo_hyxufQ.jpeg"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--17f84378430b--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://toon-beerten.medium.com/?source=post_page---byline--17f84378430b--------------------------------" rel="noopener follow">Toon Beerten</a></p></div></div></div><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ib ic ah ai aj ak al am an ao ap aq ar id ie if" disabled="">Follow</button></p></div></div></span></div></div><div class="l ig"><span class="bf b bg z dx"><div class="ab cn ih ii ij"><div class="ik il ab"><div class="bf b bg z dx ab im"><span class="in l ig">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--17f84378430b--------------------------------" rel="noopener follow"><p class="bf b bg z io ip iq ir is it iu iv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">11 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Feb 12, 2024</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w ea eb q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon ed in kg kh ki"><div class=""><div class="kj kk kl km kn ko kp am kq kr ks ki"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kt ku kv kw kx ky kz"><p class="bf b dy z dx"><span class="kk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kj lc ld ab q ee le lf" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lb"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count la lb">8</span></p></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lg k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lh an ao ap id li lj lk" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep ll cn"><div class="l ae"><div class="ab cb"><div class="lm ln lo lp lq lr ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mj mk ml mm mn mo mp mq paragraph-image"><div class="ab cn cb mr"><img src="../Images/8e6b6dc2cf7f29bc959f6bdc65a4ae87.png" data-original-src="https://miro.medium.com/v2/format:webp/1*40kwxJ7oZ1kTAJsRt_2bow.png"/></div><figcaption class="mt mu mv mp mq mw mx bf b bg z dx">Image by author (<a class="af my" href="https://huggingface.co/spaces/prodia/fast-stable-diffusion" rel="noopener ugc nofollow" target="_blank">with</a>)</figcaption></figure><p id="0c14" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">In this article, I’ll show you how to orchestrate AI puppets to successfully tackle a real-life marketing challenge where the agents work together to:</p><ul class=""><li id="f588" class="mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx bk">analyze customer data profiles</li><li id="5f2e" class="mz na fq nb b go ny nd ne gr nz ng nh ni oa nk nl nm ob no np nq oc ns nt nu nv nw nx bk">select the ideal products for targeted marketing</li><li id="41bb" class="mz na fq nb b go ny nd ne gr nz ng nh ni oa nk nl nm ob no np nq oc ns nt nu nv nw nx bk">create compelling promotional text for those products.</li></ul><p id="a3fb" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">We will use a new framework called <a class="af my" href="https://github.com/joaomdmoura/crewAI" rel="noopener ugc nofollow" target="_blank">CrewAI</a>, enabling autonomous AI agents to collaborate and achieve common goals. Everything is documented in the provided <a class="af my" href="https://colab.research.google.com/github/Toon-nooT/notebooks/blob/main/Marketing_Campaign__With_CrewAI.ipynb" rel="noopener ugc nofollow" target="_blank">Colab notebook</a>, so you can replicate and adapt it to your own use case.</p><h1 id="5659" class="od oe fq bf of og oh gq oi oj ok gt ol om on oo op oq or os ot ou ov ow ox oy bk">What is CrewAI?</h1><p id="5530" class="pw-post-body-paragraph mz na fq nb b go oz nd ne gr pa ng nh ni pb nk nl nm pc no np nq pd ns nt nu fj bk"><a class="af my" href="https://docs.crewai.com/" rel="noopener ugc nofollow" target="_blank">CrewAI </a>is a new framework that facilitates the collaboration of AI agents. The agents can adopt specific roles, share common objectives, and — as a whole — function as an efficient team. It is open source and built upon <a class="af my" href="https://www.langchain.com/" rel="noopener ugc nofollow" target="_blank">Langchain</a>. Some alternatives in the same field are <a class="af my" href="https://microsoft.github.io/autogen/" rel="noopener ugc nofollow" target="_blank">Microsofts AutoGen</a> and <a class="af my" href="https://github.com/OpenBMB/ChatDev" rel="noopener ugc nofollow" target="_blank">ChatDev</a>.</p><figure class="mj mk ml mm mn mo mp mq paragraph-image"><div role="button" tabindex="0" class="pf pg ed ph bh pi"><div class="mp mq pe"><img src="../Images/4afc85d7770d80f5787167c25db39ee8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*c3W6nNzx20NRn2h5.png"/></div></div><figcaption class="mt mu mv mp mq mw mx bf b bg z dx">Image taken from official <a class="af my" href="https://joaomdmoura.github.io/crewAI/" rel="noopener ugc nofollow" target="_blank">documentation</a></figcaption></figure><p id="7b8d" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">The main concepts of CrewAI revolve around three core entities: <strong class="nb fr">Agents</strong>, <strong class="nb fr">Tasks</strong>, and <strong class="nb fr">Crews</strong>.</p><ol class=""><li id="a9f8" class="mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu pj nw nx bk"><strong class="nb fr">Agents</strong>: These are standalone units programmed to perform tasks , make decisions and communicate with other agents. They can use <strong class="nb fr">Tools </strong>which can be simple search functions or complex integrations involving other chains, APIs, etc.</li><li id="5b01" class="mz na fq nb b go ny nd ne gr nz ng nh ni oa nk nl nm ob no np nq oc ns nt nu pj nw nx bk"><strong class="nb fr">Tasks</strong>: Tasks are assignments or jobs that an AI agent needs to complete. They can include additional information like which agent should do it and what tools they might need.</li><li id="7a26" class="mz na fq nb b go ny nd ne gr nz ng nh ni oa nk nl nm ob no np nq oc ns nt nu pj nw nx bk">A <strong class="nb fr">Crew </strong>is a team of agents, each with a specific role, that work together to achieve a common goal. The process of forming a crew involves assembling agents, defining their tasks and establishing a sequence of task execution.</li></ol><p id="2dc9" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">To test out what it’s capable of, I devised the following scenario…</p><h1 id="232c" class="od oe fq bf of og oh gq oi oj ok gt ol om on oo op oq or os ot ou ov ow ox oy bk"><strong class="al">Marketing Challenge</strong></h1><p id="00d3" class="pw-post-body-paragraph mz na fq nb b go oz nd ne gr pa ng nh ni pb nk nl nm pc no np nq pd ns nt nu fj bk">Imagine you are the head of a local retailer. Next week you’ll run a promotion campaign on 12 products. Which products will you target to which customers? As you can imagine, it makes very little sense to promote lipstick to male clients. Can this be optimized with AI?</p><p id="3c44" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">Through use of loyalty cards and datamining, you have access to a database with the customer personality analysis. This helps to understand the characteristics, preferences and behaviors of customers. With a well designed prompt (see notebook) I got this dataset of customers in seconds:</p><pre class="mj mk ml mm mn pk pl pm bp pn bb bk"><span id="6e71" class="po oe fq pl b bg pp pq l pr ps">birth_year,sex,marital_status,yearly_household_income_percentile,number_of_toddlers,number_of_teens,highest_education,monthly_spend_on_wine,monthly_spend_on_vegetables,monthly_spend_on_toys,last_month_coupon_use<br/>1975,F,married,65,1,0,masters,30,65,20,high<br/>1992,M,single,30,0,0,bachelors,15,40,0,none<br/>1980,F,married,80,0,2,bachelors,50,80,85,low <br/>1968,M,divorced,45,0,0,high_school,45,50,0,high<br/>1990,F,single,25,0,0,associates,10,35,0,low<br/>1985,M,married,90,2,1,phd,80,100,120,high<br/>2000,F,single,40,0,0,bachelors,25,55,0,none<br/>1972,M,married,70,0,1,masters,60,70,40,low<br/>1988,F,married,55,1,0,associates,20,40,30,high<br/>1970,M,single,60,0,0,high_school,35,60,0,none</span></pre><p id="fd7b" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">For the possible campaign products I came up with these:</p><pre class="mj mk ml mm mn pk pl pm bp pn bb bk"><span id="6a84" class="po oe fq pl b bg pp pq l pr ps">Fresh Lettuce<br/>Diapers<br/>Irish whiskey<br/>laundry detergent<br/>Chips<br/>Spaghetti cans (ready to eat)<br/>Minecraft Video Game<br/>Mascara<br/>Toilet Paper (best value)<br/>Wagyu beef steak<br/>Organic avocados<br/>Cigarettes</span></pre><p id="5f11" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">These were especially chosen because I expect to see correlations. For example between the promotion of diapers to the number of toddlers and wagyu steak to the household income. Can the agents work together to discover this logic by using common sense?</p><h1 id="1f5a" class="od oe fq bf of og oh gq oi oj ok gt ol om on oo op oq or os ot ou ov ow ox oy bk"><strong class="al">Implementation</strong></h1><p id="6a4a" class="pw-post-body-paragraph mz na fq nb b go oz nd ne gr pa ng nh ni pb nk nl nm pc no np nq pd ns nt nu fj bk">My first crew will target the right products by selecting the 3 most suited for each specific customer. In this crew, I created three agents:</p><ul class=""><li id="e382" class="mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx bk"><strong class="nb fr">Chief Promotion Director</strong>: gets the main task, oversees work of others</li><li id="b7a3" class="mz na fq nb b go ny nd ne gr nz ng nh ni oa nk nl nm ob no np nq oc ns nt nu nv nw nx bk"><strong class="nb fr">Customer Profiler</strong>: to create an understanding of the customer</li><li id="edf3" class="mz na fq nb b go ny nd ne gr nz ng nh ni oa nk nl nm ob no np nq oc ns nt nu nv nw nx bk"><strong class="nb fr">Product Specialist</strong>: expertly links products to customers</li></ul><p id="1fc2" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">Each needs a role, goal and backstory. We can use natural language for this. In my <a class="af my" href="https://github.com/Toon-nooT/notebooks" rel="noopener ugc nofollow" target="_blank">notebook </a>it became this:</p><pre class="mj mk ml mm mn pk pl pm bp pn bb bk"><span id="e3c6" class="po oe fq pl b bg pp pq l pr ps">profiler = Agent(<br/>  role='profiler',<br/>  goal='''From limited data, you logically deduct conclusions about people.''',<br/>  backstory='You are an expert psychologist with decades of experience.',<br/>  llm=llm,<br/>  verbose=True,<br/>  allow_delegation=True<br/>)<br/>product_specialist = Agent(<br/>  role='product specialist',<br/>  goal='''Match the product to the customer''',<br/>  backstory='You have exceptional knowledge of the products and can say<br/>             how valuable they are to a customer.',<br/>  llm=llm,<br/>  verbose=True,<br/>  allow_delegation=True<br/>)<br/><br/>Chief_Promotional_Director = Agent(<br/>    role="Chief Promotion Director",<br/>    goal='''<br/>     Oversee the work done by your team to make sure it's the best possible<br/>     and aligned with the product's goals, review, approve, ask clarifying<br/>     question or delegate follow up work if necessary to make decisions''',<br/>    backstory='''<br/>     You're the Chief Promotion Officer of a large retailer. You're<br/>     launching a personalized ad campaign, trying to make sure your team<br/>     is crafting the best possible content for the customer.''',<br/>    tools=[],<br/>    llm=llm,<br/>    verbose=True<br/>)</span></pre><p id="8c5f" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">The following <strong class="nb fr">task </strong>is given to agent <strong class="nb fr">Chief Promotion Director</strong>, who delegates work to the other agents:</p><pre class="mj mk ml mm mn pk pl pm bp pn bb bk"><span id="0874" class="po oe fq pl b bg pp pq l pr ps">select_3_products_task = f'''You're creating a targeted marketing campaign<br/>tailored to what we know about our customers.<br/>For each customer, we have to choose exactly three products to promote <br/>in the next campaign. Make sure the selection is the best possible and<br/>aligned with the customer. Review, approve, ask clarifying question or<br/>delegate follow up work if necessary to make decisions. When delegating<br/>work send the full draft as part of the information.<br/>This is the list of all the products participating in the campaign: {products}.<br/>This is all we know so far from the customer: {customer_description}.<br/>To start this campaign we will need to build first an understanding of our<br/>customer. Once we have a profile about the customers interests, lifestyle and<br/>means and needs, we have to select exactly three products that have the<br/>highest chance to be bought by them.<br/>Your final answer MUST be exactly 3 products from the list, each with a short<br/>description why it matches with this customer. '''</span></pre><p id="0cb1" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">All agents interact with each other until agent Chief Promotion Director is happy and ends the task. To better understand what happens when this crew is kicked off, I created this schematic:</p><figure class="mj mk ml mm mn mo mp mq paragraph-image"><div role="button" tabindex="0" class="pf pg ed ph bh pi"><div class="mp mq pt"><img src="../Images/677abbd30b9354d5e71d11dfaddd2035.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*LbEHkm9nbKzYt5pXOkT4qg.png"/></div></div><figcaption class="mt mu mv mp mq mw mx bf b bg z dx">Image by author</figcaption></figure><p id="d7c1" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">The second crew will write a short promotional text alongside the product. It should also be in line with what can be deducted from the customers data. For this I create an additional <strong class="nb fr">Creative Content Creator</strong> agent:</p><pre class="mj mk ml mm mn pk pl pm bp pn bb bk"><span id="aaf7" class="po oe fq pl b bg pp pq l pr ps">creative_content_creator_agent = Agent(<br/>   role="Creative Content Creator",<br/>   goal=dedent("""\<br/>    Develop compelling and innovative content<br/>    for ad campaigns, with a focus customer specific ad copies."""),<br/>   backstory=dedent("""\<br/>    As a Creative Content Creator at a top-tier digital marketing<br/>    agency, you excel in crafting advertisements that resonate with<br/>    potential customers. Your expertise lies in turning marketing<br/>    strategies into engaging stories that capture attention and<br/>    inspire buying action."""),<br/>   llm=llm,<br/>   verbose=True<br/>  )</span></pre><p id="b605" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">This agent will work together with the previous ‘boss’ agent in a new crew with the following task:</p><pre class="mj mk ml mm mn pk pl pm bp pn bb bk"><span id="38de" class="po oe fq pl b bg pp pq l pr ps">get_ad_campaign_written_task = f'''<br/>You're creating a targeted marketing campaign tailored to what we know <br/>about our customers.<br/>For each customer, we have chosen three products to promote in the next<br/>campaign. This selection is tailored specifically to the customer: {selection}<br/>To end this campaign succesfully we will need a promotional message <br/>advertising these products to the customer with the ultimate intent that <br/>they buy from us. This message should be around 3 paragraphs, so that it can<br/>be easily integrated into the full letter. For example:<br/>Tired of making dinner, get our best ready made canned tuna.<br/>Your lifestyle deserves a taste of this fresh lobster.<br/>In the weekends, go on a day trip with the kids with these new lunch box containers.<br/>    <br/>You need to review, approve, and delegate follow up work if necessary to <br/>have the complete promotional message. When delegating work send the full<br/>draft as part of the information.<br/>Your final answer MUST include the 3 products from the list,<br/>each with a short promotional message.'''</span></pre><p id="105a" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">Each agent is linked to Large Language Model that it will use. I linked them to the <a class="af my" href="https://docs.mistral.ai/" rel="noopener ugc nofollow" target="_blank">Mistral API</a>. I first integrated their Mistral 7B Instruct v0.2 model, but it reasoned very strangely, such as this explanation for selecting diapers: “<em class="pu">Although the customer is currently single, they might have children in the future. Diapers are a practical investment for potential parenthood, as they are essential for the care of infants and toddlers.</em>”<br/>That was solved by upgrading to a bigger model: Mixtral 8x7B. I haven’t seen any such logic flaws again.</p><h1 id="bb5c" class="od oe fq bf of og oh gq oi oj ok gt ol om on oo op oq or os ot ou ov ow ox oy bk"><strong class="al">Results</strong></h1><p id="9132" class="pw-post-body-paragraph mz na fq nb b go oz nd ne gr pa ng nh ni pb nk nl nm pc no np nq pd ns nt nu fj bk">With my two crews set up, it’s time to let them loose on the 10 customers. By setting the verbose mode to 2, I am able to see behind the screen and follow the agents thoughts and interactions. E.g.:</p><pre class="mj mk ml mm mn pk pl pm bp pn bb bk"><span id="498d" class="po oe fq pl b bg pp pq l pr ps">Thought: Do I need to use a tool? Yes<br/>Action: Ask question to co-worker<br/>Action Input: profiler|Can you provide a customer profile based on the given demographic and behavioral data?|The customer was born in 1968. Its sex is M. Its marital status is divorced. Its yearly household income percentile is 45. The customer has 0 toddlers. The customer has 0 teenage kids. The customer highest education is high_school. The customer spends on average 45 $ on wine. The customer spends on average 50 $ on vegetables. The customer spends on average 0 $ on toys. The customer's coupon use is high.<br/><br/>Observation: The profiler responds with: Our customer is a 54-year-old divorced man with a mid-level income. He has no children living with him. He has a high school education. He enjoys wine and vegetables, and does not spend on toys. He is likely to be budget-conscious and looking for deals, given his high coupon use.<br/><br/>Thought: Do I need to use a tool? Yes<br/>Action: Ask question to co-worker<br/>Action Input: product specialist|Which three products would you recommend for this customer, based on his profile?|54-year-old divorced man with a mid-level income, high school education, enjoys wine and vegetables, budget-conscious, and uses coupons.<br/><br/>Observation: The product specialist responds with: Based on the customer's profile, I would recommend:<br/>1. Laundry detergent: A necessary household item, and we can offer a deal or discount to appeal to his budget-conscious nature.<br/>2. Fresh lettuce and vegetables: Given his interest in vegetables, promoting fresh produce is a good fit.<br/>3. Wine or Irish whiskey: Since he spends a significant amount on wine, promoting a higher-end option like Irish whiskey could be appealing, especially if we offer a discount.<br/><br/>Thought: Do I need to use a tool? No<br/>Final Answer:<br/>1. Laundry detergent : A necessary household item, and we can offer a deal or discount to appeal to his budget-conscious nature.<br/>2. Fresh lettuce and vegetables : Given his interest in vegetables, promoting fresh produce is a good fit.<br/>3. Irish whiskey : Since he spends a significant amount on wine, promoting a higher-end option like Irish whiskey could be appealing, especially if we offer a discount.<br/><br/>Observation: I have provided the three recommended products for the customer based on their profile.</span></pre><p id="1bd6" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">Now, let’s dissect two customers in detail. The first customer was:</p><pre class="mj mk ml mm mn pk pl pm bp pn bb bk"><span id="8ed7" class="po oe fq pl b bg pp pq l pr ps">1990,F,single,25,0,0,associates,10,35,0,low</span></pre><p id="2260" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">Giving that to the <strong class="nb fr">profiler agent</strong>, its response is: “<em class="pu">Our customer is a single woman in her late 20s or early 30s with a moderate income. She enjoys wine and vegetables, likely cooking for herself. She doesn’t have children and has a higher education background, suggesting she might be more health-conscious and have a busy lifestyle. She doesn’t use coupons often, indicating she might prefer convenience over savings.</em>”</p><p id="63b1" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">The <strong class="nb fr">product specialist</strong> agent responds with: “<em class="pu">Based on the customer profile, I recommend the following products:</em></p><ul class=""><li id="8077" class="mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx bk"><em class="pu">Fresh Lettuce: Given her interest in vegetables, she might enjoy fresh lettuce as a healthy addition to her meals.</em></li><li id="c194" class="mz na fq nb b go ny nd ne gr nz ng nh ni oa nk nl nm ob no np nq oc ns nt nu nv nw nx bk"><em class="pu">Mascara: As a single woman, she might appreciate beauty products like mascara, fitting with her higher education and busy lifestyle.</em></li><li id="5bbd" class="mz na fq nb b go ny nd ne gr nz ng nh ni oa nk nl nm ob no np nq oc ns nt nu nv nw nx bk"><em class="pu">Spaghetti cans (ready to eat): Due to her busy lifestyle, she might not always have time to cook, making ready-to-eat spaghetti a convenient option.</em>”</li></ul><p id="44ef" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">These are very reasonable selections! Let’s see now what the other crew came up with as promotional messages. I pasted them in this mock up. The product messages are very spot on:</p><figure class="mj mk ml mm mn mo mp mq paragraph-image"><div class="mp mq pv"><img src="../Images/87ce8b71f59b0114d515810727461338.png" data-original-src="https://miro.medium.com/v2/resize:fit:1090/format:webp/1*ysXsay7ifa5nCaVQF9p7FQ.png"/></div><figcaption class="mt mu mv mp mq mw mx bf b bg z dx">Image by author</figcaption></figure><p id="235b" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">Let’s have a look at how they managed with the 2nd customer:</p><pre class="mj mk ml mm mn pk pl pm bp pn bb bk"><span id="a765" class="po oe fq pl b bg pp pq l pr ps">1985,M,married,90,2,1,phd,80,100,120,high</span></pre><p id="52c5" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">The profile built was very basic, but complete: “<em class="pu">Customer was born in 1985, male, married, 90th percentile yearly household income, has 2 toddlers and 1 teenage kid, highest education is PhD, spends 80 $ on wine, 100 $ on vegetables, 120 $ on toys, high coupon use.</em>”</p><p id="6e00" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">Here are the products selected and promoted:</p><figure class="mj mk ml mm mn mo mp mq paragraph-image"><div class="mp mq pw"><img src="../Images/a71b809c7ac1fd13bcab5ede68f97436.png" data-original-src="https://miro.medium.com/v2/resize:fit:1054/format:webp/1*Bx2oCAwpdHCWBth5NOUjJg.png"/></div><figcaption class="mt mu mv mp mq mw mx bf b bg z dx">Image by author</figcaption></figure><p id="73de" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">The product selection and promo texts match very well with what is known of the customer. They picked Wagyu because of the high income, spaghetti because he’s a busy parent with 3 children and a game because he has teen kids.</p><p id="e015" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">Zooming out, here are my <strong class="nb fr">observations </strong>from the overall crew output:</p><p id="bc42" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">✔️ diapers were only proposed to customers with toddlers<br/>✔️ mascara was only proposed to female customers<br/>✔️ wagyu was only proposed to highest income customers<br/>✔️ laundry detergent was 4 times proposed. Two times to women, but also twice to not-married (!) men<br/>✔️ cigarettes were never promoted (<em class="pu">pats Mixtral</em> — good AI)<br/>✔️ all the accompanying texts were tailored to the customer without being creepily specific or containing hallucinations<br/>✔️ I never saw product suggestions that were out of place</p><p id="8ca0" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">That’s exactly what a marketer would be hoping for! The crew seems to be aware of some common-sense knowledge and can reason around it.</p><h1 id="466a" class="od oe fq bf of og oh gq oi oj ok gt ol om on oo op oq or os ot ou ov ow ox oy bk">Ethicality</h1><p id="247e" class="pw-post-body-paragraph mz na fq nb b go oz nd ne gr pa ng nh ni pb nk nl nm pc no np nq pd ns nt nu fj bk">When I said common sense, please be aware that it is not a universal common sense. Each large language model has inherently a certain bias, based on the training data and training optimization (eg. RLHF).<br/>For example: I found it striking that in my example the model proposed laundry detergent only to men when they are not married. Was this just by chance or is it supposing that married men in a household don’t take care of laundry? Maybe because the model has only seen couples where only women do the laundry? This might statistically be correct, but the fact is that we don’t know which other biases there are. We should be wary about putting these frameworks in production without scrutiny, as they may propagate stereotypes around gender, politics, religion, ethnicity, etc. It is still a field of ongoing research to mitigate these risks. For further reading I can suggest: OpenAI’s <a class="af my" href="https://openai.com/blog/how-should-ai-systems-behave" rel="noopener ugc nofollow" target="_blank">blogpost</a>, <a class="af my" href="https://huggingface.co/blog/evaluating-llm-bias" rel="noopener ugc nofollow" target="_blank">🤗 Evaluate library</a> and <a class="af my" href="https://huggingface.co/blog/ethics-soc-2" rel="noopener ugc nofollow" target="_blank">practical tips</a>.</p><h1 id="1ff6" class="od oe fq bf of og oh gq oi oj ok gt ol om on oo op oq or os ot ou ov ow ox oy bk">Conclusion</h1><p id="5211" class="pw-post-body-paragraph mz na fq nb b go oz nd ne gr pa ng nh ni pb nk nl nm pc no np nq pd ns nt nu fj bk">My results demonstrate that the AI agents can reason to pick the best products based on customer profiles and provide spot-on promotional messages tailored to each customer, taking into account factors such as age, gender, marital status, and income.</p><p id="1041" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">We saw autonomous AI agents collaborate, delegate or be assigned a sub task, call for help and review each others work. When they do that, their output quality is significantly amplified, resulting in more reliable and common-sense decisions. Frameworks like CrewAI offer a straightforward, yet effective way to harness this power by allowing natural language instructions. I also touched on the subject of the common knowledge ingrained in LLMs and that there will be bias and one should strive for fairness.</p><p id="8f7d" class="pw-post-body-paragraph mz na fq nb b go nc nd ne gr nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu fj bk">This was just a simple example focused on marketing. There are so many other use cases: parsing data, an automatic social media poster, a markdown validator or a city trip planner … The possibilities are endless. Maybe it will help you with your next challenge?</p><div class="px py pz qa qb qc"><a href="https://colab.research.google.com/github/Toon-nooT/notebooks/blob/main/Marketing_Campaign__With_CrewAI.ipynb?source=post_page-----17f84378430b--------------------------------" rel="noopener  ugc nofollow" target="_blank"><div class="qd ab ig"><div class="qe ab co cb qf qg"><h2 class="bf fr hw z io qh iq ir qi it iv fp bk">Colab Notebook</h2><div class="qj l"><h3 class="bf b hw z io qh iq ir qi it iv dx">Powerful Collaboration of AI Agents with CrewAI: Marketing use case</h3></div></div><div class="qk l"><div class="ql l qm qn qo qk qp lr qc"/></div></div></a></div><div class="px py pz qa qb qc"><a href="https://docs.crewai.com/?source=post_page-----17f84378430b--------------------------------" rel="noopener  ugc nofollow" target="_blank"><div class="qd ab ig"><div class="qe ab co cb qf qg"><h2 class="bf fr hw z io qh iq ir qi it iv fp bk">Home</h2><div class="qj l"><h3 class="bf b hw z io qh iq ir qi it iv dx">Cutting-edge framework for orchestrating role-playing, autonomous AI agents. By fostering collaborative intelligence…</h3></div><div class="qq l"><p class="bf b dy z io qh iq ir qi it iv dx">docs.crewai.com</p></div></div></div></a></div><div class="px py pz qa qb qc"><a href="https://github.com/joaomdmoura/crewAI?source=post_page-----17f84378430b--------------------------------" rel="noopener  ugc nofollow" target="_blank"><div class="qd ab ig"><div class="qe ab co cb qf qg"><h2 class="bf fr hw z io qh iq ir qi it iv fp bk">GitHub - joaomdmoura/crewAI: Framework for orchestrating role-playing, autonomous AI agents. By…</h2><div class="qj l"><h3 class="bf b hw z io qh iq ir qi it iv dx">Framework for orchestrating role-playing, autonomous AI agents. By fostering collaborative intelligence, CrewAI…</h3></div><div class="qq l"><p class="bf b dy z io qh iq ir qi it iv dx">github.com</p></div></div><div class="qk l"><div class="qr l qm qn qo qk qp lr qc"/></div></div></a></div></div></div></div></div>    
</body>
</html>