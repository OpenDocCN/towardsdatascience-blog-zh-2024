- en: How We Optimized The Problem Of Global Containers Distribution
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¦‚ä½•ä¼˜åŒ–å…¨çƒé›†è£…ç®±åˆ†é…é—®é¢˜
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/how-we-optimized-the-problem-of-global-containers-distribution-ea6201d4513e?source=collection_archive---------5-----------------------#2024-08-01](https://towardsdatascience.com/how-we-optimized-the-problem-of-global-containers-distribution-ea6201d4513e?source=collection_archive---------5-----------------------#2024-08-01)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/how-we-optimized-the-problem-of-global-containers-distribution-ea6201d4513e?source=collection_archive---------5-----------------------#2024-08-01](https://towardsdatascience.com/how-we-optimized-the-problem-of-global-containers-distribution-ea6201d4513e?source=collection_archive---------5-----------------------#2024-08-01)
- en: Using Linear Programming to optimize a complete container-based supply chain
    operation across the globe
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä½¿ç”¨çº¿æ€§è§„åˆ’ä¼˜åŒ–å…¨çƒèŒƒå›´å†…çš„é›†è£…ç®±ä¾›åº”é“¾æ“ä½œã€‚
- en: '[](https://willian-fuks.medium.com/?source=post_page---byline--ea6201d4513e--------------------------------)[![Will
    Fuks](../Images/8c7227ad8677f34792058dfd45083c0b.png)](https://willian-fuks.medium.com/?source=post_page---byline--ea6201d4513e--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--ea6201d4513e--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--ea6201d4513e--------------------------------)
    [Will Fuks](https://willian-fuks.medium.com/?source=post_page---byline--ea6201d4513e--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://willian-fuks.medium.com/?source=post_page---byline--ea6201d4513e--------------------------------)[![Will
    Fuks](../Images/8c7227ad8677f34792058dfd45083c0b.png)](https://willian-fuks.medium.com/?source=post_page---byline--ea6201d4513e--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--ea6201d4513e--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--ea6201d4513e--------------------------------)
    [Will Fuks](https://willian-fuks.medium.com/?source=post_page---byline--ea6201d4513e--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--ea6201d4513e--------------------------------)
    Â·18 min readÂ·Aug 1, 2024
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº[Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--ea6201d4513e--------------------------------)
    Â·é˜…è¯»æ—¶é—´18åˆ†é’ŸÂ·2024å¹´8æœˆ1æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: Recently I was invited by a coworker to join a project for a big company in
    Brazil that sells goods and services on a global scale.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€è¿‘ï¼Œæˆ‘è¢«ä¸€ä½åŒäº‹é‚€è¯·åŠ å…¥ä¸€ä¸ªä½äºå·´è¥¿çš„å¤§å‹å…¬å¸çš„é¡¹ç›®ï¼Œè¯¥å…¬å¸åœ¨å…¨çƒèŒƒå›´å†…é”€å”®å•†å“å’ŒæœåŠ¡ã€‚
- en: The project involved transport optimization and was quite interesting â€” and
    challenging â€” so Iâ€™d like to write about it and how we solved the problem using
    the library [cvxpy](https://www.cvxpy.org/) (also used to solve optimization problems
    at companies like *Tesla*, *Netflix* and *Two Sigma*).
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥é¡¹ç›®æ¶‰åŠè¿è¾“ä¼˜åŒ–ï¼Œéå¸¸æœ‰è¶£â€”â€”ä¹Ÿå¾ˆå…·æŒ‘æˆ˜æ€§â€”â€”æ‰€ä»¥æˆ‘æƒ³å†™ä¸€ä¸‹è¿™ä¸ªé¡¹ç›®ï¼Œä»¥åŠæˆ‘ä»¬å¦‚ä½•ä½¿ç”¨[cvxpy](https://www.cvxpy.org/)åº“è§£å†³é—®é¢˜ï¼ˆè¯¥åº“ä¹Ÿè¢«åƒ*Tesla*ã€*Netflix*å’Œ*Two
    Sigma*ç­‰å…¬å¸ç”¨æ¥è§£å†³ä¼˜åŒ–é—®é¢˜ï¼‰ã€‚
- en: 'Specifically, this post covers:'
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æ–‡å…·ä½“å†…å®¹åŒ…æ‹¬ï¼š
- en: The challenge of transporting containers globally with a set of several constraints.
  id: totrans-9
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨å¤šé¡¹çº¦æŸæ¡ä»¶ä¸‹ï¼Œå…¨çƒè¿è¾“é›†è£…ç®±çš„æŒ‘æˆ˜ã€‚
- en: How we managed the companyâ€™s data and described it as a set of linear transformations.
  id: totrans-10
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¦‚ä½•ç®¡ç†å…¬å¸çš„æ•°æ®ï¼Œå¹¶å°†å…¶æè¿°ä¸ºä¸€ç»„çº¿æ€§å˜æ¢ã€‚
- en: How we adapted the variables and constraints to fit the Linear Programming formulation.
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¦‚ä½•è°ƒæ•´å˜é‡å’Œçº¦æŸï¼Œä»¥é€‚åº”çº¿æ€§è§„åˆ’çš„å…¬å¼ã€‚
- en: Techniques used to guarantee the objective function and constraints were convex
    â€” cvxpyâ€™s main restriction.
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç”¨æ¥ä¿è¯ç›®æ ‡å‡½æ•°å’Œçº¦æŸæ¡ä»¶æ˜¯å‡¸çš„æŠ€æœ¯â€”â€”cvxpyçš„ä¸»è¦é™åˆ¶ã€‚
- en: With no further ado, letâ€™s dive into it.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: äº‹ä¸å®œè¿Ÿï¼Œè®©æˆ‘ä»¬å¼€å§‹å§ã€‚
- en: 1\. The Challenge
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 1. æŒ‘æˆ˜
- en: When the project started, the company revealed us that they already had a solution
    implemented on top of *Microsoft Excel Solver* to optimize how to best manage
    the containers. The Solver aimed to reduce costs of transportation, freight, storage,
    and operation while following a set of constraints.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: å½“é¡¹ç›®å¯åŠ¨æ—¶ï¼Œå…¬å¸å‘æˆ‘ä»¬é€éœ²ï¼Œä»–ä»¬å·²ç»åœ¨*Microsoft Excel Solver*ä¸Šå®ç°äº†è§£å†³æ–¹æ¡ˆï¼Œä»¥ä¼˜åŒ–å¦‚ä½•æœ€å¥½åœ°ç®¡ç†é›†è£…ç®±ã€‚è¯¥Solveræ—¨åœ¨å‡å°‘è¿è¾“ã€è´§è¿ã€å­˜å‚¨å’Œæ“ä½œçš„æˆæœ¬ï¼ŒåŒæ—¶éµå¾ªä¸€ç³»åˆ—çº¦æŸæ¡ä»¶ã€‚
- en: The solution worked fine but as operations expanded the process began to halt
    and suffer with some bottlenecks, as the company explained. At times, they had
    so many containers to allocate that it would take the Solver a few days to process
    the whole dataset and come up with an answer.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥è§£å†³æ–¹æ¡ˆè¿è¡Œè‰¯å¥½ï¼Œä½†éšç€ä¸šåŠ¡æ‰©å±•ï¼Œè¿‡ç¨‹å¼€å§‹åœæ»ï¼Œå¹¶é­é‡ä¸€äº›ç“¶é¢ˆï¼Œæ­£å¦‚å…¬å¸æ‰€è§£é‡Šçš„é‚£æ ·ã€‚ æœ‰æ—¶ï¼Œä»–ä»¬éœ€è¦åˆ†é…çš„é›†è£…ç®±å¤ªå¤šï¼Œä»¥è‡³äºSolverå¤„ç†æ•´ä¸ªæ•°æ®é›†å¹¶ç»™å‡ºç­”æ¡ˆå¯èƒ½éœ€è¦å‡ å¤©æ—¶é—´ã€‚
- en: They requested us to develop something new that could handle the workload of
    the system while also being flexible enough so that the system would accept new
    constraints on demand.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: ä»–ä»¬è¦æ±‚æˆ‘ä»¬å¼€å‘ä¸€ç§æ–°ç³»ç»Ÿï¼Œèƒ½å¤Ÿåœ¨å¤„ç†å·¥ä½œè´Ÿè½½çš„åŒæ—¶ï¼Œè¿˜è¦è¶³å¤Ÿçµæ´»ï¼Œä»¥ä¾¿ç³»ç»Ÿèƒ½å¤Ÿæ ¹æ®éœ€æ±‚æ¥å—æ–°çš„çº¦æŸæ¡ä»¶ã€‚
- en: 'To begin with, the company has factories located across the country and containers
    are prepared by demand on each factory:'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œå…¬å¸åœ¨å…¨å›½å„åœ°éƒ½æœ‰å·¥å‚ï¼Œé›†è£…ç®±æ ¹æ®å„å·¥å‚çš„éœ€æ±‚è¿›è¡Œå‡†å¤‡ï¼š
- en: '![](../Images/001c29d34f438addc891bce6c9dbdac9.png)'
  id: totrans-19
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/001c29d34f438addc891bce6c9dbdac9.png)'
- en: Factories located across the country and its containers. Image by author.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ†å¸ƒåœ¨å…¨å›½å„åœ°çš„å·¥å‚åŠå…¶é›†è£…ç®±ã€‚å›¾åƒæ¥è‡ªä½œè€…ã€‚
- en: Each factory produces containers weekly according to its own demands, which
    means some factories will produce more containers than others. Each container
    carries its own goods so the sales price changes as well (this variable will be
    important soon).
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯ä¸ªå·¥å‚æ ¹æ®è‡ªå·±çš„éœ€æ±‚æ¯å‘¨ç”Ÿäº§é›†è£…ç®±ï¼Œè¿™æ„å‘³ç€æŸäº›å·¥å‚ä¼šç”Ÿäº§æ¯”å…¶ä»–å·¥å‚æ›´å¤šçš„é›†è£…ç®±ã€‚æ¯ä¸ªé›†è£…ç®±æºå¸¦è‡ªå·±çš„è´§ç‰©ï¼Œå› æ­¤é”€å”®ä»·æ ¼ä¹Ÿä¼šå‘ç”Ÿå˜åŒ–ï¼ˆè¿™ä¸ªå˜é‡å¾ˆå¿«ä¼šå˜å¾—é‡è¦ï¼‰ã€‚
- en: The destiny of each container also varies; some will be transported to nearby
    countries whereas others have to cross the globe. Therefore, the company needs
    to send the containers to appropriate docks or it risks not succeeding with the
    delivery (due the lack of connection between the docks of each country).
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯ä¸ªé›†è£…ç®±çš„å‘½è¿ä¹Ÿå„ä¸ç›¸åŒï¼›æœ‰äº›å°†è¢«è¿è¾“åˆ°é‚»è¿‘å›½å®¶ï¼Œè€Œå…¶ä»–çš„åˆ™éœ€è¦è·¨è¶Šå…¨çƒã€‚å› æ­¤ï¼Œå…¬å¸éœ€è¦å°†é›†è£…ç®±é€åˆ°é€‚å½“çš„ç å¤´ï¼Œå¦åˆ™å°†é¢ä¸´æ— æ³•æˆåŠŸäº¤ä»˜çš„é£é™©ï¼ˆå› ä¸ºå„å›½ç å¤´ä¹‹é—´ç¼ºä¹è¿æ¥ï¼‰ã€‚
- en: 'Several new variables shows up when trying to connect factories to the appropriate
    docks. First, each factory may choose how to transport the containers: either
    by using trains â€” and, in doing so, there are various types of contracts to choose
    from â€” or by trucks (again, multiple types of contracts as well):'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¯•å›¾å°†å·¥å‚ä¸é€‚å½“çš„ç å¤´è¿æ¥æ—¶ï¼Œå‡ ä¸ªæ–°çš„å˜é‡ä¼šå‡ºç°ã€‚é¦–å…ˆï¼Œæ¯ä¸ªå·¥å‚å¯ä»¥é€‰æ‹©å¦‚ä½•è¿è¾“é›†è£…ç®±ï¼šè¦ä¹ˆä½¿ç”¨ç«è½¦â€”â€”å¹¶ä¸”åœ¨è¿™æ ·åšæ—¶ï¼Œå¯ä»¥é€‰æ‹©ä¸åŒç±»å‹çš„åˆåŒâ€”â€”è¦ä¹ˆä½¿ç”¨å¡è½¦ï¼ˆåŒæ ·ï¼Œä¹Ÿæœ‰å¤šç§åˆåŒç±»å‹ï¼‰ï¼š
- en: '![](../Images/fdbfee15861f3e4967091c415c6c6177.png)'
  id: totrans-24
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fdbfee15861f3e4967091c415c6c6177.png)'
- en: Factories may choose how to transport containers to dock, according to availability
    of options. Image by author.
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: å·¥å‚å¯ä»¥æ ¹æ®å¯ç”¨é€‰é¡¹é€‰æ‹©å¦‚ä½•å°†é›†è£…ç®±è¿è¾“åˆ°ç å¤´ã€‚å›¾åƒæ¥è‡ªä½œè€…ã€‚
- en: 'Now another challenge arises: each container has a specific destination and
    so does the ships available on each dock. Destinations must, therefore, match!
    If a container that should go to Hong Kong is transported to a dock where no ships
    will be going to Asia then we just sacrificed an entire container.'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œå¦ä¸€ä¸ªæŒ‘æˆ˜å‡ºç°äº†ï¼šæ¯ä¸ªé›†è£…ç®±éƒ½æœ‰ç‰¹å®šçš„ç›®çš„åœ°ï¼Œè€Œæ¯ä¸ªç å¤´ä¸Šä¹Ÿæœ‰ç›¸åº”çš„èˆ¹åªã€‚å› æ­¤ï¼Œç›®çš„åœ°å¿…é¡»åŒ¹é…ï¼å¦‚æœä¸€ä¸ªåº”å½“è¿å¾€é¦™æ¸¯çš„é›†è£…ç®±è¢«è¿è¾“åˆ°ä¸€ä¸ªæ²¡æœ‰å‰å¾€äºšæ´²çš„èˆ¹åªçš„ç å¤´ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±æµªè´¹äº†ä¸€ä¸ªé›†è£…ç®±ã€‚
- en: The matching problem means that, at times, factories may need to transport a
    container to a more distant dock (and expend more money) simply because itâ€™s the
    only remaining option for making the connection between Brazil and the rest of
    the world. Shippers will be another variable and they should be accounted for
    availability in terms of spaces on each ship and also the shipâ€™s destination.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: åŒ¹é…é—®é¢˜æ„å‘³ç€ï¼Œæœ‰æ—¶å·¥å‚å¯èƒ½éœ€è¦å°†é›†è£…ç®±è¿è¾“åˆ°æ›´è¿œçš„ç å¤´ï¼ˆå¹¶æ”¯ä»˜æ›´å¤šè´¹ç”¨ï¼‰ï¼Œä»…ä»…å› ä¸ºè¿™æ˜¯å°†å·´è¥¿ä¸ä¸–ç•Œå…¶ä»–åœ°æ–¹è¿æ¥èµ·æ¥çš„å”¯ä¸€é€‰é¡¹ã€‚æ‰˜è¿äººå°†æ˜¯å¦ä¸€ä¸ªå˜é‡ï¼Œä»–ä»¬éœ€è¦è€ƒè™‘æ¯è‰˜èˆ¹ä¸Šçš„ç©ºé—´å¯ç”¨æ€§ä»¥åŠèˆ¹åªçš„ç›®çš„åœ°ã€‚
- en: 'Shippers may also allow for what is known as â€œ*overbooking spaces*â€, that is,
    just like the concept applies to airline flights, it also applies to ships but
    here the concepts is a bit less restrictive: for a given week, shippers can inform
    an â€œoverbooking factorâ€ which gives us an idea of how many more containers can
    be added on each ship above the threshold capacity â€” with a higher freight, as
    expected. The optimizer can use this factor to allocate remaining containers and
    take advantage of cheaper transportation, for instance.'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰˜è¿äººä¹Ÿå¯èƒ½å…è®¸æ‰€è°“çš„â€œ*è¶…é¢é¢„å®šç©ºé—´*â€ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œæ­£å¦‚è¿™ä¸€æ¦‚å¿µåº”ç”¨äºèˆªç©ºèˆªç­ï¼Œå®ƒåŒæ ·é€‚ç”¨äºèˆ¹åªï¼Œä½†è¿™é‡Œçš„æ¦‚å¿µç¨å¾®å®½æ¾äº›ï¼šå¯¹äºæŸä¸€å‘¨ï¼Œæ‰˜è¿äººå¯ä»¥å‘ŠçŸ¥ä¸€ä¸ªâ€œè¶…é¢é¢„å®šå› å­â€ï¼Œè¿™ä¼šç»™æˆ‘ä»¬ä¸€ä¸ªå…³äºæ¯è‰˜èˆ¹å¯ä»¥é¢å¤–æ·»åŠ å¤šå°‘ä¸ªé›†è£…ç®±çš„æ¦‚å¿µï¼Œè¶…è¿‡äº†è¯¥èˆ¹çš„æœ€å¤§å®¹é‡â€”â€”å¹¶ä¸”æŒ‰é¢„æœŸï¼Œè¿è´¹ä¼šæ›´é«˜ã€‚ä¼˜åŒ–å™¨å¯ä»¥åˆ©ç”¨è¿™ä¸ªå› å­æ¥åˆ†é…å‰©ä½™çš„é›†è£…ç®±ï¼Œå¹¶åˆ©ç”¨æ›´ä¾¿å®œçš„è¿è¾“æ–¹å¼ï¼Œä¾‹å¦‚ã€‚
- en: '![](../Images/d4b2327f58c1a5ca015aaba46d9191ed.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d4b2327f58c1a5ca015aaba46d9191ed.png)'
- en: Adding shippers to the whole challenge. Image by author.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: å¢åŠ äº†æ‰˜è¿äººè¿™ä¸€æŒ‘æˆ˜ã€‚å›¾åƒæ¥è‡ªä½œè€…ã€‚
- en: 'The optimizer must consider as well a set of rules to follow. Hereâ€™s a brief
    list of requirements:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: ä¼˜åŒ–å™¨è¿˜å¿…é¡»è€ƒè™‘ä¸€å¥—éœ€è¦éµå¾ªçš„è§„åˆ™ã€‚ä»¥ä¸‹æ˜¯ä¸€äº›ç®€è¦çš„è¦æ±‚ï¼š
- en: '**Ships have a maximum capacity**: each ship attends specific regions through
    what is called â€œtradesâ€. Each shipper have a maximum capacity of containers for
    each trade â€” this rule can be broken at times through *overbooking*.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**èˆ¹åªæœ‰æœ€å¤§å®¹é‡**ï¼šæ¯è‰˜èˆ¹é€šè¿‡æ‰€è°“çš„â€œè´¸æ˜“â€æœåŠ¡ç‰¹å®šåŒºåŸŸã€‚æ¯ä¸ªå‘è´§äººå¯¹äºæ¯ä¸ªè´¸æ˜“æœ‰ä¸€ä¸ªæœ€å¤§é›†è£…ç®±å®¹é‡â€”â€”è¿™é¡¹è§„åˆ™æœ‰æ—¶å¯ä»¥é€šè¿‡*è¶…é¢é¢„å®š*æ¥æ‰“ç ´ã€‚'
- en: '**Connect factory and dock**: factories can only send containers to docks with
    valid and available transportation â€” if a factory does not have a train station
    connection to a given dock then the optimizer must choose another transport.'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**è¿æ¥å·¥å‚å’Œç å¤´**ï¼šå·¥å‚åªèƒ½å°†é›†è£…ç®±å‘é€åˆ°å…·æœ‰æœ‰æ•ˆä¸”å¯ç”¨è¿è¾“æ–¹å¼çš„ç å¤´â€”â€”å¦‚æœå·¥å‚æ²¡æœ‰ä¸æŸä¸ªç å¤´çš„ç«è½¦ç«™è¿æ¥ï¼Œåˆ™ä¼˜åŒ–å™¨å¿…é¡»é€‰æ‹©å…¶ä»–è¿è¾“æ–¹å¼ã€‚'
- en: '**Transportation Limits**: the company made clear that contracts and slots
    available for transportation can vary; they have agreements and licenses to use
    certain slots from trains monthly, which adds an upper cap on number of containers.'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**è¿è¾“é™åˆ¶**ï¼šå…¬å¸æ˜ç¡®è¡¨ç¤ºï¼Œè¿è¾“åˆåŒå’Œå¯ç”¨æ—¶æ®µå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒï¼›ä»–ä»¬ä¸ç«è½¦å…¬å¸æœ‰åè®®å’Œè®¸å¯è¯ï¼Œå¯ä»¥æ¯æœˆä½¿ç”¨ç‰¹å®šçš„æ—¶æ®µï¼Œè¿™ä¸ºå¯è¿è¾“çš„é›†è£…ç®±æ•°é‡è®¾å®šäº†ä¸Šé™ã€‚'
- en: '**Connect departure dock and shipper**: the optimizer must send containers
    from factories to docks that contains shippers with spaces on ships and attend
    the *trade* where the container is going.'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**è¿æ¥å‡ºå‘ç å¤´å’Œå‘è´§äºº**ï¼šä¼˜åŒ–å™¨å¿…é¡»å°†é›†è£…ç®±ä»å·¥å‚å‘é€åˆ°åŒ…å«æœ‰ç©ºé—´çš„å‘è´§äººæ‰€åœ¨çš„ç å¤´ï¼Œå¹¶ä¸”æœåŠ¡è¯¥é›†è£…ç®±çš„*è´¸æ˜“*ç›®çš„åœ°ã€‚'
- en: '**Overbooking**: overbooking can happen â€” like an extra trick at our disposal.
    Each shipper have a factor of how many slots may be used above the max cap. Containers
    under overbooking are much more expensive and it should happen only if all prior
    available spaces have already been consumed.'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**è¶…é¢é¢„å®š**ï¼šè¶…é¢é¢„å®šæ˜¯å¯èƒ½å‘ç”Ÿçš„â€”â€”å°±åƒæ˜¯æˆ‘ä»¬æ‰‹ä¸­é¢å¤–çš„â€œæ‹›æ•°â€ã€‚æ¯ä¸ªå‘è´§äººéƒ½æœ‰ä¸€ä¸ªå¯ä»¥è¶…è¿‡æœ€å¤§ä¸Šé™çš„é¢„å®šæ§½ä½çš„ç³»æ•°ã€‚è¶…é¢é¢„å®šçš„é›†è£…ç®±æˆæœ¬æ›´é«˜ï¼Œåªæœ‰åœ¨æ‰€æœ‰å…ˆå‰å¯ç”¨çš„ç©ºé—´å·²ç»è¢«å ç”¨çš„æƒ…å†µä¸‹æ‰åº”ä½¿ç”¨ã€‚'
- en: '**Transport Or Not Transport**: The optimizer may conclude that itâ€™s better
    to store a given container in the factory than transporting it, which affects
    the total costs expectation.'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**è¿è¾“ä¸å¦**ï¼šä¼˜åŒ–å™¨å¯èƒ½ä¼šå¾—å‡ºç»“è®ºï¼Œè®¤ä¸ºå°†æŸä¸ªé›†è£…ç®±å­˜æ”¾åœ¨å·¥å‚ä¸­æ¯”è¿è¾“å®ƒæ›´ä¸ºåˆé€‚ï¼Œè¿™ä¼šå½±å“åˆ°æ€»æˆæœ¬çš„é¢„æœŸã€‚'
- en: Are we there yet? Well, not really. In practice, the challenge is a bit more
    evolved as it should contain the time that factories take to transport each container
    and connect it to when shippers will be available at the docks. If we end up choosing
    a transport that is too slow we may miss the ship and either have to wait and
    hope that there is another ship going to the same destination or we basically
    just lose the container. This post does not consider the time variables as it
    makes development much more complex.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬åˆ°äº†å—ï¼Ÿå—¯ï¼Œè¿˜æ²¡æœ‰ã€‚å®é™…ä¸Šï¼ŒæŒ‘æˆ˜è¦å¤æ‚ä¸€äº›ï¼Œå› ä¸ºå®ƒåº”å½“åŒ…æ‹¬å·¥å‚è¿è¾“æ¯ä¸ªé›†è£…ç®±æ‰€éœ€çš„æ—¶é—´ï¼Œå¹¶ä¸å‘è´§äººä½•æ—¶èƒ½åœ¨ç å¤´å¯ç”¨è¿›è¡Œè¿æ¥ã€‚å¦‚æœæˆ‘ä»¬é€‰æ‹©äº†ä¸€ä¸ªå¤ªæ…¢çš„è¿è¾“æ–¹å¼ï¼Œå¯èƒ½ä¼šé”™è¿‡èˆ¹åªï¼Œéšåå¯èƒ½è¦ç­‰å¾…å¹¶å¸Œæœ›æœ‰å¦ä¸€è‰˜èˆ¹å‰å¾€ç›¸åŒçš„ç›®çš„åœ°ï¼Œæˆ–è€…æˆ‘ä»¬å¯èƒ½ä¼šç›´æ¥å¤±å»è¿™ä¸ªé›†è£…ç®±ã€‚æœ¬æ–‡æ²¡æœ‰è€ƒè™‘æ—¶é—´å˜é‡ï¼Œå› ä¸ºè¿™ä¼šä½¿å¾—å¼€å‘è¿‡ç¨‹æ›´ä¸ºå¤æ‚ã€‚
- en: We have the challenge, now, letâ€™s see how we solved it ğŸ¥·!
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†æŒ‘æˆ˜ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æˆ‘ä»¬æ˜¯å¦‚ä½•è§£å†³å®ƒçš„ ğŸ¥·ï¼
- en: 3\. Linear Programming
  id: totrans-40
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 3\. çº¿æ€§è§„åˆ’
- en: '[Linear Programming](https://www.britannica.com/science/linear-programming-mathematics)
    (LP) is an optimization technique that also accepts a set of constraints represented
    as linear transformations.'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '[çº¿æ€§è§„åˆ’](https://www.britannica.com/science/linear-programming-mathematics)ï¼ˆLPï¼‰æ˜¯ä¸€ç§ä¼˜åŒ–æŠ€æœ¯ï¼Œä¹Ÿæ¥å—ä½œä¸ºçº¿æ€§å˜æ¢è¡¨ç¤ºçš„ä¸€ç»„çº¦æŸã€‚'
- en: 'Mathematically, we have something like the following:'
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ•°å­¦ä¸Šï¼Œæˆ‘ä»¬æœ‰å¦‚ä¸‹çš„å†…å®¹ï¼š
- en: '![](../Images/70d4a1a86c13c0f4e06e37a43132f0a3.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/70d4a1a86c13c0f4e06e37a43132f0a3.png)'
- en: '***f***is the **objective function** (or cost function) and for our challenge
    it represents the costs associated to each transportation, ship, whether containers
    were stored on overbooking status and the trade-offs between leaving the containers
    in the factories or not.'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '***f***æ˜¯**ç›®æ ‡å‡½æ•°**ï¼ˆæˆ–æˆæœ¬å‡½æ•°ï¼‰ï¼Œåœ¨æˆ‘ä»¬çš„æŒ‘æˆ˜ä¸­ï¼Œå®ƒè¡¨ç¤ºä¸æ¯ä¸ªè¿è¾“ã€èˆ¹åªç›¸å…³çš„æˆæœ¬ï¼Œä»¥åŠé›†è£…ç®±æ˜¯å¦å¤„äºè¶…é¢é¢„å®šçŠ¶æ€ä»¥åŠå°†é›†è£…ç®±ç•™åœ¨å·¥å‚ä¸å¦çš„æƒè¡¡ã€‚'
- en: The values ***x*** represent the variables the optimizer must manipulate in
    order to minimize the objective. In our case, itâ€™ll be which transport, ship,
    dock and overbooking status to choose.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œ***x***ä»£è¡¨ä¼˜åŒ–å™¨å¿…é¡»æ“ä½œçš„å˜é‡ï¼Œä»¥ä¾¿æœ€å°åŒ–ç›®æ ‡å‡½æ•°ã€‚åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œå®ƒå°†å†³å®šé€‰æ‹©å“ªç§è¿è¾“ã€èˆ¹åªã€ç å¤´å’Œè¶…é¢é¢„å®šçŠ¶æ€ã€‚
- en: To make the concept more tangible and connected with the main challenge in this
    post, letâ€™s begin with a very simple implementation on top of cvxpy.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†è®©è¿™ä¸ªæ¦‚å¿µæ›´å…·å®ç”¨æ€§ï¼Œå¹¶ä¸æœ¬æ–‡çš„ä¸»è¦æŒ‘æˆ˜å…³è”èµ·æ¥ï¼Œè®©æˆ‘ä»¬ä»ä¸€ä¸ªéå¸¸ç®€å•çš„cvxpyå®ç°å¼€å§‹ã€‚
- en: 3.1 Simple Example
  id: totrans-47
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.1 ç®€å•ç¤ºä¾‹
- en: 'Suppose the following setting:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾ä»¥ä¸‹è®¾å®šï¼š
- en: 'The company produced 4 containers in a given week, all in the same factory.
    Their values is: [$200, $300, $400, $500].'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å…¬å¸åœ¨æŸä¸€å‘¨ç”Ÿäº§äº†4ä¸ªé›†è£…ç®±ï¼Œæ‰€æœ‰é›†è£…ç®±éƒ½æ¥è‡ªåŒä¸€ä¸ªå·¥å‚ã€‚å®ƒä»¬çš„ä»·å€¼ä¸ºï¼š[$200, $300, $400, $500]ã€‚
- en: The factory can use only one type of transportation.
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å·¥å‚åªèƒ½ä½¿ç”¨ä¸€ç§ç±»å‹çš„è¿è¾“æ–¹å¼ã€‚
- en: The factory is connected to just one dock.
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å·¥å‚ä»…è¿æ¥åˆ°ä¸€ä¸ªç å¤´ã€‚
- en: In this supposed week, two shippers will have ships available at the dock. Shippers
    charges $100 and $130 per container respectively.
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸€å‡è®¾çš„å‘¨å†…ï¼Œä¸¤ä¸ªå‘è´§äººå°†åœ¨ç å¤´ä¸Šæœ‰èˆ¹å¯ç”¨ã€‚å‘è´§äººåˆ†åˆ«æ”¶å–æ¯ä¸ªé›†è£…ç®±$100å’Œ$130çš„è´¹ç”¨ã€‚
- en: First shipper has 2 remaining slots available; the second has just 1.
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€ä¸ªå‘è´§äººæœ‰2ä¸ªå‰©ä½™ç©ºä½ï¼›ç¬¬äºŒä¸ªå‘è´§äººåªæœ‰1ä¸ªã€‚
- en: The main goal of the optimizer is to distribute the 4 containers on the available
    spaces on ships while minimizing total costs of transportation.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: ä¼˜åŒ–å™¨çš„ä¸»è¦ç›®æ ‡æ˜¯å°†4ä¸ªé›†è£…ç®±åˆ†é…åˆ°å¯ç”¨çš„èˆ¹åªç©ºé—´ä¸Šï¼ŒåŒæ—¶æœ€å°åŒ–è¿è¾“çš„æ€»æˆæœ¬ã€‚
- en: 'How do we implement it in cvxpy? Well, itâ€™s quite simple actually. First we
    need a variable **x** that represents the choices that the optimizer can make.
    Best way to represent **x** in this case is as a **boolean** array with shape
    (4, 2) â€” each row corresponds to a given container, and 2 columns as there are
    2 shippers available:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¦‚ä½•åœ¨cvxpyä¸­å®ç°è¿™ä¸ªå‘¢ï¼Ÿå…¶å®å¾ˆç®€å•ã€‚é¦–å…ˆæˆ‘ä»¬éœ€è¦ä¸€ä¸ªå˜é‡**x**ï¼Œè¡¨ç¤ºä¼˜åŒ–å™¨å¯ä»¥åšå‡ºçš„é€‰æ‹©ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¡¨ç¤º**x**çš„æœ€ä½³æ–¹å¼æ˜¯ä½¿ç”¨å½¢çŠ¶ä¸º(4,
    2)çš„**å¸ƒå°”**æ•°ç»„â€”â€”æ¯è¡Œå¯¹åº”ä¸€ä¸ªé›†è£…ç®±ï¼Œ2åˆ—è¡¨ç¤ºæœ‰ä¸¤ä¸ªå‘è´§äººå¯ä¾›é€‰æ‹©ï¼š
- en: '![](../Images/4684be83ca2133aa3fc0f31123427229.png)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4684be83ca2133aa3fc0f31123427229.png)'
- en: An example of one possible value of **x** that represents choices the optimizer
    can make to minimize costs. Image by author.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: '**x**çš„ä¸€ä¸ªå¯èƒ½å€¼çš„ç¤ºä¾‹ï¼Œè¡¨ç¤ºä¼˜åŒ–å™¨å¯ä»¥åšå‡ºçš„é€‰æ‹©ä»¥æœ€å°åŒ–æˆæœ¬ã€‚å›¾ç‰‡æ¥è‡ªä½œè€…ã€‚'
- en: A value of â€œ1â€ on a row means the optimizer allocated the corresponding container
    to the respective shipper at that column. In this example, the first and second
    containers go to the first shipper and the third and fourth containers go to the
    second shipper. Notice that each row can contain only one value expressed as â€œ1â€
    and the other must be â€œ0â€ as otherwise it would mean that a given container was
    allocated to both shippers at the same time, which is invalid.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: è¡Œä¸­â€œ1â€çš„å€¼è¡¨ç¤ºä¼˜åŒ–å™¨å°†å¯¹åº”çš„é›†è£…ç®±åˆ†é…ç»™è¯¥åˆ—çš„ç›¸åº”å‘è´§äººã€‚åœ¨æ­¤ç¤ºä¾‹ä¸­ï¼Œç¬¬ä¸€ä¸ªå’Œç¬¬äºŒä¸ªé›†è£…ç®±åˆ†é…ç»™ç¬¬ä¸€ä¸ªå‘è´§äººï¼Œç¬¬ä¸‰ä¸ªå’Œç¬¬å››ä¸ªé›†è£…ç®±åˆ†é…ç»™ç¬¬äºŒä¸ªå‘è´§äººã€‚è¯·æ³¨æ„ï¼Œæ¯è¡Œåªèƒ½åŒ…å«ä¸€ä¸ªâ€œ1â€çš„å€¼ï¼Œå…¶ä»–å¿…é¡»æ˜¯â€œ0â€ï¼Œå¦åˆ™å°±æ„å‘³ç€æŸä¸ªé›†è£…ç®±è¢«åŒæ—¶åˆ†é…ç»™äº†ä¸¤ä¸ªå‘è´§äººï¼Œè¿™æ˜¯æ— æ•ˆçš„ã€‚
- en: The challenge of the optimizer will be, therefore, to keep changing this array
    until it finds a minimal value of total costs, while still respecting the requirements.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œä¼˜åŒ–å™¨çš„æŒ‘æˆ˜å°†æ˜¯ä¸æ–­è°ƒæ•´è¿™ä¸ªæ•°ç»„ï¼Œç›´åˆ°æ‰¾åˆ°æ€»æˆæœ¬çš„æœ€å°å€¼ï¼ŒåŒæ—¶ä»ç„¶æ»¡è¶³è¦æ±‚ã€‚
- en: 'Costs will have two components: one associated to the shippers and another
    to the container itself. If a given container is not allocated to any ship then
    its value should be added to the final costs â€” itâ€™s better, therefore, to prioritize
    allocation of the $500 container instead of the $200 one.'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: æˆæœ¬å°†åŒ…æ‹¬ä¸¤ä¸ªéƒ¨åˆ†ï¼šä¸€éƒ¨åˆ†ä¸å‘è´§äººç›¸å…³ï¼Œå¦ä¸€éƒ¨åˆ†ä¸é›†è£…ç®±æœ¬èº«ç›¸å…³ã€‚å¦‚æœæŸä¸ªé›†è£…ç®±æ²¡æœ‰åˆ†é…ç»™ä»»ä½•èˆ¹åªï¼Œé‚£ä¹ˆå®ƒçš„ä»·å€¼åº”å½“åŠ å…¥åˆ°æœ€ç»ˆæˆæœ¬ä¸­â€”â€”å› æ­¤ï¼Œä¼˜å…ˆåˆ†é…$500çš„é›†è£…ç®±è€Œä¸æ˜¯$200çš„é›†è£…ç®±ä¼šæ›´å¥½ã€‚
- en: 'As for the code implementation, this is one possibility:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: è‡³äºä»£ç å®ç°ï¼Œè¿™æ˜¯ä¸€ä¸ªå¯èƒ½çš„å®ç°æ–¹å¼ï¼š
- en: 'Key points to consider:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: éœ€è¦è€ƒè™‘çš„å…³é”®ç‚¹ï¼š
- en: cvxpy requires the set of **variables**, **constraints** and finally the **cost
    expression**.
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: cvxpyéœ€è¦**å˜é‡**ã€**çº¦æŸæ¡ä»¶**å’Œæœ€ç»ˆçš„**æˆæœ¬è¡¨è¾¾å¼**ã€‚
- en: The line `constraint0 = cx.sum(x_shippers, axis=1) <= 1` is a constraint that
    *cvxpy* must obey when optimizing **x**. As a general rule, they must keep the
    optimization process convex (which guarantees convergence) and can either be an
    equality expression or an upper bound equality. In this case, the `sum` operator
    happens on *axis=1* which means â€œsum through columnsâ€.
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä»£ç è¡Œ`constraint0 = cx.sum(x_shippers, axis=1) <= 1`æ˜¯ä¸€ä¸ª*cvxpy*å¿…é¡»éµå®ˆçš„çº¦æŸæ¡ä»¶ï¼Œç”¨äºä¼˜åŒ–**x**ã€‚ä½œä¸ºä¸€èˆ¬è§„åˆ™ï¼Œçº¦æŸæ¡ä»¶å¿…é¡»ä¿æŒä¼˜åŒ–è¿‡ç¨‹çš„å‡¸æ€§ï¼ˆè¿™ä¿è¯äº†æ”¶æ•›æ€§ï¼‰ï¼Œå¹¶ä¸”å¯ä»¥æ˜¯ç­‰å¼è¡¨è¾¾å¼æˆ–ä¸Šç•Œç­‰å¼ã€‚åœ¨æ­¤æ¡ˆä¾‹ä¸­ï¼Œ`sum`è¿ç®—ç¬¦ä½œç”¨äº*axis=1*ï¼Œæ„å‘³ç€â€œæŒ‰åˆ—æ±‚å’Œâ€ã€‚
- en: The rule imples that the summation of each row of **x_shippers** can be at maximum
    equal to 1, which guarantees that a given container wonâ€™t be assigned to multiple
    shippers at the same time.
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: è¯¥è§„åˆ™æ„å‘³ç€æ¯è¡Œ**x_shippers**çš„å’Œæœ€å¤šç­‰äº1ï¼Œè¿™ä¿è¯äº†æŸä¸ªé›†è£…ç®±ä¸ä¼šåŒæ—¶åˆ†é…ç»™å¤šä¸ªå‘è´§äººã€‚
- en: As the summation constraint follows the `<=` rule, then a given row can be of
    just 0â€™s, which means a given container may not be assigned to any ship at all
    (this may happen due lack of available spaces on ships, for instance).
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç”±äºæ±‚å’Œçº¦æŸéµå¾ª`<=`è§„åˆ™ï¼Œå› æ­¤æŸè¡Œå¯ä»¥å…¨æ˜¯0ï¼Œè¿™æ„å‘³ç€æŸä¸ªé›†è£…ç®±å¯èƒ½å®Œå…¨æ²¡æœ‰è¢«åˆ†é…ç»™ä»»ä½•èˆ¹åªï¼ˆä¾‹å¦‚ï¼Œå¯èƒ½ç”±äºèˆ¹åªä¸Šæ²¡æœ‰ç©ºä½™ç©ºé—´ï¼‰ã€‚
- en: '`constraint1 = cx.sum(x_shippers, axis=0) <= shippers_spaces` works similarly
    to *constraint0*. It basically translates that all containers assigned for each
    ship cannot surpass their maximum capacity.'
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`constraint1 = cx.sum(x_shippers, axis=0) <= shippers_spaces` çš„ä½œç”¨ä¸*constraint0*ç›¸ä¼¼ã€‚å®ƒåŸºæœ¬ä¸Šè¡¨è¾¾çš„æ˜¯æ¯ä¸ªèˆ¹åªåˆ†é…çš„æ‰€æœ‰å®¹å™¨ä¸èƒ½è¶…è¿‡å…¶æœ€å¤§å®¹é‡ã€‚'
- en: 'Then we arrive at the heart of the problem: the cost function, given by: `cost
    = cx.sum(x_shippers @ shippers_cost.T) + container_costs @ (1 â€” cx.sum(x_shippers,
    axis=1))` . The first component `cx.sum(x_shippers @ shippers_cost.T)` basically
    express all costs for allocating each container to each shipper. â€œ**@**â€represents
    the dot product so the result of the operation is already the cost associated
    to each container, which has to be summed for the total cost.'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç„¶åï¼Œæˆ‘ä»¬æ¥åˆ°äº†é—®é¢˜çš„æ ¸å¿ƒï¼šæˆæœ¬å‡½æ•°ï¼Œå®šä¹‰ä¸ºï¼š`cost = cx.sum(x_shippers @ shippers_cost.T) + container_costs
    @ (1 â€” cx.sum(x_shippers, axis=1))`ã€‚ç¬¬ä¸€ä¸ªéƒ¨åˆ† `cx.sum(x_shippers @ shippers_cost.T)`
    åŸºæœ¬ä¸Šè¡¨è¾¾äº†ä¸ºæ¯ä¸ªèˆ¹åªåˆ†é…æ¯ä¸ªå®¹å™¨çš„æ‰€æœ‰æˆæœ¬ã€‚ "**@**" è¡¨ç¤ºç‚¹ç§¯ï¼Œå› æ­¤è¯¥æ“ä½œçš„ç»“æœå·²ç»æ˜¯ä¸æ¯ä¸ªå®¹å™¨ç›¸å…³çš„æˆæœ¬ï¼Œå¿…é¡»å¯¹å…¶è¿›è¡Œæ±‚å’Œå¾—åˆ°æ€»æˆæœ¬ã€‚
- en: Second component `container_costs @ (1 â€” cx.sum(x_shippers, axis=1))` is arguably
    more interesting as here we start to see the strategies we can use to express
    our problems in *cvxpy*. By using the **1** matrix minus the row values expressed
    as `cx.sum(x_shippers, axis=1)` , we essentially get a (4, 1) matrix where each
    row indicates whether the container was ever assigned to some shipper or not.
  id: totrans-69
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç¬¬äºŒéƒ¨åˆ† `container_costs @ (1 â€” cx.sum(x_shippers, axis=1))` å¯ä»¥è¯´æ›´æœ‰è¶£ï¼Œå› ä¸ºåœ¨è¿™é‡Œæˆ‘ä»¬å¼€å§‹çœ‹åˆ°å¯ä»¥ç”¨æ¥åœ¨
    *cvxpy* ä¸­è¡¨è¾¾é—®é¢˜çš„ç­–ç•¥ã€‚é€šè¿‡ä½¿ç”¨ **1** çŸ©é˜µå‡å»æŒ‰è¡Œæ±‚å’Œçš„ `cx.sum(x_shippers, axis=1)`ï¼Œæˆ‘ä»¬å®é™…ä¸Šå¾—åˆ°äº†ä¸€ä¸ª
    (4, 1) çŸ©é˜µï¼Œå…¶ä¸­æ¯è¡Œè¡¨ç¤ºå®¹å™¨æ˜¯å¦æ›¾ç»è¢«åˆ†é…ç»™æŸä¸ªèˆ¹åªã€‚
- en: The dot `container_costs @ not chosen containers` tracks which containers were
    not routed and sum their cost value.
  id: totrans-70
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: ç‚¹ç§¯ `container_costs @ æœªé€‰æ‹©çš„å®¹å™¨` è·Ÿè¸ªå“ªäº›å®¹å™¨æ²¡æœ‰è¢«åˆ†é…ï¼Œå¹¶æ±‚å’Œå®ƒä»¬çš„æˆæœ¬å€¼ã€‚
- en: 'This is an example of the result:'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ç»“æœçš„ä¸€ä¸ªç¤ºä¾‹ï¼š
- en: '[PRE0]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Container 0 was not assigned to any ship (as itâ€™s the cheapest so it was not
    prioritized).
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: å®¹å™¨ 0 æ²¡æœ‰è¢«åˆ†é…ç»™ä»»ä½•èˆ¹åªï¼ˆå› ä¸ºå®ƒæ˜¯æœ€ä¾¿å®œçš„ï¼Œæ‰€ä»¥æ²¡æœ‰è¢«ä¼˜å…ˆè€ƒè™‘ï¼‰ã€‚
- en: 'Some tips before we move on:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬ç»§ç»­ä¹‹å‰ï¼Œç»™å‡ºä¸€äº›æç¤ºï¼š
- en: You can run experiments with cvxpy using [Colab](https://colab.research.google.com/).
    Just run `!pip install cvxpy` and you are pretty much ready to go.
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä½ å¯ä»¥é€šè¿‡ [Colab](https://colab.research.google.com/) è¿è¡Œ cvxpy çš„å®éªŒã€‚åªéœ€è¿è¡Œ `!pip install
    cvxpy`ï¼Œç„¶åä½ å°±å¯ä»¥å¼€å§‹äº†ã€‚
- en: You can run some checks to confirm you are on the right track when implementing
    your models. One technique I like to use is to, for instance, set the variables
    with an initial value, such as `x_shippers = cx.Variable((2, 2), value=[[1, 0],
    [0, 1]]`. Then, after running operations (such as `r=A @ x_shippers` ), you can
    print the result `r.value` attribute to check if everything is working as expected.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨å®ç°æ¨¡å‹æ—¶ï¼Œä½ å¯ä»¥è¿è¡Œä¸€äº›æ£€æŸ¥æ¥ç¡®è®¤ä½ èµ°åœ¨æ­£ç¡®çš„é“è·¯ä¸Šã€‚æˆ‘å–œæ¬¢ä½¿ç”¨çš„ä¸€ç§æŠ€å·§æ˜¯ï¼Œä¾‹å¦‚ï¼Œå…ˆç»™å˜é‡è®¾ç½®ä¸€ä¸ªåˆå§‹å€¼ï¼Œæ¯”å¦‚ `x_shippers = cx.Variable((2,
    2), value=[[1, 0], [0, 1]])`ã€‚ç„¶åï¼Œè¿è¡Œæ“ä½œï¼ˆä¾‹å¦‚ `r=A @ x_shippers`ï¼‰åï¼Œä½ å¯ä»¥æ‰“å°ç»“æœçš„ `r.value`
    å±æ€§ï¼Œä»¥æ£€æŸ¥ä¸€åˆ‡æ˜¯å¦æŒ‰é¢„æœŸå·¥ä½œã€‚
- en: 'When working with cvxpy, at times youâ€™ll get some errors when running the optimization.
    One common problem is the error message:'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨ä½¿ç”¨ cvxpy æ—¶ï¼Œæœ‰æ—¶ä½ ä¼šåœ¨è¿è¡Œä¼˜åŒ–æ—¶é‡åˆ°ä¸€äº›é”™è¯¯ã€‚ä¸€ä¸ªå¸¸è§çš„é—®é¢˜æ˜¯é”™è¯¯ä¿¡æ¯ï¼š
- en: '![](../Images/495c23a75b2347bb0018533dd00b4ab7.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/495c23a75b2347bb0018533dd00b4ab7.png)'
- en: This is the infamous Disciplined Convex Problem ([DCP](http://cvxr.com/cvx/doc/dcp.html)
    for short) which consists of a set of rules that must be followed to guarantee
    that restrictions and objective will be convex. For instance, if instead of the
    `sum` operator we used `max` , weâ€™d get the exact same result but when trying
    to run it weâ€™d get`DCPError` . DCP means then that all operations used to express
    the cost and constraints must follow the rules of convexity.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯è‡­åæ˜­è‘—çš„è§„èŒƒå‡¸ä¼˜åŒ–é—®é¢˜ï¼ˆç®€ç§°[DCP](http://cvxr.com/cvx/doc/dcp.html)ï¼‰ï¼Œå®ƒç”±ä¸€ç»„è§„åˆ™ç»„æˆï¼Œè¿™äº›è§„åˆ™å¿…é¡»éµå®ˆï¼Œä»¥ä¿è¯çº¦æŸå’Œç›®æ ‡æ˜¯å‡¸çš„ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘ä»¬ç”¨
    `max` æ“ä½œç¬¦ä»£æ›¿ `sum`ï¼Œæˆ‘ä»¬ä»ç„¶ä¼šå¾—åˆ°ç›¸åŒçš„ç»“æœï¼Œä½†åœ¨å°è¯•è¿è¡Œæ—¶ï¼Œæˆ‘ä»¬ä¼šé‡åˆ°`DCPError`ã€‚å› æ­¤ï¼ŒDCP æ„å‘³ç€æ‰€æœ‰ç”¨äºè¡¨è¾¾æˆæœ¬å’Œçº¦æŸçš„æ“ä½œå¿…é¡»éµå¾ªå‡¸æ€§çš„è§„åˆ™ã€‚
- en: The previous example works well for a gentle introduction to the *cvxpy* API.
    Letâ€™s now consider a bit more evolved problem on the same theme.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸Šé¢çš„ç¤ºä¾‹å¯¹äºæ¸©å’Œåœ°ä»‹ç» *cvxpy* API å¾ˆæœ‰å¸®åŠ©ã€‚ç°åœ¨è®©æˆ‘ä»¬è€ƒè™‘ä¸€ä¸ªä¸»é¢˜ç›¸åŒä½†ç¨å¾®å¤æ‚çš„ä¾‹å­ã€‚
- en: 3.2 Medium Example
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.2 ä¸­ç­‰ç¤ºä¾‹
- en: 'Letâ€™s consider again the same 4 containers with same costs and conditions.
    This time, the first and third container are going to destination â€œ0â€ whereas
    second and fourth containers must go to destine â€œ1â€ and available spaces are the
    same as before ([2, 1]). The input weâ€™d get for this problem is something like
    this:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å†æ¬¡è€ƒè™‘ç›¸åŒçš„ 4 ä¸ªå®¹å™¨ï¼Œè´¹ç”¨å’Œæ¡ä»¶ç›¸åŒã€‚è¿™æ¬¡ï¼Œç¬¬ä¸€å’Œç¬¬ä¸‰ä¸ªå®¹å™¨å°†è¿å¾€ç›®çš„åœ° â€œ0â€ï¼Œè€Œç¬¬äºŒå’Œç¬¬å››ä¸ªå®¹å™¨å¿…é¡»è¿å¾€ç›®çš„åœ° â€œ1â€ï¼Œå¹¶ä¸”å¯ç”¨ç©ºé—´ä¸ä¹‹å‰ç›¸åŒï¼ˆ[2,
    1]ï¼‰ã€‚æˆ‘ä»¬ä¸ºæ­¤é—®é¢˜å¾—åˆ°çš„è¾“å…¥å¤§è‡´å¦‚ä¸‹ï¼š
- en: '![](../Images/0f2cdb29fbc489646b636f49b2111817.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0f2cdb29fbc489646b636f49b2111817.png)'
- en: Containers in rows, cost and destination in columns. Image by author.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: è¡Œä¸­çš„å®¹å™¨ï¼Œåˆ—ä¸­çš„æˆæœ¬å’Œç›®çš„åœ°ã€‚å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚
- en: 'All containers are produced on the same factory but this time there are 2 options
    to choose from for transportation: train and trucks, with respective costs [$50,
    $70]. For this considered week, weâ€™ll be able to allocate at maximum 2 containers
    on train.'
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€æœ‰å®¹å™¨éƒ½æ˜¯åœ¨åŒä¸€å®¶å·¥å‚ç”Ÿäº§çš„ï¼Œä½†è¿™æ¬¡æœ‰ 2 ç§è¿è¾“æ–¹å¼å¯ä¾›é€‰æ‹©ï¼šç«è½¦å’Œå¡è½¦ï¼Œåˆ†åˆ«å¯¹åº”çš„è´¹ç”¨æ˜¯ [$50, $70]ã€‚å¯¹äºè¿™ä¸€å‘¨ï¼Œæˆ‘ä»¬æœ€å¤šåªèƒ½å°† 2 ä¸ªå®¹å™¨åˆ†é…åˆ°ç«è½¦ä¸Šã€‚
- en: 'Before moving on, think about how you would solve this one. Remember the essential
    steps recommended for working with Linear Programming:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç»§ç»­ä¹‹å‰ï¼Œæ€è€ƒä¸€ä¸‹ä½ å°†å¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ã€‚è®°ä½ï¼Œä½¿ç”¨çº¿æ€§è§„åˆ’æ—¶æ¨èçš„åŸºæœ¬æ­¥éª¤ï¼š
- en: What are the variables required to describe the problem? `x_shippers = ...`
  id: totrans-87
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æè¿°è¿™ä¸ªé—®é¢˜éœ€è¦å“ªäº›å˜é‡ï¼Ÿ`x_shippers = ...`
- en: How to express the cost function? `cost = ...`
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚ä½•è¡¨è¾¾æˆæœ¬å‡½æ•°ï¼Ÿ`cost = ...`
- en: How to use constraints expressed through matrices and mathematical operations
    (that follows DCP) to formulate the whole problem? `destines <= x_shippers...`
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¦‚ä½•ä½¿ç”¨é€šè¿‡çŸ©é˜µå’Œæ•°å­¦è¿ç®—ï¼ˆç¬¦åˆ DCPï¼‰çš„çº¦æŸæ¥æ„å»ºæ•´ä¸ªé—®é¢˜ï¼Ÿ`destines <= x_shippers...`
- en: (you can also use Colab for trying it out)
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: ï¼ˆä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ Colab è¿›è¡Œå°è¯•ï¼‰
- en: â€¦
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: 'Hereâ€™s one possible solution:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ä¸€ä¸ªå¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼š
- en: 'Overall it follows the same structure as before. Some notes about the code:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: æ€»ä½“ä¸Šï¼Œå®ƒéµå¾ªä¸ä¹‹å‰ç›¸åŒçš„ç»“æ„ã€‚å…³äºä»£ç çš„ä¸€äº›è¯´æ˜ï¼š
- en: Now we are optimizing two variables, `x_shippers` and `x_transport`.
  id: totrans-105
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬æ­£åœ¨ä¼˜åŒ–ä¸¤ä¸ªå˜é‡ï¼Œ`x_shippers` å’Œ `x_transport`ã€‚
- en: We use mappers for trains and for linking shippers to their destination. The
    name of the mappers variables start, by our convention, as the name of the variable
    in the rows space and then the columns one. For instance, `destine_shippers` means
    that rows represents destines and columns the shippers.
  id: totrans-106
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä½¿ç”¨æ˜ å°„å™¨æ¥å¤„ç†ç«è½¦å’Œå°†æ‰¿è¿äººé“¾æ¥åˆ°å…¶ç›®çš„åœ°ã€‚æ ¹æ®æˆ‘ä»¬çš„çº¦å®šï¼Œæ˜ å°„å™¨å˜é‡çš„åç§°é€šå¸¸ä»è¡Œç©ºé—´ä¸­çš„å˜é‡åå¼€å§‹ï¼Œç„¶åæ˜¯åˆ—ç©ºé—´ã€‚ä¾‹å¦‚ï¼Œ`destine_shippers`
    è¡¨ç¤ºè¡Œä»£è¡¨ç›®çš„åœ°ï¼Œåˆ—ä»£è¡¨æ‰¿è¿äººã€‚
- en: 'In specific, the result of the line `dest_ships_arr = destine_shippers_map[containers[:,
    1]]` is a matrix with 4 rows whose lines contains the ships that attend the destinations
    of the respective containers. To make it more clear:'
  id: totrans-107
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: å…·ä½“æ¥è¯´ï¼Œ`dest_ships_arr = destine_shippers_map[containers[:, 1]]` è¿™ä¸€è¡Œçš„ç»“æœæ˜¯ä¸€ä¸ªåŒ…å« 4
    è¡Œçš„çŸ©é˜µï¼Œæ¯ä¸€è¡ŒåŒ…å«è´Ÿè´£è¿é€ç›¸åº”å®¹å™¨ç›®çš„åœ°çš„èˆ¹åªã€‚ä¸ºäº†æ›´æ¸…æ¥šåœ°è¯´æ˜ï¼š
- en: '![](../Images/21da9318f47e715e0fee80b97c4aff47.png)'
  id: totrans-108
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/21da9318f47e715e0fee80b97c4aff47.png)'
- en: destine_shippers_map matrix transforms the input containers into an array indicating
    for each container which shippers are appropriate for the transportation. Image
    by author.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '`destine_shippers_map` çŸ©é˜µå°†è¾“å…¥å®¹å™¨è½¬æ¢ä¸ºä¸€ä¸ªæ•°ç»„ï¼Œè¡¨ç¤ºæ¯ä¸ªå®¹å™¨é€‚åˆçš„æ‰¿è¿äººã€‚å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚'
- en: 'Mappers allows input data to be used on constraints and the cost function.
    In the previous example, the optimizer is restricted to only assign shipper 0
    to the first container and shipper 1 to the second, for instance. This is implemented
    as: `constraint02 = x_shippers <= dest_ships_arr` .'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜ å°„å™¨å…è®¸å°†è¾“å…¥æ•°æ®åº”ç”¨äºçº¦æŸå’Œæˆæœ¬å‡½æ•°ã€‚åœ¨å‰é¢çš„ä¾‹å­ä¸­ï¼Œä¼˜åŒ–å™¨è¢«é™åˆ¶åªèƒ½å°†æ‰¿è¿äºº 0 åˆ†é…ç»™ç¬¬ä¸€ä¸ªå®¹å™¨ï¼Œå°†æ‰¿è¿äºº 1 åˆ†é…ç»™ç¬¬äºŒä¸ªå®¹å™¨ï¼Œä¾‹å¦‚ã€‚è¿™æ˜¯é€šè¿‡ä»¥ä¸‹ä»£ç å®ç°çš„ï¼š`constraint02
    = x_shippers <= dest_ships_arr`ã€‚
- en: 'Similar technique is used in: `constraint11 = cx.sum(x_transports @ train_map.T)
    <= 2)`, the dot matrix operation tracks all transports associated to trains. Final
    summation is equivalent to all containers that were assigned to trains, which
    must be lower or equal to 2.'
  id: totrans-111
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ç±»ä¼¼æŠ€æœ¯çš„åœ°æ–¹æœ‰ï¼š`constraint11 = cx.sum(x_transports @ train_map.T) <= 2)`ï¼ŒçŸ©é˜µç‚¹ç§¯æ“ä½œè·Ÿè¸ªæ‰€æœ‰ä¸ç«è½¦ç›¸å…³çš„è¿è¾“ã€‚æœ€ç»ˆçš„æ€»å’Œç­‰åŒäºåˆ†é…ç»™ç«è½¦çš„æ‰€æœ‰å®¹å™¨ï¼Œå¿…é¡»å°äºæˆ–ç­‰äº
    2ã€‚
- en: Constraints receive two numbers (â€œ00â€ or â€œ10â€) for instance. This is to group
    all constraints for a particular theme. In this example, the first 0 relates to
    all constraints regarding ships and 1 relates to transport. We do so because if
    later on we need to increase the number of constraints then we can just add new
    numbers after â€œ0â€ and extends the final array.
  id: totrans-112
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: çº¦æŸæ¡ä»¶ä¼šæ¥æ”¶ä¸¤ä¸ªæ•°å­—ï¼ˆä¾‹å¦‚ï¼šâ€œ00â€ æˆ– â€œ10â€ï¼‰ã€‚è¿™æ˜¯ä¸ºäº†å°†æ‰€æœ‰çº¦æŸæŒ‰ç‰¹å®šä¸»é¢˜è¿›è¡Œåˆ†ç»„ã€‚åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œç¬¬ä¸€ä¸ª 0 ä»£è¡¨æ‰€æœ‰å…³äºèˆ¹åªçš„çº¦æŸï¼Œ1 ä»£è¡¨è¿è¾“ã€‚æˆ‘ä»¬è¿™æ ·åšæ˜¯å› ä¸ºï¼Œå¦‚æœä»¥åéœ€è¦å¢åŠ çº¦æŸçš„æ•°é‡ï¼Œåªéœ€åœ¨â€œ0â€åæ·»åŠ æ–°æ•°å­—ï¼Œå¹¶æ‰©å±•æœ€ç»ˆçš„æ•°ç»„ã€‚
- en: 'Final solution is: `x_shippers = [[1, 0], [0, 0], [1, 0], [0, 1]` and `x_transport
    = [[1, 0], [0, 0], [1, 0], [0, 1]` (both equal by coincidence). The optimizer
    didnâ€™t route the second container as thereâ€™s only 3 total spaces on ships. First
    container goes to shipper 0 by train so does the third and last container goes
    to shipper 1 by truck.'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€ç»ˆè§£æ˜¯ï¼š`x_shippers = [[1, 0], [0, 0], [1, 0], [0, 1]]` å’Œ `x_transport = [[1, 0],
    [0, 0], [1, 0], [0, 1]]`ï¼ˆä¸¤ä¸ªç»“æœå·§åˆç›¸ç­‰ï¼‰ã€‚ä¼˜åŒ–å™¨æ²¡æœ‰ä¸ºç¬¬äºŒä¸ªé›†è£…ç®±åˆ†é…èˆªè¿å•†ï¼Œå› ä¸ºèˆ¹ä¸Šæ€»å…±åªæœ‰ 3 ä¸ªä½ç½®ã€‚ç¬¬ä¸€ä¸ªé›†è£…ç®±é€šè¿‡ç«è½¦è¿é€åˆ°èˆªè¿å•†
    0ï¼Œç¬¬ä¸‰ä¸ªé›†è£…ç®±ä¹Ÿæ˜¯å¦‚æ­¤ï¼Œæœ€åä¸€ä¸ªé›†è£…ç®±é€šè¿‡å¡è½¦è¿é€åˆ°èˆªè¿å•† 1ã€‚
- en: Letâ€™s now step it up a notch a bit and increase the challenge now.
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è®©æˆ‘ä»¬ç¨å¾®æå‡éš¾åº¦ï¼Œå¢åŠ ä¸€äº›æŒ‘æˆ˜ã€‚
- en: 3.3 Complete Example
  id: totrans-115
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.3 å®Œæ•´ç¤ºä¾‹
- en: 'Letâ€™s use the same example as before but now add another variable: the docks.
    Now, the factory can transport the containers to two possible available docks.
    Trains and trucks can reach *Dock 0* with costs [$50, $70] and *Dock 1* can be
    reached only by trucks with cost $60\. Both shippers attend both docks with same
    costs.'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä½¿ç”¨ä¹‹å‰çš„ç¤ºä¾‹ï¼Œä½†ç°åœ¨å¢åŠ ä¸€ä¸ªæ–°å˜é‡ï¼šç å¤´ã€‚ç°åœ¨ï¼Œå·¥å‚å¯ä»¥å°†é›†è£…ç®±è¿è¾“åˆ°ä¸¤ä¸ªå¯ç”¨çš„ç å¤´ã€‚ç«è½¦å’Œå¡è½¦å¯ä»¥åˆ°è¾¾*ç å¤´ 0*ï¼Œè´¹ç”¨åˆ†åˆ«ä¸º[$50, $70]ï¼Œè€Œ*ç å¤´
    1* åªèƒ½é€šè¿‡å¡è½¦åˆ°è¾¾ï¼Œè´¹ç”¨ä¸º$60ã€‚ä¸¤ä¸ªèˆªè¿å•†éƒ½èƒ½ä»¥ç›¸åŒè´¹ç”¨åˆ°è¾¾ä¸¤ä¸ªç å¤´ã€‚
- en: How would you solve this problem?
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ ä¼šå¦‚ä½•è§£å†³è¿™ä¸ªé—®é¢˜ï¼Ÿ
- en: Youâ€™ll probably realize that this simple addition of the docks variables make
    things more challenging. Many attempts to connect docks and transportation leas
    to *DCPErrors*. See if you can find strategies to guarantee their modeling as
    expected.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯èƒ½ä¼šæ„è¯†åˆ°ï¼Œæ·»åŠ ç å¤´å˜é‡ä½¿å¾—é—®é¢˜å˜å¾—æ›´åŠ å¤æ‚ã€‚è®¸å¤šè¿æ¥ç å¤´å’Œè¿è¾“çš„å°è¯•ä¼šå¯¼è‡´*DCPErrors*ã€‚çœ‹çœ‹ä½ æ˜¯å¦èƒ½æ‰¾åˆ°ç­–ç•¥ï¼Œç¡®ä¿å®ƒä»¬çš„å»ºæ¨¡æŒ‰é¢„æœŸè¿›è¡Œã€‚
- en: â€¦
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦
- en: â€¦.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦.
- en: â€¦.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦.
- en: â€¦.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦.
- en: â€¦.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦.
- en: â€¦.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦.
- en: â€¦.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦.
- en: â€¦.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: â€¦.
- en: 'Did you succeed? Hereâ€™s one possible solution:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ æˆåŠŸäº†å—ï¼Ÿè¿™æ˜¯ä¸€ä¸ªå¯èƒ½çš„è§£å†³æ–¹æ¡ˆï¼š
- en: Itâ€™s equivalent to the previous example for the most part. But notice now that
    we have the AND variables which links the variables docks and transports.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™åœ¨å¤§å¤šæ•°æƒ…å†µä¸‹ä¸ä¹‹å‰çš„ç¤ºä¾‹ç›¸ç­‰ã€‚ä½†è¯·æ³¨æ„ï¼Œç°åœ¨æˆ‘ä»¬å¼•å…¥äº† AND å˜é‡ï¼Œå®ƒå°†ç å¤´å’Œè¿è¾“å˜é‡è¿æ¥èµ·æ¥ã€‚
- en: 'Main point is: when the optimizer selects a value for `x_transport` it ends
    up affecting the choices available for `x_docks`. But when it chooses the dock
    **it also affects the transport in return!** In order to solve this problem, we
    implement AND variables such that the optimizer discerns the impact of its decisions
    at the same time.'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: å…³é”®ç‚¹æ˜¯ï¼šå½“ä¼˜åŒ–å™¨ä¸º `x_transport` é€‰æ‹©ä¸€ä¸ªå€¼æ—¶ï¼Œæœ€ç»ˆä¼šå½±å“ `x_docks` çš„é€‰æ‹©ã€‚ç„¶è€Œï¼Œå½“å®ƒé€‰æ‹©äº†ç å¤´**å®ƒä¹Ÿä¼šåè¿‡æ¥å½±å“è¿è¾“ï¼**
    ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬å¼•å…¥äº† AND å˜é‡ï¼Œä½¿ä¼˜åŒ–å™¨èƒ½å¤ŸåŒæ—¶è¾¨åˆ«å…¶å†³ç­–çš„å½±å“ã€‚
- en: 'This is implemented first with the y variable: `y_docks_and_transp = cx.Variable((4,
    4), boolean=True, name="docks AND transportations")`. This variable will be also
    updated by the optimizer but weâ€™ll force it to be the `AND` combination between
    two other data sources, as weâ€™ll see soon. The technique we used creates a template
    on columns as a reference, i.e., it combines, in this case, docks and transports:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸€å®ç°é¦–å…ˆé€šè¿‡ y å˜é‡å®Œæˆï¼š`y_docks_and_transp = cx.Variable((4, 4), boolean=True, name="docks
    AND transportations")`ã€‚è¿™ä¸ªå˜é‡ä¹Ÿä¼šè¢«ä¼˜åŒ–å™¨æ›´æ–°ï¼Œä½†æˆ‘ä»¬å°†å¼ºåˆ¶å®ƒæˆä¸ºä¸¤ä¸ªå…¶ä»–æ•°æ®æºçš„ `AND` ç»„åˆï¼Œæ­£å¦‚æˆ‘ä»¬æ¥ä¸‹æ¥ä¼šçœ‹åˆ°çš„é‚£æ ·ã€‚æˆ‘ä»¬ä½¿ç”¨çš„æŠ€æœ¯é€šè¿‡åˆ—æ¨¡æ¿ä½œä¸ºå‚è€ƒï¼Œå°†ç å¤´å’Œè¿è¾“ç›¸ç»“åˆï¼š
- en: '![](../Images/b69fc16b735bed79ebcd1dddbc187c46.png)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b69fc16b735bed79ebcd1dddbc187c46.png)'
- en: The AND variables used combine two variables, in this case, docks and transports.
    Image by author.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨çš„ AND å˜é‡å°†ä¸¤ä¸ªå˜é‡ç»“åˆèµ·æ¥ï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯ç å¤´å’Œè¿è¾“ã€‚å›¾åƒç”±ä½œè€…æä¾›ã€‚
- en: The columns will be a tree like structure. As in the variable name `"y_docks_and_transpâ€`
    the first name to appear is `"docksâ€` then it means that docks will be the first
    reference and then transports will follow, as shown above. Taking the second row
    as an example, thereâ€™s a value â€œ1â€ at the second column. This means that it selects
    Dock 0 and Transport 1 (truck).
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›åˆ—å°†å‘ˆç°æ ‘å½¢ç»“æ„ã€‚æ­£å¦‚å˜é‡åç§° `"y_docks_and_transp"` æ‰€ç¤ºï¼Œé¦–å…ˆå‡ºç°çš„åç§°æ˜¯ `"docks"`ï¼Œè¿™æ„å‘³ç€ç å¤´å°†æ˜¯ç¬¬ä¸€ä¸ªå‚è€ƒï¼Œç„¶åè¿è¾“ä¼šéšä¹‹è·Ÿè¿›ï¼Œå¦‚ä¸Šæ‰€ç¤ºã€‚ä»¥ç¬¬äºŒè¡Œä¸ºä¾‹ï¼Œç¬¬äºŒåˆ—çš„å€¼æ˜¯â€œ1â€ã€‚è¿™æ„å‘³ç€å®ƒé€‰æ‹©äº†ç å¤´
    0 å’Œè¿è¾“æ–¹å¼ 1ï¼ˆå¡è½¦ï¼‰ã€‚
- en: 'With this template we can create other data and constraints that work on both
    dock and transport variables at the same time. For instance, hereâ€™s how we specify
    costs: `transport_and_dock_costs = np.array([[50, 70, 0, 60]])` , which means
    Dock 0 and Transport 0 (train) costs $50 for instance.'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™ä¸ªæ¨¡æ¿ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºå…¶ä»–åŒæ—¶ä½œç”¨äºç å¤´å’Œè¿è¾“å˜é‡çš„æ•°æ®å’Œçº¦æŸã€‚ä¾‹å¦‚ï¼Œè¿™é‡Œæ˜¯æˆ‘ä»¬å¦‚ä½•æŒ‡å®šè´¹ç”¨çš„ï¼š`transport_and_dock_costs
    = np.array([[50, 70, 0, 60]])`ï¼Œè¿™æ„å‘³ç€ç å¤´ 0 å’Œè¿è¾“å·¥å…· 0ï¼ˆç«è½¦ï¼‰çš„è´¹ç”¨ä¸º $50ã€‚
- en: 'The optimizer can use the template to transpose each x variable to the docks
    and transportation setting. For doing so, we used the mappers as follows:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: ä¼˜åŒ–å™¨å¯ä»¥ä½¿ç”¨æ¨¡æ¿å°†æ¯ä¸ª `x` å˜é‡è½¬ç½®åˆ°ç å¤´å’Œè¿è¾“è®¾ç½®ä¸­ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†å¦‚ä¸‹çš„æ˜ å°„å™¨ï¼š
- en: '![](../Images/8874df58b7448fd7c66dc8a8cc12d71e.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/8874df58b7448fd7c66dc8a8cc12d71e.png)'
- en: Left image is the mapping that takes x_transport variable to dock_AND_transp
    map. On the right, it maps x_docks to docks_AND_transp as well. Image by author.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: å·¦å›¾æ˜¯å°† `x_transport` å˜é‡æ˜ å°„åˆ° `dock_AND_transp` æ˜ å°„çš„è¿‡ç¨‹ã€‚å³å›¾åˆ™æ˜¯å°† `x_docks` æ˜ å°„åˆ° `docks_AND_transp`ã€‚å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚
- en: 'If the optimizer chooses transport 0 then itâ€™s mapped to the first row of the
    left image. Remember that trains do not attend Dock 1 so thatâ€™s why itâ€™s a â€œ0â€
    at the third column. Also, notice that the name of the variables also follows
    a pattern: `transp_dock_transp_map` means that rows represent the transports and
    it maps to the AND conjunction between docks and transports, where docks comes
    first.'
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä¼˜åŒ–å™¨é€‰æ‹©è¿è¾“æ–¹å¼ 0ï¼Œé‚£ä¹ˆå®ƒä¼šæ˜ å°„åˆ°å·¦å›¾çš„ç¬¬ä¸€è¡Œã€‚è¯·è®°ä½ï¼Œç«è½¦ä¸ä¼šå‰å¾€ç å¤´ 1ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆåœ¨ç¬¬ä¸‰åˆ—ä¸­æ˜¯â€œ0â€çš„åŸå› ã€‚æ­¤å¤–ï¼Œæ³¨æ„å˜é‡çš„åç§°ä¹Ÿéµå¾ªä¸€ç§æ¨¡å¼ï¼š`transp_dock_transp_map`
    è¡¨ç¤ºè¡Œä»£è¡¨è¿è¾“å·¥å…·ï¼Œå¹¶ä¸”å®ƒæ˜ å°„åˆ°ç å¤´å’Œè¿è¾“å·¥å…·ä¹‹é—´çš„ AND è¿æ¥ï¼Œå…¶ä¸­ç å¤´æ’åœ¨å‰é¢ã€‚
- en: 'This is where we use `y_docks_and_transp` . When the optimizer changes the
    `x` variables we map it to the domain of docks and transports. But then we need
    to combine both mappings to know exactly which point corresponds the dock AND
    the transport variables:'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯æˆ‘ä»¬ä½¿ç”¨ `y_docks_and_transp` çš„åœ°æ–¹ã€‚å½“ä¼˜åŒ–å™¨æ›´æ”¹ `x` å˜é‡æ—¶ï¼Œæˆ‘ä»¬å°†å…¶æ˜ å°„åˆ°ç å¤´å’Œè¿è¾“é¢†åŸŸã€‚ä½†éšåï¼Œæˆ‘ä»¬éœ€è¦å°†ä¸¤ä¸ªæ˜ å°„ç»“åˆèµ·æ¥ï¼Œä»¥å‡†ç¡®çŸ¥é“å“ªä¸ªç‚¹å¯¹åº”ç å¤´å’Œè¿è¾“å˜é‡çš„
    ANDï¼š
- en: '![](../Images/df1fd6f7697ef3aa218d18c7eb98f17d.png)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/df1fd6f7697ef3aa218d18c7eb98f17d.png)'
- en: The image may seen daunting but itâ€™s quite simple. First we have the x variables
    and the dot operation (â€œ@â€) which maps x to docks and transports domain. We then
    force an AND operation to find y_docks_and_transps. Image by author.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å¼ å›¾çœ‹èµ·æ¥å¯èƒ½å¾ˆå“äººï¼Œä½†å…¶å®ç›¸å½“ç®€å•ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ `x` å˜é‡å’Œç‚¹æ“ä½œç¬¦ï¼ˆâ€œ@â€ï¼‰ï¼Œå®ƒå°† `x` æ˜ å°„åˆ°ç å¤´å’Œè¿è¾“é¢†åŸŸã€‚ç„¶åï¼Œæˆ‘ä»¬å¼ºåˆ¶æ‰§è¡Œ AND
    æ“ä½œæ¥æ‰¾å‡º `y_docks_and_transps`ã€‚å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚
- en: 'As the image above shows, first we transpose the x variables to the dock and
    transport domain. We then take the results and apply an AND operation to find
    specifically, for each container, which docker AND transport were chosen:'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œé¦–å…ˆæˆ‘ä»¬å°† `x` å˜é‡è½¬ç½®åˆ°ç å¤´å’Œè¿è¾“é¢†åŸŸã€‚ç„¶åï¼Œæˆ‘ä»¬è·å–ç»“æœå¹¶åº”ç”¨ AND æ“ä½œï¼Œä¸“é—¨æ‰¾å‡ºæ¯ä¸ªå®¹å™¨çš„ç å¤´å’Œè¿è¾“å·¥å…·é€‰æ‹©ï¼š
- en: '![](../Images/daa3a7baecd3d0d7526eeac54c141b83.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/daa3a7baecd3d0d7526eeac54c141b83.png)'
- en: Result of the AND operation. Image by author.
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: AND æ“ä½œçš„ç»“æœã€‚å›¾ç‰‡ç”±ä½œè€…æä¾›ã€‚
- en: First row means the optimizer chose Dock 0 and Train. Second row means it chose
    Dock 1 and Truck. Notice that as Dock 1 is not connected with Train then third
    column will never be â€œ1â€ so this solves the problem of valid connections as well.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€è¡Œæ„å‘³ç€ä¼˜åŒ–å™¨é€‰æ‹©äº†ç å¤´ 0 å’Œç«è½¦ã€‚ç¬¬äºŒè¡Œæ„å‘³ç€å®ƒé€‰æ‹©äº†ç å¤´ 1 å’Œå¡è½¦ã€‚è¯·æ³¨æ„ï¼Œç”±äºç å¤´ 1 ä¸ä¸ç«è½¦è¿æ¥ï¼Œå› æ­¤ç¬¬ä¸‰åˆ—æ°¸è¿œä¸ä¼šæ˜¯â€œ1â€ï¼Œè¿™ä¹Ÿè§£å†³äº†æœ‰æ•ˆè¿æ¥çš„é—®é¢˜ã€‚
- en: 'Well, but this is not that simple actually as most attempts to implement this
    AND operation raises *DCPError*. To solve it, we used helper constraints:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†æ˜¯ï¼Œå®é™…ä¸Šè¿™å¹¶ä¸åƒçœ‹èµ·æ¥é‚£ä¹ˆç®€å•ï¼Œå› ä¸ºå¤§å¤šæ•°å°è¯•å®ç°è¿™ä¸ª AND æ“ä½œéƒ½ä¼šå¼•å‘ *DCPError*ã€‚ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬ä½¿ç”¨äº†è¾…åŠ©çº¦æŸï¼š
- en: '[PRE1]'
  id: totrans-151
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: By doing so, `y_docks_and_transp` is forced to be â€œ1â€ only at points where `x1`
    AND `x2` are â€œ1â€ as well. This technique can be used when an AND operation is
    required.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡è¿™æ ·åšï¼Œ`y_docks_and_transp` è¢«å¼ºåˆ¶åœ¨ `x1` å’Œ `x2` éƒ½æ˜¯â€œ1â€çš„æ—¶å€™æ‰æ˜¯â€œ1â€ã€‚å½“éœ€è¦è¿›è¡Œ AND æ“ä½œæ—¶ï¼Œå¯ä»¥ä½¿ç”¨æ­¤æŠ€æœ¯ã€‚
- en: '`constraint15` is a safety clause to guarantee that only routed containers
    will remain.'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: '`constraint15` æ˜¯ä¸€ä¸ªå®‰å…¨æ¡æ¬¾ï¼Œä¿è¯åªæœ‰å·²è·¯ç”±çš„å®¹å™¨ä¼šè¢«ä¿ç•™ã€‚'
- en: 'Hereâ€™s the final values of x and y:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ `x` å’Œ `y` çš„æœ€ç»ˆå€¼ï¼š
- en: '[PRE2]'
  id: totrans-155
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: First container goes to first shipper by train on Dock 0 and second container
    remained at the factory.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€ä¸ªå®¹å™¨é€šè¿‡ç«è½¦é€åˆ°ç å¤´ 0 çš„ç¬¬ä¸€ä¸ªæ‰˜è¿äººï¼Œç¬¬äºŒä¸ªå®¹å™¨åˆ™ç•™åœ¨äº†å·¥å‚ã€‚
- en: With all the examples and the ideas discussed, we can finally solve the challenge
    the company offered us. Letâ€™s tackle it down now!
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡æ‰€æœ‰çš„ç¤ºä¾‹å’Œè®¨è®ºçš„æ€è·¯ï¼Œæˆ‘ä»¬æœ€ç»ˆå¯ä»¥è§£å†³å…¬å¸æå‡ºçš„æŒ‘æˆ˜ã€‚è®©æˆ‘ä»¬ç°åœ¨æ¥è§£å†³å®ƒå§ï¼
- en: 4\. Final Challenge
  id: totrans-158
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 4. æœ€ç»ˆæŒ‘æˆ˜
- en: 4.1 Input Data
  id: totrans-159
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.1 è¾“å…¥æ•°æ®
- en: 'We received information about shippers, transportation and their respective
    freights:'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æ”¶åˆ°äº†æœ‰å…³æ‰˜è¿äººã€è¿è¾“æ–¹å¼åŠå…¶å„è‡ªè´§è¿çš„ä¿¡æ¯ï¼š
- en: From the first table, we obtain that transporting a container from F*actory
    0* to the dock located at *Santos* by R*oad* (truck)using T*hird Party* contract
    costs *$6000*. Also, *Shipper 0* can take the container to *Hong Kong* through
    the *Far East* trade charging *$8000* per container.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: ä»ç¬¬ä¸€ä¸ªè¡¨æ ¼ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥å¾—å‡ºï¼Œä½¿ç”¨**å…¬è·¯**ï¼ˆå¡è½¦ï¼‰å°†ä¸€ä¸ªé›†è£…ç®±ä»**å·¥å‚ 0**è¿é€åˆ°ä½äº**æ¡‘æ‰˜æ–¯**çš„ç å¤´ï¼Œé€šè¿‡**ç¬¬ä¸‰æ–¹**åˆåŒçš„è¿è¾“è´¹ç”¨ä¸º**$6000**ã€‚æ­¤å¤–ï¼Œ**Shipper
    0**å¯ä»¥é€šè¿‡**è¿œä¸œ**è´¸æ˜“å°†é›†è£…ç®±è¿é€åˆ°**é¦™æ¸¯**ï¼Œæ¯ä¸ªé›†è£…ç®±æ”¶è´¹**$8000**ã€‚
- en: 'As for spaces on shippers, we got something like this:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºå‘è´§äººç©ºé—´ï¼Œæˆ‘ä»¬å¾—åˆ°äº†å¦‚ä¸‹æ•°æ®ï¼š
- en: Each shipper can attend certain trades (and therefore a group of countries)
    and the spaces they have on the ship varies on a weekly basis, as depicted by
    the numbers from 1 to 52.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯ä¸ªå‘è´§äººå¯ä»¥å‚ä¸ç‰¹å®šçš„è´¸æ˜“ï¼ˆå› æ­¤ï¼Œæ¶‰åŠä¸€ç»„å›½å®¶ï¼‰ï¼Œå¹¶ä¸”ä»–ä»¬åœ¨èˆ¹ä¸Šçš„ç©ºé—´æ¯å‘¨éƒ½ä¼šå˜åŒ–ï¼Œæ•°å­—ä»1åˆ°52è¡¨ç¤ºã€‚
- en: 'And finally, the list of containers, the factory they were made, its destination
    and net worth:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åæ˜¯é›†è£…ç®±çš„åˆ—è¡¨ï¼ŒåŒ…æ‹¬å®ƒä»¬çš„åˆ¶é€ å·¥å‚ã€ç›®çš„åœ°å’Œå‡€å€¼ï¼š
- en: Notice that the last columns are basically the final result we are looking for.
    The goal of the algorithm is to find the set of shippers and their transportation
    minimizing freight costs while following some restrictions.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: è¯·æ³¨æ„ï¼Œæœ€åå‡ åˆ—åŸºæœ¬ä¸Šå°±æ˜¯æˆ‘ä»¬æ‰€å¯»æ‰¾çš„æœ€ç»ˆç»“æœã€‚ç®—æ³•çš„ç›®æ ‡æ˜¯æ‰¾åˆ°ä¸€ç»„å‘è´§äººåŠå…¶è¿è¾“æ–¹å¼ï¼Œæœ€å°åŒ–è¿è´¹æˆæœ¬ï¼ŒåŒæ—¶éµå¾ªä¸€äº›é™åˆ¶æ¡ä»¶ã€‚
- en: We also received another table related to the timings associated to each transportation
    and shipper but as discussed before it wonâ€™t be used in this post.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿˜æ”¶åˆ°äº†ä¸€å¼ ä¸æ¯ä¸ªè¿è¾“å’Œå‘è´§äººç›¸å…³çš„æ—¶é—´è¡¨ï¼Œä½†æ­£å¦‚ä¹‹å‰æ‰€è®¨è®ºçš„ï¼Œè¿™ç¯‡æ–‡ç« ä¸­ä¸ä¼šä½¿ç”¨å®ƒã€‚
- en: 'This data needs to turn into matrices that we can use later on. This is actually
    quite simple. Letâ€™s take shippers as an example: when reading the file containing
    data about shippers, we associate each new shipper to a counter value that keeps
    increasing as more ships are added in:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›æ•°æ®éœ€è¦è½¬æ¢æˆçŸ©é˜µï¼Œä¾›åç»­ä½¿ç”¨ã€‚è¿™å…¶å®éå¸¸ç®€å•ã€‚ä»¥å‘è´§äººä¸ºä¾‹ï¼šå½“è¯»å–åŒ…å«å‘è´§äººæ•°æ®çš„æ–‡ä»¶æ—¶ï¼Œæˆ‘ä»¬å°†æ¯ä¸ªæ–°å‘è´§äººä¸ä¸€ä¸ªè®¡æ•°å€¼å…³è”ï¼Œéšç€æ›´å¤šçš„èˆ¹åªåŠ å…¥ï¼Œè®¡æ•°å€¼ä¼šä¸æ–­å¢åŠ ï¼š
- en: '![](../Images/90a883b77ed8cd7d84dab80e3c7e522e.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/90a883b77ed8cd7d84dab80e3c7e522e.png)'
- en: Example of how shippers files is read. As new shippers are processed, the counter
    keeps increasing such that index â€œ0â€ means shipper 0 and so on. Image by author.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: è¯»å–å‘è´§äººæ–‡ä»¶çš„ç¤ºä¾‹ã€‚éšç€æ–°å‘è´§äººçš„å¤„ç†ï¼Œè®¡æ•°å™¨ä¸æ–­å¢åŠ ï¼Œç´¢å¼•â€œ0â€ä»£è¡¨å‘è´§äºº0ï¼Œä¾æ­¤ç±»æ¨ã€‚å›¾åƒæ¥æºï¼šä½œè€…ã€‚
- en: Now we know that on any matrix associated to shipper, if the result is â€œ0â€ index
    then it means it refers to â€œShipper 0â€ and so on. Every component in our model
    (ports, transportation, factories) follows the same idea.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬çŸ¥é“ï¼Œä»»ä½•ä¸å‘è´§äººç›¸å…³çš„çŸ©é˜µï¼Œå¦‚æœç»“æœæ˜¯â€œ0â€ç´¢å¼•ï¼Œåˆ™æ„å‘³ç€å®ƒæŒ‡çš„æ˜¯â€œShipper 0â€ï¼Œä¾æ­¤ç±»æ¨ã€‚æˆ‘ä»¬æ¨¡å‹ä¸­çš„æ¯ä¸ªç»„ä»¶ï¼ˆæ¸¯å£ã€è¿è¾“ã€å·¥å‚ï¼‰éƒ½éµå¾ªç›¸åŒçš„æ€è·¯ã€‚
- en: Given the data, letâ€™s see the final solution.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: ç»™å®šæ•°æ®ï¼Œè®©æˆ‘ä»¬çœ‹çœ‹æœ€ç»ˆçš„è§£å†³æ–¹æ¡ˆã€‚
- en: 4.2 Solution
  id: totrans-172
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.2 è§£å†³æ–¹æ¡ˆ
- en: 'We already have the input data. The challenge now, specifically, is: how to
    route each container by choosing transportation, docks and shippers such that
    costs are minimized while following the constraints already discussed in this
    post?'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å·²ç»æœ‰äº†è¾“å…¥æ•°æ®ã€‚ç°åœ¨çš„æŒ‘æˆ˜ï¼Œç‰¹åˆ«æ˜¯ï¼Œå¦‚ä½•ä¸ºæ¯ä¸ªé›†è£…ç®±é€‰æ‹©åˆé€‚çš„è¿è¾“æ–¹å¼ã€ç å¤´å’Œå‘è´§äººï¼Œä»¥ä¾¿åœ¨éµå¾ªæœ¬æ–‡å·²ç»è®¨è®ºçš„çº¦æŸæ¡ä»¶ä¸‹æœ€å°åŒ–æˆæœ¬ï¼Ÿ
- en: 'The ideas presented on previous examples were a prelude of what the final solution
    looks like. Hereâ€™s how we solved this problem:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: å‰é¢ä¾‹å­ä¸­å‘ˆç°çš„æ€è·¯æ˜¯æœ€ç»ˆè§£å†³æ–¹æ¡ˆçš„åºå¹•ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬è§£å†³è¯¥é—®é¢˜çš„æ–¹æ³•ï¼š
- en: 'The function `optimize` receives as first parameter `data_models` where all
    data input from the company is processed and transformed into matrices that can
    be used by *cvxpy*. Specifically, the data input `containers` is a bit different
    from previous examples:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: å‡½æ•°`optimize`æ¥æ”¶ç¬¬ä¸€ä¸ªå‚æ•°`data_models`ï¼Œå…¶ä¸­åŒ…å«æ¥è‡ªå…¬å¸æ‰€æœ‰çš„è¾“å…¥æ•°æ®ï¼Œè¿™äº›æ•°æ®è¢«å¤„ç†å¹¶è½¬æ¢æˆå¯ä»¥è¢«*cvxpy*ä½¿ç”¨çš„çŸ©é˜µã€‚å…·ä½“è€Œè¨€ï¼Œè¾“å…¥æ•°æ®`containers`ä¸ä¹‹å‰çš„ä¾‹å­ç•¥æœ‰ä¸åŒï¼š
- en: '![](../Images/3f8b642078389e35f315f02a01d75a48.png)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3f8b642078389e35f315f02a01d75a48.png)'
- en: Variable containers, first column represents factories, second represents destine
    and third the value of containers. Image by author.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: å˜é‡å®¹å™¨ï¼Œç¬¬ä¸€åˆ—ä»£è¡¨å·¥å‚ï¼Œç¬¬äºŒåˆ—ä»£è¡¨ç›®çš„åœ°ï¼Œç¬¬ä¸‰åˆ—ä»£è¡¨å®¹å™¨çš„æ•°é‡ã€‚å›¾åƒæ¥æºï¼šä½œè€…ã€‚
- en: 'The overall idea though is exactly the same. Points to consider:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: æ•´ä½“æ€è·¯å…¶å®æ˜¯å®Œå…¨ç›¸åŒçš„ã€‚éœ€è¦è€ƒè™‘çš„è¦ç‚¹ï¼š
- en: At line 72 the code `shipper_shipper_trade_arr = x_shippers @ shipper_shipper_and_trade_map.matrix`
    transforms the shippers choices to the domain of shippers and trades. By doing
    we can sum up the total containers allocated for each trade and shipper.
  id: totrans-179
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åœ¨ç¬¬72è¡Œï¼Œä»£ç `shipper_shipper_trade_arr = x_shippers @ shipper_shipper_and_trade_map.matrix`å°†å‘è´§äººçš„é€‰æ‹©è½¬æ¢åˆ°å‘è´§äººå’Œè´¸æ˜“çš„é¢†åŸŸã€‚é€šè¿‡è¿™æ ·åšï¼Œæˆ‘ä»¬å¯ä»¥æ±‡æ€»æ¯ä¸ªè´¸æ˜“å’Œå‘è´§äººåˆ†é…çš„é›†è£…ç®±æ€»æ•°ã€‚
- en: '`constr23` is designed to force overbooking if and only if the optimizer already
    consumed all spaces from shippers before. This is done by translating `x_ob_shippers`
    (â€œobâ€ means overbooking) into the shippers and trades domain:'
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`constr23` æ—¨åœ¨å¼ºåˆ¶è¿‡åº¦é¢„è®¢ï¼Œå‰ææ˜¯ä¼˜åŒ–å™¨å·²ç»æ¶ˆè€—äº†æ‰€æœ‰è´§è¿å•†çš„ç©ºé—´ã€‚é€šè¿‡å°† `x_ob_shippers`ï¼ˆ"ob" è¡¨ç¤ºè¿‡åº¦é¢„è®¢ï¼‰è½¬åŒ–ä¸ºè´§è¿å•†å’Œäº¤æ˜“é¢†åŸŸæ¥å®ç°ï¼š'
- en: '![](../Images/198432af76932f202378d54f6ad9b9f5.png)'
  id: totrans-181
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/198432af76932f202378d54f6ad9b9f5.png)'
- en: The x variable is translated into shippers and trades domain through the â€œ@â€
    (dot) operation. Then the `max` operation is carried over the columns which results
    in a mapping of which points corresponds to overbooking. Image by author.
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: x å˜é‡é€šè¿‡â€œ@â€ ï¼ˆç‚¹ï¼‰æ“ä½œç¬¦è½¬åŒ–ä¸ºè´§è¿å•†å’Œäº¤æ˜“é¢†åŸŸã€‚ç„¶åï¼Œ`max` æ“ä½œè¢«åº”ç”¨åˆ°å„åˆ—ä¸Šï¼Œç»“æœæ˜¯ç”Ÿæˆä¸€ä¸ªæ˜ å°„ï¼Œæ˜¾ç¤ºå“ªäº›ç‚¹å¯¹åº”äºè¿‡åº¦é¢„è®¢ã€‚å›¾åƒç”±ä½œè€…æä¾›ã€‚
- en: '`shipper_ob_trade_indices` works as a mapping for which points are overbooked.
    We then use this information to install `constr23` by saying that shippers at
    those points must be at maximum capacity. By doing so, we force the rule that
    overbooking should happen if and only if all regular spaces were already consumed.'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: '`shipper_ob_trade_indices` ä½œä¸ºä¸€ä¸ªæ˜ å°„ï¼Œç”¨äºæ˜¾ç¤ºå“ªäº›ç‚¹è¢«è¿‡åº¦é¢„è®¢ã€‚ç„¶åï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™äº›ä¿¡æ¯é€šè¿‡ `constr23` å¼ºåˆ¶æ‰§è¡Œè§„åˆ™ï¼Œè¦æ±‚è¿™äº›ç‚¹ä¸Šçš„è´§è¿å•†å¿…é¡»è¾¾åˆ°æœ€å¤§å®¹é‡ã€‚é€šè¿‡è¿™ç§æ–¹å¼ï¼Œæˆ‘ä»¬å¼ºåˆ¶æ‰§è¡Œè¿‡åº¦é¢„è®¢çš„è§„åˆ™ï¼šå¦‚æœæ‰€æœ‰å¸¸è§„ç©ºé—´å·²ç»è¢«å ç”¨ï¼Œæ‰å…è®¸è¿‡åº¦é¢„è®¢ã€‚'
- en: Constraints 3- use the AND technique as discussed on previous examples. This
    allows us to combine which shipper and dock the optimizer selected so far and
    use this information to install other constraints and costs.
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: çº¦æŸæ¡ä»¶ 3 - ä½¿ç”¨å‰é¢ç¤ºä¾‹ä¸­è®¨è®ºçš„ AND æŠ€æœ¯ã€‚è¿™å…è®¸æˆ‘ä»¬ç»“åˆä¼˜åŒ–å™¨è¿„ä»Šä¸ºæ­¢é€‰æ‹©çš„è´§è¿å•†å’Œç å¤´ä¿¡æ¯ï¼Œå¹¶åˆ©ç”¨è¿™äº›ä¿¡æ¯å®‰è£…å…¶ä»–çº¦æŸå’Œæˆæœ¬ã€‚
- en: '`constr55` combines information about docks and transportation linked to factories.
    It forces the optimizer, through `y_origin_and_transp` to choose a dock and transport
    that connects to the corresponding factory where the container is located.'
  id: totrans-185
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`constr55` ç»“åˆäº†ä¸å·¥å‚ç›¸å…³çš„ç å¤´å’Œè¿è¾“ä¿¡æ¯ã€‚é€šè¿‡ `y_origin_and_transp` å¼ºåˆ¶ä¼˜åŒ–å™¨é€‰æ‹©ä¸€ä¸ªè¿æ¥åˆ°ç›¸åº”å·¥å‚çš„ç å¤´å’Œè¿è¾“æ–¹å¼ï¼Œç¡®ä¿é›†è£…ç®±ä½ç½®çš„æ­£ç¡®è¿æ¥ã€‚'
- en: Cost function is equivalent to what was discussed on previous examples.
  id: totrans-186
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆæœ¬å‡½æ•°ç­‰åŒäºå‰é¢ç¤ºä¾‹ä¸­è®¨è®ºçš„å†…å®¹ã€‚
- en: And there we have it. The whole system capable of optimizing distribution of
    containers throughout the globe. Before delivering the code to the company, we
    wanted to add a layer of security to have some guarantees it was working as intended.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: å°±è¿™æ ·ï¼Œæˆ‘ä»¬å®Œæˆäº†è¿™ä¸ªç³»ç»Ÿï¼Œå®ƒèƒ½å¤Ÿä¼˜åŒ–å…¨çƒèŒƒå›´å†…é›†è£…ç®±çš„åˆ†é…ã€‚åœ¨å°†ä»£ç äº¤ä»˜ç»™å…¬å¸ä¹‹å‰ï¼Œæˆ‘ä»¬å¸Œæœ›æ·»åŠ ä¸€å±‚å®‰å…¨ä¿éšœï¼Œä»¥ç¡®ä¿å®ƒæŒ‰é¢„æœŸå·¥ä½œã€‚
- en: 4.3 Is It Working?!
  id: totrans-188
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.3 å®ƒæ˜¯å¦æœ‰æ•ˆï¼Ÿï¼
- en: 'To guarantee the code is working, we decided to implement some unit tests by
    simulating some scenarios. Hereâ€™s an example:'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ä¿è¯ä»£ç æ­£å¸¸è¿è¡Œï¼Œæˆ‘ä»¬å†³å®šé€šè¿‡æ¨¡æ‹Ÿä¸€äº›åœºæ™¯æ¥å®ç°å•å…ƒæµ‹è¯•ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š
- en: It uses Django as the backend of the system was built on top of it. In the example
    above, the test creates an input data that forces the optimizer to overbook a
    ship. We then compare results to what is expected to confirm itâ€™s working.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒä½¿ç”¨äº† Django ä½œä¸ºç³»ç»Ÿçš„åç«¯ï¼Œç³»ç»Ÿæ˜¯åœ¨å…¶åŸºç¡€ä¸Šæ„å»ºçš„ã€‚åœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­ï¼Œæµ‹è¯•åˆ›å»ºäº†ä¸€ä¸ªè¾“å…¥æ•°æ®ï¼Œå¼ºåˆ¶ä¼˜åŒ–å™¨è¿‡åº¦é¢„è®¢ä¸€è‰˜èˆ¹ã€‚ç„¶åï¼Œæˆ‘ä»¬å°†ç»“æœä¸é¢„æœŸè¿›è¡Œæ¯”è¾ƒï¼Œä»¥ç¡®è®¤å®ƒæ˜¯å¦æ­£å¸¸å·¥ä½œã€‚
- en: Several tests were implemented to increase the chances that everything is working
    properly.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: å®ç°äº†å¤šä¸ªæµ‹è¯•ï¼Œä»¥æé«˜æ‰€æœ‰åŠŸèƒ½æ­£å¸¸å·¥ä½œçš„æœºä¼šã€‚
- en: 5\. Conclusion
  id: totrans-192
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 5\. ç»“è®º
- en: This challenge was quite exciting. At first it wasnâ€™t that straightforward to
    implement this solution on top of *cvxpy.* We probably saw hundreds of times the
    error *DCPError* and it took a while until figuring out the workarounds to the
    issue.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªæŒ‘æˆ˜ç›¸å½“ä»¤äººå…´å¥‹ã€‚åˆšå¼€å§‹æ—¶ï¼Œåœ¨ *cvxpy* ä¸Šå®ç°è¿™ä¸ªè§£å†³æ–¹æ¡ˆå¹¶ä¸æ˜¯é‚£ä¹ˆç›´æ¥ã€‚æˆ‘ä»¬å¯èƒ½å·²ç»çœ‹åˆ°æ— æ•°æ¬¡ *DCPError* é”™è¯¯ï¼Œå¹¶ä¸”ç›´åˆ°æ‰¾åˆ°è§£å†³é—®é¢˜çš„å˜é€šæ–¹æ³•æ‰è§£å†³äº†å®ƒã€‚
- en: As for results, I guess probably we could say that thereâ€™s not even how to compare
    the previous Solver as implemented in *Excel* to the new one built. Even testing
    the algorithm with thousands of containers the whole processing took a few seconds
    on a *i5 CPU @ 2.20GHz*. On top of that, the solution implemented is already more
    in-depth than the current solution as cost function and constraints have more
    items.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: è‡³äºç»“æœï¼Œæˆ‘æƒ³æˆ‘ä»¬å¯ä»¥è¯´ï¼Œä¹‹å‰åœ¨ *Excel* ä¸­å®ç°çš„æ±‚è§£å™¨ä¸æ–°æ„å»ºçš„æ±‚è§£å™¨æ ¹æœ¬æ— æ³•è¿›è¡Œæ¯”è¾ƒã€‚å³ä½¿å°†ç®—æ³•åº”ç”¨äºæ•°åƒä¸ªé›†è£…ç®±ï¼Œæ•´ä¸ªå¤„ç†è¿‡ç¨‹ä¹Ÿåªéœ€å‡ ç§’é’Ÿï¼Œä¸”æ˜¯åœ¨
    *i5 CPU @ 2.20GHz* ä¸Šè¿è¡Œçš„ã€‚æ­¤å¤–ï¼Œå·²å®ç°çš„è§£å†³æ–¹æ¡ˆæ¯”å½“å‰çš„è§£å†³æ–¹æ¡ˆæ›´ä¸ºæ·±å…¥ï¼Œå› ä¸ºæˆæœ¬å‡½æ•°å’Œçº¦æŸæ¡ä»¶çš„é¡¹æ•°æ›´å¤šã€‚
- en: Possible downsides is that implementation is also more complex (much more) and
    to add new constraints the whole code may need changing, which means itâ€™s not
    that flexible as probably the company would like it to be. Given the advantages
    still, that was a good trade-off to make.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: å¯èƒ½çš„ç¼ºç‚¹æ˜¯å®ç°èµ·æ¥ä¹Ÿæ›´å¤æ‚ï¼ˆå¤æ‚å¾—å¤šï¼‰ï¼Œè€Œä¸”è¦æ·»åŠ æ–°çš„çº¦æŸæ¡ä»¶æ—¶ï¼Œæ•´ä¸ªä»£ç å¯èƒ½éœ€è¦ä¿®æ”¹ï¼Œè¿™æ„å‘³ç€å®ƒå¯èƒ½ä¸åƒå…¬å¸æœŸæœ›çš„é‚£æ ·çµæ´»ã€‚å°½ç®¡å¦‚æ­¤ï¼Œè€ƒè™‘åˆ°å…¶ä¼˜åŠ¿ï¼Œè¿™ä»ç„¶æ˜¯ä¸€ä¸ªå€¼å¾—åšå‡ºçš„æƒè¡¡ã€‚
- en: Well, that was a great experience. Hopefully you learned and enjoyed it as much
    as we did. It was tough but worth it.
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: å—¯ï¼Œé‚£çœŸæ˜¯ä¸€æ¬¡å¾ˆæ£’çš„ç»å†ã€‚å¸Œæœ›ä½ èƒ½åƒæˆ‘ä»¬ä¸€æ ·ä»ä¸­å­¦åˆ°ä¸œè¥¿å¹¶äº«å—å…¶ä¸­ã€‚è™½ç„¶è¿‡ç¨‹å¾ˆè‰°éš¾ï¼Œä½†å€¼å¾—ã€‚
- en: And, as always, see you [next mission](https://open.spotify.com/playlist/6DDVtTmNRo32PUGy3vsRCC)
    ;)!
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£ä¹ˆï¼Œä¸€å¦‚æ—¢å¾€ï¼ŒæœŸå¾…åœ¨[ä¸‹ä¸€ä¸ªä»»åŠ¡](https://open.spotify.com/playlist/6DDVtTmNRo32PUGy3vsRCC)ä¸­å†è§
    ;)ï¼
