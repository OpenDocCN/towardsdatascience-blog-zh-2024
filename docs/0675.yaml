- en: 'Understanding Tensors: Learning a Data Structure Through 3 Pesky Errors'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç†è§£å¼ é‡ï¼šé€šè¿‡ 3 ä¸ªä»¤äººå¤´ç–¼çš„é”™è¯¯å­¦ä¹ æ•°æ®ç»“æ„
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/understanding-tensors-learning-a-data-structure-through-3-pesky-errors-6d674776be0c?source=collection_archive---------4-----------------------#2024-03-13](https://towardsdatascience.com/understanding-tensors-learning-a-data-structure-through-3-pesky-errors-6d674776be0c?source=collection_archive---------4-----------------------#2024-03-13)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/understanding-tensors-learning-a-data-structure-through-3-pesky-errors-6d674776be0c?source=collection_archive---------4-----------------------#2024-03-13](https://towardsdatascience.com/understanding-tensors-learning-a-data-structure-through-3-pesky-errors-6d674776be0c?source=collection_archive---------4-----------------------#2024-03-13)
- en: What working through TensorFlow errors has taught me about tensors
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: é€šè¿‡è§£å†³ TensorFlow é”™è¯¯ï¼Œæˆ‘å­¦åˆ°çš„å…³äºå¼ é‡çš„çŸ¥è¯†
- en: '[](https://medium.com/@erevear?source=post_page---byline--6d674776be0c--------------------------------)[![Eva
    Revear](../Images/675266fccb503690d50d83b8c92f48b8.png)](https://medium.com/@erevear?source=post_page---byline--6d674776be0c--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--6d674776be0c--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--6d674776be0c--------------------------------)
    [Eva Revear](https://medium.com/@erevear?source=post_page---byline--6d674776be0c--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@erevear?source=post_page---byline--6d674776be0c--------------------------------)[![Eva
    Revear](../Images/675266fccb503690d50d83b8c92f48b8.png)](https://medium.com/@erevear?source=post_page---byline--6d674776be0c--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--6d674776be0c--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--6d674776be0c--------------------------------)
    [Eva Revear](https://medium.com/@erevear?source=post_page---byline--6d674776be0c--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--6d674776be0c--------------------------------)
    Â·11 min readÂ·Mar 13, 2024
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--6d674776be0c--------------------------------)
    Â·11åˆ†é’Ÿé˜…è¯»Â·2024å¹´3æœˆ13æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/feff5a593eac65c3656a2db9bd90c879.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/feff5a593eac65c3656a2db9bd90c879.png)'
- en: Photo by [Michael Dziedzic](https://unsplash.com/@lazycreekimages?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡æ¥æºï¼š[Michael Dziedzic](https://unsplash.com/@lazycreekimages?utm_source=medium&utm_medium=referral)
    åœ¨ [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: Iâ€™ve recently been tinkering with deep learning models in Tensorflow, and have
    accordingly been introduced to managing data as tensors.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€è¿‘æˆ‘ä¸€ç›´åœ¨ TensorFlow ä¸­å°è¯•æ·±åº¦å­¦ä¹ æ¨¡å‹ï¼Œå› æ­¤ä¹Ÿå¼€å§‹å­¦ä¹ å¦‚ä½•å°†æ•°æ®ç®¡ç†ä¸ºå¼ é‡ã€‚
- en: As a Data Engineer that works all day in tables that I can easily slice, dice,
    and visualize, I had absolutely no intuition around working with tensors, and
    I seemed to constantly run into the same errors that, especially at first, went
    way over my head.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œä¸ºä¸€åæ•°æ®å·¥ç¨‹å¸ˆï¼Œæ•´å¤©å·¥ä½œåœ¨å¯ä»¥è½»æ¾åˆ‡ç‰‡ã€åˆ‡å—å¹¶å¯è§†åŒ–çš„è¡¨æ ¼ä¸­ï¼Œæˆ‘å¯¹å¼ é‡çš„æ“ä½œå‡ ä¹æ²¡æœ‰ä»»ä½•ç›´è§‰ï¼Œå¹¶ä¸”æˆ‘ä¼¼ä¹æ€»æ˜¯é‡åˆ°ç›¸åŒçš„é”™è¯¯ï¼Œå°¤å…¶æ˜¯åœ¨å¼€å§‹æ—¶ï¼Œè¿™äº›é”™è¯¯è®©æˆ‘ä¸€å¤´é›¾æ°´ã€‚
- en: However, deep diving them has taught me a lot about tensors and TensorFlow,
    and I wanted to consolidate those learnings here to use as a reference.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œæ·±å…¥ç ”ç©¶è¿™äº›é”™è¯¯è®©æˆ‘å­¦åˆ°äº†å¾ˆå¤šå…³äºå¼ é‡å’Œ TensorFlow çš„çŸ¥è¯†ï¼Œæˆ‘æƒ³åœ¨è¿™é‡Œæ•´ç†è¿™äº›å­¦ä¹ æˆæœï¼Œä»¥ä¾¿ä½œä¸ºå‚è€ƒã€‚
- en: If you have a favorite error, solution, or debugging tip, please leave a comment!
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æœ‰å–œæ¬¢çš„é”™è¯¯ã€è§£å†³æ–¹æ¡ˆæˆ–è°ƒè¯•æŠ€å·§ï¼Œè¯·ç•™ä¸‹è¯„è®ºï¼
- en: Code recipes for debugging
  id: totrans-12
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è°ƒè¯•çš„ä»£ç ç¤ºä¾‹
- en: Before we dive into the errors themselves, I wanted to document a few of the
    light-weight, simple bits and pieces of code that Iâ€™ve found helpful in debugging.
    (Although it must be stated for legal reasons that we of course always debug with
    official debugging features and never just dozens of print statements ğŸ™‚)
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬æ·±å…¥æ¢è®¨è¿™äº›é”™è¯¯ä¹‹å‰ï¼Œæˆ‘æƒ³è®°å½•ä¸€äº›æˆ‘åœ¨è°ƒè¯•è¿‡ç¨‹ä¸­å‘ç°çš„è½»é‡çº§ã€ç®€å•çš„ä»£ç ç‰‡æ®µï¼Œå®ƒä»¬å¯¹æˆ‘å¾ˆæœ‰å¸®åŠ©ã€‚ï¼ˆè™½ç„¶å¿…é¡»å£°æ˜çš„æ˜¯ï¼Œå‡ºäºæ³•å¾‹åŸå› ï¼Œæˆ‘ä»¬å½“ç„¶æ€»æ˜¯ä½¿ç”¨å®˜æ–¹çš„è°ƒè¯•å·¥å…·æ¥è°ƒè¯•ï¼Œè€Œä¸æ˜¯ä»…ä»…ä¾èµ–äºæ‰“å°è¯­å¥
    ğŸ™‚ï¼‰
- en: '**Seeing inside our Tensorflow Datasets**'
  id: totrans-14
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**æŸ¥çœ‹æˆ‘ä»¬ TensorFlow æ•°æ®é›†çš„å†…éƒ¨**'
- en: First off, looking at our actual data. When we print a Dataframe or SELECT *
    in SQL, we see the data! When we print a tensor dataset we seeâ€¦
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œçœ‹çœ‹æˆ‘ä»¬çš„å®é™…æ•°æ®ã€‚å½“æˆ‘ä»¬æ‰“å° DataFrame æˆ–åœ¨ SQL ä¸­æ‰§è¡Œ SELECT * æ—¶ï¼Œæˆ‘ä»¬èƒ½çœ‹åˆ°æ•°æ®ï¼ä½†å½“æˆ‘ä»¬æ‰“å°å¼ é‡æ•°æ®é›†æ—¶ï¼Œæˆ‘ä»¬çœ‹åˆ°çš„æ˜¯â€¦â€¦
- en: '[PRE0]'
  id: totrans-16
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: This is all quite useful information, but it doesnâ€™t help us understand whatâ€™s
    actually going on in our data.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›éƒ½æ˜¯éå¸¸æœ‰ç”¨çš„ä¿¡æ¯ï¼Œä½†å®ƒä»¬å¹¶æ²¡æœ‰å¸®åŠ©æˆ‘ä»¬ç†è§£æ•°æ®ä¸­åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆã€‚
- en: 'To print a single tensor within the execution graph we can leverage tf.print.
    This article is a wonderful deep dive into tf.print that I highly recommend if
    you plan to use it often: [Using tf.Print() in TensorFlow](/using-tf-print-in-tensorflow-aa26e1cff11e)'
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: è¦æ‰“å°æ‰§è¡Œå›¾ä¸­çš„å•ä¸ªå¼ é‡ï¼Œæˆ‘ä»¬å¯ä»¥åˆ©ç”¨tf.printã€‚å¦‚æœä½ æ‰“ç®—ç»å¸¸ä½¿ç”¨å®ƒï¼Œæˆ‘å¼ºçƒˆæ¨èè¿™ç¯‡æ·±å…¥æ¢è®¨tf.printçš„æ–‡ç« ï¼š[åœ¨TensorFlowä¸­ä½¿ç”¨tf.Print()](https://wiki.example.org/feynmans_learning_method)ã€‚
- en: 'But when working with Tensorflow datasets during development, sometimes we
    need to see a few values at a time. For that we can loop through and print individual
    pieces of data like this:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä½¿ç”¨TensorFlowæ•°æ®é›†æ—¶ï¼Œæœ‰æ—¶æˆ‘ä»¬éœ€è¦ä¸€æ¬¡æŸ¥çœ‹å‡ ä¸ªå€¼ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å¯ä»¥åƒè¿™æ ·å¾ªç¯å¹¶æ‰“å°å•ä¸ªæ•°æ®ç‰‡æ®µï¼š
- en: '[PRE1]'
  id: totrans-20
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'We can also use skip to get to a specific index:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä¹Ÿå¯ä»¥ä½¿ç”¨skipè·³åˆ°ç‰¹å®šçš„ç´¢å¼•ï¼š
- en: '[PRE2]'
  id: totrans-22
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '**Knowing our tensorsâ€™ specs**'
  id: totrans-23
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**äº†è§£æˆ‘ä»¬çš„å¼ é‡è§„æ ¼**'
- en: 'When working with tensors we also need to know their shape, rank, dimension,
    and data type (if some of that vocabulary is unfamiliar, as it was to me initially,
    donâ€™t worry, weâ€™ll get back to it later in the article). Anyway, below are a few
    lines of code to gather this information:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å¤„ç†å¼ é‡æ—¶ï¼Œæˆ‘ä»¬è¿˜éœ€è¦çŸ¥é“å®ƒä»¬çš„å½¢çŠ¶ã€ç§©ã€ç»´åº¦å’Œæ•°æ®ç±»å‹ï¼ˆå¦‚æœè¿™äº›è¯æ±‡å¯¹ä½ æ¥è¯´æœ‰äº›é™Œç”Ÿï¼Œå°±åƒæœ€åˆå¯¹æˆ‘æ¥è¯´ä¸€æ ·ï¼Œåˆ«æ‹…å¿ƒï¼Œç¨åæˆ‘ä»¬ä¼šå›åˆ°è¿™äº›å†…å®¹ï¼‰ã€‚æ— è®ºå¦‚ä½•ï¼Œä¸‹é¢æ˜¯ä¸€äº›ä»£ç è¡Œï¼Œç”¨äºæ”¶é›†è¿™äº›ä¿¡æ¯ï¼š
- en: '[PRE3]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The above outputs:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸Šé¢çš„è¾“å‡ºï¼š
- en: '[PRE4]'
  id: totrans-27
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '**Augmenting model.summary()**'
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**å¢å¼ºmodel.summary()**'
- en: Finally, its is always helpful to be able to see how data is moving through
    a model, and how shape changes throughout inputs and outputs between layers. The
    source of many an error will be a mismatch between these expected input and output
    shapes and the shape of a given tensor.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œèƒ½å¤Ÿçœ‹åˆ°æ•°æ®å¦‚ä½•åœ¨æ¨¡å‹ä¸­æµåŠ¨ï¼Œä»¥åŠåœ¨å„å±‚ä¹‹é—´è¾“å…¥è¾“å‡ºçš„å½¢çŠ¶å¦‚ä½•å˜åŒ–ï¼Œæ€»æ˜¯å¾ˆæœ‰å¸®åŠ©ã€‚è®¸å¤šé”™è¯¯çš„æ ¹æºé€šå¸¸æ˜¯è¾“å…¥å’Œè¾“å‡ºå½¢çŠ¶ä¹‹é—´çš„ä¸åŒ¹é…ï¼Œä»¥åŠç»™å®šå¼ é‡çš„å½¢çŠ¶ã€‚
- en: '[model.summary()](https://www.geeksforgeeks.org/tensorflow-js-tf-layersmodel-class-summary-method/)
    of course gets the job done, but we can supplement that information with the following
    snippet, which adds a bit more context with model and layer inputs and outputs:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: '[model.summary()](https://www.geeksforgeeks.org/tensorflow-js-tf-layersmodel-class-summary-method/)
    å½“ç„¶å¯ä»¥å®Œæˆè¿™é¡¹å·¥ä½œï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹ä»£ç ç‰‡æ®µè¡¥å……ä¸€äº›ä¿¡æ¯ï¼Œè¿™ä¸ºæ¨¡å‹å’Œå±‚çš„è¾“å…¥è¾“å‡ºæä¾›äº†æ›´å¤šä¸Šä¸‹æ–‡ï¼š'
- en: '[PRE5]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Learning from our mistakes
  id: totrans-32
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä»æˆ‘ä»¬çš„é”™è¯¯ä¸­å­¦ä¹ 
- en: So letâ€™s jump into some errors!
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ä¸€äº›é”™è¯¯å§ï¼
- en: Rank
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç§©
- en: 'ValueError: Shape must be rank x but is rank yâ€¦.'
  id: totrans-35
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'ValueError: å½¢çŠ¶å¿…é¡»æ˜¯ç§©xï¼Œä½†å´æ˜¯ç§©yâ€¦â€¦'
- en: Ok, first of all, what is a rank? Rank is just the unit of dimensionality we
    use to describe tensors. A rank 0 tensor is a scalar value; a rank one tensor
    is a vector; a rank two is a matrix, and so on for all n dimensional structures.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: å¥½çš„ï¼Œé¦–å…ˆï¼Œä»€ä¹ˆæ˜¯ç§©ï¼Ÿç§©å°±æ˜¯æˆ‘ä»¬ç”¨æ¥æè¿°å¼ é‡çš„ç»´åº¦å•ä½ã€‚ç§©ä¸º0çš„å¼ é‡æ˜¯ä¸€ä¸ªæ ‡é‡å€¼ï¼›ç§©ä¸º1çš„å¼ é‡æ˜¯ä¸€ä¸ªå‘é‡ï¼›ç§©ä¸º2çš„å¼ é‡æ˜¯ä¸€ä¸ªçŸ©é˜µï¼Œä¾æ­¤ç±»æ¨ï¼Œå¯¹äºæ‰€æœ‰nç»´ç»“æ„ã€‚
- en: Take for example a 5 dimensional tensor.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸€ä¸ªäº”ç»´å¼ é‡ä¸ºä¾‹ã€‚
- en: '[PRE6]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[PRE7]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The code above shows that each dimension of the five has a size of two. If
    we wanted to index it, we could do so along any of these axes. To get at the last
    element, 32, we would run something like:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸Šé¢çš„ä»£ç æ˜¾ç¤ºï¼Œæ¯ä¸ªç»´åº¦çš„å¤§å°ä¸º2ã€‚å¦‚æœæˆ‘ä»¬æƒ³ç´¢å¼•å®ƒï¼Œå¯ä»¥æ²¿ç€è¿™äº›è½´ä¸­çš„ä»»ä½•ä¸€ä¸ªè¿›è¡Œã€‚ä¸ºäº†è·å–æœ€åä¸€ä¸ªå…ƒç´ 32ï¼Œæˆ‘ä»¬å¯ä»¥è¿è¡Œç±»ä¼¼ä»¥ä¸‹çš„ä»£ç ï¼š
- en: '[PRE8]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The [official tensor documentation](https://www.tensorflow.org/guide/tensor#basics)
    has some really helpful visualizations to make this a bit more comprehensible.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: '[å®˜æ–¹å¼ é‡æ–‡æ¡£](https://www.tensorflow.org/guide/tensor#basics)ä¸­æœ‰ä¸€äº›éå¸¸æœ‰ç”¨çš„å¯è§†åŒ–ï¼Œèƒ½å¤Ÿå¸®åŠ©ä½ æ›´å®¹æ˜“åœ°ç†è§£è¿™ä¸€ç‚¹ã€‚'
- en: 'Back to the error: it is just flagging that the tensor provided is a different
    dimension than what is expected to a particular function. For example if the error
    declares that the â€œShape must be rank 1 but is rank 0â€¦â€ it means that we are providing
    a scalar value, and it expects a 1-D tensor.'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: å›åˆ°é”™è¯¯ï¼šå®ƒåªæ˜¯æ ‡è®°äº†æä¾›çš„å¼ é‡ä¸æŸä¸ªç‰¹å®šå‡½æ•°é¢„æœŸçš„ç»´åº¦ä¸åŒã€‚ä¾‹å¦‚ï¼Œå¦‚æœé”™è¯¯å£°æ˜â€œå½¢çŠ¶å¿…é¡»æ˜¯ç§©1ï¼Œä½†å´æ˜¯ç§©0â€¦â€ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬æä¾›çš„æ˜¯ä¸€ä¸ªæ ‡é‡å€¼ï¼Œè€Œå®ƒæœŸæœ›çš„æ˜¯ä¸€ä¸ªä¸€ç»´å¼ é‡ã€‚
- en: Take the example below where we are trying to multiply tensors together with
    the matmul method.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸‹é¢æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼Œæˆ‘ä»¬è¯•å›¾ä½¿ç”¨matmulæ–¹æ³•å°†å¼ é‡ç›¸ä¹˜ã€‚
- en: '[PRE9]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: If we take a peek at the [documentation](https://www.tensorflow.org/api_docs/python/tf/linalg/matmul),
    matmul expects at least a rank 2 tensor, so multiplying the matrix by [1,2,3,4,5,6],
    which is just an array, will raise this error.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬æŸ¥çœ‹[æ–‡æ¡£](https://www.tensorflow.org/api_docs/python/tf/linalg/matmul)ï¼Œmatmulå‡½æ•°è‡³å°‘éœ€è¦ä¸€ä¸ªç§©ä¸º2çš„å¼ é‡ï¼Œå› æ­¤å°†çŸ©é˜µä¸[1,2,3,4,5,6]ï¼ˆè¿™åªæ˜¯ä¸€ä¸ªæ•°ç»„ï¼‰ç›¸ä¹˜ä¼šå¼•å‘æ­¤é”™è¯¯ã€‚
- en: '[PRE10]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'A great first step for this error is to dive into the documentation and understand
    what the function you are using is looking for (Hereâ€™s a nice list of the functions
    available on tensors: [raw_ops](https://www.tensorflow.org/api_docs/python/tf/raw_ops).'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: è§£å†³è¿™ä¸ªé”™è¯¯çš„ä¸€ä¸ªå¥½æ–¹æ³•æ˜¯æ·±å…¥æ–‡æ¡£ï¼Œç†è§£ä½ æ­£åœ¨ä½¿ç”¨çš„å‡½æ•°æœŸæœ›ä»€ä¹ˆï¼ˆè¿™é‡Œæœ‰ä¸€ä¸ªå…³äºå¼ é‡çš„å‡½æ•°åˆ—è¡¨ï¼š[raw_ops](https://www.tensorflow.org/api_docs/python/tf/raw_ops)ï¼‰ã€‚
- en: Then use the rank method to determine what we are actually providing.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åä½¿ç”¨ç§©æ–¹æ³•æ¥ç¡®å®šæˆ‘ä»¬å®é™…ä¸Šæä¾›äº†ä»€ä¹ˆã€‚
- en: '[PRE11]'
  id: totrans-50
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '[PRE12]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'As far as fixes go, tf.reshape is often a good option to start with. Letâ€™s
    take a brief moment to talk a little bit about tf.reshape, since it will be a
    faithful companion throughout our Tensorflow journey: [tf.reshape(tensor, shape,
    name=None)](https://www.tensorflow.org/api_docs/python/tf/reshape)'
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: è‡³äºè§£å†³æ–¹æ³•ï¼Œtf.reshapeé€šå¸¸æ˜¯ä¸€ä¸ªä¸é”™çš„èµ·ç‚¹ã€‚è®©æˆ‘ä»¬ç¨å¾®è°ˆä¸€ä¸‹tf.reshapeï¼Œå› ä¸ºå®ƒå°†æ˜¯æˆ‘ä»¬æ•´ä¸ªTensorflowæ—…ç¨‹ä¸­çš„å¿ å®ä¼™ä¼´ï¼š[tf.reshape(tensor,
    shape, name=None)](https://www.tensorflow.org/api_docs/python/tf/reshape)
- en: 'Reshape simply takes in the tensor we want to reshape, and another tensor containing
    what we want the shape of the output to be. For example, letâ€™s reshape our multiplication
    input:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: reshapeç®€å•åœ°æ¥å—æˆ‘ä»¬æƒ³è¦é‡å¡‘çš„å¼ é‡ï¼Œå’Œå¦ä¸€ä¸ªåŒ…å«æˆ‘ä»¬å¸Œæœ›è¾“å‡ºå½¢çŠ¶çš„å¼ é‡ã€‚ä¾‹å¦‚ï¼Œè®©æˆ‘ä»¬é‡å¡‘æˆ‘ä»¬çš„ä¹˜æ³•è¾“å…¥ï¼š
- en: '[PRE13]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '[PRE14]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Our variable will turn into a (3,2) tensor (3 rows, 2 columns). A quick note,
    tf.reshape(t, [3, -1]).numpy() will produce the same thing because the -1 tells
    Tensorflow to compute the size of the dimension such that the total size remains
    constant. The number of elements in the shape tensor is the rank.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„å˜é‡å°†å˜æˆä¸€ä¸ª(3,2)çš„å¼ é‡ï¼ˆ3è¡Œï¼Œ2åˆ—ï¼‰ã€‚å¿«é€Ÿæç¤ºï¼Œtf.reshape(t, [3, -1]).numpy()ä¹Ÿä¼šäº§ç”Ÿç›¸åŒçš„ç»“æœï¼Œå› ä¸º-1å‘Šè¯‰Tensorflowè®¡ç®—è¯¥ç»´åº¦çš„å¤§å°ï¼Œä»¥ç¡®ä¿æ€»å¤§å°ä¿æŒä¸å˜ã€‚å½¢çŠ¶å¼ é‡ä¸­çš„å…ƒç´ æ•°é‡å³ä¸ºç§©ã€‚
- en: Once we create a tensor with the proper rank, our multiplication will work just
    fine!
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦æˆ‘ä»¬åˆ›å»ºäº†å…·æœ‰æ­£ç¡®ç§©çš„å¼ é‡ï¼Œæˆ‘ä»¬çš„ä¹˜æ³•å°±èƒ½é¡ºåˆ©è¿›è¡Œï¼
- en: Shape
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å½¢çŠ¶
- en: 'ValueError: Input of layer is incompatible with layerâ€¦.'
  id: totrans-59
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ValueErrorï¼šå±‚çš„è¾“å…¥ä¸å±‚ä¸å…¼å®¹â€¦â€¦
- en: Having an intuitive understanding of tensor shape, and how it interacts and
    changes across model layers has made life with deep learning significantly easier
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹å¼ é‡å½¢çŠ¶çš„ç›´è§‚ç†è§£ï¼Œä»¥åŠå®ƒå¦‚ä½•åœ¨æ¨¡å‹å„å±‚ä¹‹é—´ç›¸äº’ä½œç”¨å’Œå˜åŒ–ï¼Œå·²ç»ä½¿å¾—æ·±åº¦å­¦ä¹ çš„ç”Ÿæ´»å˜å¾—æ›´åŠ è½»æ¾ã€‚
- en: 'First, getting basic vocab out of the way: the shape of a tensor refers to
    the number of elements along each dimension, or axis of the tensor. For example,
    a 2D tensor with 3 rows and 4 columns has a shape of (3, 4).'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œå…ˆäº†è§£åŸºæœ¬çš„è¯æ±‡ï¼šå¼ é‡çš„å½¢çŠ¶æŒ‡çš„æ˜¯æ²¿å¼ é‡æ¯ä¸ªç»´åº¦æˆ–è½´çš„å…ƒç´ æ•°é‡ã€‚ä¾‹å¦‚ï¼Œä¸€ä¸ª3è¡Œ4åˆ—çš„äºŒç»´å¼ é‡ï¼Œå…¶å½¢çŠ¶ä¸º(3, 4)ã€‚
- en: So what can go wrong with shape? Glad you asked, quite a few things!
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£ä¹ˆï¼Œå½¢çŠ¶å¯èƒ½ä¼šå‡ºä»€ä¹ˆé—®é¢˜å‘¢ï¼Ÿå¾ˆé«˜å…´ä½ é—®äº†ï¼Œé—®é¢˜å¯å¤šäº†ï¼
- en: 'First and foremost the shape and rank of your training data must match the
    input shape expected by the input layer. Letâ€™s take a look at an example, a basic
    CNN:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œè®­ç»ƒæ•°æ®çš„å½¢çŠ¶å’Œç§©å¿…é¡»ä¸è¾“å…¥å±‚æœŸæœ›çš„è¾“å…¥å½¢çŠ¶åŒ¹é…ã€‚è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªä¾‹å­ï¼Œä¸€ä¸ªåŸºæœ¬çš„CNNï¼š
- en: '[PRE15]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Trying to run the code above will result in:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: å°è¯•è¿è¡Œä¸Šè¿°ä»£ç å°†ä¼šå¯¼è‡´ï¼š
- en: '[PRE16]'
  id: totrans-66
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: This is because our model is expecting the input tensor to be of the shape (128,
    128, 3) and our generated data is (64, 64, 3).
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯å› ä¸ºæˆ‘ä»¬çš„æ¨¡å‹æœŸæœ›è¾“å…¥å¼ é‡çš„å½¢çŠ¶ä¸º(128, 128, 3)ï¼Œè€Œæˆ‘ä»¬ç”Ÿæˆçš„æ•°æ®æ˜¯(64, 64, 3)ã€‚
- en: 'In a situation like this, our good friend, reshape, or another Tensorflow function,
    resize, can help. If, as in the case above we are working with images, we can
    simply run resize or change the expectations of our modelâ€™s input:'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çš„å¥½æœ‹å‹reshapeï¼Œæˆ–è€…Tensorflowçš„å¦ä¸€ä¸ªå‡½æ•°resizeï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬ã€‚å¦‚æœåƒä¸Šé¢é‚£æ ·æˆ‘ä»¬åœ¨å¤„ç†å›¾åƒï¼Œæˆ‘ä»¬å¯ä»¥ç®€å•åœ°è¿è¡Œresizeï¼Œæˆ–è€…æ”¹å˜æ¨¡å‹è¾“å…¥çš„æœŸæœ›ï¼š
- en: '[PRE17]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: In this context, it is helpful to know a little about how common types of models
    and model layers expect input of different shapes, so letâ€™s take a little detour.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œäº†è§£å¸¸è§ç±»å‹çš„æ¨¡å‹å’Œæ¨¡å‹å±‚å¦‚ä½•æœŸæœ›ä¸åŒå½¢çŠ¶çš„è¾“å…¥æ˜¯æœ‰å¸®åŠ©çš„ï¼Œæ‰€ä»¥è®©æˆ‘ä»¬ç¨å¾®ç»•ä¸ªå¼¯ã€‚
- en: Deep Neural Networks of Dense layers take in 1 dimensional tensors (or 2 dimensional,
    depending on whether you include batch size, but we will talk about batch size
    in a bit) of the format (feature_size, ) where feature_size is the number of features
    in each sample.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: æ·±åº¦ç¥ç»ç½‘ç»œçš„å…¨è¿æ¥å±‚æ¥å—çš„æ˜¯ä¸€ç»´å¼ é‡ï¼ˆæˆ–è€…æ˜¯äºŒç»´çš„ï¼Œå–å†³äºæ˜¯å¦åŒ…æ‹¬æ‰¹æ¬¡å¤§å°ï¼Œä¸è¿‡æˆ‘ä»¬ç¨åä¼šè®¨è®ºæ‰¹æ¬¡å¤§å°ï¼‰ï¼Œæ ¼å¼ä¸º(feature_size, )ï¼Œå…¶ä¸­feature_sizeæ˜¯æ¯ä¸ªæ ·æœ¬çš„ç‰¹å¾æ•°é‡ã€‚
- en: Convolutional Neural Networks take in data representing images, using 3 dimensional
    tensors of (width, height, channels) where channels are the color scheme, 1 for
    gray scale, and 3 for RBG.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: å·ç§¯ç¥ç»ç½‘ç»œæ¥å—è¡¨ç¤ºå›¾åƒçš„æ•°æ®ï¼Œä½¿ç”¨ä¸‰ç»´å¼ é‡ï¼ˆå®½åº¦ï¼Œé«˜åº¦ï¼Œé€šé“ï¼‰ï¼Œå…¶ä¸­é€šé“æ˜¯é¢œè‰²æ–¹æ¡ˆï¼Œ1è¡¨ç¤ºç°åº¦ï¼Œ3è¡¨ç¤ºRGBã€‚
- en: And finally, Recurrent Neural Networks such as LTSMs take in 2 dimensions (time
    steps, feature_size)
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œé€’å½’ç¥ç»ç½‘ç»œï¼ˆå¦‚LTSMï¼‰æ¥å—çš„æ˜¯äºŒç»´å¼ é‡ï¼ˆæ—¶é—´æ­¥ï¼Œç‰¹å¾å¤§å°ï¼‰ã€‚
- en: But back to errors! Another common culprit in Tensorflow shape errors has to
    do with how shape changes as data passes through the model layers. As previously
    mentioned, different layers take in different input shapes, and they can also
    reshape output.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†å›åˆ°é”™è¯¯ï¼Tensorflowå½¢çŠ¶é”™è¯¯çš„å¦ä¸€ä¸ªå¸¸è§åŸå› ä¸æ•°æ®é€šè¿‡æ¨¡å‹å±‚æ—¶å½¢çŠ¶çš„å˜åŒ–æœ‰å…³ã€‚å¦‚å‰æ‰€è¿°ï¼Œä¸åŒçš„å±‚æ¥å—ä¸åŒå½¢çŠ¶çš„è¾“å…¥ï¼Œå¹¶ä¸”å®ƒä»¬ä¹Ÿå¯ä»¥é‡æ–°è°ƒæ•´è¾“å‡ºçš„å½¢çŠ¶ã€‚
- en: Returning to our CNN example from above, letâ€™s break it again, by seeing what
    happens when we remove the Flatten layer. If we try to run the code we will see
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: è¿”å›åˆ°æˆ‘ä»¬ä¸Šé¢çš„CNNç¤ºä¾‹ï¼Œè®©æˆ‘ä»¬å†æ¬¡ç ´åå®ƒï¼Œçœ‹çœ‹å½“æˆ‘ä»¬ç§»é™¤Flattenå±‚æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚å¦‚æœæˆ‘ä»¬å°è¯•è¿è¡Œä»£ç ï¼Œæˆ‘ä»¬å°†çœ‹åˆ°
- en: '[PRE18]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: This is where printing all of our model input and output shapes along with our
    data shapes comes in handy to help us pinpoint where there is a mismatch.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å°±æ˜¯æ‰“å°æˆ‘ä»¬æ‰€æœ‰æ¨¡å‹è¾“å…¥å’Œè¾“å‡ºå½¢çŠ¶ä»¥åŠæ•°æ®å½¢çŠ¶å˜å¾—éå¸¸æœ‰ç”¨çš„åœ°æ–¹ï¼Œå¸®åŠ©æˆ‘ä»¬å®šä½ä¸åŒ¹é…çš„åœ°æ–¹ã€‚
- en: model.summary() will show us
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: model.summary()å°†å±•ç¤ºç»™æˆ‘ä»¬
- en: '[PRE19]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: And our further diagnostic will reveal
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿›ä¸€æ­¥çš„è¯Šæ–­å°†æ­ç¤º
- en: '[PRE20]'
  id: totrans-81
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: It is a lot of output, but we can see that dense_13 layer is looking for input
    of (None, 50176) shape. However, conv2d_17 layer outputs (None, 28, 28, 64)
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: è¾“å‡ºä¿¡æ¯å¾ˆå¤šï¼Œä½†æˆ‘ä»¬å¯ä»¥çœ‹åˆ°dense_13å±‚æ­£åœ¨å¯»æ‰¾å½¢çŠ¶ä¸º(None, 50176)çš„è¾“å…¥ã€‚ç„¶è€Œï¼Œconv2d_17å±‚è¾“å‡ºçš„æ˜¯(None, 28, 28,
    64)ã€‚
- en: Flatten layers transform the multi-dimensional output from previous layers into
    a one-dimensional (flat) vector that the Dense layer expects.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: Flattenå±‚å°†å‰é¢å±‚çš„å¤šç»´è¾“å‡ºè½¬æ¢ä¸ºDenseå±‚æœŸæœ›çš„ä¸€ç»´ï¼ˆå¹³å¦ï¼‰å‘é‡ã€‚
- en: 'Conv2d and Max Pooling layers change their input data in other interesting
    ways as well, but those are out of scope for this article. For an awesome breakdown
    take a look at: [Ultimate Guide to Input shape and Model Complexity in Neural
    Networks](/ultimate-guide-to-input-shape-and-model-complexity-in-neural-networks-ae665c728f4b)'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: Conv2då’ŒMax Poolingå±‚ä¹Ÿä»¥å…¶ä»–æœ‰è¶£çš„æ–¹å¼æ”¹å˜å®ƒä»¬çš„è¾“å…¥æ•°æ®ï¼Œä½†è¿™äº›è¶…å‡ºäº†æœ¬æ–‡çš„èŒƒå›´ã€‚è¦äº†è§£æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œå¯ä»¥æŸ¥çœ‹ï¼š[ç¥ç»ç½‘ç»œä¸­è¾“å…¥å½¢çŠ¶å’Œæ¨¡å‹å¤æ‚åº¦çš„ç»ˆææŒ‡å—](/ultimate-guide-to-input-shape-and-model-complexity-in-neural-networks-ae665c728f4b)
- en: But what about batch size?! I havenâ€™t forgotten!
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: é‚£æ‰¹é‡å¤§å°å‘¢ï¼Ÿï¼æˆ‘æ²¡æœ‰å¿˜è®°ï¼
- en: 'If we break our code one more time by removing the .batch(32) from the dataset
    in model.fit we will get the error:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬å†ä¸€æ¬¡é€šè¿‡ä»model.fitä¸­çš„æ•°æ®é›†ç§»é™¤.batch(32)æ¥ç ´åæˆ‘ä»¬çš„ä»£ç ï¼Œæˆ‘ä»¬å°†å¾—åˆ°å¦‚ä¸‹é”™è¯¯ï¼š
- en: '[PRE21]'
  id: totrans-87
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: That is because, the first dimension of a layerâ€™s input is reserved for the
    batch size or number of samples that we want the model to work through at a time.
    For a great deep dive read through [Difference between batch and epoch](https://machinelearningmastery.com/difference-between-a-batch-and-an-epoch/).
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯å› ä¸ºï¼Œå±‚è¾“å…¥çš„ç¬¬ä¸€ä¸ªç»´åº¦æ˜¯ä¸ºæ‰¹é‡å¤§å°æˆ–æˆ‘ä»¬å¸Œæœ›æ¨¡å‹ä¸€æ¬¡å¤„ç†çš„æ ·æœ¬æ•°ä¿ç•™çš„ã€‚è¦æ·±å…¥äº†è§£ï¼Œå¯ä»¥é˜…è¯»[æ‰¹é‡å’Œè½®æ¬¡ä¹‹é—´çš„åŒºåˆ«](https://machinelearningmastery.com/difference-between-a-batch-and-an-epoch/)ã€‚
- en: Batch size defaults to None prior to fitting, as we can see in the model summary
    output, and our model expects us to set it elsewhere, depending on how we tune
    the hyperparameter. We can also force it in our input layer by using batch_input_size
    instead of input_size, but that decreases our flexibility in testing out different
    values.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰¹é‡å¤§å°åœ¨æ‹Ÿåˆä¹‹å‰é»˜è®¤ä¸ºNoneï¼Œæ­£å¦‚æˆ‘ä»¬åœ¨æ¨¡å‹æ‘˜è¦è¾“å‡ºä¸­çœ‹åˆ°çš„é‚£æ ·ï¼Œæˆ‘ä»¬çš„æ¨¡å‹æœŸæœ›æˆ‘ä»¬åœ¨å…¶ä»–åœ°æ–¹è®¾ç½®å®ƒï¼Œå…·ä½“å–å†³äºæˆ‘ä»¬å¦‚ä½•è°ƒæ•´è¶…å‚æ•°ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä½¿ç”¨batch_input_sizeè€Œä¸æ˜¯input_sizeåœ¨è¾“å…¥å±‚å¼ºåˆ¶è®¾ç½®å®ƒï¼Œä½†è¿™æ ·ä¼šé™ä½æˆ‘ä»¬åœ¨æµ‹è¯•ä¸åŒå€¼æ—¶çš„çµæ´»æ€§ã€‚
- en: Type
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç±»å‹
- en: 'TypeError: Failed to convert object of type to Tensor. Unsupported object type'
  id: totrans-91
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 'TypeError: æ— æ³•å°†ç±»å‹çš„å¯¹è±¡è½¬æ¢ä¸ºå¼ é‡ã€‚ä¸æ”¯æŒçš„å¯¹è±¡ç±»å‹ã€‚'
- en: Finally, letâ€™s talk a bit about some data type specifics in Tensors.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œè®©æˆ‘ä»¬ç®€å•è°ˆè°ˆTensorä¸­ä¸€äº›æ•°æ®ç±»å‹çš„å…·ä½“ç»†èŠ‚ã€‚
- en: The error above is another, that, if youâ€™re used to working in database systems
    with tables built from all sorts of data, can be a bit baffling, but it is one
    of the more simple to diagnose and fix, although there are a couple of common
    causes to look out for.
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸Šè¿°é”™è¯¯æ˜¯å¦ä¸€ä¸ªï¼Œå¦‚æœä½ ä¹ æƒ¯äºåœ¨ä½¿ç”¨å„ç§æ•°æ®æ„å»ºè¡¨æ ¼çš„æ•°æ®åº“ç³»ç»Ÿä¸­å·¥ä½œï¼Œå¯èƒ½ä¼šè®©äººæœ‰äº›å›°æƒ‘ï¼Œä½†å®ƒæ˜¯æ¯”è¾ƒå®¹æ˜“è¯Šæ–­å’Œä¿®å¤çš„ï¼Œå°½ç®¡æœ‰å‡ ä¸ªå¸¸è§åŸå› éœ€è¦æ³¨æ„ã€‚
- en: 'The main issue is that, although tensors support a variety of [data types](https://www.tensorflow.org/api_docs/python/tf/dtypes),
    when we convert a NumPy array to tensors (a common flow within deep learning),
    the datatypes must be floats. The script below initializes a contrived example
    of a dataframe with None and with string data points. Letâ€™s walk through some
    issue and fixes for this example:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸»è¦é—®é¢˜æ˜¯ï¼Œå°½ç®¡å¼ é‡æ”¯æŒå¤šç§[æ•°æ®ç±»å‹](https://www.tensorflow.org/api_docs/python/tf/dtypes)ï¼Œä½†å½“æˆ‘ä»¬å°†NumPyæ•°ç»„è½¬æ¢ä¸ºå¼ é‡æ—¶ï¼ˆè¿™æ˜¯æ·±åº¦å­¦ä¹ ä¸­çš„å¸¸è§æµç¨‹ï¼‰ï¼Œæ•°æ®ç±»å‹å¿…é¡»æ˜¯æµ®åŠ¨ç±»å‹ã€‚ä¸‹é¢çš„è„šæœ¬åˆå§‹åŒ–äº†ä¸€ä¸ªåŒ…å«Noneå’Œå­—ç¬¦ä¸²æ•°æ®ç‚¹çš„è™šæ‹Ÿæ•°æ®æ¡†ã€‚è®©æˆ‘ä»¬ä¸€èµ·åˆ†æè¿™ä¸ªç¤ºä¾‹ä¸­çš„é—®é¢˜å¹¶ä¿®å¤å®ƒï¼š
- en: '[PRE22]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Running this code will flag to us that:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: è¿è¡Œè¿™æ®µä»£ç ä¼šæé†’æˆ‘ä»¬ï¼š
- en: '[PRE23]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: The most obvious issue is that you are sending in a NumPy array that contains
    some non float type, an object. If you have an actual column of categorical data,
    there are many ways to convert that to numeric data (One shot encoding, etc) but
    that is out of scope for this discussion.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€æ˜æ˜¾çš„é—®é¢˜æ˜¯ä½ ä¼ å…¥çš„æ˜¯ä¸€ä¸ªåŒ…å«æŸäº›éæµ®åŠ¨ç±»å‹ï¼ˆå³å¯¹è±¡ï¼‰çš„NumPyæ•°ç»„ã€‚å¦‚æœä½ æœ‰ä¸€ä¸ªå®é™…çš„ç±»åˆ«æ•°æ®åˆ—ï¼Œæœ‰å¾ˆå¤šæ–¹æ³•å¯ä»¥å°†å…¶è½¬æ¢ä¸ºæ•°å€¼æ•°æ®ï¼ˆå¦‚ç‹¬çƒ­ç¼–ç ç­‰ï¼‰ï¼Œä½†è¿™è¶…å‡ºäº†æœ¬è®¨è®ºçš„èŒƒå›´ã€‚
- en: We can determine that if we run print(X_train.dtypes), which will tell us whatâ€™s
    in our dataframe that Tensorflow doesnâ€™t like.
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿è¡Œ`print(X_train.dtypes)`æ¥ç¡®å®šï¼Œè¿™ä¼šå‘Šè¯‰æˆ‘ä»¬æ•°æ®æ¡†ä¸­Tensorflowä¸å–œæ¬¢çš„å†…å®¹ã€‚
- en: '[PRE24]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'If we are running into non float data points, the line below will magically
    solve all of our problems:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬é‡åˆ°éæµ®åŠ¨æ•°æ®ç‚¹ï¼Œä¸‹é¢è¿™è¡Œä»£ç å°†ç¥å¥‡åœ°è§£å†³æˆ‘ä»¬æ‰€æœ‰çš„é—®é¢˜ï¼š
- en: '[PRE25]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: Another thing to check for is if you have None or np.nan anywhere.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: å¦ä¸€ä»¶éœ€è¦æ£€æŸ¥çš„äº‹æƒ…æ˜¯æ˜¯å¦åœ¨ä»»ä½•åœ°æ–¹å‡ºç°äº†`None`æˆ–`np.nan`ã€‚
- en: 'To find out we can use a few lines of code such as:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: è¦æ‰¾å‡ºè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨å‡ è¡Œä»£ç ï¼Œä¾‹å¦‚ï¼š
- en: '[PRE26]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: 'Which tells us that we have nulls on rows 0 and 1:'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å‘Šè¯‰æˆ‘ä»¬ï¼Œç¬¬0è¡Œå’Œç¬¬1è¡Œä¸­æœ‰ç©ºå€¼ï¼š
- en: '[PRE27]'
  id: totrans-107
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: If so, and that is expected/intentional we need to replace those values with
    an acceptable alternative. Fillna can help us here.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ˜¯è¿™æ ·ï¼Œå¹¶ä¸”è¿™æ˜¯é¢„æœŸä¸­çš„/æ•…æ„çš„ï¼Œæˆ‘ä»¬éœ€è¦ç”¨ä¸€ä¸ªå¯æ¥å—çš„æ›¿ä»£å€¼æ¥æ›¿æ¢è¿™äº›å€¼ã€‚`Fillna`å¯ä»¥åœ¨è¿™é‡Œå¸®åŠ©æˆ‘ä»¬ã€‚
- en: '[PRE28]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: With these changes to the code below, our NumPy array will successfully convert
    to a tensor dataset and we can train our model!
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡ä¸‹é¢å¯¹ä»£ç çš„è¿™äº›ä¿®æ”¹ï¼Œæˆ‘ä»¬çš„NumPyæ•°ç»„å°†æˆåŠŸè½¬æ¢ä¸ºå¼ é‡æ•°æ®é›†ï¼Œæˆ‘ä»¬å¯ä»¥è®­ç»ƒæˆ‘ä»¬çš„æ¨¡å‹ï¼
- en: In Conclusion
  id: totrans-111
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ€»ç»“
- en: I often find that I learn the most about a particular technology when I have
    to work through errors, and I hope this has been somewhat helpful to you too!
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘å¸¸å¸¸å‘ç°ï¼Œå½“æˆ‘ä¸å¾—ä¸å¤„ç†é”™è¯¯æ—¶ï¼Œæˆ‘å¯¹æŸé¡¹æŠ€æœ¯çš„ç†è§£æœ€æ·±ï¼Œå¸Œæœ›è¿™å¯¹ä½ ä¹Ÿæœ‰æ‰€å¸®åŠ©ï¼
- en: If you have cool tips and tricks or fun Tensorflow errors please pass them along!
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æœ‰ä¸€äº›æœ‰è¶£çš„æŠ€å·§æˆ–Tensorflowé”™è¯¯ï¼Œè¯·åˆ†äº«ç»™æˆ‘ï¼
