<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Everything You Can Do with Python’s textwrap Module</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Everything You Can Do with Python’s textwrap Module</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/everything-you-can-do-with-pythons-textwrap-module-0d82c377a4c8?source=collection_archive---------2-----------------------#2024-02-07">https://towardsdatascience.com/everything-you-can-do-with-pythons-textwrap-module-0d82c377a4c8?source=collection_archive---------2-----------------------#2024-02-07</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="710f" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">Learn about all the things you can do with Python’s <code class="cx hd he hf hg b">textwrap</code> module, including formatting, text wrapping, trimming and more</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hh hi hj hk hl ab"><div><div class="ab hm"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@martin.heinz?source=post_page---byline--0d82c377a4c8--------------------------------" rel="noopener follow"><div class="l hn ho by hp hq"><div class="l ed"><img alt="Martin Heinz" class="l ep by dd de cx" src="../Images/a8d1540fd32998ee9bda4af0f0232f7d.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/2*p3sIQ1Ga2bfAbZYzoCcACw.jpeg"/><div class="hr by l dd de em n hs eo"/></div></div></a></div></div><div class="ht ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--0d82c377a4c8--------------------------------" rel="noopener follow"><div class="l hu hv by hp hw"><div class="l ed"><img alt="Towards Data Science" class="l ep by br hx cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hr by l br hx em n hs eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hy ab q"><div class="ab q hz"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b ia ib bk"><a class="af ag ah ai aj ak al am an ao ap aq ar ic" data-testid="authorName" href="https://medium.com/@martin.heinz?source=post_page---byline--0d82c377a4c8--------------------------------" rel="noopener follow">Martin Heinz</a></p></div></div></div><span class="id ie" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b ia ib dx"><button class="if ig ah ai aj ak al am an ao ap aq ar ih ii ij" disabled="">Follow</button></p></div></div></span></div></div><div class="l ik"><span class="bf b bg z dx"><div class="ab cn il im in"><div class="io ip ab"><div class="bf b bg z dx ab iq"><span class="ir l ik">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar ic ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--0d82c377a4c8--------------------------------" rel="noopener follow"><p class="bf b bg z is it iu iv iw ix iy iz bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="id ie" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">5 min read</span><div class="ja jb l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Feb 7, 2024</span></div></span></div></span></div></div></div><div class="ab cp jc jd je jf jg jh ji jj jk jl jm jn jo jp jq jr"><div class="h k w ea eb q"><div class="kh l"><div class="ab q ki kj"><div class="pw-multi-vote-icon ed ir kk kl km"><div class=""><div class="kn ko kp kq kr ks kt am ku kv kw km"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kx ky kz la lb lc ld"><p class="bf b dy z dx"><span class="ko">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kn lg lh ab q ee li lj" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lf"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count le lf">3</span></p></button></div></div></div><div class="ab q js jt ju jv jw jx jy jz ka kb kc kd ke kf kg"><div class="lk k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al ll an ao ap ih lm ln lo" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep lp cn"><div class="l ae"><div class="ab cb"><div class="lq lr ls lt lu lv ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al ll an ao ap ih lw lx lj ly lz ma mb mc s md me mf mg mh mi mj u mk ml mm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al ll an ao ap ih lw lx lj ly lz ma mb mc s md me mf mg mh mi mj u mk ml mm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al ll an ao ap ih lw lx lj ly lz ma mb mc s md me mf mg mh mi mj u mk ml mm"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mq mr ms mt mu mv mn mo paragraph-image"><div role="button" tabindex="0" class="mw mx ed my bh mz"><div class="mn mo mp"><img src="../Images/c3d8bf462ca3ad135cf342ed93cd2b6f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rhFbFGNPVkuTL-Ex5GJUQg.jpeg"/></div></div><figcaption class="nb nc nd mn mo ne nf bf b bg z dx">Photo by <a class="af ng" href="https://unsplash.com/@hello_sunday?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" rel="noopener ugc nofollow" target="_blank">Hello Sunday</a> on <a class="af ng" href="https://unsplash.com/photos/black-white-blue-and-pink-floral-textile-COFQgC0V4ks?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="2b77" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">Python has many options for formatting strings and text, including f-strings, <code class="cx hd he hf hg b">format()</code> function, templates and more. There's however one module that few people know about and it's called <code class="cx hd he hf hg b">textwrap</code>.</p><p id="01a4" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">This module is specifically built to help you with line-wrapping, indentation, trimming and more, and in this article we will look at all the things you can use it for.</p><h1 id="b2b8" class="od oe fq bf of og oh gq oi oj ok gt ol om on oo op oq or os ot ou ov ow ox oy bk">Shorten</h1><p id="0674" class="pw-post-body-paragraph nh ni fq nj b go oz nl nm gr pa no np nq pb ns nt nu pc nw nx ny pd oa ob oc fj bk">Let’s start with very simple, yet very useful function from the <code class="cx hd he hf hg b">textwrap</code> module, called <code class="cx hd he hf hg b">shorten</code>:</p><pre class="mq mr ms mt mu pe hg pf bp pg bb bk"><span id="6bd4" class="ph oe fq hg b bg pi pj l pk pl">from textwrap import shorten<br/><br/>shorten("This is a long text or sentence.", width=10)<br/># 'This [...]'<br/>shorten("This is a long text or sentence.", width=15)<br/># 'This is a [...]'<br/>shorten("This is a long text or sentence.", width=15, placeholder=" &lt;...&gt;")<br/># 'This is a &lt;...&gt;'</span></pre><p id="fbe7" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">As the name suggests, <code class="cx hd he hf hg b">shorten</code> allows us to trim text to certain length ( <code class="cx hd he hf hg b">width</code>) if the specified string is too long. By default, the placeholder for the trimmed text is <code class="cx hd he hf hg b">[...]</code>, but that can be overridden with the <code class="cx hd he hf hg b">placeholder</code> argument.</p><h1 id="886a" class="od oe fq bf of og oh gq oi oj ok gt ol om on oo op oq or os ot ou ov ow ox oy bk">Wrap</h1><p id="ced1" class="pw-post-body-paragraph nh ni fq nj b go oz nl nm gr pa no np nq pb ns nt nu pc nw nx ny pd oa ob oc fj bk">A more interesting function from this module is <code class="cx hd he hf hg b">wrap</code>. The obvious use-case for it is to split long text into lines of same length, but there are more things we can do with it:</p><pre class="mq mr ms mt mu pe hg pf bp pg bb bk"><span id="6bc1" class="ph oe fq hg b bg pi pj l pk pl">from textwrap import wrap<br/>s = '1234567890'<br/>wrap(s, 3)<br/># ['123', '456', '789', '0']</span></pre><p id="69d3" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">In this example we split a string into equal chunks which can be useful for batch processing, rather than just formatting.</p><p id="97ee" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">Using this function however, has some caveats:</p><pre class="mq mr ms mt mu pe hg pf bp pg bb bk"><span id="7ada" class="ph oe fq hg b bg pi pj l pk pl">s = '12\n3  45678\t9\n0'<br/>wrap(s, 3)<br/># ['12', '3  ', '456', '78', '9 0']<br/># the first ("12") element "includes" newline<br/># the 4th element ("78") "includes" tab<br/>wrap(s, 3, drop_whitespace=False, tabsize=1)<br/># ['12 ', '3  ', '456', '78 ', '9 0']</span></pre><p id="a9b0" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">You should be careful with whitespaces, when using <code class="cx hd he hf hg b">wrap</code> - above you can see the behaviour with newline, tab and space characters. You can see that the first element ( <code class="cx hd he hf hg b">12</code>) <em class="pm">"includes"</em> newline, and 4th element ( <code class="cx hd he hf hg b">78</code>) <em class="pm">"includes"</em> tab, those are however, dropped by default, therefore these elements only have 2 characters instead of 3.</p><p id="b874" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">We can specify the <code class="cx hd he hf hg b">drop_whitespace</code> keyword argument to preserve them and maintain the proper length of chunks.</p><p id="8595" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">It might be obvious, but <code class="cx hd he hf hg b">wrap</code> is also great for reformatting whole files to certain line width:</p><pre class="mq mr ms mt mu pe hg pf bp pg bb bk"><span id="c3a1" class="ph oe fq hg b bg pi pj l pk pl">with open("some-text.md", "r", encoding="utf-8") as f:<br/>    formatted = wrap(f.read(), width=80)  # List of lines<br/>    formatted = fill(f.read(), width=80)  # Single string that includes line breaks <br/>    # ... write it back</span></pre><p id="8abb" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">We can also use the <code class="cx hd he hf hg b">fill</code> function which is a shorthand for <code class="cx hd he hf hg b">"\n".join(wrap(text, ...))</code>. The difference between the 2 is that <code class="cx hd he hf hg b">wrap</code> will give us a list of lines that we would need to concatenate ourselves, and <code class="cx hd he hf hg b">fill</code> gives us a single string that's already joined using newlines.</p><h1 id="249b" class="od oe fq bf of og oh gq oi oj ok gt ol om on oo op oq or os ot ou ov ow ox oy bk">TextWrapper</h1><p id="8a23" class="pw-post-body-paragraph nh ni fq nj b go oz nl nm gr pa no np nq pb ns nt nu pc nw nx ny pd oa ob oc fj bk"><code class="cx hd he hf hg b">textwrap</code> module also includes a more powerful version <code class="cx hd he hf hg b">wrap</code> function, which is a <code class="cx hd he hf hg b">TextWrapper</code> class:</p><pre class="mq mr ms mt mu pe hg pf bp pg bb bk"><span id="b82f" class="ph oe fq hg b bg pi pj l pk pl">import textwrap<br/><br/>w = textwrap.TextWrapper(width=120, placeholder=" &lt;...&gt;")<br/>for s in list_of_strings:<br/>    w.wrap(s)<br/>    # ...</span></pre><p id="b75a" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">This class and its <code class="cx hd he hf hg b">wrap</code> method are great if we need to call <code class="cx hd he hf hg b">wrap</code> with the same parameters multiple times as shown above.</p><p id="9905" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">And while we’re looking that the <code class="cx hd he hf hg b">TextWrapper</code>, let's also try out some more keyword arguments:</p><pre class="mq mr ms mt mu pe hg pf bp pg bb bk"><span id="97c2" class="ph oe fq hg b bg pi pj l pk pl">user = "John"<br/>prefix = user + ": "<br/>width = 50<br/>wrapper = TextWrapper(initial_indent=prefix, width=width, subsequent_indent=" " * len(prefix))<br/>messages = ["...", "...", "..."]<br/>for m in messages:<br/>    print(wrapper.fill(m))<br/><br/># John: Lorem Ipsum is simply dummy text of the<br/>#       printing and typesetting industry. Lorem<br/># John: Ipsum has been the industry's standard dummy<br/>#       text ever since the 1500s, when an<br/># John: unknown printer took a galley of type and<br/>#       scrambled it to make a type specimen</span></pre><p id="518b" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">Here we can see the use of <code class="cx hd he hf hg b">initial_indent</code> and <code class="cx hd he hf hg b">subsequent_indent</code> for indenting the first line of paragraph and subsequent ones, respectively. There are couple more options, which you can find in <a class="af ng" href="https://docs.python.org/3/library/textwrap.html#textwrap.TextWrapper" rel="noopener ugc nofollow" target="_blank">docs</a>.</p><p id="6617" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">Furthermore, because <code class="cx hd he hf hg b">TextWrapper</code> is a class, we can also extend it and completely override some of its methods:</p><pre class="mq mr ms mt mu pe hg pf bp pg bb bk"><span id="e0bf" class="ph oe fq hg b bg pi pj l pk pl">from textwrap import TextWrapper<br/><br/>class DocumentWrapper(TextWrapper):<br/><br/>    def wrap(self, text):<br/>        split_text = text.split('\n')<br/>        lines = [line for par in split_text for line in TextWrapper.wrap(self, par)]<br/>        return lines<br/><br/><br/>text = """First line,<br/><br/>Another, much looooooonger line of text and/or sentence"""<br/>d = DocumentWrapper(width=50)<br/>print(d.fill(text))<br/><br/># First line,<br/># Another, much looooooonger line of text and/or<br/># sentence</span></pre><p id="6b5f" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">This is a nice example of changing the <code class="cx hd he hf hg b">wrap</code> method to preserve existing line breaks and to print them properly.</p><p id="021b" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">For a more complete example for handling multiple paragraphs with <code class="cx hd he hf hg b">TextWrapper</code>, check out <a class="af ng" href="https://code.activestate.com/recipes/358228-extend-textwraptextwrapper-to-handle-multiple-para/" rel="noopener ugc nofollow" target="_blank">this article</a>.</p><h1 id="a26c" class="od oe fq bf of og oh gq oi oj ok gt ol om on oo op oq or os ot ou ov ow ox oy bk">Indentation</h1><p id="4773" class="pw-post-body-paragraph nh ni fq nj b go oz nl nm gr pa no np nq pb ns nt nu pc nw nx ny pd oa ob oc fj bk">Finally, <code class="cx hd he hf hg b">textwrap</code> also includes two functions for indentation, first one being <code class="cx hd he hf hg b">dedent</code>:</p><pre class="mq mr ms mt mu pe hg pf bp pg bb bk"><span id="7555" class="ph oe fq hg b bg pi pj l pk pl"># Ugly formatting:<br/>multiline_string = """<br/>First line<br/>Second line<br/>Third line<br/>"""<br/><br/>from textwrap import dedent<br/><br/>multiline_string = """<br/>                   First line<br/>                   Second line<br/>                   Third line<br/>                   """<br/><br/>print(dedent(multiline_string))<br/><br/># First line<br/># Second line<br/># Third line<br/><br/># Notice the leading blank line...<br/># You can use:<br/>multiline_string = """\<br/>                   First line<br/>                   Second line<br/>                   Third line<br/>                   """<br/><br/># or<br/>from inspect import cleandoc<br/>cleandoc(multiline_string)<br/># 'First line\nSecond line\nThird line'</span></pre><p id="3a25" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">By default, multiline strings in Python honor any indentation used in the string, therefore we need to use the ugly formatting shown in the first variable in the snippet above. But we can use the <code class="cx hd he hf hg b">dedent</code> function to improve formatting - we simply indent the variable value however we like and then call <code class="cx hd he hf hg b">dedent</code> on it before using it.</p><p id="25d4" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">Alternatively, we could also use <code class="cx hd he hf hg b">inspect.cleandoc</code>, which also strips the leading newline. This function however encodes the whitespaces as special characters (<code class="cx hd he hf hg b">\n</code> and <code class="cx hd he hf hg b">\t</code>), so you might need to reformat it again.</p><p id="3bb0" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">Naturally, when there is <code class="cx hd he hf hg b">dedent</code>, then there needs to be also <code class="cx hd he hf hg b">indent</code> function:</p><pre class="mq mr ms mt mu pe hg pf bp pg bb bk"><span id="2e6a" class="ph oe fq hg b bg pi pj l pk pl">from textwrap import indent<br/><br/>indented = indent(text, "    ", lambda x: not text.splitlines()[0] in x)</span></pre><p id="cc9f" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">We simply supply the text and the string that each line will be indented with (here just 4 spaces, we could — for example — use <code class="cx hd he hf hg b">&gt;&gt;&gt;</code> to make it look like REPL). Additionally, we can supply a predicate that will decide whether the line should be indented or not. In the example above, the <code class="cx hd he hf hg b">lambda</code> function makes it so that first line of string (paragraph) is not indented.</p><h1 id="5874" class="od oe fq bf of og oh gq oi oj ok gt ol om on oo op oq or os ot ou ov ow ox oy bk">Closing Thoughts</h1><p id="d349" class="pw-post-body-paragraph nh ni fq nj b go oz nl nm gr pa no np nq pb ns nt nu pc nw nx ny pd oa ob oc fj bk"><code class="cx hd he hf hg b">textwrap</code> is a simple module with just a few functions/methods, but it once again shows that Python really comes with <em class="pm">"batteries included"</em> for things that don't necessarily need to be standard library, but they can save you so much time when you happen to need them.</p><p id="4243" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">If you happen to do a lot of text processing, then I also recommend checking out the <a class="af ng" href="https://docs.python.org/3/library/text.html" rel="noopener ugc nofollow" target="_blank">whole docs section</a> dedicated to working with text. There are many more modules and little functions that you didn’t know you needed. 😉</p><p id="0480" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><em class="pm">This article was originally posted at </em><a class="af ng" href="https://martinheinz.dev/blog/108" rel="noopener ugc nofollow" target="_blank"><em class="pm">martinheinz.dev</em></a></p></div></div></div><div class="ab cb pn po pp pq" role="separator"><span class="pr by bm ps pt pu"/><span class="pr by bm ps pt pu"/><span class="pr by bm ps pt"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="546b" class="pw-post-body-paragraph nh ni fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">You may also like…</p><div class="pv pw px py pz qa"><a href="https://betterprogramming.pub/everything-you-can-do-with-pythons-bisect-module-40bdaadbc22f?source=post_page-----0d82c377a4c8--------------------------------" rel="noopener  ugc nofollow" target="_blank"><div class="qb ab ik"><div class="qc ab co cb qd qe"><h2 class="bf fr ia z is qf iu iv qg ix iz fp bk">Everything You Can Do With Python’s Bisect Module</h2><div class="qh l"><h3 class="bf b ia z is qf iu iv qg ix iz dx">Learn how to optimize search and keep your data sorted in Python with the "bisect" module</h3></div><div class="qi l"><p class="bf b dy z is qf iu iv qg ix iz dx">betterprogramming.pub</p></div></div><div class="qj l"><div class="qk l ql qm qn qj qo lv qa"/></div></div></a></div></div></div></div></div>    
</body>
</html>