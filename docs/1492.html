<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Welch’s t-Test: The Reliable Way to Compare 2 Population Means with Unequal Variances</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Welch’s t-Test: The Reliable Way to Compare 2 Population Means with Unequal Variances</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/welchs-t-test-the-reliable-way-to-compare-2-population-means-with-unequal-variances-bbf7a62967bc?source=collection_archive---------6-----------------------#2024-06-14">https://towardsdatascience.com/welchs-t-test-the-reliable-way-to-compare-2-population-means-with-unequal-variances-bbf7a62967bc?source=collection_archive---------6-----------------------#2024-06-14</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="e7f1" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">Discover why Welch’s t-Test is the go-to method for accurate statistical comparison, even when variances differ.</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://vitorihaldijiran.medium.com/?source=post_page---byline--bbf7a62967bc--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Vito Rihaldijiran" class="l ep by dd de cx" src="../Images/bc704b6dbbe4c36c5d35d1b83810094f.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*g5pkpZz6G8Mtu1g8Gc_VJA.jpeg"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--bbf7a62967bc--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://vitorihaldijiran.medium.com/?source=post_page---byline--bbf7a62967bc--------------------------------" rel="noopener follow">Vito Rihaldijiran</a></p></div></div></div><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ib ic ah ai aj ak al am an ao ap aq ar id ie if" disabled="">Follow</button></p></div></div></span></div></div><div class="l ig"><span class="bf b bg z dx"><div class="ab cn ih ii ij"><div class="ik il ab"><div class="bf b bg z dx ab im"><span class="in l ig">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--bbf7a62967bc--------------------------------" rel="noopener follow"><p class="bf b bg z io ip iq ir is it iu iv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">8 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Jun 14, 2024</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w ea eb q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon ed in kg kh ki"><div class=""><div class="kj kk kl km kn ko kp am kq kr ks ki"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kt ku kv kw kx ky kz"><p class="bf b dy z dx"><span class="kk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kj lc ld ab q ee le lf" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lb"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count la lb">1</span></p></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lg k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lh an ao ap id li lj lk" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep ll cn"><div class="l ae"><div class="ab cb"><div class="lm ln lo lp lq lr ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ml"><img src="../Images/496b36f28f38276b8d3995b7d278c81d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5wtaSO7Q_6A0mvAV6AwWWg.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Photo by <a class="af nc" href="https://unsplash.com/@simonmaage" rel="noopener ugc nofollow" target="_blank">Simon Maage</a> on <a class="af nc" href="https://unsplash.com/photos/two-pizzas-sitting-on-top-of-plates-on-a-table-eL_eKs7HkLU" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="01de" class="nd ne fq bf nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa bk">Part 1: Background</h2><p id="dc6f" class="pw-post-body-paragraph ob oc fq od b go oe of og gr oh oi oj no ok ol om ns on oo op nw oq or os ot fj bk">In the first semester of my postgrad, I had the opportunity to take the course STAT7055: Introductory Statistics for Business and Finance. Throughout the course, I definitely felt a bit exhausted at times, but the amount of knowledge I gained about the application of various statistical methods in different situations was truly priceless. During the 8th week of lectures, something really interesting caught my attention, specifically the concept of Hypothesis Testing when comparing two populations. I found it fascinating to learn about how the approach differs based on whether the samples are independent or paired, as well as what to do when we know or don’t know the population variance of the two populations, along with how to conduct hypothesis testing for two proportions. However, there is one aspect that wasn’t covered in the material, and it keeps me wondering how to tackle this particular scenario, which is performing Hypothesis Testing from two population means when the variances are unequal, known as the <strong class="od fr">Welch t-Test</strong>.</p><p id="4e79" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">To grasp the concept of how the Welch t-Test is applied, we can explore a dataset for the example case. Each stage of this process involves utilizing the dataset from real-world data.</p><h2 id="5165" class="nd ne fq bf nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa bk">Part 2: The Dataset</h2><p id="addd" class="pw-post-body-paragraph ob oc fq od b go oe of og gr oh oi oj no ok ol om ns on oo op nw oq or os ot fj bk">The dataset I’m using contains real-world data on World Agricultural Supply and Demand Estimates (WASDE) that are regularly updated. The WASDE dataset is put together by the World Agricultural Outlook Board (WAOB). It is a monthly report that provides annual predictions for various global regions and the United States when it comes to wheat, rice, coarse grains, oilseeds, and cotton. Furthermore, the dataset also covers forecasts for sugar, meat, poultry, eggs, and milk in the United States. It is sourced from the Nasdaq website, and you are welcome to access it for free here: <a class="af nc" href="https://data.nasdaq.com/databases/WASDE" rel="noopener ugc nofollow" target="_blank">WASDE dataset</a>. There are 3 datasets, but I only use the first one, which is the Supply and Demand Data. Column definitions can be seen here:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk oz"><img src="../Images/8a10961af52d6fff8213aa7d77495e7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*tHfW7dKut22y6SsO7_n3cg.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 1: Column Definitions by <a class="af nc" href="https://data.nasdaq.com/databases/WASDE" rel="noopener ugc nofollow" target="_blank">NASDAQ</a></figcaption></figure><p id="e97a" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">I am going to use two different samples from specific regions, commodities, and items to simplify the testing process. Additionally, we will be using the R Programming Language for the end-to-end procedure.</p><p id="88a2" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">Now let’s do a proper data preparation:</p><pre class="mm mn mo mp mq pa pb pc bp pd bb bk"><span id="ad87" class="pe ne fq pb b bg pf pg l ph pi">library(dplyr)<br/><br/># Read and preprocess the dataframe<br/>wasde_data &lt;- read.csv("wasde_data.csv") %&gt;%<br/>  select(-min_value, -max_value, -year, -period) %&gt;%<br/>  filter(item == "Production", commodity == "Wheat")<br/><br/># Filter data for Argentina and Australia<br/>wasde_argentina &lt;- wasde_data %&gt;%<br/>  filter(region == "Argentina") %&gt;%<br/>  arrange(desc(report_month))<br/><br/>wasde_oz &lt;- wasde_data %&gt;%<br/>  filter(region == "Australia") %&gt;%<br/>  arrange(desc(report_month))</span></pre><p id="3aa4" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">I divided two samples into two different regions, namely Argentina and Australia. And the focus is production in wheat commodities.</p><p id="b8f8" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">Now we’re set. But wait..</p><p id="01b6" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">Before delving further into the application of the Welch t-Test, I can’t help but wonder why it is necessary to test whether the two population variances are equal or not.</p><h2 id="054b" class="nd ne fq bf nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa bk">Part 3: Testing Equality of Variances</h2><p id="c158" class="pw-post-body-paragraph ob oc fq od b go oe of og gr oh oi oj no ok ol om ns on oo op nw oq or os ot fj bk">When conducting hypothesis testing to compare two population means without knowledge of the population variances, it’s crucial to confirm the equality of variances in order to select the appropriate statistical test. If the variances turn out to be the same, we opt for the pooled variance t-test; otherwise, we can use Welch’s t-test. This important step guarantees the precision of the outcomes, since using an incorrect test could result in wrong conclusions due to higher risks of Type I and Type II errors. By checking for equality in variances, we make sure that the hypothesis testing process relies on accurate assumptions, ultimately leading to more dependable and valid conclusions.</p><p id="312a" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">Then how do we test the two population variances?</p><p id="d76f" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">We have to generate two hypotheses as below:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk pj"><img src="../Images/1badb6467e2577b9c1e5d5e12b045426.png" data-original-src="https://miro.medium.com/v2/resize:fit:404/format:webp/1*lUy-bjqrTv8Mhm1ysZnzeA.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 2: null and alternative hypotheses for testing equality variances by author</figcaption></figure><p id="3c4a" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">The rule of thumb is very simple:</p><ol class=""><li id="588f" class="ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot pk pl pm bk">If the test statistic falls into rejection region, then Reject H0 or Null Hypothesis.</li><li id="19a6" class="ob oc fq od b go pn of og gr po oi oj no pp ol om ns pq oo op nw pr or os ot pk pl pm bk">Otherwise, we Fail to Reject H0 or Null Hypothesis.</li></ol><p id="9caf" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">We can set the hypotheses like this:</p><pre class="mm mn mo mp mq pa pb pc bp pd bb bk"><span id="f6cb" class="pe ne fq pb b bg pf pg l ph pi"># Hypotheses: Variance Comparison<br/>h0_variance &lt;- "Population variance of Wheat production in Argentina equals that in Australia"<br/>h1_variance &lt;- "Population variance of Wheat production in Argentina differs from that in Australia"</span></pre><p id="8384" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">Now we should do the test statistic. But how do we get this test statistic? we use <strong class="od fr">F-Test.</strong></p><p id="4170" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">An F-test is any statistical test used to compare the variances of two samples or the ratio of variances between multiple samples. The test statistic, random variable F, is used to determine if the tested data has an F-distribution under the true null hypothesis, and true customary assumptions about the error term.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ps"><img src="../Images/cc246bde9db07f87f7f2c5037cc78124.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*cTJeUp0VbBqyUJJ6.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 3: Illustration Probability Density Function (PDF) of F Distribution by <a class="af nc" href="https://en.wikipedia.org/wiki/F-distribution" rel="noopener ugc nofollow" target="_blank">Wikipedia</a></figcaption></figure><p id="0b6d" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">we can generate the test statistic value with dividing <strong class="od fr">two sample variances </strong>like this:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk pt"><img src="../Images/939a42400c131cb5b197645d6c10bf33.png" data-original-src="https://miro.medium.com/v2/resize:fit:236/format:webp/1*Lst1-i3Hs729124DriiYiQ.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 4: F test formula by author</figcaption></figure><p id="ad13" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">and the rejection region is:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk pu"><img src="../Images/105d6c38ba508ff4c923308c85641cdd.png" data-original-src="https://miro.medium.com/v2/resize:fit:826/format:webp/1*jDpCi4Q59qPhZJXN8XVQ9Q.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 5: Rejection Region of F test by author</figcaption></figure><p id="4dea" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">where n is the sample size and alpha is significance level. so when the F value falls into either of these rejection region, we reject null hypothesis.</p><p id="2271" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">but..</p><p id="069c" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">the trick is: The labeling of sample 1 and sample 2 is actually random, so let’s <strong class="od fr">make sure to place the larger sample variance on top every time</strong>. This way, our F-statistic will consistently be greater than 1, and <strong class="od fr">we just need to refer to the upper cut-off to reject H0 at significance level α whenever</strong>.</p><p id="126f" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">we can do this by:</p><pre class="mm mn mo mp mq pa pb pc bp pd bb bk"><span id="ecc1" class="pe ne fq pb b bg pf pg l ph pi"># Calculate sample variances<br/>sample_var_argentina &lt;- var(wasde_argentina$value)<br/>sample_var_oz &lt;- var(wasde_oz$value)<br/><br/># Calculate F calculated value<br/>f_calculated &lt;- sample_var_argentina / sample_var_oz</span></pre><p id="edac" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">we’ll use 5% significance level (0.05), so the decision rule is:</p><pre class="mm mn mo mp mq pa pb pc bp pd bb bk"><span id="0e94" class="pe ne fq pb b bg pf pg l ph pi"># Define significance level and degrees of freedom<br/>alpha &lt;- 0.05<br/>alpha_half &lt;- alpha / 2<br/>n1 &lt;- nrow(wasde_argentina)<br/>n2 &lt;- nrow(wasde_oz)<br/>df1 &lt;- n1 - 1<br/>df2 &lt;- n2 - 1<br/><br/># Calculate critical F values<br/>f_value_lower &lt;- qf(alpha_half, df1, df2)<br/>f_value_upper &lt;- qf(1 - alpha_half, df1, df2)<br/><br/># Variance comparison result<br/>if (f_calculated &gt; f_value_lower &amp; f_calculated &lt; f_value_upper) {<br/>  cat("Fail to Reject H0: ", h0_variance, "\n")<br/>  equal_variances &lt;- TRUE<br/>} else {<br/>  cat("Reject H0: ", h1_variance, "\n")<br/>  equal_variances &lt;- FALSE<br/>}</span></pre><p id="422d" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">the result is <strong class="od fr">we reject Null Hypothesis at significance level of 5%</strong>, in other words, from this test we believe the population variances from the two populations are not equal. Now we know why we should use Welch t-Test instead of Pooled Variance t-Test.</p><h2 id="fb72" class="nd ne fq bf nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa bk">Part 4: The main course, Welch t-Test</h2><p id="078b" class="pw-post-body-paragraph ob oc fq od b go oe of og gr oh oi oj no ok ol om ns on oo op nw oq or os ot fj bk">The Welch t-test, also called Welch’s unequal variances t-test, is a statistical method used for comparing the means of two separate samples. Instead of assuming equal variances like the standard pooled variance t-test, the Welch t-test is more robust as it does not make this assumption. This adjustment in degrees of freedom leads to a more precise evaluation of the difference between the two sample means. By not assuming equal variances, the Welch t-test offers a more dependable outcome when working with real-world data where this assumption may not be true. It is preferred for its adaptability and dependability, ensuring that conclusions drawn from statistical analyses remain valid even if the equal variances assumption is not met.</p><p id="f361" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">The test statistic formula is:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk pv"><img src="../Images/8e868f241b0b45b6848abeb41ea68fac.png" data-original-src="https://miro.medium.com/v2/resize:fit:274/format:webp/1*Teq2EfuF852ZvhUNClrghw.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 6: test statistic formula of Welch t-Test by author</figcaption></figure><p id="65f0" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">where:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk pw"><img src="../Images/a4f7446496cfeaeca33ea42a07ef1bdf.png" data-original-src="https://miro.medium.com/v2/resize:fit:630/format:webp/1*n53YGUAmJLkscBam143H0Q.png"/></div></figure><p id="fd67" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">and the Degree of Freedom can be defined like this:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk px"><img src="../Images/1f96a4ce53fcb1a6f40483856d451659.png" data-original-src="https://miro.medium.com/v2/resize:fit:392/format:webp/1*dPGzUHo6qjycT3KEwqBDVg.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 7: Degree of Freedom formula by author</figcaption></figure><p id="5b68" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">The rejection region for the Welch t-test depends on the chosen significance level and whether the test is one-tailed or two-tailed.</p><p id="e5ca" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk"><strong class="od fr">Two-tailed test</strong>: The null hypothesis is rejected if the absolute value of the test statistic |t| is greater than the critical value from the t-distribution with ν degrees of freedom at α/2.</p><ul class=""><li id="c738" class="ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot py pl pm bk">∣t∣&gt;tα/2,ν​</li></ul><p id="0548" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk"><strong class="od fr">One-tailed test</strong>: The null hypothesis is rejected if the test statistic t is greater than the critical value from the t-distribution with ν degrees of freedom at α for an upper-tailed test, or if t is less than the negative critical value for a lower-tailed test.</p><ul class=""><li id="e768" class="ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot py pl pm bk"><strong class="od fr">Upper-tailed test</strong>: t &gt; tα,ν</li><li id="ed14" class="ob oc fq od b go pn of og gr po oi oj no pp ol om ns pq oo op nw pr or os ot py pl pm bk"><strong class="od fr">Lower-tailed test</strong>: t &lt; −tα,ν</li></ul><p id="3f4f" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">So let’s do one example with <strong class="od fr">One-tailed Welch t-Test.</strong></p><p id="07f6" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">lets generate the hypotheses:</p><pre class="mm mn mo mp mq pa pb pc bp pd bb bk"><span id="13f2" class="pe ne fq pb b bg pf pg l ph pi">h0_mean &lt;- "Population mean of Wheat production in Argentina equals that in Australia"<br/>h1_mean &lt;- "Population mean of Wheat production in Argentina is greater than that in Australia"</span></pre><p id="1efa" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">this is a <strong class="od fr">Upper Tailed Test, </strong>so the rejection region is: t &gt; tα,ν</p><p id="bd4d" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">and by using the formula given above, and by using same significance level (0.05):</p><pre class="mm mn mo mp mq pa pb pc bp pd bb bk"><span id="0b23" class="pe ne fq pb b bg pf pg l ph pi"># Calculate sample means<br/>sample_mean_argentina &lt;- mean(wasde_argentina$value)<br/>sample_mean_oz &lt;- mean(wasde_oz$value)<br/><br/># Welch's t-test (unequal variances)<br/>s1 &lt;- sample_var_argentina<br/>s2 &lt;- sample_var_oz<br/>t_calculated &lt;- (sample_mean_argentina - sample_mean_oz) / sqrt(s1/n1 + s2/n2)<br/>df &lt;- (s1/n1 + s2/n2)^2 / ((s1^2/(n1^2 * (n1-1))) + (s2^2/(n2^2 * (n2-1))))<br/>t_value &lt;- qt(1 - alpha, df)<br/><br/># Mean comparison result<br/>if (t_calculated &gt; t_value) {<br/>  cat("Reject H0: ", h1_mean, "\n")<br/>} else {<br/>  cat("Fail to Reject H0: ", h0_mean, "\n")<br/>}</span></pre><p id="27e9" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">the result is <strong class="od fr">we Fail to Reject H0 at significance level of 5%, then Population mean of Wheat production in Argentina equals that in Australia.</strong></p><p id="2f93" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">That’s how to conduct Welch t-Test. Now your turn. Happy experimenting!</p><h2 id="2f0b" class="nd ne fq bf nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa bk">Part 5: Conclusion</h2><p id="d70c" class="pw-post-body-paragraph ob oc fq od b go oe of og gr oh oi oj no ok ol om ns on oo op nw oq or os ot fj bk">When comparing two population means during hypothesis testing, it is really important to start by checking if the variances are equal. This initial step is crucial as it helps in deciding which statistical test to use, guaranteeing precise and dependable outcomes. If it turns out that the variances are indeed equal, you can go ahead and apply the standard t-test with pooled variances. However, in cases where the variances are not equal, it is recommended to go with Welch’s t-test.</p><p id="3dfc" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">Welch’s t-test provides a strong solution for comparing means when the assumption of equal variances does not hold true. By adjusting the degrees of freedom to accommodate for the uneven variances, Welch’s t-test gives a more precise and dependable evaluation of the statistical importance of the difference between two sample means. This adaptability makes it a popular choice in various practical situations where sample sizes and variances can vary significantly.</p><p id="0799" class="pw-post-body-paragraph ob oc fq od b go ou of og gr ov oi oj no ow ol om ns ox oo op nw oy or os ot fj bk">In conclusion, checking for equality of variances and utilizing Welch’s t-test when needed ensures the accuracy of hypothesis testing. This approach reduces the chances of Type I and Type II errors, resulting in more reliable conclusions. By selecting the appropriate test based on the equality of variances, we can confidently analyze the findings and make well-informed decisions grounded on empirical evidence.</p><h2 id="8de2" class="nd ne fq bf nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz oa bk">Resources</h2><ul class=""><li id="d896" class="ob oc fq od b go oe of og gr oh oi oj no ok ol om ns on oo op nw oq or os ot py pl pm bk"><em class="pz">Nasdaq Data Link</em>. (n.d.). <em class="pz">Nasdaq Data Link</em>. Retrieved June 14, 2024, from <a class="af nc" href="https://data.nasdaq.com" rel="noopener ugc nofollow" target="_blank">https://data.nasdaq.com</a></li><li id="ff9f" class="ob oc fq od b go pn of og gr po oi oj no pp ol om ns pq oo op nw pr or os ot py pl pm bk"><em class="pz">F-Test in Statistics</em>. (2024, June 14). <em class="pz">F-Test in Statistics</em>. <a class="af nc" href="https://www.geeksforgeeks.org/f-test/" rel="noopener ugc nofollow" target="_blank">https://www.geeksforgeeks.org/f-test/</a></li><li id="b545" class="ob oc fq od b go pn of og gr po oi oj no pp ol om ns pq oo op nw pr or os ot py pl pm bk"><em class="pz">Two Independent Samples Unequal Variance (Welch’s Test) — ENV710 Statistics Review Website</em>. (n.d.). <em class="pz">Two Independent Samples Unequal Variance (Welch’s Test) — ENV710 Statistics Review Website</em>. Retrieved June 14, 2024, from <a class="af nc" href="https://sites.nicholas.duke.edu/statsreview/means/welch/" rel="noopener ugc nofollow" target="_blank">https://sites.nicholas.duke.edu/statsreview/means/welch/</a></li></ul></div></div></div></div>    
</body>
</html>