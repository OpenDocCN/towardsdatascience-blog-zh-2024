<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Plotting Golf Courses in R with Google Earth</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Plotting Golf Courses in R with Google Earth</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/plotting-golf-courses-in-r-with-google-earth-8ee8aa6f6293?source=collection_archive---------5-----------------------#2024-05-06">https://towardsdatascience.com/plotting-golf-courses-in-r-with-google-earth-8ee8aa6f6293?source=collection_archive---------5-----------------------#2024-05-06</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="ba87" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">A user guide to mapping golf courses in Google Earth and bringing them to life in R.</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@adam.c.beaudet?source=post_page---byline--8ee8aa6f6293--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Adam Beaudet" class="l ep by dd de cx" src="../Images/f5084b418f043e11f35a50a6a63d507f.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*ju-c1ZxTJNhnwtagGUWWtg.png"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--8ee8aa6f6293--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@adam.c.beaudet?source=post_page---byline--8ee8aa6f6293--------------------------------" rel="noopener follow">Adam Beaudet</a></p></div></div></div><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ib ic ah ai aj ak al am an ao ap aq ar id ie if" disabled="">Follow</button></p></div></div></span></div></div><div class="l ig"><span class="bf b bg z dx"><div class="ab cn ih ii ij"><div class="ik il ab"><div class="bf b bg z dx ab im"><span class="in l ig">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--8ee8aa6f6293--------------------------------" rel="noopener follow"><p class="bf b bg z io ip iq ir is it iu iv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">7 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">May 6, 2024</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w ea eb q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon ed in kg kh ki"><div class=""><div class="kj kk kl km kn ko kp am kq kr ks ki"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kt ku kv kw kx ky kz"><p class="bf b dy z dx"><span class="kk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kj la lb ab q ee lc ld" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="le"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lf k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lg an ao ap id lh li lj" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep lk cn"><div class="l ae"><div class="ab cb"><div class="ll lm ln lo lp lq ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><p id="a85a" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">In the land of data viz, we are often inundated with bar, line, and pie charts. But it doesn’t have to be that way — in this article, I will demonstrate how to plot golf courses.</p><figure class="ne nf ng nh ni nj nk nl paragraph-image"><div class="ab cn cb nm"><img src="../Images/64d7018ea587cf6c48482bb7237bb72b.png" data-original-src="https://miro.medium.com/v2/format:webp/1*_50SG7By7fKicjo38SEo6A.png"/></div><figcaption class="no np nq nk nl nr ns bf b bg z dx">Image by the author</figcaption></figure><h1 id="1f56" class="nt nu fq bf nv nw nx gq ny nz oa gt ob oc od oe of og oh oi oj ok ol om on oo bk"><strong class="al">Introduction</strong></h1><p id="2c96" class="pw-post-body-paragraph mi mj fq mk b go op mm mn gr oq mp mq mr or mt mu mv os mx my mz ot nb nc nd fj bk">There are close to 40,000 golf courses worldwide. If you are passionate about golf and/or data like I am then this is for you. After plotting a course, there are some other cool things we can do as well:</p><ul class=""><li id="dcfb" class="mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ou ov ow bk"><strong class="mk fr">Overlaying shots onto course map — </strong>this can be done<strong class="mk fr"> </strong>with some manipulation using the Plotly package, or by downloading individual golf shot “placemarks” from Google Earth and plotting them as points on our map. For that time you first broke 90, 80,70, etc. this could be a good way to commemorate the triumph.</li><li id="329c" class="mi mj fq mk b go ox mm mn gr oy mp mq mr oz mt mu mv pa mx my mz pb nb nc nd ou ov ow bk"><strong class="mk fr">Calculating course metrics</strong>— it is generally known that Pebble Beach has tiny “postage stamp” greens. Or that Whistling Straits has tons of bunkers. A secondary benefit that comes with tracing course element polygons is being able to calculate the area of each. This allows us to derive average green sizes, number of bunkers, average width of fairways, etc. for any course that we plot.</li></ul><p id="a4fe" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">The above bullet points are not a comprehensive list by any means, but it gives the project a future roadmap to expand on.</p><h1 id="31b0" class="nt nu fq bf nv nw nx gq ny nz oa gt ob oc od oe of og oh oi oj ok ol om on oo bk"><strong class="al">Table of Contents</strong></h1><p id="612d" class="pw-post-body-paragraph mi mj fq mk b go op mm mn gr oq mp mq mr or mt mu mv os mx my mz ot nb nc nd fj bk">I will start by introducing the steps of the project, and later go into more detail of each:</p><ol class=""><li id="c956" class="mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd pc ov ow bk">trace polygons in Google Earth that represent elements of a golf course (tee boxes, fairways, bunkers, greens, water, hazards)</li><li id="eccd" class="mi mj fq mk b go ox mm mn gr oy mp mq mr oz mt mu mv pa mx my mz pb nb nc nd pc ov ow bk">download polygons from Google Earth as KML file</li><li id="8f1d" class="mi mj fq mk b go ox mm mn gr oy mp mq mr oz mt mu mv pa mx my mz pb nb nc nd pc ov ow bk">read KML data into R and do some light data cleaning/manipulation</li><li id="5333" class="mi mj fq mk b go ox mm mn gr oy mp mq mr oz mt mu mv pa mx my mz pb nb nc nd pc ov ow bk">plot golf course using ggplot2</li></ol><h1 id="d0aa" class="nt nu fq bf nv nw nx gq ny nz oa gt ob oc od oe of og oh oi oj ok ol om on oo bk"><strong class="al">Polygon Tracing in Google Earth</strong></h1><p id="728f" class="pw-post-body-paragraph mi mj fq mk b go op mm mn gr oq mp mq mr or mt mu mv os mx my mz ot nb nc nd fj bk">To begin, let’s head to Google Earth with a golf course in mind that we would like to plot. We will use Erin Hills in Wisconsin as a example. It is often helpful to either be familiar with the course layout or have a course map pulled up to more easily identify each hole via satellite imagery.</p><p id="aa7b" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">We will want to create a new project by clicking the blue “+ New” button in the top left corner. Next, we will use a Local KML file and click “Create”. Lastly, give the project a name, likely just the name of the course being mapped. The name of the project will be the name of the KML file we end up downloading upon completion.</p><figure class="ne nf ng nh ni nj nk nl paragraph-image"><div role="button" tabindex="0" class="pe pf ed pg bh ph"><div class="nk nl pd"><img src="../Images/0f0199f76494e9b19a4662505077abf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3w1JLSA5rofetKo9f8rlSA.gif"/></div></div><figcaption class="no np nq nk nl nr ns bf b bg z dx">Image from Google Earth, edited by the author</figcaption></figure><p id="3860" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Now that our project folder is set up, we can start tracing. <strong class="mk fr">Disclaimer</strong> that Erin Hills has 138 bunkers, which I found out the hard way can be a bit tedious to trace… Anyway, let’s head to the first tee to start tracing.</p><p id="535e" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Once at the first tee, start by identifying the key elements of the hole. The first hole at Erin Hills has water and a hazard left of the fairway, a fairway dog-legging to the left, a few bunkers, etc. To begin tracing, click “Add path or polygon” which is the icon with a line and connected dots second from the left in the top toolbar. This will initialize a pencil of sorts that we can trace with.</p><p id="3734" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk"><strong class="mk fr">Additional note</strong>: you can rotate your screen by simultaneously holding shift and pressing the left or right arrows.</p><p id="538f" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">I typically start with the tee boxes, and work my way to the green. It is required that each traced polygon forms a closed shape, meaning you return to the original starting point. After finishing a polygon, save it to your project and give it a name. It is also important to name each polygon with a consistent naming convention, such as <strong class="mk fr">course_hole_element,</strong> which literally translates in this case to: <strong class="mk fr">erin_hills_hole_1_tee</strong>, or <strong class="mk fr">erin_hills_hole_5_fairway</strong>, etc. We will later use string matching in our R code to extract these key pieces of information from each polygon name. This will allow us to create a polygon element-to-color mapping, a.k.a. a way to tell ggplot2 how to color each polygon. So if “bunker” is the element, then we want to color it tan. If “water” is the element, it should be blue. It also allows us to extract the course name and hole numbers which open up additional plotting capabilities.</p><p id="f4d9" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Below is Hole 15 at Erin Hills (my favorite from when I played there). The left image is the raw Google Earth image, the middle is after we have traced it, and the right image is after it has been rendered with ggplot2. I chose not to plot rough, trees, cart paths, etc.</p></div></div><div class="nj"><div class="ab cb"><div class="ll pi lm pj ln pk cf pl cg pm ci bh"><div class="ne nf ng nh ni ab ke"><figure class="le nj pn po pp pq pr paragraph-image"><div role="button" tabindex="0" class="pe pf ed pg bh ph"><img src="../Images/a6c3a72c26da37453e5cfbf44c9bd968.png" data-original-src="https://miro.medium.com/v2/resize:fit:604/format:webp/1*kQ1RD5T5nX8VD0g7RlOodA.png"/></div></figure><figure class="le nj ps po pp pq pr paragraph-image"><div role="button" tabindex="0" class="pe pf ed pg bh ph"><img src="../Images/a5f8a89ee3d185e97d27035f465c1423.png" data-original-src="https://miro.medium.com/v2/resize:fit:624/format:webp/1*hHaL1gNR_uaXhwf3IjQwVw.png"/></div></figure><figure class="le nj pt po pp pq pr paragraph-image"><div role="button" tabindex="0" class="pe pf ed pg bh ph"><img src="../Images/89e91b1153ebf02adcb95b20b2caa32c.png" data-original-src="https://miro.medium.com/v2/resize:fit:774/format:webp/1*m9qEEW_uiIScaHUjDdqXXg.png"/></div><figcaption class="no np nq nk nl nr ns bf b bg z dx pu ed pv pw">(<strong class="bf nv">Left</strong>) Photo from Google Earth, (<strong class="bf nv">Middle</strong>) Photo from Google Earth, edited by author, (<strong class="bf nv">Right</strong>) Image by the author</figcaption></figure></div></div></div></div><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="a25e" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Once we’ve finished mapping our hole or course, it is time to export all that hard work into a KML file. This can be done by clicking the three vertical dots on the left side of the screen where your project resides. This project works best with geoJSON data, which we can easily convert our KML file to in the next steps. Now we’re ready to head to R.</p><h1 id="096f" class="nt nu fq bf nv nw nx gq ny nz oa gt ob oc od oe of og oh oi oj ok ol om on oo bk"><strong class="al">Plotting in R</strong></h1><p id="cba8" class="pw-post-body-paragraph mi mj fq mk b go op mm mn gr oq mp mq mr or mt mu mv os mx my mz ot nb nc nd fj bk">The packages we will need to prepare us for plotting are: <strong class="mk fr">sf</strong> (for working with geospatial data), <strong class="mk fr">tidyverse</strong> (for data cleaning and plotting), <strong class="mk fr">stringr</strong> (for string matching), and <strong class="mk fr">geojsonsf</strong> (for converting from KML to geoJSON). Our first step is reading in the KML file, which can be done with the <strong class="mk fr">st_read()</strong> function from sf.</p><pre class="ne nf ng nh ni px py pz bp qa bb bk"><span id="93dd" class="qb nu fq py b bg qc qd l qe qf"># load libraries<br/> library(sf)<br/> library(tidyverse)<br/> library(stringr)<br/> library(geojsonsf)<br/><br/>kml_df &lt;- st_read("/Users/adambeaudet/Downloads/erin_hills.kml")</span></pre><p id="a9a6" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">Great! Now we should have our golf course KML data in R. The data frame should have 2 columns: <strong class="mk fr">Name</strong> (project name, or course name in our case), and <strong class="mk fr">geometry</strong> (a list of all individual points comprising the polygons we traced). As briefly mentioned earlier, let’s convert our KML data to geoJSON and also extract the course name and hole numbers.</p><pre class="ne nf ng nh ni px py pz bp qa bb bk"><span id="7285" class="qb nu fq py b bg qc qd l qe qf"># convert from KML to geoJSON<br/>geojson_df &lt;- st_as_sf(kml_df, "POLYGON")<br/><br/># extracting course name and hole number from polygon name<br/># assuming "course_hole_element" naming convention is used for polygons<br/>geojson_df$course_name &lt;- str_match(geojson_df$Name, “^(.+)_hole”)[,2] <br/>geojson_df$hole_num &lt;- gsub(“.*_hole_(\\d+)_.*”, “\\1”, geojson_df$Name)</span></pre><p id="a311" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">To get our maps to point due north we need to project them in a way that preserves direction. We can do this with the <strong class="mk fr">st_transform()</strong> function.</p><pre class="ne nf ng nh ni px py pz bp qa bb bk"><span id="d364" class="qb nu fq py b bg qc qd l qe qf"># define a CRS so map always points due north<br/>crs &lt;- "+proj=lcc +lat_1=33 +lat_2=45 +lat_0=39 +lon_0=-96 +x_0=0 +y_0=0 +datum=WGS84 +units=m +no_defs"<br/><br/># transform data to CRS<br/>geojson_df &lt;- st_transform(geojson_df, crs)</span></pre><p id="3784" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">We’re almost ready to plot, but first, we need to tell ggplot2 how each polygon should be colored. Below is the color palette my project is using, but feel free to customize as you wish.</p><p id="5162" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk"><strong class="mk fr">Optional</strong>: in this step we can also calculate the centroids of our polygons with the <strong class="mk fr">st_centroid()</strong> function so we can overlay the hole number onto each green.</p><figure class="ne nf ng nh ni nj nk nl paragraph-image"><div role="button" tabindex="0" class="pe pf ed pg bh ph"><div class="nk nl qg"><img src="../Images/577b95d109ebd41ce97372c44f0a77d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QnsRBFnrq_pAEkyE_YQGoQ.png"/></div></div><figcaption class="no np nq nk nl nr ns bf b bg z dx">Image by the author</figcaption></figure><pre class="ne nf ng nh ni px py pz bp qa bb bk"><span id="a5fe" class="qb nu fq py b bg qc qd l qe qf">geojson_df &lt;- geojson_df %&gt;%<br/> mutate(color = case_when(<br/> grepl(“_tee$”, Name) ~ “#57B740”,<br/> grepl(“_bunker$”, Name) ~ “#EDE6D3”,<br/> grepl(“_water$”, Name) ~ “#2243b6”,<br/> grepl(“_fairway$”, Name) ~ “#57B740”,<br/> grepl(“_green$”, Name) ~ “#86D14A”,<br/> grepl(“_hazard$”, Name) ~ “#094d1d”<br/> )) %&gt;%<br/>mutate(centroid = st_centroid(geometry))</span></pre><p id="e70a" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">We’re officially ready to plot. We can use a combination of <strong class="mk fr">geom_sf()</strong>, <strong class="mk fr">geom_text()</strong>, and even <strong class="mk fr">geom_point()</strong> if we want to get fancy and plot shots on top of our map. I typically remove gridlines, axis labels, and the legend for a cleaner look.</p><pre class="ne nf ng nh ni px py pz bp qa bb bk"><span id="9f97" class="qb nu fq py b bg qc qd l qe qf">ggplot() +<br/>geom_sf(data = geojson_df, aes(fill = color), color = "black") +<br/>geom_text(data = filter(geojson_df, grepl("_green$", Name)),<br/>aes(x = st_coordinates(centroid)[, 1],<br/>y = st_coordinates(centroid)[, 2],<br/>label = hole_num),<br/>size = 3, color = "black", fontface = "bold", hjust = 0.5, vjust = 0.5) +<br/>scale_fill_identity() +<br/>theme_minimal() +<br/>theme(axis.title.x = element_blank(),<br/>axis.title.y = element_blank(),<br/>axis.text.x = element_blank(),<br/>axis.text.y = element_blank(),<br/>plot.title = element_text(size = 16),<br/>panel.grid.major = element_blank(),<br/>panel.grid.minor = element_blank()) +<br/>theme(legend.position = "none") +<br/>labs(title = 'Erin Hills | Hartford, WI')</span></pre><p id="ed2d" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">And there you have it — a golf course plotted in R, what a concept!</p><p id="8a6b" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">To view other courses I have plotted at the time of writing this article, you can visit my Shiny app: <a class="af qh" href="https://abodesy14.shinyapps.io/golfMapsR/" rel="noopener ugc nofollow" target="_blank">https://abodesy14.shinyapps.io/golfMapsR/</a></p><p id="fa38" class="pw-post-body-paragraph mi mj fq mk b go ml mm mn gr mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd fj bk">If you followed along, had fun in doing so, or are intrigued, feel free to try mapping your favorite courses and create a Pull Request for the <strong class="mk fr">golfMapsR</strong> repository that I maintain: <a class="af qh" href="https://github.com/abodesy14/golfMapsR" rel="noopener ugc nofollow" target="_blank">https://github.com/abodesy14/golfMapsR</a><br/>With some combined effort, we can create a nice little database of plottable golf courses around the world!</p></div></div></div></div>    
</body>
</html>