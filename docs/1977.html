<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Multi-Agent-as-a-Service — A Senior Engineer’s Overview</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Multi-Agent-as-a-Service — A Senior Engineer’s Overview</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/multi-agent-as-a-service-a-senior-engineers-overview-fc759f5bbcfa?source=collection_archive---------1-----------------------#2024-08-14">https://towardsdatascience.com/multi-agent-as-a-service-a-senior-engineers-overview-fc759f5bbcfa?source=collection_archive---------1-----------------------#2024-08-14</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="gr gs gt gu gv ab"><div><div class="ab gw"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@samanrj?source=post_page---byline--fc759f5bbcfa--------------------------------" rel="noopener follow"><div class="l gx gy by gz ha"><div class="l ed"><img alt="Saman (Sam) Rajaei" class="l ep by dd de cx" src="../Images/d7f3f3f8bb70fcf94f4dc54534a23974.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*oiXcAaucVh4EUhTbsZbEsw@2x.jpeg"/><div class="hb by l dd de em n hc eo"/></div></div></a></div></div><div class="hd ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--fc759f5bbcfa--------------------------------" rel="noopener follow"><div class="l he hf by gz hg"><div class="l ed"><img alt="Towards Data Science" class="l ep by br hh cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hb by l br hh em n hc eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hi ab q"><div class="ab q hj"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hk hl bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hm" data-testid="authorName" href="https://medium.com/@samanrj?source=post_page---byline--fc759f5bbcfa--------------------------------" rel="noopener follow">Saman (Sam) Rajaei</a></p></div></div></div><span class="hn ho" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hk hl dx"><button class="hp hq ah ai aj ak al am an ao ap aq ar hr hs ht" disabled="">Follow</button></p></div></div></span></div></div><div class="l hu"><span class="bf b bg z dx"><div class="ab cn hv hw hx"><div class="hy hz ab"><div class="bf b bg z dx ab ia"><span class="ib l hu">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hm ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--fc759f5bbcfa--------------------------------" rel="noopener follow"><p class="bf b bg z ic id ie if ig ih ii ij bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hn ho" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">8 min read</span><div class="ik il l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Aug 14, 2024</span></div></span></div></span></div></div></div><div class="ab cp im in io ip iq ir is it iu iv iw ix iy iz ja jb"><div class="h k w ea eb q"><div class="jr l"><div class="ab q js jt"><div class="pw-multi-vote-icon ed ib ju jv jw"><div class=""><div class="jx jy jz ka kb kc kd am ke kf kg jw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kh ki kj kk kl km kn"><p class="bf b dy z dx"><span class="jy">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao jx kq kr ab q ee ks kt" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="kp"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count ko kp">4</span></p></button></div></div></div><div class="ab q jc jd je jf jg jh ji jj jk jl jm jn jo jp jq"><div class="ku k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al kv an ao ap hr kw kx ky" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep kz cn"><div class="l ae"><div class="ab cb"><div class="la lb lc ld le lf ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al kv an ao ap hr lg lh kt li lj lk ll lm s ln lo lp lq lr ls lt u lu lv lw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al kv an ao ap hr lg lh kt li lj lk ll lm s ln lo lp lq lr ls lt u lu lv lw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al kv an ao ap hr lg lh kt li lj lk ll lm s ln lo lp lq lr ls lt u lu lv lw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><p id="e913" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">There has been much <a class="af mv" href="https://www.deeplearning.ai/the-batch/issue-245/" rel="noopener ugc nofollow" target="_blank">discussion about AI Agents</a> — <a class="af mv" href="https://medium.com/binome/designing-llm-based-agents-key-principles-part-1-7e8c6fe3ddaf" rel="noopener">pivotal self-contained units capable of performing tasks autonomously, driven by specific instructions and contextual understanding</a>. In fact, the topic has become almost as widely discussed as LLMs. In this article, I consider AI Agents and, more specifically, the concept of <em class="mw">Multi-Agents-as-a-Service </em>from the perspective of the lead engineers, architects, and site reliability engineers (SREs) that must deal with AI agents in production systems going forward.</p><h2 id="2816" class="mx my fq bf mz na nb nc nd ne nf ng nh mi ni nj nk mm nl nm nn mq no np nq nr bk">Context: What Problems Can AI Agents Solve?</h2><p id="f1bd" class="pw-post-body-paragraph lx ly fq lz b ma ns mc md me nt mg mh mi nu mk ml mm nv mo mp mq nw ms mt mu fj bk">AI agents are adept at tasks that benefit from human-friendly interactions:</p><ol class=""><li id="d278" class="lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu nx ny nz bk"><strong class="lz fr">E-Commerce: </strong>agents powered by technologies like LLM-based RAG or Text-to-SQL respond to user inquiries with accurate answers based on company policies, allowing for a more tailored shopping experience and customer journey that can revolutionize e-commerce</li><li id="9c7f" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu nx ny nz bk"><strong class="lz fr">Customer Service:</strong> This is another ideal application. Many of us have experienced long waits to speak with representatives for simple queries like order status updates. Some startups — <a class="af mv" href="https://decagon.ai/" rel="noopener ugc nofollow" target="_blank">Decagon</a> for example — are making strides in addressing these inefficiencies through AI agents.</li><li id="21c6" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu nx ny nz bk"><strong class="lz fr">Personalized Product and Content Creation: </strong>a prime example of this is <a class="af mv" href="https://www.wix.com/" rel="noopener ugc nofollow" target="_blank">Wix</a> — for low-code or no-code website building, Wix developed a chatbot that, through interactive Q&amp;A sessions, creates an initial website for customers according to their description and requirements<strong class="lz fr">.</strong></li></ol><blockquote class="of og oh"><p id="b2a4" class="lx ly mw lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk"><a class="af mv" href="https://aws.amazon.com/what-is/ai-agents/" rel="noopener ugc nofollow" target="_blank">“Humans set goals, but an AI agent independently chooses the best actions it needs to perform to achieve those goals.</a>”</p></blockquote><p id="6c20" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">Overall, LLM-based agents would work great in mimicking natural human dialogue and simple business workflows, often producing results that are both effective and impressively satisfying.</p><h2 id="0a0c" class="mx my fq bf mz na nb nc nd ne nf ng nh mi ni nj nk mm nl nm nn mq no np nq nr bk">An Engineer’s View: AI Agents &amp; Enterprise Production Environments</h2><p id="03c4" class="pw-post-body-paragraph lx ly fq lz b ma ns mc md me nt mg mh mi nu mk ml mm nv mo mp mq nw ms mt mu fj bk">Considering the benefits mentioned, have you ever wondered how AI agents would function within enterprise production environments? What architecture patterns and infrastructure components best support them? What do we do when things inevitably go wrong and the agents <a class="af mv" href="https://www.ibm.com/topics/ai-hallucinations" rel="noopener ugc nofollow" target="_blank">hallucinate</a>, crash or (arguably even worse) carry out incorrect reasoning/planning when performing a critical task?</p><p id="418b" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">As senior engineers, we need to carefully consider the above. Moreover, we must ask an even more important question: <em class="mw">how do we define what a successful deployment of a multi-agent platform looks like in the first place?</em></p><p id="2aee" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">To answer this question, let’s borrow a concept from another software engineering field: Service Level Objectives (SLOs) from Reliability Engineering. SLOs are a critical component in measuring the performance and reliability of services. Simply put, SLOs define the acceptable ratio of “successful” measurements to “all” measurements and their impact on the user journeys. These objectives help us determine the required and expected levels of service from our agents and the broader workflows they support.</p><figure class="oi oj ok ol om on"><div class="oo ic l ed"><div class="op oq l"/></div></figure><p id="1bdc" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">So, how are SLOs relevant to our AI Agent discussion?</p><p id="099d" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">Using a simplified view, let’s consider two important objectives — “Availability” and “Accuracy” — for the agents and identify some more granular SLOs that contribute to these:</p><ol class=""><li id="da4a" class="lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu nx ny nz bk"><strong class="lz fr">Availability:</strong> this refers to the percentage of requests that receive <em class="mw">some </em>successful response (think HTTP 200 status code) from the agents or platform. Historically, the uptime and ping success of the underlying servers (i.e. temporal measures) were key correlated indicators of availability. But with the rise of Micro-services, notional uptime has become less relevant. Modern systems instead focus on the number of successful versus unsuccessful responses to user requests as a more accurate proxy for availability. Other related metrics can be thought of as <a class="af mv" href="https://sre.google/workbook/implementing-slos/#:~:text=A%20latency%20SLO%20can%20capture,for%20different%20types%20of%20services." rel="noopener ugc nofollow" target="_blank"><strong class="lz fr">Latency</strong></a> and <strong class="lz fr">Throughput</strong>.</li><li id="2551" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu nx ny nz bk"><strong class="lz fr">Accuracy: </strong>this, on the other hand, is less about how quickly and consistently the agents return responses to the clients, but rather how <em class="mw">correctly</em>, from a business perspective, they are able to perform their tasks and return data without a human present in the loop to verify their work. Traditional systems also track similar SLOs such as data correctness and quality.</li></ol><p id="c482" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">The act of measuring the two objectives above normally occurs through submission of internal application metrics at runtime, either at set time intervals (e.g. every 10 minutes), or in response to events (user requests, upstream calls etc.). <a class="af mv" href="https://www.dynatrace.com/news/blog/what-is-synthetic-testing/" rel="noopener ugc nofollow" target="_blank">Synthetic</a> probing, for instance, can be used to mimic user requests, trigger relevant events and monitor the numbers. The <strong class="lz fr">key</strong> <strong class="lz fr">idea</strong> to explore here is this: traditional systems are deterministic to a large extent and, therefore, it’s generally more straightforward to instrument, probe and evaluate them. On the other hand, in our beautiful yet non-deterministic world of GenAI agents, this is not necessarily the case.</p><p id="eda8" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk"><em class="mw">Note: the focus of this post is more so on the former of our two objectives - </em><strong class="lz fr"><em class="mw">availability</em></strong><em class="mw">. This includes determining acceptance criteria that sets up baseline cloud/environmental stability to help agents respond to user queries. For a deeper dive into </em><strong class="lz fr"><em class="mw">accuracy</em></strong><em class="mw"> (i.e. defining sensible task scope for the agents, optimizing performance of few-shot methods and evaluation frameworks), </em><a class="af mv" href="https://blog.langchain.dev/planning-for-agents/" rel="noopener ugc nofollow" target="_blank"><em class="mw">this blog post</em></a><em class="mw"> acts as a wonderful primer.</em></p><div class="or os ot ou ov ow"><a href="https://blog.langchain.dev/planning-for-agents/?source=post_page-----fc759f5bbcfa--------------------------------" rel="noopener  ugc nofollow" target="_blank"><div class="ox ab hu"><div class="oy ab co cb oz pa"><h2 class="bf fr hk z ic pb ie if pc ih ij fp bk">Planning for Agents</h2><div class="pd l"><h3 class="bf b hk z ic pb ie if pc ih ij dx">The fourth installment in our "In the Loop Series," in which we talk about what planning means for an agent and how to…</h3></div><div class="pe l"><p class="bf b dy z ic pb ie if pc ih ij dx">blog.langchain.dev</p></div></div><div class="pf l"><div class="pg l ph pi pj pf pk lf ow"/></div></div></a></div><p id="6a71" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">Now, back to the things engineers need to get right to ensure infrastructure reasiness when deploying agents. In order to achieve our target SLOs and provide a reliable and secure platform, senior engineers consistently take into account the following elements:</p><ol class=""><li id="8931" class="lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu nx ny nz bk"><strong class="lz fr">Scalability</strong>: when number of requests increase (suddenly at times), can the system handle them efficiently?</li><li id="337b" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu nx ny nz bk"><strong class="lz fr">Cost-Effectiveness</strong>: LLM usage is expensive, so how can we monitor and control the cost?</li><li id="2b83" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu nx ny nz bk"><strong class="lz fr">High Availability</strong>: how can we keep the system always-available and responsive to customers? Can agents self-heal and recover from errors/crashes?</li><li id="bf95" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu nx ny nz bk"><strong class="lz fr">Security</strong>: How can we ensure data is secure at rest and in transit, perform security audits, vulnerability assessments, etc.?</li><li id="d426" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu nx ny nz bk"><strong class="lz fr">Compliance &amp; Regulatory</strong>: a major topic for AI, what are the relevant data privacy regulations and other industry-specific standards to which we must adhere?</li><li id="5e39" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu nx ny nz bk"><strong class="lz fr">Observability</strong>: how can we gain real-time visibility into AI agents’ activities, health, and resource utilization levels in order to identify and resolve problems before they impact the user experience?</li></ol><p id="9833" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">Sound familiar? These are similar to the challenges that modern web applications, Micro-services<em class="mw"> </em>pattern and Cloud infrastructure aim to address.</p><p id="76b1" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">So, now what? We propose an AI Agent development and maintenance framework that adheres to best-practices developed over the years across a range of engineering and software disciplines.</p><h2 id="d188" class="mx my fq bf mz na nb nc nd ne nf ng nh mi ni nj nk mm nl nm nn mq no np nq nr bk">Multi-Agent-as-a-Service (MAaaS)</h2><p id="9e89" class="pw-post-body-paragraph lx ly fq lz b ma ns mc md me nt mg mh mi nu mk ml mm nv mo mp mq nw ms mt mu fj bk">This time, let us borrow some of <a class="af mv" href="https://learn.microsoft.com/en-us/azure/architecture/best-practices/index-best-practices" rel="noopener ugc nofollow" target="_blank">best-practices for cloud-based applications</a> to redefine how agents are designed in production systems:</p><ul class=""><li id="4cb5" class="lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu pl ny nz bk"><strong class="lz fr">Clear Bounded Context:</strong> Each agent should have a well-defined and small scope of responsibility with clear functionality boundaries. This modular approach ensures that agents are more accurate, easier to manage and scale independently.</li><li id="77c1" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu pl ny nz bk"><strong class="lz fr">RESTful and Asynchronous Inter-Service Communication:</strong> Usage of RESTful APIs for communication between users and agents, and leveraging message brokers for asynchronous communication. This decouples agents, improving scalability and fault tolerance.</li><li id="9eef" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu pl ny nz bk"><strong class="lz fr">Isolated Data Storage per Agent:</strong> Each agent should have its own data storage to ensure data encapsulation and reduce dependencies. Utilize distributed data storage solutions where necessary to support scalability.</li><li id="5890" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu pl ny nz bk"><strong class="lz fr">Containerization and Orchestration:</strong> Using containers (e.g. Docker) to package and deploy agents consistently across different environments, simplifying deployment and scaling. Employ container orchestration platforms like Kubernetes to manage the deployment, scaling, and operational lifecycle of agent services.</li><li id="4c56" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu pl ny nz bk"><strong class="lz fr">Testing and CI/CD:</strong> Implementing automated testing (unit, integration, contract, and end-to-end tests) to ensure the reliable change management for agents. Use CI tools to automatically build and test agents whenever code changes are committed. Establish CD pipelines to deploy changes to production seamlessly, reducing downtime and ensuring rapid iteration cycles.</li><li id="61cd" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu pl ny nz bk"><strong class="lz fr">Observability:</strong> Implementing robust observability instrumentation such as metrics, tracing and logging for the agents and their supporting infrastructure to build a real-time view of the platform’s reliability (tracing could be of particular interest here if a given user request goes through multiple agents). Calculating and tracking SLO’s and error budgets for the agents and the aggregate request flow. Synthetic probing and efficient Alerting on warnings and failures to make sure agent health issues are detected before widely impacting the end users.</li></ul><p id="4b26" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">By applying these principles, we can create a robust framework for AI agents, transforming the concept into “Multi-Agent as a Service” (MAaaS). This approach leverages the best-practices of cloud-based applications to redefine how agents are designed, deployed, and managed.</p></div></div><div class="on"><div class="ab cb"><div class="la pm lb pn lc po cf pp cg pq ci bh"><figure class="oi oj ok ol om on pu pv paragraph-image"><div role="button" tabindex="0" class="pw px ed py bh pz"><div class="pr ps pt"><img src="../Images/6c95c0fa65c7c8f30f0ba535e39a5655.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*xXTYqeKlWcrRXAbYQeZP2A.png"/></div></div><figcaption class="qb qc qd pr ps qe qf bf b bg z dx">Image by the author</figcaption></figure></div></div></div><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="4da3" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">The agent plays a critical role in business operations; however, it does not function in isolation. A robust infrastructure supports it, ensuring it meets production expectations, with some key components:</p><ul class=""><li id="f824" class="lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu pl ny nz bk"><strong class="lz fr">Service-Oriented Architecture:</strong> Design agents as services that can be easily integrated into existing systems.</li><li id="eee6" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu pl ny nz bk"><strong class="lz fr">API Gateway:</strong> Use an API gateway to manage and secure traffic between clients and agents.</li><li id="1b7e" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu pl ny nz bk"><strong class="lz fr">Elastic Infrastructure:</strong> Utilize cloud infrastructure that can elastically scale resources up or down based on demand.</li><li id="2f77" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu pl ny nz bk"><strong class="lz fr">Managed Services:</strong> Take advantage of managed services for databases, vector stores, messaging, and machine learning to reduce operational overhead.</li><li id="9950" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu pl ny nz bk"><strong class="lz fr">Centralized Monitoring:</strong> Use centralized monitoring solutions (e.g., CloudWatch, Prometheus, Grafana) to track the health and performance of agents.</li></ul><p id="3e88" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">To highlight this, we will demo a simple multi-agent system: a debate platform.</p><h2 id="ec5d" class="mx my fq bf mz na nb nc nd ne nf ng nh mi ni nj nk mm nl nm nn mq no np nq nr bk">Example: Multi-Agent Debate System</h2><p id="dedb" class="pw-post-body-paragraph lx ly fq lz b ma ns mc md me nt mg mh mi nu mk ml mm nv mo mp mq nw ms mt mu fj bk">We’ve crafted a multi-agent debate system to demonstrate MAaaS in action. The debate topic is <em class="mw">AI’s impact on the job market</em>. The setup features three agents:</p><ul class=""><li id="598e" class="lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu pl ny nz bk">Team A, which supports AI’s benefits for jobs</li><li id="343f" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu pl ny nz bk">Team B, which holds the opposing view</li><li id="b2ff" class="lx ly fq lz b ma oa mc md me ob mg mh mi oc mk ml mm od mo mp mq oe ms mt mu pl ny nz bk">The Host, which manages the debate, ending it after eight rounds or when discussions become redundant.</li></ul><p id="d376" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">Focusing on system architecture, we use <a class="af mv" href="https://www.phidata.com/" rel="noopener ugc nofollow" target="_blank">PhiData</a> to create the agents, deploying them via AWS Elastic Kubernetes Service (EKS) for high availability. Agent activities are monitored with AWS CloudWatch, and EKS’s service discovery ensures agents communicate seamlessly. Crucially, conversation histories are stored in a database, allowing any backup agent to continue discussions without interruption in case of failures. This resilience is bolstered by a message queue that ensures data integrity by processing messages only when fully consumed. To maintain dialogue flow, each agent is limited to a single replica for now, though Kubernetes would ensure that desired state is always maintained in case of the pod going down.</p><figure class="oi oj ok ol om on pr ps paragraph-image"><div role="button" tabindex="0" class="pw px ed py bh pz"><div class="pr ps qg"><img src="../Images/e636989850513f6f2c4fc988c33a0a83.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SV8olUbSmvyc5sMDW768SA.png"/></div></div><figcaption class="qb qc qd pr ps qe qf bf b bg z dx">Image by the author</figcaption></figure><p id="67cc" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">To enable users to try the system locally, we’ve created a MiniKube deployment YAML. In this simplified version, we’ve eliminated the postgres database. Instead, each agent will temporarily store its conversation history in memory. This adjustment keeps the system lightweight and more accessible for local deployment, while still showcasing the essential functionalities. You would need to install <a class="af mv" href="https://minikube.sigs.k8s.io/docs/start/?arch=%2Fmacos%2Farm64%2Fstable%2Fbinary+download" rel="noopener ugc nofollow" target="_blank">MiniKube</a>, <a class="af mv" href="https://ollama.com/download" rel="noopener ugc nofollow" target="_blank">Ollama</a> and <a class="af mv" href="https://kubernetes.io/docs/tasks/tools/#kubectl" rel="noopener ugc nofollow" target="_blank">kubectl</a> on your system first.</p><figure class="oi oj ok ol om on"><div class="oo ic l ed"><div class="qh oq l"/></div></figure><p id="832a" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">Save the above in a file called <code class="cx qi qj qk ql b">deploy.yml</code>and run:</p><pre class="oi oj ok ol om qm ql qn bp qo bb bk"><span id="2929" class="qp my fq ql b bg qq qr l qs qt">$ minikube start<br/>$ ollama run llama3<br/>$ kubectl apply -f deploy.yml</span></pre><p id="a611" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">To start debate (minikube behaves slightly differently on Linux-based vs. Windows systems):</p><pre class="oi oj ok ol om qm ql qn bp qo bb bk"><span id="fc36" class="qp my fq ql b bg qq qr l qs qt">$ kubectl get pods<br/>$ kubectl exec &lt;host-pod-name&gt; -- curl -X GET 'http://localhost:8080/agent/start_debate'</span></pre><p id="ab55" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">To get the debate history:</p><pre class="oi oj ok ol om qm ql qn bp qo bb bk"><span id="3151" class="qp my fq ql b bg qq qr l qs qt">$ kubectl exec &lt;host-pod-name&gt; -- curl -X GET 'http://localhost:8080/agent/chat-history'</span></pre><p id="5c8a" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">To tear down the resource:</p><pre class="oi oj ok ol om qm ql qn bp qo bb bk"><span id="9ae5" class="qp my fq ql b bg qq qr l qs qt">$ kubectl delete -f .\minikube-deploy.yml</span></pre><p id="56cb" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">The agents proceed to have an outstanding debate (see debate output in the appendix below).</p><h2 id="710d" class="mx my fq bf mz na nb nc nd ne nf ng nh mi ni nj nk mm nl nm nn mq no np nq nr bk">Conclusion</h2><p id="ccc6" class="pw-post-body-paragraph lx ly fq lz b ma ns mc md me nt mg mh mi nu mk ml mm nv mo mp mq nw ms mt mu fj bk">The interest in multi-agent systems opens up numerous possibilities for innovation and efficiency. By leveraging cloud-native principles and best practices, we can create scalable, cost-effective, secure, and highly available multi agent systems. The MAaaS paradigm not only aligns with modern software engineering principles but also paves the way for more sophisticated and production-ready AI applications. As we continue to explore and refine these concepts, the potential for multi agent system to revolutionize various industries becomes increasingly promising.</p><p id="d3bf" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk"><em class="mw">Note: this article was written as a collaboration between</em> <a class="af mv" href="https://www.linkedin.com/in/saman-rajaei-24315087/" rel="noopener ugc nofollow" target="_blank"><em class="mw">Sam Rajaei</em></a><em class="mw"> and </em><a class="af mv" href="https://www.linkedin.com/in/guanyi-li-91662016/" rel="noopener ugc nofollow" target="_blank"><em class="mw">Guanyi Li</em></a><em class="mw">.</em></p><h2 id="b62d" class="mx my fq bf mz na nb nc nd ne nf ng nh mi ni nj nk mm nl nm nn mq no np nq nr bk">Appendix: Debate Output</h2><figure class="oi oj ok ol om on"><div class="oo ic l ed"><div class="qh oq l"/></div></figure><p id="f001" class="pw-post-body-paragraph lx ly fq lz b ma mb mc md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu fj bk">Thank you for your attention, till next time!</p></div></div></div></div>    
</body>
</html>