- en: 'Everything you need to know about Voronoi Diagrams: Analyze Service Areas of
    Transit Stations in Tokyo'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 关于Voronoi图的一切：分析东京公共交通站点的服务区域
- en: 原文：[https://towardsdatascience.com/data-snack-use-voronoi-to-analyze-service-areas-of-transit-stations-in-tokyo-b1179b9dc2a3?source=collection_archive---------10-----------------------#2024-08-16](https://towardsdatascience.com/data-snack-use-voronoi-to-analyze-service-areas-of-transit-stations-in-tokyo-b1179b9dc2a3?source=collection_archive---------10-----------------------#2024-08-16)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/data-snack-use-voronoi-to-analyze-service-areas-of-transit-stations-in-tokyo-b1179b9dc2a3?source=collection_archive---------10-----------------------#2024-08-16](https://towardsdatascience.com/data-snack-use-voronoi-to-analyze-service-areas-of-transit-stations-in-tokyo-b1179b9dc2a3?source=collection_archive---------10-----------------------#2024-08-16)
- en: Discover Data Science techniques while acquiring slightly interesting statistical
    insights
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 在获取一些略显有趣的统计见解的同时，探索数据科学技术
- en: '[](https://medium.com/@martin-jurran?source=post_page---byline--b1179b9dc2a3--------------------------------)[![Martin
    Jurran](../Images/f34f11741f9a7b8c0ccb42ef0509a04a.png)](https://medium.com/@martin-jurran?source=post_page---byline--b1179b9dc2a3--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--b1179b9dc2a3--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--b1179b9dc2a3--------------------------------)
    [Martin Jurran](https://medium.com/@martin-jurran?source=post_page---byline--b1179b9dc2a3--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@martin-jurran?source=post_page---byline--b1179b9dc2a3--------------------------------)[![马丁·朱兰](../Images/f34f11741f9a7b8c0ccb42ef0509a04a.png)](https://medium.com/@martin-jurran?source=post_page---byline--b1179b9dc2a3--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--b1179b9dc2a3--------------------------------)[![数据科学之道](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--b1179b9dc2a3--------------------------------)
    [马丁·朱兰](https://medium.com/@martin-jurran?source=post_page---byline--b1179b9dc2a3--------------------------------)'
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--b1179b9dc2a3--------------------------------)
    ·12 min read·Aug 16, 2024
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·发布于[Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--b1179b9dc2a3--------------------------------)
    ·12分钟阅读·2024年8月16日
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/562cb2e9d7365d3590a0a42f89bd5988.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/562cb2e9d7365d3590a0a42f89bd5988.png)'
- en: 'Data Science and Mass Transit: A dream team. (Image by author, illustrations
    by [Takashi Mifune under free use](https://www.irasutoya.com/p/terms.html))'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 数据科学与公共交通：梦之队。（图片来源：作者，插图由[三船隆志提供，遵循免费使用协议](https://www.irasutoya.com/p/terms.html)）
- en: With the world becoming increasingly urbanized [[1](https://www.un.org/development/desa/pd/content/urbanization-0)],
    public transport has become an omnipresent part of urban life. The probably most
    urban place in the world is Tokyo [[2]](http://www.demographia.com/db-worldua.pdf)
    — a bustling Megapolis of an unmatched size where most people primarily rely on
    public transport [[3](http://demographia.com/db-htld-rail.htm)] in their everyday
    lives.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 随着世界日益城市化[[1](https://www.un.org/development/desa/pd/content/urbanization-0)]，公共交通已经成为城市生活中无处不在的一部分。世界上可能最具城市化特点的地方是东京[[2]](http://www.demographia.com/db-worldua.pdf)—这座规模无与伦比的繁忙大都市，其中大多数人都主要依赖公共交通[[3](http://demographia.com/db-htld-rail.htm)]来处理日常事务。
- en: This article introduces you to the concept of the *Voronoi diagram* in an urban
    planning context and uses it to divide the service area of train stations in Tokyo.
    We will use the acquired service areas to obtain various, maybe slightly interesting,
    statistics about the train station’s surroundings.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 本文将向你介绍在城市规划背景下的*Voronoi图*概念，并用它来划分东京火车站的服务区域。我们将利用获得的服务区域来获取一些或许略显有趣的关于车站周边的统计数据。
- en: Introduction
  id: totrans-10
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 介绍
- en: '![](../Images/c701b6cb07e92d80d99c6aaa39fb9691.png)'
  id: totrans-11
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c701b6cb07e92d80d99c6aaa39fb9691.png)'
- en: A Voronoi diagram (Image by author)
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: Voronoi图（图片来源：作者）
- en: Voronoi diagrams and Delaunay triangulations find wide application in many branches
    of science. [[4](https://www.researchgate.net/publication/325582898_Constrained_Construction_of_Planar_Delaunay_Triangulations_without_Flipping)]
    *Voronoi diagrams*, also known as *Voronoi grids*, are used to divide a flat surface
    into distinct areas that correspond to specific points.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: Voronoi图和Delaunay三角剖分在许多科学领域得到了广泛应用。[[4](https://www.researchgate.net/publication/325582898_Constrained_Construction_of_Planar_Delaunay_Triangulations_without_Flipping)]
    *Voronoi图*，也被称为*Voronoi网格*，用于将平面表面划分为对应于特定点的独立区域。
- en: This problem is arising frequently in many varieties. [5]
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 这个问题在许多不同的情况下频繁出现。[5]
- en: 'Some examples include:'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 下面是一些例子：
- en: '*Government of Melbourne (2024-)*, when they assign students to their nearest
    school [[6](https://www.findmyschool.vic.gov.au/)]'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*墨尔本政府（2024-）*，当他们将学生分配到最近的学校时[[6](https://www.findmyschool.vic.gov.au/)]'
- en: '*John Snow (1813–1853)* when he related the outbreak of cholera in London to
    the location of water pumps [[4](https://www.researchgate.net/publication/325582898_Constrained_Construction_of_Planar_Delaunay_Triangulations_without_Flipping)]'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*约翰·斯诺（1813–1853）*，当他将伦敦霍乱爆发与水泵的位置相关联时[[4](https://www.researchgate.net/publication/325582898_Constrained_Construction_of_Planar_Delaunay_Triangulations_without_Flipping)]'
- en: '*René Descartes (1596–1650)* when he investigated the distribution of matter
    relative to fixed stars [[4](https://www.researchgate.net/publication/325582898_Constrained_Construction_of_Planar_Delaunay_Triangulations_without_Flipping)]'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '*勒内·笛卡尔（1596–1650）*，当他研究物质相对于恒星的分布时[[4](https://www.researchgate.net/publication/325582898_Constrained_Construction_of_Planar_Delaunay_Triangulations_without_Flipping)]'
- en: 'Today, Voronoi diagrams are being used in many areas, including computer science,
    geography, and especially urban planning. Urban planning is the field I would
    like to introduce to you in more detail — we will determine service areas of mass
    transit stations in world’s largest metropolis: Tokyo.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 如今，Voronoi 图在许多领域中被广泛应用，包括计算机科学、地理学，尤其是城市规划。城市规划是我想要向你们详细介绍的领域——我们将确定世界最大都市——东京的公共交通站点的服务区域。
- en: '**The Components of Voronoi**'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '**Voronoi 的组成部分**'
- en: '![](../Images/6aa97fa52adfe9062d90e7353ffebd24.png)'
  id: totrans-21
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6aa97fa52adfe9062d90e7353ffebd24.png)'
- en: The components of a Voronoi Diagram (Image by author)
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: Voronoi 图的组成部分（图片来自作者）
- en: 'The Voronoi diagram consists out of multiple different result sets with distinct
    names and usage:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: Voronoi 图由多个不同的结果集组成，每个结果集有不同的名称和用途：
- en: 🔵 *Voronoi Site* is the reference location the *Voronoi Region* is calculated
    for.
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 🔵 *Voronoi 站点*是计算*Voronoi 区域*的参考位置。
- en: 🟣 *Voronoi Region* contains all the points on the surface closer to the related
    *Voronoi site* than any other.
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 🟣 *Voronoi 区域*包含表面上所有距离相关*Voronoi 站点*比任何其他站点更近的点。
- en: 🟢 *Voronoi Arc* is the straight line segment that is a boundary between two
    *Voronoi Regions* [[4](https://www.researchgate.net/publication/325582898_Constrained_Construction_of_Planar_Delaunay_Triangulations_without_Flipping)]
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 🟢 *Voronoi 弧线*是两条*Voronoi 区域*之间的边界直线段[[4](https://www.researchgate.net/publication/325582898_Constrained_Construction_of_Planar_Delaunay_Triangulations_without_Flipping)]
- en: 🟠 *Voronoi Vertex* is a point where Voronoi Arcs intersect.
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 🟠 *Voronoi 顶点*是Voronoi 弧线交点的地方。
- en: '**The Distance Functions for Voronoi**'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '**Voronoi 的距离函数**'
- en: '![](../Images/678430fa5c98b7310f8a171e805c9432.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/678430fa5c98b7310f8a171e805c9432.png)'
- en: Comparing various distance functions (Image by author)
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 比较各种距离函数（图片来自作者）
- en: 'The *Voronoi diagram* in a city planning context is usually based on a distance/reference
    system relationship. The distance is calculated based on certain measures, such
    as literal distance or travel time. There are multiple methods for calculating
    said distance:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: 城市规划中的*Voronoi 图*通常基于距离/参考系统关系。距离是根据某些度量标准计算的，例如实际距离或旅行时间。计算该距离的方法有多种：
- en: '![](../Images/4d682df59903ad8d0b9bd5f5443526d6.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4d682df59903ad8d0b9bd5f5443526d6.png)'
- en: Overview of Euclidean Distance (Image by author)
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 欧几里得距离概述（图片来自作者）
- en: '*Euclidean Distance.* Is the air-line distance between two points in a coordinate
    system. It is assuming an open space between two points with nothing blocking
    them in between. It is the most basic way to calculate distance.'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '*欧几里得距离*。是坐标系中两点之间的航空距离。它假设两点之间有开阔空间，没有任何阻碍物。它是最基本的计算距离的方法。'
- en: '![](../Images/82372e4d5d03a26f8a931745933c9fca.png)'
  id: totrans-35
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/82372e4d5d03a26f8a931745933c9fca.png)'
- en: Overview of Manhattan Distance (Image by author)
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: 曼哈顿距离概述（图片来自作者）
- en: '*Manhattan distance.* Ignores the air-line distance and introduces a distance
    function to approximate travel times in a city grid — just like in Manhattan.
    It is better suited for certain city environments.'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '*曼哈顿距离*。忽略航空距离，并引入一种距离函数来近似城市网格中的旅行时间——就像在曼哈顿一样。它更适合某些城市环境。'
- en: '![](../Images/f1043738887a6ad8ba8c64e16b43aaca.png)'
  id: totrans-38
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f1043738887a6ad8ba8c64e16b43aaca.png)'
- en: Overview of Time-based Distance (Image by author)
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 基于时间的距离概述（图片来自作者）
- en: '*Time-based distance.* The most accurate measure, but also the one most complicated
    to acquire.'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: '*基于时间的距离*。这是最准确的度量标准，但也是获取最复杂的度量标准。'
- en: Additionally, time based distances may cause anomalies, as travel times between
    areas might not be linear to their distance and therefore could cause the Voronoi
    Regions to unevenly split up [[10](http://alumni.cs.ucr.edu/~weiw/paper/VD_highways.pdf)]—
    just like in the example below.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 此外，基于时间的距离可能会导致异常，因为不同区域之间的旅行时间可能与实际距离不成线性关系，从而可能导致沃罗诺伊区域的不均匀划分 [[10](http://alumni.cs.ucr.edu/~weiw/paper/VD_highways.pdf)]——就像下面的例子一样。
- en: '![](../Images/d4e4f1e256ce46e16a9d03437448eed0.png)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d4e4f1e256ce46e16a9d03437448eed0.png)'
- en: Fig. 5\. Voronoi diagrams of selected areas for geographical (a), road (b),
    and travel time distances ©. The wide blue line is the Warta river, while the
    magenta blocks are locations of bridges [[11](https://www.researchgate.net/figure/Voronoi-diagrams-of-selected-areas-for-geographical-a-road-b-and-travel-time_fig5_336071639)]
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 图 5. 选定区域的沃罗诺伊图，包括地理（a）、道路（b）和旅行时间距离（c）。宽蓝线表示沃尔塔河，而品红色的块状区域表示桥梁的位置 [[11](https://www.researchgate.net/figure/Voronoi-diagrams-of-selected-areas-for-geographical-a-road-b-and-travel-time_fig5_336071639)]
- en: Now, we have all the basics for starting with our real life use case — Tokyo’s
    public transport. Let’s get started!
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，我们已经掌握了开始进行现实案例——东京公共交通所需的所有基础知识。让我们开始吧！
- en: Assessing the Tokyo Transit System
  id: totrans-45
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 评估东京的交通系统
- en: One of the most important aspects of urban planning are mass transit networks
    — especially in a place like Tokyo. Tokyo is a place that many people are longing
    for — especially public transport enthusiasts.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 城市规划中最重要的方面之一就是公共交通网络——尤其是在像东京这样的地方。东京是许多人向往的地方——尤其是公共交通爱好者。
- en: Hence, Tokyo provides us with the perfect example to use Voronoi diagrams with
    a real life use case.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 因此，东京为我们提供了一个完美的例子，可以在现实生活中应用沃罗诺伊图。
- en: '**Concept**'
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**概念**'
- en: Imagine a city map dotted with public transit stations. Each station serves
    its surrounding area, called a service zone. But how can we determine these zones?
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: 想象一张城市地图，上面标有公共交通站点。每个站点服务其周围的区域，这被称为服务区。那么，我们如何确定这些服务区呢？
- en: 'To better understand how to achieve our goal of acquiring service areas of
    public transport stations, I put the *Voronoi diagram* into our mass transit perspective:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 为了更好地理解如何实现我们的目标——获取公共交通车站的服务区，我将*沃罗诺伊图*融入我们的公共交通视角：
- en: '![](../Images/622c635ce9ac00ffb30daac9d0467482.png)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/622c635ce9ac00ffb30daac9d0467482.png)'
- en: A concept on how to use Voronoi diagrams for acquiring service zones (Image
    by author)
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 一个关于如何使用沃罗诺伊图来获取服务区的概念（图源：作者）
- en: 🔵 *Voronoi site* is now a train station in Tokyo
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 🔵 *沃罗诺伊站点* 现在是东京的一个火车站
- en: 🟢 *Voronoi Arc* is now the border dividing service areas of train stations
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 🟢 *沃罗诺伊弧线* 现在是划分火车站服务区的边界
- en: 🟣 *Voronoi Region* is now the area serviced by one specific train station based
    on our distance function
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 🟣 *沃罗诺伊区域* 现在是基于我们距离函数定义的一个特定火车站所服务的区域
- en: That’s what *Voronoi Diagrams* can offer us. By dividing the map into regions
    based on the distance to the nearest station, we have a very simple approach defining
    service areas of train stations.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是*沃罗诺伊图*能为我们提供的东西。通过根据到最近车站的距离将地图划分为多个区域，我们就有了一个非常简单的方法来定义火车站的服务区。
- en: Now, as the concept is clear, let’s get started with the actual implementation.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，概念已经清晰，我们可以开始实际的实施了。
- en: Identitifying Tokyo
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 确定东京
- en: We need to define the area we would like to create our *Voronoi Diagram* for.
    That process is usually referred to as defining the *Bounding Box*.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要定义我们想要为其创建*沃罗诺伊图*的区域。这个过程通常被称为定义*边界框*。
- en: '![](../Images/9022ef03f0c371ca3036efef86dc8e25.png)'
  id: totrans-60
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9022ef03f0c371ca3036efef86dc8e25.png)'
- en: Difference between Tokyo City and Tokyo Prefecture (Image by author)
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 东京市与东京府的区别（图源：作者）
- en: When someone says “Tokyo”, it can mean different things to different people.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 当有人提到“东京”时，它对不同的人可能意味着不同的事情。
- en: 'Some may think of it as a:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 有些人可能会将其看作是：
- en: '**1) Bustling city (Tokyo City)** with towering skyscrapers and vibrant street
    culture, while others may view it as a'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '**1) 繁华的城市（东京市）**，有着高耸的摩天大楼和充满活力的街头文化，而其他人可能会将其视为一个'
- en: '**2) Prefecture (Tokyo Prefecture)** with scenic landscapes and natural beauty,
    while someone else might refer to'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '**2) 都道府县（东京府）**，拥有迷人的风景和自然美景，而其他人可能会提到'
- en: '**3) Greater Tokyo Area**, which is the most populous metropolitan area in
    the world [[8](https://en.wikipedia.org/wiki/Greater_Tokyo_Area)], that consists
    out of multiple standalone cities (e.g. Tokyo, Saitama, Yokohama, ..).'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '**3) 大东京地区**，这是世界上人口最多的都市区 [[8](https://en.wikipedia.org/wiki/Greater_Tokyo_Area)]，由多个独立的城市组成（例如东京、埼玉、横滨等）。'
- en: '**However, it’s important to define what we mean by “Tokyo” in order to avoid
    confusion.**'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: '**然而，重要的是要明确我们所说的“东京”到底指的是什么，以避免混淆。**'
- en: '**Using the prefecture definition** allows us to differentiate Tokyo from its
    neighboring cities like Saitama, Chiba, and Yokohama while including most locations
    which people generally refer to as “in Tokyo”.'
  id: totrans-68
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**使用府县定义**使我们能够区分东京与其邻近的城市，如埼玉、千叶和横滨，同时包含大多数人通常所说的“在东京”的位置。'
- en: '*Tokyo Prefecture* will be our base border box for all subsequent *Voronoi*
    calculations.'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: '*东京府*将成为我们所有后续*Voronoi*计算的基本边界框。'
- en: 'For acquiring geospatial information about Tokyo prefecture, we resort to official
    government sources, as referenced below:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 为了获取有关东京府的地理空间信息，我们求助于官方政府来源，具体如下：
- en: '**Dataset:** [National Land Numerical Information | Administrative Boundaries
    Data (mlit.go.jp)](https://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-N03-v2_3.html),
    Licensed under the Open Data Policy, allowing commercial use. [利用規約 (mlit.go.jp)](https://nlftp.mlit.go.jp/ksj/other/agreement.html#agree-01)'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '**数据集：** [国家土地数值信息 | 行政边界数据 (mlit.go.jp)](https://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-N03-v2_3.html)，根据开放数据政策授权，允许商业使用。
    [利用規約 (mlit.go.jp)](https://nlftp.mlit.go.jp/ksj/other/agreement.html#agree-01)'
- en: Locating Train Stations
  id: totrans-72
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 定位火车站
- en: '![](../Images/2926ee4e8b8f5c7cec14c9a7ce5edb2f.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2926ee4e8b8f5c7cec14c9a7ce5edb2f.png)'
- en: Visually checking our dataset. I located Takadanobaba in it’s correct position.
    (Image by author)
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 视觉检查我们的数据集。我在正确的位置找到了高田马场。（图片来自作者）
- en: The Japanese Government provides a reliable source for information about train
    stations. Their website offers a detailed dataset containing all train stations
    across the country, along with other related metadata.
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 日本政府提供了一个可靠的火车站信息来源。他们的网站提供了一个详细的数据集，包含全国各地的所有火车站，以及其他相关元数据。
- en: '**It is worth noting that the dataset focuses solely on train stations as per
    Japan government’s definition and may exclude modes of mass transit like metro
    and monorail while including modes of transit people generally wouldn’t refer
    to as trains, such as specific cable cars.**'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: '**值得注意的是，该数据集仅关注日本政府定义的火车站，可能不包括地铁和单轨列车等大众交通工具，但包括了人们通常不认为是火车的交通方式，例如特定的缆车。**'
- en: There might be opportunities to increase the correctness of data retrieved through
    combining additional data sources. [[9](https://www.odpt.org/)] In this article,
    I will continue with the governmental dataset without further enhancements.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 通过结合额外的数据来源，可能有机会提高检索数据的准确性。[[9](https://www.odpt.org/)] 在本文中，我将继续使用政府数据集，不进行进一步的增强。
- en: '**Dataset:** [National Land Numerical Information | Railway Data (mlit.go.jp)](https://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-N02-2023.html),
    Licensed under the Open Data Policy, allowing commercial use. [利用規約 (mlit.go.jp)](https://nlftp.mlit.go.jp/ksj/other/agreement.html#agree-01)'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: '**数据集：** [国家土地数值信息 | 铁路数据 (mlit.go.jp)](https://nlftp.mlit.go.jp/ksj/gml/datalist/KsjTmplt-N02-2023.html)，根据开放数据政策授权，允许商业使用。
    [利用規約 (mlit.go.jp)](https://nlftp.mlit.go.jp/ksj/other/agreement.html#agree-01)'
- en: Obtaining Service Zones
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 获取服务区域
- en: Now that we have established the borders of Tokyo and a list of relevant train
    stations, we can proceed with calculating our service zones. We will be utilizing
    [*KNIME*](https://www.knime.com/), a powerful tool for scientific computations
    that minimizes the need for in-depth math knowledge or coding, by abstracting
    much of the complexity away.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经确定了东京的边界以及相关火车站的列表，接下来可以开始计算我们的服务区域。我们将使用[*KNIME*](https://www.knime.com/)，这是一款功能强大的科学计算工具，通过抽象化许多复杂性，最大程度减少了对深入数学知识或编程的需求。
- en: '[](https://www.knime.com/?source=post_page-----b1179b9dc2a3--------------------------------)
    [## Open for Innovation | KNIME'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://www.knime.com/?source=post_page-----b1179b9dc2a3--------------------------------)
    [## 开放创新 | KNIME'
- en: Free and open source with all your data analysis tools. Create data science
    solutions with the visual workflow builder…
  id: totrans-82
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 免费和开源，包含所有数据分析工具。通过视觉工作流构建器创建数据科学解决方案…
- en: www.knime.com](https://www.knime.com/?source=post_page-----b1179b9dc2a3--------------------------------)
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '[www.knime.com](https://www.knime.com/?source=post_page-----b1179b9dc2a3--------------------------------)'
- en: '**1\. Extract data**'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '**1\. 提取数据**'
- en: We start with connecting our data sources to the tool. Fortunately, KNIME provides
    a set of tools for Geospatial operations, which we can use out of the box.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 我们从连接数据源到工具开始。幸运的是，KNIME提供了一套地理空间操作工具，我们可以直接使用这些工具。
- en: We proceed by creating two nodes for importing our data. [*GeoFile Reader node*](https://hub.knime.com/center%20for%20geographic%20analysis%20at%20harvard%20university/extensions/sdl.harvard.features.geospatial/latest/org.knime.python3.nodes.extension.ExtensionNodeSetFactory$DynamicExtensionNodeFactory:4e3ecfd9)
    is capable of handling both Shapefile and geojson data types.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 我们继续创建两个节点来导入我们的数据。[*GeoFile Reader node*](https://hub.knime.com/center%20for%20geographic%20analysis%20at%20harvard%20university/extensions/sdl.harvard.features.geospatial/latest/org.knime.python3.nodes.extension.ExtensionNodeSetFactory$DynamicExtensionNodeFactory:4e3ecfd9)
    能够处理 Shapefile 和 geojson 数据类型。
- en: '![](../Images/c0e07d7f55bc76255df7694a371b711c.png)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c0e07d7f55bc76255df7694a371b711c.png)'
- en: Data import in KNIME (Image by author)
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 在 KNIME 中进行数据导入（图片来源：作者）
- en: To use the two datasets, some preparation is necessary.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 要使用这两个数据集，必须进行一些准备工作。
- en: We remove some fields due to an excess number within each dataset with the [*Column
    Filter node*](https://hub.knime.com/knime/extensions/org.knime.features.base/latest/org.knime.base.node.preproc.filter.column.DataColumnSpecFilterNodeFactory).
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们使用 [*Column Filter node*](https://hub.knime.com/knime/extensions/org.knime.features.base/latest/org.knime.base.node.preproc.filter.column.DataColumnSpecFilterNodeFactory)
    删除了一些字段，因为每个数据集中的字段数量过多。
- en: To enhance readability, we rename certain columns within the datasets with the
    [*Column Renamer node*](https://hub.knime.com/knime/extensions/org.knime.features.base/latest/org.knime.base.node.preproc.column.renamer.ColumnRenamerNodeFactory).
  id: totrans-91
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了增强可读性，我们使用 [*Column Renamer node*](https://hub.knime.com/knime/extensions/org.knime.features.base/latest/org.knime.base.node.preproc.column.renamer.ColumnRenamerNodeFactory)
    对数据集中的某些列进行了重命名。
- en: To avoid confusion later on, identical columns within each dataset are given
    unique names with the [*Column Renamer node*](https://hub.knime.com/knime/extensions/org.knime.features.base/latest/org.knime.base.node.preproc.column.renamer.ColumnRenamerNodeFactory).
  id: totrans-92
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了避免后续的混淆，我们使用 [*Column Renamer node*](https://hub.knime.com/knime/extensions/org.knime.features.base/latest/org.knime.base.node.preproc.column.renamer.ColumnRenamerNodeFactory)
    给每个数据集中相同的列赋予唯一的名称。
- en: '![](../Images/1035ae6b32b6e4e713e6b72b1fd26712.png)'
  id: totrans-93
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1035ae6b32b6e4e713e6b72b1fd26712.png)'
- en: Data extraction in KNIME (Image by author)
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 在 KNIME 中进行数据提取（图片来源：作者）
- en: Having completed the data extraction and preparation, we can now move forward
    with our computations.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 完成数据提取和准备工作后，我们现在可以继续进行计算了。
- en: '**2\. Work with data**'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: '**2\. 处理数据**'
- en: Our next objective is to obtain the Voronoi polygons for each station, thereby
    enabling us to derive their respective service zones.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的下一个目标是获取每个车站的 Voronoi 多边形，从而使我们能够推导出它们各自的服务区域。
- en: We create a bounding box for our Voronoi diagram, using our Tokyo Prefecture
    dataset, with the [*Bounding Box node*](https://hub.knime.com/center%20for%20geographic%20analysis%20at%20harvard%20university/extensions/sdl.harvard.features.geospatial/latest/org.knime.python3.nodes.extension.ExtensionNodeSetFactory$DynamicExtensionNodeFactory:381035ea).
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们使用东京县数据集创建了 Voronoi 图的边界框，利用 [*Bounding Box node*](https://hub.knime.com/center%20for%20geographic%20analysis%20at%20harvard%20university/extensions/sdl.harvard.features.geospatial/latest/org.knime.python3.nodes.extension.ExtensionNodeSetFactory$DynamicExtensionNodeFactory:381035ea)。
- en: In order to perform our calculations, we need points instead of polygon representations
    for the stations. The [*Geometry to Point node*](https://hub.knime.com/center%20for%20geographic%20analysis%20at%20harvard%20university/extensions/sdl.harvard.features.geospatial/latest/org.knime.python3.nodes.extension.ExtensionNodeSetFactory$DynamicExtensionNodeFactory:f470594)
    is used to convert them.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为了执行计算，我们需要的是车站的点而不是多边形表示。[*Geometry to Point node*](https://hub.knime.com/center%20for%20geographic%20analysis%20at%20harvard%20university/extensions/sdl.harvard.features.geospatial/latest/org.knime.python3.nodes.extension.ExtensionNodeSetFactory$DynamicExtensionNodeFactory:f470594)
    用于将它们转换为点。
- en: We perform the Voronoi calculation using the [*Voronoi (Thiessen) Polygon node*](https://hub.knime.com/center%20for%20geographic%20analysis%20at%20harvard%20university/extensions/sdl.harvard.features.geospatial/latest/org.knime.python3.nodes.extension.ExtensionNodeSetFactory$DynamicExtensionNodeFactory:bfd518e5),
    which produces polygons and associated IDs. However, since we also require station
    metadata, we must join the Voronoi polygons with this information again using
    the [*Spatial Join node*](https://hub.knime.com/center%20for%20geographic%20analysis%20at%20harvard%20university/extensions/sdl.harvard.features.geospatial/latest/org.knime.python3.nodes.extension.ExtensionNodeSetFactory$DynamicExtensionNodeFactory:38149a19).
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 我们使用[*Voronoi (Thiessen) Polygon节点*](https://hub.knime.com/center%20for%20geographic%20analysis%20at%20harvard%20university/extensions/sdl.harvard.features.geospatial/latest/org.knime.python3.nodes.extension.ExtensionNodeSetFactory$DynamicExtensionNodeFactory:bfd518e5)进行Voronoi计算，生成多边形和关联的ID。然而，由于我们还需要车站元数据，我们必须通过[*空间连接节点*](https://hub.knime.com/center%20for%20geographic%20analysis%20at%20harvard%20university/extensions/sdl.harvard.features.geospatial/latest/org.knime.python3.nodes.extension.ExtensionNodeSetFactory$DynamicExtensionNodeFactory:38149a19)将Voronoi多边形与这些信息再次连接。
- en: '![](../Images/4a847d621c712c0555af3a43b88ad6ac.png)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4a847d621c712c0555af3a43b88ad6ac.png)'
- en: The entire workspace in KNIME (Image by author)
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: KNIME中的整个工作空间（图片来自作者）
- en: That’s everything we need to obtain station service zones in KNIME. Let’s take
    a look on the results.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 这就是我们在KNIME中获取车站服务区所需的一切。让我们看看结果。
- en: '**Service Zones (V1)**'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '**服务区（V1）**'
- en: Now we can see that the Voronoi diagram has divided our map, assigning a unique
    area to each station.
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们可以看到Voronoi图已经将我们的地图划分，给每个车站分配了一个独特的区域。
- en: '![](../Images/bbedd47befa295fc8b47898a9d891c5f.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bbedd47befa295fc8b47898a9d891c5f.png)'
- en: One station has multiple service areas — something went wrong. Visualized with
    QGIS (Image by author)
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 一站多服务区——出了点问题。使用QGIS进行可视化（图片来自作者）
- en: We should keep in mind that certain stations like Takadanobaba look like one
    station in person, but actually consist of multiple stations in reality. Because
    of this, we need to do some extra work to make sure our calculations reflect this
    accurately.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 我们应当记住，像高田马场这样的车站，在现实中看起来像一个车站，但实际上由多个车站组成。因此，我们需要做一些额外的工作，确保我们的计算能够准确反映这一点。
- en: '**Cleaning Data and Service Zones (V2)**'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '**清理数据和服务区（V2）**'
- en: The station dataset contains an additional ID that groups stations by their
    public name and/or real-life appearance. By utilizing this ID and the [*Group
    By node*](https://hub.knime.com/knime/extensions/org.knime.features.database/latest/org.knime.database.node.manipulation.groupby.DBGroupByNodeFactory),
    we can join the individual stations into a single one.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 车站数据集包含一个额外的ID，该ID根据车站的公共名称和/或实际外观对车站进行分组。通过利用这个ID和[*Group By节点*](https://hub.knime.com/knime/extensions/org.knime.features.database/latest/org.knime.database.node.manipulation.groupby.DBGroupByNodeFactory)，我们可以将各个车站合并成一个。
- en: '![](../Images/7335f675e26162e737b9c3165c25edef.png)'
  id: totrans-111
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7335f675e26162e737b9c3165c25edef.png)'
- en: The entire workspace in KNIME (Image by author)
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: KNIME中的整个工作空间（图片来自作者）
- en: After consolidating the individual stations, we were able to create a more accurate
    dataset of service zones that better reflects how people see stations in the real
    world. Look at Takadanobaba — it’s located in a single Voronoi region now.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 在合并各个车站后，我们能够创建一个更准确的服务区数据集，更好地反映人们在现实中看到车站的方式。看看高田马场——它现在位于一个单一的Voronoi区域内。
- en: '![](../Images/c2d8ae7a96186e3583555e197d470071.png)'
  id: totrans-114
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c2d8ae7a96186e3583555e197d470071.png)'
- en: 'Cleaned up dataset: Now we have one service area per station, visualized with
    QGIS (Image by author)'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 清理后的数据集：现在每个车站有一个服务区，通过QGIS进行可视化（图片来自作者）
- en: '**Result**'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '**结果**'
- en: We have completed our calculations and obtained service zones that can provide
    useful insights and statistics.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经完成了计算，并得到了可以提供有用见解和统计数据的服务区域。
- en: 'To explore the results yourself, you can find everything in this GitHub repository:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 若要自己探索结果，您可以在这个GitHub仓库中找到所有内容：
- en: '[](https://github.com/martinjurran/KNIME-Tokyo-StationServiceAreas/tree/main?source=post_page-----b1179b9dc2a3--------------------------------)
    [## GitHub - martinjurran/KNIME-Tokyo-StationServiceAreas: KNIME workflow for
    calculating service areas…'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://github.com/martinjurran/KNIME-Tokyo-StationServiceAreas/tree/main?source=post_page-----b1179b9dc2a3--------------------------------)
    [## GitHub - martinjurran/KNIME-Tokyo-StationServiceAreas: 计算服务区的KNIME工作流…'
- en: KNIME workflow for calculating service areas of Tokyo train stations and restaurant
    density analysis. …
  id: totrans-120
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 计算东京车站服务区和餐厅密度分析的KNIME工作流……
- en: github.com](https://github.com/martinjurran/KNIME-Tokyo-StationServiceAreas/tree/main?source=post_page-----b1179b9dc2a3--------------------------------)
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: github.com](https://github.com/martinjurran/KNIME-Tokyo-StationServiceAreas/tree/main?source=post_page-----b1179b9dc2a3--------------------------------)
- en: Next, we will obtain some real-life statistics that we can derive from our service
    zones.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将获取一些可以从服务区中导出的现实生活统计数据。
- en: Statistics Example — Restaurant Density
  id: totrans-123
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 统计示例 — 餐馆密度
- en: '![](../Images/2bd7652543f4fe708ffc710115e264c1.png)'
  id: totrans-124
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2bd7652543f4fe708ffc710115e264c1.png)'
- en: Finding restaurants isn’t hard in Japan — but where is their highest density?
    (Illustrations by [Takashi Mifune under free use](https://www.irasutoya.com/p/terms.html))
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 在日本找餐馆并不难——但它们的密度最高在哪里呢？（插图由 [高桥三船提供，使用许可为自由使用](https://www.irasutoya.com/p/terms.html)）
- en: When it comes to planning a vacation, one of the biggest hassles is figuring
    out where to stay. I mean, you want to pick a location that is close to all the
    restaurants, shops and other cool stuff, right?
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 在规划度假时，最大的麻烦之一就是决定住在哪里。我的意思是，你肯定想选择一个靠近餐馆、商店和其他有趣场所的位置，对吧？
- en: 'But with so many options out there, it can be confusing to find the perfect
    spot. That’s where our newly acquired *Transit Station Service Areas* can help
    us:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 但面对这么多选择，找到完美的地点可能会让人困惑。这就是我们新获取的 *交通站点服务区* 能够帮助我们的地方：
- en: 'Goal: Identifying the station with the most POI in it’s surroundings. To make
    things easy, we will focus on restaurants.'
  id: totrans-128
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 目标：识别周围有最多兴趣点 (POI) 的车站。为了简化问题，我们将专注于餐馆。
- en: '**Acquiring Data**'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '**获取数据**'
- en: Data valuable for business purposes seems to frequently be protected and hard
    to retrieve. In the case of restaurants, there is no official source available.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 对商业用途有价值的数据似乎经常受到保护，并且难以获取。对于餐馆来说，目前没有官方的来源可供使用。
- en: The most accurate sources, such as Business Registrations or Google Maps, are
    either associated with a steep price tag or just aren’t approved for large scale
    processing usage.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 最准确的来源，如企业注册信息或谷歌地图，要么价格高昂，要么未获得大规模处理的批准。
- en: The [Overpass API](https://overpass-api.de/) offered by the OpenStreetMap foundation,
    is one of the only sources that offers the data we need. With a simple query in
    [Overpass Turbo](https://overpass-turbo.eu/), we can acquire all restaurants in
    Tokyo.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '[Overpass API](https://overpass-api.de/) 是由 OpenStreetMap 基金会提供的，它是我们获取所需数据的唯一来源之一。通过在
    [Overpass Turbo](https://overpass-turbo.eu/) 中执行一个简单的查询，我们可以获取东京所有的餐馆数据。'
- en: '[PRE0]'
  id: totrans-133
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'The data is being displayed in Overpass Turbo right away and is available for
    export to a file type of our choice:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 数据会立即在 Overpass Turbo 中显示，并且可以导出为我们选择的文件格式：
- en: '![](../Images/c2b3bb30c4e013072ee7ad9990420bac.png)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c2b3bb30c4e013072ee7ad9990420bac.png)'
- en: Overpass Turbo UI (Image by author)
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: Overpass Turbo 用户界面（图片由作者提供）
- en: We now have a full dataset on all restaurants in Tokyo. It’s coming with it’s
    limitations, as the data is crowd sourced, not validated and might also be centered
    around the most popular spots in the city, as that is where people usually contribute
    to on their platform. As it is the best data available in our case, we continue
    using it.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在拥有了东京所有餐馆的完整数据集。尽管数据有其局限性，因为这些数据是众包的，未经验证，且可能主要集中在市区最受欢迎的地点——毕竟人们通常在这些地方进行贡献。但因为它是我们能获得的最佳数据，我们将继续使用它。
- en: '**Dataset:** [overpass turbo (overpass-turbo.eu)](https://overpass-turbo.eu/),
    Data licensed under [Open Database License (ODbL)](https://en.wikipedia.org/wiki/Open_Database_License)'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: '**数据集：** [overpass turbo (overpass-turbo.eu)](https://overpass-turbo.eu/)，数据遵循
    [开放数据库许可证 (ODbL)](https://en.wikipedia.org/wiki/Open_Database_License)'
- en: '**Matching Points of Interest (POI) to their service zone**'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: '**将兴趣点 (POI) 与其服务区匹配**'
- en: To calculate the individual amount of restaurants in a station’s service zone,
    we need to match the POI to their respective service zones.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 要计算车站服务区内餐馆的数量，我们需要将兴趣点 (POI) 与其各自的服务区匹配。
- en: I have imported the station service zones as a layer in QGIS. That application
    offers us to calculate node counts within areas out of the box.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 我已将车站服务区作为图层导入到 QGIS 中。该应用程序提供了直接计算区域内节点数量的功能。
- en: '![](../Images/53918a6c0cf5a1cb84d89a1405e940ab.png)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/53918a6c0cf5a1cb84d89a1405e940ab.png)'
- en: Counting points inside polygons in QGIS (Image by author)
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 在 QGIS 中计算多边形内的点数（图片由作者提供）
- en: The number of restaurants in each service zone does not meet our requirements,
    as some large zones have many restaurants — but with long distances to cover in
    between them. Therefore, we need to develop a new metric to address this scenario.
    The easiest approach would be to determine the density of restaurants.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 每个服务区的餐厅数量未能满足我们的要求，因为一些大型区域有很多餐厅——但这些餐厅之间的距离较长。因此，我们需要开发一个新的指标来解决这一情形。最简单的方法是计算餐厅的密度。
- en: '**Formula for POI density**'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '**POI密度公式**'
- en: For a simple ranking, *restaurants/km² per service zone* might be a good representation.
    That way, we can find the service zone with the highest density of restaurants.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 对于简单的排名，*餐厅/km²每个服务区*可能是一个好的表现方式。这样，我们可以找到餐厅密度最高的服务区。
- en: In some cases, service zones may be small yet have a large number of restaurants,
    which could inflate their score. However, in our situation, this is not a concern.
    Small service zones might indicate the presence of another station and more restaurants
    in close proximity.
  id: totrans-147
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 在某些情况下，服务区可能很小，但餐厅数量很多，这可能会夸大它们的得分。然而，在我们的情况中，这不是一个问题。小型服务区可能意味着附近有其他车站和更多的餐厅。
- en: 'There is a formula:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 公式如下：
- en: '![](../Images/4ca9fb5f647135a8ed7bae1d430f9c45.png)'
  id: totrans-149
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4ca9fb5f647135a8ed7bae1d430f9c45.png)'
- en: Formula for calculating POI density
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: 计算POI密度的公式
- en: 'where:'
  id: totrans-151
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 其中：
- en: ''
  id: totrans-152
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '*R* = POI density factor in n/km²'
  id: totrans-153
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*R* = POI密度因子，单位为n/km²'
- en: '*A* = area of polygon in km²'
  id: totrans-154
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*A* = 多边形面积，单位为 km²'
- en: '*n* = number of POI'
  id: totrans-155
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '*n* = POI的数量'
- en: We import the *dataset with POI Count/service area* into KNIME and run our formula
    for each and every service zone.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将*POI数量/服务区面积*数据集导入KNIME，并对每个服务区运行我们的公式。
- en: '![](../Images/6ffa4fcf12e97bbc1c36b373d60498f3.png)'
  id: totrans-157
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6ffa4fcf12e97bbc1c36b373d60498f3.png)'
- en: Calculating POI density in KNIME (Image by author)
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 在KNIME中计算POI密度（图像由作者提供）
- en: Finally, we acquired the zones with the highest density of restaurants. Let’s
    take a look at the results.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们获得了餐厅密度最高的区域。让我们来看看结果。
- en: '**Results**'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: '**结果**'
- en: 'The top 20 station service areas with the highest density of restaurants are:'
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 餐厅密度最高的前20个车站服务区是：
- en: '![](../Images/c317dcf86a0814fff2ac2020b4b5e065.png)'
  id: totrans-162
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c317dcf86a0814fff2ac2020b4b5e065.png)'
- en: The top 25 stations sorted by restaurant density, visualized with Tableau Public
    (Image by author)
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 按餐厅密度排序的前25个车站，用Tableau Public可视化（图像由作者提供）
- en: 'We can also view our results on a map to get more insights:'
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 我们还可以通过地图查看结果，以获得更多的洞察：
- en: '![](../Images/cabb631cba516074773ea236a045829c.png)'
  id: totrans-165
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/cabb631cba516074773ea236a045829c.png)'
- en: The top 20 stations sorted by restaurant density, visualized with Tableau Public
    (Image by author)
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 按餐厅密度排序的前20个车站服务区，用Tableau Public可视化（图像由作者提供）
- en: We can see, that the areas with the highest density are appearing in clusters.
    I did some more research and found out that Tokyo is made out of individual cities
    (e.g. Taito City, Shibuya City, Chiyoda). These clusters do represent the individual
    cities Tokyo is made out of in some way — interesting!
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，密度最高的区域呈现出集群的形式。我做了一些进一步的研究，发现东京由多个独立的城市组成（例如台东区、涩谷区、千代田区）。这些集群某种程度上代表了东京所由的各个城市——有趣！
- en: '![](../Images/9dff015895841adf2f3df4d096904418.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9dff015895841adf2f3df4d096904418.png)'
- en: The high restaurant-density clusters identified (Image by author)
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 我们识别到的高餐厅密度集群（图像由作者提供）
- en: It’s important to note that our dataset is crowd-sourced and may not be entirely
    representative or complete, as it could be biased towards areas that have been
    particularly well-surveyed.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 需要注意的是，我们的数据集是众包收集的，可能并不完全具有代表性或完整性，因为它可能偏向那些经过特别详细调查的区域。
- en: '**However, based on the data we have, Ueno-Okachimachi Station is the clear
    winner.**'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: '**然而，根据我们所拥有的数据，上野御徒町站无疑是赢家。**'
- en: 'The station service zone with the highest restaurant density: Ueno-okachimachi
    Station'
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 餐厅密度最高的车站服务区：上野御徒町站
- en: 'If you’re interested in exploring the data further, you can check out the Tableau
    Public page, where you can interact with the visualization and delve deeper into
    the results:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有兴趣进一步探索数据，可以查看Tableau Public页面，在那里你可以与可视化进行交互，并深入了解结果：
- en: '[https://public.tableau.com/app/profile/martin.jurran/viz/Tokyo-RestaurantDensity/Map#1](https://public.tableau.com/app/profile/martin.jurran/viz/Tokyo-RestaurantDensity/Map#1)'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://public.tableau.com/app/profile/martin.jurran/viz/Tokyo-RestaurantDensity/Map#1](https://public.tableau.com/app/profile/martin.jurran/viz/Tokyo-RestaurantDensity/Map#1)'
- en: Conclusion
  id: totrans-175
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 结论
- en: '![](../Images/cdba6c676a009e9b3679bd2620c7eb91.png)'
  id: totrans-176
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/cdba6c676a009e9b3679bd2620c7eb91.png)'
- en: The station service zone with the highest density. Ameya Yokocho is a part of
    the Ueno-okachimachi station service zone.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 服务区域密度最高的车站。Ameya Yokocho是上野-御徒町车站服务区域的一部分。
- en: Voronoi diagrams are more versatile and useful than we often realize. They enable
    us to uncover insights, such as **identifying Ueno-okachimachi station as having
    the highest restaurant density in Tokyo Prefecture**.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: Voronoi图比我们常常意识到的更具多功能性和实用性。它们使我们能够发现洞察，例如**识别出上野-御徒町车站是东京府餐馆密度最高的区域**。
- en: Even major companies like Uber likely use Voronoi diagrams to efficiently assign
    drivers to pick-up locations. Their wide range of applications makes them valuable
    across various industries, especially since they can be computed with minimal
    resources.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 即使是像Uber这样的主要公司，可能也在使用Voronoi图来高效地分配司机到接送位置。它们的广泛应用使得Voronoi图在多个行业中都具有很高的价值，尤其是因为它们可以用极少的资源进行计算。
- en: I encourage you to explore the capabilities of Voronoi diagrams and see how
    they can benefit you. By including them into your toolset, you can enhance your
    data analysis skills and gain access to more insightful statistics.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 我鼓励你探索Voronoi图的功能，看看它们如何能带给你好处。通过将它们纳入你的工具集中，你可以提升数据分析能力，并获得更有洞察力的统计数据。
- en: Sources
  id: totrans-181
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 来源
- en: '[[1](https://www.un.org/development/desa/pd/content/urbanization-0)] United
    Nations (2018, September 13), Urbanization, [https://www.un.org/development/desa/pd/content/urbanization-0](https://www.un.org/development/desa/pd/content/urbanization-0#:~:text=The%20world%20is%20becoming%20increasingly,around%20two%2Dthirds%20in%202050.)'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: '[[1](https://www.un.org/development/desa/pd/content/urbanization-0)] 联合国 (2018年9月13日)，城市化，[https://www.un.org/development/desa/pd/content/urbanization-0](https://www.un.org/development/desa/pd/content/urbanization-0#:~:text=The%20world%20is%20becoming%20increasingly,around%20two%2Dthirds%20in%202050.)'
- en: '[[2](http://www.demographia.com/db-worldua.pdf)] Demographia (2023, January
    24), World Urban Areas 19th Annual, [http://www.demographia.com/db-worldua.pdf](http://www.demographia.com/db-worldua.pdf)'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: '[[2](http://www.demographia.com/db-worldua.pdf)] Demographia (2023年1月24日)，全球城市区第19次年度报告，[http://www.demographia.com/db-worldua.pdf](http://www.demographia.com/db-worldua.pdf)'
- en: '[[3](http://demographia.com/db-htld-rail.htm)] Demographia (2003, January 1),
    Where Rail Transit Works, and Why, [http://demographia.com/db-htld-rail.htm](http://demographia.com/db-htld-rail.htm)'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: '[[3](http://demographia.com/db-htld-rail.htm)] Demographia (2003年1月1日)，铁路交通有效的地方及原因，[http://demographia.com/db-htld-rail.htm](http://demographia.com/db-htld-rail.htm)'
- en: '[[4](https://www.researchgate.net/publication/325582898_Constrained_Construction_of_Planar_Delaunay_Triangulations_without_Flipping)]
    Vera Galishnikova, Peter Jan Pahl (2018, Mar 15), Constained Construction of Planar
    Delaunay Triangulations without flipping, [https://www.researchgate.net/publication/325582898_Constrained_Construction_of_Planar_Delaunay_Triangulations_without_Flipping](https://www.researchgate.net/publication/325582898_Constrained_Construction_of_Planar_Delaunay_Triangulations_without_Flipping)'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '[[4](https://www.researchgate.net/publication/325582898_Constrained_Construction_of_Planar_Delaunay_Triangulations_without_Flipping)]
    Vera Galishnikova, Peter Jan Pahl (2018年3月15日)，无翻转约束平面Delaunay三角剖分的构建，[https://www.researchgate.net/publication/325582898_Constrained_Construction_of_Planar_Delaunay_Triangulations_without_Flipping](https://www.researchgate.net/publication/325582898_Constrained_Construction_of_Planar_Delaunay_Triangulations_without_Flipping)'
- en: '[5] Liebling T.M., Pournin L. (2010), Voronoi Diagrams and Delaunay Triangulations:
    Ubiquitous Siamese Twins. Documenta Mathematica. Mathematics Subject Classification:
    01A65, 49- 03, 52C99, 68R99, 70–08, 92–08'
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: '[5] Liebling T.M., Pournin L. (2010)，Voronoi图与Delaunay三角剖分：无处不在的“连体双胞胎”。《数学文献》
    数学主题分类：01A65, 49-03, 52C99, 68R99, 70–08, 92–08'
- en: '[[6](https://www.findmyschool.vic.gov.au/)] Government of Melbourne (2024),
    School Catchment Map, [https://www.findmyschool.vic.gov.au/](https://www.findmyschool.vic.gov.au/)'
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: '[[6](https://www.findmyschool.vic.gov.au/)] 墨尔本政府 (2024)，学校学区图，[https://www.findmyschool.vic.gov.au/](https://www.findmyschool.vic.gov.au/)'
- en: '[[7](https://en.wikipedia.org/wiki/Taxicab_geometry)] Wikipedia (2024), Taxicab
    geometry, [https://en.wikipedia.org/wiki/Taxicab_geometry](https://en.wikipedia.org/wiki/Taxicab_geometry)'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: '[[7](https://en.wikipedia.org/wiki/Taxicab_geometry)] 维基百科 (2024)，出租车几何，[https://en.wikipedia.org/wiki/Taxicab_geometry](https://en.wikipedia.org/wiki/Taxicab_geometry)'
- en: '[8] Wikipedia (2024), Greater Tokyo Area, [https://en.wikipedia.org/wiki/Greater_Tokyo_Area](https://en.wikipedia.org/wiki/Greater_Tokyo_Area)'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: '[8] 维基百科 (2024)，大东京地区，[https://en.wikipedia.org/wiki/Greater_Tokyo_Area](https://en.wikipedia.org/wiki/Greater_Tokyo_Area)'
- en: '[[9](https://www.odpt.org/)] Public Transportation Open Data Center (2024),
    Dataset — 公共交通オープンデータセンター データカタログサイト,[ttps://www.odpt.org/](https://www.odpt.org/)'
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: '[[9](https://www.odpt.org/)] 公共交通开放数据中心 (2024)，数据集 — 公共交通オープンデータセンター 数据目录网站，[ttps://www.odpt.org/](https://www.odpt.org/)'
- en: '[[10](http://alumni.cs.ucr.edu/~weiw/paper/VD_highways.pdf)] D.T. Lee, Chung-Shou
    Liao, Wei-Bung Wang (N/A), TIme-based Voronoi Diagram, [http://alumni.cs.ucr.edu/~weiw/paper/VD_highways.pdf](http://alumni.cs.ucr.edu/~weiw/paper/VD_highways.pdf)'
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: '[[10](http://alumni.cs.ucr.edu/~weiw/paper/VD_highways.pdf)] D.T. Lee, Chung-Shou
    Liao, Wei-Bung Wang (N/A), 基于时间的Voronoi图，[http://alumni.cs.ucr.edu/~weiw/paper/VD_highways.pdf](http://alumni.cs.ucr.edu/~weiw/paper/VD_highways.pdf)'
- en: '[[11](https://www.researchgate.net/figure/Voronoi-diagrams-of-selected-areas-for-geographical-a-road-b-and-travel-time_fig5_336071639)]
    Solutions for Planning Smart Hybrid Public Transportation System — Poznan Agglomeration
    as a Case Study of Satellite Towns’ Connections — Scientific Figure on ResearchGate.
    [https://www.researchgate.net/figure/Voronoi-diagrams-of-selected-areas-for-geographical-a-road-b-and-travel-time_fig5_336071639](https://www.researchgate.net/figure/Voronoi-diagrams-of-selected-areas-for-geographical-a-road-b-and-travel-time_fig5_336071639)'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: '[[11](https://www.researchgate.net/figure/Voronoi-diagrams-of-selected-areas-for-geographical-a-road-b-and-travel-time_fig5_336071639)]
    智能混合公共交通系统规划解决方案 — 以波兹南都市圈作为卫星城连接的案例研究 — ResearchGate上的科学图表。 [https://www.researchgate.net/figure/Voronoi-diagrams-of-selected-areas-for-geographical-a-road-b-and-travel-time_fig5_336071639](https://www.researchgate.net/figure/Voronoi-diagrams-of-selected-areas-for-geographical-a-road-b-and-travel-time_fig5_336071639)'
- en: Pictograms by [かわいいフリー素材集 いらすとや (irasutoya.com)](https://www.irasutoya.com/),
    © Takashi Mifune
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 图标来自[可爱免费素材集 いらすとや (irasutoya.com)](https://www.irasutoya.com/)，© 高桥三舟
- en: '![](../Images/cda231b38af31aa11c49c38bee9c0acc.png)'
  id: totrans-194
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/cda231b38af31aa11c49c38bee9c0acc.png)'
- en: (Image by author, Illustrations by [Takashi Mifune under free use](https://www.irasutoya.com/p/terms.html))
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: （图像由作者提供，插图来自[高桥三舟根据自由使用许可](https://www.irasutoya.com/p/terms.html)）
