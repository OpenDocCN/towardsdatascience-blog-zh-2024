<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Designing the Relationship Between LLMs and User Experience</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Designing the Relationship Between LLMs and User Experience</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/designing-the-relationship-between-llms-and-user-experience-6720f8fee998?source=collection_archive---------6-----------------------#2024-04-19">https://towardsdatascience.com/designing-the-relationship-between-llms-and-user-experience-6720f8fee998?source=collection_archive---------6-----------------------#2024-04-19</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="gr gs gt gu gv ab"><div><div class="ab gw"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@janna.lipenkova_52659?source=post_page---byline--6720f8fee998--------------------------------" rel="noopener follow"><div class="l gx gy by gz ha"><div class="l ed"><img alt="Dr. Janna Lipenkova" class="l ep by dd de cx" src="../Images/112fe9a8c5936869243f2a43fde6dfee.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*nEyO31-3uU0fRbNRLQwABg.png"/><div class="hb by l dd de em n hc eo"/></div></div></a></div></div><div class="hd ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--6720f8fee998--------------------------------" rel="noopener follow"><div class="l he hf by gz hg"><div class="l ed"><img alt="Towards Data Science" class="l ep by br hh cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hb by l br hh em n hc eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hi ab q"><div class="ab q hj"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hk hl bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hm" data-testid="authorName" href="https://medium.com/@janna.lipenkova_52659?source=post_page---byline--6720f8fee998--------------------------------" rel="noopener follow">Dr. Janna Lipenkova</a></p></div></div></div><span class="hn ho" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hk hl dx"><button class="hp hq ah ai aj ak al am an ao ap aq ar hr hs ht" disabled="">Follow</button></p></div></div></span></div></div><div class="l hu"><span class="bf b bg z dx"><div class="ab cn hv hw hx"><div class="hy hz ab"><div class="bf b bg z dx ab ia"><span class="ib l hu">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hm ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--6720f8fee998--------------------------------" rel="noopener follow"><p class="bf b bg z ic id ie if ig ih ii ij bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hn ho" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">13 min read</span><div class="ik il l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Apr 19, 2024</span></div></span></div></span></div></div></div><div class="ab cp im in io ip iq ir is it iu iv iw ix iy iz ja jb"><div class="h k w ea eb q"><div class="jr l"><div class="ab q js jt"><div class="pw-multi-vote-icon ed ib ju jv jw"><div class=""><div class="jx jy jz ka kb kc kd am ke kf kg jw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kh ki kj kk kl km kn"><p class="bf b dy z dx"><span class="jy">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao jx kq kr ab q ee ks kt" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="kp"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count ko kp">1</span></p></button></div></div></div><div class="ab q jc jd je jf jg jh ji jj jk jl jm jn jo jp jq"><div class="ku k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al kv an ao ap hr kw kx ky" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep kz cn"><div class="l ae"><div class="ab cb"><div class="la lb lc ld le lf ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al kv an ao ap hr lg lh kt li lj lk ll lm s ln lo lp lq lr ls lt u lu lv lw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al kv an ao ap hr lg lh kt li lj lk ll lm s ln lo lp lq lr ls lt u lu lv lw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al kv an ao ap hr lg lh kt li lj lk ll lm s ln lo lp lq lr ls lt u lu lv lw"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="ma mb mc md me mf lx ly paragraph-image"><div role="button" tabindex="0" class="mg mh ed mi bh mj"><div class="lx ly lz"><img src="../Images/e1bb3550165ffc5ffb08c3d0cbd76f53.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZLKwAfDquwSyi6dXNZ8YkQ.png"/></div></div></figure><p id="7513" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">A while ago, I wrote the article <a class="af nj" href="https://medium.com/towards-data-science/choosing-the-right-language-model-for-your-nlp-use-case-1288ef3c4929" rel="noopener">Choosing the right language model for your NLP use case</a> on Medium. It focussed on the nuts and bolts of LLMs — and while rather popular, by now, I realize it doesn’t actually say much about selecting LLMs. I wrote it at the beginning of my LLM journey and somehow figured that the technical details about LLMs — their inner workings and training history — would speak for themselves, allowing AI product builders to confidently select LLMs for specific scenarios.</p><p id="7a07" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">Since then, I have integrated LLMs into multiple AI products. This allowed me to discover how exactly the technical makeup of an LLM determines the final experience of a product. It also strengthened the belief that product managers and designers need to have a solid understanding of how an LLM works “under the hood.” LLM interfaces are different from traditional graphical interfaces. The latter provide users with a (hopefully clear) mental model by displaying the functionality of a product in a rather implicit way. On the other hand, LLM interfaces use free text as the main interaction format, offering much more flexibility. At the same time, they also “hide” the capabilities and the limitations of the underlying model, leaving it to the user to explore and discover them. Thus, a simple text field or chat window invites an infinite number of intents and inputs and can display as many different outputs.</p><figure class="nk nl nm nn no mf lx ly paragraph-image"><div role="button" tabindex="0" class="mg mh ed mi bh mj"><div class="lx ly lz"><img src="../Images/18bdd4b643ac7011cb6e01a66a1d4b65.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Fboh4cd-iw1T0zofsYvjDg.jpeg"/></div></div><figcaption class="np nq nr lx ly ns nt bf b bg z dx">Figure 1 A simple chat window is open for an infinite number of inputs (image via vectorstock.com under license purchased by author)</figcaption></figure><p id="77db" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">The responsibility for the success of these interactions is not (only) on the engineering side — rather, a big part of it should be assumed by whoever manages and designs the product. In this article, we will flesh out the relationship between LLMs and user experience, working with two universal ingredients that you can use to improve the experience of your product:</p><ol class=""><li id="f055" class="ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nu nv nw bk"><strong class="mn fr">Functionality</strong>, i.e., the tasks that are performed by an LLM, such as conversation, question answering, and sentiment analysis</li><li id="7ac2" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni nu nv nw bk"><strong class="mn fr">Quality</strong> with which an LLM performs the task, including objective criteria such as correctness and coherence, but also subjective criteria such as an appropriate tone and style</li></ol><p id="d4cd" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk"><em class="oc">(Note: These two ingredients are part of any LLM application. Beyond these, most applications will also have a range of more individual criteria to be fulfilled, such as latency, privacy, and safety, which will not be addressed here.)</em></p><p id="6fd5" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">Thus, in Peter Drucker’s words, it’s about “doing the right things” (functionality) and “doing them right” (quality). Now, as we know, LLMs will never be 100% right. As a builder, you can approximate the ideal experience from two directions:</p><ul class=""><li id="c7f5" class="ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni od nv nw bk">On the one hand, you need to strive for <strong class="mn fr">engineering excellence </strong>and make the right choices when selecting, fine-tuning, and evaluating your LLM.</li><li id="2b79" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">On the other hand, you need to work your <strong class="mn fr">users</strong> by nudging them towards intents covered by the LLM, managing their expectations, and having routines that fire off when things go wrong.</li></ul><p id="1858" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">In this article, we will focus on the engineering part. The design of the ideal partnership with human users will be covered in a future article. First, I will briefly introduce the steps in the engineering process — LLM selection, adaptation, and evaluation — which directly determine the final experience. Then, we will look at the two ingredients — functionality and quality — and provide some guidelines to steer your work with LLMs to optimize the product’s performance along these dimensions.</p><p id="1fd7" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">A note on scope: In this article, we will consider the use of stand-alone LLMs. Many of the principles and guidelines also apply to LLMs used in RAG (Retrieval-Augmented Generation) and agent systems. For a more detailed consideration of the user experience in these extended LLM scenarios, please refer to my book <a class="af nj" href="https://www.manning.com/books/the-art-of-ai-product-development" rel="noopener ugc nofollow" target="_blank">The Art of AI Product Development</a>.</p><h1 id="df43" class="oe of fq bf og oh oi oj ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb bk">The LLM engineering process</h1><p id="009a" class="pw-post-body-paragraph ml mm fq mn b mo pc mq mr ms pd mu mv mw pe my mz na pf nc nd ne pg ng nh ni fj bk">In the following, we will focus on the three steps of LLM selection, adaptation, and evaluation. Let’s consider each of these steps:</p><ol class=""><li id="c43f" class="ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni nu nv nw bk"><strong class="mn fr">LLM selection</strong> involves scoping your deployment options (in particular, open-source vs. commercial LLMs) and selecting an LLM whose training data and pre-training objective align with your target functionality. In addition, the more powerful the model you can select in terms of parameter size and training data quantity, the better the chances it will achieve a high quality.</li><li id="cbc0" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni nu nv nw bk"><strong class="mn fr">LLM adaptation</strong> via in-context learning or fine-tuning gives you the chance to close the gap between your users’ intents and the model's original pre-training objective. Additionally, you can tune the model’s quality by incorporating the style and tone you would like your model to assume into the fine-tuning data.</li><li id="85d1" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni nu nv nw bk"><strong class="mn fr">LLM evaluation</strong> involves continuously evaluating the model across its lifecycle. As such, it is not a final step at the end of a process but a continuous activity that evolves and becomes more specific as you collect more insights and data on the model.</li></ol><p id="202c" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">The following figure summarizes the process:</p><figure class="nk nl nm nn no mf lx ly paragraph-image"><div role="button" tabindex="0" class="mg mh ed mi bh mj"><div class="lx ly ph"><img src="../Images/565cda173a35980b5c3e99bcad928b5f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2bDMVgSkLORxSdJ3pQFqqw.png"/></div></div><figcaption class="np nq nr lx ly ns nt bf b bg z dx">Figure 2 Engineering the LLM user experience</figcaption></figure><p id="7ab5" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">In real life, the three stages will overlap, and there can be back-and-forth between the stages. In general, model selection is more the “one big decision.” Of course, you can shift from one model to another further down the road and even should do this when new, more suitable models appear on the market. However, these changes are expensive since they affect everything downstream. Past the discovery phase, you will not want to make them on a regular basis. On the other hand, LLM adaptation and evaluation are highly iterative. They should be accompanied by continuous discovery activities where you learn more about the behavior of your model and your users. Finally, all three activities should be embedded into a solid LLMOps pipeline, which will allow you to integrate new insights and data with minimal engineering friction.</p><p id="8819" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">Now, let’s move to the second column of the chart, scoping the functionality of an LLM and learning how it can be shaped during the three stages of this process.</p><h1 id="f1cb" class="oe of fq bf og oh oi oj ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb bk">Functionality: responding to user intents</h1><p id="8e8b" class="pw-post-body-paragraph ml mm fq mn b mo pc mq mr ms pd mu mv mw pe my mz na pf nc nd ne pg ng nh ni fj bk">You might be wondering why we talk about the “functionality” of LLMs. After all, aren’t LLMs those versatile all-rounders that can magically perform any linguistic task we can think of? In fact, they are, as famously described in the paper <a class="af nj" href="https://arxiv.org/pdf/2005.14165.pdf" rel="noopener ugc nofollow" target="_blank">Language Models Are Few-Shot Learners</a>. LLMs can learn new capabilities from just a couple of examples. Sometimes, their capabilities will even “emerge” out of the blue during normal training and — hopefully — be discovered by chance. This is because the task of language modeling is just as versatile as it is challenging — as a side effect, it equips an LLM with the ability to perform many other related tasks.</p><p id="b0da" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">Still, the pre-training objective of LLMs is to <strong class="mn fr">generate the next word given the context of past words</strong> (OK, that’s a simplification — in auto-encoding, the LLM can work in both directions [3]). This is what a pre-trained LLM, motivated by an imaginary “reward,” will insist on doing once it is prompted. In most cases, there is quite a gap between this objective and a user who comes to your product to chat, get answers to questions, or translate a text from German to Italian. The landmark paper <a class="af nj" href="https://aclanthology.org/2020.acl-main.463.pdf" rel="noopener ugc nofollow" target="_blank">Climbing Towards NLU: On Meaning, Form, and Understanding in the Age of Data</a> by Emily Bender and Alexander Koller even argues that language models are generally unable to recover communicative intents and thus are doomed to work with incomplete meaning representations.</p><p id="c704" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">Thus, it is one thing to brag about amazing LLM capabilities in scientific research and demonstrate them on highly controlled benchmarks and test scenarios. Rolling out an LLM to an anonymous crowd of users with different AI skills and intents—some harmful—is a different kind of game. This is especially true once you understand that your product inherits not only the capabilities of the LLM but also its weaknesses and risks, and you (not a third-party provider) hold the responsibility for its behavior.</p><p id="7f51" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">In practice, we have learned that it is best to identify and isolate discrete islands of functionality when integrating LLMs into a product. These functions can largely correspond to the different intents with which your users come to your product. For example, it could be:</p><ul class=""><li id="c51f" class="ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni od nv nw bk">Engaging in conversation</li><li id="bd07" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">Retrieving information</li><li id="00ea" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">Seeking recommendations for a specific situation</li><li id="9a6f" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">Looking for inspiration</li></ul><p id="97ee" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">Oftentimes, these can be further decomposed into more granular, potentially even reusable, capabilities. “Engaging in conversation” could be decomposed into:</p><ul class=""><li id="7e68" class="ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni od nv nw bk">Provide informative and relevant conversational turns</li><li id="e163" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">Maintain a memory of past interactions (instead of starting from scratch at every turn)</li><li id="c2e9" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">Display a consistent personality</li></ul><p id="e81b" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">Taking this more discrete approach to LLM capabilities provides you with the following advantages:</p><ul class=""><li id="c1bf" class="ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni od nv nw bk">ML engineers and data scientists can better focus their engineering activities (Figure 2) on the target functionalities.</li><li id="19e0" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">Communication about your product becomes on-point and specific, helping you manage user expectations and preserving trust, integrity, and credibility.</li><li id="3397" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">In the user interface, you can use a range of design patterns, such as prompt templates and placeholders, to increase the chances that user intents are aligned with the model’s functionality.</li></ul><h1 id="495f" class="oe of fq bf og oh oi oj ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb bk">Guidelines for ensuring the right functionality</h1><p id="c57e" class="pw-post-body-paragraph ml mm fq mn b mo pc mq mr ms pd mu mv mw pe my mz na pf nc nd ne pg ng nh ni fj bk">Let’s summarize some practical guidelines to make sure that the LLM does the right thing in your product:</p><ul class=""><li id="457a" class="ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni od nv nw bk">During LLM selection, make sure you understand the basic pre-training objective of the model. There are three basic pre-training objectives (auto-encoding, autoregression, sequence-to-sequence), and each of them influences the behavior of the model.</li><li id="1105" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">Many LLMs are also pre-trained with an advanced objective, such as conversation or executing explicit instructions (instruction fine-tuning). Selecting a model that is already prepared for your task will grant you an efficient head start, reducing the amount of downstream adaptation and fine-tuning you need to do to achieve satisfactory quality.</li><li id="16d0" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">LLM adaptation via in-context learning or fine-tuning gives you the opportunity to close the gap between the original pre-training objective and the user intents you want to serve.</li></ul><figure class="nk nl nm nn no mf lx ly paragraph-image"><div role="button" tabindex="0" class="mg mh ed mi bh mj"><div class="lx ly pi"><img src="../Images/7dbefddedca2b9f8e0073900caaff6a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r9Yptt5CHl3AQ7a4uIu-Kw.png"/></div></div><figcaption class="np nq nr lx ly ns nt bf b bg z dx">Figure 3 LLM adaptation closes the gap between pre-training objectives and user intents</figcaption></figure><ul class=""><li id="0707" class="ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni od nv nw bk">During the initial discovery, you can use in-context learning to collect initial usage data and sharpen your understanding of relevant user intents and their distribution.</li><li id="3606" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">In most scenarios, in-context learning (prompt tuning) is not sustainable in the long term — it is simply not efficient. Over time, you can use your new data and learnings as a basis to fine-tune the weights of the model.</li><li id="b46a" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">During model evaluation, make sure to apply task-specific metrics. For example, Text2SQL LLMs (cf. <a class="af nj" href="https://medium.com/towards-data-science/enabling-the-data-driven-organisation-with-text2sql-f8e07089dd0c" rel="noopener">this article</a>) can be evaluated using metrics like execution accuracy and test-suite accuracy, while summarization can be evaluated using similarity-based metrics.</li></ul><p id="6b1a" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">These are just short snapshots of the lessons we learned when integrating LLMs. My upcoming book <a class="af nj" href="https://www.manning.com/books/the-art-of-ai-product-development" rel="noopener ugc nofollow" target="_blank">The Art of AI Product Development</a> contains deep dives into each of the guidelines along with numerous examples. For the technical details behind pre-training objectives and procedures, you can refer to <a class="af nj" href="https://medium.com/towards-data-science/choosing-the-right-language-model-for-your-nlp-use-case-1288ef3c4929" rel="noopener">this article</a>.</p><p id="b805" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">Ok, so you have gained an understanding of the intents with which your users come to your product and “motivated” your model to respond to these intents. You might even have put out the LLM into the world in the hope that it will kick off the data flywheel. Now, if you want to keep your good-willed users and acquire new users, you need to quickly ramp up on our second ingredient, namely quality.</p><h1 id="aaeb" class="oe of fq bf og oh oi oj ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb bk">Achieving a high quality</h1><p id="2b06" class="pw-post-body-paragraph ml mm fq mn b mo pc mq mr ms pd mu mv mw pe my mz na pf nc nd ne pg ng nh ni fj bk">In the context of LLMs, quality can be decomposed into an objective and a subjective component. The objective component tells you when and why things go wrong (i.e., the LLM makes explicit mistakes). The subjective component is more subtle and emotional, reflecting the alignment with your specific user crowd.</p><h1 id="fac0" class="oe of fq bf og oh oi oj ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb bk">Objective quality criteria</h1><p id="db6b" class="pw-post-body-paragraph ml mm fq mn b mo pc mq mr ms pd mu mv mw pe my mz na pf nc nd ne pg ng nh ni fj bk">Using language to communicate comes naturally to humans. Language is ingrained in our minds from the beginning of our lives, and we have a hard time imagining how much effort it takes to learn it from scratch. Even the challenges we experience when learning a foreign language can’t compare to the training of an LLM. The LLM starts from a blank slate, while our learning process builds on an incredibly rich basis of existing knowledge about the world and about how language works in general.</p><p id="982d" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">When working with an LLM, we should constantly remain aware of the many ways in which things can go wrong:</p><ul class=""><li id="1e6e" class="ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni od nv nw bk">The LLM might make linguistic mistakes.</li><li id="eb00" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">The LLM might slack on coherence, logic, and consistency.</li><li id="d3fc" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">The LLM might have insufficient world knowledge, leading to wrong statements and hallucinations.</li></ul><p id="7eef" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">These shortcomings can quickly turn into showstoppers for your product — output quality is a central determinant of the user experience of an LLM product. For example, one of the major determinants of the “public” success of ChatGPT was that it was indeed able to generate correct, fluent, and relatively coherent text across a large variety of domains. Earlier generations of LLMs were not able to achieve this objective quality. Most pre-trained LLMs that are used in production today do have the capability to generate language. However, their performance on criteria like coherence, consistency, and world knowledge can be very variable and inconsistent. To achieve the experience you are aiming for, it is important to have these requirements clearly prioritized and select and adapt LLMs accordingly.</p><h1 id="50f1" class="oe of fq bf og oh oi oj ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb bk">Subjective quality criteria</h1><p id="4afa" class="pw-post-body-paragraph ml mm fq mn b mo pc mq mr ms pd mu mv mw pe my mz na pf nc nd ne pg ng nh ni fj bk">Venturing into the more nuanced subjective domain, you want to understand and monitor how users feel around your product. Do they feel good and trustful and get into a state of flow when they use it? Or do they go away with feelings of frustration, inefficiency, and misalignment? A lot of this hinges on individual nuances of culture, values, and style. If you are building a copilot for junior developers, you hardly want it to speak the language of senior executives and vice versa.</p><p id="d9d9" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">For the sake of example, imagine you are a product marketer. You have spent a lot of your time with a fellow engineer to iterate on an LLM that helps you with content generation. At some point, you find yourself chatting with the UX designer on your team and bragging about your new AI assistant. Your colleague doesn’t get the need for so much effort. He is regularly using ChatGPT to assist with the creation and evaluation of UX surveys and is very satisfied with the results. You counter — ChatGPT’s outputs are too generic and monotonous for your storytelling and writing tasks. In fact, you have been using it at the beginning and got quite embarrassed because, at some point, your readers started to recognize the characteristic ChatGPT flavor. That was a slippery episode in your career, after which you decided you needed something more sophisticated.</p><p id="2e3c" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">There is no right or wrong in this discussion. ChatGPT is good for straightforward factual tasks where style doesn’t matter that much. By contrast, you as a marketer need an assistant that can assist in crafting high-quality, persuasive communications that speak the language of your customers and reflect the unique DNA of your company.</p><p id="ca2c" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">These subjective nuances can ultimately define the difference between an LLM that is useless because its outputs need to be rewritten anyway and one that is “good enough” so users start using it and feed it with suitable fine-tuning data. The holy grail of LLM mastery is personalization — i.e., using efficient fine-tuning or prompt tuning to adapt the LLM to the individual preferences of any user who has spent a certain amount of time with the model. If you are just starting out on your LLM journey, these details might seem far off — but in the end, they can help you reach a level where your LLM delights users by responding in the exact manner and style that is desired, spurring user satisfaction and large-scale adoption and leaving your competition behind.</p><h1 id="fcc0" class="oe of fq bf og oh oi oj ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb bk">Guidelines</h1><p id="e3fc" class="pw-post-body-paragraph ml mm fq mn b mo pc mq mr ms pd mu mv mw pe my mz na pf nc nd ne pg ng nh ni fj bk">Here are our tips for managing the quality of your LLM:</p><ul class=""><li id="0c43" class="ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni od nv nw bk">Be alert to different kinds of feedback. The quest for quality is continuous and iterative — you start with a few data points and a very rough understanding of what quality means for your product. Over time, you flesh out more and more details and learn which levers you can pull to improve your LLM.</li><li id="8bab" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">During model selection, you still have a lot of discovery to do — start with “eyeballing” and testing different LLMs with various inputs (ideally by multiple team members).</li><li id="5171" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">Your engineers will also be evaluating academic benchmarks and evaluation results that are published together with the model. However, keep in mind that these are only rough indicators of how the model will perform in your specific product.</li><li id="db35" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">At the beginning, perfectionism isn’t the answer. Your model should be just good enough to attract users who will start supplying it with relevant data for fine-tuning and evaluation.</li><li id="6c75" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">Bring your team and users together for qualitative discussions of LLM outputs. As they use language to judge and debate what is right and what is wrong, you can gradually uncover their objective and emotional expectations.</li><li id="4f5b" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">Make sure to have a solid LLMOps pipeline in place so you can integrate new data smoothly, reducing engineering friction.</li><li id="c3d7" class="ml mm fq mn b mo nx mq mr ms ny mu mv mw nz my mz na oa nc nd ne ob ng nh ni od nv nw bk">Don’t stop — at later stages, you can shift your focus toward nuances and personalization, which will also help you sharpen your competitive differentiation.</li></ul><h1 id="d742" class="oe of fq bf og oh oi oj ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb bk">To sum up: assuming responsibility</h1><p id="7332" class="pw-post-body-paragraph ml mm fq mn b mo pc mq mr ms pd mu mv mw pe my mz na pf nc nd ne pg ng nh ni fj bk">Pre-trained LLMs are highly convenient — they make AI accessible to everyone, offloading the huge engineering, computation, and infrastructure spending needed to train a huge initial model. Once published, they are ready to use, and we can plug their amazing capabilities into our product. However, when using a third-party model in your product, you inherit not only its power but also the many ways in which it can and will fail. When things go wrong, the last thing you want to do to maintain integrity is to blame an external model provider, your engineers, or — worse — your users.</p><p id="7a1f" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">Thus, when building with LLMs, you should not only look for transparency into the model's origins (training data and process) but also build a causal understanding of how its technical makeup shapes the experience offered by your product. This will allow you to find the sensitive balance between kicking off a robust data flywheel at the beginning of your journey and continuously optimizing and differentiating the LLM as your product matures toward excellence.</p><h1 id="e169" class="oe of fq bf og oh oi oj ok ol om on oo op oq or os ot ou ov ow ox oy oz pa pb bk">References</h1><p id="a052" class="pw-post-body-paragraph ml mm fq mn b mo pc mq mr ms pd mu mv mw pe my mz na pf nc nd ne pg ng nh ni fj bk">[1] Janna Lipenkova (2022). <a class="af nj" href="https://medium.com/towards-data-science/choosing-the-right-language-model-for-your-nlp-use-case-1288ef3c4929" rel="noopener">Choosing the right language model for your NLP use case</a>, Medium.</p><p id="b79a" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">[2] Tom B. Brown et al. (2020). <a class="af nj" href="https://arxiv.org/abs/2005.14165" rel="noopener ugc nofollow" target="_blank">Language Models are Few-Shot Learners</a>.</p><p id="1b1a" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">[3] Jacob Devlin et al. (2018). <a class="af nj" href="https://arxiv.org/abs/1810.04805" rel="noopener ugc nofollow" target="_blank">BERT: Pre-training of Deep Bidirectional Transformers for Language Understanding</a>.</p><p id="6845" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">[4] Emily M. Bender and Alexander Koller (2020). <a class="af nj" href="https://aclanthology.org/2020.acl-main.463.pdf" rel="noopener ugc nofollow" target="_blank">Climbing towards NLU: On Meaning, Form, and Understanding in the Age of Data</a>.</p><p id="f785" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">[5] Janna Lipenkova (upcoming). <a class="af nj" href="https://www.manning.com/books/the-art-of-ai-product-development" rel="noopener ugc nofollow" target="_blank">The Art of AI Product Development</a>, Manning Publications.</p><p id="7442" class="pw-post-body-paragraph ml mm fq mn b mo mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh ni fj bk">Note: All images are by the author, except when noted otherwise.</p></div></div></div></div>    
</body>
</html>