- en: 'Computing Minimum Sample Size for A/B Tests in Statsmodels: How and Why'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è®¡ç®—Statsmodelsä¸­A/Bæµ‹è¯•çš„æœ€å°æ ·æœ¬é‡ï¼šå¦‚ä½•è®¡ç®—ä»¥åŠä¸ºä»€ä¹ˆ
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/computing-minimum-sample-size-for-a-b-tests-in-statsmodels-how-and-why-398e357945d9?source=collection_archive---------3-----------------------#2024-05-31](https://towardsdatascience.com/computing-minimum-sample-size-for-a-b-tests-in-statsmodels-how-and-why-398e357945d9?source=collection_archive---------3-----------------------#2024-05-31)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/computing-minimum-sample-size-for-a-b-tests-in-statsmodels-how-and-why-398e357945d9?source=collection_archive---------3-----------------------#2024-05-31](https://towardsdatascience.com/computing-minimum-sample-size-for-a-b-tests-in-statsmodels-how-and-why-398e357945d9?source=collection_archive---------3-----------------------#2024-05-31)
- en: A deep-dive into how and why Statsmodels uses numerical optimization instead
    of closed-form formulas
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ·±å…¥æ¢è®¨Statsmodelså¦‚ä½•ä»¥åŠä¸ºä»€ä¹ˆä½¿ç”¨æ•°å€¼ä¼˜åŒ–è€Œéå°é—­å½¢å¼çš„å…¬å¼
- en: '[](https://jasonjiajs.medium.com/?source=post_page---byline--398e357945d9--------------------------------)[![Jason
    Jia](../Images/e3e3bdf0873cb48384dcf2f76a964ebd.png)](https://jasonjiajs.medium.com/?source=post_page---byline--398e357945d9--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--398e357945d9--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--398e357945d9--------------------------------)
    [Jason Jia](https://jasonjiajs.medium.com/?source=post_page---byline--398e357945d9--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://jasonjiajs.medium.com/?source=post_page---byline--398e357945d9--------------------------------)[![Jason
    Jia](../Images/e3e3bdf0873cb48384dcf2f76a964ebd.png)](https://jasonjiajs.medium.com/?source=post_page---byline--398e357945d9--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--398e357945d9--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--398e357945d9--------------------------------)
    [Jason Jia](https://jasonjiajs.medium.com/?source=post_page---byline--398e357945d9--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--398e357945d9--------------------------------)
    Â·10 min readÂ·May 31, 2024
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº[Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--398e357945d9--------------------------------)
    Â·é˜…è¯»æ—¶é—´10åˆ†é’ŸÂ·2024å¹´5æœˆ31æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/cfc8f9479bd992d2d46961c47bd201c2.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/cfc8f9479bd992d2d46961c47bd201c2.png)'
- en: Image generated by DALL-E
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±DALL-Eç”Ÿæˆçš„å›¾åƒ
- en: Introduction
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä»‹ç»
- en: There is currently no good resource on how Statsmodels computes the minimum
    sample size.
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç›®å‰æ²¡æœ‰å…³äºStatsmodelså¦‚ä½•è®¡ç®—æœ€å°æ ·æœ¬é‡çš„å¥½èµ„æºã€‚
- en: 'It is critical to calculate the minimum sample size required before conducting
    an A/B test. A popular way to do it is by calling the [tt_ind_solve_power function](https://www.statsmodels.org/stable/generated/statsmodels.stats.power.tt_ind_solve_power.html)
    in Pythonâ€™s Statsmodels package, but there are currently 2 gaps when it comes
    to understanding how it works:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿›è¡ŒA/Bæµ‹è¯•ä¹‹å‰ï¼Œè®¡ç®—æ‰€éœ€çš„æœ€å°æ ·æœ¬é‡è‡³å…³é‡è¦ã€‚ä¸€ç§å¸¸ç”¨çš„æ–¹æ³•æ˜¯åœ¨Pythonçš„StatsmodelsåŒ…ä¸­è°ƒç”¨[tt_ind_solve_powerå‡½æ•°](https://www.statsmodels.org/stable/generated/statsmodels.stats.power.tt_ind_solve_power.html)ï¼Œä½†ç›®å‰åœ¨ç†è§£å®ƒçš„å·¥ä½œåŸç†æ—¶å­˜åœ¨ä¸¤ä¸ªç©ºç™½ï¼š
- en: 1\. There are many great articles (e.g. by [Stan Nsky](/experiment-sample-size-calculation-using-power-analysis-81cb1bc5f74b),
    TDS 2019) explaining what the parameters mean and provide examples of function
    calls. However, they do not explain how the function actually computes the sample
    size and why the procedure is correct.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 1. æœ‰å¾ˆå¤šä¼˜ç§€çš„æ–‡ç« ï¼ˆä¾‹å¦‚[Stan Nsky](/experiment-sample-size-calculation-using-power-analysis-81cb1bc5f74b)ï¼ŒTDS
    2019ï¼‰è§£é‡Šäº†å‚æ•°çš„å«ä¹‰å¹¶æä¾›äº†å‡½æ•°è°ƒç”¨çš„ç¤ºä¾‹ã€‚ç„¶è€Œï¼Œå®ƒä»¬å¹¶æ²¡æœ‰è§£é‡Šè¯¥å‡½æ•°æ˜¯å¦‚ä½•å®é™…è®¡ç®—æ ·æœ¬é‡çš„ï¼Œä¹Ÿæ²¡æœ‰è¯´æ˜ä¸ºä»€ä¹ˆè¯¥è¿‡ç¨‹æ˜¯æ­£ç¡®çš„ã€‚
- en: 2\. There are also many great articles (e.g. by [Mintao Wei](/probing-into-minimum-sample-size-formula-derivation-and-usage-8db9a556280b#c172),
    TDS 2023) that explain the statistical derivation based on a z-test for proportions
    such as conversion rates, which is also a popular choice for many online sample
    size calculators (e.g. [Evan Millerâ€™s Calculator](https://www.evanmiller.org/ab-testing/sample-size.html)).
    However, this is not the method used by Statsmodels and results can differ.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 2. ä¹Ÿæœ‰è®¸å¤šä¼˜ç§€çš„æ–‡ç« ï¼ˆä¾‹å¦‚[Mintao Wei](/probing-into-minimum-sample-size-formula-derivation-and-usage-8db9a556280b#c172)ï¼ŒTDS
    2023ï¼‰è§£é‡Šäº†åŸºäºzæ£€éªŒçš„æ¯”ä¾‹ç»Ÿè®¡æ¨å¯¼ï¼Œä¾‹å¦‚è½¬æ¢ç‡ï¼Œè¿™æ˜¯è®¸å¤šåœ¨çº¿æ ·æœ¬é‡è®¡ç®—å™¨ï¼ˆä¾‹å¦‚[Evan Millerçš„è®¡ç®—å™¨](https://www.evanmiller.org/ab-testing/sample-size.html)ï¼‰ä¹Ÿå¸¸ç”¨çš„æ–¹æ³•ã€‚ç„¶è€Œï¼Œè¿™å¹¶ä¸æ˜¯Statsmodelsä½¿ç”¨çš„æ–¹æ³•ï¼Œå› æ­¤ç»“æœå¯èƒ½ä¼šæœ‰æ‰€ä¸åŒã€‚
- en: This is important for data scientists because Statsmodels is commonly used to
    compute sample size in Python.
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: è¿™å¯¹æ•°æ®ç§‘å­¦å®¶æ¥è¯´å¾ˆé‡è¦ï¼Œå› ä¸ºStatsmodelså¸¸ç”¨äºPythonä¸­è®¡ç®—æ ·æœ¬é‡ã€‚
- en: Data scientists frequently use Statsmodels to get the minimum sample size, but
    may not be aware that it employs a different method from what most articles describe
    and what most online calculators use. It is essential to understand how the function
    works so that we can trust its results.
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: æ•°æ®ç§‘å­¦å®¶ç»å¸¸ä½¿ç”¨ Statsmodels æ¥è·å–æœ€å°æ ·æœ¬é‡ï¼Œä½†å¯èƒ½ä¸çŸ¥é“å®ƒé‡‡ç”¨äº†ä¸å¤§å¤šæ•°æ–‡ç« æè¿°çš„æ–¹å¼ä»¥åŠå¤§å¤šæ•°åœ¨çº¿è®¡ç®—å™¨ä½¿ç”¨çš„æ–¹æ³•ä¸åŒçš„æ–¹å¼ã€‚äº†è§£è¯¥å‡½æ•°çš„å·¥ä½œåŸç†æ˜¯è‡³å…³é‡è¦çš„ï¼Œä»¥ä¾¿æˆ‘ä»¬èƒ½å¤Ÿä¿¡ä»»å…¶ç»“æœã€‚
- en: This article bridges the gap by explaining how Statsmodels actually works.
  id: totrans-15
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æœ¬æ–‡é€šè¿‡è§£é‡Š Statsmodels çš„å®é™…å·¥ä½œåŸç†æ¥å¡«è¡¥è¿™ä¸€ç©ºç™½ã€‚
- en: This article aims to make the novel contribution of explaining how `tt_ind_solve_power`
    actually computes the sample size, why the procedure is correct and what benefits
    it brings over closed-form solutions. [1]
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æ–‡æ—¨åœ¨åšå‡ºåˆ›æ–°æ€§è´¡çŒ®ï¼Œè§£é‡Š `tt_ind_solve_power` å¦‚ä½•å®é™…è®¡ç®—æ ·æœ¬é‡ï¼Œä¸ºä»€ä¹ˆè¯¥è¿‡ç¨‹æ˜¯æ­£ç¡®çš„ï¼Œå¹¶ä¸”å®ƒç›¸å¯¹äºå°é—­å½¢å¼è§£æ³•å¸¦æ¥çš„ä¼˜åŠ¿ã€‚[1]
- en: '**Part 1:** It will first explain how sample size is computed and why the procedure
    is correct in two steps:'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '**ç¬¬1éƒ¨åˆ†ï¼š** å®ƒå°†é¦–å…ˆè§£é‡Šæ ·æœ¬é‡å¦‚ä½•è®¡ç®—ä»¥åŠä¸ºä»€ä¹ˆè¯¥ç¨‹åºæ˜¯æ­£ç¡®çš„ï¼Œåˆ†ä¸ºä¸¤ä¸ªæ­¥éª¤ï¼š'
- en: Show the statistical derivation for sample size calculations.
  id: totrans-18
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æ˜¾ç¤ºæ ·æœ¬é‡è®¡ç®—çš„ç»Ÿè®¡æ¨å¯¼ã€‚
- en: Write a stripped-down version of `tt_ind_solve_power` that is an exact implementation
    of the statistical derivation and produces the same output as the original function
  id: totrans-19
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç¼–å†™ä¸€ä¸ªç®€åŒ–ç‰ˆçš„`tt_ind_solve_power`ï¼Œå®ƒæ˜¯ç»Ÿè®¡æ¨å¯¼çš„ç²¾ç¡®å®ç°ï¼Œå¹¶ä¸”äº§ç”Ÿä¸åŸå§‹å‡½æ•°ç›¸åŒçš„è¾“å‡ºã€‚
- en: '**Part 2:** Following which, it will explain two benefits it brings over closed-form
    solutions:'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: '**ç¬¬2éƒ¨åˆ†ï¼š** æ¥ä¸‹æ¥ï¼Œå®ƒå°†è§£é‡Šå®ƒç›¸å¯¹äºå°é—­å½¢å¼è§£æ³•å¸¦æ¥çš„ä¸¤ä¸ªä¼˜åŠ¿ï¼š'
- en: Benefits to generalizability
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æ³›åŒ–æ€§ä¼˜åŠ¿
- en: Benefits to statistical intuition
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ç»Ÿè®¡ç›´è§‰çš„ä¼˜åŠ¿
- en: 'Part 1: How Statsmodels computes minimum sample size and why it is correct'
  id: totrans-23
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç¬¬1éƒ¨åˆ†ï¼šStatsmodels å¦‚ä½•è®¡ç®—æœ€å°æ ·æœ¬é‡ä»¥åŠä¸ºä»€ä¹ˆå®ƒæ˜¯æ­£ç¡®çš„
- en: 1.1\. Showing the statistical derivation for sample size calculations
  id: totrans-24
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.1. æ˜¾ç¤ºæ ·æœ¬é‡è®¡ç®—çš„ç»Ÿè®¡æ¨å¯¼
- en: '**Core Idea**'
  id: totrans-25
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**æ ¸å¿ƒæ€æƒ³**'
- en: 'A general A/B test is an unpaired two-sample t-test. Rather than using a closed-form
    solution, Statsmodels obtains the minimum sample size in two steps:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€èˆ¬çš„A/Bæµ‹è¯•æ˜¯ä¸€ä¸ªæ— é…å¯¹çš„åŒæ ·æœ¬tæ£€éªŒã€‚Statsmodels å¹¶ä¸ä½¿ç”¨å°é—­å½¢å¼çš„è§£æ³•ï¼Œè€Œæ˜¯é€šè¿‡ä¸¤ä¸ªæ­¥éª¤æ¥è·å¾—æœ€å°æ ·æœ¬é‡ï¼š
- en: For a given sample size, compute the associated power of the test.
  id: totrans-27
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¯¹äºç»™å®šçš„æ ·æœ¬é‡ï¼Œè®¡ç®—è¯¥æ£€éªŒçš„åŠŸæ•ˆã€‚
- en: Run a numerical optimization algorithm to find the sample size that returns
    the target power of the test.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: è¿è¡Œæ•°å€¼ä¼˜åŒ–ç®—æ³•ï¼Œæ‰¾åˆ°è¿”å›ç›®æ ‡åŠŸæ•ˆçš„æ ·æœ¬é‡ã€‚
- en: '**Notation and Concepts**'
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**ç¬¦å·å’Œæ¦‚å¿µ**'
- en: 'These are some terms we will use throughout the article:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ˜¯æˆ‘ä»¬å°†åœ¨æœ¬æ–‡ä¸­ä½¿ç”¨çš„ä¸€äº›æœ¯è¯­ï¼š
- en: '**n**: minimum required sample size. n = n_1 + n_2'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**n**ï¼šæœ€å°æ‰€éœ€æ ·æœ¬é‡ã€‚n = n_1 + n_2'
- en: '**n_1, n_2**: minimum required sample size for the treatment and control group,
    respectively'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**n_1, n_2**ï¼šæ²»ç–—ç»„å’Œå¯¹ç…§ç»„çš„æœ€å°æ‰€éœ€æ ·æœ¬é‡'
- en: '**ratio:** n_2 = n_1 * ratio, where for a 50:50 allocation, ratio = 1'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**æ¯”ä¾‹ï¼š** n_2 = n_1 * æ¯”ä¾‹ï¼Œå¯¹äº50:50çš„åˆ†é…ï¼Œæ¯”ä¾‹ = 1'
- en: '**p**: p-value'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**p**ï¼špå€¼'
- en: '**ğ›¼:** significance level / type I error'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ğ›¼:** æ˜¾è‘—æ€§æ°´å¹³ / Iç±»é”™è¯¯'
- en: '**ğ›½:** type II error; 1-ğ›½ is power'
  id: totrans-36
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ğ›½:** IIç±»é”™è¯¯ï¼›1-ğ›½æ˜¯æ£€éªŒçš„åŠŸæ•ˆ'
- en: '**Î¼_1, Î¼_2**: means of treatment group and control group, respectively'
  id: totrans-37
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Î¼_1, Î¼_2**ï¼šæ²»ç–—ç»„å’Œå¯¹ç…§ç»„çš„å‡å€¼'
- en: '**XÌ„1, XÌ„2:** sample means of treatment group and control group, respectively'
  id: totrans-38
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**XÌ„1, XÌ„2:** æ²»ç–—ç»„å’Œå¯¹ç…§ç»„çš„æ ·æœ¬å‡å€¼'
- en: '**t_(1-ğ›¼):** critical value / t-score that cuts off the top 100ğ›¼(%) of the
    standard t distribution.'
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**t_(1-ğ›¼):** ä¸´ç•Œå€¼ / t-scoreï¼Œæˆªæ–­æ ‡å‡†tåˆ†å¸ƒçš„ä¸Š100ğ›¼(%)éƒ¨åˆ†ã€‚'
- en: '**MDE:** the minimum detectable effect, or the level of statistically significant
    difference that can be detected given all other parameters (e.g. a base conversion
    rate of 10%, an expected uplift of 50% and so an expected treatment conversion
    rate of 15% means that the MDE is 15â€“10=5%=0.05)'
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**MDE:** æœ€å°å¯æ£€æµ‹æ•ˆåº”ï¼Œæˆ–ç»™å®šæ‰€æœ‰å…¶ä»–å‚æ•°ä¸‹å¯ä»¥æ£€æµ‹åˆ°çš„ç»Ÿè®¡æ˜¾è‘—æ€§å·®å¼‚çš„æ°´å¹³ï¼ˆä¾‹å¦‚ï¼ŒåŸºç¡€è½¬æ¢ç‡ä¸º10%ï¼Œé¢„æœŸæå‡ä¸º50%ï¼Œå› æ­¤é¢„æœŸçš„æ²»ç–—è½¬æ¢ç‡ä¸º15%ï¼Œæ„å‘³ç€MDEä¸º15-10=5%=0.05ï¼‰'
- en: '**ğœ:** standard deviation of observations in each group, assumed to be the
    same'
  id: totrans-41
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**ğœ:** æ¯ç»„è§‚å¯Ÿå€¼çš„æ ‡å‡†å·®ï¼Œå‡è®¾æ˜¯ç›¸åŒçš„'
- en: '**d:** Cohenâ€™s d / standardized effect size, given by MDE / ğœ'
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**d:** Cohenâ€™s d / æ ‡å‡†åŒ–æ•ˆåº”å¤§å°ï¼Œç”± MDE / ğœ ç»™å‡º'
- en: '**H_0, H_1:** null hypothesis, alternative hypothesis'
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**H_0, H_1:** åŸå‡è®¾ï¼Œå¤‡æ‹©å‡è®¾'
- en: '**Derive the formula for power of a test**'
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**æ¨å¯¼æ£€éªŒåŠŸæ•ˆçš„å…¬å¼**'
- en: '**Define the null and alternative hypothesis:**'
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**å®šä¹‰åŸå‡è®¾å’Œå¤‡æ‹©å‡è®¾ï¼š**'
- en: '**2\. Derive the distribution of the test statistic under the null hypothesis
    (H_0):**'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '**2. æ¨å¯¼åŸå‡è®¾ä¸‹æ£€éªŒç»Ÿè®¡é‡çš„åˆ†å¸ƒï¼ˆH_0ï¼‰ï¼š**'
- en: We find that **under the null hypothesis**, the test statistic t follows a **t-distribution**
    with **(n_1 + n_2 - 2) degrees of freedom**.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å‘ç°**åœ¨åŸå‡è®¾ä¸‹**ï¼Œæ£€éªŒç»Ÿè®¡é‡tæœä»**tåˆ†å¸ƒ**ï¼Œå…¶**è‡ªç”±åº¦ä¸º(n_1 + n_2 - 2)**ã€‚
- en: 'This follows from the following:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å¯ä»¥ä»ä»¥ä¸‹å†…å®¹å¾—å‡ºï¼š
- en: 'Where the sample variance of X is computed as such:'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ä¸­Xçš„æ ·æœ¬æ–¹å·®è®¡ç®—å¦‚ä¸‹ï¼š
- en: '**3\. Derive the distribution of the test statistic under the alternative hypothesis
    (H_1):**'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '**3\. æ¨å¯¼å¤‡æ‹©å‡è®¾(H_1)ä¸‹æ£€éªŒç»Ÿè®¡é‡çš„åˆ†å¸ƒï¼š**'
- en: We find that **under the alternative hypothesis**, assuming that the difference
    in means is the MDE, the test statistic t follows a **non-central t-distribution**
    with **non-centrality parameter Î¸ = d * sqrt((n1 * n2) / (n1 + n2))** and **(n_1
    + n_2 - 2) degrees of freedom**.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å‘ç°**åœ¨å¤‡æ‹©å‡è®¾ä¸‹**ï¼Œå‡è®¾å‡å€¼å·®å¼‚ä¸ºæœ€å°å¯æ£€æµ‹æ•ˆåº”ï¼ˆMDEï¼‰ï¼Œæ£€éªŒç»Ÿè®¡é‡tæœä»**éä¸­å¿ƒtåˆ†å¸ƒ**ï¼Œå…¶**éä¸­å¿ƒæ€§å‚æ•°Î¸ = d * sqrt((n1
    * n2) / (n1 + n2))**ï¼Œè‡ªç”±åº¦ä¸º**(n_1 + n_2 - 2)**ã€‚
- en: A non-central t-distribution (nct) with a positive non-centrality parameter
    can be roughly thought of as a standard t-distribution shifted to the right. [2]
    Intuitively, the standard t-distribution happens under the null when we expect
    0 effect on average, while the non-central t-distribution happens under the alternative
    when we expect a positive effect that is on average roughly equal to the MDE.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªå…·æœ‰æ­£éä¸­å¿ƒæ€§å‚æ•°çš„éä¸­å¿ƒtåˆ†å¸ƒï¼ˆnctï¼‰å¯ä»¥ç²—ç•¥åœ°çœ‹ä½œæ˜¯ä¸€ä¸ªæ ‡å‡†tåˆ†å¸ƒå‘å³å¹³ç§»çš„ç»“æœã€‚[2] ç›´è§‚åœ°è¯´ï¼Œæ ‡å‡†tåˆ†å¸ƒå‘ç”Ÿåœ¨åŸå‡è®¾ä¸‹ï¼Œå½“æˆ‘ä»¬æœŸæœ›å¹³å‡æ•ˆæœä¸º0æ—¶ï¼Œè€Œéä¸­å¿ƒtåˆ†å¸ƒå‘ç”Ÿåœ¨å¤‡æ‹©å‡è®¾ä¸‹ï¼Œå½“æˆ‘ä»¬æœŸæœ›ä¸€ä¸ªæ­£çš„æ•ˆæœï¼Œå¹¶ä¸”è¯¥æ•ˆæœçš„å¹³å‡å€¼å¤§è‡´ç­‰äºMDEã€‚
- en: 'Definition: A non-central t-distribution random variable T with non-centrality
    parameter Î¸ and Î½ degrees of freedom is defined as:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: å®šä¹‰ï¼šå…·æœ‰éä¸­å¿ƒæ€§å‚æ•°Î¸å’Œè‡ªç”±åº¦Î½çš„éä¸­å¿ƒtåˆ†å¸ƒéšæœºå˜é‡Tå®šä¹‰å¦‚ä¸‹ï¼š
- en: where Z is a standard normal random variable, and *V* is a chi-squared distributed
    random variable with Î½ degrees of freedom.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ä¸­Zæ˜¯æ ‡å‡†æ­£æ€éšæœºå˜é‡ï¼Œ*V*æ˜¯è‡ªç”±åº¦ä¸ºÎ½çš„å¡æ–¹åˆ†å¸ƒéšæœºå˜é‡ã€‚
- en: The proof starts from the observation that under the alternative hypothesis,
    the true difference in means is MDE and so we can subtract MDE and divide by the
    population standard deviation to get a standard normal variable.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: è¯æ˜ä»ä»¥ä¸‹è§‚å¯Ÿå¼€å§‹ï¼šåœ¨å¤‡æ‹©å‡è®¾ä¸‹ï¼ŒçœŸå®çš„å‡å€¼å·®å¼‚ä¸ºMDEï¼Œå› æ­¤æˆ‘ä»¬å¯ä»¥å‡å»MDEå¹¶é™¤ä»¥æ€»ä½“æ ‡å‡†å·®ï¼Œä»è€Œå¾—åˆ°æ ‡å‡†æ­£æ€å˜é‡ã€‚
- en: '**4\. Compute the power**'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '**4\. è®¡ç®—åŠŸæ•ˆ**'
- en: 'Since we know the distribution of the test statistic under the null and alternative
    hypotheses, and the cdf of both distributions are known, we can calculate power
    easily given the level of significance and type of test (two-tailed, greater,
    smaller). The diagram below visualizes how:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: æ—¢ç„¶æˆ‘ä»¬çŸ¥é“äº†åŸå‡è®¾å’Œå¤‡æ‹©å‡è®¾ä¸‹æ£€éªŒç»Ÿè®¡é‡çš„åˆ†å¸ƒï¼Œå¹¶ä¸”ä¸¤ç§åˆ†å¸ƒçš„ç´¯ç§¯åˆ†å¸ƒå‡½æ•°ï¼ˆcdfï¼‰éƒ½æ˜¯å·²çŸ¥çš„ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°è®¡ç®—åŠŸæ•ˆï¼Œç»™å®šæ˜¾è‘—æ€§æ°´å¹³å’Œæ£€éªŒç±»å‹ï¼ˆåŒå°¾ã€å¤§äºã€å°äºï¼‰ã€‚ä¸‹å›¾å¯è§†åŒ–äº†è¿™ä¸€è¿‡ç¨‹ï¼š
- en: '![](../Images/f7537362230bff4e8f958aaa8ca1cac5.png)'
  id: totrans-58
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f7537362230bff4e8f958aaa8ca1cac5.png)'
- en: Diagram by author
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾è¡¨
- en: 'In Python, the implementation looks like this:'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨Pythonä¸­ï¼Œå®ç°å¦‚ä¸‹ï¼š
- en: '[PRE0]'
  id: totrans-61
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '**Obtain minimum sample size using numerical optimization**'
  id: totrans-62
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**é€šè¿‡æ•°å€¼ä¼˜åŒ–è·å–æœ€å°æ ·æœ¬é‡**'
- en: Given that we now know how to computer power for a given set of parameters,
    we can then run a numerical optimization method to find the minimum sample size
    that achieves the target power. Since the total sample size is a function of the
    treatment sample size (n = n_1 + ratio * n_1), we will be finding n_1.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: æ—¢ç„¶æˆ‘ä»¬ç°åœ¨çŸ¥é“äº†å¦‚ä½•ä¸ºä¸€ç»„ç»™å®šçš„å‚æ•°è®¡ç®—åŠŸæ•ˆï¼Œæˆ‘ä»¬å°±å¯ä»¥è¿è¡Œæ•°å€¼ä¼˜åŒ–æ–¹æ³•æ¥æ‰¾åˆ°å®ç°ç›®æ ‡åŠŸæ•ˆçš„æœ€å°æ ·æœ¬é‡ã€‚ç”±äºæ€»æ ·æœ¬é‡æ˜¯æ²»ç–—ç»„æ ·æœ¬é‡çš„å‡½æ•°ï¼ˆn = n_1
    + æ¯”ä¾‹ * n_1ï¼‰ï¼Œæˆ‘ä»¬å°†æ±‚è§£n_1ã€‚
- en: This works because power is monotonically increasing in sample size n_1\. Intuitively,
    more samples means that A/B testing results are more certain and so if the alternative
    hypothesis is true, more values will reject the null hypothesis (see left subplot
    of figure below).
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: ä¹‹æ‰€ä»¥æœ‰æ•ˆï¼Œæ˜¯å› ä¸ºåŠŸæ•ˆéšç€æ ·æœ¬é‡n_1çš„å¢åŠ è€Œå•è°ƒå¢åŠ ã€‚ç›´è§‚åœ°è¯´ï¼Œæ›´å¤šçš„æ ·æœ¬æ„å‘³ç€A/Bæµ‹è¯•ç»“æœæ›´åŠ å¯é ï¼Œå› æ­¤ï¼Œå¦‚æœå¤‡æ‹©å‡è®¾ä¸ºçœŸï¼Œæ›´å¤šçš„å€¼å°†æ‹’ç»åŸå‡è®¾ï¼ˆè§ä¸‹å›¾å·¦ä¾§å­å›¾ï¼‰ã€‚
- en: But this also means that subtracting off the target power gives a monotonically
    increasing function with a negative start point and a positive end point. By the
    intermediate value theorem and monotonicity of the function, there is a unique
    root that corresponds to our minimum sample size (see right subplot of figure
    below).
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†è¿™ä¹Ÿæ„å‘³ç€ï¼Œå‡å»ç›®æ ‡åŠŸæ•ˆåï¼Œå¾—åˆ°çš„æ˜¯ä¸€ä¸ªå•è°ƒé€’å¢çš„å‡½æ•°ï¼Œèµ·ç‚¹ä¸ºè´Ÿï¼Œç»ˆç‚¹ä¸ºæ­£ã€‚æ ¹æ®ä»‹å€¼å®šç†å’Œå‡½æ•°çš„å•è°ƒæ€§ï¼Œå­˜åœ¨ä¸€ä¸ªå”¯ä¸€çš„æ ¹ï¼Œå¯¹åº”äºæˆ‘ä»¬çš„æœ€å°æ ·æœ¬é‡ï¼ˆè§ä¸‹å›¾å³ä¾§å­å›¾ï¼‰ã€‚
- en: '![](../Images/c66e6dffb8db57745b2cf9d9a2543f10.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c66e6dffb8db57745b2cf9d9a2543f10.png)'
- en: Figure by author
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œè€…æä¾›çš„å›¾è¡¨
- en: A popular, high-performing numerical optimization method is **Brentâ€™s method**.
    Brentâ€™s method is a root-finding algorithm that combines various techniques such
    as the bisection method, the secant method and inverse quadratic interpolation.
    Further details of its implementation in Statsmodels can be found [here](https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.brentq.html).
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ç§æµè¡Œä¸”é«˜æ•ˆçš„æ•°å€¼ä¼˜åŒ–æ–¹æ³•æ˜¯**Brentæ–¹æ³•**ã€‚Brentæ–¹æ³•æ˜¯ä¸€ç§æ ¹æ±‚è§£ç®—æ³•ï¼Œç»“åˆäº†å¦‚äºŒåˆ†æ³•ã€å‰²çº¿æ³•å’ŒåäºŒæ¬¡æ’å€¼ç­‰å¤šç§æŠ€æœ¯ã€‚æœ‰å…³å…¶åœ¨Statsmodelsä¸­å®ç°çš„æ›´å¤šç»†èŠ‚ï¼Œå¯ä»¥å‚è§[æ­¤å¤„](https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.brentq.html)ã€‚
- en: 'In Python, the implementation looks like this:'
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨Pythonä¸­ï¼Œå®ç°å¦‚ä¸‹ï¼š
- en: '[PRE1]'
  id: totrans-70
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 1.2\. Writing a stripped-down version of tt_ind_solve_power that is an exact
    implementation of the statistical derivation and produces the same output as the
    original function
  id: totrans-71
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1.2\. ç¼–å†™ä¸€ä¸ªç²¾ç®€ç‰ˆçš„tt_ind_solve_powerï¼Œå®ƒæ˜¯ç»Ÿè®¡æ¨å¯¼çš„ç²¾ç¡®å®ç°ï¼Œå¹¶äº§ç”Ÿä¸åŸå‡½æ•°ç›¸åŒçš„è¾“å‡º
- en: The source file in Statsmodels is available [here](https://github.com/statsmodels/statsmodels/blob/main/statsmodels/stats/power.py).
    While the original function is written to be more powerful, its generalizability
    also makes it harder to gain intuition on how the code works.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: Statsmodelsä¸­çš„æºæ–‡ä»¶å¯ä»¥åœ¨[æ­¤å¤„](https://github.com/statsmodels/statsmodels/blob/main/statsmodels/stats/power.py)æ‰¾åˆ°ã€‚è™½ç„¶åŸå‡½æ•°è¢«ç¼–å†™å¾—æ›´ä¸ºå¼ºå¤§ï¼Œä½†å®ƒçš„æ™®é€‚æ€§ä¹Ÿä½¿å¾—æˆ‘ä»¬å¾ˆéš¾ç†è§£ä»£ç æ˜¯å¦‚ä½•å·¥ä½œçš„ã€‚
- en: I thus looked through the source code line-by-line and simplified it down from
    1,600 lines of code to 160, and from 10+ functions to just 2, while ensuring the
    that implementation remains identical.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œæˆ‘é€è¡ŒæŸ¥çœ‹äº†æºä»£ç ï¼Œå¹¶å°†å…¶ä»1600è¡Œç®€åŒ–ä¸º160è¡Œï¼Œå°†10å¤šä¸ªå‡½æ•°å‡å°‘åˆ°ä»…2ä¸ªï¼ŒåŒæ—¶ç¡®ä¿å®ç°ä¿æŒä¸å˜ã€‚
- en: 'The stripped-down code contains just two functions under the TTestIndPower
    class, exactly following the statistical derivation explained in Part 1:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: ç²¾ç®€ç‰ˆçš„ä»£ç ä»…åŒ…å«TTestIndPowerç±»ä¸‹çš„ä¸¤ä¸ªå‡½æ•°ï¼Œå®Œå…¨éµå¾ªç¬¬ä¸€éƒ¨åˆ†ä¸­è§£é‡Šçš„ç»Ÿè®¡æ¨å¯¼ã€‚
- en: '**power**, which computes power given a sample size'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**power**ï¼Œç”¨äºè®¡ç®—ç»™å®šæ ·æœ¬é‡ä¸‹çš„åŠŸæ•ˆ'
- en: '**solve_power**, which finds the minimum sample size that achieves a target
    power using Brentâ€™s method'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**solve_power**ï¼Œä½¿ç”¨Brentæ–¹æ³•æ‰¾åˆ°å®ç°ç›®æ ‡åŠŸæ•ˆçš„æœ€å°æ ·æœ¬é‡'
- en: 'This is the full code for the stripped-down version with a test to check that
    it produces the same output as the original function:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ç²¾ç®€ç‰ˆçš„å®Œæ•´ä»£ç ï¼Œå¹¶åŒ…å«ä¸€ä¸ªæµ‹è¯•ï¼Œæ£€æŸ¥å®ƒæ˜¯å¦äº§ç”Ÿä¸åŸå‡½æ•°ç›¸åŒçš„è¾“å‡ºï¼š
- en: 'Part 2: Benefits of the numerical optimization approach used by Statsmodels'
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç¬¬2éƒ¨åˆ†ï¼šStatsmodelsä½¿ç”¨çš„æ•°å€¼ä¼˜åŒ–æ–¹æ³•çš„ä¼˜åŠ¿
- en: 2.1\. Benefits to generalizability
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.1\. å¯æ¨å¹¿æ€§çš„å¥½å¤„
- en: This approach can be easily generalized to finding other parameters of interest
    (e.g. finding the level of significance or minimum detectable effect instead of
    sample size).
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç§æ–¹æ³•å¯ä»¥å¾ˆå®¹æ˜“åœ°æ¨å¹¿åˆ°æŸ¥æ‰¾å…¶ä»–æ„Ÿå…´è¶£çš„å‚æ•°ï¼ˆä¾‹å¦‚ï¼ŒæŸ¥æ‰¾æ˜¾è‘—æ€§æ°´å¹³æˆ–æœ€å°å¯æ£€æµ‹æ•ˆåº”ï¼Œè€Œä¸æ˜¯æ ·æœ¬é‡ï¼‰ã€‚
- en: Via the closed-form solution approach, we need to find an equation for each
    parameter, which can be complex or infeasible. In contrast, the same numerical
    optimization approach works for any parameter.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡å°é—­è§£æ³•æ–¹æ³•ï¼Œæˆ‘ä»¬éœ€è¦ä¸ºæ¯ä¸ªå‚æ•°æ‰¾åˆ°ä¸€ä¸ªæ–¹ç¨‹ï¼Œè¿™å¯èƒ½æ˜¯å¤æ‚çš„æˆ–ä¸å¯è¡Œçš„ã€‚ç›¸æ¯”ä¹‹ä¸‹ï¼ŒåŒæ ·çš„æ•°å€¼ä¼˜åŒ–æ–¹æ³•é€‚ç”¨äºä»»ä½•å‚æ•°ã€‚
- en: 2.2\. Benefits to statistical intuition
  id: totrans-82
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.2\. å¯¹ç»Ÿè®¡ç›´è§‰çš„å¥½å¤„
- en: This approach is arguably more intuitive because it is a natural extension of
    the concept of statistical power. Further, the concept of the non-central t-distribution
    offers clearer insights into how minimum sample size changes when other parameters
    change.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ç§æ–¹æ³•å¯ä»¥è¯´æ›´ç›´è§‚ï¼Œå› ä¸ºå®ƒæ˜¯ç»Ÿè®¡åŠŸæ•ˆæ¦‚å¿µçš„è‡ªç„¶æ‰©å±•ã€‚æ­¤å¤–ï¼Œéä¸­å¿ƒtåˆ†å¸ƒçš„æ¦‚å¿µæä¾›äº†æ›´æ¸…æ™°çš„æ´è§ï¼Œå¸®åŠ©æˆ‘ä»¬ç†è§£å½“å…¶ä»–å‚æ•°å˜åŒ–æ—¶ï¼Œæœ€å°æ ·æœ¬é‡æ˜¯å¦‚ä½•å˜åŒ–çš„ã€‚
- en: '**Case 1: Change in parameter leading to increase in Î¸ and thus an increase
    in power**'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ¡ˆä¾‹1ï¼šå‚æ•°å˜åŒ–å¯¼è‡´Î¸å¢åŠ ï¼Œä»è€Œå¢åŠ åŠŸæ•ˆ**'
- en: Recall that the non-centrality parameteris Î¸ = d * sqrt((n1 * n2) / (n1 + n2)).
    An increase in Î¸ effectively shifts the non-central distribution to the right,
    reducing the overlap between the distributions under the two hypotheses.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: è®°ä½ï¼Œéä¸­å¿ƒæ€§å‚æ•°æ˜¯Î¸ = d * sqrt((n1 * n2) / (n1 + n2))ã€‚Î¸çš„å¢åŠ å®é™…ä¸Šä¼šå°†éä¸­å¿ƒåˆ†å¸ƒå‘å³ç§»åŠ¨ï¼Œå‡å°‘åœ¨ä¸¤ç§å‡è®¾ä¸‹åˆ†å¸ƒçš„é‡å éƒ¨åˆ†ã€‚
- en: 'This can be created by the following:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼åˆ›å»ºï¼š
- en: Increase in MDE which increases Cohenâ€™s d and thus increases Î¸
  id: totrans-87
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: MDEçš„å¢åŠ ä¼šå¢åŠ Cohen's dï¼Œä»è€Œå¢åŠ Î¸
- en: Decrease in population standard deviation which increases Cohenâ€™s d and thus
    increases Î¸
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: äººç¾¤æ ‡å‡†å·®çš„å‡å°‘ä¼šå¢åŠ Cohen's dï¼Œä»è€Œå¢åŠ Î¸
- en: This increases power given the same sample size (see Case 1 in diagram below),
    and thus reduces the minimum sample size.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¼šåœ¨ç›¸åŒçš„æ ·æœ¬é‡ä¸‹å¢åŠ åŠŸæ•ˆï¼ˆè§ä¸‹å›¾ä¸­çš„æ¡ˆä¾‹1ï¼‰ï¼Œä»è€Œå‡å°‘æœ€å°æ ·æœ¬é‡ã€‚
- en: '**Case 2: Change in parameter leading directly to an increase in power without
    changing Î¸**'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ¡ˆä¾‹ 2ï¼šå‚æ•°å˜åŒ–ç›´æ¥å¯¼è‡´åŠŸæ•ˆå¢åŠ è€Œä¸æ”¹å˜Î¸**'
- en: An increase in the level of significance means that more values will lead to
    a rejection of the null. This directly increases power (see Case 2 in diagram
    below) and reduces the minimum sample size.
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ˜¾è‘—æ€§æ°´å¹³çš„æé«˜æ„å‘³ç€æ›´å¤šçš„å€¼å°†å¯¼è‡´æ‹’ç»é›¶å‡è®¾ã€‚è¿™ç›´æ¥å¢åŠ äº†åŠŸæ•ˆï¼ˆè§ä¸‹å›¾ä¸­çš„æ¡ˆä¾‹ 2ï¼‰ï¼Œå¹¶å‡å°‘äº†æœ€å°æ ·æœ¬é‡ã€‚
- en: '**Case 3: Change in target power**'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ¡ˆä¾‹ 3ï¼šç›®æ ‡åŠŸæ•ˆçš„å˜åŒ–**'
- en: An increase in target power means that the initial n will no longer meet the
    higher target power, thus requiring an increase in minimum sample size.
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç›®æ ‡åŠŸæ•ˆçš„å¢åŠ æ„å‘³ç€åˆå§‹çš„æ ·æœ¬é‡nå°†æ— æ³•æ»¡è¶³æ›´é«˜çš„ç›®æ ‡åŠŸæ•ˆï¼Œå› æ­¤éœ€è¦å¢åŠ æœ€å°æ ·æœ¬é‡ã€‚
- en: '![](../Images/5d68924648af71a50c77c3c4ec9f8591.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/5d68924648af71a50c77c3c4ec9f8591.png)'
- en: Diagram by author
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾è¡¨ç”±ä½œè€…æä¾›
- en: Conclusion
  id: totrans-96
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“è®º
- en: The function to solve for minimum sample size in Statsmodels is powerful and
    relies on numerical optimization. While different from standard closed-form solutions,
    this approach makes it easier to see the statistical intuition behind how sample
    size is computed, and to generalize to computing other parameters of interest.
    It is an approach worth understanding for data scientists interested in marketing
    and product analytics.
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨Statsmodelsä¸­è§£å†³æœ€å°æ ·æœ¬é‡çš„å‡½æ•°åŠŸèƒ½å¼ºå¤§ï¼Œå¹¶ä¾èµ–äºæ•°å€¼ä¼˜åŒ–ã€‚è™½ç„¶ä¸æ ‡å‡†çš„å°é—­å½¢å¼è§£æ³•ä¸åŒï¼Œä½†è¿™ç§æ–¹æ³•æ›´å®¹æ˜“ç†è§£è®¡ç®—æ ·æœ¬é‡èƒŒåçš„ç»Ÿè®¡ç›´è§‰ï¼Œå¹¶èƒ½å¤Ÿæ¨å¹¿åˆ°è®¡ç®—å…¶ä»–æ„Ÿå…´è¶£çš„å‚æ•°ã€‚è¿™æ˜¯æ•°æ®ç§‘å­¦å®¶ï¼Œå°¤å…¶æ˜¯å¯¹è¥é”€å’Œäº§å“åˆ†ææ„Ÿå…´è¶£çš„äººå‘˜å€¼å¾—ç†è§£çš„ä¸€ç§æ–¹æ³•ã€‚
- en: References
  id: totrans-98
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å‚è€ƒæ–‡çŒ®
- en: Deng, L. (2020). Required Sample Size for A/B Testing. [https://towardsdatascience.com/required-sample-size-for-a-b-testing-6f6608dd330a](/required-sample-size-for-a-b-testing-6f6608dd330a)
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: é‚“ç«‹ï¼ˆ2020ï¼‰ã€‚A/Bæµ‹è¯•æ‰€éœ€çš„æ ·æœ¬é‡ã€‚[https://towardsdatascience.com/required-sample-size-for-a-b-testing-6f6608dd330a](/required-sample-size-for-a-b-testing-6f6608dd330a)
- en: 'Kohavi, R., Tang, D., & Xu, Y (2020). Trustworthy Online Controlled Experiments:
    A Practical Guide to A/B Testing. In *Trustworthy Online Controlled Experiments:
    A Practical Guide to A/B Testing* (p. I). Cambridge: Cambridge University Press.'
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: Kohavi, R., Tang, D., & Xu, Yï¼ˆ2020ï¼‰ã€‚å€¼å¾—ä¿¡èµ–çš„åœ¨çº¿å¯¹ç…§å®éªŒï¼šA/Bæµ‹è¯•å®ç”¨æŒ‡å—ã€‚åœ¨*å€¼å¾—ä¿¡èµ–çš„åœ¨çº¿å¯¹ç…§å®éªŒï¼šA/Bæµ‹è¯•å®ç”¨æŒ‡å—*ï¼ˆç¬¬Ié¡µï¼‰ã€‚å‰‘æ¡¥ï¼šå‰‘æ¡¥å¤§å­¦å‡ºç‰ˆç¤¾ã€‚
- en: Miller, E. (2013). [Sample Size Calculator](https://www.evanmiller.org/ab-testing/sample-size.html).
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: Miller, E.ï¼ˆ2013ï¼‰ã€‚[æ ·æœ¬é‡è®¡ç®—å™¨](https://www.evanmiller.org/ab-testing/sample-size.html)ã€‚
- en: Nsky, S. (2019). Experiment sample size calculation using power analysis. [https://towardsdatascience.com/experiment-sample-size-calculation-using-power-analysis-81cb1bc5f74b](/experiment-sample-size-calculation-using-power-analysis-81cb1bc5f74b)
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: Nsky, S.ï¼ˆ2019ï¼‰ã€‚ä½¿ç”¨åŠŸæ•ˆåˆ†æè®¡ç®—å®éªŒæ ·æœ¬é‡ã€‚[https://towardsdatascience.com/experiment-sample-size-calculation-using-power-analysis-81cb1bc5f74b](/experiment-sample-size-calculation-using-power-analysis-81cb1bc5f74b)
- en: 'Wei, M. (2023). Probing into Minimum Sample Size Formula: Derivation and Usage.
    [https://towardsdatascience.com/probing-into-minimum-sample-size-formula-derivation-and-usage-8db9a556280b](/probing-into-minimum-sample-size-formula-derivation-and-usage-8db9a556280b)'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: éŸ¦é“­ï¼ˆ2023ï¼‰ã€‚æ¢è®¨æœ€å°æ ·æœ¬é‡å…¬å¼ï¼šæ¨å¯¼ä¸åº”ç”¨ã€‚[https://towardsdatascience.com/probing-into-minimum-sample-size-formula-derivation-and-usage-8db9a556280b](/probing-into-minimum-sample-size-formula-derivation-and-usage-8db9a556280b)
- en: Footnotes
  id: totrans-104
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è„šæ³¨
- en: '[1] The equivalent function in R is `pwr.t.test`. We use the Python version
    because the open-source code is available for readers to view, compare and work
    through.'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '[1] Rä¸­çš„ç­‰æ•ˆå‡½æ•°æ˜¯`pwr.t.test`ã€‚æˆ‘ä»¬ä½¿ç”¨Pythonç‰ˆæœ¬ï¼Œå› ä¸ºå¼€æºä»£ç ä¾›è¯»è€…æŸ¥çœ‹ã€æ¯”è¾ƒå’Œå®è·µã€‚'
- en: '[2] The general non-central t distribution is not symmetric or centered around
    Cohenâ€™s d, but tends towards being so as the degrees of freedom increases.'
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: '[2] ä¸€èˆ¬çš„éä¸­å¿ƒtåˆ†å¸ƒä¸æ˜¯å¯¹ç§°çš„ï¼Œä¹Ÿä¸ä»¥Cohençš„dä¸ºä¸­å¿ƒï¼Œä½†éšç€è‡ªç”±åº¦çš„å¢åŠ ï¼Œè¶‹å‘äºå¯¹ç§°ã€‚'
