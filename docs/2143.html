<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>5 Pillars for a Hyper-Optimized AI Workflow</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>5 Pillars for a Hyper-Optimized AI Workflow</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/5-pillars-for-a-hyper-optimized-ai-workflow-21fcaefe48ca?source=collection_archive---------3-----------------------#2024-09-03">https://towardsdatascience.com/5-pillars-for-a-hyper-optimized-ai-workflow-21fcaefe48ca?source=collection_archive---------3-----------------------#2024-09-03</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="3a36" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">An introduction to a methodology for creating production-ready, extensible &amp; highly optimized AI workflows</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@giladrubin?source=post_page---byline--21fcaefe48ca--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Gilad Rubin" class="l ep by dd de cx" src="../Images/e98728582365c22c2803d5db0a0f3ca6.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*2eQSgutUIAdpKBsPCsFAfw.jpeg"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--21fcaefe48ca--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@giladrubin?source=post_page---byline--21fcaefe48ca--------------------------------" rel="noopener follow">Gilad Rubin</a></p></div></div></div><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ib ic ah ai aj ak al am an ao ap aq ar id ie if" disabled="">Follow</button></p></div></div></span></div></div><div class="l ig"><span class="bf b bg z dx"><div class="ab cn ih ii ij"><div class="ik il ab"><div class="bf b bg z dx ab im"><span class="in l ig">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--21fcaefe48ca--------------------------------" rel="noopener follow"><p class="bf b bg z io ip iq ir is it iu iv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">7 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Sep 3, 2024</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w ea eb q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon ed in kg kh ki"><div class=""><div class="kj kk kl km kn ko kp am kq kr ks ki"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kt ku kv kw kx ky kz"><p class="bf b dy z dx"><span class="kk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kj la lb ab q ee lc ld" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="le"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lf k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lg an ao ap id lh li lj" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep lk cn"><div class="l ae"><div class="ab cb"><div class="ll lm ln lo lp lq ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj mk"><img src="../Images/c2981f3bf6f6dd818737a86793759b75.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pLOKo1y-yuTc_p7kMK0Qkg.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx"><em class="nb">Credit: Google Gemini, prompt by the Author</em></figcaption></figure><h1 id="9a61" class="nc nd fq bf ne nf ng gq nh ni nj gt nk nl nm nn no np nq nr ns nt nu nv nw nx bk">Intro</h1><p id="d425" class="pw-post-body-paragraph ny nz fq oa b go ob oc od gr oe of og oh oi oj ok ol om on oo op oq or os ot fj bk">In the last decade, I carried with me a deep question in the back of my mind in every project I’ve worked on:</p><blockquote class="ou"><p id="34c0" class="ov ow fq bf ox oy oz pa pb pc pd ot dx"><strong class="al">How </strong>(the hell)<strong class="al"> am I supposed to structure and develop my AI &amp; ML projects?</strong></p></blockquote><p id="1f21" class="pw-post-body-paragraph ny nz fq oa b go pe oc od gr pf of og oh pg oj ok ol ph on oo op pi or os ot fj bk">I wanted to know — is there an elegant way to build <strong class="oa fr">production-ready</strong> code in an iterative way? A codebase that is <strong class="oa fr">extensible, optimized, maintainable &amp; reproducible</strong>?</p><p id="b6a0" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">And if so — where does this secret lie? Who owns the knowledge to this dark art?</p></div></div></div><div class="ab cb po pp pq pr" role="separator"><span class="ps by bm pt pu pv"/><span class="ps by bm pt pu pv"/><span class="ps by bm pt pu"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="ca4b" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">I searched intensively for an answer over the course of many years — reading articles, watching tutorials and trying out different methodologies and frameworks. But I couldn’t find a satisfying answer. Every time I thought I was getting close to a solution, something was still missing.</p><p id="c646" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">After about 10 years of trial and error, with a focused effort in the last two years, I think I’ve finally found a satisfying answer to my long-standing quest. This post is the beginning of my journey of sharing what I’ve found.</p><p id="f402" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">My research has led me to identify <strong class="oa fr">5 key pillars</strong> that form the foundation of what I call a <strong class="oa fr">hyper-optimized AI workflow</strong>. In the post I will shortly introduce each of them — giving you an overview of what’s to come.</p><p id="9537" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">I want to emphasize that each of the pillars that I will present is grounded in practical methods and tools, which I’ll elaborate on in future posts. If you’re already curious to see them in action, feel free to check out this video from Hamilton’s meetup where I present them live:</p><figure class="ml mm mn mo mp mq"><div class="pw io l ed"><div class="px py l"/></div></figure><p id="956b" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk"><em class="pz">Note: Throughout this post and series, I’ll use the terms Artificial Intelligence (AI), Machine Learning (ML), and Data Science (DS) interchangeably. The concepts we’ll discuss apply equally to all these fields.</em></p></div></div></div><div class="ab cb po pp pq pr" role="separator"><span class="ps by bm pt pu pv"/><span class="ps by bm pt pu pv"/><span class="ps by bm pt pu"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="a32c" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">Now, let’s explore each pillar.</p><h1 id="416f" class="nc nd fq bf ne nf ng gq nh ni nj gt nk nl nm nn no np nq nr ns nt nu nv nw nx bk">1 — Metric-Based Optimization</h1><p id="399b" class="pw-post-body-paragraph ny nz fq oa b go ob oc od gr oe of og oh oi oj ok ol om on oo op oq or os ot fj bk">In every AI project there is a certain goal we want to achieve, and ideally — a set of metrics we want to optimize.</p><p id="f0c6" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">These metrics can include:</p><ul class=""><li id="7287" class="ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot qa qb qc bk"><strong class="oa fr">Predictive quality metrics</strong>: Accuracy, F1-Score, Recall, Precision, etc…</li><li id="0f0b" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qa qb qc bk"><strong class="oa fr">Cost metrics</strong>: Actual $ amount, FLOPS, Size in MB, etc…</li><li id="a012" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qa qb qc bk"><strong class="oa fr">Performance metrics</strong>: Training speed, inference speed, etc…</li></ul><p id="9449" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">We can choose one metric as our “north star” or create an aggregate metric. For example:</p><ul class=""><li id="1560" class="ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot qa qb qc bk">0.7 × F1-Score + 0.3 × (1 / Inference Time in ms)</li><li id="0a90" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qa qb qc bk">0.6 × AUC-ROC + 0.2 × (1 / Training Time in hours) + 0.2 × (1 / Cloud Compute Cost in $)</li></ul><p id="ff1d" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk"><em class="pz">There’s a </em><a class="af qi" href="https://www.youtube.com/watch?v=sofffBNhVSo" rel="noopener ugc nofollow" target="_blank"><em class="pz">wonderful short video</em></a><em class="pz"> by Andrew Ng. where here explains about the topic of a </em><strong class="oa fr"><em class="pz">Single Number Evaluation Metric</em></strong><em class="pz">.</em></p><p id="ad45" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">Once we have an agreed-upon metric to optimize and a set of constraints to meet, <strong class="oa fr">our goal is to build a workflow that maximizes this metric while satisfying our constraints.</strong></p><h1 id="6565" class="nc nd fq bf ne nf ng gq nh ni nj gt nk nl nm nn no np nq nr ns nt nu nv nw nx bk">2 — Interactive Developer Experience</h1><p id="288e" class="pw-post-body-paragraph ny nz fq oa b go ob oc od gr oe of og oh oi oj ok ol om on oo op oq or os ot fj bk">In the world of Data Science and AI development — interactivity is key.</p><p id="3917" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">As AI Engineers (or whatever title we Data Scientists go by these days), we need to build code that works bug-free across different scenarios.</p><p id="018b" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">Unlike traditional software engineering, our role extends beyond writing code that “just” works. A significant aspect of our work involves examining the data and inspecting our models’ outputs and the results of various processing steps.</p><p id="704b" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">The most common environment for this kind of interactive exploration is Jupyter Notebooks.</p><p id="432d" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">Working within a notebook allows us to<strong class="oa fr"> test different implementations, experiment with new APIs and inspect the intermediate results of our workflows and make decisions based on our observations.</strong> This is the core of the second pillar.</p><p id="73f7" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">However, As much as we enjoy these benefits in our day-to-day work, notebooks can sometimes contain notoriously bad code that can only be executed in a non-trivial order.</p><p id="c6f5" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">In addition, some exploratory parts of the notebook might not be relevant for production settings, making it unclear how these can effectively be shipped to production.</p><h1 id="4555" class="nc nd fq bf ne nf ng gq nh ni nj gt nk nl nm nn no np nq nr ns nt nu nv nw nx bk">3 — Production-Ready Code</h1><p id="6b5e" class="pw-post-body-paragraph ny nz fq oa b go ob oc od gr oe of og oh oi oj ok ol om on oo op oq or os ot fj bk">“Production-Ready” can mean different things in different contexts. For one organization, it might mean serving results within a specified time frame. For another, it could refer to the service’s uptime (SLA). And yet for another, it might mean the code, model, or workflow has undergone sufficient testing to ensure reliability.</p><p id="9153" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">These are all important aspects of shipping reliable products, and the specific requirements may vary from place to place. Since my exploration is focused on the “meta” aspect of building AI workflows, I want to discuss a common denominator across these definitions: <strong class="oa fr">wrapping our workflow as a serviceable API and deploying it to an environment where it can be queried by external applications or users.</strong></p><p id="a974" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">This means we need to have a way to abstract the complexity of our codebase into a clearly defined interface that can be used across various use-cases. Let’s consider an example:</p><p id="6526" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">Imagine a complex RAG (Retrieval-Augmented Generation) system over PDF files that we’ve developed. It may contain 10 different parts, each consisting of hundreds of lines of code.</p><p id="4228" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">However, we can still wrap them into a simple API with just two main functions:</p><ol class=""><li id="bbb4" class="ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot qj qb qc bk">upload_document(file: PDF) -&gt; document_id: str</li><li id="e77b" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qj qb qc bk">query_document(document_id: str, query: str, output_format: str) -&gt; response: str</li></ol><p id="1662" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">This abstraction allows users to:</p><ol class=""><li id="1dca" class="ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot qj qb qc bk">Upload a PDF document and receive a unique identifier.</li><li id="dc49" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qj qb qc bk">Ask questions about the document using natural language.</li><li id="3849" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qj qb qc bk">Specify the desired format for the response (e.g., markdown, JSON, Pandas Dataframe).</li></ol><p id="6f2f" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">By providing this clean interface, we’ve effectively hidden the complexities and implementation details of our workflow.</p><p id="7246" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk"><strong class="oa fr">Having a systematic way to convert arbitrarily complex workflows into deployable APIs is our third pillar.</strong></p><p id="0677" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">In addition, we would ideally want to establish a methodology that ensures that our <strong class="oa fr">iterative, daily work stays in sync with our production code</strong>.</p><p id="661e" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">This means if we make a change to our workflow — fixing a bug, adding a new implementation, or even tweaking a configuration — we should be able to deploy these changes to our production environment with just a click of a button.</p><h1 id="902b" class="nc nd fq bf ne nf ng gq nh ni nj gt nk nl nm nn no np nq nr ns nt nu nv nw nx bk">4 — Modular &amp; Extensible Code</h1><p id="be02" class="pw-post-body-paragraph ny nz fq oa b go ob oc od gr oe of og oh oi oj ok ol om on oo op oq or os ot fj bk">Another crucial aspect of our methodology is maintaining a <strong class="oa fr">Modular &amp; Extensible</strong> codebase.</p><p id="fe7f" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">This means that we can <strong class="oa fr">add new implementations and test them against existing ones </strong>that occupy the same logical step without modifying our existing code or overwriting other configurations.</p><p id="2de5" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">This approach aligns with the <a class="af qi" href="https://en.wikipedia.org/wiki/Open%E2%80%93closed_principle" rel="noopener ugc nofollow" target="_blank"><strong class="oa fr">open-closed principle</strong></a>, where our code is open for extension but closed for modification. It allows us to:</p><ol class=""><li id="c5e4" class="ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot qj qb qc bk">Introduce new implementations alongside existing ones</li><li id="ef82" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qj qb qc bk">Easily compare the performance of different approaches</li><li id="7831" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qj qb qc bk">Maintain the integrity of our current working solutions</li><li id="1e50" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qj qb qc bk">Extend our workflow’s capabilities without risking the stability of the whole system</li></ol><p id="7649" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">Let’s look at a toy example:</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj qk"><img src="../Images/76759faaabe47220288d951e11385ba8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XtPQr0B4svZtAujU.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Image by the Author</figcaption></figure><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj qk"><img src="../Images/56292fd73a23bbfc6d6dd636de73b554.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YHJiH_XSvHfQhnTL.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Image by the Author</figcaption></figure><p id="e5cd" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">In this example, we can see a (pseudo) code that is modular and configurable. In this way, we can easily add new configurations and test their performance:</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj qk"><img src="../Images/04c39fc215cbe886f28c8bba50baf51e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*kMvUp1_TJYnwY5gi.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Image by the Author</figcaption></figure><p id="548b" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">Once our code consists of multiple competing implementations &amp; configurations, we enter a state that I like to call a <strong class="oa fr">“superposition of workflows”</strong>. In this state we can instantiate and execute a workflow using a specific set of configurations.</p><h1 id="3365" class="nc nd fq bf ne nf ng gq nh ni nj gt nk nl nm nn no np nq nr ns nt nu nv nw nx bk">5 — Hierarchical &amp; Visual Structures</h1><p id="619c" class="pw-post-body-paragraph ny nz fq oa b go ob oc od gr oe of og oh oi oj ok ol om on oo op oq or os ot fj bk">What if we take modularity and extensibility a step further? What if we apply this approach to entire sections of our workflow?</p><p id="6aaa" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">So now, instead of configuring <strong class="oa fr">this</strong> LLM or <strong class="oa fr">that</strong> retriever, we can configure our whole preprocessing, training, or evaluation steps.</p><p id="5421" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">Let’s look at an example:</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj qk"><img src="../Images/5425e8ced3cd5f570509c5f16dc98b29.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Tkc5v9kjOpZWTZva.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Image by the Author</figcaption></figure><p id="b3d9" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">Here we see our entire ML workflow. Now, let’s add a new Data Prep implementation and zoom into it:</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj qk"><img src="../Images/3fb1f2958404c2d54145cd6abd7dc377.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*pOhlWDGQbYRzJBpV"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Image by the Author</figcaption></figure><p id="40a9" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">When we work in this hierarchical and visual way, we can select a section of our workflow to improve and add a new implementation with the same input/output interface as the existing one.</p><p id="2ae5" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">We can then “zoom in” to that specific section, focusing solely on it without worrying about the rest of the project. Once we’re satisfied with our implementation — we can start testing it out alongside other various configurations in our workflow.</p><p id="6df6" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">This approach unlocks several benefits:</p><ol class=""><li id="7740" class="ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot qj qb qc bk"><strong class="oa fr">Reduced mental overload</strong>: Focus on one section at a time, providing clarity and reducing complexity in decision-making.</li><li id="0e3f" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qj qb qc bk"><strong class="oa fr">Easier collaboration</strong>: A modular structure simplifies task delegation to teammates or AI assistants, with clear interfaces for each component.</li><li id="d79a" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qj qb qc bk"><strong class="oa fr">Reusability: </strong>These encapsulated implementations can be utilized in different projects, potentially without modification to their source code.</li><li id="3b4d" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qj qb qc bk"><strong class="oa fr">Self-documentation</strong>: Visualizing entire workflows and their components makes it easier to understand the project’s structure and logic without diving into unnecessary details.</li></ol><h1 id="65e2" class="nc nd fq bf ne nf ng gq nh ni nj gt nk nl nm nn no np nq nr ns nt nu nv nw nx bk">Summary</h1><p id="f3cc" class="pw-post-body-paragraph ny nz fq oa b go ob oc od gr oe of og oh oi oj ok ol om on oo op oq or os ot fj bk">These are the 5 pillars that I’ve found to hold the foundation to a <strong class="oa fr">“hyper-optimized AI workflow”</strong>:</p><ol class=""><li id="2cec" class="ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot qj qb qc bk"><strong class="oa fr">Metric-Based Optimization</strong>: Define and optimize clear, project-specific metrics to guide decision-making and workflow improvements.</li><li id="9c70" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qj qb qc bk"><strong class="oa fr">Interactive Developer Experience</strong>: Utilize tools for iterative coding &amp; data inspection like Jupyter Notebooks.</li><li id="0ca3" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qj qb qc bk"><strong class="oa fr">Production-Ready Code</strong>: Wrap complete workflows into deployable APIs and sync development and production code.</li><li id="01e9" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qj qb qc bk"><strong class="oa fr">Modular &amp; Extensible Code</strong>: Structure code to easily add, swap, and test different implementations.</li><li id="273e" class="ny nz fq oa b go qd oc od gr qe of og oh qf oj ok ol qg on oo op qh or os ot qj qb qc bk"><strong class="oa fr">Hierarchical &amp; Visual Structures</strong>: Organize projects into visual, hierarchical components that can be independently developed and easily understood at various levels of abstraction.</li></ol><p id="4d7f" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">In the upcoming blog posts, I’ll dive deeper into each of these pillars, providing more detailed insights, practical examples, and tools to help you implement these concepts in your own AI projects.</p><p id="7c8d" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">Specifically, I intend to introduce the methodology and tools I’ve built on top of <a class="af qi" href="https://open.substack.com/users/141841981-dagworks-inc?utm_source=mentions" rel="noopener ugc nofollow" target="_blank">DAGWorks Inc</a>* Hamilton framework and my own packages: <a class="af qi" href="https://github.com/gilad-rubin/hypster" rel="noopener ugc nofollow" target="_blank">Hypster</a> and <a class="af qi" href="https://github.com/gilad-rubin/hypernodes" rel="noopener ugc nofollow" target="_blank">HyperNodes</a> (still in its early days).</p><p id="f22f" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">Stay tuned for more!</p><p id="5919" class="pw-post-body-paragraph ny nz fq oa b go pj oc od gr pk of og oh pl oj ok ol pm on oo op pn or os ot fj bk">*I am not affiliated with or employed by DAGWorks Inc.</p></div></div></div></div>    
</body>
</html>