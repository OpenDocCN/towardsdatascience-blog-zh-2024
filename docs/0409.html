<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Setting A Dockerized Python Environment — The Hard Way</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Setting A Dockerized Python Environment — The Hard Way</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/setting-a-dockerized-python-environment-the-hard-way-e62531bca7a0?source=collection_archive---------2-----------------------#2024-02-13">https://towardsdatascience.com/setting-a-dockerized-python-environment-the-hard-way-e62531bca7a0?source=collection_archive---------2-----------------------#2024-02-13</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="gr gs gt gu gv ab"><div><div class="ab gw"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@rami.krispin?source=post_page---byline--e62531bca7a0--------------------------------" rel="noopener follow"><div class="l gx gy by gz ha"><div class="l ed"><img alt="Rami Krispin" class="l ep by dd de cx" src="../Images/8af28c282d42a2a27c28aa8af4c8d482.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*YPncNkgBc5VW-9coln432w.jpeg"/><div class="hb by l dd de em n hc eo"/></div></div></a></div></div><div class="hd ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--e62531bca7a0--------------------------------" rel="noopener follow"><div class="l he hf by gz hg"><div class="l ed"><img alt="Towards Data Science" class="l ep by br hh cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hb by l br hh em n hc eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hi ab q"><div class="ab q hj"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hk hl bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hm" data-testid="authorName" href="https://medium.com/@rami.krispin?source=post_page---byline--e62531bca7a0--------------------------------" rel="noopener follow">Rami Krispin</a></p></div></div></div><div class="hn ho l"><div class="ab hp"><div class="ab"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewbox="0 0 16 16"><path fill="#437AFF" d="M15.163 8c0 .65-.459 1.144-.863 1.575-.232.244-.471.5-.563.719s-.086.543-.092.875c-.006.606-.018 1.3-.49 1.781-.47.481-1.15.494-1.744.5-.324.006-.655.013-.857.094s-.465.337-.704.575c-.422.412-.906.881-1.542.881-.637 0-1.12-.469-1.543-.881-.239-.238-.49-.482-.704-.575-.214-.094-.532-.088-.857-.094-.593-.006-1.273-.019-1.744-.5s-.484-1.175-.49-1.781c-.006-.332-.012-.669-.092-.875-.08-.207-.33-.475-.563-.719-.404-.431-.863-.925-.863-1.575s.46-1.144.863-1.575c.233-.244.472-.5.563-.719.092-.219.086-.544.092-.875.006-.606.019-1.3.49-1.781s1.15-.494 1.744-.5c.325-.006.655-.012.857-.094.202-.081.465-.337.704-.575C7.188 1.47 7.671 1 8.308 1s1.12.469 1.542.881c.239.238.49.481.704.575s.533.088.857.094c.594.006 1.273.019 1.745.5.47.481.483 1.175.49 1.781.005.331.011.669.091.875s.33.475.563.719c.404.431.863.925.863 1.575"/><path fill="#fff" d="M7.328 10.5c.195 0 .381.08.519.22.137.141.215.331.216.53 0 .066.026.13.072.177a.24.24 0 0 0 .346 0 .25.25 0 0 0 .071-.177c.001-.199.079-.389.216-.53a.73.73 0 0 1 .519-.22h1.959c.13 0 .254-.053.346-.146a.5.5 0 0 0 .143-.354V6a.5.5 0 0 0-.143-.354.49.49 0 0 0-.346-.146h-1.47c-.324 0-.635.132-.865.366-.23.235-.359.552-.359.884v2.5c0 .066-.025.13-.071.177a.24.24 0 0 1-.346 0 .25.25 0 0 1-.072-.177v-2.5c0-.332-.13-.65-.359-.884A1.21 1.21 0 0 0 6.84 5.5h-1.47a.49.49 0 0 0-.346.146A.5.5 0 0 0 4.88 6v4c0 .133.051.26.143.354a.49.49 0 0 0 .347.146z"/></svg></div></div></div><span class="hq hr" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hk hl dx"><button class="hs ht ah ai aj ak al am an ao ap aq ar hu hv hw" disabled="">Follow</button></p></div></div></span></div></div><div class="l hx"><span class="bf b bg z dx"><div class="ab cn hy hz ia"><div class="ib ic ab"><div class="bf b bg z dx ab id"><span class="ie l hx">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hm ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--e62531bca7a0--------------------------------" rel="noopener follow"><p class="bf b bg z if ig ih ii ij ik il im bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hq hr" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">9 min read</span><div class="in io l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Feb 13, 2024</span></div></span></div></span></div></div></div><div class="ab cp ip iq ir is it iu iv iw ix iy iz ja jb jc jd je"><div class="h k w ea eb q"><div class="ju l"><div class="ab q jv jw"><div class="pw-multi-vote-icon ed ie jx jy jz"><div class=""><div class="ka kb kc kd ke kf kg am kh ki kj jz"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kk kl km kn ko kp kq"><p class="bf b dy z dx"><span class="kb">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao ka kt ku ab q ee kv kw" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="ks"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count kr ks">7</span></p></button></div></div></div><div class="ab q jf jg jh ji jj jk jl jm jn jo jp jq jr js jt"><div class="kx k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al ky an ao ap hu kz la lb" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep lc cn"><div class="l ae"><div class="ab cb"><div class="ld le lf lg lh li ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al ky an ao ap hu lj lk kw ll lm ln lo lp s lq lr ls lt lu lv lw u lx ly lz"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al ky an ao ap hu lj lk kw ll lm ln lo lp s lq lr ls lt lu lv lw u lx ly lz"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al ky an ao ap hu lj lk kw ll lm ln lo lp s lq lr ls lt lu lv lw u lx ly lz"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><p id="15bc" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">This post will review different methods to run a dockerized Python environment from the command line (CLI). Am I recommending you run your Python environment from the CLI? <strong class="mc fr">Absolutely not!</strong></p><p id="2acc" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">There are better ways to set up a Python development environment, such as using <a class="af my" href="https://github.com/RamiKrispin/vscode-python" rel="noopener ugc nofollow" target="_blank">VScode and the Dev Containers extension</a>. We will use the “hard way” to set up a Python environment from the CLI for learning purposes. We will review different approaches to launching a container with the run command and see how to customize a built-in image using the Dockerfile.</p><figure class="nc nd ne nf ng nh mz na paragraph-image"><div role="button" tabindex="0" class="ni nj ed nk bh nl"><div class="mz na nb"><img src="../Images/acbfde2cb642aa103b6f28af32df61d0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*HsXJ_DZIo8mpoiKU_UrQ2g.png"/></div></div><figcaption class="nn no np mz na nq nr bf b bg z dx">A Pixal Python Snake (created by the author with Midjourney)</figcaption></figure><h1 id="efbf" class="ns nt fq bf nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on oo op bk">Prerequisites</h1><p id="5e7e" class="pw-post-body-paragraph ma mb fq mc b md oq mf mg mh or mj mk ml os mn mo mp ot mr ms mt ou mv mw mx fj bk">To follow along with this tutorial, you will need the following:</p><ul class=""><li id="7ed4" class="ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx ov ow ox bk">Docker Desktop (or equivalent) if you are using a macOS or Windows OS machine, or Docker installed if you are using a Linux OS</li><li id="b8a5" class="ma mb fq mc b md oy mf mg mh oz mj mk ml pa mn mo mp pb mr ms mt pc mv mw mx ov ow ox bk">Docker Hub account to pull the image from.</li></ul><p id="0c39" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">Throughout this tutorial, we will use the official Python image — <code class="cx pd pe pf pg b">python:3.1o</code>.</p><h1 id="470c" class="ns nt fq bf nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on oo op bk">Getting Started</h1><p id="bab6" class="pw-post-body-paragraph ma mb fq mc b md oq mf mg mh or mj mk ml os mn mo mp ot mr ms mt ou mv mw mx fj bk">Let’s get started by pulling the official Python 3.10 image from Docker Hub. First, let’s log in to Docker Hub by using the <code class="cx pd pe pf pg b">docker login</code>command:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="1943" class="pk nt fq pg b bg pl pm l pn po">docker login docker.io                                                                                                                                                                      ok<br/>Authenticating with existing credentials...<br/>Login Succeeded</span></pre><p id="9c08" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">Next, we will use the <code class="cx pd pe pf pg b">docker pull</code> command from the terminal:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="9ec8" class="pk nt fq pg b bg pl pm l pn po">docker pull python:3.10                                                                                                                                                                     ok</span></pre><p id="7977" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">If this is the first time you pull the image, you should expect the following output:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="47e8" class="pk nt fq pg b bg pl pm l pn po">3.10: Pulling from library/python<br/>66932e2b787d: Pull complete<br/>4afa7e263db1: Pull complete<br/>c812910e5e62: Pull complete<br/>f4e4299bb649: Pull complete<br/>5213cc2f9120: Pull complete<br/>4a3b5b2f0e66: Pull complete<br/>c214ceb1cabf: Pull complete<br/>f5336038b15c: Pull complete<br/>Digest: sha256:f94601bb6374b0b63835a70c9e5c3ba1b19bc009133900a9473229a406018e46<br/>Status: Downloaded newer image for python:3.10<br/>docker.io/library/python:3.10</span></pre><p id="344f" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">You can review the image details with the use of the <code class="cx pd pe pf pg b">docker images</code> command:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="3e7c" class="pk nt fq pg b bg pl pm l pn po">docker images                                                                                                                                                                          ok  11s<br/>REPOSITORY   TAG       IMAGE ID       CREATED      SIZE<br/>python       3.10      f7537c504c9a   7 days ago   1.01GB</span></pre><p id="1832" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">Before running the container, let’s review the image metadata with the <code class="cx pd pe pf pg b">docker inspect</code> command:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="5614" class="pk nt fq pg b bg pl pm l pn po">docker inspect python:3.10</span></pre><p id="0590" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">This will return the below <strong class="mc fr">JSON</strong> output:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="b061" class="pk nt fq pg b bg pl pm l pn po">[<br/>    {<br/>        "Id": "sha256:f7537c504c9a91a22c9a255ee02048e7079cacdee583290e8238c605d17f9600",<br/>        "RepoTags": [<br/>            "python:3.10"<br/>        ],<br/>        "RepoDigests": [<br/>            "python@sha256:f94601bb6374b0b63835a70c9e5c3ba1b19bc009133900a9473229a406018e46"<br/>        ],<br/>        "Parent": "",<br/>        "Comment": "buildkit.dockerfile.v0",<br/>        "Created": "2024-02-03T10:49:13Z",<br/>        "Container": "",<br/>        "ContainerConfig": {<br/>            "Hostname": "",<br/>            "Domainname": "",<br/>            "User": "",<br/>            "AttachStdin": false,<br/>            "AttachStdout": false,<br/>            "AttachStderr": false,<br/>            "Tty": false,<br/>            "OpenStdin": false,<br/>            "StdinOnce": false,<br/>            "Env": null,<br/>            "Cmd": null,<br/>            "Image": "",<br/>            "Volumes": null,<br/>            "WorkingDir": "",<br/>            "Entrypoint": null,<br/>            "OnBuild": null,<br/>            "Labels": null<br/>        },<br/>        "DockerVersion": "",<br/>        "Author": "",<br/>        "Config": {<br/>            "Hostname": "",<br/>            "Domainname": "",<br/>            "User": "",<br/>            "AttachStdin": false,<br/>            "AttachStdout": false,<br/>            "AttachStderr": false,<br/>            "Tty": false,<br/>            "OpenStdin": false,<br/>            "StdinOnce": false,<br/>            "Env": [<br/>                "PATH=/usr/local/bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin",<br/>                "LANG=C.UTF-8",<br/>                "GPG_KEY=A035C8C19219BA821ECEA86B64E628F8D684696D",<br/>                "PYTHON_VERSION=3.10.13",<br/>                "PYTHON_PIP_VERSION=23.0.1",<br/>                "PYTHON_SETUPTOOLS_VERSION=65.5.1",<br/>                "PYTHON_GET_PIP_URL=https://github.com/pypa/get-pip/raw/dbf0c85f76fb6e1ab42aa672ffca6f0a675d9ee4/public/get-pip.py",<br/>                "PYTHON_GET_PIP_SHA256=dfe9fd5c28dc98b5ac17979a953ea550cec37ae1b47a5116007395bfacff2ab9"<br/>            ],<br/>            "Cmd": [<br/>                "python3"<br/>            ],<br/>            "ArgsEscaped": true,<br/>            "Image": "",<br/>            "Volumes": null,<br/>            "WorkingDir": "",<br/>            "Entrypoint": null,<br/>            "OnBuild": null,<br/>            "Labels": null<br/>        },<br/>        "Architecture": "arm64",<br/>        "Variant": "v8",<br/>        "Os": "linux",<br/>        "Size": 1005570383,<br/>        "VirtualSize": 1005570383,<br/>        "GraphDriver": {<br/>            "Data": {<br/>                "LowerDir": "/var/lib/docker/overlay2/d2fd76e7396796018a959209b51fe8311a188c8eae8e339e9e556de0889ca0bd/diff:/var/lib/docker/overlay2/bbedb25c5aa6ec3f2fc632e62a53989a329b907143fac165f899209293627a69/diff:/var/lib/docker/overlay2/ed6a4bf49214e6b496b7716443b8de380481cd9416bc4a378f29183c9129786f/diff:/var/lib/docker/overlay2/ac9543f44a835c203fb0b0b28958d94df72d206c9060c9d83307b39f50355102/diff:/var/lib/docker/overlay2/94a9f92c36ea6251feda52be8e76ec4da4a9c66b744a29472e1ccfdf34a6f69d/diff:/var/lib/docker/overlay2/6ee22c274256834a64008022856d365d91373bb490ae9f2f1723cb524b246a29/diff:/var/lib/docker/overlay2/2fa272376e0ce68f4f34f18e5ecb1ddd58a32fb20a82e5a417514047f8e684a3/diff",<br/>                "MergedDir": "/var/lib/docker/overlay2/f2d64d1affbe99afb05251435f7705cb97e2efa4f8febb494b4cbaa21e7f742a/merged",<br/>                "UpperDir": "/var/lib/docker/overlay2/f2d64d1affbe99afb05251435f7705cb97e2efa4f8febb494b4cbaa21e7f742a/diff",<br/>                "WorkDir": "/var/lib/docker/overlay2/f2d64d1affbe99afb05251435f7705cb97e2efa4f8febb494b4cbaa21e7f742a/work"<br/>            },<br/>            "Name": "overlay2"<br/>        },<br/>        "RootFS": {<br/>            "Type": "layers",<br/>            "Layers": [<br/>                "sha256:9f8c60461a42fd9f275c56f4ec8fea8a8ea2d938493e316e830994a3814cf0aa",<br/>                "sha256:927a28cdbf6c1705342b2cba0069457313815058dcebe1996e46cade38a09370",<br/>                "sha256:e85139d96aee18e99fc964d02546be48cc6a4d4dfd9f465a91f172b7c535e55f",<br/>                "sha256:f3168ba6a8d2ec30e12002ad5b7b497cf7409f3e19cc8d8f447f6cf4231a2482",<br/>                "sha256:acbc6c8127209b09fa336e354037fdc630d3594e15174f2bc1bdbf31d5591376",<br/>                "sha256:06c4da96c7dd2fbbbb541e000bd0ea4cfbf7c80b24f098a9d67f677ef5e6c63e",<br/>                "sha256:1cdf208dc10679cf5db6d4f0e17ff6d5bfe754b4195ddd3b153b6d1ff51ce909",<br/>                "sha256:5d6f554f67c7da9d34763916bac632a450902c6e6fdbf9244f888f110fd37740"<br/>            ]<br/>        },<br/>        "Metadata": {<br/>            "LastTagTime": "0001-01-01T00:00:00Z"<br/>        }<br/>    }<br/>]</span></pre><p id="dc22" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">The <code class="cx pd pe pf pg b">ispect</code> command provides a lot of useful information about the image, such as the layers information, the image size, the hardware architecture, etc. As we want to run the image, the most interesting detail is the <a class="af my" href="https://docs.docker.com/engine/reference/builder/#cmd" rel="noopener ugc nofollow" target="_blank">CMD</a> setting. The <code class="cx pd pe pf pg b">CMD</code>command in the Dockerfile defines what command to execute during the container launch time. We can parse from the above output the <code class="cx pd pe pf pg b">CMD</code> information with the <a class="af my" href="https://jqlang.github.io/jq/" rel="noopener ugc nofollow" target="_blank">jq</a> package:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="5474" class="pk nt fq pg b bg pl pm l pn po">docker inspect python:3.10 | jq '.[] | .Config | .Cmd'                                                                                                                                      ok<br/>[<br/>  "python3"<br/>]</span></pre><p id="8c3b" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">As you can see, the image is set to execute the <code class="cx pd pe pf pg b">python3</code> command during the container run time. Let’s now launch the container using the <code class="cx pd pe pf pg b">run</code> command:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="4f53" class="pk nt fq pg b bg pl pm l pn po">docker run python:3.10</span></pre><p id="e81f" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">And… nothing happens. The reason for that, in short, is that we need to give Docker access to the terminal. We will use the interactive and TTY arguments to run the image in an interactive mode:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="9e27" class="pk nt fq pg b bg pl pm l pn po">docker run --interactive --tty python:3.10</span></pre><p id="bf34" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">This will attach the terminal to the container and open Python inside the container:</p><figure class="nc nd ne nf ng nh mz na paragraph-image"><div role="button" tabindex="0" class="ni nj ed nk bh nl"><div class="mz na pp"><img src="../Images/b066a01e44128424e719f9428d280fc9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*cEk3CRQGWANm6yzWaWfEcA.png"/></div></div><figcaption class="nn no np mz na nq nr bf b bg z dx">Running the Python image in interactive mode (screenshot by the author)</figcaption></figure><p id="23ba" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">While we were able to launch Python inside a container, it is not as useful:</p><ul class=""><li id="fd6e" class="ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx ov ow ox bk">We cannot create, edit, and run scripts inside the Python interpreter</li><li id="fcab" class="ma mb fq mc b md oy mf mg mh oz mj mk ml pa mn mo mp pb mr ms mt pc mv mw mx ov ow ox bk">By default, the Python image comes with a limited number of libraries. In this mode, you cannot add additional ones</li><li id="0228" class="ma mb fq mc b md oy mf mg mh oz mj mk ml pa mn mo mp pb mr ms mt pc mv mw mx ov ow ox bk">Last but not least, the container is ephemeral. Once you stop it, all the work is lost</li></ul><p id="00ce" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">For example, if we will try to load pandas, we will get the following error:</p><figure class="nc nd ne nf ng nh mz na paragraph-image"><div role="button" tabindex="0" class="ni nj ed nk bh nl"><div class="mz na pq"><img src="../Images/574f93ea2b2baadd9a6e412773b40e20.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xe0xrjFiYNpAVYDv5ZuAHA.png"/></div></div><figcaption class="nn no np mz na nq nr bf b bg z dx">Trying to load the Pandas library (screenshot by the author)</figcaption></figure><p id="fd83" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">In the following sections, we will address those issues by creating a Dockerfile and customizing the base image functionality. This includes adding the following features:</p><ul class=""><li id="60b4" class="ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx ov ow ox bk">Set a virtual environment and install packages with a requirements file. For simplicity,</li><li id="9bd8" class="ma mb fq mc b md oy mf mg mh oz mj mk ml pa mn mo mp pb mr ms mt pc mv mw mx ov ow ox bk">Install a <code class="cx pd pe pf pg b">vim</code> editor to edit files</li><li id="6e27" class="ma mb fq mc b md oy mf mg mh oz mj mk ml pa mn mo mp pb mr ms mt pc mv mw mx ov ow ox bk">Change the <code class="cx pd pe pf pg b">CMD</code> command to open a shell terminal upon launch (as opposed to the Python interpreter). This will enable us to create new scripts, edit, and execute from the terminal</li></ul><h1 id="75cf" class="ns nt fq bf nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on oo op bk">Customize the Base Image</h1><p id="ab6a" class="pw-post-body-paragraph ma mb fq mc b md oq mf mg mh or mj mk ml os mn mo mp ot mr ms mt ou mv mw mx fj bk">To customize the Python environment and make the above changes, we will create a Dockerfile with the following functionality:</p><ul class=""><li id="189f" class="ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx ov ow ox bk">Import the Python image —<code class="cx pd pe pf pg b"> python:3.10</code></li><li id="f7af" class="ma mb fq mc b md oy mf mg mh oz mj mk ml pa mn mo mp pb mr ms mt pc mv mw mx ov ow ox bk">Set a virtual environment</li><li id="a487" class="ma mb fq mc b md oy mf mg mh oz mj mk ml pa mn mo mp pb mr ms mt pc mv mw mx ov ow ox bk">Install required libraries</li><li id="17f5" class="ma mb fq mc b md oy mf mg mh oz mj mk ml pa mn mo mp pb mr ms mt pc mv mw mx ov ow ox bk">Install vim editor</li><li id="1537" class="ma mb fq mc b md oy mf mg mh oz mj mk ml pa mn mo mp pb mr ms mt pc mv mw mx ov ow ox bk">Expose a bash terminal</li></ul><h2 id="03e8" class="pr nt fq bf nu ps pt pu ny pv pw px oc ml py pz qa mp qb qc qd mt qe qf qg qh bk">Setting a Python Virtual Environment</h2><p id="8531" class="pw-post-body-paragraph ma mb fq mc b md oq mf mg mh or mj mk ml os mn mo mp ot mr ms mt ou mv mw mx fj bk">To set up a Python virtual environment, we will use the following two helper files:</p><p id="ce44" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk"><code class="cx pd pe pf pg b">requirements.txt</code></p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="9546" class="pk nt fq pg b bg pl pm l pn po">wheel==0.40.0<br/>pandas==2.0.3</span></pre><p id="0b4b" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">This file defines the list of Python libraries to install in the virtual environment. For example, in this case, we will install the Pandas library, version 2.0.3. Generally, I also install the wheels library, which handles C dependencies.</p><p id="93a1" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">The next helper file is the below bash script, which sets the virtual environment and installs the required libraries from the <code class="cx pd pe pf pg b">requirements.txt</code> file.</p><p id="48f6" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk"><code class="cx pd pe pf pg b">set_python_env.sh</code></p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="9860" class="pk nt fq pg b bg pl pm l pn po">#!/usr/bin/env bash<br/><br/>PYTHON_ENV=$1<br/><br/>python3 -m venv /opt/$PYTHON_ENV  \<br/>        &amp;&amp; export PATH=/opt/$PYTHON_ENV/bin:$PATH \<br/>        &amp;&amp; echo "source /opt/$PYTHON_ENV/bin/activate" &gt;&gt; ~/.bashrc<br/><br/>source /opt/$PYTHON_ENV/bin/activate<br/><br/>pip3 install -r ./requirements/requirements.txt</span></pre><p id="60a5" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk"><strong class="mc fr">Note: </strong>We use a variable (marked as <code class="cx pd pe pf pg b">$1</code>) to define the environment name, which will be assigned to the <code class="cx pd pe pf pg b">PYTHON_ENV</code> variable. Using variables during the build is a good practice, as it enables us to modify some of the image characteristics without modifying the code. We will assign the variable via the Dockerfile.</p><p id="0de5" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">Let’s explain the following concatenate code from the above bash script that sets the virtual environment:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="abb5" class="pk nt fq pg b bg pl pm l pn po">python3 -m venv /opt/$PYTHON_ENV  \<br/>    &amp;&amp; export PATH=/opt/$PYTHON_ENV/bin:$PATH \<br/>    &amp;&amp; echo "source /opt/$PYTHON_ENV/bin/activate" &gt;&gt; ~/.bashrc</span></pre><p id="5ac7" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">The above three lines of code include three concatenate expressions:</p><ul class=""><li id="a7a9" class="ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx ov ow ox bk">First, the <code class="cx pd pe pf pg b">python3 -m venv /opt/$PYTHON_ENV</code> set a virtual environment with the <code class="cx pd pe pf pg b">venv</code> command</li><li id="7cf0" class="ma mb fq mc b md oy mf mg mh oz mj mk ml pa mn mo mp pb mr ms mt pc mv mw mx ov ow ox bk">Second, add the virtual environment path to the <code class="cx pd pe pf pg b">PATH</code> variable</li><li id="13fd" class="ma mb fq mc b md oy mf mg mh oz mj mk ml pa mn mo mp pb mr ms mt pc mv mw mx ov ow ox bk">Third, add to the <code class="cx pd pe pf pg b">.bashrc</code> file the activate command of the environment. This will ensure that whenever we launch the terminal, it will activate this virtual environment by default (otherwise, you will have to do it manually upon the launch of the environment)</li></ul><p id="7d34" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">Once the environment is set, we use the <code class="cx pd pe pf pg b">source</code> command to activate the environment, and the <code class="cx pd pe pf pg b">pip3</code> command to install the libraries inside the environment.</p><h2 id="a4d9" class="pr nt fq bf nu ps pt pu ny pv pw px oc ml py pz qa mp qb qc qd mt qe qf qg qh bk">Creating a Dockerfile</h2><p id="f4ba" class="pw-post-body-paragraph ma mb fq mc b md oq mf mg mh or mj mk ml os mn mo mp ot mr ms mt ou mv mw mx fj bk">After we review the helper files, let's see how they are incorporated inside the below Dockerfile.</p><p id="edd0" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk"><code class="cx pd pe pf pg b">Dockerfile</code></p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="320e" class="pk nt fq pg b bg pl pm l pn po">FROM python:3.10<br/><br/>ARG PYTHON_ENV=my_env<br/>ENV PYTHON_ENV=$PYTHON_ENV<br/><br/>RUN mkdir requirements<br/><br/>COPY requirements.txt set_python_env.sh /requirements/<br/><br/>RUN bash ./requirements/set_python_env.sh $PYTHON_ENV<br/><br/>RUN apt-get update &amp;&amp; \<br/>    apt-get install -y \<br/>    vim \<br/>    &amp;&amp; apt update<br/><br/><br/>CMD ["/bin/sh", "-c", "bash"]</span></pre><p id="11fe" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">As you can see, we are using the same image — <code class="cx pd pe pf pg b">python:3.10</code>as our base image.</p><p id="a8c3" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">Next, we set an argument named <code class="cx pd pe pf pg b">PYTHON_ENV</code> with the <code class="cx pd pe pf pg b">ARG</code> command to define the virtual environment name. We set<code class="cx pd pe pf pg b">my_env</code> as the default value, which can be modified during the build time using the <code class="cx pd pe pf pg b">arg</code> argument. We use the <code class="cx pd pe pf pg b">PYTHON_ENV</code> argument to set an environment variable as well.</p><p id="7394" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">Before setting the virtual environment, we will create inside the image a new library under the root folder named <code class="cx pd pe pf pg b">requirements</code> and use the <code class="cx pd pe pf pg b">COPY</code> command to copy the above helper files — <code class="cx pd pe pf pg b">requirements.txt</code> and <code class="cx pd pe pf pg b">set_my_python.sh</code> to the <code class="cx pd pe pf pg b">requirements</code> folder.</p><p id="241f" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">Next, we call the bash script — <code class="cx pd pe pf pg b">set_my_python.sh</code> , which sets the virtual environment and installs the required libraries. As mentioned above, we use the <code class="cx pd pe pf pg b">PYTHON_ENV</code> variable as an argument with the <code class="cx pd pe pf pg b">set_my_python.sh</code> file to set the virtual environment name dynamically.</p><p id="cce5" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">We use the <code class="cx pd pe pf pg b">apt</code> command to install <strong class="mc fr">vim</strong> — a CLI editor. This will enable us to edit code on via the container CLI.</p><p id="907d" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">Last but not least, use the <code class="cx pd pe pf pg b">CMD</code> command to launch a shell terminal using bash:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="a145" class="pk nt fq pg b bg pl pm l pn po">CMD ["/bin/sh", "-c", "bash"]</span></pre><p id="9d18" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">At this point, we have the below files in the local folder:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="2a48" class="pk nt fq pg b bg pl pm l pn po">.<br/>├── Dockerfile<br/>├── requirements.txt<br/>└── set_python_env.sh</span></pre><p id="0a45" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">Let’s now go ahead and build the image with the <code class="cx pd pe pf pg b">docker build</code> command:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="cf43" class="pk nt fq pg b bg pl pm l pn po">docker build .-f Dockerfile -t my_python_env:3.10<br/>[+] Building 47.3s (10/10) FINISHED<br/> =&gt; [internal] load build definition from Dockerfile                                                 0.2s<br/> =&gt; =&gt; transferring dockerfile: 389B                                                                 0.0s<br/> =&gt; [internal] load .dockerignore                                                                    0.2s<br/> =&gt; =&gt; transferring context: 2B                                                                      0.0s<br/> =&gt; [internal] load metadata for docker.io/library/python:3.10                                       0.0s<br/> =&gt; [1/5] FROM docker.io/library/python:3.10                                                         1.3s<br/> =&gt; [internal] load build context                                                                    0.4s<br/> =&gt; =&gt; transferring context: 460B                                                                    0.0s<br/> =&gt; [2/5] RUN mkdir requirements                                                                     0.5s<br/> =&gt; [3/5] COPY requirements.txt set_python_env.sh /requirements/                                     0.2s<br/> =&gt; [4/5] RUN bash ./requirements/set_python_env.sh my_env                                          26.8s<br/> =&gt; [5/5] RUN apt-get update &amp;&amp;     apt-get install -y     vim     &amp;&amp; apt update                    17.4s<br/> =&gt; exporting to image                                                                               0.7s<br/> =&gt; =&gt; exporting layers                                                                              0.6s<br/> =&gt; =&gt; writing image sha256:391879baceea6154c191692d4bcb9ec9690de6dc4d5edd5b2ed13f6c579dd05c         0.0s<br/> =&gt; =&gt; naming to docker.io/library/my_python_env:3.10</span></pre><p id="9bed" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">Let’s run again the docker images command to review the current images:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="e851" class="pk nt fq pg b bg pl pm l pn po">docker images                                                  <br/>REPOSITORY      TAG       IMAGE ID       CREATED         SIZE<br/>my_python_env   3.10      391879baceea   7 minutes ago   1.23GB<br/>python          3.10      f7537c504c9a   8 days ago      1.01GB</span></pre><p id="1c38" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">As you can note, adding the virtual environment and installing the packages added about 250 Mb to the image size.</p><h2 id="e24f" class="pr nt fq bf nu ps pt pu ny pv pw px oc ml py pz qa mp qb qc qd mt qe qf qg qh bk">Running the Python Environment</h2><p id="f2ce" class="pw-post-body-paragraph ma mb fq mc b md oq mf mg mh or mj mk ml os mn mo mp ot mr ms mt ou mv mw mx fj bk">After we built the image, let’s launch the image with the <code class="cx pd pe pf pg b">docker run</code> command and check if the above properties are defined as expected:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="5073" class="pk nt fq pg b bg pl pm l pn po">docker run --interactive --tty my_python_env:3.10</span></pre><p id="e2d8" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">This launches the image in interactive mode, and opens a bash terminal as expected:</p><figure class="nc nd ne nf ng nh mz na paragraph-image"><div role="button" tabindex="0" class="ni nj ed nk bh nl"><div class="mz na qi"><img src="../Images/6898d42a4462a0bbb0ea5a3826cada26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TEvZ6-fpyzVta4BnS70bcA.png"/></div></div><figcaption class="nn no np mz na nq nr bf b bg z dx">Launching the container via the shell terminal (screenshot by the author)</figcaption></figure><p id="0e22" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">As you can notice in the above screenshot, it launched the container inside the bash terminal, and the virtual environment is set as expected as <code class="cx pd pe pf pg b">my_env</code>. The <code class="cx pd pe pf pg b">pandas</code> library was installed and can be loaded, and we can now edit files from the terminal.</p><p id="74bf" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">One issue to take care of is that the container is still ephemeral. Therefore, any code we create inside the image is not exportable and will be lost after we stop the container from running.</p><p id="fd9f" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">A simple solution is to mount a volume with the <code class="cx pd pe pf pg b">volume</code> argument. For simplicity, we will go ahead and mount the local folder, where we keep the Dockerfile and the helper files, to a new folder inside the container named <code class="cx pd pe pf pg b">my_scripts</code>:</p><pre class="nc nd ne nf ng ph pg pi bp pj bb bk"><span id="7f10" class="pk nt fq pg b bg pl pm l pn po">docker run -v .:/my_scripts  --interactive --tty my_python_env:3.10</span></pre><p id="8bc3" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">And here is the output:</p><figure class="nc nd ne nf ng nh mz na paragraph-image"><div role="button" tabindex="0" class="ni nj ed nk bh nl"><div class="mz na qj"><img src="../Images/a8623245254898dcff248d1bac468805.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*UqzyOfI3Ko6Vi1xlTcXGWw.png"/></div></div><figcaption class="nn no np mz na nq nr bf b bg z dx">Mounting a local volume to the container (screenshot by the author)</figcaption></figure><p id="40a0" class="pw-post-body-paragraph ma mb fq mc b md me mf mg mh mi mj mk ml mm mn mo mp mq mr ms mt mu mv mw mx fj bk">Once the folder is mounted, any file that is created, modified, or deleted from the mounted folder inside the container will be reflected to the local folder. This enables you to maintain your code when stopping the container.</p><h1 id="3fef" class="ns nt fq bf nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on oo op bk">Summary</h1><p id="de4b" class="pw-post-body-paragraph ma mb fq mc b md oq mf mg mh or mj mk ml os mn mo mp ot mr ms mt ou mv mw mx fj bk">In this tutorial, we reviewed how to set a dockerized Python environment using the command line. While this is neither a practical nor recommended approach to develop with Python, it is a great learning experience of Docker core commands and basic functionalities. We show how we can easily take a built-in image and customize it according to our needs. Last but not least, we saw how to mount a local folder to the container with the volume argument to transfer the container from an ephemeral mode to a persistent mode.</p><h1 id="ad57" class="ns nt fq bf nu nv nw nx ny nz oa ob oc od oe of og oh oi oj ok ol om on oo op bk">Resources</h1><ul class=""><li id="2150" class="ma mb fq mc b md oq mf mg mh or mj mk ml os mn mo mp ot mr ms mt ou mv mw mx ov ow ox bk">A full tutorial for setting up a Dockerized Python environment with VScode and the Dev Containers — <a class="af my" href="https://github.com/RamiKrispin/vscode-python" rel="noopener ugc nofollow" target="_blank">https://github.com/RamiKrispin/vscode-python</a></li><li id="df94" class="ma mb fq mc b md oy mf mg mh oz mj mk ml pa mn mo mp pb mr ms mt pc mv mw mx ov ow ox bk">Setting a dockerized Python development environment with GitHub template — <a class="af my" href="https://medium.com/@rami.krispin/setting-a-dockerized-python-development-environment-template-de2400c4812b" rel="noopener">https://medium.com/@rami.krispin/setting-a-dockerized-python-development-environment-template-de2400c4812b</a></li><li id="57d3" class="ma mb fq mc b md oy mf mg mh oz mj mk ml pa mn mo mp pb mr ms mt pc mv mw mx ov ow ox bk">Docker vs. virtual environment — <a class="af my" href="https://medium.com/@rami.krispin/running-python-r-with-docker-vs-virtual-environment-4a62ed36900f" rel="noopener">https://medium.com/@rami.krispin/running-python-r-with-docker-vs-virtual-environment-4a62ed36900f</a></li><li id="f47a" class="ma mb fq mc b md oy mf mg mh oz mj mk ml pa mn mo mp pb mr ms mt pc mv mw mx ov ow ox bk">Dockerfile reference — <a class="af my" href="https://docs.docker.com/engine/reference/builder/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/engine/reference/builder/</a></li></ul></div></div></div></div>    
</body>
</html>