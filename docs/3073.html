<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Building a Custom AI Jira Agent</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Building a Custom AI Jira Agent</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/custom-ai-jira-agent-google-mesop-django-langchain-agent-co-star-chain-of-thought-cot-and-fb903468bff6?source=collection_archive---------0-----------------------#2024-12-25">https://towardsdatascience.com/custom-ai-jira-agent-google-mesop-django-langchain-agent-co-star-chain-of-thought-cot-and-fb903468bff6?source=collection_archive---------0-----------------------#2024-12-25</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="119f" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">How I used Google Mesop, Django, LangChain Agents, CO-STAR &amp; Chain-of-Thought (CoT) prompting combined with the Jira API to better automate Jira</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@ljamesdatascience?source=post_page---byline--fb903468bff6--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Lewis James | Data Science" class="l ep by dd de cx" src="../Images/fdbb8a326f6873a9776725ffaa0b4309.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*n27j5mfYIHXjFvSYBx9g2g.jpeg"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--fb903468bff6--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@ljamesdatascience?source=post_page---byline--fb903468bff6--------------------------------" rel="noopener follow">Lewis James | Data Science</a></p></div></div></div><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ib ic ah ai aj ak al am an ao ap aq ar id ie if" disabled="">Follow</button></p></div></div></span></div></div><div class="l ig"><span class="bf b bg z dx"><div class="ab cn ih ii ij"><div class="ik il ab"><div class="bf b bg z dx ab im"><span class="in l ig">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--fb903468bff6--------------------------------" rel="noopener follow"><p class="bf b bg z io ip iq ir is it iu iv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">19 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Dec 25, 2024</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w ea eb q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon ed in kg kh ki"><div class=""><div class="kj kk kl km kn ko kp am kq kr ks ki"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kt ku kv kw kx ky kz"><p class="bf b dy z dx"><span class="kk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kj lc ld ab q ee le lf" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lb"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count la lb">2</span></p></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lg k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lh an ao ap id li lj lk" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep ll cn"><div class="l ae"><div class="ab cb"><div class="lm ln lo lp lq lr ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ml"><img src="../Images/3244eeafdbf9aec0882a5238b4395036.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*VsgJSpQudOXJpMbGe5nhgA.jpeg"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Photo by <a class="af nc" href="https://unsplash.com/@googledeepmind?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" rel="noopener ugc nofollow" target="_blank">Google DeepMind</a> on <a class="af nc" href="https://unsplash.com/photos/a-bonsai-tree-growing-out-of-a-concrete-block-K2V_fqM2RY8?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="e8d6" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The inspiration for this project came from hosting a Jira ticket creation tool on a web application I had developed for internal users. I also added automated Jira ticket creation upon system errors.</p><p id="dfef" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Users and system errors often create similar tickets, so I wanted to see if the reasoning capabilities of LLMs could be used to automatically triage tickets by linking related issues, creating user stories, acceptance criteria, and priority.</p><p id="53e9" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Additionally, giving users and product/managerial stakeholders easier access to interact directly with Jira in natural language without any technical competencies was an interesting prospect.</p></div></div></div><div class="ab cb nz oa ob oc" role="separator"><span class="od by bm oe of og"/><span class="od by bm oe of og"/><span class="od by bm oe of"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="c333" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk"><a class="af nc" href="https://www.atlassian.com/software/jira" rel="noopener ugc nofollow" target="_blank">Jira</a> has become ubiquitous within software development and is now a leading tool for project management.</p><p id="1edd" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Concretely, advances in Large Language Model (LLM) and agentic research would imply there is an opportunity to make significant productivity gains in this area.</p><p id="3424" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Jira-related tasks are a great candidate for automation since; tasks are in the modality of text, are highly repetitive, relatively low risk and low complexity.</p></div></div></div><div class="ab cb nz oa ob oc" role="separator"><span class="od by bm oe of og"/><span class="od by bm oe of og"/><span class="od by bm oe of"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="ceed" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">In the article below, I will present my open-source project — AI Jira Assistant: a chat interface to interact with Jira via an AI agent, with a custom AI agent tool to triage newly created Jira tickets.</p><p id="cc70" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">All code has been made available via the GitHub repo at the end of the article.</p><p id="e1a9" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The project makes use of LangChain agents, served via Django (with PostgreSQL) and Google Mesop. Services are provided in Docker to be run locally.</p><p id="9fac" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The prompting strategy includes a CO-STAR system prompt, Chain-of-Thought (CoT) reasoning with few-shot prompting.</p><p id="2515" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">This article will include the following sections.</p><ol class=""><li id="61b1" class="nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny oh oi oj bk">Definitions</li><li id="c2c6" class="nd ne fq nf b go ok nh ni gr ol nk nl nm om no np nq on ns nt nu oo nw nx ny oh oi oj bk">Mesop interface: Streamlit or Mesop?</li><li id="961f" class="nd ne fq nf b go ok nh ni gr ol nk nl nm om no np nq on ns nt nu oo nw nx ny oh oi oj bk">Django REST framework</li><li id="fcac" class="nd ne fq nf b go ok nh ni gr ol nk nl nm om no np nq on ns nt nu oo nw nx ny oh oi oj bk">Custom LangChain agent tool and prompting</li><li id="da48" class="nd ne fq nf b go ok nh ni gr ol nk nl nm om no np nq on ns nt nu oo nw nx ny oh oi oj bk">Jira API examples</li><li id="65a3" class="nd ne fq nf b go ok nh ni gr ol nk nl nm om no np nq on ns nt nu oo nw nx ny oh oi oj bk">Next steps</li></ol></div></div></div><div class="ab cb nz oa ob oc" role="separator"><span class="od by bm oe of og"/><span class="od by bm oe of og"/><span class="od by bm oe of"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="49f2" class="op oq fq bf or os ot gq ou ov ow gt ox oy oz pa pb pc pd pe pf pg ph pi pj pk bk">1. Definitions</h1><p id="a0fd" class="pw-post-body-paragraph nd ne fq nf b go pl nh ni gr pm nk nl nm pn no np nq po ns nt nu pp nw nx ny fj bk">Firstly, I wanted to cover some high-level definitions that are central to the project.</p><h2 id="d869" class="pq oq fq bf or pr ps pt ou pu pv pw ox nm px py pz nq qa qb qc nu qd qe qf qg bk">AI Jira Assistant</h2><p id="f021" class="pw-post-body-paragraph nd ne fq nf b go pl nh ni gr pm nk nl nm pn no np nq po ns nt nu pp nw nx ny fj bk">The open source project presented here, when ran locally looks as the below.</p><p id="7ff1" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Including a chat interface for user prompts, example prompts to pre-populate the chat interface, a box for displaying model responses and a button to clear model responses.</p><p id="7d7a" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Code snippets for the major technical challenges throughout the project are discussed in detail.</p></div></div><div class="mr"><div class="ab cb"><div class="lm qh ln qi lo qj cf qk cg ql ci bh"><figure class="mm mn mo mp mq mr qn qo paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk qm"><img src="../Images/536a02c183e1a1f86064776e5afc3c97.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*0IY-30gJ9ycp2u6vs8rNVw.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">AI Jira Assistant (Image by author)</figcaption></figure></div></div></div><div class="ab cb"><div class="ci bh ev ew ex ey"><h2 id="6c26" class="pq oq fq bf or pr ps pt ou pu pv pw ox nm px py pz nq qa qb qc nu qd qe qf qg bk"><strong class="al">What is Google Mesop?</strong></h2><p id="53e2" class="pw-post-body-paragraph nd ne fq nf b go pl nh ni gr pm nk nl nm pn no np nq po ns nt nu pp nw nx ny fj bk">Mesop is a relatively recent (2023) Python web framework used at Google for rapid AI app development.</p><blockquote class="qp"><p id="5bc7" class="qq qr fq bf qs qt qu qv qw qx qy ny dx">“Mesop provides a versatile range of 30 components, from low-level building blocks to high-level, AI-focused components. This flexibility lets you rapidly prototype ML apps or build custom UIs, all within a single framework that adapts to your project’s use case.” — <a class="af nc" href="https://google.github.io/mesop/" rel="noopener ugc nofollow" target="_blank">Mesop Homepage</a></p></blockquote><h2 id="58da" class="pq oq fq bf or pr qz pt ou pu ra pw ox nm rb py pz nq rc qb qc nu rd qe qf qg bk">What is an AI Agent?</h2><p id="7145" class="pw-post-body-paragraph nd ne fq nf b go pl nh ni gr pm nk nl nm pn no np nq po ns nt nu pp nw nx ny fj bk">The origins of the Agent software paradigm comes from the word Agency, a software program that can observe its environment and act upon it.</p><blockquote class="qp"><p id="8df4" class="qq qr fq bf qs qt qu qv qw qx qy ny dx">“An artificial intelligence (AI) agent is a software program that can interact with its environment, collect data, and use the data to perform self-determined tasks to meet predetermined goals.</p><p id="1b88" class="qq qr fq bf qs qt qu qv qw qx qy ny dx">Humans set goals, but an AI agent independently chooses the best actions it needs to perform to achieve those goals.</p><p id="a083" class="qq qr fq bf qs qt qu qv qw qx qy ny dx">AI agents are rational agents. They make rational decisions based on their perceptions and data to produce optimal performance and results.</p><p id="64ab" class="qq qr fq bf qs qt qu qv qw qx qy ny dx">An AI agent senses its environment with physical or software interfaces.” — <a class="af nc" href="https://aws.amazon.com/what-is/ai-agents/" rel="noopener ugc nofollow" target="_blank">AWS Website</a></p></blockquote><h2 id="dced" class="pq oq fq bf or pr qz pt ou pu ra pw ox nm rb py pz nq rc qb qc nu rd qe qf qg bk">What is CO-STAR prompting?</h2><p id="47f2" class="pw-post-body-paragraph nd ne fq nf b go pl nh ni gr pm nk nl nm pn no np nq po ns nt nu pp nw nx ny fj bk">This is a guide to the formatting of prompts such that the following headers are included; context, objective, style, tone, audience and response. This is widely accepted to improve model output for LLMs.</p><blockquote class="qp"><p id="a789" class="qq qr fq bf qs qt qu qv qw qx qy ny dx">“The CO-STAR framework, a brainchild of GovTech Singapore’s Data Science &amp; AI team, is a handy template for structuring prompts.</p><p id="f689" class="qq qr fq bf qs qt qu qv qw qx qy ny dx">It considers all the key aspects that influence the effectiveness and relevance of an LLM’s response, leading to more optimal responses.” — <a class="af nc" rel="noopener" target="_blank" href="/how-i-won-singapores-gpt-4-prompt-engineering-competition-34c195a93d41">Sheila Teo’s Medium Post</a></p></blockquote><h2 id="5c4a" class="pq oq fq bf or pr qz pt ou pu ra pw ox nm rb py pz nq rc qb qc nu rd qe qf qg bk">What is Chain-of-Thought (CoT) prompting?</h2><p id="e40e" class="pw-post-body-paragraph nd ne fq nf b go pl nh ni gr pm nk nl nm pn no np nq po ns nt nu pp nw nx ny fj bk">Originally proposed in a Google paper; <a class="af nc" href="https://arxiv.org/pdf/2201.11903" rel="noopener ugc nofollow" target="_blank">Wei et al. (2022).</a> Chain-of-Thought (CoT) prompting means to provide few-shot prompting examples of intermediate reasoning steps. Which was proven to improve common-sense reasoning of the model output.</p><h2 id="90fc" class="pq oq fq bf or pr ps pt ou pu pv pw ox nm px py pz nq qa qb qc nu qd qe qf qg bk">What is Django?</h2><p id="be91" class="pw-post-body-paragraph nd ne fq nf b go pl nh ni gr pm nk nl nm pn no np nq po ns nt nu pp nw nx ny fj bk">Django is one of the more sophisticated widely used Python frameworks.</p><blockquote class="qp"><p id="2fc2" class="qq qr fq bf qs qt qu qv qw qx qy ny dx">“Django is a high-level Python web framework that encourages rapid development and clean, pragmatic design. It’s free and open source.” —<a class="af nc" href="https://www.djangoproject.com/" rel="noopener ugc nofollow" target="_blank"> Django Homepage</a></p></blockquote><h2 id="7db1" class="pq oq fq bf or pr qz pt ou pu ra pw ox nm rb py pz nq rc qb qc nu rd qe qf qg bk">What is LangChain?</h2><p id="0fbc" class="pw-post-body-paragraph nd ne fq nf b go pl nh ni gr pm nk nl nm pn no np nq po ns nt nu pp nw nx ny fj bk">LangChain is one of the better know open source libraries for supporting a LLM applications, up to and including agents and prompting relevant to this project.</p><blockquote class="qp"><p id="624e" class="qq qr fq bf qs qt qu qv qw qx qy ny dx">“LangChain’s flexible abstractions and AI-first toolkit make it the #1 choice for developers when building with GenAI.<br/>Join 1M+ builders standardizing their LLM app development in LangChain’s Python and JavaScript frameworks.” — <a class="af nc" href="https://www.langchain.com/langchain" rel="noopener ugc nofollow" target="_blank">LangChain website</a></p></blockquote><h1 id="b216" class="op oq fq bf or os re gq ou ov rf gt ox oy rg pa pb pc rh pe pf pg ri pi pj pk bk">2. Mesop interface: Streamlit or Mesop?</h1><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ml"><img src="../Images/f457d98dc5446aeb5960d0d8e95a50c9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DGFLQWKGJBCOuxViJKstGA.jpeg"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Photo by <a class="af nc" href="https://unsplash.com/@konseptastudio?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" rel="noopener ugc nofollow" target="_blank">Konsepta Studio</a> on <a class="af nc" href="https://unsplash.com/photos/black-framed-eyeglasses-on-white-surface-DSW79QZtjGM?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8f7e" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">I have used <a class="af nc" href="https://streamlit.io/" rel="noopener ugc nofollow" target="_blank">Streamlit</a> extensively professionally for hosting Generative AI applications, an example of my work can be found <a class="af nc" href="https://wan-ifra.org/2024/10/how-uks-reach-is-using-ai-to-help-produce-more-content-faster/" rel="noopener ugc nofollow" target="_blank">here</a>.</p><p id="17c3" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">At a high level, Streamlit is a comparable open-source Python web framework</p><p id="0ce6" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">For more on Streamlit, please see my other Medium article where it is discussed at length.</p><div class="rj rk rl rm rn ro"><a href="https://medium.com/@ljamesdatascience/ai-grant-application-writer-autogen-postgresql-rag-langchain-fastapi-and-streamlit-93ba439dcb7d?source=post_page-----fb903468bff6--------------------------------" rel="noopener follow" target="_blank"><div class="rp ab ig"><div class="rq ab co cb rr rs"><h2 class="bf fr hw z io rt iq ir ru it iv fp bk">AI Grant Application Writer — AutoGen, PostgreSQL RAG, LangChain, FastAPI and Streamlit</h2><div class="rv l"><h3 class="bf b hw z io rt iq ir ru it iv dx">Writing grant applications can be time-consuming and tedious, Generative AI seems like a natural solution though naive…</h3></div><div class="rw l"><p class="bf b dy z io rt iq ir ru it iv dx">medium.com</p></div></div><div class="rx l"><div class="ry l rz sa sb rx sc lr ro"/></div></div></a></div><p id="42af" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">This was the first opportunity to use Mesop in anger — so I thought a comparison might be useful.</p><p id="b776" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Mesop is designed to give more fine-grained control over the CSS styling of components and natively integrates with JS web comments. Mesop also has useful debugging tools when running locally. I would also say from experience that the multi-page app functionality is easier to use.</p><p id="3c09" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">However, this does mean that there is a larger barrier to entry for say machine learning practitioners less well-versed in CSS styling (myself included). Streamlit also has a larger community for support.</p><p id="69a4" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">From the code snippet, we can set up different page routes. The project only contains two pages. The main page and an error page.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="0e6b" class="sh oq fq se b bg si sj l sk sl">import mesop as me<br/><br/># local imports<br/>try:<br/>    from .utils import ui_components<br/>except Exception:<br/>    from utils import ui_components<br/><br/>@me.page(path="/")<br/>def page(security_policy=me.SecurityPolicy(dangerously_disable_trusted_types=True)):<br/>    with me.box(<br/>        style=me.Style(<br/>            background="#fff",<br/>            min_height="calc(100% - 48px)",<br/>            padding=me.Padding(bottom=16),<br/>        )<br/>    ):<br/>        with me.box(<br/>            style=me.Style(<br/>                width="min(800px, 100%)",<br/>                margin=me.Margin.symmetric(horizontal="auto"),<br/>                padding=me.Padding.symmetric(<br/>                    horizontal=16,<br/>                ),<br/>            )<br/>        ):<br/>            ui_components.header_text()<br/>            ui_components.example_row()<br/>            ui_components.chat_input()<br/>            ui_components.output()<br/>            ui_components.clear_output()<br/>    ui_components.footer()<br/><br/>@me.page(path="/error")<br/>def error(security_policy=me.SecurityPolicy(dangerously_disable_trusted_types=True)):<br/>    with me.box(<br/>        style=me.Style(<br/>            background="#fff",<br/>            min_height="calc(100% - 48px)",<br/>            padding=me.Padding(bottom=16),<br/>        )<br/>    ):<br/>        with me.box(<br/>            style=me.Style(<br/>                width="min(720px, 100%)",<br/>                margin=me.Margin.symmetric(horizontal="auto"),<br/>                padding=me.Padding.symmetric(<br/>                    horizontal=16,<br/>                ),<br/>            )<br/>        ):<br/>            ui_components.header_text()<br/>            ui_components.render_error_page()<br/>    ui_components.footer()</span></pre><p id="de26" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The error page includes a button to redirect to the homepage.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk sm"><img src="../Images/a62ff27dc85ddaa92e445800afda8b06.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*q4YqAm1bZw8AccStl9diYw.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">AI Jira Assistant Error Page (Image by author)</figcaption></figure><p id="c894" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The code to trigger the redirect to the homepage is included here.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="27e4" class="sh oq fq se b bg si sj l sk sl">def navigate_home(event: me.ClickEvent):<br/>    me.navigate("/")<br/><br/>def render_error_page():<br/>    is_mobile = me.viewport_size().width &lt; 640<br/>    with me.box(<br/>        style=me.Style(<br/>            position="sticky",<br/>            width="100%",<br/>            display="block",<br/>            height="100%",<br/>            font_size=50,<br/>            text_align="center",<br/>            flex_direction="column" if is_mobile else "row",<br/>            gap=10,<br/>            margin=me.Margin(bottom=30),<br/>        )<br/>    ):<br/>        me.text(<br/>            "AN ERROR HAS OCCURRED",<br/>            style=me.Style(<br/>                text_align="center",<br/>                font_size=30,<br/>                font_weight=700,<br/>                padding=me.Padding.all(8),<br/>                background="white",<br/>                justify_content="center",<br/>                display="flex",<br/>                width="100%",<br/>            ),<br/>        )<br/>        me.button(<br/>            "Navigate to home page", <br/>            type="flat",<br/>            on_click=navigate_home<br/>        )</span></pre><p id="dbbc" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">We must also create the State class, this allows data to persist within the event loop.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="3cec" class="sh oq fq se b bg si sj l sk sl">import mesop as me<br/><br/>@me.stateclass<br/>class State:<br/>    input: str<br/>    output: str<br/>    in_progress: bool</span></pre><p id="77bf" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">To clear the model output from the interface, we can then assign the output variable to an empty string. There are also different <a class="af nc" href="https://google.github.io/mesop/components/button/#overview" rel="noopener ugc nofollow" target="_blank">button supported types</a>, as of writing are; default, raised, flat and stroked.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="196e" class="sh oq fq se b bg si sj l sk sl">def clear_output():<br/>    with me.box(style=me.Style(margin=me.Margin.all(15))):<br/>        with me.box(style=me.Style(display="flex", flex_direction="row", gap=12)):<br/>            me.button("Clear output", type="flat", on_click=delete_state_helper)<br/><br/>def delete_state_helper(ClickEvent):<br/>    config.State.output = ""</span></pre><p id="9298" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">To automatically populate the chat interface with the example prompts provided, we use the button onclick event, by updating the state.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="2842" class="sh oq fq se b bg si sj l sk sl">def example_row():<br/>    is_mobile = me.viewport_size().width &lt; 640<br/>    with me.box(<br/>        style=me.Style(<br/>            display="flex",<br/>            flex_direction="column" if is_mobile else "row",<br/>            gap=10,<br/>            margin=me.Margin(bottom=40),<br/>        )<br/>    ):<br/>        for example in config.EXAMPLE_PROMPTS:<br/>            prompt_box(example, is_mobile)<br/><br/>def prompt_box(example: str, is_mobile: bool):<br/>    with me.box(<br/>        style=me.Style(<br/>            width="100%" if is_mobile else 200,<br/>            height=250,<br/>            text_align="center",<br/>            background="#F0F4F9",<br/>            padding=me.Padding.all(16),<br/>            font_weight=500,<br/>            line_height="1.5",<br/>            border_radius=16,<br/>            cursor="pointer",<br/>        ),<br/>        key=example,<br/>        on_click=click_prompt_box,<br/>    ):<br/>        me.text(example)<br/><br/>def click_prompt_box(e: me.ClickEvent):<br/>    config.State.input = e.key</span></pre><p id="509d" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Similarly, to send the request to the Django service we use the code snippet below. We use a <a class="af nc" href="https://www.geeksforgeeks.org/walrus-operator-in-python-3-8/" rel="noopener ugc nofollow" target="_blank">Walrus Operator</a> (:=) to determine if the request has received a valid response as not None (status code 200) and append the output to the state so it can be rendered in the UI, otherwise we redirect the user to the error page as previously discussed.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="0441" class="sh oq fq se b bg si sj l sk sl">def chat_input():<br/>    with me.box(<br/>        style=me.Style(<br/>            padding=me.Padding.all(8),<br/>            background="white",<br/>            display="flex",<br/>            width="100%",<br/>            border=me.Border.all(me.BorderSide(width=0, style="solid", color="black")),<br/>            border_radius=12,<br/>            box_shadow="0 10px 20px #0000000a, 0 2px 6px #0000000a, 0 0 1px #0000000a",<br/>        )<br/>    ):<br/>        with me.box(<br/>            style=me.Style(<br/>                flex_grow=1,<br/>            )<br/>        ):<br/>            me.native_textarea(<br/>                value=config.State.input,<br/>                autosize=True,<br/>                min_rows=4,<br/>                placeholder="Enter your prompt",<br/>                style=me.Style(<br/>                    padding=me.Padding(top=16, left=16),<br/>                    background="white",<br/>                    outline="none",<br/>                    width="100%",<br/>                    overflow_y="auto",<br/>                    border=me.Border.all(<br/>                        me.BorderSide(style="none"),<br/>                    ),<br/>                ),<br/>                on_blur=textarea_on_blur,<br/>            )<br/>        with me.content_button(type="icon", on_click=click_send):<br/>            me.icon("send")<br/><br/>def click_send(e: me.ClickEvent):<br/>    if not config.State.input:<br/>        return<br/>    config.State.in_progress = True<br/>    input = config.State.input<br/>    config.State.input = ""<br/>    yield<br/><br/>    if result := api_utils.call_jira_agent(input):<br/>        config.State.output += result<br/>    else:<br/>        me.navigate("/error")<br/><br/>    config.State.in_progress = False<br/>    yield<br/><br/>def textarea_on_blur(e: me.InputBlurEvent):<br/>    config.State.input = e.value</span></pre><p id="b422" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">For completeness, I have provided the request code to the Django endpoint for running the AI Jira Agent.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="39dd" class="sh oq fq se b bg si sj l sk sl">import requests<br/><br/># local imports<br/>from . import config<br/><br/>def call_jira_agent(request):<br/>    try:<br/>        data = {"request": request}<br/>        if (response := requests.post(f"{config.DJANGO_URL}api/jira-agent/", data=data)) and \<br/>        (response.status_code == 200) and \<br/>        (output := response.json().get("output")):<br/>            return f"Request: {request}&lt;br&gt;Output: {output}&lt;br&gt;&lt;br&gt;"<br/>    except Exception as e:<br/>        print(f"ERROR call_jira_agent: {e}")</span></pre><p id="9ad8" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">For this to run locally, I have included the relevant Docker and Docker compose files.</p><p id="89de" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">This Docker file for running Mesop was provided via the Mesop project homepage.</p><figure class="mm mn mo mp mq mr"><div class="sn io l ed"><div class="so sp l"/></div></figure><p id="e1df" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The Docker compose file consists of three services. The back-end Django application, the front-end Mesop application and a PostgreSQL database instance to be used in conjunction with the Django application.</p><p id="8a7f" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">I wanted to call out the environment variable being passed into the Mesop Docker container, PYTHONUNBUFFERED=1 ensures Python output, stdout, and stderr streams are sent to the terminal. Having used the recommended Docker image for Mesop applications it took me some time to determine the root cause of not seeing any output from the application.</p><p id="d0be" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The DOCKER_RUNNING=true environment variable is a convention to simply determine if the application is being run within Docker or for example within a virtual environment.</p><p id="bbb1" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">It is important to point out that environment variables will be populated via the config file ‘config.ini’ within the config sub-directory referenced by the env_file element in the Docker compose file.</p><p id="e4a1" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">To run the project, you must populate this config file with your Open AI and Jira credentials.</p><figure class="mm mn mo mp mq mr"><div class="sn io l ed"><div class="so sp l"/></div></figure><h1 id="5291" class="op oq fq bf or os re gq ou ov rf gt ox oy sq pa pb pc sr pe pf pg ss pi pj pk bk">3. Django REST framework</h1><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ml"><img src="../Images/e4bf7b8e0f7357749d194a4ed4c9ca64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5pTNbNWMr81ucvsqPMnCig.jpeg"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Photo by <a class="af nc" href="https://unsplash.com/@faisaldada?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" rel="noopener ugc nofollow" target="_blank">Faisal</a> on <a class="af nc" href="https://unsplash.com/photos/black-and-yellow-box-on-white-table-BI465ksrlWs?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="61fb" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Django is a Python web framework with lots of useful functionality out of the box.</p><p id="5786" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">It is comparable to frameworks such as Flask or FastAPI, though does require some additional setup and a steeper learning curve to get started.</p><p id="160b" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">If you want to learn more about Flask, please see my article below.</p><div class="rj rk rl rm rn ro"><a href="https://medium.com/analytics-vidhya/canal-boat-pricing-with-catboost-machine-learning-5b2389999116?source=post_page-----fb903468bff6--------------------------------" rel="noopener follow" target="_blank"><div class="rp ab ig"><div class="rq ab co cb rr rs"><h2 class="bf fr hw z io rt iq ir ru it iv fp bk">Canal Boat Pricing With Catboost Machine Learning</h2><div class="rv l"><h3 class="bf b hw z io rt iq ir ru it iv dx">One of the more interesting suggestions from the YouTube recommendation engine combined with moving to fully remote…</h3></div><div class="rw l"><p class="bf b dy z io rt iq ir ru it iv dx">medium.com</p></div></div><div class="rx l"><div class="st l rz sa sb rx sc lr ro"/></div></div></a></div><p id="47c3" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">In this article, I will cover apps, models, serializers, views and PostgreSQL database integration.</p><p id="2623" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">An app is a logically separated web application that has a specific purpose.</p><p id="2378" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">In our instance, we have named the app “api” and is created by running the following command.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="1a7e" class="sh oq fq se b bg si sj l sk sl">django-admin startapp api</span></pre><p id="d690" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Within the views.py file, we define our API endpoints.</p><blockquote class="su sv sw"><p id="c330" class="nd ne sx nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">“A view function, or <em class="fq">view</em> for short, is a Python function that takes a web request and returns a web response. This response can be the HTML contents of a web page, or a redirect, or a 404 error, or an XML document, or an image . . . or anything, really. The view itself contains whatever arbitrary logic is necessary to return that response.” — <a class="af nc" href="https://docs.djangoproject.com/en/5.1/topics/http/views/" rel="noopener ugc nofollow" target="_blank">Django website</a></p></blockquote><p id="dbde" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The endpoint routes to Django views are defined in the app urls.py file as below. The urls.py file is created at the initialization of the app. We have three endpoints in this project; a health check endpoint, an endpoint for returning all records stored within the database and an endpoint for handling the call out to the AI agent.</p><figure class="mm mn mo mp mq mr"><div class="sn io l ed"><div class="so sp l"/></div></figure><p id="fab4" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The views are declared classes, which is the standard convention within Django. Please see the file in its completeness.</p><figure class="mm mn mo mp mq mr"><div class="sn io l ed"><div class="so sp l"/></div></figure><p id="ce30" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Most of the code is self-explanatory though this snippet is significant as it will saves the models data to the database.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="0ead" class="sh oq fq se b bg si sj l sk sl">modelRequest = models.ModelRequest(request=request, response=response)<br/>modelRequest.save()</span></pre><p id="a4c6" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The snippet below returns all records in the DB from the ModelRequest model, I will cover models next.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="6f4b" class="sh oq fq se b bg si sj l sk sl">class GetRecords(APIView):<br/>    def get(self, request):<br/>        """Get request records endpoint"""<br/>        data = models.ModelRequest.objects.all().values()<br/>        return Response({'result': str(data)})</span></pre><blockquote class="su sv sw"><p id="a3c6" class="nd ne sx nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">“A model is the single, definitive source of information about your data. It contains the essential fields and behaviors of the data you’re storing. Generally, each model maps to a single database table.” — <a class="af nc" href="https://docs.djangoproject.com/en/5.1/topics/db/models/#:~:text=A%20model%20is%20the%20single,.db.models.Model%20." rel="noopener ugc nofollow" target="_blank">Django website</a></p></blockquote><p id="c9cb" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Our model for this project is simple as we only want to store the user request and the final model output, both of which are text fields.</p><p id="3b47" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The __str__ method is a common Python convention which for example, is called by default in the print function. The purpose of this method is to return a human-readable string representation of an object.</p><figure class="mm mn mo mp mq mr"><div class="sn io l ed"><div class="so sp l"/></div></figure><p id="3a0c" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The serializer maps fields from the model to validate inputs and outputs and turn more complex data types in Python data types. This can be seen in the views.py detailed previously.</p><blockquote class="su sv sw"><p id="6921" class="nd ne sx nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">“A ModelSerializer typically refers to a component of the Django REST framework (DRF). The Django REST framework is a popular toolkit for building Web APIs in Django applications. It provides a set of tools and libraries to simplify the process of building APIs, including serializers.</p><p id="84eb" class="nd ne sx nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The ModelSerializer class provides a shortcut that lets you automatically create a Serializer class with fields that correspond to the Model fields.</p><p id="7552" class="nd ne sx nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The ModelSerializer class is the same as a regular Serializer class, except that:</p><p id="ec7d" class="nd ne sx nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">It will automatically generate a set of fields for you, based on the model.</p><p id="a2d4" class="nd ne sx nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">It will automatically generate validators for the serializer, such as unique_together validators.</p><p id="2733" class="nd ne sx nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">It includes simple default implementations of .create() and .update().” — <a class="af nc" href="https://www.geeksforgeeks.org/serializers-django-rest-framework/" rel="noopener ugc nofollow" target="_blank">Geeks for geeks</a></p></blockquote><p id="62ed" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The complete serializers.py file for the project is as follows.</p><figure class="mm mn mo mp mq mr"><div class="sn io l ed"><div class="so sp l"/></div></figure><p id="0c12" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">For the PostgreSQL database integration, the config within the settings.py file must match the databse.ini file.</p><p id="745c" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The default database settings must be changed to point at the PostgreSQL database, as this is not the default database integration for Django.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="2aed" class="sh oq fq se b bg si sj l sk sl">DATABASES = {<br/>    'default': {<br/>        'ENGINE': 'django.db.backends.postgresql_psycopg2',<br/>        'NAME': 'vectordb', <br/>        'USER': 'testuser',<br/>        'PASSWORD': 'testpwd',<br/>        'HOST': 'db' if DOCKER_RUNNING else '127.0.0.1', <br/>        'PORT': '5432',<br/>    }<br/>}</span></pre><p id="7b14" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The database.ini file defines the config for the PostgreSQL database at initialization.</p><figure class="mm mn mo mp mq mr"><div class="sn io l ed"><div class="so sp l"/></div></figure><p id="89fd" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">To ensure database migrations are applied once the Docker container has been run, we can use a bash script to apply the migrations and then run the server. Running migrations automatically will mean that the database is always modified with any change in definitions within source control for Django, which saves time in the long run.</p><figure class="mm mn mo mp mq mr"><div class="sn io l ed"><div class="so sp l"/></div></figure><p id="8cd7" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The entry point to the Dockerfile is then changed to point at the bash script using the CMD instruction.</p><figure class="mm mn mo mp mq mr"><div class="sn io l ed"><div class="so sp l"/></div></figure><h1 id="d39d" class="op oq fq bf or os re gq ou ov rf gt ox oy sq pa pb pc sr pe pf pg ss pi pj pk bk">4. Custom LangChain agent tool and prompting</h1><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ml"><img src="../Images/8c59bb257dfadce27140c4cfc1f3da92.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YHOziD_MsYJ3z8rvfrf35A.jpeg"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Photo by <a class="af nc" href="https://unsplash.com/@tchompalov?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" rel="noopener ugc nofollow" target="_blank">Vlad Tchompalov</a> on <a class="af nc" href="https://unsplash.com/photos/green-bird-kuTZUOVRpOo?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="6c4c" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">I’m using the existing LangChain agent functionality combined with the <a class="af nc" href="https://python.langchain.com/docs/integrations/tools/jira/" rel="noopener ugc nofollow" target="_blank">Jira toolkit</a>, which is a wrapper around the Atlassian Python API.</p><p id="7912" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The default library is quite useful out of the box, sometimes requiring some trial and error on the prompt though I’d think it should improve over time as research into the area progresses.</p><p id="c675" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">For this project however, I wanted to add some custom tooling to the agent. This can be seen as the function ‘triage’ below with the @tool decorator.</p><p id="5e1b" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The function type hints and comment description of the tool are necessary to communicate to the agent what is expected when a call is made. The returned string of the function is observed by the agent, in this instance, we simply return “Task complete” such that the agent then ceases to conduct another step.</p><p id="c2f4" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The custom triage tool performs the following steps;</p><ul class=""><li id="c9a5" class="nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny sy oi oj bk">Get all unresolved Jira tickets for the project</li><li id="304b" class="nd ne fq nf b go ok nh ni gr ol nk nl nm om no np nq on ns nt nu oo nw nx ny sy oi oj bk">Get the description and summary for the Jira issue key the agent is conducting the triage on</li><li id="a2cc" class="nd ne fq nf b go ok nh ni gr ol nk nl nm om no np nq on ns nt nu oo nw nx ny sy oi oj bk">Makes asynchronous LLM-based comparisons with all unresolved tickets and automatically tags the ones that appear related from a text-to-text comparison, then uses the Jira API to link them</li><li id="600b" class="nd ne fq nf b go ok nh ni gr ol nk nl nm om no np nq on ns nt nu oo nw nx ny sy oi oj bk">An LLM is then used to generate; user stories, acceptance criteria and priority, leaving this model result as a comment on the primary ticket</li></ul><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="2dda" class="sh oq fq se b bg si sj l sk sl">from langchain.agents import AgentType, initialize_agent<br/>from langchain_community.agent_toolkits.jira.toolkit import JiraToolkit<br/>from langchain_community.utilities.jira import JiraAPIWrapper<br/>from langchain_openai import OpenAI<br/>from langchain.tools import tool<br/>from langchain_core.prompts import ChatPromptTemplate, FewShotChatMessagePromptTemplate<br/><br/>llm = OpenAI(temperature=0)<br/><br/>@tool<br/>def triage(ticket_number:str) -&gt; None:<br/>    """triage a given ticket and link related tickets"""<br/>    ticket_number = str(ticket_number)<br/>    all_tickets = jira_utils.get_all_tickets()<br/>    primary_issue_key, primary_issue_data = jira_utils.get_ticket_data(ticket_number)<br/>    find_related_tickets(primary_issue_key, primary_issue_data, all_tickets)<br/>    user_stories_acceptance_criteria_priority(primary_issue_key, primary_issue_data)<br/>    return "Task complete"<br/><br/>jira = JiraAPIWrapper()<br/>toolkit = JiraToolkit.from_jira_api_wrapper(jira)<br/>agent = initialize_agent(<br/>    toolkit.get_tools() + [triage], <br/>    llm, <br/>    agent=AgentType.ZERO_SHOT_REACT_DESCRIPTION, <br/>    verbose=True, <br/>    max_iterations=5,<br/>    return_intermediate_steps=True<br/>)</span></pre><p id="37ea" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Both LLM tasks use a CO-STAR system prompt and chain-of-thought few-shot prompting strategy. Therefore I have abstracted these tasks into an LLMTask class.</p><p id="1089" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">They are instantiated in the following code snippet. Arguably, we could experiment with different LLMs for each tasks though in the interest of time I have not done any experimentation around this — please feel free to comment below if you do pull the repo and have any experience to share.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="6adf" class="sh oq fq se b bg si sj l sk sl">class LLMTask:<br/>    def __init__(self, system_prompt, examples, llm):<br/>        self.system_prompt = system_prompt<br/>        self.examples = examples<br/>        self.llm = llm<br/><br/>    def construct_prompt(self):<br/>        example_prompt = ChatPromptTemplate.from_messages(<br/>            [<br/>                ("human", "{input}"),<br/>                ("ai", "{output}"),<br/>            ]<br/>        )       <br/>        few_shot_prompt = FewShotChatMessagePromptTemplate(<br/>            example_prompt=example_prompt,<br/>            examples=self.examples,<br/>        )       <br/>        return ChatPromptTemplate.from_messages(<br/>            [<br/>                ("system", self.system_prompt),<br/>                few_shot_prompt,<br/>                ("human", "{input}"),<br/>            ]<br/>        )<br/>  <br/>    def run_llm(self, input):<br/>        chain = self.construct_prompt() | self.llm <br/>        return chain.invoke({"input": input})<br/><br/>product_model = LLMTask(system_prompts.get("system_prompt_product"), example_prompts.get("examples_product"), llm)<br/>linking_model = LLMTask(system_prompts.get("system_prompt_linking"), example_prompts.get("examples_linking"), llm)</span></pre><p id="bd86" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">For the linking tasks, the CO-STAR system prompt is below. The headings of Context, Objective, Style, Tone, Audience and Response are the standard headings for the CO-STAR method. We define the context and outputs including the tagging of each element of the model results.</p><p id="e487" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Explicitly defining the audience, style and tone helps to ensure the model output is appropriate for a business context.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="83cb" class="sh oq fq se b bg si sj l sk sl"># CONTEXT #<br/>I want to triage newly created Jira tickets for our software company by comparing them to previous tickets.<br/>The first ticket will be in &lt;ticket1&gt; tags and the second ticket will be in &lt;ticket2&gt; tags. <br/><br/># OBJECTIVE #<br/>Determine if two tickets are related if the issue describes similar tasks and return True in &lt;related&gt; tags, also include your thinking in &lt;thought&gt; tags.<br/><br/># STYLE #<br/>Keep reasoning concise but logical.<br/><br/># TONE #<br/>Create an informative tone.<br/><br/># AUDIENCE #<br/>The audience will be business stake holders, product stakeholders and software engineers.<br/><br/># RESPONSE #<br/>Return a boolean if you think the tickets are related in &lt;related&gt; tags and also return your thinking as to why you think the tickets are related in &lt;thought&gt; tags.</span></pre><p id="75fc" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">For performing the product style ticket evaluation (user stories, acceptance criteria, and priority), the system prompt is below. We explicitly define the priority as either LOW, MEDIUM, or HIGH.</p><p id="083b" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">We also dictate that the model has the style of a product owner/ manager for which this task would have traditionally been conducted.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="293f" class="sh oq fq se b bg si sj l sk sl"># CONTEXT #<br/>You are a product owner working in a large software company, you triage new tickets from their descriptions in &lt;description&gt; tags as they are raised from users.<br/><br/># OBJECTIVE #<br/>From the description in &lt;description&gt; tags, you should write the following; user stories in &lt;user_stories&gt; tags, acceptance criteria in &lt;acceptance_criteria&gt; tags and priority in &lt;priority&gt;.<br/>Priority must be either LOW, MEDIUM OR HIGH depending on the what you deem is most appropriate for the given description.<br/>Also include your thinking in &lt;thought&gt; tags for the priority.<br/><br/># STYLE #<br/>Should be in the style of a product owner or manager.<br/><br/># TONE #<br/>Use a professional and business oriented tone.<br/><br/># AUDIENCE #<br/>The audience will be business stake holders, product stakeholders and software engineers.<br/><br/># RESPONSE #<br/>Respond with the following format.<br/>User stories in &lt;user_stories&gt; tags.<br/>Acceptance criteria in &lt;acceptance_criteria&gt; tags.<br/>Priority in &lt;priority&gt; tags.</span></pre><p id="455c" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">I will now provide the Chain-of-thought few-shot prompt for linking Jira tickets, we append both the summary and description for both tickets in &lt;issue1&gt; and &lt;issue2&gt; tags respectively. The thinking of the model is captured in the &lt;thought&gt; tags in the model output, this constitutes the Chain-of-Thought element.</p><p id="599c" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The few-shot designation comes from the point that multiple examples are being fed into the model.</p><p id="dffb" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The &lt;related&gt; tags contain the determination if the two tickets provided are related or not, if the model deems them to be related then a value of True is returned.</p><p id="48b2" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">We later regex parse the model output and have a helper function to link the related tickets via the Jira API, all Jira API helper functions for this project are provided later in the article.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="9351" class="sh oq fq se b bg si sj l sk sl">    "examples_linking": [<br/>        {<br/>            "input": "&lt;issue1&gt;Add Jira integration ticket creation Add a Jira creation widget to the front end of the website&lt;issue1&gt;&lt;issue2&gt;Add a widget to the front end to create a Jira Add an integration to the front end to allow users to generated Jira tickets manually&lt;issue2&gt;",<br/>            "output": "&lt;related&gt;True&lt;related&gt;&lt;thought&gt;Both tickets relate to a Jira creation widget, they must be duplicate tickets.&lt;thought&gt;"<br/>        },<br/>        {<br/>            "input": "&lt;issue1&gt;Front end spelling error There is a spelling error for the home page which should read 'Welcome to the homepage' rather than 'Wellcome to the homepage'&lt;issue1&gt;&lt;issue2&gt;Latency issue there is a latency issue and the calls to the Open AI should be made asynchronous&lt;issue2&gt;",<br/>            "output": "&lt;related&gt;False&lt;related&gt;&lt;thought&gt;The first ticket is in relation to a spelling error and the second is a latency, therefore they are not related.&lt;thought&gt;"<br/>        },<br/>        {<br/>            "input": "&lt;issue1&gt;Schema update We need to add a column for model requests and responses&lt;issue1&gt;&lt;issue2&gt;Update schema to include both model requests and model responses Add to two new additional fields to the schema&lt;issue2&gt;",<br/>            "output": "&lt;related&gt;True&lt;related&gt;&lt;thought&gt;Both tickets reference a schema update with two new fields for model requests and model responses, therefore they must be related.&lt;thought&gt;"<br/>        }<br/>    ]</span></pre><p id="68cf" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Similarly for ticket evaluation, the user story is provided in &lt;user_stories&gt; tags, acceptance criteria in &lt;acceptance_criteria&gt; tags, and priority in &lt;priority&gt; tags. The &lt;thought&gt; tags are also used for capturing the reasoning from the model specifically in terms of the priority given.</p><p id="7e63" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">All of the examples were annotated manually by myself.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="861a" class="sh oq fq se b bg si sj l sk sl">    "examples_product": [<br/>        {<br/>            "input": "&lt;description&gt;Add Jira integration ticket creation Add a Jira creation widget to the front end of the website&lt;description&gt;",<br/>            "output": "&lt;user_stories&gt;As a user, I want to be able to create a Jira ticket directly from the website.\nAs a product owner, I want to streamline the process of creating Jira tickets for our team.&lt;user_stories&gt;\n&lt;acceptance_criteria&gt;The Jira creation widget should be easily accessible on the front end of the website.\nThe widget should allow users to input all necessary information for a Jira ticket, such as title, description, and assignee.\nOnce submitted, the widget should create a new Jira ticket in the designated project.\nThe widget should have proper error handling in case of any issues with creating the ticket.&lt;acceptance_criteria&gt;\n&lt;priority&gt;MEDIUM&lt;priority&gt;\n&lt;thought&gt;By adding a Jira integration and creation widget to the website, we can improve the efficiency and accuracy of creating Jira tickets for our team. This will ultimately save time and resources for both the business and the development team. Though there is no immediate need for this to be completed. Therefore, I believe this ticket should be prioritized as MEDIUM.&lt;thought&gt;"<br/>        },<br/>        {<br/>            "input": "&lt;description&gt;Urgent schema update We need to add a column for model requests and responses for compliance&lt;description&gt;",<br/>            "output": "&lt;user_stories&gt;As a developer, I want to be able to view and track model requests and responses for compliance purposes.\nAs a product owner, I want to ensure our system is compliant with regulations and standards.&lt;user_stories&gt;\n&lt;acceptance_criteria&gt;A new column should be added to the schema for model requests and responses.\nThe column should accurately track and store all relevant information for compliance purposes.\nThe column should be easily accessible and viewable for authorized users.\nThe update should not disrupt any existing functionality of the system.&lt;acceptance_criteria&gt;\n&lt;priority&gt;HIGH&lt;priority&gt;\n&lt;thought&gt;This ticket is marked as urgent, indicating that it is a high priority for the business. Compliance is a critical aspect of our business and it is important that we address this issue as soon as possible. By adding a new column for model requests and responses, we can ensure that our system is compliant and avoid any potential legal or regulatory issues. Therefore, I believe this ticket should be prioritized as HIGH.&lt;thought&gt;"<br/>        },<br/>        {<br/>            "input": "&lt;description&gt;Homepage CSS error There is a CSS error for the homepage which is affecting a call to action button and negatively impacting conversion&lt;description&gt;",<br/>            "output": "&lt;user_stories&gt;As a user, I want the CSS error on the homepage to be fixed so that I can easily access the call to action button.\nAs a product owner, I want to improve the conversion rate of our website by fixing any CSS errors.&lt;user_stories&gt;\n&lt;acceptance_criteria&gt;The CSS error should be identified and fixed on the homepage.\nThe call to action button should be easily visible and accessible for users.\nThe fix should not affect any other functionality of the website.&lt;acceptance_criteria&gt;\n&lt;priority&gt;HIGH&lt;priority&gt;\n&lt;thought&gt;This CSS error is directly impacting the conversion rate of our website, which is a key metric for our business. It is important that we address this issue as soon as possible to improve the user experience and ultimately increase conversions. Therefore, I believe this ticket should be prioritized as HIGH.&lt;thought&gt;"<br/>        }<br/>    ],</span></pre><p id="1d23" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">This code snippet uses a muti-threaded approach to linking Jira issues concurrently. This will vastly reduce the time it takes to make pair comparisons with all the open tickets within a project to determine if they are related.</p><pre class="mm mn mo mp mq sd se sf bp sg bb bk"><span id="eefb" class="sh oq fq se b bg si sj l sk sl">def check_issue_and_link_helper(args):<br/>    key, data, primary_issue_key, primary_issue_data = args<br/>    if key != primary_issue_key and \<br/>    llm_check_ticket_match(primary_issue_data, data):<br/>        jira_utils.link_jira_issue(primary_issue_key, key) <br/><br/>def find_related_tickets(primary_issue_key, primary_issue_data, issues):<br/>    args = [(key, data, primary_issue_key, primary_issue_data) for key, data in issues.items()]<br/>    with concurrent.futures.ThreadPoolExecutor(os.cpu_count()) as executor:<br/>        executor.map(check_issue_and_link_helper, args)<br/><br/>def llm_check_ticket_match(ticket1, ticket2):<br/>    llm_result = linking_model.run_llm(f"&lt;ticket1&gt;{ticket1}&lt;ticket1&gt;&lt;ticket2&gt;{ticket2}&lt;ticket2&gt;")<br/>    if ((result := jira_utils.extract_tag_helper(llm_result))) \<br/>    and (result == 'True'):<br/>        return True </span></pre><p id="cbef" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">An example workflow of the tool, creating a ticket and triaging it.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk sz"><img src="../Images/0f3c81d705a4d1f7191dadb25d8da9e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*eGZ_mlkmoE7NRYB9wiiOqQ.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Working ticket creation and triage (Image by author)</figcaption></figure><p id="f6cf" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The result of these actions is captured in Jira ticket. Related tickets have been linked automatically, the user stories, acceptance criteria, priority and thought have been captured as a Jira comment.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ta"><img src="../Images/c890e01fb7882abe71c735539126e3e9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fV6iOvvdHutciX5VIjZLAA.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Linked tickets, user stories, acceptance criteria and priority (Image by author)</figcaption></figure><p id="0239" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">We can see the agent intermediate steps in the print statements of the Docker container.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk tb"><img src="../Images/b69b00afcdbde221f214e9a7692fac6c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*urflhNCQpMlqja6SFvZJBA.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Agent output for triage step (Image by author)</figcaption></figure><h1 id="0e94" class="op oq fq bf or os re gq ou ov rf gt ox oy sq pa pb pc sr pe pf pg ss pi pj pk bk">5. Jira API examples</h1><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk tc"><img src="../Images/4a8dc1971040892936d3712169b7fea6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*w5rm3nqOrXwl27KGRpmo1Q.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">AI Jira Assitant finding in progress tickets (Image by author)</figcaption></figure><p id="116e" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">All examples in this project where I have explicitly used the <a class="af nc" href="https://developer.atlassian.com/server/jira/platform/rest/v10002/intro/#gettingstarted" rel="noopener ugc nofollow" target="_blank">Jira REST API</a> have been included below for visibility.</p><p id="0543" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The regex extraction helper function used to parse model results is also included. There is also a Python SDK for Jira though I elected to use the requests library in this instance such that is more easily translated into other programming languages.</p><figure class="mm mn mo mp mq mr"><div class="sn io l ed"><div class="so sp l"/></div></figure><h1 id="b644" class="op oq fq bf or os re gq ou ov rf gt ox oy sq pa pb pc sr pe pf pg ss pi pj pk bk">6. Next steps</h1><p id="e72f" class="pw-post-body-paragraph nd ne fq nf b go pl nh ni gr pm nk nl nm pn no np nq po ns nt nu pp nw nx ny fj bk">The natural next step would be to include code generation by integrating with source control for a near fully automated software development lifecycle, with a human in the loop this could be a feasible solution.</p><p id="1f83" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">We can already see that AI code generation is making an impact on the enterprise — if BAU tasks can be partially automated then software developers/product practitioners can focus on more interesting and meaningful work.</p><p id="a9bc" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">If there is a lot of interest on this article then perhaps I could look into this as a follow-up project.</p><div class="rj rk rl rm rn ro"><a href="https://uk.pcmag.com/ai/155094/ai-now-writes-over-25-of-code-at-google?source=post_page-----fb903468bff6--------------------------------" rel="noopener  ugc nofollow" target="_blank"><div class="rp ab ig"><div class="rq ab co cb rr rs"><h2 class="bf fr hw z io rt iq ir ru it iv fp bk">AI Now Writes Over 25% of Code at Google</h2><div class="rv l"><h3 class="bf b hw z io rt iq ir ru it iv dx">Google CEO Sundar Pichai says the company is using AI to write code, which is then reviewed by engineers. But will that…</h3></div><div class="rw l"><p class="bf b dy z io rt iq ir ru it iv dx">uk.pcmag.com</p></div></div><div class="rx l"><div class="td l rz sa sb rx sc lr ro"/></div></div></a></div><p id="c5a6" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">I hope you found this article insightful, as promised — you can find all the code in the Github repo <a class="af nc" href="https://github.com/lewisExternal/Custom-AI-Jira-Agent/tree/main" rel="noopener ugc nofollow" target="_blank">here</a>, and feel free to connect with me on <a class="af nc" href="https://www.linkedin.com/in/lewisjames1/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a> also.</p><h1 id="c515" class="op oq fq bf or os re gq ou ov rf gt ox oy sq pa pb pc sr pe pf pg ss pi pj pk bk">References</h1><ul class=""><li id="a392" class="nd ne fq nf b go pl nh ni gr pm nk nl nm pn no np nq po ns nt nu pp nw nx ny sy oi oj bk"><a class="af nc" href="https://google.github.io/mesop/getting-started/quickstart/#starter-kit" rel="noopener ugc nofollow" target="_blank">https://google.github.io/mesop/getting-started/quickstart/#starter-kit</a></li><li id="8796" class="nd ne fq nf b go ok nh ni gr ol nk nl nm om no np nq on ns nt nu oo nw nx ny sy oi oj bk"><a class="af nc" href="https://www.django-rest-framework.org/#example" rel="noopener ugc nofollow" target="_blank">https://www.django-rest-framework.org/#example</a></li><li id="cb6e" class="nd ne fq nf b go ok nh ni gr ol nk nl nm om no np nq on ns nt nu oo nw nx ny sy oi oj bk"><a class="af nc" href="https://blog.logrocket.com/dockerizing-django-app/" rel="noopener ugc nofollow" target="_blank">https://blog.logrocket.com/dockerizing-django-app/</a></li></ul><p id="bd9e" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">*All images, unless otherwise noted, are by the author.</p></div></div></div></div>    
</body>
</html>