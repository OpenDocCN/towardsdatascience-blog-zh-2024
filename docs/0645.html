<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Running RStudio Inside a Container</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Running RStudio Inside a Container</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/running-rstudio-inside-a-container-e9db5e809ff8?source=collection_archive---------5-----------------------#2024-03-09">https://towardsdatascience.com/running-rstudio-inside-a-container-e9db5e809ff8?source=collection_archive---------5-----------------------#2024-03-09</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="2c12" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">A step-by-step guide for setting up an RStudio server inside a container with your local RStudio settings</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@rami.krispin?source=post_page---byline--e9db5e809ff8--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Rami Krispin" class="l ep by dd de cx" src="../Images/8af28c282d42a2a27c28aa8af4c8d482.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*YPncNkgBc5VW-9coln432w.jpeg"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--e9db5e809ff8--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@rami.krispin?source=post_page---byline--e9db5e809ff8--------------------------------" rel="noopener follow">Rami Krispin</a></p></div></div></div><div class="hz ia l"><div class="ab ib"><div class="ab"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewbox="0 0 16 16"><path fill="#437AFF" d="M15.163 8c0 .65-.459 1.144-.863 1.575-.232.244-.471.5-.563.719s-.086.543-.092.875c-.006.606-.018 1.3-.49 1.781-.47.481-1.15.494-1.744.5-.324.006-.655.013-.857.094s-.465.337-.704.575c-.422.412-.906.881-1.542.881-.637 0-1.12-.469-1.543-.881-.239-.238-.49-.482-.704-.575-.214-.094-.532-.088-.857-.094-.593-.006-1.273-.019-1.744-.5s-.484-1.175-.49-1.781c-.006-.332-.012-.669-.092-.875-.08-.207-.33-.475-.563-.719-.404-.431-.863-.925-.863-1.575s.46-1.144.863-1.575c.233-.244.472-.5.563-.719.092-.219.086-.544.092-.875.006-.606.019-1.3.49-1.781s1.15-.494 1.744-.5c.325-.006.655-.012.857-.094.202-.081.465-.337.704-.575C7.188 1.47 7.671 1 8.308 1s1.12.469 1.542.881c.239.238.49.481.704.575s.533.088.857.094c.594.006 1.273.019 1.745.5.47.481.483 1.175.49 1.781.005.331.011.669.091.875s.33.475.563.719c.404.431.863.925.863 1.575"/><path fill="#fff" d="M7.328 10.5c.195 0 .381.08.519.22.137.141.215.331.216.53 0 .066.026.13.072.177a.24.24 0 0 0 .346 0 .25.25 0 0 0 .071-.177c.001-.199.079-.389.216-.53a.73.73 0 0 1 .519-.22h1.959c.13 0 .254-.053.346-.146a.5.5 0 0 0 .143-.354V6a.5.5 0 0 0-.143-.354.49.49 0 0 0-.346-.146h-1.47c-.324 0-.635.132-.865.366-.23.235-.359.552-.359.884v2.5c0 .066-.025.13-.071.177a.24.24 0 0 1-.346 0 .25.25 0 0 1-.072-.177v-2.5c0-.332-.13-.65-.359-.884A1.21 1.21 0 0 0 6.84 5.5h-1.47a.49.49 0 0 0-.346.146A.5.5 0 0 0 4.88 6v4c0 .133.051.26.143.354a.49.49 0 0 0 .347.146z"/></svg></div></div></div><span class="ic id" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ie if ah ai aj ak al am an ao ap aq ar ig ih ii" disabled="">Follow</button></p></div></div></span></div></div><div class="l ij"><span class="bf b bg z dx"><div class="ab cn ik il im"><div class="in io ab"><div class="bf b bg z dx ab ip"><span class="iq l ij">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--e9db5e809ff8--------------------------------" rel="noopener follow"><p class="bf b bg z ir is it iu iv iw ix iy bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="ic id" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">6 min read</span><div class="iz ja l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Mar 9, 2024</span></div></span></div></span></div></div></div><div class="ab cp jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq"><div class="h k w ea eb q"><div class="kg l"><div class="ab q kh ki"><div class="pw-multi-vote-icon ed iq kj kk kl"><div class=""><div class="km kn ko kp kq kr ks am kt ku kv kl"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kw kx ky kz la lb lc"><p class="bf b dy z dx"><span class="kn">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao km lf lg ab q ee lh li" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="le"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count ld le">2</span></p></button></div></div></div><div class="ab q jr js jt ju jv jw jx jy jz ka kb kc kd ke kf"><div class="lj k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lk an ao ap ig ll lm ln" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep lo cn"><div class="l ae"><div class="ab cb"><div class="lp lq lr ls lt lu ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lk an ao ap ig lv lw li lx ly lz ma mb s mc md me mf mg mh mi u mj mk ml"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lk an ao ap ig lv lw li lx ly lz ma mb s mc md me mf mg mh mi u mj mk ml"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lk an ao ap ig lv lw li lx ly lz ma mb s mc md me mf mg mh mi u mj mk ml"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><p id="6d58" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">This is a step-by-step guide for setting up an RStudio server inside a container with your local RStudio settings. We will use the <a class="af ni" href="https://hub.docker.com/r/rocker/rstudio" rel="noopener ugc nofollow" target="_blank">Rocker RStudio image</a> and show how to customize it with the <code class="cx nj nk nl nm b">docker run</code> command and its arguments.</p><p id="31ad" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">By the end of this tutorial, you will be able to:</p><ul class=""><li id="d117" class="mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh nn no np bk">Launch an RStudio server inside a container</li><li id="d5fa" class="mm mn fq mo b go nq mq mr gr nr mt mu mv ns mx my mz nt nb nc nd nu nf ng nh nn no np bk">Mount local folders</li><li id="64b8" class="mm mn fq mo b go nq mq mr gr nr mt mu mv ns mx my mz nt nb nc nd nu nf ng nh nn no np bk">Clone local RStudio settings (color theme, code snippets, etc.)</li><li id="9d03" class="mm mn fq mo b go nq mq mr gr nr mt mu mv ns mx my mz nt nb nc nd nu nf ng nh nn no np bk">Load local Renviron setting</li></ul><figure class="ny nz oa ob oc od nv nw paragraph-image"><div role="button" tabindex="0" class="oe of ed og bh oh"><div class="nv nw nx"><img src="../Images/7758b9511dbe9829b8d18880f155bf26.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZT5vifLpTtFR-yMSfySYjw.png"/></div></div><figcaption class="oj ok ol nv nw om on bf b bg z dx">A whale carries an R container (created by the author with Midjourney)</figcaption></figure><h1 id="f0fc" class="oo op fq bf oq or os gq ot ou ov gt ow ox oy oz pa pb pc pd pe pf pg ph pi pj bk">Introduction</h1><p id="33c7" class="pw-post-body-paragraph mm mn fq mo b go pk mq mr gr pl mt mu mv pm mx my mz pn nb nc nd po nf ng nh fj bk">RStudio is the primary IDE for the R programming language. Unlike other general-purpose IDEs such as VScode, RStudio was built and designed specifically for R users and their needs. This is one of the reasons for the popularity of RStudio among R users. By default, RStudio does not have native support for Docker. The main method for setting and running RStudio inside a container is using the RStudio server version. This required installing and setting the server inside a container, which might be an entry barrier for some users. Luckily, the <a class="af ni" href="https://rocker-project.org/" rel="noopener ugc nofollow" target="_blank">Rocker project </a>— the main source for R images provides built-in and ready-to-use images with an RStudio server.</p><p id="c432" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">Throughout this tutorial, we will use the Rocker RStudio image, which is available on <a class="af ni" href="https://hub.docker.com/r/rocker/rstudio/tags" rel="noopener ugc nofollow" target="_blank">Docker Hub</a>.</p><h1 id="725a" class="oo op fq bf oq or os gq ot ou ov gt ow ox oy oz pa pb pc pd pe pf pg ph pi pj bk">Prerequisites</h1><p id="9429" class="pw-post-body-paragraph mm mn fq mo b go pk mq mr gr pl mt mu mv pm mx my mz pn nb nc nd po nf ng nh fj bk">To follow along with this tutorial and run the code below, you will need:</p><ul class=""><li id="daf3" class="mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh nn no np bk"><a class="af ni" href="https://www.docker.com/products/docker-desktop/" rel="noopener ugc nofollow" target="_blank">Docker Desktop</a> (or any alternative)</li><li id="627a" class="mm mn fq mo b go nq mq mr gr nr mt mu mv ns mx my mz nt nb nc nd nu nf ng nh nn no np bk"><a class="af ni" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank">Docker Hub</a> account</li><li id="85d5" class="mm mn fq mo b go nq mq mr gr nr mt mu mv ns mx my mz nt nb nc nd nu nf ng nh nn no np bk">Basic understanding of the <a class="af ni" href="https://docs.docker.com/reference/cli/docker/container/run/" rel="noopener ugc nofollow" target="_blank">docker run</a> command</li></ul><h1 id="7992" class="oo op fq bf oq or os gq ot ou ov gt ow ox oy oz pa pb pc pd pe pf pg ph pi pj bk">Getting Started with Rocker</h1><p id="583d" class="pw-post-body-paragraph mm mn fq mo b go pk mq mr gr pl mt mu mv pm mx my mz pn nb nc nd po nf ng nh fj bk">The <a class="af ni" href="https://rocker-project.org/" rel="noopener ugc nofollow" target="_blank">Rocker Project</a> is the main hub for built-in R images. It provides various images with different R environment settings, such as base-r, tidyverse, ML-verse, shiny, geospatial, and, of course, the RStudio server image. The full list of available R images is on the Rocker’s Docker Hub page.</p><figure class="ny nz oa ob oc od nv nw paragraph-image"><div role="button" tabindex="0" class="oe of ed og bh oh"><div class="nv nw pp"><img src="../Images/fc1b996c4b0016643c33407f2c1880e5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*oG1Eieicv6H5qMlPLpvriA.png"/></div></div><figcaption class="oj ok ol nv nw om on bf b bg z dx">Rocker’s top images by number of downloads (screenshot from Docker Hub by the author)</figcaption></figure><p id="b630" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">We will use the <code class="cx nj nk nl nm b">rocker/rstudio</code> image, which, as its name implies, has an RStudio server installed and ready to use. Using the<code class="cx nj nk nl nm b">docker run</code> command, we can launch this container in an interactive mode and access the RStudio server via the browser.</p><p id="19b6" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">Let’s get started by pulling the image with the <code class="cx nj nk nl nm b">docker pull</code> command:</p><pre class="ny nz oa ob oc pq nm pr bp ps bb bk"><span id="d56b" class="pt op fq nm b bg pu pv l pw px">&gt;docker pull rocker/rstudio                                                                                                                                            ok<br/>Using default tag: latest<br/>latest: Pulling from rocker/rstudio<br/>a4a2c7a57ed8: Pull complete<br/>d0f9831967fe: Pull complete<br/>e78811385d51: Pull complete<br/>c61633a20287: Pull complete<br/>832cef14f2fb: Pull complete<br/>8395fbba6231: Pull complete<br/>fb53abdcfb34: Pull complete<br/>c942edef0d7f: Pull complete<br/>Digest: sha256:8e25784e1d29420effefae1f31e543c792d215d89ce717b0cc64fb18a77668f3<br/>Status: Downloaded newer image for rocker/rstudio:latest<br/>docker.io/rocker/rstudio:latest</span></pre><p id="42ab" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">You can use the <code class="cx nj nk nl nm b">docker images</code> command to verify that the image was downloaded successfully:</p><pre class="ny nz oa ob oc pq nm pr bp ps bb bk"><span id="c93b" class="pt op fq nm b bg pu pv l pw px">&gt;docker images                                                                                                                                                    ok  36s<br/>REPOSITORY              TAG          IMAGE ID       CREATED       SIZE<br/>rocker/rstudio          latest       7039fb162243   2 days ago    1.94GB</span></pre><p id="46a2" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">Let’s now go ahead and use the suggested command from the Rocker Project to launch RStudio inside the container with the <code class="cx nj nk nl nm b">docker run</code> command:</p><pre class="ny nz oa ob oc pq nm pr bp ps bb bk"><span id="c4a4" class="pt op fq nm b bg pu pv l pw px">&gt;docker run --rm -ti -e PASSWORD=yourpassword -p 8787:8787 rocker/rstudio</span></pre><p id="bcfd" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">Before we open the RStudio server on the browser, let’s review the <code class="cx nj nk nl nm b">run</code> arguments we used above:</p><ul class=""><li id="5d1f" class="mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh nn no np bk"><code class="cx nj nk nl nm b">rm</code> — Automatically remove the container when it exits (from the terminal <code class="cx nj nk nl nm b">control + c</code>)</li><li id="adc2" class="mm mn fq mo b go nq mq mr gr nr mt mu mv ns mx my mz nt nb nc nd nu nf ng nh nn no np bk"><code class="cx nj nk nl nm b">ti</code> — Run the container in an interactive mode</li><li id="ba70" class="mm mn fq mo b go nq mq mr gr nr mt mu mv ns mx my mz nt nb nc nd nu nf ng nh nn no np bk"><code class="cx nj nk nl nm b">e </code>— Set environment variable, in this case, to define the server login password as <code class="cx nj nk nl nm b">yourpassword</code></li><li id="c47f" class="mm mn fq mo b go nq mq mr gr nr mt mu mv ns mx my mz nt nb nc nd nu nf ng nh nn no np bk"><code class="cx nj nk nl nm b">p</code> — Define the port mapping. In this case, we will map the container’s <code class="cx nj nk nl nm b">8787</code> port with port <code class="cx nj nk nl nm b">8787</code> on the local machine</li></ul><p id="65db" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">After running the command, you can access the RStudio server on local host 8787 (e.g., <a class="af ni" href="http://localhost:8787" rel="noopener ugc nofollow" target="_blank">http://localhost:8787</a>). This will prompt the login page, where you should use:</p><ul class=""><li id="8fbf" class="mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh nn no np bk">Username: <code class="cx nj nk nl nm b">rstudio</code></li><li id="df58" class="mm mn fq mo b go nq mq mr gr nr mt mu mv ns mx my mz nt nb nc nd nu nf ng nh nn no np bk">Password: <code class="cx nj nk nl nm b">yourpassword</code> (as set in the <code class="cx nj nk nl nm b">run</code> commend)</li></ul><p id="221e" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">You should expect the following output:</p><figure class="ny nz oa ob oc od nv nw paragraph-image"><div role="button" tabindex="0" class="oe of ed og bh oh"><div class="nv nw py"><img src="../Images/e8094acf875b3185fd4cd5beaabec26d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*TxzhM7xGOQdAmVSSXpI7GA.png"/></div></div><figcaption class="oj ok ol nv nw om on bf b bg z dx">The initial view of the RStudio server (screenshot by the author)</figcaption></figure><blockquote class="pz qa qb"><p id="3d19" class="mm mn qc mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk"><strong class="mo fr">Note:</strong> You can stop the running container on terminal by clicking <code class="cx nj nk nl nm b">control+c</code>.</p></blockquote><h1 id="8277" class="oo op fq bf oq or os gq ot ou ov gt ow ox oy oz pa pb pc pd pe pf pg ph pi pj bk">Oh No! It Is Ephemeral!</h1><p id="1558" class="pw-post-body-paragraph mm mn fq mo b go pk mq mr gr pl mt mu mv pm mx my mz pn nb nc nd po nf ng nh fj bk">By default, the Docker container runs in ephemeral mode. Any code created and saved on the container or input you generated will be lost when terminating the container run time. This is neither practical nor useful if you wish to use Docker as your development environment. To address this issue, we will use the <strong class="mo fr">volume </strong>(or <code class="cx nj nk nl nm b">v</code>)<strong class="mo fr"> </strong>argument, which enables the mount of local folders with the container files system.</p><p id="c716" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">The below code demonstrates the use of the volume argument to mount the folder we execute the <code class="cx nj nk nl nm b">run</code> command from (e.g., <code class="cx nj nk nl nm b">.</code>) with the RStudio server home folder:</p><pre class="ny nz oa ob oc pq nm pr bp ps bb bk"><span id="eb4e" class="pt op fq nm b bg pu pv l pw px">docker run --rm -ti \<br/>-v .:/home/rstudio \<br/>-e PASSWORD=yourpassword \<br/>-p 8787:8787 rocker/rstudio</span></pre><blockquote class="pz qa qb"><p id="be20" class="mm mn qc mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">The volume argument maps the local folder (e.g., <code class="cx nj nk nl nm b">source</code>) with the container (e.g., <code class="cx nj nk nl nm b">target</code>) using the following format <code class="cx nj nk nl nm b">source:target</code>.</p></blockquote><p id="7560" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">Let’s now go back to the browser and reopen the RStudio server using the local host address — <a class="af ni" href="http://localhost:8787" rel="noopener ugc nofollow" target="_blank">http://localhost:8787</a>. You should expect to see in the RStudio files section the folders and/or files that are available on the local folder you mount to the container. In my case, I will mount my tutorials folder, which has the following folders:</p><pre class="ny nz oa ob oc pq nm pr bp ps bb bk"><span id="e946" class="pt op fq nm b bg pu pv l pw px">.<br/>├── Introduction-to-Docker<br/>├── awesome-ds-setting<br/>├── forecast-poc<br/>├── forecasting-at-scale<br/>├── lang2sql<br/>├── postgres-docker<br/>├── python<br/>├── rstudio-docker<br/>├── sdsu-docker-workshop<br/>├── shinylive-r<br/>├── statistical-rethinking-2024<br/>├── vscode-python<br/>├── vscode-python-template<br/>├── vscode-r<br/>└── vscode-r-template</span></pre><p id="5c6f" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">As you can see in the screenshot below, the local folders are now available and accessible from the RStudio server (marked with a purple rectangle):</p><figure class="ny nz oa ob oc od nv nw paragraph-image"><div role="button" tabindex="0" class="oe of ed og bh oh"><div class="nv nw py"><img src="../Images/d2d338f2101155644d12e5b19282414a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*m5HYpd3IUvlNBGJ6A5pwow.png"/></div></div><figcaption class="oj ok ol nv nw om on bf b bg z dx">RStudio server with a local volume (screenshot by the author)</figcaption></figure><blockquote class="pz qa qb"><p id="f701" class="mm mn qc mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">Note: You can use the volume argument to mount multiple volumes. For example, one for your project and second for a folder with your data folders</p></blockquote><p id="8099" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">This enables us to read from and write to the local folder from the container during run time.</p><h1 id="9d72" class="oo op fq bf oq or os gq ot ou ov gt ow ox oy oz pa pb pc pd pe pf pg ph pi pj bk">Clone Your Local RStudio Settings</h1><p id="5bbb" class="pw-post-body-paragraph mm mn fq mo b go pk mq mr gr pl mt mu mv pm mx my mz pn nb nc nd po nf ng nh fj bk">In the previous section, we saw how to mount a local folder to the container with the volume argument. This enables us to save our code locally while working inside the container. In this section, we will see how we can leverage the volume argument to mount our local RStudio setting with the ones on the container. The idea here is to launch the container and run the RStudio server with our local settings without needing to update the settings any time we relaunch the container. This includes loading local settings such as color theme settings, code snippets, environment variables, etc.</p><p id="93c9" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">Before we can update the <code class="cx nj nk nl nm b">docker run</code> with the local RStudio configuration folder, we need to identify the folder path of the config folder of both the local and the one on the container. For example, the path on my machine is <code class="cx nj nk nl nm b">~/.config/rstudio</code> and it contains the following folders and files:</p><pre class="ny nz oa ob oc pq nm pr bp ps bb bk"><span id="e5c2" class="pt op fq nm b bg pu pv l pw px">.<br/>├── dictionaries<br/>│   └── custom<br/>├── rstudio-prefs.json<br/>└── snippets<br/>    └── r.snippets</span></pre><p id="2b93" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">Similarly, the <code class="cx nj nk nl nm b">.config/rstudio</code> folder on the container is under the <code class="cx nj nk nl nm b">/home/rstudio/</code>. Therefore, we will use the following mapping:</p><pre class="ny nz oa ob oc pq nm pr bp ps bb bk"><span id="6785" class="pt op fq nm b bg pu pv l pw px">$HOME/.config/rstudio:/home/rstudio/.config/rstudio</span></pre><p id="7900" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">Likewise, we want to mount the <code class="cx nj nk nl nm b">.Renviron</code> file with the local environment variables. The <code class="cx nj nk nl nm b">.Renviron</code> file is under the root folder on the local machine, and we follow the same approach to map the local file with the ones on the container:</p><pre class="ny nz oa ob oc pq nm pr bp ps bb bk"><span id="5548" class="pt op fq nm b bg pu pv l pw px">$HOME/.Renviron:/home/rstudio/.Renviron</span></pre><p id="9ea7" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">Let’s now add it all together and relaunch the container:</p><pre class="ny nz oa ob oc pq nm pr bp ps bb bk"><span id="ff3b" class="pt op fq nm b bg pu pv l pw px">docker run --rm -ti \<br/>-v .:/home/rstudio \<br/>-v $HOME/.config/rstudio:/home/rstudio/.config/rstudio \<br/>-v $HOME/.Renviron:/home/rstudio/.Renviron \<br/>-e PASSWORD=yourpassword \<br/>-p 8787:8787 rocker/rstudio</span></pre><p id="037c" class="pw-post-body-paragraph mm mn fq mo b go mp mq mr gr ms mt mu mv mw mx my mz na nb nc nd ne nf ng nh fj bk">After mounting the local RStudio config folder with the one on the container, the server settings are now mapped with the local RStudio settings on my machine:</p><figure class="ny nz oa ob oc od nv nw paragraph-image"><div role="button" tabindex="0" class="oe of ed og bh oh"><div class="nv nw py"><img src="../Images/9681c75361b6e632fd25354a3f02ddf1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QBgKWTy7r8r7Ij_yV7zyeA.png"/></div></div><figcaption class="oj ok ol nv nw om on bf b bg z dx">RStudio server with the local settings (screenshot by the author)</figcaption></figure><h1 id="ef45" class="oo op fq bf oq or os gq ot ou ov gt ow ox oy oz pa pb pc pd pe pf pg ph pi pj bk">Summary</h1><p id="8a30" class="pw-post-body-paragraph mm mn fq mo b go pk mq mr gr pl mt mu mv pm mx my mz pn nb nc nd po nf ng nh fj bk">This tutorial focuses on customizing the Rocker’s RStudio image with the <code class="cx nj nk nl nm b">docker run</code> command. We used the <code class="cx nj nk nl nm b">volume</code> argument to mount the local folder to the container working directory. This enables us to work inside a containerized environment and save our work locally. In addition, we used the volume argument to clone the local RStudio settings to the container. This makes the transition from the local environment to the containerized smoother. The command can become long and convoluted as we add and use more arguments. Once you have finalized your <code class="cx nj nk nl nm b">run</code> settings, the next step is to transition it into a YAML file using the <a class="af ni" href="https://docs.docker.com/compose/" rel="noopener ugc nofollow" target="_blank">Docker Compose</a>. Beyond the simplification of the launch process of the container, Docker Compose enables you to manage more complex scenarios, such as launching multiple containers.</p><h1 id="9eb2" class="oo op fq bf oq or os gq ot ou ov gt ow ox oy oz pa pb pc pd pe pf pg ph pi pj bk">Resources</h1><ul class=""><li id="3cee" class="mm mn fq mo b go pk mq mr gr pl mt mu mv pm mx my mz pn nb nc nd po nf ng nh nn no np bk">RStudio — <a class="af ni" href="https://posit.co/products/open-source/rstudio/" rel="noopener ugc nofollow" target="_blank">https://posit.co/products/open-source/rstudio/</a></li><li id="b3fe" class="mm mn fq mo b go nq mq mr gr nr mt mu mv ns mx my mz nt nb nc nd nu nf ng nh nn no np bk">The Rocker Project — <a class="af ni" href="https://rocker-project.org/" rel="noopener ugc nofollow" target="_blank">https://rocker-project.org/</a></li><li id="d550" class="mm mn fq mo b go nq mq mr gr nr mt mu mv ns mx my mz nt nb nc nd nu nf ng nh nn no np bk">Docker Hub — <a class="af ni" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com/</a></li></ul></div></div></div></div>    
</body>
</html>