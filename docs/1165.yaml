- en: Reducing the Size of Docker Images Serving Large Language Models (part 2)
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 减少 Docker 镜像大小（大型语言模型，第 2 部分）
- en: 原文：[https://towardsdatascience.com/reducing-the-size-of-docker-images-serving-large-language-models-part-2-b7226a0b6514?source=collection_archive---------11-----------------------#2024-05-08](https://towardsdatascience.com/reducing-the-size-of-docker-images-serving-large-language-models-part-2-b7226a0b6514?source=collection_archive---------11-----------------------#2024-05-08)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/reducing-the-size-of-docker-images-serving-large-language-models-part-2-b7226a0b6514?source=collection_archive---------11-----------------------#2024-05-08](https://towardsdatascience.com/reducing-the-size-of-docker-images-serving-large-language-models-part-2-b7226a0b6514?source=collection_archive---------11-----------------------#2024-05-08)
- en: How to reduce the size of a “small” Docker image by another 10%
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 如何再将“较小”的 Docker 镜像大小减少 10%
- en: '[](https://czuk.medium.com/?source=post_page---byline--b7226a0b6514--------------------------------)[![Michał
    Marcińczuk, Ph.D.](../Images/74fb7b0099084be3f7a35a149471ffbd.png)](https://czuk.medium.com/?source=post_page---byline--b7226a0b6514--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--b7226a0b6514--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--b7226a0b6514--------------------------------)
    [Michał Marcińczuk, Ph.D.](https://czuk.medium.com/?source=post_page---byline--b7226a0b6514--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://czuk.medium.com/?source=post_page---byline--b7226a0b6514--------------------------------)[![Michał
    Marcińczuk, Ph.D.](../Images/74fb7b0099084be3f7a35a149471ffbd.png)](https://czuk.medium.com/?source=post_page---byline--b7226a0b6514--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--b7226a0b6514--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--b7226a0b6514--------------------------------)
    [Michał Marcińczuk 博士](https://czuk.medium.com/?source=post_page---byline--b7226a0b6514--------------------------------)'
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--b7226a0b6514--------------------------------)
    ·7 min read·May 8, 2024
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·发表于 [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--b7226a0b6514--------------------------------)
    ·阅读时间 7 分钟·2024 年 5 月 8 日
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/627df8a3f69fdf970f463034b531d664.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/627df8a3f69fdf970f463034b531d664.png)'
- en: 'Generated by Runway for the prompt: There are two containers on board the ship,
    one large and the other small. They are bright, vivid, and realistic in color.'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 由 Runway 为以下提示生成：船上有两个容器，一个大容器和一个小容器。它们的颜色明亮、鲜艳且真实。
- en: Introduction
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 介绍
- en: This is a continuation of the topic of reducing the size of Docker images serving
    large language models. [In my previous story](/reducing-the-size-of-docker-images-serving-llm-models-b70ee66e5a76)
    [1], I presented how to reduce the size of a docker image model **from 7 GB to
    under 700 MB**. The solution eliminated heavy libraries like CUDA, cuDNN, cuBLAS,
    torch, and triton. It was possible by converting and quantizing the model to the
    ONNX format and using `onnxruntime` with CPU instead of the `torch` with GPU.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 这是关于减少用于大型语言模型的 Docker 镜像大小话题的延续。[在我之前的文章](/reducing-the-size-of-docker-images-serving-llm-models-b70ee66e5a76)
    [1]中，我展示了如何将 Docker 镜像模型的大小**从 7 GB 减少到 700 MB 以下**。该解决方案通过去除像 CUDA、cuDNN、cuBLAS、torch
    和 triton 等重量级库来实现。通过将模型转换并量化为 ONNX 格式，并使用 CPU 版本的 `onnxruntime` 替代 GPU 版本的 `torch`，实现了这一目标。
- en: In this story, I present how to reduce the size of the target image further
    by another **10%**. This might seem like overkill, as 700 MB is already a relatively
    small image. However, the techniques presented here can provide a deeper look
    into the docker image serving a language model. They can help to understand what
    components are required to run the model and see that there might be some lighter
    alternatives.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在本文中，我将展示如何进一步将目标镜像的大小减少**10%**。这看起来可能有些过头，因为 700 MB 已经是一个相对较小的镜像。然而，本文介绍的技术可以更深入地了解服务语言模型的
    Docker 镜像。它们有助于理解运行模型所需的组件，并发现可能存在一些更轻量的替代方案。
- en: 'Scripts and resources used in this story are also available on GitHub [2]:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 本文中使用的脚本和资源也可在 GitHub 上找到 [2]：
