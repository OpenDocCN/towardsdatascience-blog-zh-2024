- en: Optimising Non-Linear Treatment Effects in Pricing and Promotions
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä¼˜åŒ–å®šä»·å’Œä¿ƒé”€ä¸­çš„éçº¿æ€§å¤„ç†æ•ˆåº”
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/optimising-non-linear-treatment-effects-in-pricing-and-promotions-011ce140d180?source=collection_archive---------2-----------------------#2024-05-24](https://towardsdatascience.com/optimising-non-linear-treatment-effects-in-pricing-and-promotions-011ce140d180?source=collection_archive---------2-----------------------#2024-05-24)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/optimising-non-linear-treatment-effects-in-pricing-and-promotions-011ce140d180?source=collection_archive---------2-----------------------#2024-05-24](https://towardsdatascience.com/optimising-non-linear-treatment-effects-in-pricing-and-promotions-011ce140d180?source=collection_archive---------2-----------------------#2024-05-24)
- en: Causal AI, exploring the integration of causal reasoning into machine learning
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å› æœAIï¼Œæ¢ç´¢å› æœæ¨ç†ä¸æœºå™¨å­¦ä¹ çš„ç»“åˆ
- en: '[](https://medium.com/@raz1470?source=post_page---byline--011ce140d180--------------------------------)[![Ryan
    O''Sullivan](../Images/7cd161d38d67d2c0b7da2d8f3e7d33fe.png)](https://medium.com/@raz1470?source=post_page---byline--011ce140d180--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--011ce140d180--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--011ce140d180--------------------------------)
    [Ryan O''Sullivan](https://medium.com/@raz1470?source=post_page---byline--011ce140d180--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@raz1470?source=post_page---byline--011ce140d180--------------------------------)[![Ryan
    O''Sullivan](../Images/7cd161d38d67d2c0b7da2d8f3e7d33fe.png)](https://medium.com/@raz1470?source=post_page---byline--011ce140d180--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--011ce140d180--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--011ce140d180--------------------------------)
    [Ryan O''Sullivan](https://medium.com/@raz1470?source=post_page---byline--011ce140d180--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--011ce140d180--------------------------------)
    Â·12 min readÂ·May 24, 2024
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº[Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--011ce140d180--------------------------------)
    Â·12åˆ†é’Ÿé˜…è¯»Â·2024å¹´5æœˆ24æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/10380a5d9fbe3aded646019e930eb6a1.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/10380a5d9fbe3aded646019e930eb6a1.png)'
- en: Photo by [Ernest Ojeh](https://unsplash.com/@namzo?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±[Ernest Ojeh](https://unsplash.com/@namzo?utm_source=medium&utm_medium=referral)æ‹æ‘„ï¼Œ[å›¾ç‰‡æ¥æºäºUnsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: What is this series of articles about?
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è¿™ç³»åˆ—æ–‡ç« è®²äº†ä»€ä¹ˆï¼Ÿ
- en: Welcome to my series on Causal AI, where we will explore the integration of
    causal reasoning into machine learning models. Expect to explore a number of practical
    applications across different business contexts.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: æ¬¢è¿æ¥åˆ°æˆ‘çš„å› æœAIç³»åˆ—æ–‡ç« ï¼Œåœ¨è¿™é‡Œæˆ‘ä»¬å°†æ¢ç´¢å› æœæ¨ç†ä¸æœºå™¨å­¦ä¹ æ¨¡å‹çš„ç»“åˆã€‚ä½ å°†çœ‹åˆ°å¤šä¸ªä¸åŒä¸šåŠ¡æƒ…å¢ƒä¸‹çš„å®é™…åº”ç”¨ã€‚
- en: In the last article we covered *using Double Machine Learning and Linear Programming
    to optimise treatment strategies*. This time we will continue with the theme of
    optimisation exploring *optimising non-linear treatment effects in Pricing & Promotions*.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä¸Šä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬è®¨è®ºäº†*ä½¿ç”¨åŒé‡æœºå™¨å­¦ä¹ å’Œçº¿æ€§è§„åˆ’æ¥ä¼˜åŒ–å¤„ç†ç­–ç•¥*ã€‚è¿™æ¬¡æˆ‘ä»¬å°†ç»§ç»­ä¼˜åŒ–çš„ä¸»é¢˜ï¼Œæ¢è®¨*ä¼˜åŒ–å®šä»·ä¸ä¿ƒé”€ä¸­çš„éçº¿æ€§å¤„ç†æ•ˆåº”*ã€‚
- en: 'If you missed the last article on Double Machine Learning and Linear Programming,
    check it out here:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ é”™è¿‡äº†ä¸Šä¸€ç¯‡å…³äºåŒé‡æœºå™¨å­¦ä¹ å’Œçº¿æ€§è§„åˆ’çš„æ–‡ç« ï¼Œå¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ï¼š
- en: '[](/using-double-machine-learning-and-linear-programming-to-optimise-treatment-strategies-920c20a29553?source=post_page-----011ce140d180--------------------------------)
    [## Using Double Machine Learning and Linear Programming to optimise treatment
    strategies'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/using-double-machine-learning-and-linear-programming-to-optimise-treatment-strategies-920c20a29553?source=post_page-----011ce140d180--------------------------------)
    [## ä½¿ç”¨åŒé‡æœºå™¨å­¦ä¹ å’Œçº¿æ€§è§„åˆ’ä¼˜åŒ–å¤„ç†ç­–ç•¥'
- en: Causal AI, exploring the integration of causal reasoning into machine learning
  id: totrans-13
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: å› æœAIï¼Œæ¢ç´¢å› æœæ¨ç†ä¸æœºå™¨å­¦ä¹ çš„ç»“åˆ
- en: towardsdatascience.com](/using-double-machine-learning-and-linear-programming-to-optimise-treatment-strategies-920c20a29553?source=post_page-----011ce140d180--------------------------------)
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/using-double-machine-learning-and-linear-programming-to-optimise-treatment-strategies-920c20a29553?source=post_page-----011ce140d180--------------------------------)
- en: Introduction
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä»‹ç»
- en: This article will showcase how we can optimise non-linear treatment effects
    in pricing (but the ideas can also be applied across marketing and other domains
    too).
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æ–‡å°†å±•ç¤ºæˆ‘ä»¬å¦‚ä½•ä¼˜åŒ–å®šä»·ä¸­çš„éçº¿æ€§å¤„ç†æ•ˆåº”ï¼ˆä½†è¿™äº›ç†å¿µä¹Ÿå¯ä»¥åº”ç”¨äºå¸‚åœºè¥é”€å’Œå…¶ä»–é¢†åŸŸï¼‰ã€‚
- en: '**In this article I will help you understand:**'
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: '**åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘å°†å¸®åŠ©ä½ ç†è§£ï¼š**'
- en: Why is it common to have non-linear treatment effects in pricing?
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸ºä»€ä¹ˆåœ¨å®šä»·ä¸­éçº¿æ€§å¤„ç†æ•ˆåº”å¦‚æ­¤å¸¸è§ï¼Ÿ
- en: What tools from our Causal AI toolbox are suitable for estimating non-linear
    treatment effects?
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„å› æœäººå·¥æ™ºèƒ½å·¥å…·ç®±ä¸­æœ‰å“ªäº›å·¥å…·é€‚ç”¨äºä¼°ç®—éçº¿æ€§å¤„ç†æ•ˆåº”ï¼Ÿ
- en: How can non-linear programming be used to optimise pricing?
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: éçº¿æ€§ç¼–ç¨‹å¦‚ä½•ç”¨äºä¼˜åŒ–å®šä»·ï¼Ÿ
- en: A worked case study in Python working through how we can combine our Causal
    AI toolbox and non-linear programming to optimise pricing budgets.
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªä½¿ç”¨Pythonçš„æ¡ˆä¾‹ç ”ç©¶ï¼Œå±•ç¤ºäº†æˆ‘ä»¬å¦‚ä½•ç»“åˆå› æœäººå·¥æ™ºèƒ½å·¥å…·ç®±å’Œéçº¿æ€§ç¼–ç¨‹æ¥ä¼˜åŒ–å®šä»·é¢„ç®—ã€‚
- en: 'The full notebook can be found here:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: å®Œæ•´çš„ç¬”è®°æœ¬å¯ä»¥åœ¨è¿™é‡Œæ‰¾åˆ°ï¼š
- en: '[](https://github.com/raz1470/causal_ai/blob/main/notebooks/using%20dml%20and%20lp%20to%20optimise%20treatment%20strategies.ipynb?source=post_page-----011ce140d180--------------------------------)
    [## causal_ai/notebooks/using dml and lp to optimise treatment strategies.ipynb
    at main Â·â€¦'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://github.com/raz1470/causal_ai/blob/main/notebooks/using%20dml%20and%20lp%20to%20optimise%20treatment%20strategies.ipynb?source=post_page-----011ce140d180--------------------------------)
    [## causal_ai/notebooks/using dml and lp to optimise treatment strategies.ipynb
    at main Â·â€¦'
- en: This project introduces Causal AI and how it can drive business value. - causal_ai/notebooks/using
    dml and lp toâ€¦
  id: totrans-24
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: æœ¬é¡¹ç›®ä»‹ç»äº†å› æœäººå·¥æ™ºèƒ½ï¼ˆCausal AIï¼‰åŠå…¶å¦‚ä½•æ¨åŠ¨ä¸šåŠ¡ä»·å€¼ã€‚- causal_ai/notebooks/using dml and lp toâ€¦
- en: github.com](https://github.com/raz1470/causal_ai/blob/main/notebooks/using%20dml%20and%20lp%20to%20optimise%20treatment%20strategies.ipynb?source=post_page-----011ce140d180--------------------------------)
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: github.com](https://github.com/raz1470/causal_ai/blob/main/notebooks/using%20dml%20and%20lp%20to%20optimise%20treatment%20strategies.ipynb?source=post_page-----011ce140d180--------------------------------)
- en: Why is it common to have non-linear treatment effects in pricing?
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä¸ºä»€ä¹ˆåœ¨å®šä»·ä¸­éçº¿æ€§å¤„ç†æ•ˆåº”å¦‚æ­¤å¸¸è§ï¼Ÿ
- en: Diminishing returns
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: é€’å‡æ”¶ç›Š
- en: Letâ€™s take the example of a retailer adjusting the price of a product. Initially
    lowering the price might lead to a significant increase in sales. However, as
    they continue to lower the price, the increase in sales may start to plateau.
    We call this diminishing returns. As illustrated below, the effect of diminishing
    returns is generally non-linear.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä»¥é›¶å”®å•†è°ƒæ•´äº§å“ä»·æ ¼ä¸ºä¾‹ã€‚æœ€åˆï¼Œé™ä½ä»·æ ¼å¯èƒ½ä¼šå¯¼è‡´é”€å”®é‡æ˜¾è‘—å¢åŠ ã€‚ç„¶è€Œï¼Œéšç€ä»·æ ¼ç»§ç»­é™ä½ï¼Œé”€å”®çš„å¢é•¿å¯èƒ½ä¼šå¼€å§‹è¶‹äºå¹³ç¨³ã€‚æˆ‘ä»¬ç§°ä¹‹ä¸ºé€’å‡æ”¶ç›Šã€‚å¦‚ä¸‹é¢æ‰€ç¤ºï¼Œé€’å‡æ”¶ç›Šçš„æ•ˆæœé€šå¸¸æ˜¯éçº¿æ€§çš„ã€‚
- en: '![](../Images/00d137dc0252c7fe3a474395358fd7c8.png)'
  id: totrans-29
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/00d137dc0252c7fe3a474395358fd7c8.png)'
- en: User generated image
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: ç”¨æˆ·ç”Ÿæˆçš„å›¾ç‰‡
- en: 'Diminishing returns can be observed across various fields beyond pricing. Some
    common examples are:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: é€’å‡æ”¶ç›Šå¯ä»¥åœ¨å®šä»·ä¹‹å¤–çš„å¤šä¸ªé¢†åŸŸè§‚å¯Ÿåˆ°ã€‚ä¸€äº›å¸¸è§çš„ä¾‹å­åŒ…æ‹¬ï¼š
- en: Marketing â€” Increasing social media spend can increase customer acquisition,
    but as time goes on it becomes more difficult to target new, untapped audiences.
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è¥é”€ â€” å¢åŠ ç¤¾äº¤åª’ä½“æŠ•å…¥å¯ä»¥æé«˜å®¢æˆ·è·å–ï¼Œä½†éšç€æ—¶é—´çš„æ¨ç§»ï¼Œç„å‡†æ–°çš„ã€æœªå¼€å‘çš„å—ä¼—ä¼šå˜å¾—è¶Šæ¥è¶Šå›°éš¾ã€‚
- en: Farming â€” Adding fertilizer to a field can increase crop yield significantly
    initially, but this effect will very quickly start to diminish.
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å†œä¸š â€” å‘ç”°åœ°æ·»åŠ è‚¥æ–™æœ€åˆå¯ä»¥æ˜¾è‘—æé«˜ä½œç‰©äº§é‡ï¼Œä½†è¿™ç§æ•ˆæœå¾ˆå¿«å°±ä¼šå¼€å§‹é€’å‡ã€‚
- en: Manufacturing â€” Adding more workers to a production process will improve efficiencies,
    but each additional worker may contribute less to the overall output.
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åˆ¶é€  â€” å‘ç”Ÿäº§è¿‡ç¨‹ä¸­æ·»åŠ æ›´å¤šå·¥äººå°†æé«˜æ•ˆç‡ï¼Œä½†æ¯å¢åŠ ä¸€åå·¥äººå¯¹æ•´ä½“äº§å‡ºçš„è´¡çŒ®å¯èƒ½ä¼šå‡å°‘ã€‚
- en: This makes me start to wonder, if diminishing returns are so common, then which
    techniques from our Causal AI toolbox are capable of handling this?
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™è®©æˆ‘å¼€å§‹æ€è€ƒï¼Œå¦‚æœé€’å‡æ”¶ç›Šå¦‚æ­¤å¸¸è§ï¼Œé‚£ä¹ˆæˆ‘ä»¬çš„å› æœäººå·¥æ™ºèƒ½å·¥å…·ç®±ä¸­æœ‰å“ªäº›æŠ€æœ¯å¯ä»¥åº”å¯¹è¿™ä¸€é—®é¢˜ï¼Ÿ
- en: What methods from our Causal AI toolbox are suitable for estimating non-linear
    treatment effects?
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„å› æœäººå·¥æ™ºèƒ½å·¥å…·ç®±ä¸­æœ‰å“ªäº›æ–¹æ³•é€‚åˆä¼°ç®—éçº¿æ€§å¤„ç†æ•ˆåº”ï¼Ÿ
- en: Toolbox
  id: totrans-37
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å·¥å…·ç®±
- en: 'There are two key questions which we will ask to help us identify what methods
    from our Causal AI toolbox are suitable for our Pricing problem:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†æå‡ºä¸¤ä¸ªå…³é”®é—®é¢˜ï¼Œå¸®åŠ©æˆ‘ä»¬è¯†åˆ«å“ªäº›å› æœäººå·¥æ™ºèƒ½å·¥å…·ç®±ä¸­çš„æ–¹æ³•é€‚åˆè§£å†³å®šä»·é—®é¢˜ï¼š
- en: Can it handle continuous treatments?
  id: totrans-39
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å®ƒèƒ½å¤„ç†è¿ç»­æ€§å¤„ç†å—ï¼Ÿ
- en: Can it capture non-linear treatment effects?
  id: totrans-40
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å®ƒèƒ½æ•æ‰éçº¿æ€§å¤„ç†æ•ˆåº”å—ï¼Ÿ
- en: 'Below we can see a summary of how suitable each method is:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ˜¯æˆ‘ä»¬å¦‚ä½•è¯„ä¼°æ¯ç§æ–¹æ³•é€‚ç”¨æ€§çš„æ€»ç»“ï¼š
- en: Propensity score matching (PSM) â€” Treatment needs to be binary âŒ
  id: totrans-42
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å€¾å‘å¾—åˆ†åŒ¹é…ï¼ˆPSMï¼‰â€” å¤„ç†éœ€è¦æ˜¯äºŒå…ƒçš„ âŒ
- en: Inverse-propensity score matching (IPSM) â€” Treatment needs to be binary âŒ
  id: totrans-43
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å€¾å‘å¾—åˆ†é€†å‘åŒ¹é…ï¼ˆIPSMï¼‰â€” å¤„ç†éœ€è¦æ˜¯äºŒå…ƒçš„ âŒ
- en: T-Learner â€” Treatment needs to be binary âŒ
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Tå­¦ä¹ è€…ï¼ˆT-Learnerï¼‰â€” å¤„ç†éœ€è¦æ˜¯äºŒå…ƒçš„ âŒ
- en: Double Machine Learning (DML) â€” Treatment effect is linear âŒ
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åŒé‡æœºå™¨å­¦ä¹ ï¼ˆDMLï¼‰â€” å¤„ç†æ•ˆåº”æ˜¯çº¿æ€§çš„ âŒ
- en: Doubly-Robust Learner (DR) â€” Treatment needs to be binary âŒ
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åŒé‡é²æ£’å­¦ä¹ è€…ï¼ˆDRï¼‰â€” å¤„ç†éœ€è¦æ˜¯äºŒå…ƒçš„ âŒ
- en: S-Learner â€” Can handle continuous treatments and non-linear relationships between
    the treatment and outcome if an appropriate machine learning algorithm (e.g. gradient
    boosting) is used ğŸ’š
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: S-Learner â€” å¦‚æœä½¿ç”¨é€‚å½“çš„æœºå™¨å­¦ä¹ ç®—æ³•ï¼ˆä¾‹å¦‚æ¢¯åº¦æå‡ï¼‰ï¼Œå®ƒå¯ä»¥å¤„ç†è¿ç»­å¤„ç†å’Œå¤„ç†ä¸ç»“æœä¹‹é—´çš„éçº¿æ€§å…³ç³»ğŸ’š
- en: S-Learner
  id: totrans-48
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: S-Learner
- en: The â€œSâ€ in S-Learner comes from it being a â€œsingle modelâ€. An arbitrary machine
    learning model is used to predict the outcome using the treatment, confounders
    and other covariates as features. This model is then used to estimate the difference
    between the potential outcomes under different treatment conditions (which gives
    us the treatment effect).
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: S-Learnerä¸­çš„â€œSâ€æ¥è‡ªäºå®ƒæ˜¯ä¸€ä¸ªâ€œå•ä¸€æ¨¡å‹â€ã€‚ä¸€ä¸ªä»»æ„çš„æœºå™¨å­¦ä¹ æ¨¡å‹è¢«ç”¨æ¥é¢„æµ‹ç»“æœï¼Œä½¿ç”¨å¤„ç†ã€æ··æ‚å› ç´ å’Œå…¶ä»–åå˜é‡ä½œä¸ºç‰¹å¾ã€‚è¿™ä¸ªæ¨¡å‹éšåè¢«ç”¨æ¥ä¼°è®¡åœ¨ä¸åŒå¤„ç†æ¡ä»¶ä¸‹æ½œåœ¨ç»“æœçš„å·®å¼‚ï¼ˆä»è€Œç»™æˆ‘ä»¬å¸¦æ¥å¤„ç†æ•ˆåº”ï¼‰ã€‚
- en: 'The are a number of benefits to the S-Learner:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: S-Learneræœ‰è®¸å¤šä¼˜ç‚¹ï¼š
- en: It can handle both binary and continuous treatments.
  id: totrans-51
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å®ƒå¯ä»¥å¤„ç†äºŒå…ƒå’Œè¿ç»­æ€§å¤„ç†ã€‚
- en: It can use any machine learning algorithm, giving us the flexibility to capture
    non-linear relationships for both the features and treatment.
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å®ƒå¯ä»¥ä½¿ç”¨ä»»ä½•æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œèµ‹äºˆæˆ‘ä»¬çµæ´»æ€§æ¥æ•æ‰ç‰¹å¾å’Œå¤„ç†ä¹‹é—´çš„éçº¿æ€§å…³ç³»ã€‚
- en: 'One word of caution: regularisation bias! Modern machine learning algorithms
    use regularisation to prevent overfitting â€” but this can be damaging to causal
    problems. Take the hyper-parameter *max features* from gradient boosting tree
    methods â€” in a number of trees, it is likely that the treatment wonâ€™t be included
    in the model. This will dampen the effect of the treatment.'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªè­¦å‘Šï¼šæ­£åˆ™åŒ–åå·®ï¼ç°ä»£æœºå™¨å­¦ä¹ ç®—æ³•ä½¿ç”¨æ­£åˆ™åŒ–æ¥é˜²æ­¢è¿‡æ‹Ÿåˆâ€”â€”ä½†è¿™å¯èƒ½å¯¹å› æœé—®é¢˜äº§ç”Ÿè´Ÿé¢å½±å“ã€‚ä»¥æ¢¯åº¦æå‡æ ‘æ–¹æ³•ä¸­çš„è¶…å‚æ•°*max features*ä¸ºä¾‹â€”â€”åœ¨å¤šä¸ªæ ‘ä¸­ï¼Œå¯èƒ½ä¼šå‡ºç°å¤„ç†æœªè¢«åŒ…å«åœ¨æ¨¡å‹ä¸­çš„æƒ…å†µã€‚è¿™ä¼šå‰Šå¼±å¤„ç†æ•ˆåº”ã€‚
- en: When using the S-Learner, I recommend thinking carefully about the regularisation
    parameters e.g. set *max features* to 1.0 (effectively switching off the feature
    regularisation).
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä½¿ç”¨S-Learneræ—¶ï¼Œæˆ‘å»ºè®®ä»”ç»†è€ƒè™‘æ­£åˆ™åŒ–å‚æ•°ï¼Œä¾‹å¦‚å°†*max features*è®¾ç½®ä¸º1.0ï¼ˆæœ‰æ•ˆåœ°å…³é—­ç‰¹å¾æ­£åˆ™åŒ–ï¼‰ã€‚
- en: How can non-linear programming be used to optimise pricing?
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å¦‚ä½•ä½¿ç”¨éçº¿æ€§ç¼–ç¨‹æ¥ä¼˜åŒ–å®šä»·ï¼Ÿ
- en: Price optimisation
  id: totrans-56
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä»·æ ¼ä¼˜åŒ–
- en: Letâ€™s say we have a number of products and we want to optimise their price given
    a set promotional budget. For each product we train an S-Learner (using gradient
    boosting) with the treatment set as discount level and the outcome set as total
    number of orders. Our S-Leaners output a complex model that can be used to estimate
    the effect of different discount levels. But how can we optimise the discount
    levels for each product?
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾æˆ‘ä»¬æœ‰å¤šç§äº§å“ï¼Œå¹¶ä¸”æƒ³è¦åœ¨ç»™å®šçš„ä¿ƒé”€é¢„ç®—ä¸‹ä¼˜åŒ–å®ƒä»¬çš„ä»·æ ¼ã€‚å¯¹äºæ¯ä¸ªäº§å“ï¼Œæˆ‘ä»¬è®­ç»ƒä¸€ä¸ªS-Learnerï¼ˆä½¿ç”¨æ¢¯åº¦æå‡ï¼‰ï¼Œå°†å¤„ç†è®¾ç½®ä¸ºæŠ˜æ‰£æ°´å¹³ï¼Œå°†ç»“æœè®¾ç½®ä¸ºæ€»è®¢å•æ•°ã€‚æˆ‘ä»¬çš„S-Learnerè¾“å‡ºä¸€ä¸ªå¤æ‚æ¨¡å‹ï¼Œå¯ä»¥ç”¨æ¥ä¼°è®¡ä¸åŒæŠ˜æ‰£æ°´å¹³çš„æ•ˆåº”ã€‚é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•ä¼˜åŒ–æ¯ä¸ªäº§å“çš„æŠ˜æ‰£æ°´å¹³å‘¢ï¼Ÿ
- en: Response Curves
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å“åº”æ›²çº¿
- en: Optimisation techniques such as linear (or even non-linear) programming rely
    on having a clear functional form of the response. Machine learning techniques
    like random forests and gradient boosting donâ€™t give us this (unlike say linear
    regression). However, a response curve can translate the outputs of an S-Learner
    into a comprehensive form, showing how the outcome responds to the treatment.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: ä¼˜åŒ–æŠ€æœ¯ï¼Œå¦‚çº¿æ€§ï¼ˆç”šè‡³éçº¿æ€§ï¼‰ç¼–ç¨‹ï¼Œä¾èµ–äºå“åº”çš„æ¸…æ™°å‡½æ•°å½¢å¼ã€‚åƒéšæœºæ£®æ—å’Œæ¢¯åº¦æå‡è¿™æ ·çš„æœºå™¨å­¦ä¹ æŠ€æœ¯å¹¶ä¸ä¼šç»™æˆ‘ä»¬æä¾›è¿™ä¸ªï¼ˆä¸çº¿æ€§å›å½’ä¸åŒï¼‰ã€‚ç„¶è€Œï¼Œå“åº”æ›²çº¿å¯ä»¥å°†S-Learnerçš„è¾“å‡ºè½¬åŒ–ä¸ºä¸€ç§ç»¼åˆå½¢å¼ï¼Œå±•ç¤ºç»“æœå¦‚ä½•å“åº”å¤„ç†ã€‚
- en: If you canâ€™t quite picture how we can create a response curve yet, donâ€™t worry
    we will cover this in the Python case study!
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ è¿˜ä¸å¤ªèƒ½æƒ³è±¡æˆ‘ä»¬å¦‚ä½•åˆ›å»ºå“åº”æ›²çº¿ï¼Œåˆ«æ‹…å¿ƒï¼Œæˆ‘ä»¬å°†åœ¨Pythonæ¡ˆä¾‹ç ”ç©¶ä¸­è¯¦ç»†è®²è§£ï¼
- en: Michaelis-Menton equation
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç±³å“ˆåˆ©æ–¯-é—¨å†œæ–¹ç¨‹
- en: There are several equations we could use to map the S-Learner to a response
    curve. One of them is the Micaelis-Menton equation.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰å‡ ç§æ–¹ç¨‹å¯ä»¥ç”¨æ¥å°†S-Learneræ˜ å°„åˆ°å“åº”æ›²çº¿ã€‚å…¶ä¸­ä¹‹ä¸€å°±æ˜¯ç±³å“ˆåˆ©æ–¯-é—¨å†œæ–¹ç¨‹ã€‚
- en: The Micaelis-Menton equation is commonly used in enzyme kinetics (the study
    of the rates at which enzymes catalyse chemical reactions) to describe the rate
    of enzymatic reactions.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: ç±³å“ˆåˆ©æ–¯-é—¨å†œæ–¹ç¨‹é€šå¸¸ç”¨äºé…¶åŠ¨åŠ›å­¦ï¼ˆç ”ç©¶é…¶å‚¬åŒ–åŒ–å­¦ååº”çš„é€Ÿç‡ï¼‰ä¸­ï¼Œç”¨æ¥æè¿°é…¶ä¿ƒååº”çš„é€Ÿç‡ã€‚
- en: '![](../Images/103dde2faf7a1ea73b0d3fe4dd0b2798.png)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/103dde2faf7a1ea73b0d3fe4dd0b2798.png)'
- en: User generated image
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: ç”¨æˆ·ç”Ÿæˆçš„å›¾ç‰‡
- en: v â€” is the reaction velocity (this is our transformed response, so total number
    of orders in our pricing example)
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: v â€” æ˜¯ååº”é€Ÿåº¦ï¼ˆè¿™æ˜¯æˆ‘ä»¬è½¬åŒ–åçš„å“åº”ï¼Œæ‰€ä»¥åœ¨æˆ‘ä»¬çš„å®šä»·ç¤ºä¾‹ä¸­æ˜¯è®¢å•çš„æ€»æ•°ï¼‰
- en: Vmax â€” is the maximum reaction velocity (we will call this alpha, a parameter
    we need to learn)
  id: totrans-67
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Vmax â€” æ˜¯æœ€å¤§ååº”é€Ÿåº¦ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸ºalphaï¼Œè¿™æ˜¯ä¸€ä¸ªæˆ‘ä»¬éœ€è¦å­¦ä¹ çš„å‚æ•°ï¼‰
- en: Km â€” is the substrate concentration (we will call this lambda, a parameter we
    need to learn)
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Km â€” æ˜¯åº•ç‰©æµ“åº¦ï¼ˆæˆ‘ä»¬ç§°ä¹‹ä¸ºlambdaï¼Œè¿™æ˜¯ä¸€ä¸ªæˆ‘ä»¬éœ€è¦å­¦ä¹ çš„å‚æ•°ï¼‰
- en: S â€” is the Michaelis constant (this is our treatment, so discount level in our
    pricing example)
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: S â€” æ˜¯è¿ˆå…‹åˆ©æ–¯å¸¸æ•°ï¼ˆè¿™æ˜¯æˆ‘ä»¬çš„å¤„ç†å˜é‡ï¼Œæ‰€ä»¥åœ¨å®šä»·ç¤ºä¾‹ä¸­æ˜¯æŠ˜æ‰£æ°´å¹³ï¼‰
- en: 'Its principles can also be applied to other fields, especially when dealing
    with systems where increasing input does not proportionally increase output due
    to saturation factors. Below we visualise how different values of alpha and lamda
    effect the curve:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒçš„åŸç†ä¹Ÿå¯ä»¥åº”ç”¨äºå…¶ä»–é¢†åŸŸï¼Œç‰¹åˆ«æ˜¯åœ¨å¤„ç†é‚£äº›ç”±äºé¥±å’Œå› ç´ å¯¼è‡´è¾“å…¥å¢åŠ ä¸èƒ½æŒ‰æ¯”ä¾‹å¢åŠ è¾“å‡ºçš„ç³»ç»Ÿæ—¶ã€‚ä¸‹é¢æˆ‘ä»¬å±•ç¤ºä¸åŒçš„alphaå’Œlambdaå€¼å¦‚ä½•å½±å“æ›²çº¿ï¼š
- en: '[PRE0]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '![](../Images/339c252eb69c29a11f08f39d2b0e2cbd.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/339c252eb69c29a11f08f39d2b0e2cbd.png)'
- en: User generated image
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: ç”¨æˆ·ç”Ÿæˆçš„å›¾åƒ
- en: Once we have our response curves, next we can think about optimisation. The
    Micaelis-Menton gives us a non-linear function. Therefore non-linear programming
    is an appropriate choice.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€æ—¦æˆ‘ä»¬è·å¾—äº†å“åº”æ›²çº¿ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬å¯ä»¥è€ƒè™‘ä¼˜åŒ–é—®é¢˜ã€‚è¿ˆå…‹åˆ©æ–¯-å­Ÿä¸œæ–¹ç¨‹ç»™å‡ºäº†ä¸€ä¸ªéçº¿æ€§å‡½æ•°ã€‚å› æ­¤ï¼Œéçº¿æ€§è§„åˆ’æ˜¯ä¸€ä¸ªåˆé€‚çš„é€‰æ‹©ã€‚
- en: Non-linear programming
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: éçº¿æ€§è§„åˆ’
- en: We covered linear programming in the my last article. Non-linear programing
    is similar but the objective function and/or constraints are non-linear in nature.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ä¸­æˆ‘ä»¬ä»‹ç»äº†çº¿æ€§è§„åˆ’ã€‚éçº¿æ€§è§„åˆ’ç±»ä¼¼ï¼Œä½†ç›®æ ‡å‡½æ•°å’Œ/æˆ–çº¦æŸæ¡ä»¶æœ¬è´¨ä¸Šæ˜¯éçº¿æ€§çš„ã€‚
- en: Sequential Least Squares Programming (SLSQP) is an algorithm used for solving
    non-linear programming problems. It allows for both equality and inequality constraints
    making it a sensible choice for our use case.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: åºåˆ—æœ€å°äºŒä¹˜æ³•è§„åˆ’ï¼ˆSLSQPï¼‰æ˜¯ä¸€ç§ç”¨äºè§£å†³éçº¿æ€§è§„åˆ’é—®é¢˜çš„ç®—æ³•ã€‚å®ƒå…è®¸åŒæ—¶å¤„ç†ç­‰å¼çº¦æŸå’Œä¸ç­‰å¼çº¦æŸï¼Œå› æ­¤åœ¨æˆ‘ä»¬çš„ä½¿ç”¨åœºæ™¯ä¸­æ˜¯ä¸€ä¸ªåˆç†çš„é€‰æ‹©ã€‚
- en: Equality constraints e.g. Total promotional budget is equal to Â£100k
  id: totrans-78
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç­‰å¼çº¦æŸï¼Œä¾‹å¦‚æ€»ä¿ƒé”€é¢„ç®—ç­‰äºÂ£100k
- en: Inequality constraints e.g. Discount on each product between Â£1 and Â£10
  id: totrans-79
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸ç­‰å¼çº¦æŸï¼Œä¾‹å¦‚æ¯ä¸ªäº§å“çš„æŠ˜æ‰£åœ¨Â£1åˆ°Â£10ä¹‹é—´
- en: 'SciPy have an easy to use implementation of SLSQP:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: SciPy æä¾›äº†ä¸€ä¸ªæ˜“äºä½¿ç”¨çš„ SLSQP å®ç°ï¼š
- en: '[](https://docs.scipy.org/doc/scipy/reference/optimize.minimize-slsqp.html?source=post_page-----011ce140d180--------------------------------)
    [## minimize(method=''SLSQP'') - SciPy v1.13.0 Manual'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://docs.scipy.org/doc/scipy/reference/optimize.minimize-slsqp.html?source=post_page-----011ce140d180--------------------------------)
    [## minimize(method=''SLSQP'') - SciPy v1.13.0 Manual'
- en: If jac in ['2-point', '3-point', 'cs'] the relative step size to use for numerical
    approximation of jac. The absoluteâ€¦
  id: totrans-82
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: å¦‚æœjacåœ¨['2-point', '3-point', 'cs']ä¸­ï¼Œä½¿ç”¨ç›¸å¯¹æ­¥é•¿è¿›è¡Œæ•°å€¼è¿‘ä¼¼jacã€‚ç»å¯¹â€¦
- en: docs.scipy.org](https://docs.scipy.org/doc/scipy/reference/optimize.minimize-slsqp.html?source=post_page-----011ce140d180--------------------------------)
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '[docs.scipy.org](https://docs.scipy.org/doc/scipy/reference/optimize.minimize-slsqp.html?source=post_page-----011ce140d180--------------------------------)'
- en: Next we will illustrate how powerful the combination of the S-Learner, Micaelis-Menton
    equation and non-linear programing can be!
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†å±•ç¤ºS-Learnerã€è¿ˆå…‹åˆ©æ–¯-å­Ÿä¸œæ–¹ç¨‹å’Œéçº¿æ€§è§„åˆ’ç»“åˆçš„å¼ºå¤§å¨åŠ›ï¼
- en: Case study
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ¡ˆä¾‹ç ”ç©¶
- en: Background
  id: totrans-86
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: èƒŒæ™¯
- en: Historically the promotions teams have used their expert judgement to set the
    discount for their 3 top products. Given the current economic conditions, they
    are being forced to reduce their overall promotional budget by 20%. They turn
    to the Data Science team to advise how they can do this whilst minimising the
    loss in orders being placed.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: å†å²ä¸Šï¼Œä¿ƒé”€å›¢é˜Ÿä¸€ç›´ä¾é ä»–ä»¬çš„ä¸“å®¶åˆ¤æ–­æ¥ä¸ºä»–ä»¬çš„ä¸‰å¤§ä¸»æ‰“äº§å“è®¾ç½®æŠ˜æ‰£ã€‚è€ƒè™‘åˆ°å½“å‰çš„ç»æµçŠ¶å†µï¼Œä»–ä»¬è¢«è¿«å°†æ•´ä½“ä¿ƒé”€é¢„ç®—å‰Šå‡20%ã€‚äºæ˜¯ï¼Œä»–ä»¬æ±‚åŠ©äºæ•°æ®ç§‘å­¦å›¢é˜Ÿï¼Œå’¨è¯¢å¦‚ä½•åœ¨å‡å°‘è®¢å•é‡æŸå¤±çš„åŒæ—¶åšåˆ°è¿™ä¸€ç‚¹ã€‚
- en: Data generating process
  id: totrans-88
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ•°æ®ç”Ÿæˆè¿‡ç¨‹
- en: 'We set up a data generating process with the following characteristics:'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è®¾ç½®äº†ä¸€ä¸ªå…·æœ‰ä»¥ä¸‹ç‰¹ç‚¹çš„æ•°æ®ç”Ÿæˆè¿‡ç¨‹ï¼š
- en: 4 features with a complex relationship with the number of orders
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 4ä¸ªä¸è®¢å•æ•°é‡æœ‰å¤æ‚å…³ç³»çš„ç‰¹å¾
- en: A treatment effect which follows the Micaelis-Menton equation
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªéµå¾ªè¿ˆå…‹åˆ©æ–¯-å­Ÿä¸œæ–¹ç¨‹çš„å¤„ç†æ•ˆæœ
- en: '[PRE1]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The X features are confounding variables:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: Xç‰¹å¾æ˜¯æ··æ‚å˜é‡ï¼š
- en: '![](../Images/070ded84b57d5cde15c71bc2917b0210.png)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/070ded84b57d5cde15c71bc2917b0210.png)'
- en: User generated image
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: ç”¨æˆ·ç”Ÿæˆçš„å›¾åƒ
- en: 'We use the data generator to create samples for 3 products, each with a different
    treatment effect:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä½¿ç”¨æ•°æ®ç”Ÿæˆå™¨ä¸ºä¸‰ä¸ªäº§å“åˆ›å»ºæ ·æœ¬ï¼Œæ¯ä¸ªäº§å“æœ‰ä¸åŒçš„å¤„ç†æ•ˆæœï¼š
- en: '[PRE2]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: S-Learner
  id: totrans-98
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: S-Learner
- en: 'We can train an S-Learner by using any machine learning algorithm and including
    the treatment and covariates as features:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨ä»»ä½•æœºå™¨å­¦ä¹ ç®—æ³•ï¼Œå¹¶å°†å¤„ç†å’Œåå˜é‡ä½œä¸ºç‰¹å¾æ¥è®­ç»ƒä¸€ä¸ªS-Learnerï¼š
- en: '[PRE3]'
  id: totrans-100
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'We train an S-Learner for each product:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä¸ºæ¯ä¸ªäº§å“è®­ç»ƒä¸€ä¸ªS-Learnerï¼š
- en: '[PRE4]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'At the moment this is just a prediction model â€” Below we visualise how well
    it does at this job:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: ç›®å‰è¿™åªæ˜¯ä¸€ä¸ªé¢„æµ‹æ¨¡å‹â€”â€”ä¸‹é¢æˆ‘ä»¬å¯è§†åŒ–å®ƒåœ¨è¿™é¡¹å·¥ä½œä¸­çš„è¡¨ç°ï¼š
- en: '![](../Images/633b5e5ab9af4aa5319a9f6e195fe89e.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/633b5e5ab9af4aa5319a9f6e195fe89e.png)'
- en: User generated image
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: ç”¨æˆ·ç”Ÿæˆçš„å›¾åƒ
- en: Extracting the treatment effects
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æå–å¤„ç†æ•ˆæœ
- en: Next we will use our S-learner to extract the treatment effect for the full
    range of treatment values (discount amount) whilst holding other features to their
    mean value.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥æˆ‘ä»¬å°†ä½¿ç”¨æˆ‘ä»¬çš„S-learneræ¥æå–æ•´ä¸ªå¤„ç†å€¼èŒƒå›´ï¼ˆæŠ˜æ‰£é‡‘é¢ï¼‰çš„å¤„ç†æ•ˆæœï¼ŒåŒæ—¶å°†å…¶ä»–ç‰¹å¾ä¿æŒåœ¨å…¶å¹³å‡å€¼ã€‚
- en: 'We start by extracting the expected outcome (number of orders) for the full
    range of treatment values:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬é¦–å…ˆæå–æ•´ä¸ªå¤„ç†å€¼èŒƒå›´çš„é¢„æœŸç»“æœï¼ˆè®¢å•æ•°é‡ï¼‰ï¼š
- en: '[PRE5]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'We do this for each product:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯¹æ¯ä¸ªäº§å“æ‰§è¡Œæ­¤æ“ä½œï¼š
- en: '[PRE6]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'We then extract the expected outcome (number of orders) when the treatment
    is set to 0:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åæˆ‘ä»¬æå–å½“å¤„ç†è®¾ç½®ä¸º0æ—¶çš„é¢„æœŸç»“æœï¼ˆè®¢å•æ•°é‡ï¼‰ï¼š
- en: '[PRE7]'
  id: totrans-113
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Again, we do this for each product:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: å†æ¬¡ï¼Œæˆ‘ä»¬å¯¹æ¯ä¸ªäº§å“æ‰§è¡Œæ­¤æ“ä½œï¼š
- en: '[PRE8]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'We can now calculate the treatment effect for the full range of treatment values:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç°åœ¨å¯ä»¥è®¡ç®—æ•´ä¸ªå¤„ç†å€¼èŒƒå›´çš„å¤„ç†æ•ˆæœï¼š
- en: '[PRE9]'
  id: totrans-117
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: 'When we compare this to the actual treatment effect which we saved from our
    data-generator, we can see the S-Learner is very effective at estimating the treatment
    effects for the full range of treatment values:'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æˆ‘ä»¬å°†å…¶ä¸ä»æ•°æ®ç”Ÿæˆå™¨ä¿å­˜çš„å®é™…å¤„ç†æ•ˆæœè¿›è¡Œæ¯”è¾ƒæ—¶ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°S-Learneråœ¨ä¼°è®¡æ•´ä¸ªå¤„ç†å€¼èŒƒå›´çš„å¤„ç†æ•ˆæœæ–¹é¢éå¸¸æœ‰æ•ˆï¼š
- en: '![](../Images/b97c0b95c35e52cf9b9fac26fa824876.png)'
  id: totrans-119
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b97c0b95c35e52cf9b9fac26fa824876.png)'
- en: User generated image
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: ç”¨æˆ·ç”Ÿæˆçš„å›¾åƒ
- en: Now we have this treatment effect data, we can use it to build response curves
    for each product.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬æ‹¥æœ‰äº†è¿™äº›å¤„ç†æ•ˆæœæ•°æ®ï¼Œå¯ä»¥ç”¨å®ƒä¸ºæ¯ä¸ªäº§å“æ„å»ºå“åº”æ›²çº¿ã€‚
- en: Michaelis-Menton
  id: totrans-122
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç±³æ°-å­Ÿä¸œæ–¹ç¨‹ï¼ˆMichaelis-Mentonï¼‰
- en: 'To build the response curves, we need a curve fitting tool. SciPy has a great
    implementation of one which we will use:'
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†æ„å»ºå“åº”æ›²çº¿ï¼Œæˆ‘ä»¬éœ€è¦ä¸€ä¸ªæ›²çº¿æ‹Ÿåˆå·¥å…·ã€‚SciPyæœ‰ä¸€ä¸ªå¾ˆå¥½çš„å®ç°ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨å®ƒï¼š
- en: '[](https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.curve_fit.html?source=post_page-----011ce140d180--------------------------------)
    [## scipy.optimize.curve_fit - SciPy v1.13.0 Manual'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.curve_fit.html?source=post_page-----011ce140d180--------------------------------)
    [## scipy.optimize.curve_fit - SciPy v1.13.0 æ‰‹å†Œ]'
- en: scipy.optimize. curve_fit ( f , xdata , ydata , , , , , bounds = (-inf, inf)
    , , , * , , , ** kwargs ) [source] Useâ€¦
  id: totrans-125
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: scipy.optimize. curve_fit ( f , xdata , ydata , , , , , bounds = (-inf, inf)
    , , , * , , , ** kwargs ) [source] ä½¿ç”¨â€¦
- en: docs.scipy.org](https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.curve_fit.html?source=post_page-----011ce140d180--------------------------------)
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: docs.scipy.org](https://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.curve_fit.html?source=post_page-----011ce140d180--------------------------------)
- en: 'We start by setting up the function that we want to learn:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬é¦–å…ˆè®¾ç½®æˆ‘ä»¬æƒ³è¦å­¦ä¹ çš„å‡½æ•°ï¼š
- en: '[PRE10]'
  id: totrans-128
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'We can then use curve_fit to learn the alpha and lambda parameters:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åæˆ‘ä»¬å¯ä»¥ä½¿ç”¨curve_fitæ¥å­¦ä¹ alphaå’Œlambdaå‚æ•°ï¼š
- en: '[PRE11]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'We do this for each product:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯¹æ¯ä¸ªäº§å“æ‰§è¡Œæ­¤æ“ä½œï¼š
- en: '[PRE12]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: 'We can now feed the learnt parameters into the michaelis menten function to
    help us visualise how well the curve fitting did:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç°åœ¨å¯ä»¥å°†å­¦ä¹ åˆ°çš„å‚æ•°è¾“å…¥åˆ°ç±³æ°å­Ÿä¸œæ–¹ç¨‹ä¸­ï¼Œå¸®åŠ©æˆ‘ä»¬å¯è§†åŒ–æ›²çº¿æ‹Ÿåˆçš„æ•ˆæœï¼š
- en: '[PRE13]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: We can see that the curve fitting did a great job!
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ›²çº¿æ‹Ÿåˆåšå¾—éå¸¸å¥½ï¼
- en: '![](../Images/fd743bbd492a4de4bf9bc40f0b9d8ad4.png)'
  id: totrans-136
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fd743bbd492a4de4bf9bc40f0b9d8ad4.png)'
- en: User generated image
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: ç”¨æˆ·ç”Ÿæˆçš„å›¾åƒ
- en: Now we have the alpha and lambda parameters for each product, we can start thinking
    about the non-linear optimisationâ€¦
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬æ‹¥æœ‰äº†æ¯ä¸ªäº§å“çš„alphaå’Œlambdaå‚æ•°ï¼Œæˆ‘ä»¬å¯ä»¥å¼€å§‹è€ƒè™‘éçº¿æ€§ä¼˜åŒ–â€¦â€¦
- en: Non-linear programming
  id: totrans-139
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: éçº¿æ€§ç¼–ç¨‹
- en: 'We start by setting collating all the required information for the optimisation:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬é¦–å…ˆå¼€å§‹æ”¶é›†æ‰€æœ‰ä¼˜åŒ–æ‰€éœ€çš„ä¿¡æ¯ï¼š
- en: A list of all the products
  id: totrans-141
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ‰€æœ‰äº§å“çš„åˆ—è¡¨
- en: The total promotional budget
  id: totrans-142
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ€»ä¿ƒé”€é¢„ç®—
- en: The budget ranges for each product
  id: totrans-143
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ¯ä¸ªäº§å“çš„é¢„ç®—èŒƒå›´
- en: The parameters for each product from the Michaelis Menten response curves
  id: totrans-144
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä»ç±³æ°-å­Ÿä¸œååº”æ›²çº¿ä¸­æå–çš„æ¯ä¸ªäº§å“çš„å‚æ•°
- en: '[PRE14]'
  id: totrans-145
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Next we set up the objective function â€” We want to maximise orders but as we
    are going to use a minimisation method, we return the negative of the sum of orders
    expected.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥æˆ‘ä»¬è®¾ç½®ç›®æ ‡å‡½æ•°â€”â€”æˆ‘ä»¬å¸Œæœ›æœ€å¤§åŒ–è®¢å•æ•°ï¼Œä½†ç”±äºæˆ‘ä»¬å°†ä½¿ç”¨æœ€å°åŒ–æ–¹æ³•ï¼Œå› æ­¤è¿”å›é¢„æœŸè®¢å•æ€»æ•°çš„è´Ÿå€¼ã€‚
- en: '[PRE15]'
  id: totrans-147
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: 'Finally we can run our optimisation to determine the optimal budget to allocate
    to each product:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åæˆ‘ä»¬å¯ä»¥è¿è¡Œä¼˜åŒ–ï¼Œç¡®å®šåˆ†é…ç»™æ¯ä¸ªäº§å“çš„æœ€ä¼˜é¢„ç®—ï¼š
- en: '[PRE16]'
  id: totrans-149
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'The output shows us what the optimal promotional budget is for each product:'
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: è¾“å‡ºå‘æˆ‘ä»¬å±•ç¤ºäº†æ¯ä¸ªäº§å“çš„æœ€ä¼˜ä¿ƒé”€é¢„ç®—ï¼š
- en: '![](../Images/7468ce2e35ed95ef3fdd0f6432967360.png)'
  id: totrans-151
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7468ce2e35ed95ef3fdd0f6432967360.png)'
- en: User generated image
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: ç”¨æˆ·ç”Ÿæˆçš„å›¾åƒ
- en: 'If you closely inspect the response curves, you will see that what the optimisation
    results are intuitive:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ ä»”ç»†æ£€æŸ¥å“åº”æ›²çº¿ï¼Œä½ ä¼šå‘ç°ä¼˜åŒ–ç»“æœæ˜¯ç›´è§‚çš„ï¼š
- en: Small decrease in the budget for product 1
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ç¨å¾®å‡å°‘äº§å“1çš„é¢„ç®—ã€‚
- en: Decrease the budget for product 2 significantly
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ˜¾è‘—å‡å°‘äº§å“2çš„é¢„ç®—ã€‚
- en: Increase the budget for product 3 significantly
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ˜¾è‘—å¢åŠ äº§å“3çš„é¢„ç®—ã€‚
- en: Closing thoughts
  id: totrans-157
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“è¯­ã€‚
- en: 'Today we covered the powerful combination of the S-Learner, Micaelis-Menton
    equation and non-linear programing! Here are some closing thoughts:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: ä»Šå¤©æˆ‘ä»¬è®¨è®ºäº†S-Learnerã€Michaelis-Mentenæ–¹ç¨‹å’Œéçº¿æ€§è§„åˆ’çš„å¼ºå¤§ç»“åˆï¼ä»¥ä¸‹æ˜¯ä¸€äº›ç»“è¯­ï¼š
- en: As mentioned earlier, when using the S-Learner beware of regularisation bias!
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚å‰æ‰€è¿°ï¼Œä½¿ç”¨S-Learneræ—¶è¦å°å¿ƒæ­£åˆ™åŒ–åå·®ï¼
- en: A good alternative to the S-Learner is using DML but transforming your treatment
    before training the model â€“ However, this means you need to have some prior knowledge
    of the functional from of the treatment.
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: S-Learnerçš„ä¸€ä¸ªå¾ˆå¥½çš„æ›¿ä»£æ–¹æ³•æ˜¯ä½¿ç”¨DMLï¼Œä½†åœ¨è®­ç»ƒæ¨¡å‹ä¹‹å‰å¯¹å¤„ç†è¿›è¡Œè½¬æ¢â€”â€”ç„¶è€Œï¼Œè¿™æ„å‘³ç€ä½ éœ€è¦å¯¹å¤„ç†çš„å‡½æ•°å½¢å¼æœ‰ä¸€å®šçš„å…ˆéªŒçŸ¥è¯†ã€‚
- en: I chose to use the Micaelis-Menton equation to build my response curves â€” However,
    this may not fit your problem and can be replaced by other transformations which
    are more suitable.
  id: totrans-161
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘é€‰æ‹©ä½¿ç”¨Michaelis-Mentenæ–¹ç¨‹æ¥æ„å»ºæˆ‘çš„å“åº”æ›²çº¿â€”â€”ç„¶è€Œï¼Œè¿™å¯èƒ½ä¸é€‚åˆä½ çš„é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡å…¶ä»–æ›´åˆé€‚çš„è½¬æ¢æ–¹æ³•æ¥æ›¿ä»£ã€‚
- en: Using SLSQP to solve nonlinear programming problems gives you the flexibility
    to use both equality and inequality constraints.
  id: totrans-162
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨SLSQPæ¥è§£å†³éçº¿æ€§è§„åˆ’é—®é¢˜å¯ä»¥è®©ä½ çµæ´»åœ°ä½¿ç”¨ç­‰å¼å’Œä¸ç­‰å¼çº¦æŸã€‚
- en: The data you collect is likely to be observational â€“ This poses some challenges
    around the range of discount values you will collect â€“ They are probably going
    to be clustered around a set region. Using some sort of Shapley approach to create
    the data used to create the response curves may be more suitable in this situation.
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½ æ”¶é›†çš„æ•°æ®å¾ˆå¯èƒ½æ˜¯è§‚å¯Ÿæ€§æ•°æ®â€”â€”è¿™å¸¦æ¥äº†ä¸€äº›æŒ‘æˆ˜ï¼Œå°¤å…¶æ˜¯åœ¨ä½ å°†æ”¶é›†åˆ°çš„æŠ˜æ‰£å€¼èŒƒå›´ä¸Šâ€”â€”è¿™äº›å€¼å¯èƒ½ä¼šé›†ä¸­åœ¨ä¸€ä¸ªç‰¹å®šçš„åŒºåŸŸã€‚ä½¿ç”¨æŸç§Shapleyæ–¹æ³•æ¥åˆ›å»ºç”¨äºç”Ÿæˆå“åº”æ›²çº¿çš„æ•°æ®ï¼Œåœ¨è¿™ç§æƒ…å†µä¸‹å¯èƒ½æ›´ä¸ºåˆé€‚ã€‚
- en: Iâ€™ve chosen to focus on Pricing & Promotions, but this framework can be extended
    to Marketing budgets.
  id: totrans-164
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æˆ‘é€‰æ‹©ä¸“æ³¨äºå®šä»·å’Œä¿ƒé”€ï¼Œä½†è¿™ä¸ªæ¡†æ¶å¯ä»¥æ‰©å±•åˆ°è¥é”€é¢„ç®—ã€‚
- en: Follow me if you want to continue this journey into Causal AI â€” In the next
    article we will cover measuring the intrinsic causal influence of your marketing
    campaigns.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æƒ³ç»§ç»­æ·±å…¥äº†è§£å› æœAIï¼Œå…³æ³¨æˆ‘â€”â€”åœ¨ä¸‹ä¸€ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬å°†è®¨è®ºå¦‚ä½•è¡¡é‡è¥é”€æ´»åŠ¨çš„å†…åœ¨å› æœå½±å“ã€‚
