<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>How to Evaluate Search Relevance and Ranking</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>How to Evaluate Search Relevance and Ranking</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/metrics-that-matter-a-simple-guide-to-search-ranking-evaluation-4030084c35b4?source=collection_archive---------8-----------------------#2024-05-30">https://towardsdatascience.com/metrics-that-matter-a-simple-guide-to-search-ranking-evaluation-4030084c35b4?source=collection_archive---------8-----------------------#2024-05-30</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="f18f" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">Key metrics to optimize your search engine</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@akchay_srivastava?source=post_page---byline--4030084c35b4--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Akchay Srivastava" class="l ep by dd de cx" src="../Images/2948bc0588017121409d264835a3068f.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*-EuY734xcQmPbGtAqHKkoQ.png"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--4030084c35b4--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@akchay_srivastava?source=post_page---byline--4030084c35b4--------------------------------" rel="noopener follow">Akchay Srivastava</a></p></div></div></div><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ib ic ah ai aj ak al am an ao ap aq ar id ie if" disabled="">Follow</button></p></div></div></span></div></div><div class="l ig"><span class="bf b bg z dx"><div class="ab cn ih ii ij"><div class="ik il ab"><div class="bf b bg z dx ab im"><span class="in l ig">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--4030084c35b4--------------------------------" rel="noopener follow"><p class="bf b bg z io ip iq ir is it iu iv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">6 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">May 30, 2024</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w ea eb q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon ed in kg kh ki"><div class=""><div class="kj kk kl km kn ko kp am kq kr ks ki"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kt ku kv kw kx ky kz"><p class="bf b dy z dx"><span class="kk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kj lc ld ab q ee le lf" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lb"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count la lb">4</span></p></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lg k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lh an ao ap id li lj lk" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep ll cn"><div class="l ae"><div class="ab cb"><div class="lm ln lo lp lq lr ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ml"><img src="../Images/dd4ca57f7090c47971c84ed838098923.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*Wae7cz_2nTlgz9-t"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Photo by <a class="af nc" href="https://unsplash.com/@markuswinkler?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Markus Winkler</a> on <a class="af nc" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="5b0e" class="nd ne fq bf nf ng nh gq ni nj nk gt nl nm nn no np nq nr ns nt nu nv nw nx ny bk">Table of Contents</h1><ol class=""><li id="dfef" class="nz oa fq ob b go oc od oe gr of og oh oi oj ok ol om on oo op oq or os ot ou ov ow ox bk">Introduction</li><li id="22be" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk">Precision@K</li><li id="1252" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk">Mean Average Precision (MAP)</li><li id="3dc7" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk">Mean Reciprocal Rank (MRR)</li><li id="fd66" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk">Normalized Discounted Cumulative Gain (NDCG)</li><li id="dc5b" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk">Comparative Analysis</li><li id="413e" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk">Summary</li><li id="408f" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk">References</li></ol><p id="2bd0" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">Disclaimer: The views expressed here are my own and do not necessarily reflect the views of my employer or any other organization. All images are by the author, except where indicated.</p><h1 id="15a0" class="nd ne fq bf nf ng nh gq ni nj nk gt nl nm nn no np nq nr ns nt nu nv nw nx ny bk">1. Introduction</h1><p id="04bf" class="pw-post-body-paragraph nz oa fq ob b go oc od oe gr of og oh oi oj ok ol om on oo op oq or os ot ou fj bk">Ensuring users find the information they need quickly and efficiently is paramount to a successful search experience. When users find what they’re looking for quickly and effortlessly, it translates into a positive experience.</p><blockquote class="pi pj pk"><p id="4bc7" class="nz oa pl ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk"><strong class="ob fr"><em class="fq">Furthermore, the ranking position of relevant results also plays a crucial role — the higher they appear, the more valuable they are to the user. This translates to increased user engagement, conversions, and overall website satisfaction.</em></strong></p></blockquote><p id="fa7b" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">This article explores the key metrics used for evaluating Search Relevance and Ranking, empowering you to optimize your Search Engine and deliver a superior user experience.</p><p id="7cb7" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">To demonstrate the concept of Search Relevance in a practical way, let’s consider a user searching for “pasta dishes” on a search engine. For simplicity, we’ll analyze the top five results returned by the engine. Relevant results will be denoted in green, while those deemed irrelevant will be highlighted in red (refer to Figure 1). We’ll use the Rn notation to represent the nth result.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk pm"><img src="../Images/0d5c17bbe30ba5f53ace96eadb634ffe.png" data-original-src="https://miro.medium.com/v2/resize:fit:484/format:webp/1*lMT5Wp7QHP5C5qW9meyuag.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 1: An ordered list of search results</figcaption></figure><h1 id="3278" class="nd ne fq bf nf ng nh gq ni nj nk gt nl nm nn no np nq nr ns nt nu nv nw nx ny bk"><strong class="al">2. Precision@K</strong></h1><p id="ee4a" class="pw-post-body-paragraph nz oa fq ob b go oc od oe gr of og oh oi oj ok ol om on oo op oq or os ot ou fj bk">Precision@K measures how many results within the top K positions are relevant. We compute Precision for different values of K, as shown in Figure 2.</p><p id="6365" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">Precision@K = Number of relevant results within the top K positions / K</p><p id="e8dc" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">Precision@1 = 1/1<br/>Precision@3 = 1/3<br/>Precision@5 = 2/5</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk pn"><img src="../Images/0ba61ecbf66262be248e3031e4361f9a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1068/format:webp/1*_kLmwbukPLRSAzI13QYBMg.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 2: Precision@K</figcaption></figure><h1 id="53e4" class="nd ne fq bf nf ng nh gq ni nj nk gt nl nm nn no np nq nr ns nt nu nv nw nx ny bk"><strong class="al">3. Mean Average Precision (MAP)</strong></h1><p id="9ef9" class="pw-post-body-paragraph nz oa fq ob b go oc od oe gr of og oh oi oj ok ol om on oo op oq or os ot ou fj bk">MAP considers the ranking order of relevant results.</p><p id="0137" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">Firstly, Precision@K is calculated for each of these relevant result positions. Then the Average Precision@K is obtained by summing up the Precision@K for each of these relevant result positions and dividing by the total number of <strong class="ob fr">relevant</strong> items in the top K results. For brevity, we will occasionally refer to Average Precision as AP in the discussion.</p><p id="be3e" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">To gain a deeper understanding of how MAP evaluates ranking effectiveness, let’s explore illustrative examples across three distinct search queries. These examples will highlight how the order in which results are presented influences the MAP score.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk po"><img src="../Images/44949b807bde8f6453a2f4f617b9ad6a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1034/format:webp/1*JTKqia59q3fDc4IvTA0DUA.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 3: Precision@K for each relevant result for Query 1</figcaption></figure><p id="22a3" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">AP@5_Query_1 = (Precision@1 + Precision@3 + Precision@5) / 3<br/>AP@5_Query_1 = (1 + 0.67 + 0.6) / 3 = 0.76</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk pp"><img src="../Images/8da0eeaad298366ff46268b8ee7199a9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1062/format:webp/1*DCBkL7uNcqPulKTOfmcTgQ.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 4: Precision@K for each relevant result for Query 2</figcaption></figure><p id="4faa" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">AP@5_Query_2 = (Precision@1 + Precision@2 + Precision@5) / 3<br/>AP@5_Query_2 = (1 + 1 + 0.6) / 3 = 0.87</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk pq"><img src="../Images/6fe7f4ead42b1572918240b2e46e8108.png" data-original-src="https://miro.medium.com/v2/resize:fit:1060/format:webp/1*Ch4iZFmYwQzKOSXyCWG4Bw.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 5: Precision@K for each relevant result for Query 3</figcaption></figure><p id="3970" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">AP@5_Query_3 = (Precision@3 + Precision@4 + Precision@5) / 3<br/>AP@5_Query_3 = (0.33 + 0.5 + 0.6) / 3 = 0.47</p><p id="20f8" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk"><strong class="ob fr">The results for Query 2 exhibit the highest Average Precision@5, indicating that the most relevant items are positioned at the beginning of the ranked list.</strong></p><p id="fd2d" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">MAP = Mean of Average Precision across all queries in the dataset.</p><p id="4aba" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">MAP@5 = (AP@5_Query_1 + AP@5_Query_2 + AP@5_Query_3) / Number of queries</p><p id="aba6" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">MAP@5 of the dataset = (0.76 + 0.87 + 0.47) / 3 = 0.7</p><blockquote class="pi pj pk"><p id="c11c" class="nz oa pl ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk"><strong class="ob fr"><em class="fq">This calculation treats all queries as equally important. However, if some queries are more critical, different weighting methods can be used within the MAP process to prioritize them.</em></strong></p></blockquote><h1 id="61d9" class="nd ne fq bf nf ng nh gq ni nj nk gt nl nm nn no np nq nr ns nt nu nv nw nx ny bk"><strong class="al">4. Mean Reciprocal Rank (MRR)</strong></h1><p id="2c3c" class="pw-post-body-paragraph nz oa fq ob b go oc od oe gr of og oh oi oj ok ol om on oo op oq or os ot ou fj bk">MRR considers only the rank of the <strong class="ob fr">first relevant result</strong> found in the list.</p><p id="911d" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">K = Rank of first relevant result <br/>Reciprocal Score = 1 / K</p><p id="8fb3" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">MRR is the average reciprocal score across multiple queries. If there is no relevant result, then the rank of the first relevant result is considered to be infinity. Therefore, the reciprocal score becomes 0.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk pr"><img src="../Images/2ad9599ba656f953430615e816251169.png" data-original-src="https://miro.medium.com/v2/resize:fit:678/format:webp/1*Swv6rzn8WGMwUBSY8xDXFA.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 6: Reciprocal Score for each query (in blue)</figcaption></figure><blockquote class="pi pj pk"><p id="b4c3" class="nz oa pl ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk"><strong class="ob fr"><em class="fq">The reciprocal score of a relevant result is an inverse function of its rank.</em></strong></p></blockquote><p id="549c" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">MRR of the dataset = (0.5 + 1 + 0.33) / 3 = 0.61</p><h1 id="faa3" class="nd ne fq bf nf ng nh gq ni nj nk gt nl nm nn no np nq nr ns nt nu nv nw nx ny bk"><strong class="al">5. Normalized Discounted Cumulative Gain (NDCG)</strong></h1><p id="9a5b" class="pw-post-body-paragraph nz oa fq ob b go oc od oe gr of og oh oi oj ok ol om on oo op oq or os ot ou fj bk">NDCG takes into account the graded relevance of results. The relevance of each result is represented by a score (also known as a “grade”). The value of NDCG is determined by comparing the relevance of the results returned by a search engine to the relevance of the results that a <strong class="ob fr">hypothetical “ideal” search engine would return.</strong></p><p id="f487" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">Let’s assume we’ve got a relevance/grading scale of 1–5, with 5 being the highest score and 1 being the lowest score. We search for “pasta dishes” and manually grade the search results by providing them with a relevance score, as shown in Figure 7. In our example, R3 is the most relevant result, with a score of 5.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ps"><img src="../Images/1035da10055f8e313e45a142662ac947.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*YPAS8_9hPfwfvweJZLbZpA.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 7: An ordered list of search results with their relevance scores</figcaption></figure><p id="0817" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">Cumulative Gain@5 = 4 + 1 + 5 + 1 + 3 = 14<br/>Cumulative gain does not take ranking into consideration.</p><p id="da38" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">Discounted Cumulative Gain@K = A <strong class="ob fr">logarithmic discount</strong> is applied that helps assign lower gain when relevant items appear further down in the ranked list, as shown in Figure 8.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk pt"><img src="../Images/a27130cd1dd4538d1945d1c824b9bdba.png" data-original-src="https://miro.medium.com/v2/resize:fit:672/format:webp/1*S-LfQUbtXeSUOsXMX5hb1Q.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 8: DCG@K Formula</figcaption></figure><p id="bffd" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">Where rel(i) is the relevance score of the result at position i.</p><p id="956b" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">DCG@K = 4/1 + 1/1.585 + 5/2 + 1/2.322+ 3/2.585 = 8.72</p><p id="0590" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">The absolute value of DCG depend on the number of results in the list and the relevance scores assigned. In order to address this, DCG can be normalized. To get the normalized DCG (NDCG), we divide the DCG by the ideal DCG (IDCG) for the given result set, as shown in Figure 9. IDCG considers the same relevance scores, but calculates the DCG assuming the absolute best ranking order for those results. The best ranking order for the above example would be: R3 → R1 → R5 → R2 → R4.</p><p id="ab86" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">IDCG@K = 5/1 + 4/1.585 + 3/2 + 1/2.322 + 1/2.585 = 9.83</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk pu"><img src="../Images/859184e63318ed59a25f5e5adc9b0fd6.png" data-original-src="https://miro.medium.com/v2/resize:fit:616/format:webp/1*OjOox574BAVeF2t0kMYkUg.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Figure 9: NDCG@K Formula</figcaption></figure><p id="80f1" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">NDCG@K = 8.72/9.83 = 0.88</p><blockquote class="pi pj pk"><p id="1e5a" class="nz oa pl ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk"><strong class="ob fr"><em class="fq">NDCG accounts for the graded relevance of results, providing a more nuanced understanding of Search Ranking Quality.</em></strong></p></blockquote><h1 id="209e" class="nd ne fq bf nf ng nh gq ni nj nk gt nl nm nn no np nq nr ns nt nu nv nw nx ny bk"><strong class="al">6. Comparative Analysis</strong></h1><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk pv"><img src="../Images/f9792d300e683ba1f6e70d059e481f04.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xVQVRgEdA85nd4Sfc8JeRg.png"/></div></div></figure><p id="fe86" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">In addition to the above metrics, the <strong class="ob fr">Spearman Correlation Coefficient</strong> and <strong class="ob fr">Kendall Tau Distance</strong> can be employed to assess the similarity of ranked lists. For measuring user engagements, <strong class="ob fr">Click-Through Rate (CTR)</strong> is a key metric that reflects the percentage of users who have clicked on a result after it’s displayed. For more information on these metrics, please consult the Wikipedia resources listed in the References section.</p><h1 id="6acc" class="nd ne fq bf nf ng nh gq ni nj nk gt nl nm nn no np nq nr ns nt nu nv nw nx ny bk"><strong class="al">7. Summary</strong></h1><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk pw"><img src="../Images/5b3e00948e36d78a92695abdd6b68fff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*WP6y2utHMSdBM895"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Photo by <a class="af nc" href="https://unsplash.com/@alschim?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Alexander Schimmeck</a> on <a class="af nc" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="0ce5" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">Following our exploration of four distinct metrics for search quality evaluation, we conducted a comparative analysis to understand the strengths and weaknesses of each approach. This naturally leads us to the critical question: Which metric is most suitable for evaluating the Relevance and Ranking of your Search Engine Results? The optimal metric selection depends on your specific requirements.</p><p id="147b" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk"><strong class="ob fr">For a comprehensive understanding of the quality of your Search Engine, it is often beneficial to consider a combination of these metrics rather than relying on a single measure.</strong></p><p id="39a3" class="pw-post-body-paragraph nz oa fq ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk">If you found this article useful, please cite this write-up as:</p><blockquote class="pi pj pk"><p id="7a7e" class="nz oa pl ob b go pd od oe gr pe og oh oi pf ok ol om pg oo op oq ph os ot ou fj bk"><em class="fq">Srivastava, Akchay. (May 2024). How to Evaluate Search Relevance and Ranking. </em><a class="af nc" rel="noopener" target="_blank" href="/metrics-that-matter-a-simple-guide-to-search-ranking-evaluation-4030084c35b4"><em class="fq">https://towardsdatascience.com/metrics-that-matter-a-simple-guide-to-search-ranking-evaluation-4030084c35b4</em></a></p></blockquote><h1 id="85eb" class="nd ne fq bf nf ng nh gq ni nj nk gt nl nm nn no np nq nr ns nt nu nv nw nx ny bk"><strong class="al">8. References:</strong></h1><ol class=""><li id="0e8e" class="nz oa fq ob b go oc od oe gr of og oh oi oj ok ol om on oo op oq or os ot ou ov ow ox bk"><a class="af nc" href="https://en.wikipedia.org/wiki/Evaluation_measures_(information_retrieval)" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Evaluation_measures_(information_retrieval)</a></li><li id="ac24" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk"><a class="af nc" href="https://en.wikipedia.org/wiki/Mean_reciprocal_rank" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Mean_reciprocal_rank</a></li><li id="5e99" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk"><a class="af nc" href="https://en.wikipedia.org/wiki/Kendall_tau_distance" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Kendall_tau_distance</a></li><li id="9b83" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk"><a class="af nc" href="https://en.wikipedia.org/wiki/Discounted_cumulative_gain" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Discounted_cumulative_gain</a></li><li id="023e" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk"><a class="af nc" href="https://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Spearman%27s_rank_correlation_coefficient</a></li><li id="50ac" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk"><a class="af nc" href="https://web.stanford.edu/class/cs276/handouts/EvaluationNew-handout-6-per.pdf" rel="noopener ugc nofollow" target="_blank">https://web.stanford.edu/class/cs276/handouts/EvaluationNew-handout-6-per.pdf</a></li><li id="bfcf" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk"><a class="af nc" href="https://www.coursera.org/lecture/recommender-metrics/rank-aware-top-n-metrics-Wk98r" rel="noopener ugc nofollow" target="_blank">https://www.coursera.org/lecture/recommender-metrics/rank-aware-top-n-metrics-Wk98r</a></li><li id="1c9a" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk"><a class="af nc" href="https://www.evidentlyai.com/ranking-metrics/ndcg-metric" rel="noopener ugc nofollow" target="_blank">https://www.evidentlyai.com/ranking-metrics/ndcg-metric</a></li><li id="b64f" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk"><a class="af nc" href="https://en.wikipedia.org/wiki/Inter-rater_reliability" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Inter-rater_reliability</a></li><li id="9f12" class="nz oa fq ob b go oy od oe gr oz og oh oi pa ok ol om pb oo op oq pc os ot ou ov ow ox bk"><a class="af nc" href="https://en.wikipedia.org/wiki/Click-through_rate" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Click-through_rate</a></li></ol></div></div></div></div>    
</body>
</html>