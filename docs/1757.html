<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>AI, Write and Style My CV</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>AI, Write and Style My CV</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/ai-write-and-style-my-cv-fb3168a5b10e?source=collection_archive---------7-----------------------#2024-07-18">https://towardsdatascience.com/ai-write-and-style-my-cv-fb3168a5b10e?source=collection_archive---------7-----------------------#2024-07-18</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="fo bh"><figure class="fp fo bh paragraph-image"><img src="../Images/e34ee1d63b0f9106d336572f30624c9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:3072/format:webp/1*G3HI0YfSN0wmznm_IyWZ9w.png"/><figcaption class="fs ft fu fv fw fx fy bf b bg z dx">Created with Midjourney by Author</figcaption></figure></div><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="6aa5" class="pw-subtitle-paragraph gy ga gb bf b gz ha hb hc hd he hf hg hh hi hj hk hl hm hn cq dx">Agentic Workflow Writing Structured Documents, A Line-by-Line Tutorial</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="ho hp hq hr hs ab"><div><div class="ab ht"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@AJOhrn?source=post_page---byline--fb3168a5b10e--------------------------------" rel="noopener follow"><div class="l hu hv by hw hx"><div class="l ed"><img alt="Anders Ohrn" class="l ep by dd de cx" src="../Images/64c8f1d9dea93adf16608b1b6d52c5b2.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/0*ZmhJHesAcfQoeH6J.jpeg"/><div class="hy by l dd de em n hz eo"/></div></div></a></div></div><div class="ia ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--fb3168a5b10e--------------------------------" rel="noopener follow"><div class="l ib ic by hw id"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ie cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hy by l br ie em n hz eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="if ab q"><div class="ab q ig"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b ih ii bk"><a class="af ag ah ai aj ak al am an ao ap aq ar ij" data-testid="authorName" href="https://medium.com/@AJOhrn?source=post_page---byline--fb3168a5b10e--------------------------------" rel="noopener follow">Anders Ohrn</a></p></div></div></div><span class="ik il" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b ih ii dx"><button class="im in ah ai aj ak al am an ao ap aq ar io ip iq" disabled="">Follow</button></p></div></div></span></div></div><div class="l ir"><span class="bf b bg z dx"><div class="ab cn is it iu"><div class="iv iw ab"><div class="bf b bg z dx ab ix"><span class="iy l ir">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar ij ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--fb3168a5b10e--------------------------------" rel="noopener follow"><p class="bf b bg z iz ja jb jc jd je jf jg bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="ik il" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">22 min read</span><div class="jh ji l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Jul 18, 2024</span></div></span></div></span></div></div></div><div class="ab cp jj jk jl jm jn jo jp jq jr js jt ju jv jw jx jy"><div class="h k w ea eb q"><div class="ko l"><div class="ab q kp kq"><div class="pw-multi-vote-icon ed iy kr ks kt"><div class=""><div class="ku kv kw kx ky kz la am lb lc ld kt"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l le lf lg lh li lj lk"><p class="bf b dy z dx"><span class="kv">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao ku ll lm ab q ee ln lo" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="fp"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg></button></div></div></div><div class="ab q jz ka kb kc kd ke kf kg kh ki kj kk kl km kn"><div class="lp k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lq an ao ap io lr ls lt" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep lu cn"><div class="l ae"><div class="ab cb"><div class="lv lw lx ly lz fq ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lq an ao ap io ma mb lo mc md me mf mg s mh mi mj mk ml mm mn u mo mp mq"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lq an ao ap io ma mb lo mc md me mf mg s mh mi mj mk ml mm mn u mo mp mq"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lq an ao ap io ma mb lo mc md me mf mg s mh mi mj mk ml mm mn u mo mp mq"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><p id="17e3" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Not only <a class="af nn" href="https://heni.com/talks/mona-lisa-painting-beyond-portraiture" rel="noopener ugc nofollow" target="_blank">the Mona Lisa</a> and <a class="af nn" href="https://nicofranz.art/en/leonardo-da-vinci/vitruvian-man" rel="noopener ugc nofollow" target="_blank">the Vitruvian Man</a> but also <a class="af nn" href="https://artsandculture.google.com/story/leonardo-s-cover-letter-biblioteca-ambrosiana/sQVRpZ4EhlnSKg?hl=en" rel="noopener ugc nofollow" target="_blank">the Curriculum Vitae</a> (CV), are cultural artifacts by Leonardo Da Vinci’s hand that resonate and reproduce in the present time. The CV is not the exclusive way to present oneself to the job market. Yet the CV persists despite the many innovations in information and graphics technology since Leonardo enumerated on paper his skills and abilities to the Duke of Milan.</p><p id="31ad" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">In high-level terms, the creation of a CV:</p><ol class=""><li id="afa7" class="mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm no np nq bk">summarizes past accomplishments and experiences of a person in a document form,</li><li id="f80b" class="mr ms gb mt b gz nr mv mw hc ns my mz na nt nc nd ne nu ng nh ni nv nk nl nm no np nq bk">in a manner relevant to a specific audience, who in a short time assesses the person’s relative and absolute utility to some end,</li><li id="b525" class="mr ms gb mt b gz nr mv mw hc ns my mz na nt nc nd ne nu ng nh ni nv nk nl nm no np nq bk">where the style and layout of the document form are chosen to be conducive to a favourable assessment by said audience.</li></ol><p id="ea02" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">These are semantic operations in service of an objective under vaguely stated constraints.</p><p id="1e5b" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Large language models (LLMs) are the premier means to execute semantic operations with computers, especially if the operations are ambiguous in the way human communication often is. The most common way to date to interact with LLMs is a chat app — <a class="af nn" href="https://chatgpt.com/" rel="noopener ugc nofollow" target="_blank">ChatGPT</a>, <a class="af nn" href="https://claude.ai/" rel="noopener ugc nofollow" target="_blank">Claude</a>, <a class="af nn" href="https://chat.mistral.ai/chat" rel="noopener ugc nofollow" target="_blank">Le Chat</a> etc. We, the human users of said chat apps, define somewhat loosely the semantic operations by way of our chat messages.</p><p id="aa8f" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Certain applications, however, are better served by a different interface and a different way to create semantic operations. Chat is not the be-all and end-all of LLMs.</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="oc od l"/></div></figure><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="oc od l"/></div></figure><p id="0f60" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">I will use the <a class="af nn" href="https://www.anthropic.com/api" rel="noopener ugc nofollow" target="_blank">APIs for the LLM models of Anthropic</a> (especially Sonnet and Haiku) to create a basic application for CV assembly. It relies on a workflow of agents working in concert (an <a class="af nn" href="https://www.deeplearning.ai/the-batch/welcoming-diverse-approaches-keeps-machine-learning-strong/" rel="noopener ugc nofollow" target="_blank"><em class="oe">agentic workflow</em></a>), each agent performing some semantic operation in the chain of actions it takes to go from a blob of personal data and history to a structured CV document worthy of its august progenitor…</p><p id="bb27" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">This is a tutorial on building a small yet complete LLM-powered non-chat application. In what follows I describe both the code, my reasons for a particular design, and where in the bigger picture each piece of Python code fits.</p><p id="01b3" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The CV creation app is a useful illustration of AIs working on the general task of structured style-content generation.</p><h2 id="04a4" class="of og gb bf oh oi oj ok ol om on oo op na oq or os ne ot ou ov ni ow ox oy oz bk">Before Code &amp; How — Show What &amp; Wow</h2><p id="678f" class="pw-post-body-paragraph mr ms gb mt b gz pa mv mw hc pb my mz na pc nc nd ne pd ng nh ni pe nk nl nm fj bk">Imagine a collection of personal data and lengthy career descriptions, mostly text, organized into a few files where information is scattered. In that collection is the raw material of a CV. Only it would take effort to separate the relevant from the irrelevant, distill and refine it, and give it a good and pleasant form.</p><p id="9b03" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Next imagine running a script <code class="cx pf pg ph pi b">make_cv</code> and pointing it to a job ad, a CV template, a person and a few specification parameters:</p><pre class="nw nx ny nz oa pj pi pk bp pl bb bk"><span id="8fc4" class="pm og gb pi b bg pn po l pp pq">make_cv --job-ad-company "epic resolution index" \<br/>        --job-ad-title "luxury retail lighting specialist" \<br/>        --cv-template two_columns_abt_0 \<br/>        --person-name "gregor samsa" \<br/>        --output-file ../generated_output/cv_nice_two_columns.html \<br/>        --n-words-employment 50 --n-skills 8 --n-words-about-me 40</span></pre><p id="6103" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Then wait a few seconds while the data is shuffled, transformed and rendered, after which the script outputs a neatly styled and populated one-pager two-column CV.</p><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div class="fv fw pr"><img src="../Images/bc89250d3d5365bdbaf4bbcd618e1415.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*sLERhnAz8q4m0h3vHnpNTw.png"/></div><figcaption class="fs ft fu fv fw fx fy bf b bg z dx">A CV, neat style and abstracted content, generated with an agentic workflow of Anthropic LLMs.</figcaption></figure><p id="af6f" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Nice! Minimal layout and style in green hues, good contrast between text and background, not just bland default fonts, and the content consists of brief and to-the-point descriptions.</p><p id="f669" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">But wait… are these documents not supposed to make us stand out?</p><p id="3a22" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Again with the aid of the Anthropic LLMs, a different template is created (keywords: <em class="oe">wild and wacky world of early 1990s web design</em>), and the same content is given a new glorious form:</p><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div class="fv fw ps"><img src="../Images/ef1f399ded7688af94137c18729b6c7f.png" data-original-src="https://miro.medium.com/v2/resize:fit:752/format:webp/1*yu-ap4e_gCKUcyepccERXQ.gif"/></div><figcaption class="fs ft fu fv fw fx fy bf b bg z dx">A CV, crazy 1990s-webpage-style and content, generated with an agentic workflow of Antropic LLMs.</figcaption></figure><p id="27f6" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">If you ignore the flashy animations and peculiar colour choices, you’ll find that the content and layout are almost identical to the previous CV. This isn’t by chance. The agentic workflow’s generative tasks deal separately with content, form, and style, not resorting to an all-in-one solution. The workflow process rather mirrors the modular structure of the standard CV.</p><p id="399e" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">That is, the generative process of the agentic workflow is made to operate within meaningful constraints. That can enhance the practical utility of generative AI applications — design, after all, has been said to <a class="af nn" href="https://markwunsch.com/eames" rel="noopener ugc nofollow" target="_blank">depend largely on constraints</a>. For example, branding, style guides, and information hierarchy are useful, principled constraints we should want in the non-chat outputs of the generative AI — be they CVs, reports, UX, product packaging etc.</p><p id="64e6" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The agentic workflow that accomplishes all that is illustrated below.</p><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div class="fv fw pt"><img src="../Images/c1625c41c085d5a005ec45bdfbda7487.png" data-original-src="https://miro.medium.com/v2/resize:fit:1372/format:webp/1*t0lYnOzgSYaDUHshzUyzSw.png"/></div><figcaption class="fs ft fu fv fw fx fy bf b bg z dx">High-level data flow diagram of the application</figcaption></figure><p id="cb89" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">If you wish to skip past the descriptions of code and software design, <em class="oe">Gregor Samsa</em> is your lodestar. When I return to discussing applications and outputs, I will do so for synthetic data for the fictional character Gregor Samsa, so keyword-search your way forward.</p><p id="644b" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The complete code is available in <a class="af nn" href="https://github.com/anderzzz/everyone_knows_it/" rel="noopener ugc nofollow" target="_blank">this GitHub repo</a>, free and without any guarantees.</p><h2 id="862b" class="of og gb bf oh oi oj ok ol om on oo op na oq or os ne ot ou ov ni ow ox oy oz bk">Job Ad Pre-Processing, DAO and Prompt Assembly</h2><p id="a7e5" class="pw-post-body-paragraph mr ms gb mt b gz pa mv mw hc pb my mz na pc nc nd ne pd ng nh ni pe nk nl nm fj bk">It is often said that one should tailor a CV's content to the job ad. Since job ads are frequently verbose, sometimes containing legal boilerplate and contact information, I wish to extract and summarize only the relevant features and use that text in subsequent tasks.</p><p id="5775" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">To have shared interfaces when retrieving data, I make a basic <a class="af nn" href="https://www.geeksforgeeks.org/data-access-object-pattern/" rel="noopener ugc nofollow" target="_blank">data-access object (DAO)</a>, which defines a common interface to the data, which in the tutorial example is stored in text and JSON files locally (stored in <code class="cx pf pg ph pi b">registry_job_ads</code>), but generally can be any other job ad database or API.</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><p id="52f6" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">To summarize or abstract text is a semantic operation LLMs are well-suited for. To that end,</p><ol class=""><li id="a889" class="mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm no np nq bk">an instruction prompt is required to make the LLM process the text appropriately for the task;</li><li id="4daf" class="mr ms gb mt b gz nr mv mw hc ns my mz na nt nc nd ne nu ng nh ni nv nk nl nm no np nq bk">and the LLM model from Anthropic has to be selected along with its parameters (e.g. temperature);</li><li id="1964" class="mr ms gb mt b gz nr mv mw hc ns my mz na nt nc nd ne nu ng nh ni nv nk nl nm no np nq bk">and the instructed LLM is invoked via a third-party API with its specific requirements on syntax, error checking etc.</li></ol><p id="91fe" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">To keep these three distinct concerns separate, I introduce some abstraction.</p><p id="6e9b" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The class diagram below illustrates key methods and relationships of the agent that extract key qualities of the job ad.</p><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div role="button" tabindex="0" class="pw px ed py bh pz"><div class="fv fw pv"><img src="../Images/8ca9af115bd8907ec9d09a1569f9fcb6.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Lnmu_09ocQ6EnzZljVrGhA.png"/></div></div></figure><p id="1c45" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">In code, that looks like this:</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><p id="b07a" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The configuration file <code class="cx pf pg ph pi b">agent_model_extractor_confs</code> is a JSON file that in part looks like this:</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><p id="4663" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Additional configurations are added to this file as further agents are implemented.</p><p id="281d" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The prompt is what focuses the general LLM onto a specific capability. I use Jinja templates to assemble the prompt. This is a <a class="af nn" href="https://realpython.com/primer-on-jinja-templating/" rel="noopener ugc nofollow" target="_blank">flexible and established method to create text files with programmatic content</a>. For the fairly straightforward job ad extractor agent, the logic is simple — read text from a file and return it — but when I get to the more advanced agents, Jinja templating will prove more helpful.</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><p id="b833" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">And the prompt template for <code class="cx pf pg ph pi b">agent_type='JobAdQualityExtractor</code> is:</p><pre class="nw nx ny nz oa pj pi pk bp pl bb bk"><span id="51c5" class="pm og gb pi b bg pn po l pp pq">Your task is to analyze a job ad and from it extract, <br/>on the one hand, the qualities and attributes that the <br/>company is looking for in a candidate, and on the other <br/>hand, the qualities and aspirations the company <br/>communicates about itself.<br/><br/>Any boilerplate text or contact information should be <br/>ignored. And where possible, reduce the overall amount <br/>of text. We are looking for the essence of the job ad.</span></pre><h2 id="30a4" class="of og gb bf oh oi oj ok ol om on oo op na oq or os ne ot ou ov ni ow ox oy oz bk">Invoking the Agent, Without Tools</h2><p id="cf46" class="pw-post-body-paragraph mr ms gb mt b gz pa mv mw hc pb my mz na pc nc nd ne pd ng nh ni pe nk nl nm fj bk">A model name (e.g. <code class="cx pf pg ph pi b">claude-3–5-sonnet-20240620</code>), a prompt and an Anthropic client are the least we need to send a request to the Anthropic APIs to execute an LLM. The job ad quality extractor agent has it all. It can therefore instantiate and execute the “bare metal” agent type.</p><p id="bb62" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Without any memory of prior use or any other functionality, the bare metal agent invokes the LLM once. Its scope of concern is how Anthropic formats its inputs and outputs.</p><p id="5b14" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">I create an abstract base class as well, <code class="cx pf pg ph pi b">Agent</code>. It is not strictly required and for a task as basic as CV creation of limited use. However, if we were to keep building on this foundation to deal with more complex and diverse tasks, <a class="af nn" href="https://stackoverflow.com/questions/3570796/why-use-abstract-base-classes-in-python" rel="noopener ugc nofollow" target="_blank">abstract base classes are good practice</a>.</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><p id="b5aa" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The <code class="cx pf pg ph pi b">send_request_to_anthropic_message_creation</code> is a <a class="af nn" href="https://github.com/anderzzz/everyone_knows_it/blob/6c96a71b3b1be18918a6caad96b9ec5c2148de2e/src/semantics.py#L24" rel="noopener ugc nofollow" target="_blank">simple wrapper around the call to the Anthropic </a>API.</p><p id="1c30" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">This is all that is needed to obtain the job ad summary. In short, the steps are:</p><ol class=""><li id="326f" class="mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm no np nq bk">Instantiate a job ad quality extractor agent, which entails gathering the associated prompt and Anthropic model parameters.</li><li id="2da7" class="mr ms gb mt b gz nr mv mw hc ns my mz na nt nc nd ne nu ng nh ni nv nk nl nm no np nq bk">Invoke the job ad data access object with a company name and position to get the complete job ad text.</li><li id="f2ca" class="mr ms gb mt b gz nr mv mw hc ns my mz na nt nc nd ne nu ng nh ni nv nk nl nm no np nq bk">Apply the extraction on the complete job ad text, which entails a one-time request to the APIs of the Anthropic LLMs; a text string is returned with the generated summary.</li></ol><p id="cf35" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">In terms of code in the <code class="cx pf pg ph pi b">make_cv</code> script, these steps read:</p><pre class="nw nx ny nz oa pj pi pk bp pl bb bk"><span id="0ae5" class="pm og gb pi b bg pn po l pp pq">    # Step 0: Get Anthropic client<br/>    anthropic_client = get_anthropic_client(api_key_env)<br/><br/>    # Step 1: Extract key qualities and attributes from job ad<br/>    ad_qualities = JobAdQualityExtractor(<br/>        client=anthropic_client,<br/>    ).extract_qualities(<br/>        text=JobAdsDAO().get(job_ad_company, job_ad_title),<br/>    )</span></pre><p id="d86c" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The top part of the data flow diagram has thus been described.</p><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div role="button" tabindex="0" class="pw px ed py bh pz"><div class="fv fw qa"><img src="../Images/0ca2aea8419f959d09fb2dd39f91c9cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EAedsLddUkxtl6tRlG_T5w.png"/></div></div></figure><h2 id="5d4d" class="of og gb bf oh oi oj ok ol om on oo op na oq or os ne ot ou ov ni ow ox oy oz bk">How To Build Agents That Use Tools</h2><p id="ed92" class="pw-post-body-paragraph mr ms gb mt b gz pa mv mw hc pb my mz na pc nc nd ne pd ng nh ni pe nk nl nm fj bk">All other types of agents in the agentic workflow use tools. Most LLMs nowadays are equipped with this useful capacity. Since I described the bare metal agent above, I will describe the tool-using agent next, since it is the foundation for much to follow.</p><p id="8645" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">LLMs generate string data through a sequence-to-sequence map. In chat applications as well as in the job ad quality extractor, the string data is (mostly) text.</p><p id="6421" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">But the string data can also be an array of function arguments. For example, if I have an executable function, <code class="cx pf pg ph pi b">add</code>, that adds two integer variables, <code class="cx pf pg ph pi b">a</code> and <code class="cx pf pg ph pi b">b</code>, and returns their sum, then the string data to run <code class="cx pf pg ph pi b">add</code> could be:</p><pre class="nw nx ny nz oa pj pi pk bp pl bb bk"><span id="d753" class="pm og gb pi b bg pn po l pp pq">{<br/>  "name": "add",<br/>  "input": {  <br/>    "a": "2",<br/>    "b": "2"<br/>  }<br/>}</span></pre><p id="4686" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">So if the LLM outputs this string of function arguments, it can in code lead to the function call <code class="cx pf pg ph pi b">add(a=2, b=2)</code>.</p><p id="5cea" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The question is: how should the LLM be instructed such that it knows when and how to generate string data of this kind and specific syntax?</p><p id="87f2" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Alongside the <code class="cx pf pg ph pi b">AgentBareMetal</code> agent, I define another agent type, which also inherits the <code class="cx pf pg ph pi b">Agent</code> base class:</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><p id="2f45" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">This differs from the bare metal agent in two regards:</p><ul class=""><li id="dfe6" class="mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm qb np nq bk"><code class="cx pf pg ph pi b">self.tools</code> is a list created during instantiation.</li><li id="e46c" class="mr ms gb mt b gz nr mv mw hc ns my mz na nt nc nd ne nu ng nh ni nv nk nl nm qb np nq bk"><code class="cx pf pg ph pi b">tool_return</code> is created during execution by invoking a function obtained from a registry, <code class="cx pf pg ph pi b">registry_tool_name_2_func</code>.</li></ul><p id="63f4" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The former object contains the data instructing the Anthropic LLMs on the format of the string data it can generate as input arguments to different tools. The latter object comes about through the execution of the tool, given the LLM-generated string data.</p><p id="4798" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The <code class="cx pf pg ph pi b">tools_cv_data</code> file contains a JSON string formatted to define a function interface (but not the function itself). The string has to conform to a <a class="af nn" href="https://docs.anthropic.com/en/docs/build-with-claude/tool-use#specifying-tools" rel="noopener ugc nofollow" target="_blank">very specific schema for the Anthropic LLM</a> to understand it. A snippet of this JSON string is:</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><p id="bfe7" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">From the specification above we can tell that if, for example, the initialization of <code class="cx pf pg ph pi b">AgentToolInvokeReturn</code> includes the string <code class="cx pf pg ph pi b">biography</code> in the <code class="cx pf pg ph pi b">tools</code> argument, then the Anthropic LLM will be instructed that it can generate a function argument string to a function called <code class="cx pf pg ph pi b">create_biography</code>. What kind of data to include in each argument is left to the LLM to figure out from the description fields in the JSON string. These descriptions are therefore mini-prompts, which guide the LLM in its sense-making.</p><p id="3a75" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The function that is associated with this specification I implement through the following two definitions.</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><p id="b782" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">In short, the tool name <code class="cx pf pg ph pi b">create_biography</code> is associated with the class builder function <code class="cx pf pg ph pi b">Biography.build</code>, which creates and returns an instance of the data class <code class="cx pf pg ph pi b">Biography</code>.</p><p id="08b5" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Note that the attributes of the data class are perfectly mirrored in the JSON string that is added to the <code class="cx pf pg ph pi b">self.tools</code> variable of the agent. That implies that the strings returned from the Anthropic LLM will fit perfectly into the class builder function for the data class.</p><p id="56f1" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">To put it all together, take a closer look at the inner loop of the <code class="cx pf pg ph pi b">run</code> method of <code class="cx pf pg ph pi b">AgentToolInvokeRetur</code> shown again below:</p><pre class="nw nx ny nz oa pj pi pk bp pl bb bk"><span id="24f3" class="pm og gb pi b bg pn po l pp pq">        for response_message in response.content:<br/>            assert isinstance(response_message, ToolUseBlock)<br/><br/>            tool_name = response_message.name<br/>            func_kwargs = response_message.input<br/>            tool_id = response_message.id<br/><br/>            tool = registry_tool_name_2_func.get(tool_name)<br/>            try:<br/>                tool_return = tool(**func_kwargs)<br/>            except Exception:<br/>                ...</span></pre><p id="535b" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The steps are:</p><ol class=""><li id="5c42" class="mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm no np nq bk">The response from the Anthropic LLM is checked to be a string of function arguments, not ordinary text.</li><li id="b553" class="mr ms gb mt b gz nr mv mw hc ns my mz na nt nc nd ne nu ng nh ni nv nk nl nm no np nq bk">The name of the tool (e.g. <code class="cx pf pg ph pi b">create_biography</code>), the string of function arguments and a unique tool use id are gathered.</li><li id="379a" class="mr ms gb mt b gz nr mv mw hc ns my mz na nt nc nd ne nu ng nh ni nv nk nl nm no np nq bk">The executable tool is retrieved from the registry (e.g. <code class="cx pf pg ph pi b">Biography.build</code>).</li><li id="eb5c" class="mr ms gb mt b gz nr mv mw hc ns my mz na nt nc nd ne nu ng nh ni nv nk nl nm no np nq bk">The function is executed with the string function arguments (checking for errors)</li></ol><p id="cd47" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Once we have the output from the tool, we should decide what to do with it. Some applications integrate the tool outputs into the messages and execute another request to the LLM API. However, in the current application, I build agents that generate data objects, specifically subclasses of <code class="cx pf pg ph pi b">CVData</code>. Hence, I design the agent to invoke the tool, and then simply return its output — hence the class name <code class="cx pf pg ph pi b">AgentToolInvokeReturn</code>.</p><p id="d323" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">It is on this foundation I build agents which create the constrained data structures I want to be part of the CV.</p><h2 id="5739" class="of og gb bf oh oi oj ok ol om on oo op na oq or os ne ot ou ov ni ow ox oy oz bk">Structured CV Data Extractor Agents</h2><p id="8f74" class="pw-post-body-paragraph mr ms gb mt b gz pa mv mw hc pb my mz na pc nc nd ne pd ng nh ni pe nk nl nm fj bk">The class diagram for the agent that generates structured biography data is shown below. It has much in common with the previous class diagram for the agent that extracted the qualities from job ads.</p><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div role="button" tabindex="0" class="pw px ed py bh pz"><div class="fv fw qc"><img src="../Images/2b65dae5790f6ce8214d263ae7a290bc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Quqo5r85Nv9DN0qDxoB4eQ.png"/></div></div></figure><p id="35d4" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">In code:</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><p id="b68f" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Two distinctions to the previous agent <code class="cx pf pg ph pi b">JobAdQualityExtractor</code>:</p><ol class=""><li id="8da5" class="mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm no np nq bk">The tool names are retrieved as a function of the class attribute <code class="cx pf pg ph pi b">cv_data</code> (line 47 in the snippet above). So when the agent with tools is instantiated, the sequence of tool names is given by a registry that associates a type of CV data (e.g. <code class="cx pf pg ph pi b">Biography</code>) with the key used in the <code class="cx pf pg ph pi b">tools_cv_data</code> JSON string described above, e.g. <code class="cx pf pg ph pi b">biography</code>.</li><li id="982d" class="mr ms gb mt b gz nr mv mw hc ns my mz na nt nc nd ne nu ng nh ni nv nk nl nm no np nq bk">The prompt for the agent is rendered with variables (lines 48–52). Recall the use of Jinja templates above. This enables the injection of the relevant qualities of the job ad and a target number of words to be used in the “about me” section. The specific template for the biography agent is:</li></ol><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div role="button" tabindex="0" class="pw px ed py bh pz"><div class="fv fw qd"><img src="../Images/b8b0e51c62f7c269fc45dcde8924ada9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*u9oemvh7bwBwZT-KPwdyHw.png"/></div></div><figcaption class="fs ft fu fv fw fx fy bf b bg z dx">image of prompt template for biography extractor agent, note the two variables</figcaption></figure><p id="bf91" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">That means as it is instantiated, the agent is made aware of the job ad it should tailor its text output to.</p><p id="7fd5" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">So when it receives the raw text data, it performs the instruction and returns an instance of the data class <code class="cx pf pg ph pi b">Biography</code>. With identical reasons and similar software design, I generate additional extractor agents and CV data classes and tools definitions:</p><pre class="nw nx ny nz oa pj pi pk bp pl bb bk"><span id="a78a" class="pm og gb pi b bg pn po l pp pq">class EducationCVDataExtractor(CVDataExtractor):<br/>    cv_data = Educations<br/>    def __init__(self):<br/>#      &lt;truncated&gt;<br/><br/>class EmploymentCVDataExtractor(CVDataExtractor):<br/>    cv_data = Employments<br/>    def __init__(self):<br/>#      &lt;truncated&gt;<br/><br/>class SkillsCVDataExtractor(CVDataExtractor):<br/>    cv_data = Skills<br/>    def __init__(self):<br/>#      &lt;truncated&gt;</span></pre><p id="5621" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">We can now go up a level in the abstractions. With extractor agents in place, they should be joined to the raw data from which to extract, summarize, rewrite and distill the CV data content.</p><h2 id="4e36" class="of og gb bf oh oi oj ok ol om on oo op na oq or os ne ot ou ov ni ow ox oy oz bk">Orchestration of Data Retrieval and Extraction</h2><p id="7612" class="pw-post-body-paragraph mr ms gb mt b gz pa mv mw hc pb my mz na pc nc nd ne pd ng nh ni pe nk nl nm fj bk">The part of the data diagram to explain next is the highlighted part.</p><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div class="fv fw qe"><img src="../Images/dd763800d43e6dd6b387a934bb3bb9c0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1368/format:webp/1*2wfUdc7pF4QPyj5afQ8CZg.png"/></div></figure><p id="a0b0" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">In principle, we can give the extractor agents access to all possible text we have for the person we are making the CV for. But that means the agent has to process a great deal of data irrelevant to the specific section it is focused on, e.g. formal educational details are hardly found in personal stream-of-consciousness blogging.</p><p id="ec2a" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">This is where important questions of retrieval and search usually enter the design considerations of LLM-powered applications.</p><p id="1fbb" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Do we try to find the relevant raw data to apply our agents to, or do we throw all we have into the large context window and let the LLM sort out the retrieval question? <a class="af nn" href="https://cohere.com/blog/rag-is-here-to-stay" rel="noopener ugc nofollow" target="_blank">Many</a> <a class="af nn" href="https://x.com/Francis_YAO_/status/1758934303655030929" rel="noopener ugc nofollow" target="_blank">have had</a> <a class="af nn" href="https://www.reddit.com/r/MachineLearning/comments/1ax6j73/rag_vs_long_context_models_discussion/" rel="noopener ugc nofollow" target="_blank">their say</a> <a class="af nn" href="https://www.linkedin.com/posts/emollick_a-problem-with-rag-in-practice-i-asked-activity-7172666908230561792-muvu/" rel="noopener ugc nofollow" target="_blank">on the</a> <a class="af nn" href="https://www.llamaindex.ai/blog/towards-long-context-rag" rel="noopener ugc nofollow" target="_blank">matter</a>. It is a worthwhile debate because there is a lot of truth in the below statement:</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="oc od l"/></div></figure><p id="4205" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">For my application, I will keep it simple — retrieval and search are saved for another day.</p><p id="8924" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Therefore, I will work with semi-structured raw data. While we have a general understanding of the content of the respective documents, internally they consist mostly of unstructured text. This scenario is common in many real-world cases where useful information can be extracted from the metadata on a file system or data lake.</p><p id="c2f0" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The first piece in the retrieval puzzle is the data access object (DAO) for the template table of contents. At its core, that is a JSON string like this:</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><p id="9c2b" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">It associates the name of a CV template, e.g. <code class="cx pf pg ph pi b">single_column_0</code>, with a list of required data sections — the <code class="cx pf pg ph pi b">CVData</code> data classes described in an earlier section.</p><p id="7fd1" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Next, I encode which raw data access object should go with which CV data section. In my example, I have a modest collection of raw data sources, each accessible through a DAO, e.g. <code class="cx pf pg ph pi b">PersonsEmploymentDAO</code>.</p><pre class="nw nx ny nz oa pj pi pk bp pl bb bk"><span id="6d26" class="pm og gb pi b bg pn po l pp pq">_map_extractor_daos: Dict[str, Tuple[Type[DAO]]] = {<br/>    f'{EducationCVDataExtractor.cv_data.__name__}': (PersonsEducationDAO,),<br/>    f'{EmploymentCVDataExtractor.cv_data.__name__}': (PersonsEmploymentDAO,),<br/>    f'{BiographyCVDataExtractor.cv_data.__name__}': (PersonsEducationDAO, PersonsEmploymentDAO, PersonsMusingsDAO),<br/>    f'{SkillsCVDataExtractor.cv_data.__name__}': (PersonsEducationDAO, PersonsEmploymentDAO, PersonsSkillsDAO),<br/>}<br/>"""Map CV data types to DAOs that provide raw data for the CV data extractor agents<br/><br/>This allows for a pre-filtering of raw data that are passed to the extractors. For example,<br/>if the extractor is tailored to extract education data, then only the education DAO is used.<br/>This is strictly not needed since the Extractor LLM should be able to do the filtering itself,<br/>though at a higher token cost.<br/><br/>"""</span></pre><p id="45fe" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Note in this code that the Biography and Skills CV data are created from several raw data sources. These associations are easily modified if additional raw data sources become available — append the new DAO to the tuple — or made configurable at runtime.</p><p id="8e6d" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">It is then a matter of matching the raw data and the CV data extractor agents for each required CV section. That is the data flow that the <em class="oe">orchestrator</em> implements. The image below is a zoomed-in data flow diagram for the <code class="cx pf pg ph pi b">CVDataExtractionOrchestrator</code> execution.</p><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div role="button" tabindex="0" class="pw px ed py bh pz"><div class="fv fw qc"><img src="../Images/764f2ddeeb4df8fc556768bb24f2d28a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7-P0QLvmpJH9YtRwurxU7Q.png"/></div></div></figure><p id="f9e5" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">In code, the orchestrator is as follows:</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><p id="ace8" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">And putting it all together in the script <code class="cx pf pg ph pi b">make_cv</code> we have:</p><pre class="nw nx ny nz oa pj pi pk bp pl bb bk"><span id="0b86" class="pm og gb pi b bg pn po l pp pq">    # Step 2: Ascertain the data sections required by the CV template and collect the data<br/>    cv_data_orchestrator = CVDataExtractionOrchestrator(<br/>        client=anthropic_client,<br/>        relevant_qualities=ad_qualities,<br/>        n_words_employment=n_words_employment,<br/>        n_words_education=n_words_education,<br/>        n_skills=n_skills,<br/>        n_words_about_me=n_words_about_me,<br/>    )<br/>    template_required_cv_data = FormTemplatesToCDAO().get(cv_template, 'required_cv_data_types')<br/>    cv_data = {}<br/>    for required_cv_data in template_required_cv_data:<br/>        cv_data.update(cv_data_orchestrator.run(<br/>            cv_data_type=required_cv_data,<br/>            data_key=person_name<br/>        ))</span></pre><p id="55ab" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">It is within the orchestrator therefore that the calls to the Anthropic LLMs take place. Each call is done with a programmatically created instruction prompt, typically including the job ad summary, some parameters of how wordy the CV sections should be, plus the raw data, keyed on the name of the person.</p><p id="5c18" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The loop yields a collection of structured CV data class instances once all the agents that use tools have concluded their tasks.</p><h2 id="0ce3" class="of og gb bf oh oi oj ok ol om on oo op na oq or os ne ot ou ov ni ow ox oy oz bk">Interlude: None, &lt;UNKNOWN&gt;, “missing”</h2><p id="4045" class="pw-post-body-paragraph mr ms gb mt b gz pa mv mw hc pb my mz na pc nc nd ne pd ng nh ni pe nk nl nm fj bk">The Anthropic LLMs are remarkably good at matching their generated content to the output schema required to build the data classes. For example, I do <em class="oe">not</em> sporadically get a phone number in the email field, <em class="oe">nor</em> are invalid keys dreamt up, which would break the build functions of the data classes.</p><p id="70e5" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">But when I ran tests, I encountered an imperfection.</p><p id="0ca3" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Look again at how the Biography CV data is defined:</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><p id="b084" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">If for example, the LLM does not find a GitHub URL in a person’s raw data, then it is permissible to return <code class="cx pf pg ph pi b">None</code> for that field, since that attribute in the data class is optional. That is how I want it to be since it makes the rendering of the final CV simpler (see below).</p><p id="83b3" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">But the LLMs regularly return a string value instead, typically <code class="cx pf pg ph pi b">'&lt;UNKNOWN&gt;'</code>. To a human observer, there is no ambiguity about what this means. It is not a hallucination in that it is a fabrication that looks real yet is without basis in the raw data.</p><p id="7b1a" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">However, it is an issue for a rendering algorithm that uses simple conditional logic, such as the following in a Jinja template:</p><pre class="nw nx ny nz oa pj pi pk bp pl bb bk"><span id="13a5" class="pm og gb pi b bg pn po l pp pq">    &lt;div class="contact-info"&gt;<br/>        {{ biography.email }}<br/>        {% if biography.linkedin_url %} &amp;mdash; &lt;a href="{{ biography.linkedin_url }}"&gt;LinkedIn&lt;/a&gt;{% endif %}<br/>        {% if biography.phone %} &amp;mdash; {{ biography.phone }}{% endif %}<br/>        {% if biography.github_url %} &amp;mdash; &lt;a href="{{ biography.github_url }}"&gt;GitHub&lt;/a&gt;{% endif %}<br/>        {% if biography.blog_url %} &amp;mdash; &lt;a href="{{ biography.blog_url }}"&gt;Blog&lt;/a&gt;{% endif %}<br/>    &lt;/div&gt;</span></pre><p id="9a84" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">A problem that is semantically obvious to a human, but syntactically messy, is perfect for LLMs to deal with. Inconsistent labelling in the pre-LLM days caused many headaches and lengthy lists of creative string-matching commands (anyone who has done data migrations of databases with many free-text fields can attest to that).</p><p id="df10" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">So to deal with the imperfection, I create another agent that operates on the output of one of the other CV data extractor agents.</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><p id="fe25" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">This agent uses objects described in previous sections. The difference is that it takes a collection of CV data classes as input, and is instructed to empty any field “where the value is somehow labelled as unknown, undefined, not found or similar” (part of <a class="af nn" href="https://github.com/anderzzz/everyone_knows_it/blob/main/src/prompt_templates/ClearUndefinedCVDataEntries.txt" rel="noopener ugc nofollow" target="_blank">the full prompt</a>).</p><p id="d370" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">A joint agent is created. It first executes the creation of biography CV data, as described earlier. Second, it executes the <em class="oe">clear undefined agent</em> on the output of the former agent to fix issues with any &lt;UNKNOWN&gt; strings.</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><p id="9374" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">This agent solves the problem, and therefore I use it in the orchestration.</p><p id="a84b" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Could this imperfection be solved with a different instruction prompt? Or would a simple string-matching fix be adequate? Maybe.</p><p id="3062" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">However, I use the simplest and cheapest LLM of Anthropic (<em class="oe">haiku</em>), and because of the modular design of the agents, it is an easy fix to implement and append to the data pipeline. The ability to construct <em class="oe">joint agents</em> that comprise multiple other agents is one of the design patterns advanced agentic workflows use.</p><h2 id="d632" class="of og gb bf oh oi oj ok ol om on oo op na oq or os ne ot ou ov ni ow ox oy oz bk">Render With CV Data Objects Collection</h2><p id="a9c9" class="pw-post-body-paragraph mr ms gb mt b gz pa mv mw hc pb my mz na pc nc nd ne pd ng nh ni pe nk nl nm fj bk">The final step in the workflow is comparatively simple thanks to that we spent the effort to create structured and well-defined data objects. The contents of said objects are specifically placed within a Jinja HTML template through syntax matching.</p><p id="e08e" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">For example, if <code class="cx pf pg ph pi b">biography</code> is an instance of the Biography CV data class and <code class="cx pf pg ph pi b">env</code> a Jinja environment, then the following code</p><pre class="nw nx ny nz oa pj pi pk bp pl bb bk"><span id="ddf6" class="pm og gb pi b bg pn po l pp pq">template = env.get_template('test_template.html')<br/>template.render(biography=biography)</span></pre><p id="430d" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">would for <code class="cx pf pg ph pi b">test_template.html</code> like</p><pre class="nw nx ny nz oa pj pi pk bp pl bb bk"><span id="047e" class="pm og gb pi b bg pn po l pp pq">&lt;body&gt;<br/>    &lt;h1&gt;{{ biography.name }}&lt;/h1&gt;<br/>    &lt;div class="contact-info"&gt;<br/>      {{ biography.email }}<br/>    &lt;/div&gt;<br/>&lt;/body&gt;</span></pre><p id="75ee" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">match the name and email attributes of the <code class="cx pf pg ph pi b">Biography</code> data class and return something like:</p><pre class="nw nx ny nz oa pj pi pk bp pl bb bk"><span id="4851" class="pm og gb pi b bg pn po l pp pq">&lt;body&gt;<br/>    &lt;h1&gt;My N. Ame&lt;/h1&gt;<br/>    &lt;div class="contact-info"&gt;<br/>      my.n.ame@compuserve.com<br/>    &lt;/div&gt;<br/>&lt;/body&gt;</span></pre><p id="0033" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The function <code class="cx pf pg ph pi b">populate_html</code> takes all the generated CV Data objects and returns an HTML file using Jinja functionality.</p><figure class="nw nx ny nz oa fo"><div class="ob iz l ed"><div class="pu od l"/></div></figure><p id="1a00" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">In the script <code class="cx pf pg ph pi b">make_cv</code> the third and final step is therefore:</p><pre class="nw nx ny nz oa pj pi pk bp pl bb bk"><span id="11c2" class="pm og gb pi b bg pn po l pp pq">    # Step 3: Render the CV with data and template and save output<br/>    html = populate_html(<br/>        template_name=cv_template,<br/>        cv_data=list(cv_data.values()),<br/>    )<br/>    with open(output_file, 'w') as f:<br/>        f.write(html)</span></pre><p id="783b" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">This completes the agentic workflow. The raw data has been distilled, the content put inside structured data objects that mirror the information design of standard CVs, and the content rendered in an HTML template that encodes the style choices.</p><h2 id="233f" class="of og gb bf oh oi oj ok ol om on oo op na oq or os ne ot ou ov ni ow ox oy oz bk">What About the CV Templates — How to Make Them?</h2><p id="b25e" class="pw-post-body-paragraph mr ms gb mt b gz pa mv mw hc pb my mz na pc nc nd ne pd ng nh ni pe nk nl nm fj bk">The CV templates are Jinja templates of HTML files. Any tool that can create and edit HTML files can therefore be used to create a template. As long as the variable naming conforms to the names of the CV data classes, it will be compatible with the workflow.</p><p id="5ee9" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">So for example, the following part of a Jinja template would retrieve data attributes from an instance of <a class="af nn" href="https://github.com/anderzzz/everyone_knows_it/blob/6c96a71b3b1be18918a6caad96b9ec5c2148de2e/src/cv_data.py#L123" rel="noopener ugc nofollow" target="_blank">the </a><code class="cx pf pg ph pi b"><a class="af nn" href="https://github.com/anderzzz/everyone_knows_it/blob/6c96a71b3b1be18918a6caad96b9ec5c2148de2e/src/cv_data.py#L123" rel="noopener ugc nofollow" target="_blank">Employments</a></code><a class="af nn" href="https://github.com/anderzzz/everyone_knows_it/blob/6c96a71b3b1be18918a6caad96b9ec5c2148de2e/src/cv_data.py#L123" rel="noopener ugc nofollow" target="_blank"> CV data class</a>, and create a list of employments with descriptions (generated by the LLMs) and data on duration (if available):</p><pre class="nw nx ny nz oa pj pi pk bp pl bb bk"><span id="0f52" class="pm og gb pi b bg pn po l pp pq">            &lt;h2&gt;Employment History&lt;/h2&gt;<br/>            {% for employment in employments.employment_entries %}<br/>            &lt;div class="entry"&gt;<br/>                &lt;div class="entry-title"&gt;<br/>                    {{ employment.title }} at {{ employment.company }} ({{ employment.start_year }}{% if employment.end_year %} - {{ employment.end_year }}{% endif %}):<br/>                &lt;/div&gt;<br/>                {% if employment.description %}<br/>                &lt;div class="entry-description"&gt;<br/>                    {{ employment.description }}<br/>                &lt;/div&gt;<br/>                {% endif %}<br/>            &lt;/div&gt;<br/>            {% endfor %}</span></pre><p id="8442" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">I know very little about front-end development — even HTML and CSS are rare in the code I’ve written over the years.</p><p id="38c3" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">I decided therefore to use LLMs to create the CV templates. After all, this is a task in which I seek to map an appearance and design sensible and intuitive to a human observer to a string of specific HTML/Jinja syntax — a kind of task LLMs have proven quite apt at.</p><p id="ed7a" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">I chose not to integrate this with the agentic workflow but appended it in the corner of the data flow diagram as a useful appendix to the application.</p><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div role="button" tabindex="0" class="pw px ed py bh pz"><div class="fv fw qf"><img src="../Images/cb064fae0ba6e2198f511f7f9772e2f0.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Kql4lvgrNEzrfI8xZcxG5g.png"/></div></div></figure><p id="e754" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">I used Claude, the chat interface to Anthropic’s Sonnet LLM. I provided Claude with two things: an image and a prompt.</p><p id="3301" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The image is a crude outline of a single-column CV I cook up quickly using a word processor and then screen-dump.</p><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div role="button" tabindex="0" class="pw px ed py bh pz"><div class="fv fw qg"><img src="../Images/41dd269f292f1b11d7d877e4205301bd.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*f1cHqwXWjhR0lGWVnBTx0w.png"/></div></div><figcaption class="fs ft fu fv fw fx fy bf b bg z dx">screen dump of single-column CV layout used to guide Claude</figcaption></figure><p id="3630" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The <a class="af nn" href="https://github.com/anderzzz/everyone_knows_it/blob/main/template_creation_prompt/single_column.txt" rel="noopener ugc nofollow" target="_blank">prompt I give is fairly lengthy</a>. It consists of three parts.</p><p id="6092" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">First, a statement of what I wish to accomplish and what information I will provide Claude as Claude executes the task.</p><p id="ee34" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Part of the prompt of this section reads:</p><blockquote class="qh qi qj"><p id="422c" class="mr ms oe mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">I wish to create a Jinja2 template for a static HTML page. The HTML page is going to present a CV for a person. The template is meant to be rendered with Python with Python data structures as input.</p></blockquote><p id="330d" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Second, a verbal description of the layout. In essence, a description of the image above, top to bottom, with remarks about relative font sizes, the order of the sections etc.</p><p id="f775" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Third, a description of the data structures that I will use to render the Jinja template. In part, this prompt reads as shown in the image below:</p><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div role="button" tabindex="0" class="pw px ed py bh pz"><div class="fv fw qk"><img src="../Images/4515484bcc8bc49d64e0f742d087d9ae.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*C07zl-bqTxG9shzzyNkgjQ.png"/></div></div></figure><p id="1117" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The prompt continues listing all the CV data classes.</p><p id="8a7a" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">To a human interpreter, who is knowledgeable in Jinja templating, HTML and Python data classes, this information is sufficient to enable matching the semantic description of where to place the email in the layout to the syntax <code class="cx pf pg ph pi b">{{ biography.email }}</code> in the HTML Jinja template, and the description of where to place the LinkedIn profile URL (if available) in the layout to the syntax <code class="cx pf pg ph pi b">{% if biography.linkedin_url %} &lt;a href=”{{ biography.linkedin_url }}”&gt;LinkedIn&lt;/a&gt;{% endif }</code> and so on.</p><p id="ebad" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Claude executes the task perfectly — no need for me to manually edit the template.</p><p id="a97d" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">I ran the agent workflow with the single-column template and synthetic data for the persona <em class="oe">Gregor Samsa</em> (see more about him later).</p><pre class="nw nx ny nz oa pj pi pk bp pl bb bk"><span id="105e" class="pm og gb pi b bg pn po l pp pq">make_cv --job-ad-company "epic resolution index" \<br/>        --job-ad-title "luxury retail lighting specialist" \<br/>        --cv-template single_column_0 \<br/>        --person-name "gregor samsa" \<br/>        --output-file ../generated_output/cv_single_column_0.html \<br/>        --n-words-employment 50 --n-skills 8</span></pre><p id="efc8" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The output document:</p><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div class="fv fw ql"><img src="../Images/00c8cb4900f435bcf0f717ad40ac1436.png" data-original-src="https://miro.medium.com/v2/resize:fit:848/format:webp/1*Lbrov2AECtsMThBTEizA6A.png"/></div></figure><p id="1c6a" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">A decent CV. But I wanted to create variations and see what Claude and I could cook up.</p><p id="212c" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">So I created another prompt and screen dump. This time for a two-column CV. The crude outline I drew up:</p><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div role="button" tabindex="0" class="pw px ed py bh pz"><div class="fv fw qm"><img src="../Images/b8a72bd271bd9026d8dd44b5168cf295.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*_CJeoq4lRqh9oK8aDXTSCg.png"/></div></div><figcaption class="fs ft fu fv fw fx fy bf b bg z dx">screen dump of two-column CV layout used to guide Claude</figcaption></figure><p id="a26e" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">I reused the prompt for the single column, only changing the second part where I in words describe the layout.</p><p id="8f2e" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">It worked perfectly again.</p><p id="34b7" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The styling, though, was a bit too bland for my taste. So as a follow-up prompt to Claude, I wrote:</p><blockquote class="qh qi qj"><p id="582e" class="mr ms oe mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Love it! Can you redo the previous task but with one modification: add some spark and colour to it. Arial font, black and white is all a bit boring. I like a bit of green and nicer looking fonts. Wow me! Of course, it should be professional-looking still.</p></blockquote><p id="e296" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Had Claude responded with an annoyed comment that I must be a bit more specific, I would have empathized (in some sense of that word). Rather, Claude’s generative juices flowed and a template was created that when rendered looked like this:</p><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div class="fv fw pr"><img src="../Images/bc89250d3d5365bdbaf4bbcd618e1415.png" data-original-src="https://miro.medium.com/v2/resize:fit:1056/format:webp/1*sLERhnAz8q4m0h3vHnpNTw.png"/></div></figure><p id="e27d" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Nice!</p><p id="92a3" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Notably, the fundamental layout in the crude outline is preserved in this version: the placement of sections, the relative width of the two columns, and the lack of descriptions in the education entries etc. Only the style changed and was consistent with the vague specifications given. Claude’s generative capacities filled in the gaps quite well in my judgment.</p><p id="da81" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">I next explored if Claude could keep the template layout and content specifications clear and consistent even when I dialled up the styling to eleven. So I wrote next to Claude:</p><blockquote class="qh qi qj"><p id="89f0" class="mr ms oe mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Amazing. But now I want you to go all out! We are talking early 1990s web page aesthetic, blinking stuff, comic sans in the oddest places, weird and crazy colour contrasts. Full speed ahead, Claude, have some fun.</p></blockquote><p id="77b3" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The result was glorious.</p><figure class="nw nx ny nz oa fo fv fw paragraph-image"><div role="button" tabindex="0" class="pw px ed py bh pz"><div class="fv fw qf"><img src="../Images/af654e943018cd04016c4b30ae751e17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*yemM-wGg33Y_tocQvr_HxQ.gif"/></div></div></figure><p id="fd91" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk"><em class="oe">Who is this Gregor Samsa, what a free-thinker and not a trace of anxiety — hire the guy!</em></p><p id="62c7" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Even with this extreme styling, the specified layout is mostly preserved, and the text content as well. With a detailed enough prompt, Claude can seemingly create functional and nicely styled templates that can be part of the agentic workflow.</p><h2 id="e172" class="of og gb bf oh oi oj ok ol om on oo op na oq or os ne ot ou ov ni ow ox oy oz bk">What About the Text Output?</h2><p id="5648" class="pw-post-body-paragraph mr ms gb mt b gz pa mv mw hc pb my mz na pc nc nd ne pd ng nh ni pe nk nl nm fj bk">Eye-catching style and useful layout aside, a CV must contain abbreviated text that succinctly and truthfully shows the fit between person and position.</p><p id="3705" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">To explore this I created synthetic data for a person <a class="af nn" href="https://de.wikipedia.org/wiki/Die_Verwandlung#Gregor_Samsa" rel="noopener ugc nofollow" target="_blank">Gregor Samsa</a> — educated in Central Europe, working in lighting sales, with a general interest in entomology. I generated raw data on Gregor’s past and present, some from my imagination, and some from LLMs. The details are not important. The key point is that the text is too muddled and unwieldy to be copy-pasted into a CV. The data has to be found (e.g. the email address appears within one of Gregor’s general musings), summarized (e.g. the description of Gregor’s PhD work is very detailed), distilled and tailored to the relevant position (e.g. which skills are worth bringing to the fore), and all reduced to one or two friendly sentences in an about me section.</p><p id="de07" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">The text outputs were very well made. I had Anthropic’s most advanced and eloquent model, Sonnet, write the About Me sections. The tone rang true.</p><p id="1dbc" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">In my tests, I found no outright hallucinations. However, the LLMs had taken certain liberties in the Skills section.</p><p id="64fc" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Gregor is described in the raw data as working and studying in Prague and Vienna mostly with some online classes from English-language educators. In one generated CV, language skills in Czech, German and English were listed despite that the raw data does not explicitly declare such knowledge. The LLM had made a reasonable inference of skills. Still, these were not skills abstracted from the raw data alone.</p></div></div></div><div class="ab cb qn qo qp qq" role="separator"><span class="qr by bm qs qt qu"/><span class="qr by bm qs qt qu"/><span class="qr by bm qs qt"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="1694" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">All code and synthetic data are available in <a class="af nn" href="https://github.com/anderzzz/everyone_knows_it/" rel="noopener ugc nofollow" target="_blank">my GitHub repo</a>. I used Python 3.11 to run it, and as long as you have an API key to Anthropic (assumed by the script to be stored in the environment variable <code class="cx pf pg ph pi b">ANTHROPIC_API_KEY</code>), you can run and explore the application — and of course, to the best of my understanding, there are no errors, but I make no guarantees.</p><p id="3f68" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">This tutorial has shown one way to use generative AI, made a case for useful constraints in generative applications, and shown how it all can be implemented working directly with the Anthropic APIs. Though CV creation is not an advanced task, the principles and designs I covered can be a foundation for other non-chat applications with greater value and complexity.</p><p id="5c5b" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk">Happy building!</p></div></div></div><div class="ab cb qn qo qp qq" role="separator"><span class="qr by bm qs qt qu"/><span class="qr by bm qs qt qu"/><span class="qr by bm qs qt"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="d0f8" class="pw-post-body-paragraph mr ms gb mt b gz mu mv mw hc mx my mz na nb nc nd ne nf ng nh ni nj nk nl nm fj bk"><em class="oe">All images, graphs and code created by the Author.</em></p></div></div></div></div>    
</body>
</html>