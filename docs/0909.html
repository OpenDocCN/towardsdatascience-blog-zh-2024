<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>How to build your own AI assistant for bookmark searching?</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>How to build your own AI assistant for bookmark searching?</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-build-your-own-ai-assistant-for-bookmark-searching-7e3dcc17e3fc?source=collection_archive---------11-----------------------#2024-04-09">https://towardsdatascience.com/how-to-build-your-own-ai-assistant-for-bookmark-searching-7e3dcc17e3fc?source=collection_archive---------11-----------------------#2024-04-09</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="6e3c" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">A step-by-step guide for an automated GPT-based bookmark searching pipeline</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@swsychen?source=post_page---byline--7e3dcc17e3fc--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Jiaqi Chen" class="l ep by dd de cx" src="../Images/c2ed8f7ef6f52e96081dab5fa88aa883.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*lznxhj4YhXebdsXl3zrEjQ.jpeg"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--7e3dcc17e3fc--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@swsychen?source=post_page---byline--7e3dcc17e3fc--------------------------------" rel="noopener follow">Jiaqi Chen</a></p></div></div></div><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ib ic ah ai aj ak al am an ao ap aq ar id ie if" disabled="">Follow</button></p></div></div></span></div></div><div class="l ig"><span class="bf b bg z dx"><div class="ab cn ih ii ij"><div class="ik il ab"><div class="bf b bg z dx ab im"><span class="in l ig">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--7e3dcc17e3fc--------------------------------" rel="noopener follow"><p class="bf b bg z io ip iq ir is it iu iv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">9 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Apr 9, 2024</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w ea eb q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon ed in kg kh ki"><div class=""><div class="kj kk kl km kn ko kp am kq kr ks ki"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kt ku kv kw kx ky kz"><p class="bf b dy z dx"><span class="kk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kj la lb ab q ee lc ld" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="le"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lf k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lg an ao ap id lh li lj" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep lk cn"><div class="l ae"><div class="ab cb"><div class="ll lm ln lo lp lq ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj mk"><img src="../Images/fa51dbd9b13fac628bfb7ab78a40b999.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*bEPnFU7QPsJF-VkVx9FWgA.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Image by Author.</figcaption></figure><p id="a3e2" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">Have you encountered moments when searching for a specific bookmark in your Chrome browser only to find that you’re overwhelmed by their sheer number? It becomes quite tedious and draining to sift through your extensive collection of bookmarks.</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj nx"><img src="../Images/8bba0292c8e8539ffd68eae911cfc8a6.png" data-original-src="https://miro.medium.com/v2/resize:fit:718/format:webp/1*_su68yYScwjkTr6IPC-5kA.png"/></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Bookmark ocean. — Snapshot from author’s Google Chrome bookmark.</figcaption></figure><p id="4ac2" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">Actually, we can simply leave it to ChatGPT which is currently the most popular AI model that can basically answer everything we ask. Imagine, if it can gain access to the bookmarks we have, then bingo! Problem solved! We can then ask it to give us the specific link we want from the entire bookmark storage, like the following GIF:</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj ny"><img src="../Images/93760a5cdc9e192d916a66a097ceac30.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mt1fZYvA6BkGmMLW37UI3g.gif"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Showcasing the usage of the AI assistant. — GIF from screen recording.</figcaption></figure><p id="f62c" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">To achieve this, I built a real-time pipeline to update the Chrome bookmarks into a vector database that ChatGPT will use as the context for our questions. I will explain in this article step by step how to build such a pipeline and you will eventually have your own one too!</p></div></div></div><div class="ab cb nz oa ob oc" role="separator"><span class="od by bm oe of og"/><span class="od by bm oe of og"/><span class="od by bm oe of"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="00b0" class="oh oi fq bf oj ok ol gq om on oo gt op oq or os ot ou ov ow ox oy oz pa pb pc bk">Features</h1><p id="c6f9" class="pw-post-body-paragraph nb nc fq nd b go pd nf ng gr pe ni nj nk pf nm nn no pg nq nr ns ph nu nv nw fj bk">Before we begin, let’s count the advantages of it:</p><ol class=""><li id="34e9" class="nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw pi pj pk bk">Unlike traditional search engines (like the one in Chrome bookmark manager), AI models can have a good semantic understanding of each title. If you forget the exact keyword when searching bookmarks, you can simply draw a rough outline and ChatGPT can get it! It can even understand titles in a different language. Truly remarkable.</li></ol><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj pl"><img src="../Images/4aaecd3196df8144fa60fc47788bfe60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*zuJ4qWGZrYbtCats5Kbg3Q.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">What ChatGPT can do. — Snapshot from the AI assistant interface</figcaption></figure><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj pm"><img src="../Images/91b1fe29a7c7382ee111bf263df0b22f.png" data-original-src="https://miro.medium.com/v2/resize:fit:738/format:webp/1*irgvqEXuZsjHYtr553wuAw.png"/></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">When the Chrome bookmark search engine fails. — Snapshot from author’s Google Chrome bookmark manager</figcaption></figure><p id="55d4" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">2. Everything is automatically up-to-date. Each newly added bookmark will be automatically reflected in the AI knowledge database simply within a few minutes.</p></div></div></div><div class="ab cb nz oa ob oc" role="separator"><span class="od by bm oe of og"/><span class="od by bm oe of og"/><span class="od by bm oe of"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="631f" class="oh oi fq bf oj ok ol gq om on oo gt op oq or os ot ou ov ow ox oy oz pa pb pc bk">Pipeline Overview</h1></div></div><div class="mq"><div class="ab cb"><div class="ll pn lm po ln pp cf pq cg pr ci bh"><figure class="ml mm mn mo mp mq pt pu paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj ps"><img src="../Images/72b7336d53b94b2b896d47f6f91348c4.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*D8M41XsWGeXp1e5IC818KA.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">All the components in the pipeline. — Image by Author.</figcaption></figure></div></div></div><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="5abb" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">Here you can see the role of each component in our pipeline. The Chrome bookmarks are extracted into rows of a Google Sheet using our customized Chrome plugin. The Estuary Flow gets (or captures) all the sheet data which will then be vectorized (or materialized) by an embedding model using OpenAI API. All the embeddings (each vector corresponds to each row of the sheet — i.e. each single bookmark) will be retrieved and stored in the Pinecone vector database. After that, the user can give prompts to the built app using Streamlit and LangChain (e.g. “Are there links for dinov2?”). It will first retrieve some similar embeddings from Pinecone (getting a context/several potential bookmark options) and combine them with the user’s question as input to ChatGPT. Then ChatGPT will consider every possible bookmark and give a final answer to you. This process is also called RAG: Retrieval Augmented Generation.</p><p id="ff56" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">In the following parts, we will see how to build such a pipeline step by step.</p></div></div></div><div class="ab cb nz oa ob oc" role="separator"><span class="od by bm oe of og"/><span class="od by bm oe of og"/><span class="od by bm oe of"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="2a3b" class="oh oi fq bf oj ok ol gq om on oo gt op oq or os ot ou ov ow ox oy oz pa pb pc bk">Chrome Plugin for bookmark retrieval</h1><p id="fe31" class="pw-post-body-paragraph nb nc fq nd b go pd nf ng gr pe ni nj nk pf nm nn no pg nq nr ns ph nu nv nw fj bk">Code: <a class="af pv" href="https://github.com/swsychen/Boomark2Sheet_Chromeplugin" rel="noopener ugc nofollow" target="_blank">https://github.com/swsychen/Boomark2Sheet_Chromeplugin</a></p><p id="b72c" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">To transport bookmarks into a Google Sheet for further processing, we need to build a customized Chrome plugin (or extension) first.</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj pw"><img src="../Images/5af65140f3085e012598b1b553994783.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WxoJLRcKwJKGO3YC2btIkQ.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Code structure overview for a Chrome plugin. — Snapshot from author’s vscode.</figcaption></figure><p id="ecc0" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">The most important file for a Chrome extension is the <em class="px">manifest.json</em>, which defines the high-level structure and behavior of the plugin. Here we add the necessary <em class="px">permissions</em> to use the bookmark API from Google Chrome and track the changes in the bookmarks. We also have a field for <em class="px">oauth2</em> authentication because we will use the Google Sheet API. You will need to put your own <em class="px">client_id</em> in this field. You can mainly follow the <strong class="nd fr">Set up your environment</strong> section<strong class="nd fr"> </strong>in this <a class="af pv" href="https://developers.google.com/sheets/api/quickstart/js" rel="noopener ugc nofollow" target="_blank">link</a> to get the <em class="px">client_id</em> and a Google Sheet API key (we will use it later). Something you should notice is:</p><ol class=""><li id="716a" class="nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw pi pj pk bk">In <strong class="nd fr">OAuth consent screen</strong>, you need to add yourself (Gmail address) as the test user. Otherwise, you will not be allowed to use the APIs.</li><li id="76c4" class="nb nc fq nd b go py nf ng gr pz ni nj nk qa nm nn no qb nq nr ns qc nu nv nw pi pj pk bk">In <strong class="nd fr">Create OAuth client ID</strong>, the application type you should choose is <em class="px">Chrome extension </em>(not the Web application as in the quickstart link). The <em class="px">Item ID</em> needed to be specified is the plugin ID (we will have it when we load our plugin and you can find it in the extension manager).</li></ol><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj qd"><img src="../Images/47ee7d50d430edb20cdc70fde8b3ce99.png" data-original-src="https://miro.medium.com/v2/resize:fit:874/format:webp/1*1BW_MoA1UK-JtVXZel1hMw.png"/></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">The blurred part is the Item ID. — Snapshot from author’s Google Chrome extension manager.</figcaption></figure><p id="ef39" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">The core functional file is <em class="px">background.js</em>, which can do all the syncs in the background. I’ve prepared the code for you in the GitHub link, the only thing you need to change is the <em class="px">spreadsheetId</em> at the start of the javascript file. This id you can identify it in the sharing link of your created Google Sheet (after d/ and before /edit, and yes you need to manually create a Google Sheet first!):</p><p id="64e1" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk"><a class="af pv" href="https://docs.google.com/spreadsheets/d/spreadsheetId/edit#gid=" rel="noopener ugc nofollow" target="_blank">https://docs.google.com/spreadsheets/d/{<strong class="nd fr">spreadsheetId}</strong>/edit#gid=</a>0</p><p id="b162" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">The main logic of the code is to listen to any change in your bookmarks and refresh (clear + write) your Sheet file with all the bookmarks you have when the plugin is triggered (e.g. when you add a new bookmark). It writes the id, title, and URL of each bookmark into a separate row in your specified Google Sheet.</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj qe"><img src="../Images/8372d2161ec199c9907d2f69d57b0ec7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*rUZqa_O53f5ATSQy-UbSsA.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">What it looks like in your Google Sheet. — Snapshot from author’s Google Sheet.</figcaption></figure><p id="40b8" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">The last file <em class="px">popup.html </em>is basically not that useful as it only defines the content it shows in the popup window when you click the plugin button in your Chrome browser.</p><p id="fbab" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">After you make sure all the files are in a single folder, now you are ready to upload your plugin:</p><ol class=""><li id="b188" class="nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw pi pj pk bk">Go to the <strong class="nd fr">Extensions&gt;Manage Extensions</strong> of your Chrome browser, and turn on the <strong class="nd fr">Developer mode</strong> on the top right of the page.</li><li id="de2c" class="nb nc fq nd b go py nf ng gr pz ni nj nk qa nm nn no qb nq nr ns qc nu nv nw pi pj pk bk">Click the <strong class="nd fr">Load unpacked</strong> and choose the code folder. Then your plugin will be uploaded and running. Click the hyperlink <em class="px">service worker</em> to see the printed log info from the code.</li></ol><p id="a1e9" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">Once uploaded, the plugin will stay operational as long as the Chrome browser is open. And it’ll also automatically start running when you re-open the browser.</p><h1 id="f7fd" class="oh oi fq bf oj ok qf gq om on qg gt op oq qh os ot ou qi ow ox oy qj pa pb pc bk">Setting up Estuary Flow and Pinecone</h1><p id="eae3" class="pw-post-body-paragraph nb nc fq nd b go pd nf ng gr pe ni nj nk pf nm nn no pg nq nr ns ph nu nv nw fj bk">Estuary Flow is basically a connector that syncs the database with the data source you provided. In our case, when Estuary Flow syncs data from a Google Sheet into a vector database — Pinecone, it will also call an embedding model to transform the data into embedding vectors which will then be stored in the Pinecone database.</p><p id="98ce" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">For setting up Estuary Flow and Pinecone, there is already a quite comprehensive video tutorial on YouTube: <a class="af pv" href="https://youtu.be/qyUmVW88L_A?si=xZ-atgJortObxDi-" rel="noopener ugc nofollow" target="_blank">https://youtu.be/qyUmVW88L_A?si=xZ-atgJortObxDi-</a></p><p id="8263" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">But please pay attention! Because the Estuary Flow and Pinecone are in fast development. Some points in the video have changed by now, which may cause confusion. Here I list some updates to the video so that you can replicate everything easily:</p><p id="fae3" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">1.<strong class="nd fr">(Estuary Flow&gt;create Capture)</strong> In row batch size, you may set some larger numbers according to the total row numbers in your Google Sheet for bookmarks. (e.g. set it to 600 if you’ve already got 400+ rows of bookmarks)</p><p id="28b0" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">2. <strong class="nd fr">(Estuary Flow&gt;create Capture) </strong>When setting <strong class="nd fr">Target Collections</strong>, delete the cursor field “row_id” and add a new one “ID” like the following screenshot. You can keep the namespace empty.</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj qk"><img src="../Images/9c2c5c18089c72a0f3abf3e4c2a0d6e7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QdHtWF0Wnr7u-lDT7wtOcQ.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Change Cursor Field. — Snapshot from the <a class="af pv" href="https://dashboard.estuary.dev/captures" rel="noopener ugc nofollow" target="_blank">Sources</a> on Estuary Flow (April 2024)</figcaption></figure><p id="c2b0" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">3. <strong class="nd fr">(Estuary Flow&gt;create Capture) </strong>Then switch to the <strong class="nd fr">COLLECTION</strong> subtab, press <strong class="nd fr">EDIT</strong> to change the Key from /row_id to /ID. And you should also change the “required” field of the schema code to “ID” like the following:</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj ql"><img src="../Images/613a64c56a48bbc4e7aef58be94d7ed3.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1noAI0gdB9B35f60_tyH9Q.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Change Key and Schema. — Snapshot from the <a class="af pv" href="https://dashboard.estuary.dev/captures" rel="noopener ugc nofollow" target="_blank">Sources</a> on Estuary Flow (April 2024)</figcaption></figure><pre class="ml mm mn mo mp qm qn qo bp qp bb bk"><span id="3844" class="qq oi fq qn b bg qr qs l qt qu">    //...skipped<br/>    "URL": {<br/>      "type": "string"<br/>    },<br/>    "row_id": {<br/>      "type": "integer"<br/>    }<br/>  },<br/>  "required": [<br/>    "ID"<br/>  ],<br/>  "type": "object"<br/>}</span></pre><p id="145f" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">After “SAVE AND PUBLISH”, you can see that <strong class="nd fr">Collections&gt;{your collection name}&gt;Overview&gt;Data Preview</strong> will show the correct ID of each bookmark.</p><p id="5234" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">4. <strong class="nd fr">(Estuary Flow&gt;create Capture) </strong>In the last step, you can see an <strong class="nd fr">Advanced Specification Editor (</strong>in the bottom of the page). Here you can add a field “interval”: 10m to decrease the refresh rate to per 10 minutes (default setting is per 5 minutes if not specified). Each refresh will call the OpenAI embedding model to redo all the embedding which will cost some money. Decreasing the rate is to save half of the money. You can ignore the “backfill” field.</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj qv"><img src="../Images/28d40518a945a1f33da7e255ec17d38f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*BFm3_PgdT4B8mYZFQS7cqw.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Specify the interval. — Snapshot from the <a class="af pv" href="https://dashboard.estuary.dev/captures" rel="noopener ugc nofollow" target="_blank">Sources</a> on Estuary Flow (April 2024)</figcaption></figure><pre class="ml mm mn mo mp qm qn qo bp qp bb bk"><span id="4a9e" class="qq oi fq qn b bg qr qs l qt qu">        //...skipped<br/>        "syncMode": "full_refresh"<br/>      },<br/>      "target": "CJQ/mybookmark/bookmarks_v3"<br/>    }<br/>  ],<br/>  "interval": "10m"<br/>}</span></pre><p id="c8e7" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">5. <strong class="nd fr">(Estuary Flow&gt;create Materialization) </strong>The Pinecone environment is typically “gcp-starter” for a free-tier Pinecone index or like “us-east-1-aws” for standard-plan users (I don’t use serverless mode in Pinecone because the Estuary Flow has not yet provided a connector for the Pinecone serverless mode). The Pinecone index is the index name when you create the index in Pinecone.</p><p id="aba1" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">6. <strong class="nd fr">(Estuary Flow&gt;create Materialization) </strong>Here are some tricky parts.</p><ul class=""><li id="c3a7" class="nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw qw pj pk bk">First, you should select the source capture using the blue button “SOURCE FROM CAPTURE” and then leave the Pinecone namespace in “CONFIG” <strong class="nd fr">EMPTY</strong> (the free tier of Pinecone must have an empty namespace).</li><li id="528d" class="nb nc fq nd b go py nf ng gr pz ni nj nk qa nm nn no qb nq nr ns qc nu nv nw qw pj pk bk">Second, after pressing “NEXT”, in the emerged <strong class="nd fr">Advanced Specification Editor</strong> of the materialization, you must make sure that the “bindings” field is NOT EMPTY. Fill in the content as in the following screenshot if it is empty or the field does not exist, otherwise, it won’t send anything to Pinecone. Also, you need to change the “source” field using your own Collection path (same as the “target” in the previous screenshot). If some errors pop up after you press “NEXT” and before you can see the editor, press “NEXT” again, and you will see the <strong class="nd fr">Advanced Specification Editor</strong>. Then you can specify the “bindings” and press “SAVE AND PUBLISH”. Everything should be ok after this step. The errors occur because we didn’t specify the “bindings” before.</li><li id="9628" class="nb nc fq nd b go py nf ng gr pz ni nj nk qa nm nn no qb nq nr ns qc nu nv nw qw pj pk bk">If there is another error message coming up after you have published everything and just returned to the Destination page telling you that you have not added a collection, simply ignore it as long as you see the usage is not zero in the OVERVIEW histogram (see the following screenshots). The histogram basically means how much data it has sent to Pinecone.</li></ul><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj qx"><img src="../Images/2d10fb5774747c57bb9acf84fa704f72.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kd4SfI0VAmknmQmJ3q6tQQ.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Make sure the “bindings” field is filled in like this. — Snapshot from the <a class="af pv" href="https://dashboard.estuary.dev/materializations" rel="noopener ugc nofollow" target="_blank">Destinations</a> on Estuary Flow (April 2024)</figcaption></figure><pre class="ml mm mn mo mp qm qn qo bp qp bb bk"><span id="7e40" class="qq oi fq qn b bg qr qs l qt qu">"bindings": [<br/>    {<br/>      "resource": {},<br/>      "source": "CJQ/mybookmark/bookmarks_v3",<br/>      "fields": {<br/>        "recommended": true<br/>      }<br/>    }<br/>  ],</span></pre><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj qy"><img src="../Images/fb9052853ee79c9353c16a636eb6d27b.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/1*noa2bgNfUY-rxaDnTuhW5g.png"/></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Don’t panic about the error, press “NEXT” again. — Snapshot from the <a class="af pv" href="https://dashboard.estuary.dev/materializations" rel="noopener ugc nofollow" target="_blank">Destinations</a> on Estuary Flow (April 2024)</figcaption></figure><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj qz"><img src="../Images/7152326e44aec06f9b8ce43eb9ed77a7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GoZWoY8EVCYFW49ksIjUkA.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Make sure the usage in OVERVIEW is not empty. — Snapshot from the <a class="af pv" href="https://dashboard.estuary.dev/materializations" rel="noopener ugc nofollow" target="_blank">Destinations</a> on Estuary Flow (April 2024)</figcaption></figure><p id="90f6" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">7. <strong class="nd fr">(Pinecone&gt;create index)</strong> Pinecone has come up with serverless index mode (free but not supported by Estuary Flow yet) but I don’t use it in this project. Here we still use the pod-based option (not free anymore since last checked on April 14, 2024) which is well enough for our bookmark embedding storage. When creating an index, all you need is to set the index name and dimensions.</p><p id="9f97" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">8. (<strong class="nd fr">Pinecone&gt;Indexes&gt;{Your index}</strong>) After you finish the creation of the Pinecone index and make sure the index name and environment are filled in correctly in the materialization of Estuary Flow, you are set. In the Pincone console, go to <strong class="nd fr">Indexes&gt;{Your index} </strong>and you should see the vector count showing the total number of your bookmarks. It may take a few minutes until the Pinecone receives information from Estuary Flow and shows the correct vector count.</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj ra"><img src="../Images/b21c7612899595cb92a6eb5730e40388.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9mKZq5g5wt4mIgQzF5u_cg.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">Here I have 402 bookmarks, so the vector count shows 402. — Snapshot from <a class="af pv" href="https://app.pinecone.io/organizations" rel="noopener ugc nofollow" target="_blank">Pinecone</a> (April 2024)</figcaption></figure><h1 id="cae3" class="oh oi fq bf oj ok qf gq om on qg gt op oq qh os ot ou qi ow ox oy qj pa pb pc bk">Building your own App with Streamlit and Langchain</h1><p id="28ad" class="pw-post-body-paragraph nb nc fq nd b go pd nf ng gr pe ni nj nk pf nm nn no pg nq nr ns ph nu nv nw fj bk">Code: <a class="af pv" href="https://github.com/swsychen/BookmarkAI_App" rel="noopener ugc nofollow" target="_blank">https://github.com/swsychen/BookmarkAI_App</a></p><p id="dc5b" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">We are almost there! The last step is to build a beautiful interface just like the original ChatGPT. Here we use a very convenient framework called Streamlit, with which we can build an app in only a few lines of code. Langchain is also a user-friendly framework for using any large language model with minimum code.</p><p id="b084" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">I’ve also prepared the code for this App for you. Follow the installation and usage guide in the GitHub link and enjoy!</p><p id="5d39" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">The main logic of the code is:</p><p id="9afe" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">get user prompt → create a retriever chain with ChatGPT and Pinecone → input the prompt to the chain and get a response → stream the result to the UI</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="mr ms ed mt bh mu"><div class="mi mj rb"><img src="../Images/0ba3ea98dfef6f6b6c6e309e7a90e10a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ArPET7rPAr_ZPH69qs98Hg.png"/></div></div><figcaption class="mw mx my mi mj mz na bf b bg z dx">The core part of the code. — Snapshot from author’s vscode.</figcaption></figure><p id="057c" class="pw-post-body-paragraph nb nc fq nd b go ne nf ng gr nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw fj bk">Please notice, that because the Langchain is in development, the code may be deprecated if you use a newer version other than the stated one in requirements.txt. If you want to dig deeper into Langchain and use another LLM for this bookmark searching, feel free to look into the <a class="af pv" href="https://python.langchain.com/docs/get_started/introduction/" rel="noopener ugc nofollow" target="_blank">official documents </a>of Langchain.</p></div></div></div><div class="ab cb nz oa ob oc" role="separator"><span class="od by bm oe of og"/><span class="od by bm oe of og"/><span class="od by bm oe of"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="e898" class="oh oi fq bf oj ok ol gq om on oo gt op oq or os ot ou ov ow ox oy oz pa pb pc bk">Outro</h1><p id="a08a" class="pw-post-body-paragraph nb nc fq nd b go pd nf ng gr pe ni nj nk pf nm nn no pg nq nr ns ph nu nv nw fj bk">This is the first tutorial post I’ve ever written. If there is anything unclear that needs to be improved or clarified, feel free to leave messages.</p></div></div></div></div>    
</body>
</html>