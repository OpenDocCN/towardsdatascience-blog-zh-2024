<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>SQL vs. Calculators: Building Champion/Challenger Tests from Scratch</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>SQL vs. Calculators: Building Champion/Challenger Tests from Scratch</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/sql-vs-calculators-building-champion-challenger-tests-from-scratch-b457dc43d784?source=collection_archive---------9-----------------------#2024-12-04">https://towardsdatascience.com/sql-vs-calculators-building-champion-challenger-tests-from-scratch-b457dc43d784?source=collection_archive---------9-----------------------#2024-12-04</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h2 id="857f" class="fo fp fq bf b dy fr fs ft fu fv fw dx fx" aria-label="kicker paragraph">CODE OR CLICK: WHAT IS BETTER FOR A/B TESTING</h2><div/><div><h2 id="a444" class="pw-subtitle-paragraph gs fz fq bf b gt gu gv gw gx gy gz ha hb hc hd he hf hg hh cq dx">In depth SQL code for creating your own statistical test design</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hi hj hk hl hm ab"><div><div class="ab hn"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@govadaharika?source=post_page---byline--b457dc43d784--------------------------------" rel="noopener follow"><div class="l ho hp by hq hr"><div class="l ed"><img alt="Harika Govada" class="l ep by dd de cx" src="../Images/fdcd28b36eacb5538bb72b59e02a176f.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*Td7Su9IGdUl_ClNRR-1RKA.jpeg"/><div class="hs by l dd de em n ht eo"/></div></div></a></div></div><div class="hu ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--b457dc43d784--------------------------------" rel="noopener follow"><div class="l hv hw by hq hx"><div class="l ed"><img alt="Towards Data Science" class="l ep by br hy cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hs by l br hy em n ht eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hz ab q"><div class="ab q ia"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b ib ic bk"><a class="af ag ah ai aj ak al am an ao ap aq ar id" data-testid="authorName" href="https://medium.com/@govadaharika?source=post_page---byline--b457dc43d784--------------------------------" rel="noopener follow">Harika Govada</a></p></div></div></div><span class="ie if" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b ib ic dx"><button class="ig ih ah ai aj ak al am an ao ap aq ar ii ij ik" disabled="">Follow</button></p></div></div></span></div></div><div class="l il"><span class="bf b bg z dx"><div class="ab cn im in io"><div class="ip iq ab"><div class="bf b bg z dx ab ir"><span class="is l il">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar id ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--b457dc43d784--------------------------------" rel="noopener follow"><p class="bf b bg z it iu iv iw ix iy iz ja bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="ie if" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">13 min read</span><div class="jb jc l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Dec 4, 2024</span></div></span></div></span></div></div></div><div class="ab cp jd je jf jg jh ji jj jk jl jm jn jo jp jq jr js"><div class="h k w ea eb q"><div class="ki l"><div class="ab q kj kk"><div class="pw-multi-vote-icon ed is kl km kn"><div class=""><div class="ko kp kq kr ks kt ku am kv kw kx kn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l ky kz la lb lc ld le"><p class="bf b dy z dx"><span class="kp">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao ko lh li ab q ee lj lk" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lg"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count lf lg">1</span></p></button></div></div></div><div class="ab q jt ju jv jw jx jy jz ka kb kc kd ke kf kg kh"><div class="ll k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lm an ao ap ii ln lo lp" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep lq cn"><div class="l ae"><div class="ab cb"><div class="lr ls lt lu lv lw ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lm an ao ap ii lx ly lk lz ma mb mc md s me mf mg mh mi mj mk u ml mm mn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lm an ao ap ii lx ly lk lz ma mb mc md s me mf mg mh mi mj mk u ml mm mn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lm an ao ap ii lx ly lk lz ma mb mc md s me mf mg mh mi mj mk u ml mm mn"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mr ms mt mu mv mw mo mp paragraph-image"><div class="mo mp mq"><img src="../Images/f5f74f94090bf8c9dd7891e7f469c217.png" data-original-src="https://miro.medium.com/v2/resize:fit:1286/format:webp/1*KL8Si4MSXuCZCFD2y7l0Dg.png"/></div><figcaption class="my mz na mo mp nb nc bf b bg z dx">Image from Imagen 3</figcaption></figure><h2 id="984e" class="nd ne fq bf nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz fw bk">The $300 Million Button: How A/B Testing Changed E-Commerce Forever</h2><p id="d055" class="pw-post-body-paragraph oa ob fq oc b gt od oe of gw og oh oi no oj ok ol ns om on oo nw op oq or os fj bk">I am sure a lot of people are aware of the $300 million button story. For those that are not aware of the story, it is about a major e-commerce platform losing millions in potential revenue due to customer drop-offs at checkout. This was a large online retailer, and a single button labeled “Register” when changed to “Continue,” with an option to register later, the company saw a $300 million increase in annual revenue. This case study was documented by UX expert Jared Spool )<a class="af ot" href="https://articles.centercentre.com/three_hund_million_button/" rel="noopener ugc nofollow" target="_blank">Source: UIE, Jared Spool, “The $300 Million Button”</a>), showing how a minor change can drastically impact business outcomes.</p><p id="5be0" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">Yet surprisingly, 58% of executives still rely on intuition when making business decisions, according to a PwC report (<a class="af ot" href="https://www.pwc.com/im/en/assets/document/big-decisions-data-analytics-sept-2014.pdf" rel="noopener ugc nofollow" target="_blank">Source: PwC Global Data and Analytics Survey</a>). I always believe that folks with industry knowledge and well-versed with business processes intuition is important but adds more value when combined with observed evidence of data and numbers in decision making. Champion-challenger testing is one such approach to decision-making that changes guesswork into scientific validation.</p><h2 id="cdbd" class="nd ne fq bf nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz fw bk">What Is Champion/Challenger Testing?</h2><p id="137f" class="pw-post-body-paragraph oa ob fq oc b gt od oe of gw og oh oi no oj ok ol ns om on oo nw op oq or os fj bk">Champion/challenger testing (A/B testing) is a technique used in businesses to optimize processes and business operations by selecting best options that improve performance by increasing revenue, reduce costs, and enhance decision making. Champion here is the current operation or methodology that works best while challenger is the method or a new strategy you want to test against your champion to see if it works better or worse than your current process or strategy. Your champion challenger should have the same type of setup, like similar type of accounts or customer segments, to ensure you have an apples-to-apples comparison. It is important to know, what is the goal you are trying to achieve and know what your key performance indicators should be to measure the success of the test.</p><h2 id="5f2f" class="nd ne fq bf nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz fw bk">Implementation Through Oracle SQL: A Practical Guide</h2><p id="b8f9" class="pw-post-body-paragraph oa ob fq oc b gt od oe of gw og oh oi no oj ok ol ns om on oo nw op oq or os fj bk">When implementing champion-challenger testing, I always wondered whether to rely on online calculators or invest in a database-driven SQL implementation. The answer depends on various factors but let us explore an SQL approach through a practical example. While going through the example, I will also be walking you through the importance of some of the variables and conditions to consider ensuring we have a solid champion-challenger testing created.</p><p id="3f06" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">Imagine a collection agency wanting to test the effectiveness of leaving voicemail versus not leaving them. The current strategy involves no voicemails, and some believe leaving voicemails could improve metrics like contact rate and payment rate, but implementing this change across all accounts carries risks like potential reduction in contact rates, compliance considerations with leaving messages, resource costs of leaving voicemails, and a possible decrease in payment rates. Let us design a rigorous test to evaluate the hypothesis.</p><p id="fada" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">To begin our implementation, we need to create a structured foundation that will track our test from start to finish. I used Oracle SQL developer to write my SQL and for illustration purpose in the voicemail testing context, I assumed some of the key component values as mentioned below to generate voicemail champion-challenger test. Below are the details of what each of these key components mean:</p><ol class=""><li id="e3e0" class="oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os oz pa pb bk"><strong class="oc ga">Baseline Conversion Rate</strong>: Your current conversion rate for the metric you’re testing. In this specific voicemail test example, we are assuming 8% current payment rate as baseline conversion rate.</li><li id="c1b4" class="oa ob fq oc b gt pc oe of gw pd oh oi no pe ok ol ns pf on oo nw pg oq or os oz pa pb bk"><strong class="oc ga">Minimum Detectable Effect (MDE)</strong>: The smallest improvement in conversion rate you care about detecting. For voicemails, we want to see if we can improve the current conversion rate by 10% which is increasing to 8.8% (8% * (1 + 0.10) = 8.8%).</li><li id="d9b6" class="oa ob fq oc b gt pc oe of gw pd oh oi no pe ok ol ns pf on oo nw pg oq or os oz pa pb bk"><strong class="oc ga">Statistical Significance Level</strong>: Typically set at 95%, meaning you’re 95% confident that your results are not due to chance.</li><li id="cf14" class="oa ob fq oc b gt pc oe of gw pd oh oi no pe ok ol ns pf on oo nw pg oq or os oz pa pb bk"><strong class="oc ga">Statistical Power</strong>: Often set at 80%, this is a measure of whether the test has enough data to reach a conclusive result.</li><li id="2e49" class="oa ob fq oc b gt pc oe of gw pd oh oi no pe ok ol ns pf on oo nw pg oq or os oz pa pb bk"><strong class="oc ga">Hypothesis / Tail type:</strong> a statement that predicts whether changing a certain variable will affect customer behavior. There are two types of hypotheses to consider or more known as tail tests:</li></ol><p id="186a" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">a) <strong class="oc ga">One-tail test:</strong> This test is recommended only when you are testing if something is either only better than current performance or only worse than current performance. Voicemail testing with one-tail test means we only want to know if voicemails improve payment rates.</p><p id="8428" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">b) <strong class="oc ga">Two-tail test:</strong> This test is recommended in scenarios where you need to understand any change in performance. You are testing if something is either better or worse than current performance. Voicemail testing with two -tail test means we want to know if voicemails will increase or decrease payment rates.</p><p id="a75f" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">As we do not know whether voicemails will increase or decrease payment rates, we will be going with a two-tailed test.</p><pre class="mr ms mt mu mv ph pi pj bp pk bb bk"><span id="6798" class="pl ne fq pi b bg pm pn l po pp">with test_parameters as(<br/>    select <br/>        0.08 as baseline_rate,       -- assuming current rate of 8% of payment rate<br/>        10 as min_detectable_effect, -- wanting 10% improvement<br/>        95 as significance_level,    -- 95% confidence level<br/>        80 as statistical_power,     -- 80% statistical power<br/>        'TWO' as tail_type,          -- 'ONE' or 'TWO' for tail type test <br/>        &amp;volume as monthly_volume    -- dynamic query to pull volume data can be used <br/>        -- example: (select count(*) from accounts where assign_date&gt;=add_months(sysdate,-1) ) <br/>    from dual<br/>    )<br/>    <br/>   select * from test_parameters;</span></pre><figure class="mr ms mt mu mv mw mo mp paragraph-image"><div class="mo mp pq"><img src="../Images/3ab019c8fca2fcfc19c9df2740eb6e16.png" data-original-src="https://miro.medium.com/v2/resize:fit:834/format:webp/1*2Rj7EC-j_-STQe7uVwAe4Q.png"/></div><figcaption class="my mz na mo mp nb nc bf b bg z dx">SQL prompt for monthly volume input</figcaption></figure><figure class="mr ms mt mu mv mw mo mp paragraph-image"><div role="button" tabindex="0" class="ps pt ed pu bh pv"><div class="mo mp pr"><img src="../Images/e9a3b9462406490abfb0bc9eecbaf09a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FKV37jb_j5UOBliv9rXHVQ.png"/></div></div><figcaption class="my mz na mo mp nb nc bf b bg z dx">Output Result</figcaption></figure><p id="3a8c" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">This above configuration is important because it records what we are testing and why. These metrics are the key components in sample size calculation. I will show you the sample size calculation, split ratio, months and days needed to run your test and finally the recommendation results for different monthly volumes available.</p><h2 id="731e" class="nd ne fq bf nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz fw bk">Sample Size Calculation</h2><p id="3d32" class="pw-post-body-paragraph oa ob fq oc b gt od oe of gw og oh oi no oj ok ol ns om on oo nw op oq or os fj bk">Using the right sample size is important to make sure your test results are statistically significant. A sample size that’s too small may result in inaccurate results. Larger sample sizes will give you more accurate average values, identify outliers in data and provide smaller margins of error. The question here ultimately is what too small vs large sample sizes is. You will find out the answers to it as you go through the article.</p><p id="c2c8" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">The below oracle script shows how to calculate sample size. I am using a CTE and partitioned them into multiple sections of snapshots to explain the code better. If you want to use the script, you need to put all sections of code together. Now, I am going to set up our statistical parameters.</p><pre class="mr ms mt mu mv ph pi pj bp pk bb bk"><span id="a0f2" class="pl ne fq pi b bg pm pn l po pp">--statistical parameter conversion<br/>    ,statistical_parameters as(<br/>    select<br/>        baseline_rate,<br/>        min_detectable_effect,<br/>        monthly_volume,<br/>        tail_type,<br/>        <br/>    --set confidence level z-score based on tail type<br/>        case when tail_type='ONE' then <br/>         case significance_level <br/>              when 90 then 1.28 -- One tailed test for 90% confidence<br/>              when 95 then 1.645 -- One tailed test for 95% confidence<br/>              when 99 then 2.326 -- One tailed test for 99% confidence<br/>              else 1.645 end <br/>         else<br/>             case significance_level <br/>              when 90 then 1.645 -- Two tailed test for 90% confidence<br/>              when 95 then 1.96 -- Two tailed test for 95% confidence<br/>              when 99 then 2.576 -- Two tailed test for 99% confidence<br/>              else 1.96 end end as z_alpha,<br/>              <br/>    --set power level z-score (same for both tail types)<br/>        case statistical_power<br/>            when 80 then 0.84<br/>            when 90 then 1.28<br/>            when 95 then 1.645<br/>            else 0.84 end as z_beta<br/>    from test_parameters<br/>    )<br/> <br/>    select * from statistical_parameters;</span></pre><p id="0f65" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">This conversion converts the confidence levels into statistical values used in sample size calculations. For collections, 95% confidence means there is a possibility of 5% of the time results being wrong or when voicemails don’t help.</p><p id="bbe0" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">In statistical terms, z-alpha represents our confidence level, with different values based on both confidence level and tail-type test. Typically, two tailed test values are higher than one tailed test values because of the error rate split in both directions for a two-tailed test. In voicemail testing scenario, 5% chance of being wrong indicates error rate split evenly (0.025 chance probability for payments going lower and 0.025 for payments going higher) whereas a one-tailed test concentrates the entire 0.05 probability in one direction, as we’re only interested in payments going either up or down, not both.</p><p id="9792" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">Statistical power is known as z-beta. When we set 80% statistical power (z-beta = 0.84), we are saying we want to catch real changes 80% of the time and will accept missing them 20% of the time.</p><p id="ef68" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">Z-alpha and Z-beta put together means, if voicemails truly help improve payment rates, we will detect this improvement 80% of the time, and when we do detect it, we can be 95% confident it is a real improvement and not due to a chance.</p><figure class="mr ms mt mu mv mw mo mp paragraph-image"><div role="button" tabindex="0" class="ps pt ed pu bh pv"><div class="mo mp pw"><img src="../Images/09909b414d2adfca86aa48c1122d2f98.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*g2WX-Rn6Zj0JB3MBFuDoPw.png"/></div></div><figcaption class="my mz na mo mp nb nc bf b bg z dx">Output Result</figcaption></figure><p id="599b" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">Let us now move into the calculation of the sample size volume needed. This calculation determines how many accounts we need to test. In our voicemail scenario, if we’re looking to improve from 8% to 8.8% payment rate, this tells us how many accounts we need to be confident that the payment rate will increase, or decrease is real and not just by chance.</p><pre class="mr ms mt mu mv ph pi pj bp pk bb bk"><span id="977b" class="pl ne fq pi b bg pm pn l po pp">--Sample size calculation<br/>    ,sample_size_calculation as(<br/>    select <br/>        baseline_rate,<br/>        min_detectable_effect,<br/>        monthly_volume,<br/>        tail_type,<br/>        z_alpha,<br/>        z_beta,<br/>        <br/>    --calculate minimum effect size<br/>        baseline_rate*(min_detectable_effect/100) as minimum_effect,<br/>        <br/>    --calculate base sample size<br/>        ceil(<br/>             case tail_type <br/>                  when 'ONE' then<br/>                       ( power(z_alpha + z_beta, 2) * baseline_Rate * (1 - baseline_Rate)) / (power(baseline_Rate * (min_detectable_effect/100), 2))<br/>                  else<br/>                       (2 * power(z_alpha + z_beta, 2) * baseline_Rate * (1 - baseline_Rate)) / (power(baseline_Rate * (min_detectable_effect/100), 2)) <br/>                  end<br/>             ) as required_sample_size     <br/>    from statistical_parameters<br/>    )</span></pre><figure class="mr ms mt mu mv mw mo mp paragraph-image"><div role="button" tabindex="0" class="ps pt ed pu bh pv"><div class="mo mp pr"><img src="../Images/e0ee03c6e7646e3b10b8975d007e5b27.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*OJVnhNYU9AmWmxXt2gmi7w.png"/></div></div><figcaption class="my mz na mo mp nb nc bf b bg z dx">Output Result</figcaption></figure><h2 id="b0dd" class="nd ne fq bf nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz fw bk">Split Ratios and Test Duration</h2><p id="9cb9" class="pw-post-body-paragraph oa ob fq oc b gt od oe of gw og oh oi no oj ok ol ns om on oo nw op oq or os fj bk">Split ratios determine how you divide your dataset between the champion (your current version) and the challenger(s) (your test versions). Common split ratios include two way (like 50/50, 80/20 or 90/10 splits) or multi-way splits like 50/25/25 or 70/10/10/10. These multi-way tests are used to test different variations while we still have a control group.</p><p id="2308" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">Choosing a split ratio should not be random or solely depend on volume availability but also consider other factors like confidence level in the challenger, impact of the change especially if it hurts the current metrics, and ensure the test meets the minimum sample size needed requirement.</p><p id="aa17" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">This below analysis translates statistical requirements into business terms and shows how different split ratios affect test duration. It also shows risk level based on split ratio. Split ratios represent how we divide accounts between champion and challenger.</p><pre class="mr ms mt mu mv ph pi pj bp pk bb bk"><span id="983a" class="pl ne fq pi b bg pm pn l po pp"> --split ratio<br/>    ,split_ratios as(<br/>    --generate split ratios from 10 to 50 for challenger<br/>    Select  <br/>        level * 10 as challenger_pct,<br/>        100 - (level * 10) as control_pct<br/>    from dual<br/>    connect by level &lt;= 5 -- This generates 10/90, 20/80, 30/70, 40/60, 50/50<br/>    )<br/><br/>    --split_analysis<br/>    ,split_analysis as(<br/>    select <br/>        s.baseline_Rate * 100 as current_rate_pct,<br/>        s.baseline_rate * (1 + s.min_detectable_effect/100) * 100 as target_rate_pct,<br/>        s.min_detectable_effect as improvement_pct,<br/>        s.tail_type,<br/>        s.required_sample_size as sample_size_per_group,<br/>        s.required_sample_size * 2 as total_sample_needed,<br/>        s.monthly_volume,<br/>        r.challenger_pct,<br/>        r.control_pct,<br/>        <br/>    --calculate test duration (months) for different splits<br/>        round(s.required_sample_size / (s.monthly_volume * (r.challenger_pct/100)), 1) as months_needed,<br/>        <br/>    --calculate test days needed for each split<br/>        round(s.required_sample_size / (s.monthly_volume * (r.challenger_pct/100)) * 30, 0) as days_needed,<br/>        <br/>     --Assess risk level for each split<br/>        case <br/>            when r.challenger_pct &lt;= 20 then 'Conservative'<br/>            when r.challenger_pct &lt;= 35 then 'Balanced'<br/>            else 'Aggressive' end as risk_level<br/>    from sample_size_calculation s cross join split_ratios r<br/>    )<br/>    <br/>    select * from split_analysis;</span></pre><p id="5f37" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">Conservative risk only impacts 10–20% of accounts getting new treatment and 80–90% accounts from potential negative impacts. This split ratio takes longer to gather enough data. Balanced risk will impact one third of the accounts and protect the rest while it gathers data faster. Aggressive risk impacts up to half the accounts though it gathers data quickly, it exposes more accounts to risk.</p><figure class="mr ms mt mu mv mw mo mp paragraph-image"><div role="button" tabindex="0" class="ps pt ed pu bh pv"><div class="mo mp px"><img src="../Images/0b6f04b5e2a90eb18f00fe202e00b5a1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*5GtddjKorV10cgRkU96dNA.png"/></div></div><figcaption class="my mz na mo mp nb nc bf b bg z dx">Part of the output result</figcaption></figure><p id="8764" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">It is important to know how long a champion/challenger test should be run. Run a test for too short of a time, and you risk making decisions based on incomplete or misleading data. Run it too long, you may waste resources and delay decision making. To maintain the balance, generally, tests should run for a minimum of one full business cycle. Tests typically shouldn’t run for more than 4–8 weeks and this way we don’t mix up our results with other operational or seasonal changes taking place.</p><h2 id="1c07" class="nd ne fq bf nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz fw bk">Risk Assessment and Volume Requirements</h2><p id="b746" class="pw-post-body-paragraph oa ob fq oc b gt od oe of gw og oh oi no oj ok ol ns om on oo nw op oq or os fj bk">I observe analysts new to champion/challenger testing do not know what split ratio to opt for. We can decide on which split ratio to opt for by considering the risks associated in choosing for a certain split ratio and what volume is needed for that split ratio.</p><p id="2577" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">Worst-case scenario must be calculated to assess the risk level.</p><pre class="mr ms mt mu mv ph pi pj bp pk bb bk"><span id="5901" class="pl ne fq pi b bg pm pn l po pp">,risk_Assessment as(<br/>        select <br/>            monthly_volume,<br/>            sample_size_per_group,<br/>            challenger_pct,<br/>            risk_level,<br/>        --assess potential impact<br/>    round(monthly_volume * (challenger_pct/100) * (current_rate_pct/100)) as accounts_at_risk,<br/>    round(monthly_volume * (challenger_pct/100) * (current_rate_pct/100) * (1 - (improvement_pct/100))) as worst_case_scenario<br/>        from split_analysis<br/>    )<br/>    <br/>    ,volume_recommendations as(<br/>        select distinct <br/>            sample_size_per_group,<br/>            --recommende monthly volumes for different completion timeframes for all splits<br/>            ceil(sample_size_per_group / 0.5) as volume_for_1_month_50_50, --50/50 split<br/>            ceil(sample_size_per_group / 0.4) as volume_for_1_month_40_60, --40/60 split<br/>            ceil(sample_size_per_group / 0.3) as volume_for_1_month_30_70, --30/70 split<br/>            ceil(sample_size_per_group / 0.2) as volume_for_1_month_20_80, --20/80 split<br/>            ceil(sample_size_per_group / 0.1) as volume_for_1_month_10_90  --10/90 split<br/>        from split_analysis<br/>        )</span></pre><figure class="mr ms mt mu mv mw mo mp paragraph-image"><div role="button" tabindex="0" class="ps pt ed pu bh pv"><div class="mo mp pr"><img src="../Images/b93e366073006185c8625c50b795046c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*9zojCgLd5wQSCa9MQ43ckQ.png"/></div></div><figcaption class="my mz na mo mp nb nc bf b bg z dx">Part of the output result</figcaption></figure><p id="accf" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">Let us say we opt for 30/70 split ratio which is showing a ‘balanced’ split for voicemails. With 10,000 monthly accounts, 3000 accounts will receive voicemails while 7000 accounts continue as normal. If voicemails perform poorly, it affects 3,000 accounts and the maximum exposure will be 240 payments at risk (3,000 * 8%). In the scenario, voicemails test decrease payment rates by 10% instead of improving them, we would only receive 216 payments (3,000 * 8% * (1–10%)). This means we lose 24 payments which we would have otherwise received.</p><p id="7aae" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">This worst-case calculation helps us understand what’s at risk. With a more aggressive 50/50 split, we would have 5,000 accounts in the test group, risking a potential loss of 40 payments under worse-case conditions. A conservative 20/80 split would only risk 16 payments, though it would take longer to complete the test.</p><p id="f7bc" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">With a 50/50 split, we need a total volume of 36k accounts to get our required 18k accounts in the test group. Since we only have 10k accounts monthly, this means our test would take approximately 3.6 months to complete. Moving to the most conservative 10/90 split would require 180k accounts, making the test duration impractically long at 18 months.</p><pre class="mr ms mt mu mv ph pi pj bp pk bb bk"><span id="aada" class="pl ne fq pi b bg pm pn l po pp">,final_Recommendation as(<br/>    select<br/>        sa.*,<br/>        ra.accounts_At_Risk,<br/>        ra.worst_case_scenario,<br/>        vr.volume_for_1_month_50_50,<br/>        vr.volume_for_1_month_40_60,<br/>        vr.volume_for_1_month_30_70,<br/>        vr.volume_for_1_month_20_80,<br/>        vr.volume_for_1_month_10_90,<br/>        --Generate final recommendations based on all split ratios<br/>    case when sa.monthly_volume &gt;= vr.volume_for_1_month_50_50 and sa.challenger_pct = 50 <br/>         then 'AGGRESSIVE: 50/50 split possible. Fastest completion in ' || sa.days_needed || ' days but highest risk ' <br/>         when sa.monthly_volume &gt;= vr.volume_for_1_month_40_60 and sa.challenger_pct = 40 <br/>         then 'MODERATELY AGGRESSIVE: 40/60 split feasible. Completes in ' || sa.days_needed || ' days with moderate-high risk.'<br/>         when sa.monthly_volume &gt;= vr.volume_for_1_month_30_70 and sa.challenger_pct = 30 <br/>         then 'BALANCED: 30/70 split recommended. Completes in ' || sa.days_needed || ' days with balanced risk.'<br/>         when sa.monthly_volume &gt;= vr.volume_for_1_month_20_80 and sa.challenger_pct = 20 <br/>         then 'CONSERVATIVE: 20/80 split possible. Takes ' || sa.days_needed || ' days with lower risk.'<br/>         when sa.monthly_volume &gt;= vr.volume_for_1_month_10_90 and sa.challenger_pct = 10 <br/>         then 'BALANCED: 10/90 split possible. Takes ' || sa.days_needed || ' days but minimizes risk.'<br/>         else 'NOT RECOMMENDED: Current volume of ' || sa.monthly_volume || ' insufficient for reliable testing with ' <br/>              || sa.challenger_pct || '/' ||  sa.control_pct || ' split.' end as recommendation<br/>    from split_analysis sa join risk_assessment ra on sa.challenger_pct=ra.challenger_pct<br/>        cross join volume_recommendations vr <br/>        )</span></pre><pre class="py ph pi pj bp pk bb bk"><span id="7336" class="pl ne fq pi b bg pm pn l po pp">select      <br/>        tail_type as test_type,<br/>        current_rate_pct || '%' as current_rate,<br/>        target_rate_pct || '%' as target_rate,<br/>        improvement_pct || '%' as improvement,<br/>        sample_size_per_group as needed_per_group,<br/>        total_sample_needed as total_needed,<br/>        monthly_volume,<br/>        challenger_pct || '/' || control_pct || ' split' as split_ratio,<br/>        days_needed || ' days (' || round(months_needed, 1) || ' months)' as duration,<br/>        risk_level,<br/>        accounts_At_Risk || ' accounts at risk' as risk_exposure,<br/>        worst_Case_Scenario || ' worst case' as risk_scenario,<br/>            case<br/>                when challenger_pct = 10 then<br/>                    case    <br/>                        when monthly_volume &gt;= volume_for_1_month_10_90 <br/>                        then 'Current volume (' || monthly_volume || ') sufficient for 10/90 split'<br/>                        else 'Need ' || volume_for_1_month_10_90 <br/>                        || ' monthly accounts for 10/90 split (current: ' || monthly_volume || ')'<br/>                    end<br/>                when challenger_pct = 20 then<br/>                    case    <br/>                        when monthly_volume &gt;= volume_for_1_month_20_80 <br/>                        then 'Current volume (' || monthly_volume || ') sufficient for 20/80 split'<br/>                        else 'Need ' || volume_for_1_month_20_80 <br/>                        || ' monthly accounts for 20/80 split (current: ' || monthly_volume || ')'<br/>                    end<br/>                 when challenger_pct = 30 then<br/>                    case    <br/>                        when monthly_volume &gt;= volume_for_1_month_30_70 <br/>                        then 'Current volume (' || monthly_volume || ') sufficient for 30/70 split'<br/>                        else 'Need ' || volume_for_1_month_30_70 <br/>                        || ' monthly accounts for 30/70 split (current: ' || monthly_volume || ')'<br/>                    end<br/>                 when challenger_pct = 40 then<br/>                    case    <br/>                        when monthly_volume &gt;= volume_for_1_month_40_60 <br/>                        then 'Current volume (' || monthly_volume || ') sufficient for 40/60 split'<br/>                        else 'Need ' || volume_for_1_month_40_60 <br/>                        || ' monthly accounts for 40/60 split (current: ' || monthly_volume || ')'<br/>                    end<br/>                else<br/>                    case    <br/>                        when monthly_volume &gt;= volume_for_1_month_50_50 <br/>                        then 'Current volume (' || monthly_volume || ') sufficient for 50/50 split'<br/>                        else 'Need ' || volume_for_1_month_50_50 <br/>                        || ' monthly accounts for 50/50 split (current: ' || monthly_volume || ')'<br/>                    end<br/>                end as volume_assessment,<br/>            recommendation<br/>        from final_Recommendation<br/>        order by challenger_pct;</span></pre><figure class="mr ms mt mu mv mw mo mp paragraph-image"><div role="button" tabindex="0" class="ps pt ed pu bh pv"><div class="mo mp pr"><img src="../Images/8fecf030e015184a225092c33a664011.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*aIQZNxtLImNdh4V8RiXkXw.png"/></div></div><figcaption class="my mz na mo mp nb nc bf b bg z dx">Part of the output result for 10k monthly volume</figcaption></figure><p id="3486" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">If monthly volume is 50,000 accounts:</p><figure class="mr ms mt mu mv mw mo mp paragraph-image"><div role="button" tabindex="0" class="ps pt ed pu bh pv"><div class="mo mp pr"><img src="../Images/b168f019846bd9c2500f2e4637868840.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*mIZXNdeAO2xWj6tDc32kyg.png"/></div></div><figcaption class="my mz na mo mp nb nc bf b bg z dx">Part of the output result for 50k monthly volume</figcaption></figure><p id="9153" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk">Certain questions need to be thought of in order to decide which split ratio to choose and risk level is acceptable and eventually understand the volume available to test voicemails. Can the business accept potentially losing 40 payments monthly in exchange for completing the test in 3.6 months or would it be better to risk only 16 payments monthly but extend the test duration? By carefully choosing your split ratios and understand what sample sizes are appropriate, you can design tests that provide accurate and actionable insights.</p><h2 id="aeba" class="nd ne fq bf nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz fw bk">Calculators versus SQL Implementation</h2><p id="3a50" class="pw-post-body-paragraph oa ob fq oc b gt od oe of gw og oh oi no oj ok ol ns om on oo nw op oq or os fj bk">Online calculators like <a class="af ot" href="https://www.evanmiller.org/ab-testing/sample-size.html" rel="noopener ugc nofollow" target="_blank">Evan Miller</a> and <a class="af ot" href="https://www.optimizely.com/sample-size-calculator/#/?conversion=8&amp;effect=10&amp;significance=95" rel="noopener ugc nofollow" target="_blank">Optimizely</a> are valuable tools, typically defaulting to a 50/50 split ratio or two-tailed tests. Another online tool,<a class="af ot" href="https://www.statsig.com/calculator" rel="noopener ugc nofollow" target="_blank"> Statsig</a>, doesn’t default to anything but at the same time doesn’t provide additional details like what we just coded with our SQL implementation. The SQL implementation becomes valuable here as it helps track not just basic metrics, but also monitor risk exposure and test duration based on your actual monthly volume. This comprehensive view helps especially when you need to deviate from standard 50/50 splits or want to understand different split ratios on your test design and business risks.</p><h2 id="4d31" class="nd ne fq bf nf ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny nz fw bk">Continuous Testing</h2><p id="d099" class="pw-post-body-paragraph oa ob fq oc b gt od oe of gw og oh oi no oj ok ol ns om on oo nw op oq or os fj bk">Champion/challenger testing is not a one-time effort but a continuous cycle of improvement. Create performance reports and continuously monitor the results. Adapt to the changing conditions including seasonal shifts and economic changes. By integrating this approach into your strategy testing, you are creating a systematic approach to decision-making that drives innovation, mitigates risk, and most importantly intuition can be backed up with solid data evidence.</p><p id="afb8" class="pw-post-body-paragraph oa ob fq oc b gt ou oe of gw ov oh oi no ow ok ol ns ox on oo nw oy oq or os fj bk"><strong class="oc ga"><em class="pz">Note</em></strong><em class="pz">:</em> <em class="pz">All images, unless otherwise noted, are by the author.</em></p></div></div></div></div>    
</body>
</html>