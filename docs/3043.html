<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Why Sets Are So Useful in Programming</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Why Sets Are So Useful in Programming</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/why-sets-are-so-useful-in-programming-b1157532f7e5?source=collection_archive---------6-----------------------#2024-12-19">https://towardsdatascience.com/why-sets-are-so-useful-in-programming-b1157532f7e5?source=collection_archive---------6-----------------------#2024-12-19</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="f285" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">And how you can use them to boost your code performance</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@afjal.nc?source=post_page---byline--b1157532f7e5--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Afjal Chowdhury" class="l ep by dd de cx" src="../Images/92814d13296326ea8dc7d5a64a443092.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*r_zIt0rgBg-_NvdAEyaMUw.png"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--b1157532f7e5--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@afjal.nc?source=post_page---byline--b1157532f7e5--------------------------------" rel="noopener follow">Afjal Chowdhury</a></p></div></div></div><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ib ic ah ai aj ak al am an ao ap aq ar id ie if" disabled="">Follow</button></p></div></div></span></div></div><div class="l ig"><span class="bf b bg z dx"><div class="ab cn ih ii ij"><div class="ik il ab"><div class="bf b bg z dx ab im"><span class="in l ig">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--b1157532f7e5--------------------------------" rel="noopener follow"><p class="bf b bg z io ip iq ir is it iu iv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">8 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Dec 19, 2024</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w ea eb q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon ed in kg kh ki"><div class=""><div class="kj kk kl km kn ko kp am kq kr ks ki"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kt ku kv kw kx ky kz"><p class="bf b dy z dx"><span class="kk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kj lc ld ab q ee le lf" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lb"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count la lb">3</span></p></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lg k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lh an ao ap id li lj lk" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep ll cn"><div class="l ae"><div class="ab cb"><div class="lm ln lo lp lq lr ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><p id="39ba" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk">A <em class="nf">set </em>is a simple structure defined as a <em class="nf">collection of distinct elements</em>. Sets are most commonly seen in fields like mathematics or logic, but they’re also useful in programming for writing efficient code. In this article, I detail cases where sets outperform alternative data types like <em class="nf">lists</em>, and the underlying implementation of sets which makes them so useful to programmers.</p><figure class="nj nk nl nm nn no ng nh paragraph-image"><div role="button" tabindex="0" class="np nq ed nr bh ns"><div class="ng nh ni"><img src="../Images/aa841073ef120a63e6fbafcfd823d962.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*eBoxhveWkwuWSUeX"/></div></div><figcaption class="nu nv nw ng nh nx ny bf b bg z dx">Bolts that form a Set by <a class="af nz" href="https://unsplash.com/@robert2301?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Robert Ruggiero</a> on <a class="af nz" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="7364" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk">A set is an example of a container; these are used to store several elements under one variable. When looking for a container datatype, lists (typically defined with square brackets [ ]) are the go-to choice, being used extensively in almost all programming languages. Sets bare a lot of similarity to lists, most notably as they are both <strong class="ml fr">dynamic</strong>, allowing their size to grow or shrink as needed. The only differences lie in that lists preserve order of elements and allow duplicates, whereas sets do neither, offering a unique advantage in certain scenarios. By knowing when to choose sets over lists, you can greatly enhance the performance of your programs and improve code readability.</p><p id="0326" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk">In Python, sets can be declared using curly braces, or by using the set constructor.</p><pre class="nj nk nl nm nn oa ob oc bp od bb bk"><span id="01ea" class="oe of fq ob b bg og oh l oi oj">set_a = {1, 4, 9, 16}<br/>set_b = set([1,2,3]) #coverting list to set<br/>empty_set = set()</span></pre><h1 id="2687" class="ok of fq bf ol om on gq oo op oq gt or os ot ou ov ow ox oy oz pa pb pc pd pe bk">Sets do not contain duplicates</h1><p id="a412" class="pw-post-body-paragraph mj mk fq ml b go pf mn mo gr pg mq mr ms ph mu mv mw pi my mz na pj nc nd ne fj bk">A defining property of a set is that each element is distinct, or unique, so there are no repeated entries. A simple application of this could be to <strong class="ml fr">remove all duplicate entries</strong> in a list by converting the list into a set.</p><pre class="nj nk nl nm nn oa ob oc bp od bb bk"><span id="880c" class="oe of fq ob b bg og oh l oi oj">#LIST Implementation O(n^2)<br/>def remove_duplicate_entries(list input_list):<br/>    output_list = []<br/>    for element in input_list:<br/>        if element in output_list: <br/>             output_list.append(element)<br/>    return output_list</span></pre><pre class="pk oa ob oc bp od bb bk"><span id="a57e" class="oe of fq ob b bg og oh l oi oj">#SET Implementation O(n)<br/>def remove_duplicate_entries(list input_list):<br/>    return list(set(input_list))</span></pre><p id="1de2" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk">Because a set is used here, the order of the list is not preserved. Use an implementation like the first one if order matters.</p><p id="d8e9" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk">The next function <strong class="ml fr">identifies if a list contains any duplicates;</strong> the order of elements is not here important, only the <em class="nf">occurrence </em>of duplicates. The set implementation is much more desirable as operations on sets are typically much faster than on lists (this is explained in more detail later).</p><pre class="nj nk nl nm nn oa ob oc bp od bb bk"><span id="de99" class="oe of fq ob b bg og oh l oi oj">#LIST Implementation<br/>def has_duplicates(list input_list):<br/>    unique_elements = []<br/>    for element in input_list:<br/>        if element in unique_elements: <br/>             return True<br/>        else:<br/>             unique_elements.append(element)<br/>    return False</span></pre><pre class="pk oa ob oc bp od bb bk"><span id="2bc0" class="oe of fq ob b bg og oh l oi oj">#SET Implementation<br/>def has_duplicates(list input_list): <br/>    return len(input_list) != len(set(input_list))</span></pre><p id="62df" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk"><em class="nf">Note: In cases where a duplicate element appears early, the first implementation can outperform the second as it catches the duplicate early and returns False without checking every entry, whereas the second implementation always iterates through every element. A more optimal solution would involve a similar method to the first implementation but using a </em><strong class="ml fr"><em class="nf">set </em></strong><em class="nf">as the unique_elements container.</em></p><pre class="nj nk nl nm nn oa ob oc bp od bb bk"><span id="56ad" class="oe of fq ob b bg og oh l oi oj">def has_duplicates(list input_list) -&gt; bool:<br/>    unique_elements = set() #**modified here<br/>    for element in input_list:<br/>        if element in unique_elements: <br/>             return True<br/>        else:<br/>             unique_elements.add(element)<br/>    return False</span></pre><p id="7574" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk">Even if these applications seem quite crude or simplistic, there are countless uses built upon the principle of “removing duplicates” that take some creativity to see. For example, <a class="af nz" href="https://leetcode.com/problems/check-if-the-sentence-is-pangram/" rel="noopener ugc nofollow" target="_blank">Leetcode 1832</a> ‘<em class="nf">Check if the Sentence is a Pangram</em>’- where you need to detects if all 26 letters have been used in an input sentence- can be elegantly solved using a set comprehension.</p><pre class="nj nk nl nm nn oa ob oc bp od bb bk"><span id="890a" class="oe of fq ob b bg og oh l oi oj">def is_pangram(str sentence) -&gt; bool:<br/>    present_letters = {letter for letter in sentence}<br/>    return len(present_letters) == 26</span></pre><p id="e717" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk">Without sets, this problem would need to utilise nested looping which is both harder to write, and less efficient with a complexity of O(n^2).</p><p id="a63d" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk">The key to identifying cases where sets are useful is by considering:</p><ul class=""><li id="259a" class="mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne pl pm pn bk">If we <strong class="ml fr">only care about an occurrence</strong>, like in this problem if the sentence contained the word ‘eel’, we only care that the letter ‘e’ occurred, not that it occurred twice so we can discard the second and any future ‘e’s.</li><li id="292a" class="mj mk fq ml b go po mn mo gr pp mq mr ms pq mu mv mw pr my mz na ps nc nd ne pl pm pn bk">Building on this principal, in cases where a list is <strong class="ml fr">very large</strong>, it may be desirable to remove duplicate elements to continue processing on a much smaller list.</li><li id="5c43" class="mj mk fq ml b go po mn mo gr pp mq mr ms pq mu mv mw pr my mz na ps nc nd ne pl pm pn bk">If <strong class="ml fr">we don’t care about the order</strong> of elements. In cases where maintaining order is important, like in a priority queue, lists should instead be used.</li></ul></div></div></div><div class="ab cb pt pu pv pw" role="separator"><span class="px by bm py pz qa"/><span class="px by bm py pz qa"/><span class="px by bm py pz"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="8be7" class="ok of fq bf ol om qb gq oo op qc gt or os qd ou ov ow qe oy oz pa qf pc pd pe bk">Hash maps and lack of order</h1><p id="89d3" class="pw-post-body-paragraph mj mk fq ml b go pf mn mo gr pg mq mr ms ph mu mv mw pi my mz na pj nc nd ne fj bk">Taking a step back, it might seem that easy duplicate removal is the only benefit of using sets. We previously discussed how sets have no order; arrays have indexed element which could simply ignored and treated like a set. It appears that arrays can do the same job as a set, if not more.</p><p id="76d7" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk">However, this simplification enforced by sets opens way to <strong class="ml fr">different underlying implementations</strong>. In lists, elements are assigned indices to give each element a place in the order. Sets have no need to assign indices, so they instead implement a different approach of referencing: hash mapping. These operate by (pseudo)randomly allocating addresses to elements, as opposed to storing them in a row. The allocation is governed by hashing functions, which use the element as an input to output an address.</p><figure class="nj nk nl nm nn no ng nh paragraph-image"><div class="ng nh qg"><img src="../Images/48360d958818c5df76f7a6097855dfa1.png" data-original-src="https://miro.medium.com/v2/resize:fit:626/format:webp/1*0B53I_a_wWN6QkozJ0sunw.png"/></div><figcaption class="nu nv nw ng nh nx ny bf b bg z dx">Hashing does not preserve order</figcaption></figure><p id="44be" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk"><em class="nf">H(x) is deterministic, so the same input always gives the same output, ie. there is no RNG within the function H, so H(4) = 6 always in this case.</em></p><p id="ed59" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk">Running this function takes the same amount of time regardless of the size of the set, ie. hashing has O(1) time complexity. This means that the time taken to hash is independent of the size of the list, and remains at a constant, quick speed.</p><h1 id="6688" class="ok of fq bf ol om on gq oo op oq gt or os ot ou ov ow ox oy oz pa pb pc pd pe bk">Set operations</h1><p id="44ae" class="pw-post-body-paragraph mj mk fq ml b go pf mn mo gr pg mq mr ms ph mu mv mw pi my mz na pj nc nd ne fj bk">Because hashing is generally quick, a whole host of operations that are typically slow on large arrays can be executed very efficiently on a set.</p><h2 id="dd05" class="qh of fq bf ol qi qj qk oo ql qm qn or ms qo qp qq mw qr qs qt na qu qv qw qx bk"><strong class="al">Search or Membership Testing</strong></h2><p id="c7ed" class="pw-post-body-paragraph mj mk fq ml b go pf mn mo gr pg mq mr ms ph mu mv mw pi my mz na pj nc nd ne fj bk">Searching for elements in an array utilises an algorithm called <em class="nf">Linear Search</em>, by<em class="nf"> </em>checking each item in the list one by one. In the worst case, where the item being searched for does not exist in the list, the algorithm traverses every element of the list (<em class="nf">O(n)</em>). In a very large list, this process takes a long time.</p><figure class="nj nk nl nm nn no ng nh paragraph-image"><div class="ng nh qy"><img src="../Images/57ec2db048f934d327520f813422a9b5.png" data-original-src="https://miro.medium.com/v2/resize:fit:802/format:webp/1*PsTRnymqJ-onqNxVXD6Eag.png"/></div><figcaption class="nu nv nw ng nh nx ny bf b bg z dx">Linear search on average needs n/2 operations, img by author</figcaption></figure><p id="e084" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk">However, as hashing is O(1), Python hashes the item to be found, and either returns where it is in memory, or that it doesn’t exist- in a very small amount of time.</p><pre class="nj nk nl nm nn oa ob oc bp od bb bk"><span id="3665" class="oe of fq ob b bg og oh l oi oj">number_list = range(random.randint(1,000,000))<br/>number_set = set(number_list)<br/><br/>#Line 1<br/>#BEGIN TIMER<br/>print(-1 in number_list)<br/>#END TIMER<br/><br/>#Line 2<br/>#BEGIN TIMER<br/>print(-1 in number_set)<br/>#END TIMER<br/></span></pre><figure class="nj nk nl nm nn no ng nh paragraph-image"><div role="button" tabindex="0" class="np nq ed nr bh ns"><div class="ng nh qz"><img src="../Images/ee09a8ba99f1baca735980c4270738d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*SknHV8e9G9J2qutxAiCUSA@2x.png"/></div></div><figcaption class="nu nv nw ng nh nx ny bf b bg z dx">Comparison of search times in lists vs sets</figcaption></figure><p id="b1d8" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk"><em class="nf">Note: Searching using a hashmap has an </em><strong class="ml fr"><em class="nf">amortized</em></strong><em class="nf"> time complexity of O(1). This means that in the average case, it runs at constant time but technically, in the worst case, searching is O(n). However, this is extremely unlikely and comes down to the hashing implementation having a chance of collisions, which is when multiple elements in a hashmap/set are hashed to the same address.</em></p><figure class="nj nk nl nm nn no ng nh paragraph-image"><div role="button" tabindex="0" class="np nq ed nr bh ns"><div class="ng nh ra"><img src="../Images/7afe24366b2ac3a3495f2dedd5b2bdb5.png" data-original-src="https://miro.medium.com/v2/resize:fit:622/format:webp/1*FMqRsPYePW2gVvM4PBYqog.png"/></div></div><figcaption class="nu nv nw ng nh nx ny bf b bg z dx">Collisions are rare</figcaption></figure><h2 id="ce1a" class="qh of fq bf ol qi qj qk oo ql qm qn or ms qo qp qq mw qr qs qt na qu qv qw qx bk">Deletion</h2><p id="f758" class="pw-post-body-paragraph mj mk fq ml b go pf mn mo gr pg mq mr ms ph mu mv mw pi my mz na pj nc nd ne fj bk">Deleting an element from a list first involves a search to locate the element, and then removing reference to the element by clearing the address. In an array, after the O(n) time search, the index of every element following the deleted element needs to be shifted down one. This itself is another O(n) process.</p><figure class="nj nk nl nm nn no ng nh paragraph-image"><div class="ng nh rb"><img src="../Images/96a22105c0fd32bd07e8390552b1013c.png" data-original-src="https://miro.medium.com/v2/resize:fit:880/format:webp/1*EBd0WzsntAQgfG50u7_UPA.png"/></div><figcaption class="nu nv nw ng nh nx ny bf b bg z dx">Deletion in a list requires roughly n operations</figcaption></figure><p id="2e9f" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk">Deleting an element from a set involves the O(1) lookup, and then erasure of the memory address which is an O(1) process so deletion also operates in constant time. Sets also have more ways to delete elements, such that errors are not raised, or such that multiple elements can be removed concisely.</p><pre class="nj nk nl nm nn oa ob oc bp od bb bk"><span id="43ca" class="oe of fq ob b bg og oh l oi oj">#LIST<br/>numbers = [1, 3, 4, 7, 8, 11]<br/><br/>numbers.remove(4)<br/>numbers.remove(5) #Raises ERROR as 5 is not in list<br/>numbers.pop(0) #Deletes number at index 0, ie. 1<br/><br/>#SET<br/>numbers = {1, 3, 4, 7, 8, 11}<br/><br/>numbers.remove(4)<br/>numbers.remove(5) #Raises ERROR as 5 is not in set<br/>numbers.discard(5) #Does not raise error if 5 is not in the set<br/>numbers -= {1,2,3} #Performs set difference, ie. 1, 3 are discarded<br/></span></pre><h2 id="072d" class="qh of fq bf ol qi qj qk oo ql qm qn or ms qo qp qq mw qr qs qt na qu qv qw qx bk">Insertion</h2><p id="b6a4" class="pw-post-body-paragraph mj mk fq ml b go pf mn mo gr pg mq mr ms ph mu mv mw pi my mz na pj nc nd ne fj bk">Both appending to a list and adding elements to a set are constant operations; adding to a specified index in a list (.insert) however comes with the added time to shift elements around.</p><pre class="nj nk nl nm nn oa ob oc bp od bb bk"><span id="11d4" class="oe of fq ob b bg og oh l oi oj">num_list = [1,2,3]<br/>num_set = {1,2,3}<br/><br/>num_list.append(4)<br/>num_set.add(4)<br/><br/>num_list += [5,6,7]<br/>num_set += {5,6,7}<br/></span></pre><h2 id="e9ef" class="qh of fq bf ol qi qj qk oo ql qm qn or ms qo qp qq mw qr qs qt na qu qv qw qx bk">Advanced Set Operations</h2><p id="22a8" class="pw-post-body-paragraph mj mk fq ml b go pf mn mo gr pg mq mr ms ph mu mv mw pi my mz na pj nc nd ne fj bk">Additionally, all the mathematical operations that can be performed on sets have implementation in python also. These operations are once again time consuming to manually perform on a list, and are once again optimised using hashing.</p><figure class="nj nk nl nm nn no ng nh paragraph-image"><div role="button" tabindex="0" class="np nq ed nr bh ns"><div class="ng nh rc"><img src="../Images/02016ae2904e6d68483df2cfe84bde21.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*xFxQBuBEDtibcC_GFhn65A@2x.png"/></div></div><figcaption class="nu nv nw ng nh nx ny bf b bg z dx">Set Operations</figcaption></figure><pre class="nj nk nl nm nn oa ob oc bp od bb bk"><span id="796c" class="oe of fq ob b bg og oh l oi oj">A = {1, 2, 3, 5, 8, 13}<br/>B = {2, 3, 5, 7, 13, 17}<br/><br/># A n B<br/>AintersectB = A &amp; B<br/># A U B<br/>AunionB = A | B<br/># A \ B<br/>AminusB = A - B<br/># A U B - A n B or A Delta B<br/>AsymmetricdiffB = A ^ B<br/></span></pre><p id="3804" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk">This also includes comparison operators, namely proper and relaxed subsets and supersets. These operations once again run much faster than their list counterparts, operating in O(n) time, where n is the larger of the 2 sets.</p><figure class="nj nk nl nm nn no ng nh paragraph-image"><div role="button" tabindex="0" class="np nq ed nr bh ns"><div class="ng nh rd"><img src="../Images/3f8510d9a0ffb98f79661f84c025e805.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*IxuLUu4KgM5hd4kyG1Qtyg@2x.png"/></div></div><figcaption class="nu nv nw ng nh nx ny bf b bg z dx">Subset</figcaption></figure><pre class="nj nk nl nm nn oa ob oc bp od bb bk"><span id="94db" class="oe of fq ob b bg og oh l oi oj">A &lt;= B #A is a proper subset of B<br/>A &gt; B #A is a superset of B<br/></span></pre><h2 id="feb9" class="qh of fq bf ol qi qj qk oo ql qm qn or ms qo qp qq mw qr qs qt na qu qv qw qx bk">Frozen Sets</h2><p id="1c9b" class="pw-post-body-paragraph mj mk fq ml b go pf mn mo gr pg mq mr ms ph mu mv mw pi my mz na pj nc nd ne fj bk">A final small, but underrated feature in python is the <em class="nf">frozen set</em>, which is essentially a read-only or <strong class="ml fr">immutable</strong> set. These offer greater memory efficiency and could be useful in cases where you frequently test membership in a tuple.</p><h2 id="c17d" class="qh of fq bf ol qi qj qk oo ql qm qn or ms qo qp qq mw qr qs qt na qu qv qw qx bk"><span class="l re rf rg bo rh ri rj rk rl ed">C</span>onclusion</h2><p id="31ba" class="pw-post-body-paragraph mj mk fq ml b go pf mn mo gr pg mq mr ms ph mu mv mw pi my mz na pj nc nd ne fj bk">The essence of using sets to boost performance is encapsulated by the principle of <strong class="ml fr">optimisation by reduction</strong>.</p><figure class="nj nk nl nm nn no ng nh paragraph-image"><div class="ng nh rm"><img src="../Images/48008eb14526a7d051fad8eafbbecf75.png" data-original-src="https://miro.medium.com/v2/resize:fit:744/format:webp/1*UIkpSwWtahA254FrVr4wFg.png"/></div></figure><p id="ed8a" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk">Data structures like lists have the most functionality- being indexed and dynamic- but come at the cost of comparatively lower efficiency: speed and memory-wise. Identifying which features are essential vs unused to inform what data type to use will result in code that runs faster and reads better.</p><p id="2bae" class="pw-post-body-paragraph mj mk fq ml b go mm mn mo gr mp mq mr ms mt mu mv mw mx my mz na nb nc nd ne fj bk"><em class="nf">All technical diagrams by author.</em></p></div></div></div></div>    
</body>
</html>