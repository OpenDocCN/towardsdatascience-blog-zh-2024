# LLM将如何使探索性数据分析民主化

> 原文：[https://towardsdatascience.com/how-llms-will-democratize-exploratory-data-analysis-70e526e1cf1c?source=collection_archive---------0-----------------------#2024-06-09](https://towardsdatascience.com/how-llms-will-democratize-exploratory-data-analysis-70e526e1cf1c?source=collection_archive---------0-----------------------#2024-06-09)

## *或者，当你觉得生活太艰难时，不妨去和Claude聊一聊*

[](https://medium.com/@kkehoe1985?source=post_page---byline--70e526e1cf1c--------------------------------)[![Ken Kehoe](../Images/37516ed3ea9d99ba0abf62e022b2589d.png)](https://medium.com/@kkehoe1985?source=post_page---byline--70e526e1cf1c--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--70e526e1cf1c--------------------------------)[![Towards Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--70e526e1cf1c--------------------------------) [Ken Kehoe](https://medium.com/@kkehoe1985?source=post_page---byline--70e526e1cf1c--------------------------------)

·发表于[Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--70e526e1cf1c--------------------------------) ·阅读时间15分钟·2024年6月9日

--

![](../Images/b82e3547c05d05e4b489fd7c171799c5.png)

由[soysuwan123](https://stock.adobe.com/contributor/203211311/soysuwan123?load_type=author&prev_url=detail)

当我想到理解复杂系统所面临的挑战时，我常常回想起在Tripadvisor工作时发生的一件事。我曾帮助我们的机器学习团队为增长营销团队进行分析，以了解哪些客户行为能够预测高生命周期价值（LTV）。我们与一位才华横溢的博士级数据科学家合作，他训练了一个逻辑回归模型，并将系数作为第一次初步输出。

当我们和增长团队一起查看分析结果时，他们感到困惑——逻辑回归系数很难解读，因为它们的尺度不是线性的，而最终最具预测性的特征也不是增长团队可以轻松影响的东西。我们都沉思了一会儿，开启了一个后续分析的工单，但像往常一样，两个团队很快就转向了他们下一个闪亮的想法。数据科学家有一些优先级很高的工作要做，比如我们的搜索排名算法，实际上，增长团队将这份分析丢进了垃圾堆。

我仍然会回想起那次练习——我们是不是太早放弃了？如果反馈循环更紧密会怎样？如果双方都继续挖掘，结果会怎样？第二次或第三次分析会揭示什么？

# 在大规模解锁探索性分析

上面的轶事描述了一个*探索性分析*，它并未完全成功。探索性分析不同于*描述性分析*，后者仅旨在描述发生了什么。探索性分析寻求对一个系统有更深的理解，而不是针对一个明确的问题。考虑以下几种你在商业环境中可能遇到的问题：

![](../Images/a59cca3178437283e4f830debab0978e.png)

注意，探索性问题是开放式的，旨在提升对复杂问题空间的理解。探索性分析通常需要更多的循环和“领域专家”与实际进行分析的人之间更紧密的合作，而这两者通常不是同一个人。在上面的轶事中，合作不够紧密，反馈循环不够短，我们没有投入足够的循环。

这些挑战是为什么许多专家倡导“配对分析”方法来进行数据探索。类似于配对编程，[配对分析](https://hbr.org/2019/01/data-science-and-the-art-of-persuasion)将分析师和决策者聚集在一起，实时进行探索。不幸的是，由于资源和时间的限制，分析师和决策者之间这种紧密的合作伙伴关系在实践中很少发生。

现在想一想你所在的组织——如果每个决策者都有一位经验丰富的分析师与他们配对会怎样？如果他们能够得到分析师的全程关注，并且随时向他们提出后续问题呢？如果这些分析师能够轻松切换上下文，跟随他们合作伙伴的思维流畅地自由联想各种想法和假设呢？

***这是大语言模型（LLM）在分析领域所带来的机会——承诺任何人都可以在技术分析师的帮助下进行探索性分析。***

让我们来看看这在实践中如何体现。以下案例研究和演示展示了具有领域专长的决策者如何与能够查询和可视化数据的AI分析师有效配对。我们将比较ChatGPT的40模型与使用Tableau进行的手动分析的数据探索体验，这也将作为潜在幻觉的错误检查。

**关于数据隐私的说明：** 以下部分链接的视频演示使用的是纯合成数据集，旨在模仿真实的商业模式。有关AI分析师的数据隐私和安全性的一般说明，请参见[数据隐私](#e683)。

# 案例研究：电子商务分析

想象一下：你是一个电子商务服装网站的忙碌高管。你有一个包含预定义的高级关键绩效指标（KPI）的执行摘要仪表板，但有一天早上你查看它时，发现了一些令人担忧的事情：月度市场收入比上个月下降了45%，但为什么下降并不立即清楚。

![](../Images/627ca889b46772571d46fe2fb75ebfce.png)

你的思维会同时朝几个不同的方向展开：是什么导致了收入下降？这个问题是否仅限于某些渠道？问题是否局限于某些消息类型？

但更重要的是，我们能做些什么呢？最近什么有效？什么无效？这一季我们看到哪些季节性趋势？我们如何利用这些趋势？

为了回答这些开放性问题，您需要进行一个中等复杂度的多变量分析。这正是AI分析师可以提供帮助的类型的任务。

# 诊断分析

让我们从更仔细地观察一下月度收入的下降开始。

在我们的示例中，我们看到与营销活动相关的整体收入出现了大幅下降。作为分析师，有两个并行的思路可以开始诊断根本原因：

将整体收入分解成多个输入指标：

1.  总消息发送量：我们发送的消息是否减少了？

1.  打开率：人们是否打开了这些消息？即，邮件主题是否存在问题？

1.  点击率：受众是否不太可能点击消息中的链接？即，消息内容是否存在问题？

1.  转化率：点击后，受众是否不太可能购买？即，着陆页体验是否存在问题？

在不同类别维度下隔离这些趋势

1.  渠道：这个问题是所有渠道都有，还是仅限于某些渠道？

1.  消息类型：所有消息类型中是否都有观察到此问题？

在这种情况下，通过几个提示，LLM能够识别出这两段时间内发送的消息类型之间的巨大差异——即在7月进行了50%的折扣促销，而在8月没有进行。

# 即席数据可视化

所以现在这个下降看起来更有意义了，但我们不可能每个月都进行50%的折扣促销。我们还能做些什么来确保充分利用营销接触点呢？让我们看看我们表现最好的活动，看看除了促销活动外，还有什么能进入前10名。

数据可视化工具支持点选界面来构建数据可视化。今天，像ChatGPT和Julius AI这样的工具已经能够忠实地复制迭代的数据可视化工作流程。

这些工具利用Python库来创建和呈现静态数据可视化以及交互式图表，直接在聊天界面中进行。这些可视化可以通过自然语言进行调整和迭代，流程相当顺畅。随着代码模块、图像渲染和交互式图表元素的引入，聊天界面已接近于jupyter笔记本所普及的“笔记本”格式。

通过几个提示，您通常可以像使用数据可视化工具如Tableau的高级用户一样快速得到数据可视化。在这种情况下，您甚至不需要查阅帮助文档来学习Tableau的[双轴图表](https://help.tableau.com/current/pro/desktop/en-us/multiple_measures.htm)如何工作。

在这里，我们可以看到，“新品到货”消息即使在大量发送的情况下，也能为每个接收者带来强大的收入：

![](../Images/68ae0817e5ee3912f11a5d39f25cf1d6.png)

# 季节性与预测

所以，“新品到货”似乎产生了共鸣，那么下个月我们应该确保推出哪些新产品呢？我们即将进入九月，想了解客户购买模式在这个时节如何变化。我们预计哪些产品类别会增加？哪些会减少？

![](../Images/f9151e8206ad2be61c5ec3e7ba725024.png)

再次通过几个提示，我们得到了清晰、准确的数据可视化，而且我们甚至不需要弄清楚如何使用Tableau的[快速表计算](https://help.tableau.com/current/pro/desktop/en-us/calculations_tablecalculations_quick.htm)功能！

# 市场篮子分析

既然我们已经知道下个月哪些产品类别可能会增加，我们可能想要调整一些交叉销售的推荐。那么，如果男士运动外套将迎来最大增幅，我们如何查看哪些其他类别是与这些商品最常一起购买的？

这通常被称为“市场篮子分析”，进行这种分析所需的数据转换稍显复杂。事实上，在Excel中进行[市场篮子分析](https://www.data-mania.com/blog/market-basket-analysis-in-excel/)如果没有使用笨重的插件几乎是不可能的。但有了LLM，只需稍作停顿，清晰地提出问题即可：

> *“嘿GPT，对于包含男士运动外套的订单，哪些产品类型是同一客户在同一购物车中最常购买的？”*

# 企业流程将如何发展，以融入人工智能？

上面的演示展示了一些LLM如何在大规模数据驱动决策中提供支持的例子。主要参与者已意识到这一机会，整个生态系统正在迅速发展，将LLM融入到分析工作流中。请考虑以下内容：

+   当OpenAI去年发布其“代码解释器”测试版时，很快将该功能更名为“高级数据分析”，以便与早期用户的使用方式相匹配。

+   使用GPT4o，OpenAI现在支持渲染[交互式图表](https://openai.com/index/improvements-to-data-analysis-in-chatgpt/)，包括更改颜色编码、悬停时显示工具提示、排序/筛选图表、选择图表列并应用计算的功能。

+   像 [Julius.ai](http://julius.ai) 这样的工具正在出现，专门解决关键的分析用例，在合适的情况下提供对多个模型的访问。Julius 提供对 OpenAI 和 Anthropic 的模型访问。

+   提供商正不断简化数据共享过程，从静态文件上传扩展到 Google Sheet 连接器以及更高级的 API 选项。

+   像 [Voiceflow](https://www.voiceflow.com/) 这样的工具正在出现，支持以检索增强生成（RAG）用例（如数据分析）为重点的 AI 应用开发。这使得第三方开发者更容易将自定义数据集连接到多个 LLM 提供商的不同模型。

鉴于此，让我们花一点时间想象一下商业智能分析在未来 12-24 个月可能的发展。以下是一些预测：

**人类分析师在提出正确问题、解读模糊数据和不断完善假设方面仍将至关重要。**

LLM 在分析领域的主要优势在于其能够……

1.  将自然语言转化为代码（Python、R、SQL）

1.  智能清理数据集

1.  有效地可视化数据

仍然需要领域专家来解读趋势并迭代假设。人类将减少查询和数据可视化构建，但在推动探索性分析方面依然至关重要。

这一领域的技能将比查询和数据可视化的技术技能更为重要。那些发展出强大数据素养和批判性思维能力的决策者，将大大扩展他们在 LLM 帮助下探索和理解复杂系统的能力。

**企业大规模采用 AI 分析师的最大障碍将是关于数据隐私的担忧。这些担忧将通过多种方式成功解决。**

尽管主要 LLM 提供商的隐私政策非常完善，数据共享仍将是一个主要的焦虑来源。然而，已经有多种方法正在探索解决这一问题。LLM 提供商已经开始尝试使用具有增强隐私和安全措施的 [专用实例](https://openai.com/index/introducing-chatgpt-and-whisper-apis/)。其他解决方案可能包括在通过 API 共享数据时进行加密/解密，以及仅使用 LLM 进行代码生成并共享虚拟数据。

预计 LLM 提供商和云数据库提供商（如 Gemini / BigQuery、OpenAI / Microsoft Azure、Amazon Olympus / AWS）之间的垂直对接将进一步加强，以帮助解决这一问题。

**一旦数据隐私和安全问题得到解决，早期采用者最初将面临速度、错误处理和小范围幻觉等挑战。这些挑战将通过 LLM 提供商、组织和个人的共同努力得到克服。**

主要的 LLM 提供商正在以高速提高速度和准确性。 预计这一趋势将继续，分析用例将从专业化和选择性上下文（记忆、工具访问和狭义指令）中受益。

随着更深度的集成出现并且成本下降，组织将有动力投资于基于 LLM 的分析。

个人将能够比 SQL、Python / R 和数据可视化工具更快速地学习有效的提示词编写方法。

**BI 团队将减少对分析请求的响应，更加专注于构建和支持底层数据架构。全面的数据集文档将成为未来所有 BI 数据集的关键。**

一旦 LLM 达到一定的组织信任水平，分析将主要由用户自助完成。

“数据字典”一直是 BI 组织的次要关注点，但未来任何希望利用 AI 分析师的组织都必须将其作为基本要素。

**随着 LLM 能够实时执行复杂的数据转换，所需的汇总表将会减少。 LLM 使用的表将更接近“银级”而非“金级”** [**奖章架构**](https://www.databricks.com/glossary/medallion-architecture)**。**

一个明显的例子是本文稍后讨论的[市场篮子分析](https://docs.google.com/document/d/1qAEEuZWkzus6zjyDzZAmaLHArjWMU2R_L2PdNUxhwL8/edit#heading=h.aasw1hl9g1pk)。传统的市场篮子分析涉及通过复杂的转换创建一个全新的数据集。使用 LLM 时，可以使用“原始”表，并且这些转换可以在“恰好及时”的情况下执行，仅针对最终用户感兴趣的产品或类别。

这里的反面观点是，原始数据集更大，因此会产生更高的成本，因为它们需要更大量的令牌作为输入。 这是一个重要的权衡，取决于用于利用 LLM API 的成本模型。

**语音将成为 LLM 交互的主导输入方式，包括在分析用例中。**

语音技术通过语音助手（如 Siri 和 Alexa）一直未能真正普及。然而，随着 GPT-4 和其在[实时对话语音中的能力](https://youtu.be/DQacCB9tDaw?t=561)的发布，预计语音交互将跃升为主流应用。

**交互式可视化将成为分析用例中主导的输出形式。**

已经有充分的研究表明，人脑在处理[视觉信息方面远比其他任何媒介更高效](https://treehousetechgroup.com/the-psychology-behind-data-visualization/)。 预计探索性分析的用户体验将遵循语音/可视化模式，用户提出问题，AI 分析师尽可能地将信息可视化。

**最有效的 LLM 分析系统将利用来自单一提供商的多个模型，智能地使用针对特定任务所需的最低复杂度模型，从而节省令牌成本。**

随着LLM提供商不断发布新模型，一种基于令牌的定价结构应运而生，该结构根据所使用模型的复杂性应用乘数。也就是说，GPT-4o的回答比GPT-3.5的回答要贵。为了降低成本，基于AI的应用将需要优化不同模型之间的使用。由于发送大量数据所带来的成本，预计组织将限制数据共享，仅与单一提供商共享数据。

**扩展的上下文窗口将允许用户进行长期分析，保持上下文的连贯性，随着新数据的到来和假设的变化，能够跨越几天或几周进行分析**

LLM的上下文窗口大小决定了可以作为输入传递多少信息。对于像数据分析这样的RAG（检索增强生成）用例，这个值可能特别高。更大的上下文窗口允许传递更多信息，并且能够进行更长时间的对话交换。

目前，谷歌的Gemini 1.5模型具有所有LLM中最大的可用上下文窗口：

![](../Images/c519af3ace80874ba3e121017ef02191.png)

# 2024年设置AI分析师

如果你有兴趣尝试将LLM用于分析用例，进行一些初始配置是必要的。阅读以下部分，获取一些关于如何获得最佳性能的建议，并避免一些常见的陷阱。

# 初始配置

# 数据集和数据字典

首先，您需要为LLM提供访问数据的权限。尽管这听起来显而易见，您共享的数据集必须包含回答您希望向LLM提出的问题所需的数据。更重要的是，数据集中所有字段需要有清晰、书写良好的数据字典，以便LLM能够充分理解每个指标和维度。上述演示中使用的数据集和数据字典可以在这里查看：

+   [事件数据集示例](https://docs.google.com/spreadsheets/d/1AsnBx47a1t2R5d_Y1T9UHE_NPsGYKNwqlcQRVwss49w/edit?usp=sharing)

+   [营销绩效数据集示例](https://docs.google.com/spreadsheets/d/1e9O3nH0DMLlD7JGXcXM2_zE10qY8tdIfOzOuHNntcr8/edit?usp=sharing)

# 数据连接

与LLM共享数据的方式有多种，这取决于您使用的模型：

+   **文件上传：** 当前最简单的方法是通过网页应用的UI上传静态文件。ChatGPT、Claude和Julius.ai都支持通过网页UI上传文件。

+   **Google Sheets：** ChatGPT和Julius.ai原生支持从Google Sheets导入数据。

+   **API：** 对于更复杂的用例或AI驱动的应用，您可以通过API共享数据集。更多细节请参阅您提供商的开发者文档。

# 数据隐私

目前，除非您安装了像[Meta的Llama](https://llama.meta.com/)这样的开源LLM并在本地运行，否则必须通过上述方法之一将数据发送到LLM。这引发了明显的安全性和数据隐私问题。

如果您想分析包含 PII（个人身份信息）如 customer_ids 的数据集，请考虑是否聚合后的数据集足以满足您的需求。如果您认为预先聚合的数据集不足以满足需求，请确保在上传前加密这些字段，以免泄露 PII。

还要考虑是否在分享有关贵组织的机密信息。如果发生数据泄露，您不希望自己因为将敏感信息暴露给第三方而承担责任。

您可以在此查看文中提到的模型的隐私政策：

+   OpenAI: [https://openai.com/policies/privacy-policy/](https://openai.com/policies/privacy-policy/)

+   Anthropic: [https://support.anthropic.com/en/collections/4078534-privacy-legal](https://support.anthropic.com/en/collections/4078534-privacy-legal)

+   Julius: [https://julius.ai/docs/privacy-policy](https://julius.ai/docs/privacy-policy)

# 自定义指令

如果您正在创建一个[自定义 GPT](https://openai.com/index/introducing-gpts/)，可以为该 GPT 提供一套自定义指令来指导其行为。对于其他不支持自定义实例的模型，如 Claude 或 Gemini，您可以通过包含这些指南的长格式提示来开始对话。在上面演示中使用的自定义 GPT 的指令可以在这里找到：[电商 BI 分析师自定义指令](https://docs.google.com/document/d/1_yhGPN28OKyToWeXkeqkPi3cDvW_VSPiVNy0kM51BLg/edit?usp=sharing)

根据我的经验，以下指南对 AI 分析师非常有用：

+   **身份：** 告诉 LLM 它的身份。例如：*“你是一个专家级的商业智能分析师，负责解答关于电商服装零售商的问题。”*

+   **数据集：** 如果您计划始终使用相同的数据集，值得为 LLM 提供一些关于数据集性质的额外内容。这可以补充数据字典，并澄清 LLM 对数据的理解。例如：*“该数据集包含了电商服装零售商在 2022 年 7 月和 8 月两个月内记录的所有购买数据。每一行代表一次购买事件，包含关于所购买商品以及购买者的客户数据。”*

+   **数据可视化最佳实践：** LLM 渲染的图表可能需要一些微调，以提高人类的可读性。这可能随着时间的推移得到改善，但目前我发现将一些数据可视化的最佳实践“硬编码”到自定义指令中非常有用。例如：*“始终确保轴标签通过以下一些方式变得清晰可见：减少显示标签的数量（例如，每隔一个标签或每隔三个标签显示一个标签），重新格式化标签的方向，或添加额外的填充。”*

+   **计算字段：** 为了消除派生指标计算中的任何歧义，向 LLM 提供明确的指导是有用的，关于如何计算这些指标。例如：*“点击率” = “唯一点击”总和 ÷ “唯一打开”总和*

+   **一般指导：** 在你尝试使用 LLM 时，注意任何不希望看到或意外的行为，并考虑向自定义指令中添加明确的指导。例如：*“当问题中包含‘显示我’这几个词时，始终尝试以数据可视化的方式回答。”*

有时需要对 GPT 实例进行“引导”，以确保它已经阅读并理解了这些指令。在这种情况下，简单地问它一些关于自定义指令内容的问题，以确认它已经掌握了这些内容。

# 需要注意的事项

**处理时间：** GPT 有时可能需要相当长的时间来生成回应。上面的示范已经为简洁性和清晰度进行了编辑。根据系统当前的负载情况，你可能需要保持耐心，因为 LLM 正在分析数据。

**错误信息：** 当你开始尝试使用 LLM 进行分析时，可能会遇到频繁的错误信息，尤其是在调整自定义指令和优化提示词时。通常，LLM 在遇到错误时会自动重试并成功修正。有时，它可能会直接失败。当这种情况发生时，你可能需要检查正在使用的代码，并进行故障排除。

**信任，但要验证：** 对于更复杂的分析，进行抽查以确认模型输出是否正确。在大型语言模型（LLM）进一步发展之前，你可能需要在 Jupyter Notebook 中本地运行 Python 代码，以了解模型的处理方式。

**幻觉：** 我发现，当讨论引用具有客观真实数据集的知识库时，幻觉的可能性要小得多。然而，偶尔我也会观察到 LLM 在计算的指标定义上出错，或在分析元素的性质上口误。

# 结论

LLMs 将深刻改变分析领域，自动化查询和可视化工作流程。在未来的 2-3 年里，能够将 LLMs 融入分析工作流程的组织，并重新调整 BI 团队以支持这一新技术的，将在战略决策中占据重要优势。这里的潜在价值足以克服最初在数据隐私和用户体验方面的挑战。

用不朽的 Al Swearengen 的话来说：“一切都会变化；不要害怕。”

*除非另有说明，所有图片均为作者提供*
