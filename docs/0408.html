<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Generative AI Design Patterns: A Comprehensive Guide</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Generative AI Design Patterns: A Comprehensive Guide</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/generative-ai-design-patterns-a-comprehensive-guide-41425a40d7d0?source=collection_archive---------1-----------------------#2024-02-13">https://towardsdatascience.com/generative-ai-design-patterns-a-comprehensive-guide-41425a40d7d0?source=collection_archive---------1-----------------------#2024-02-13</a></blockquote><div><div class="em ff fg fh fi fj"/><div class="fk fl fm fn fo"><div class="ab cb"><div class="ci bh ew ex ey ez"><div/><div><h2 id="299b" class="pw-subtitle-paragraph go fq fr bf b gp gq gr gs gt gu gv gw gx gy gz ha hb hc hd cq dx">Reference architecture patterns and mental models for working with Large Language Models (LLM’s)</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="he hf hg hh hi ab"><div><div class="ab hj"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@vincentkoc?source=post_page---byline--41425a40d7d0--------------------------------" rel="noopener follow"><div class="l hk hl by hm hn"><div class="l ed"><img alt="Vincent Koc" class="l ep by dd de cx" src="../Images/6cbe2dab3c452384057fbdb7a16506be.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*oJyChdfazLrlPdWjbg0GUQ.jpeg"/><div class="ho by l dd de em n hp eo"/></div></div></a></div></div><div class="hq ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--41425a40d7d0--------------------------------" rel="noopener follow"><div class="l hr hs by hm ht"><div class="l ed"><img alt="Towards Data Science" class="l ep by br hu cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="ho by l br hu em n hp eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hv ab q"><div class="ab q hw"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hx hy bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hz" data-testid="authorName" href="https://medium.com/@vincentkoc?source=post_page---byline--41425a40d7d0--------------------------------" rel="noopener follow">Vincent Koc</a></p></div></div></div><span class="ia ib" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hx hy dx"><button class="ic id ah ai aj ak al am an ao ap aq ar ie if ig" disabled="">Follow</button></p></div></div></span></div></div><div class="l ih"><span class="bf b bg z dx"><div class="ab cn ii ij ik"><div class="il im ab"><div class="bf b bg z dx ab in"><span class="io l ih">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hz ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--41425a40d7d0--------------------------------" rel="noopener follow"><p class="bf b bg z ip iq ir is it iu iv iw bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="ia ib" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">8 min read</span><div class="ix iy l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Feb 13, 2024</span></div></span></div></span></div></div></div><div class="ab cp iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo"><div class="h k w ea eb q"><div class="ke l"><div class="ab q kf kg"><div class="pw-multi-vote-icon ed io kh ki kj"><div class=""><div class="kk kl km kn ko kp kq am kr ks kt kj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l ku kv kw kx ky kz la"><p class="bf b dy z dx"><span class="kl">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kk ld le ab q ee lf lg" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lc"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count lb lc">19</span></p></button></div></div></div><div class="ab q jp jq jr js jt ju jv jw jx jy jz ka kb kc kd"><div class="lh k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al li an ao ap ie lj lk ll" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep lm cn"><div class="l ae"><div class="ab cb"><div class="ln lo lp lq lr ls ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al li an ao ap ie lt lu lg lv lw lx ly lz s ma mb mc md me mf mg u mh mi mj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al li an ao ap ie lt lu lg lv lw lx ly lz s ma mb mc md me mf mg u mh mi mj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al li an ao ap ie lt lu lg lv lw lx ly lz s ma mb mc md me mf mg u mh mi mj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mn mo mp mq mr ms mk ml paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml mm"><img src="../Images/73014627d2049a0d28b92d43000b70f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2tBQkVvC-_sHACgSs0ouug.png"/></div></div></figure><p id="3c35" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk"><em class="nu">Note: When I initially published this article back in February it was an early thought experiment. Since then I have started working on a book for “Generative AI Design Patterns” with a major publisher. Please follow me to keep updated on updates to my patterns an ideas in this space.</em></p><h2 id="d76a" class="nv nw fr bf nx ny nz oa ob oc od oe of nh og oh oi nl oj ok ol np om on oo op bk">The Need For AI Patterns</h2><p id="497f" class="pw-post-body-paragraph my mz fr na b gp oq nc nd gs or nf ng nh os nj nk nl ot nn no np ou nr ns nt fk bk">We all anchor to some tried and tested methods, approaches and patterns when building something new. This statement is very true for those in software engineering, however for generative AI and artificial intelligence itself this may not be the case. With emerging technologies such as generative AI we lack well documented patterns to ground our solution's.</p><p id="93cf" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">Here I share a handful of approaches and patterns for generative AI, based on my evaluation of countless production implementations of LLM’s in production. The goal of these patterns is to help mitigate and overcome some of the challenges with generative AI implementations such as cost, latency and hallucinations.</p><h2 id="cbf0" class="nv nw fr bf nx ny nz oa ob oc od oe of nh og oh oi nl oj ok ol np om on oo op bk">List of Patterns</h2><ol class=""><li id="104d" class="my mz fr na b gp oq nc nd gs or nf ng nh os nj nk nl ot nn no np ou nr ns nt ov ow ox bk"><a class="af oy" href="#82c6" rel="noopener ugc nofollow">Layered Caching Strategy Leading To Fine-Tuning</a></li><li id="b280" class="my mz fr na b gp oz nc nd gs pa nf ng nh pb nj nk nl pc nn no np pd nr ns nt ov ow ox bk"><a class="af oy" href="#fc13" rel="noopener ugc nofollow">Multiplexing AI Agents For A Panel Of Experts</a></li><li id="5ab8" class="my mz fr na b gp oz nc nd gs pa nf ng nh pb nj nk nl pc nn no np pd nr ns nt ov ow ox bk"><a class="af oy" href="#a0b9" rel="noopener ugc nofollow">Fine-Tuning LLM’s For Multiple Tasks</a></li><li id="87d3" class="my mz fr na b gp oz nc nd gs pa nf ng nh pb nj nk nl pc nn no np pd nr ns nt ov ow ox bk"><a class="af oy" href="#19ee" rel="noopener ugc nofollow">Blending Rules Based &amp; Generative</a></li><li id="97be" class="my mz fr na b gp oz nc nd gs pa nf ng nh pb nj nk nl pc nn no np pd nr ns nt ov ow ox bk"><a class="af oy" href="#1b7b" rel="noopener ugc nofollow">Utilizing Knowledge Graphs with LLM’s</a></li><li id="bcce" class="my mz fr na b gp oz nc nd gs pa nf ng nh pb nj nk nl pc nn no np pd nr ns nt ov ow ox bk"><a class="af oy" href="#1575" rel="noopener ugc nofollow">Swarm Of Generative AI Agents</a></li><li id="77c5" class="my mz fr na b gp oz nc nd gs pa nf ng nh pb nj nk nl pc nn no np pd nr ns nt ov ow ox bk"><a class="af oy" href="#682f" rel="noopener ugc nofollow">Modular Monolith LLM Approach With Composability</a></li><li id="a326" class="my mz fr na b gp oz nc nd gs pa nf ng nh pb nj nk nl pc nn no np pd nr ns nt ov ow ox bk"><a class="af oy" href="#07cb" rel="noopener ugc nofollow">Approach To Memory Cognition For LLM’s</a></li><li id="0d2c" class="my mz fr na b gp oz nc nd gs pa nf ng nh pb nj nk nl pc nn no np pd nr ns nt ov ow ox bk"><a class="af oy" href="#ee0a" rel="noopener ugc nofollow">Red &amp; Blue Team Dual-Model Evaluation</a></li></ol></div></div></div><div class="ab cb pe pf pg ph" role="separator"><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk"/></div><div class="fk fl fm fn fo"><div class="ab cb"><div class="ci bh ew ex ey ez"><h2 id="82c6" class="nv nw fr bf nx ny nz oa ob oc od oe of nh og oh oi nl oj ok ol np om on oo op bk">1) Layered Caching Strategy Leading To Fine-Tuning</h2></div></div><div class="ms"><div class="ab cb"><div class="ln pm lo pn lp po cf pp cg pq ci bh"><figure class="mn mo mp mq mr ms ps pt paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml pr"><img src="../Images/72caae095583d50b800b2c7bd846b5a4.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*JruSgFs4txALlvMTWh94rA.png"/></div></div></figure></div></div></div><div class="ab cb"><div class="ci bh ew ex ey ez"><p id="80f0" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">Here we are solving for a combination of factors from cost, redundancy and training data when introducing a caching strategy and service to our large language models.</p><p id="8f4c" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">By caching these initial results, the system can serve up answers more rapidly on subsequent queries, enhancing efficiency. The twist comes with the fine-tuning layer once we have sufficient data, where feedback from these early interactions is used to refine a more specialized model.</p><p id="6255" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">The specialized model not only streamlines the process but also tailors the AI’s expertise to specific tasks, making it highly effective in environments where precision and adaptability are paramount, like customer service or personalized content creation.</p><p id="01c5" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">For getting started there are pre-built services such as <a class="af oy" href="https://github.com/zilliztech/GPTCache" rel="noopener ugc nofollow" target="_blank">GPTCache</a> or roll your own with common caching databases such as <a class="af oy" href="https://redis.io/" rel="noopener ugc nofollow" target="_blank">Redis</a>, <a class="af oy" href="https://cassandra.apache.org/_/index.html" rel="noopener ugc nofollow" target="_blank">Apache Cassandra</a>, <a class="af oy" href="https://memcached.org/" rel="noopener ugc nofollow" target="_blank">Memcache</a>d. Be sure you monitor and measure your latency as you add additional services to the mix.</p></div></div></div><div class="ab cb pe pf pg ph" role="separator"><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk"/></div><div class="fk fl fm fn fo"><div class="ab cb"><div class="ci bh ew ex ey ez"><h2 id="fc13" class="nv nw fr bf nx ny nz oa ob oc od oe of nh og oh oi nl oj ok ol np om on oo op bk">2) Multiplexing AI Agents For A Panel Of Experts</h2></div></div><div class="ms"><div class="ab cb"><div class="ln pm lo pn lp po cf pp cg pq ci bh"><figure class="mn mo mp mq mr ms ps pt paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml pu"><img src="../Images/919dda9001f99d2fe08afcfeb3709264.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*40vNV6n0sHpctSIyUHwEKQ.png"/></div></div></figure></div></div></div><div class="ab cb"><div class="ci bh ew ex ey ez"><p id="c7aa" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">Imagine an ecosystem where multiple generative AI models orientated to a specific task (“agents”), each a specialist within its domain, work in parallel to address a query. This <em class="nu">multiplexing</em> strategy enables a diverse set of responses, which are then integrated to provide a comprehensive answer.</p><p id="192d" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">This setup is ideal for complex problem-solving scenarios where different aspects of a problem require different expertise, much like a team of experts each tackling a facet of a larger issue.</p><p id="8b22" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">A larger model such as a GPT-4 is used to understand context and break this down into specific tasks or information requests which are passed to smaller agents. Agents could be smaller language models such as <a class="af oy" href="https://www.microsoft.com/en-us/research/blog/phi-2-the-surprising-power-of-small-language-models/" rel="noopener ugc nofollow" target="_blank">Phi-2</a> or <a class="af oy" href="https://huggingface.co/TinyLlama/TinyLlama-1.1B-Chat-v0.1" rel="noopener ugc nofollow" target="_blank">TinyLlama</a> that have been trained on specific tasks, access to specific tools or generalized models such as GPT, Llama with specific personality, context prompts and function calls.</p></div></div></div><div class="ab cb pe pf pg ph" role="separator"><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk"/></div><div class="fk fl fm fn fo"><div class="ab cb"><div class="ci bh ew ex ey ez"><h2 id="a0b9" class="nv nw fr bf nx ny nz oa ob oc od oe of nh og oh oi nl oj ok ol np om on oo op bk">3) Fine-Tuning LLM’s For Multiple Tasks</h2></div></div><div class="ms"><div class="ab cb"><div class="ln pm lo pn lp po cf pp cg pq ci bh"><figure class="mn mo mp mq mr ms ps pt paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml pv"><img src="../Images/b91f9c304476a30834a284178a780f9c.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*t_peu77E5AaPQDS1Z2-Lgw.png"/></div></div></figure></div></div></div><div class="ab cb"><div class="ci bh ew ex ey ez"><p id="1d5a" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">Here we fine-tune a large language model on multiple tasks simultaneously instead of a single task. It’s an approach that promotes a robust transfer of knowledge and skills across different domains, enhancing the model’s versatility.</p><p id="2ae1" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">This multi-task learning is especially useful for platforms that need to handle a variety of tasks with a high degree of competence, such as virtual assistants or AI-powered research tools. This could potentially simplify workflows for training and testing for a complex domain.</p><p id="0aca" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">Some resources and packages for training LLM’s include <a class="af oy" href="https://github.com/microsoft/DeepSpeed" rel="noopener ugc nofollow" target="_blank">DeepSpeed</a>, and the training functions on <a class="af oy" href="https://huggingface.co/docs/transformers/training" rel="noopener ugc nofollow" target="_blank">Hugging Face’s Transformer library</a>.</p></div></div></div><div class="ab cb pe pf pg ph" role="separator"><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk"/></div><div class="fk fl fm fn fo"><div class="ab cb"><div class="ci bh ew ex ey ez"><h2 id="19ee" class="nv nw fr bf nx ny nz oa ob oc od oe of nh og oh oi nl oj ok ol np om on oo op bk">4) Blending Rules Based &amp; Generative</h2></div></div><div class="ms"><div class="ab cb"><div class="ln pm lo pn lp po cf pp cg pq ci bh"><figure class="mn mo mp mq mr ms ps pt paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml pw"><img src="../Images/f9978e0ccc8d55999338ae7a942dcbc4.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*ESI8bYTuDKwTHiOr0tTdDw.png"/></div></div></figure></div></div></div><div class="ab cb"><div class="ci bh ew ex ey ez"><p id="075a" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">A number of existing business systems and organizational applications are still somewhat rules based. By fusing the generative with the structured precision of rule-based logic, this pattern aims to produce solutions that is both creative yet compliant.</p><p id="846f" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">It’s a powerful strategy for industries where outputs must adhere to stringent standards or regulations, ensuring the AI remains within the bounds of desired parameters while still being able to innovate and engage. A good example of this is generating intents and message flows for a phone call IVR system or traditional (<em class="nu">non-llm based</em>) chat bots which is rules based.</p></div></div></div><div class="ab cb pe pf pg ph" role="separator"><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk"/></div><div class="fk fl fm fn fo"><div class="ab cb"><div class="ci bh ew ex ey ez"><h2 id="1b7b" class="nv nw fr bf nx ny nz oa ob oc od oe of nh og oh oi nl oj ok ol np om on oo op bk">5) Utilizing Knowledge Graphs with LLM’s</h2></div></div><div class="ms"><div class="ab cb"><div class="ln pm lo pn lp po cf pp cg pq ci bh"><figure class="mn mo mp mq mr ms ps pt paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml px"><img src="../Images/28d31cb2e4735f026c06dd8d980a5118.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*AfkF7JwB0FFZrhQhP-8gsQ.png"/></div></div></figure></div></div></div><div class="ab cb"><div class="ci bh ew ex ey ez"><p id="e89b" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">Integrating knowledge graphs with generative AI models gives them a fact orientated super power, allowing for outputs that are not only contextually aware but also more factually correct.</p><p id="5623" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">This approach is crucial for applications where truth and accuracy are non-negotiable, such as in educational content creation, medical advice, or any field where misinformation could have serious consequences.</p><p id="6c2b" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">Knowledge graphs and graph ontologies (<em class="nu">set of concepts for a graph</em>) allow for complex topics or organizational problems to be broken into a structured format to help ground a large language model with deep context. You can also use a language model to generate the ontologies in a format such as JSON or RDF, <a class="af oy" href="https://gist.github.com/koconder/c37806ecc2e0a6d1ed3cdfbe4951b199" rel="noopener ugc nofollow" target="_blank">example prompt I created you can use</a>.</p><p id="c4a0" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">Services you can use for knowledge graphs include graph database services such as <a class="af oy" href="https://arangodb.com/" rel="noopener ugc nofollow" target="_blank">ArangoDB</a>, <a class="af oy" href="https://aws.amazon.com/neptune/" rel="noopener ugc nofollow" target="_blank">Amazon Neptune</a>, <a class="af oy" href="https://azure.microsoft.com/en-us/products/cosmos-db" rel="noopener ugc nofollow" target="_blank">Azure Cosmos DB</a> and <a class="af oy" href="https://neo4j.com/" rel="noopener ugc nofollow" target="_blank">Neo4j</a>. There are also wider datasets and services for accessing broader knowledge graphs including <a class="af oy" href="https://cloud.google.com/enterprise-knowledge-graph/docs/search-api" rel="noopener ugc nofollow" target="_blank">Google Enterprise Knowledge Graph API</a>, <a class="af oy" href="https://github.com/pykeen/pykeen?tab=readme-ov-file#datasets" rel="noopener ugc nofollow" target="_blank">PyKEEN Datasets</a>, and <a class="af oy" href="https://cloud.google.com/enterprise-knowledge-graph/docs/search-api" rel="noopener ugc nofollow" target="_blank">Wikidata</a>.</p></div></div></div><div class="ab cb pe pf pg ph" role="separator"><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk"/></div><div class="fk fl fm fn fo"><div class="ab cb"><div class="ci bh ew ex ey ez"><h2 id="1575" class="nv nw fr bf nx ny nz oa ob oc od oe of nh og oh oi nl oj ok ol np om on oo op bk">6) Swarm Of AI Agents</h2></div></div><div class="ms"><div class="ab cb"><div class="ln pm lo pn lp po cf pp cg pq ci bh"><figure class="mn mo mp mq mr ms ps pt paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml py"><img src="../Images/876e65a6bc332cb4a902745b2bb1218e.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*TpXF89A9GHZchfgbSOxsYQ.png"/></div></div></figure></div></div></div><div class="ab cb"><div class="ci bh ew ex ey ez"><p id="1147" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">Drawing inspiration from natural swarms and heards, this model employs a multitude of AI agents that collectively tackle a problem, each contributing a unique perspective.</p><p id="2011" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">The resulting aggregated output reflects a form of collective intelligence, surpassing what any individual agent could achieve. This pattern is particularly advantageous in scenarios that require a breadth of creative solutions or when navigating complex datasets.</p><p id="61fa" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">An example of this could be <a class="af oy" href="https://www.fieldstudy.ai/" rel="noopener ugc nofollow" target="_blank">reviewing a research paper from a multiple “experts” point of view</a>, or assessing customer interactions for many use-cases at once from fraud to offers. We take these collective “agents” and combine all their inputs together. For high volume swarm’s you can look at deploying messaging services such as <a class="af oy" href="https://kafka.apache.org/" rel="noopener ugc nofollow" target="_blank">Apache Kafka</a> to handle the messages between the agents and services.</p></div></div></div><div class="ab cb pe pf pg ph" role="separator"><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk"/></div><div class="fk fl fm fn fo"><div class="ab cb"><div class="ci bh ew ex ey ez"><h2 id="682f" class="nv nw fr bf nx ny nz oa ob oc od oe of nh og oh oi nl oj ok ol np om on oo op bk">7) Modular Monolith LLM Approach With Composability</h2></div></div><div class="ms"><div class="ab cb"><div class="ln pm lo pn lp po cf pp cg pq ci bh"><figure class="mn mo mp mq mr ms ps pt paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml pz"><img src="../Images/dea30f801f0806a78648e20e18d69267.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*HuFhp3Zjnp6ad38m249Nog.png"/></div></div></figure></div></div></div><div class="ab cb"><div class="ci bh ew ex ey ez"><p id="ff8a" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">This design champions adaptability, featuring a modular AI system that can dynamically reconfigure itself for optimal task performance. It’s akin to having a Swiss Army knife, where each module can be selected and activated as needed, making it highly effective for businesses that require tailor-made solutions for varying customer interactions or product needs.</p><p id="6d53" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">You can deploy the use of various autonomous agent frameworks and architectures to develop each of your agents and their tools. Example frameworks include <a class="af oy" href="https://github.com/joaomdmoura/crewAI" rel="noopener ugc nofollow" target="_blank">CrewAI</a>, <a class="af oy" href="https://www.langchain.com/" rel="noopener ugc nofollow" target="_blank">Langchain</a>, <a class="af oy" href="https://www.microsoft.com/en-us/research/project/autogen/" rel="noopener ugc nofollow" target="_blank">Microsoft Autogen</a> and <a class="af oy" href="https://superagi.com/" rel="noopener ugc nofollow" target="_blank">SuperAGI</a>.</p><p id="3be4" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">For a sales modular monolith this could be agents focused on prospecting, one handling bookings, one focused on generating messaging, and another updating databases. In future as specific services become available from specialized AI companies, you can swap out a module for an external or 3rd party service for a given set of tasks or domain specific problems.</p><h2 id="07cb" class="nv nw fr bf nx ny nz oa ob oc od oe of nh og oh oi nl oj ok ol np om on oo op bk">8) Approach To Memory Cognition For LLM’s</h2></div></div><div class="ms"><div class="ab cb"><div class="ln pm lo pn lp po cf pp cg pq ci bh"><figure class="mn mo mp mq mr ms ps pt paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml qa"><img src="../Images/c017d73cd3752af73244a4c348b13038.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*WGV1UYO6dAnbaq37w44Kgg.png"/></div></div></figure></div></div></div><div class="ab cb"><div class="ci bh ew ex ey ez"><p id="3090" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">This approach introduces an element of human-like memory to AI, allowing models to recall and build upon previous interactions for more nuanced responses.</p><p id="866f" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">It’s particularly useful for ongoing conversations or learning scenarios, as the AI develops a more profound understanding over time, much like a dedicated personal assistant or an adaptive learning platform. Memory cognition approaches can be developed through summation and storing key events and discussions into a vector database over time.</p><p id="581c" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">To keep compute of summaries low, you can leverage summation through smaller NLP libraries such as <a class="af oy" href="https://spacy.io/" rel="noopener ugc nofollow" target="_blank">spaCy</a>, or <a class="af oy" href="https://huggingface.co/docs/transformers/model_doc/bart" rel="noopener ugc nofollow" target="_blank">BART language models</a> if dealing with considerable volumes. Databases used are vector based and retrieval during prompt stage to check the short-term memory uses a similarity search to locate key “facts”. For those interested on a working solution there is an open-sourced solution following a similar pattern called <a class="af oy" href="https://memgpt.readme.io/docs/index" rel="noopener ugc nofollow" target="_blank">MemGPT</a>.</p></div></div></div><div class="ab cb pe pf pg ph" role="separator"><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk"/></div><div class="fk fl fm fn fo"><div class="ab cb"><div class="ci bh ew ex ey ez"><h2 id="ee0a" class="nv nw fr bf nx ny nz oa ob oc od oe of nh og oh oi nl oj ok ol np om on oo op bk">9) Red &amp; Blue Team Dual-Model Evaluation</h2></div></div><div class="ms"><div class="ab cb"><div class="ln pm lo pn lp po cf pp cg pq ci bh"><figure class="mn mo mp mq mr ms ps pt paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml qb"><img src="../Images/507fc875124778f3f9319a296b7a3456.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*7D_yQ8TZ7QmzV9BRQt55JA.png"/></div></div></figure></div></div></div><div class="ab cb"><div class="ci bh ew ex ey ez"><p id="f72a" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">In the Red and Blue team evaluation model, one AI generates content while another critically evaluates it, akin to a rigorous peer-review process. This dual-model setup is excellent for quality control, making it highly applicable in content generation platforms where credibility and accuracy are vital, such as news aggregation or educational material production.</p><p id="8308" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">This approach can be used to replace parts of human feedback for complex tasks with a fine-tuned model to mimic the human review process and refine the results for evaluating complex language scenarios and outputs.</p></div></div></div><div class="ab cb pe pf pg ph" role="separator"><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk"/></div><div class="fk fl fm fn fo"><div class="ab cb"><div class="ci bh ew ex ey ez"><h2 id="910b" class="nv nw fr bf nx ny nz oa ob oc od oe of nh og oh oi nl oj ok ol np om on oo op bk"><strong class="al">Takeaways</strong></h2><p id="e189" class="pw-post-body-paragraph my mz fr na b gp oq nc nd gs or nf ng nh os nj nk nl ot nn no np ou nr ns nt fk bk">These design patterns for generative AI are more than mere templates; but the frameworks upon which the intelligent systems of tomorrow will grow. As we continue to explore and innovate, it’s clear that the architecture we choose will define not just the capabilities but the very identity of the AI we create.</p><p id="6f6a" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk">By no means this list is final, we will see this space develop as the patterns and use cases for generative AI expands. <em class="nu">This write-up was inspired by the </em><a class="af oy" href="https://tomtunguz.com/ai-design-patterns/" rel="noopener ugc nofollow" target="_blank"><em class="nu">AI design patterns</em></a><em class="nu"> published by Tomasz Tunguz.</em></p></div></div></div><div class="ab cb pe pf pg ph" role="separator"><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk pl"/><span class="pi by bm pj pk"/></div><div class="fk fl fm fn fo"><div class="ab cb"><div class="ci bh ew ex ey ez"><h2 id="fec4" class="nv nw fr bf nx ny nz oa ob oc od oe of nh og oh oi nl oj ok ol np om on oo op bk">Enjoyed This Story?</h2><p id="0c3c" class="pw-post-body-paragraph my mz fr na b gp oq nc nd gs or nf ng nh os nj nk nl ot nn no np ou nr ns nt fk bk">Vincent Koc is a highly accomplished, commercially-focused technologist and futurist with a wealth of experience focused in data-driven and digital disciplines.</p><p id="1da3" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk"><a class="af oy" href="https://medium.com/subscribe/@vkoc" rel="noopener">Subscribe for free</a> to get notified when Vincent publishes a new story. Or follow him on <a class="af oy" href="https://www.linkedin.com/in/koconder/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a> and <a class="af oy" href="https://twitter.com/koconder" rel="noopener ugc nofollow" target="_blank">X</a>.</p><div class="qc qd qe qf qg qh"><a href="https://medium.com/subscribe/@vkoc?source=post_page-----41425a40d7d0--------------------------------" rel="noopener follow" target="_blank"><div class="qi ab ih"><div class="qj ab co cb qk ql"><h2 class="bf fs hx z ip qm ir is qn iu iw fq bk">Get an email whenever Vincent Koc publishes.</h2><div class="qo l"><h3 class="bf b hx z ip qm ir is qn iu iw dx">Get an email whenever Vincent Koc publishes. By signing up, you will create a Medium account if you don’t already have…</h3></div><div class="qp l"><p class="bf b dy z ip qm ir is qn iu iw dx">medium.com</p></div></div><div class="qq l"><div class="qr l qs qt qu qq qv ls qh"/></div></div></a></div><p id="51e8" class="pw-post-body-paragraph my mz fr na b gp nb nc nd gs ne nf ng nh ni nj nk nl nm nn no np nq nr ns nt fk bk"><em class="nu">Unless otherwise noted, all images are by the author</em></p></div></div></div></div>    
</body>
</html>