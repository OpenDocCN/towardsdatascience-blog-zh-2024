["```py\nGOOGLE_API_KEY=AI…\nOPENAI_API_KEY=sk-…\n```", "```py\npip install -r requirements.txt\n```", "```py\nuser_proxy = UserProxyAgent(\"user_proxy\",\ncode_execution_config={\"work_dir\": \"coding\", \"use_docker\": False},\nis_termination_msg=lambda x: autogen.code_utils.content_str(x.get(\"content\")).find(\"TERMINATE\") >= 0,\nhuman_input_mode=\"NEVER\",\n)\n```", "```py\nopenai_config = {\n\"config_list\": [\n{\n\"model\": \"gpt-4\",\n\"api_key\": os.environ.get(\"OPENAI_API_KEY\")\n}\n]\n}\n```", "```py\ngemini_config = {\n\"config_list\": [\n{\n\"model\": \"gemini-1.5-flash\",\n\"api_key\": os.environ.get(\"GOOGLE_API_KEY\"),\n\"api_type\": \"google\"\n}\n],\n}\n```", "```py\nassistant = AssistantAgent(\n\"Assistant\",\nllm_config=gemini_config,\nmax_consecutive_auto_reply=3\n)\n```", "```py\nresponse = user_proxy.initiate_chat(\nassistant, message=f\"Is it raining in Chicago?\"\n)\nprint(response)\n```", "```py\n```", "```py\n```", "```py\nSYSTEM_MESSAGE_1 = \"\"\"\nIn the question below, what location is the user asking about?\nExample:\nQuestion: What's the weather in Kalamazoo, Michigan?\nAnswer: Kalamazoo, Michigan.\nQuestion:\n\"\"\"\n```", "```py\nresponse1 = user_proxy.initiate_chat(\nassistant, message=f\"{SYSTEM_MESSAGE_1} Is it raining in Chicago?\"\n)\nprint(response1)\n```", "```py\nAnswer: Chicago.\nTERMINATE\n```", "```py\ndef geocoder(location: str) -> (float, float):\ngeocode_result = gmaps.geocode(location)\nreturn (round(geocode_result[0]['geometry']['location']['lat'], 4),\nround(geocode_result[0]['geometry']['location']['lng'], 4))\n```", "```py\nautogen.register_function(\ngeocoder,\ncaller=assistant, # The assistant agent can suggest calls to the geocoder.\nexecutor=user_proxy, # The user proxy agent can execute the geocder calls.\nname=\"geocoder\", # By default, the function name is used as the tool name.\ndescription=\"Finds the latitude and longitude of a location or landmark\", # A description of the tool.\n)\n```", "```py\nSYSTEM_MESSAGE_2 = \"\"\"\nIn the question below, what latitude and longitude is the user asking about?\nExample:\nQuestion: What's the weather in Kalamazoo, Michigan?\nStep 1: The user is asking about Kalamazoo, Michigan.\nStep 2: Use the geocoder tool to get the latitude and longitude of Kalmazoo, Michigan.\nAnswer: (42.2917, -85.5872)\nQuestion:\n\"\"\"\n```", "```py\nresponse2 = user_proxy.initiate_chat(\nassistant, message=f\"{SYSTEM_MESSAGE_2} Is it raining in Chicago?\"\n)\nprint(response2)\n```", "```py\nAnswer: (41.8781, -87.6298)\nTERMINATE\n```", "```py\nSYSTEM_MESSAGE_3 = \"\"\"\nFollow the steps in the example below to retrieve the weather information requested.\nExample:\nQuestion: What's the weather in Kalamazoo, Michigan?\nStep 1: The user is asking about Kalamazoo, Michigan.\nStep 2: Use the geocoder tool to get the latitude and longitude of Kalmazoo, Michigan.\nStep 3: latitude, longitude is (42.2917, -85.5872)\nStep 4: Use the get_weather_from_nws tool to get the weather from the National Weather Service at the latitude, longitude\nStep 5: The detailed forecast for tonight reads 'Showers and thunderstorms before 8pm, then showers and thunderstorms likely. Some of the storms could produce heavy rain. Mostly cloudy. Low around 68, with temperatures rising to around 70 overnight. West southwest wind 5 to 8 mph. Chance of precipitation is 80%. New rainfall amounts between 1 and 2 inches possible.'\nAnswer: It will rain tonight. Temperature is around 70F.\nQuestion:\n\"\"\"\n```", "```py\nworkflow = StateGraph(MessagesState)\nworkflow.add_node(\"assistant\", call_model)\nworkflow.add_node(\"tools\", ToolNode(tools))\n```", "```py\n@tool\ndef latlon_geocoder(location: str) -> (float, float):\n  \"\"\"Converts a place name such as \"Kalamazoo, Michigan\" to latitude and longitude coordinates\"\"\"\n  geocode_result = gmaps.geocode(location)\n  return (round(geocode_result[0]['geometry']['location']['lat'], 4),\n  round(geocode_result[0]['geometry']['location']['lng'], 4))\n  tools = [latlon_geocoder, get_weather_from_nws]\n```", "```py\nmodel = ChatOpenAI(model='gpt-3.5-turbo', temperature=0).bind_tools(tools)\ndef call_model(state: MessagesState):\n  messages = state['messages']\n  response = model.invoke(messages)\n  # This message will get appended to the existing list\n  return {\"messages\": [response]}\n```", "```py\nmodel = ChatGoogleGenerativeAI(model='gemini-1.5-flash',\ntemperature=0).bind_tools(tools)\n```", "```py\nworkflow.set_entry_point(\"assistant\")\nworkflow.add_conditional_edges(\"assistant\", assistant_next_node)\nworkflow.add_edge(\"tools\", \"assistant\")\n```", "```py\ndef assistant_next_node(state: MessagesState) -> Literal[\"tools\", END]:\n  messages = state['messages']\n  last_message = messages[-1]\n  # If the LLM makes a tool call, then we route to the \"tools\" node\n  if last_message.tool_calls:\n    return \"tools\"\n  # Otherwise, we stop (reply to the user)\n  return END\n```", "```py\napp = workflow.compile()\nfinal_state = app.invoke(\n{\"messages\": [HumanMessage(content=f\"{system_message} {question}\")]}\n)\n```", "```py\nsystem_message = \"\"\"\nFollow the steps in the example below to retrieve the weather information requested.\nExample:\nQuestion: What's the weather in Kalamazoo, Michigan?\nStep 1: The user is asking about Kalamazoo, Michigan.\nStep 2: Use the latlon_geocoder tool to get the latitude and longitude of Kalmazoo, Michigan.\nStep 3: latitude, longitude is (42.2917, -85.5872)\nStep 4: Use the get_weather_from_nws tool to get the weather from the National Weather Service at the latitude, longitude\nStep 5: The detailed forecast for tonight reads 'Showers and thunderstorms before 8pm, then showers and thunderstorms likely. Some of the storms could produce heavy rain. Mostly cloudy. Low around 68, with temperatures rising to around 70 overnight. West southwest wind 5 to 8 mph. Chance of precipitation is 80%. New rainfall amounts between 1 and 2 inches possible.'\nAnswer: It will rain tonight. Temperature is around 70F.\nQuestion:\n\"\"\"\nquestion=\"Is it raining in Chicago?\"\n```", "```py\nStep 1: The user is asking about Chicago.\nStep 2: Use the latlon_geocoder tool to get the latitude and longitude of Chicago.\n[41.8781, -87.6298]\n[{\"number\": 1, \"name\": \"This Afternoon\", \"startTime\": \"2024–07–30T14:00:00–05:00\", \"endTime\": \"2024–07–30T18:00:00–05:00\", \"isDaytime\": true, …]\nThere is a chance of showers and thunderstorms after 8pm tonight. The low will be around 73 degrees.\n```"]