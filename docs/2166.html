<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>How to Make an Advanced Spider Chart in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>How to Make an Advanced Spider Chart in Python</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/how-to-make-an-advanced-spider-chart-in-python-adbdb6c24a66?source=collection_archive---------3-----------------------#2024-09-05">https://towardsdatascience.com/how-to-make-an-advanced-spider-chart-in-python-adbdb6c24a66?source=collection_archive---------3-----------------------#2024-09-05</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="e2ea" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">Step-by-step explanation with an easy to use function at the end</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@zvonimir.boban.mef?source=post_page---byline--adbdb6c24a66--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Zvonimir Boban" class="l ep by dd de cx" src="../Images/cbad06b7e1f5d021ce9b2dc31b8a6a65.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*tU10Q2sKfWqce1ScSVNB6g.jpeg"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--adbdb6c24a66--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@zvonimir.boban.mef?source=post_page---byline--adbdb6c24a66--------------------------------" rel="noopener follow">Zvonimir Boban</a></p></div></div></div><div class="hz ia l"><div class="ab ib"><div class="ab"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewbox="0 0 16 16"><path fill="#437AFF" d="M15.163 8c0 .65-.459 1.144-.863 1.575-.232.244-.471.5-.563.719s-.086.543-.092.875c-.006.606-.018 1.3-.49 1.781-.47.481-1.15.494-1.744.5-.324.006-.655.013-.857.094s-.465.337-.704.575c-.422.412-.906.881-1.542.881-.637 0-1.12-.469-1.543-.881-.239-.238-.49-.482-.704-.575-.214-.094-.532-.088-.857-.094-.593-.006-1.273-.019-1.744-.5s-.484-1.175-.49-1.781c-.006-.332-.012-.669-.092-.875-.08-.207-.33-.475-.563-.719-.404-.431-.863-.925-.863-1.575s.46-1.144.863-1.575c.233-.244.472-.5.563-.719.092-.219.086-.544.092-.875.006-.606.019-1.3.49-1.781s1.15-.494 1.744-.5c.325-.006.655-.012.857-.094.202-.081.465-.337.704-.575C7.188 1.47 7.671 1 8.308 1s1.12.469 1.542.881c.239.238.49.481.704.575s.533.088.857.094c.594.006 1.273.019 1.745.5.47.481.483 1.175.49 1.781.005.331.011.669.091.875s.33.475.563.719c.404.431.863.925.863 1.575"/><path fill="#fff" d="M7.328 10.5c.195 0 .381.08.519.22.137.141.215.331.216.53 0 .066.026.13.072.177a.24.24 0 0 0 .346 0 .25.25 0 0 0 .071-.177c.001-.199.079-.389.216-.53a.73.73 0 0 1 .519-.22h1.959c.13 0 .254-.053.346-.146a.5.5 0 0 0 .143-.354V6a.5.5 0 0 0-.143-.354.49.49 0 0 0-.346-.146h-1.47c-.324 0-.635.132-.865.366-.23.235-.359.552-.359.884v2.5c0 .066-.025.13-.071.177a.24.24 0 0 1-.346 0 .25.25 0 0 1-.072-.177v-2.5c0-.332-.13-.65-.359-.884A1.21 1.21 0 0 0 6.84 5.5h-1.47a.49.49 0 0 0-.346.146A.5.5 0 0 0 4.88 6v4c0 .133.051.26.143.354a.49.49 0 0 0 .347.146z"/></svg></div></div></div><span class="ic id" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ie if ah ai aj ak al am an ao ap aq ar ig ih ii" disabled="">Follow</button></p></div></div></span></div></div><div class="l ij"><span class="bf b bg z dx"><div class="ab cn ik il im"><div class="in io ab"><div class="bf b bg z dx ab ip"><span class="iq l ij">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--adbdb6c24a66--------------------------------" rel="noopener follow"><p class="bf b bg z ir is it iu iv iw ix iy bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="ic id" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">8 min read</span><div class="iz ja l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Sep 5, 2024</span></div></span></div></span></div></div></div><div class="ab cp jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq"><div class="h k w ea eb q"><div class="kg l"><div class="ab q kh ki"><div class="pw-multi-vote-icon ed iq kj kk kl"><div class=""><div class="km kn ko kp kq kr ks am kt ku kv kl"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kw kx ky kz la lb lc"><p class="bf b dy z dx"><span class="kn">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao km ld le ab q ee lf lg" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lh"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg></button></div></div></div><div class="ab q jr js jt ju jv jw jx jy jz ka kb kc kd ke kf"><div class="li k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lj an ao ap ig lk ll lm" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep ln cn"><div class="l ae"><div class="ab cb"><div class="lo lp lq lr ls lt ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lj an ao ap ig lu lv lg lw lx ly lz ma s mb mc md me mf mg mh u mi mj mk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lj an ao ap ig lu lv lg lw lx ly lz ma s mb mc md me mf mg mh u mi mj mk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lj an ao ap ig lu lv lg lw lx ly lz ma s mb mc md me mf mg mh u mi mj mk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mo mp mq mr ms mt ml mm paragraph-image"><div role="button" tabindex="0" class="mu mv ed mw bh mx"><div class="ml mm mn"><img src="../Images/dbce2d785e6cd17f6370f715c8437a17.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7vkVeVZgRIskvbGxLfFGUQ.jpeg"/></div></div><figcaption class="mz na nb ml mm nc nd bf b bg z dx">Photo by <a class="af ne" href="https://unsplash.com/@lincon_street?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" rel="noopener ugc nofollow" target="_blank">Divyadarshi Acharya</a> on <a class="af ne" href="https://unsplash.com/photos/selective-focus-photography-of-spider-on-web-Qbs6liSxjr8?utm_content=creditCopyText&amp;utm_medium=referral&amp;utm_source=unsplash" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h1 id="ba76" class="nf ng fq bf nh ni nj gq nk nl nm gt nn no np nq nr ns nt nu nv nw nx ny nz oa bk">💡The Motivation</h1><p id="e1f9" class="pw-post-body-paragraph ob oc fq od b go oe of og gr oh oi oj ok ol om on oo op oq or os ot ou ov ow fj bk">There are multiple Python libraries which can be used to make classic spider/radar charts. One thing all those libraries have in common is that they only offer spider charts with a single scaled axis, usually displaying a scale ranging from 0 to 100.</p><p id="0a59" class="pw-post-body-paragraph ob oc fq od b go ox of og gr oy oi oj ok oz om on oo pa oq or os pb ou ov ow fj bk">Of course, rescaling feature values to a common scale is necessary in order to be able to compare them, but it leaves out crucial information on the absolute range of values of each feature. Since this information cannot be obtained from the graph, we have to dig back into the data. In the best case, this is time consuming and tedious, and in the worst, we do not have access to the original data, which means we don’t have acces to crucial context needed to adequately understand the comparisons.</p><p id="d50f" class="pw-post-body-paragraph ob oc fq od b go ox of og gr oy oi oj ok oz om on oo pa oq or os pb ou ov ow fj bk">A logical step-up would be to make a spider chart with an axis displaying absolute values for each displayed feature — a chart known as a <strong class="od fr">multiaxis spider chart</strong>. You might expect that this chart would also be offered by many libraries, but searching for them left me empty handed. Motivated by this lack of results, I decided to make my own solution and offer my approach to you in this step-by-step guide with an easy to use function provided at the end.</p><h1 id="206d" class="nf ng fq bf nh ni nj gq nk nl nm gt nn no np nq nr ns nt nu nv nw nx ny nz oa bk">🕸️ The Chart</h1><p id="624c" class="pw-post-body-paragraph ob oc fq od b go oe of og gr oh oi oj ok ol om on oo op oq or os ot ou ov ow fj bk">To demonstrate how to make a multiaxis spider chart, I will be using a small part of the well known <code class="cx pc pd pe pf b">mtcars</code> dataset. The dataset is derived from the 1974 Motor Trend magazine and was first published in a study Henderson and Velleman 1981 [1]. Let’s load the data and the required libraries.</p><pre class="mo mp mq mr ms pg pf ph bp pi bb bk"><span id="8b18" class="pj ng fq pf b bg pk pl l pm pn">import pandas as pd<br/>import numpy as np<br/>from sklearn.preprocessing import MinMaxScaler<br/>from plotnine import *<br/><br/>mtcars_values = {<br/>    'mpg': [19.7, 15, 21.4],<br/>    'cyl': [6, 8, 4],<br/>    'disp': [145, 301, 121],<br/>    'hp': [175, 335, 109],<br/>    'drat': [3.62, 3.54, 4.11],<br/>    'wt': [2.77, 3.57, 2.78],<br/>    'qsec': [15.5, 14.6, 18.6],<br/>    'vs': [0, 0, 1],py<br/>    'am': [1, 1, 1],<br/>    'gear': [5, 5, 4],<br/>    'carb': [6, 8, 2],<br/>    'wtdip': [401.65, 1074.57, 336.38]<br/>}<br/><br/>mtcars = pd.DataFrame(mtcars_values, <br/>index=["Ferrari Dino", "Maserati Bora", "Volvo 142E"])<br/><br/># Select and rename columns<br/>p_data = mtcars.reset_index().rename(columns={'index': 'group'})[['group', 'mpg', 'cyl', 'hp', 'wt', 'qsec']]<br/>p_data.columns = ['group', 'Miles per Gallon', 'Cylinders', <br/>'Horsepower', 'Weight', 'Quarter mile\ntime']</span></pre><p id="fea6" class="pw-post-body-paragraph ob oc fq od b go ox of og gr oy oi oj ok oz om on oo pa oq or os pb ou ov ow fj bk">As you can see, I will be using the <code class="cx pc pd pe pf b">plotnine</code> library to create the chart. Inspired by <code class="cx pc pd pe pf b">ggplot2</code>, the <code class="cx pc pd pe pf b">plotnine</code> library is also based on the concept of grammar of graphics, allowing for creation of graphs by stacking multiple layers on top of one another. This powerful concept lets us create essentially any visualizationwe can think up.</p><figure class="mo mp mq mr ms mt ml mm paragraph-image"><div role="button" tabindex="0" class="mu mv ed mw bh mx"><div class="ml mm po"><img src="../Images/38276e502f62184d2de0ceb05a94f33f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*clsdr-vj1YoArpt_-lr5_g.png"/></div></div><figcaption class="mz na nb ml mm nc nd bf b bg z dx">The grammar of graphics approach to chart construction. Image by Author</figcaption></figure></div></div></div><div class="ab cb pp pq pr ps" role="separator"><span class="pt by bm pu pv pw"/><span class="pt by bm pu pv pw"/><span class="pt by bm pu pv"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="7996" class="pw-post-body-paragraph ob oc fq od b go ox of og gr oy oi oj ok oz om on oo pa oq or os pb ou ov ow fj bk">The layered approach calls for separate construction of different aspects of the graph. First we will create the chart outline. Since spider charts deal with polar coordinates, I made a function which calculates the coordinates of the polygon tips depending on the number of variables in the dataset.</p><pre class="mo mp mq mr ms pg pf ph bp pi bb bk"><span id="cff1" class="pj ng fq pf b bg pk pl l pm pn"># Calculate the coordinates of polygon tips<br/>def circle_coords(r, n_axis=len(p_data.columns) - 1):<br/>    fi = np.linspace(0, 2*np.pi, n_axis+1) + np.pi/2<br/>    x = r * np.cos(fi)<br/>    y = r * np.sin(fi)<br/>    return pd.DataFrame({'x': x, 'y': y, 'r': r})<br/><br/>central_distance = 0.2<br/>axis_name_offset = 0.2<br/><br/>circle_df = pd.concat([circle_coords(r) for r in np.arange(0, 1.25, 0.25) + central_distance])<br/><br/>step_1 = (ggplot(circle_df, aes('x', 'y')) +<br/>  geom_polygon(data=circle_coords(1 + central_distance, p_data.shape[1] - 1), alpha=1, fill='beige') +<br/>  geom_path(aes(group='r'), linetype='dashed', alpha=0.5) +<br/>  theme_void() +<br/>  theme(legend_title=element_blank(),<br/>        legend_direction='horizontal',<br/>        legend_position='bottom',<br/>        legend_box_spacing=0))</span></pre><figure class="mo mp mq mr ms mt ml mm paragraph-image"><div role="button" tabindex="0" class="mu mv ed mw bh mx"><div class="ml mm px"><img src="../Images/49dd29a82fb73dd36d2b747086e0d49f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ASHM9pMVg3wfhpuJ2KkT2g.png"/></div></div><figcaption class="mz na nb ml mm nc nd bf b bg z dx">Step 1: Creating the background for the chart. Image by Author</figcaption></figure><p id="14ef" class="pw-post-body-paragraph ob oc fq od b go ox of og gr oy oi oj ok oz om on oo pa oq or os pb ou ov ow fj bk">Next, we have to calculate the coordinates for the axes and add them to the chart.</p><pre class="mo mp mq mr ms pg pf ph bp pi bb bk"><span id="e278" class="pj ng fq pf b bg pk pl l pm pn"># Calculate the coordinates for the axis lines<br/>def axis_coords(n_axis):<br/>    fi = np.linspace(0, 2*np.pi*(1-1/n_axis), n_axis) + np.pi/2<br/>    x1 = central_distance * np.cos(fi)<br/>    y1 = central_distance * np.sin(fi)<br/>    x2 = (1 + central_distance) * np.cos(fi)<br/>    y2 = (1 + central_distance) * np.sin(fi)<br/>    return pd.DataFrame({'x': np.concatenate([x1, x2]), <br/>                         'y': np.concatenate([y1, y2]), <br/>                         'id': np.tile(np.arange(1, n_axis + 1), 2)})<br/><br/>step_2 = (step_1 + geom_line(data=axis_coords(p_data.shape[1] - 1), mapping=aes(x='x', y='y', group='id'), alpha=0.3))</span></pre><figure class="mo mp mq mr ms mt ml mm paragraph-image"><div role="button" tabindex="0" class="mu mv ed mw bh mx"><div class="ml mm px"><img src="../Images/4704a33e8e066a82bbc62bfe6929671d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DF9HtkHK3ajIzWwXm5d1zQ.png"/></div></div><figcaption class="mz na nb ml mm nc nd bf b bg z dx">Addition of axes for each of the variables in the dataset. Image by Author</figcaption></figure><p id="d4af" class="pw-post-body-paragraph ob oc fq od b go ox of og gr oy oi oj ok oz om on oo pa oq or os pb ou ov ow fj bk">Now we can overlay the rescaled data points.</p><pre class="mo mp mq mr ms pg pf ph bp pi bb bk"><span id="e942" class="pj ng fq pf b bg pk pl l pm pn"># Calculate the rescaled coordinates for each point<br/><br/>n_axis = len(p_data.columns) - 1  # Subtract 1 to exclude the group column<br/><br/>scaler = MinMaxScaler()<br/><br/>rescaled_data = p_data.copy()<br/>rescaled_data.iloc[:, 1:] = scaler.fit_transform(rescaled_data.iloc[:, 1:])<br/>rescaled_data['copy'] = rescaled_data.iloc[:, 1]<br/><br/>melted_data = rescaled_data.melt(id_vars=['group'], var_name='parameter', value_name='value', ignore_index=False)<br/><br/>melted_data['parameter'] = pd.Categorical(melted_data['parameter'], categories=np.array(rescaled_data.columns[1:]), ordered=True)<br/>melted_data = melted_data.sort_values(by = ['group', 'parameter'])<br/>melted_data['fi'] = np.tile(np.linspace(0, 2 * np.pi, num=n_axis+1) + np.pi / 2, p_data.shape[0])<br/>melted_data['x'] = (melted_data['value'] + central_distance)*np.cos(melted_data['fi'])<br/>melted_data['y'] = (melted_data['value'] + central_distance)*np.sin(melted_data['fi'])<br/><br/>rescaled_coords_data = melted_data<br/><br/>step_3 = (step_2 +<br/>geom_point(data=rescaled_coords_data, mapping=aes(x='x', y='y', group='group', color='group'), size=3) +<br/>        geom_path(data=rescaled_coords_data, mapping=aes(x='x', y='y', group='group', color='group'), size=1) +<br/>        geom_polygon(data=rescaled_coords_data, mapping=aes('x', 'y', group = 'group', color = 'group', fill = 'group'), size = 1, alpha = 0.05, show_legend = False))</span></pre><figure class="mo mp mq mr ms mt ml mm paragraph-image"><div role="button" tabindex="0" class="mu mv ed mw bh mx"><div class="ml mm px"><img src="../Images/864cc565f13cd3e145eb42ce014ffe05.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*qVAfC-_G-q8Rf-pbRyeMpg.png"/></div></div><figcaption class="mz na nb ml mm nc nd bf b bg z dx">Overlaying the chart with the data points. Image by Author</figcaption></figure><p id="4ca8" class="pw-post-body-paragraph ob oc fq od b go ox of og gr oy oi oj ok oz om on oo pa oq or os pb ou ov ow fj bk">The only thing left to do is to add the textual labels and names of the axes.</p><pre class="mo mp mq mr ms pg pf ph bp pi bb bk"><span id="8748" class="pj ng fq pf b bg pk pl l pm pn"># Radius and corresponding feature value for each feature<br/>text_data = pd.DataFrame({col: np.linspace(p_data[col].min(), p_data[col].max(), 5) <br/>                          for col in p_data.columns if col != 'group'})<br/>text_data['r'] = np.arange(0, 1.25, 0.25)<br/>text_data = text_data.melt(id_vars=['r'], var_name='parameter', value_name='value')<br/>text_data['parameter'] = pd.Categorical(text_data['parameter'], categories=np.array(p_data.columns[1:]), ordered=True)<br/>text_data = text_data.sort_values(by = ['r', 'parameter'])<br/><br/>def text_coords(r, n_axis=len(p_data.columns) - 1):<br/>    fi = np.linspace(0, 2*np.pi*(1-1/n_axis), n_axis) + np.pi/2 + 0.01*2*np.pi/r<br/>    x = r * np.cos(fi)<br/>    y = r * np.sin(fi)<br/>    return pd.DataFrame({'x': x, 'y': y, 'r': r - central_distance})<br/><br/># Coordinates for the axis labels<br/>labels_data = pd.concat([text_coords(r) for r in np.arange(0, 1.25, 0.25) + central_distance])<br/><br/># Combine with text_data<br/>labels_data = pd.concat([labels_data.reset_index(drop=True), <br/>                         text_data.drop('r', axis=1).reset_index(drop=True)], <br/>                        axis=1)<br/>                        <br/>labels_data['value']=labels_data['value'].round(2) <br/><br/>step_4 = (step_3 +<br/>        geom_text(data=labels_data, mapping=aes(x='x', y='y', label='value'), alpha=0.65, size=8, <br/>         color='#303030') +<br/>        geom_text(data=text_coords(1 + central_distance + axis_name_offset, p_data.shape[1] - 1),<br/>         mapping=aes(x='x', y='y'), <br/>         label=[param for param in p_data.columns[1:]],<br/>         size=9) +<br/>        labs(color='', title = 'Comparison of car properties'))</span></pre><figure class="mo mp mq mr ms mt ml mm paragraph-image"><div role="button" tabindex="0" class="mu mv ed mw bh mx"><div class="ml mm px"><img src="../Images/6311b6fb070dfa78ef0fc924fffd52de.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*KKUfV4baeGntPDNtN3ErGQ.png"/></div></div><figcaption class="mz na nb ml mm nc nd bf b bg z dx">Addition of axes names and labels. Image by Author</figcaption></figure><p id="6638" class="pw-post-body-paragraph ob oc fq od b go ox of og gr oy oi oj ok oz om on oo pa oq or os pb ou ov ow fj bk">And some final aesthetic touches…</p><pre class="mo mp mq mr ms pg pf ph bp pi bb bk"><span id="d983" class="pj ng fq pf b bg pk pl l pm pn">#Final aesthetic touches<br/>step_5 = (step_4 +<br/>          labs(color='', title='Comparison of car properties') +<br/>             theme(legend_position='bottom',<br/>                   legend_text=element_text(size=7, face='bold'),<br/>                   legend_box_margin=0,<br/>                   legend_margin=-20,<br/>                   plot_title=element_text(size=10, margin={'b': -30}, face='bold')) +<br/>             lims(x=(-1.75, 1.75), y=(-1.5, 1.8)))</span></pre><figure class="mo mp mq mr ms mt ml mm paragraph-image"><div role="button" tabindex="0" class="mu mv ed mw bh mx"><div class="ml mm px"><img src="../Images/7ea387aa2024833e4e1a8367eb94b492.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*WV5VtOzkgHzqC3_46qF9eA.png"/></div></div><figcaption class="mz na nb ml mm nc nd bf b bg z dx">The final chart. Image by Author</figcaption></figure></div></div></div><div class="ab cb pp pq pr ps" role="separator"><span class="pt by bm pu pv pw"/><span class="pt by bm pu pv pw"/><span class="pt by bm pu pv"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="a43c" class="pw-post-body-paragraph ob oc fq od b go ox of og gr oy oi oj ok oz om on oo pa oq or os pb ou ov ow fj bk">Let’s just take a moment more to comment on the numbers displayed. Even froma regular spidr chart, it would be obvious that the Volvo is the slowest car by far. However, here we can also see the exact absolute difference — The Volvo took 18.6 seconds to cover a quarter of a mile, while the Maserati, the fastest of the three, took four whole seconds less. Of course, expectedly, this also means that the Volvo is most economical in terms of fuel consumption covering 6 more miles per gallon than the Maserati Bora. Being sports cars, both Maserati Bora and Ferrari Dino also feature more cylinders and hirsepowers and weigh more than the Volvo.</p><h1 id="2ebe" class="nf ng fq bf nh ni nj gq nk nl nm gt nn no np nq nr ns nt nu nv nw nx ny nz oa bk">Other examples</h1><p id="773f" class="pw-post-body-paragraph ob oc fq od b go oe of og gr oh oi oj ok ol om on oo op oq or os ot ou ov ow fj bk">Here is another example of a spider chart but using the Titanic dataset and a customized font.</p><figure class="mo mp mq mr ms mt ml mm paragraph-image"><div role="button" tabindex="0" class="mu mv ed mw bh mx"><div class="ml mm px"><img src="../Images/c506c533342c409e4405ad4567fe9b64.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*JlsJQvAcRz_qlSWLC5dOPA.png"/></div></div><figcaption class="mz na nb ml mm nc nd bf b bg z dx">Anotehr example using the Titanic dataset. Image by Author</figcaption></figure><p id="ba57" class="pw-post-body-paragraph ob oc fq od b go ox of og gr oy oi oj ok oz om on oo pa oq or os pb ou ov ow fj bk">This chart clearly shows that the 1st class passengers were the oldest and the wealthiest of the three. The 3rd class passengers had the highest number of both male and female passengers and were the youngest group — probably mostly young people and families in search for better life abroad. However, the 1st class passengers had the highest survival rate, and the 3rd the lowest. This is probably partly due to the 1st class quarters being closer to the boat deck and partly due to the higher proportion of women in that class (since woman and children were rescued first).</p><h1 id="2dd1" class="nf ng fq bf nh ni nj gq nk nl nm gt nn no np nq nr ns nt nu nv nw nx ny nz oa bk">➕The Function</h1><p id="557f" class="pw-post-body-paragraph ob oc fq od b go oe of og gr oh oi oj ok ol om on oo op oq or os ot ou ov ow fj bk">As promised, here is the function wrapping all the above code. The first argument is the data frame fromatted so that the first column contains the group ids, and the other columns are group features to be plotted. The two additional arguments determine the radius of the inner empty polygon and the offset of axis titles from the chart.</p><pre class="mo mp mq mr ms pg pf ph bp pi bb bk"><span id="dce3" class="pj ng fq pf b bg pk pl l pm pn"># Wrapping the above code into an easy-to-use function<br/>def multiaxis_radar(p_data, central_distance=0.2, axis_name_offset=0.2):<br/>    def circle_coords(r, n_axis=len(p_data.columns) - 1):<br/>        fi = np.linspace(0, 2*np.pi, n_axis+1) + np.pi/2<br/>        x = r * np.cos(fi)<br/>        y = r * np.sin(fi)<br/>        return pd.DataFrame({'x': x, 'y': y, 'r': r})<br/><br/>    circle_df = pd.concat([circle_coords(r) for r in np.arange(0, 1.25, 0.25) + central_distance])<br/><br/>    def axis_coords(n_axis):<br/>        fi = np.linspace(0, 2*np.pi*(1-1/n_axis), n_axis) + np.pi/2<br/>        x1 = central_distance * np.cos(fi)<br/>        y1 = central_distance * np.sin(fi)<br/>        x2 = (1 + central_distance) * np.cos(fi)<br/>        y2 = (1 + central_distance) * np.sin(fi)<br/>        return pd.DataFrame({'x': np.concatenate([x1, x2]), <br/>                             'y': np.concatenate([y1, y2]), <br/>                             'id': np.tile(np.arange(1, n_axis + 1), 2)})<br/><br/>    n_axis = len(p_data.columns) - 1<br/><br/>    scaler = MinMaxScaler()<br/>    rescaled_data = p_data.copy()<br/>    rescaled_data.iloc[:, 1:] = scaler.fit_transform(rescaled_data.iloc[:, 1:])<br/>    rescaled_data['copy'] = rescaled_data.iloc[:, 1]<br/><br/>    melted_data = rescaled_data.melt(id_vars=['group'], var_name='parameter', value_name='value', ignore_index=False)<br/>    melted_data['parameter'] = pd.Categorical(melted_data['parameter'], categories=np.array(rescaled_data.columns[1:]), ordered=True)<br/>    melted_data = melted_data.sort_values(by=['group', 'parameter'])<br/>    melted_data['fi'] = np.tile(np.linspace(0, 2 * np.pi, num=n_axis+1) + np.pi / 2, p_data.shape[0])<br/>    melted_data['x'] = (melted_data['value'] + central_distance)*np.cos(melted_data['fi'])<br/>    melted_data['y'] = (melted_data['value'] + central_distance)*np.sin(melted_data['fi'])<br/><br/>    rescaled_coords_data = melted_data<br/><br/>    text_data = pd.DataFrame({col: np.linspace(p_data[col].min(), p_data[col].max(), 5) <br/>                              for col in p_data.columns if col != 'group'})<br/>    text_data['r'] = np.arange(0, 1.25, 0.25)<br/>    text_data = text_data.melt(id_vars=['r'], var_name='parameter', value_name='value')<br/>    text_data['parameter'] = pd.Categorical(text_data['parameter'], categories=np.array(p_data.columns[1:]), ordered=True)<br/>    text_data = text_data.sort_values(by=['r', 'parameter'])<br/><br/>    def text_coords(r, n_axis=len(p_data.columns) - 1):<br/>        fi = np.linspace(0, 2*np.pi*(1-1/n_axis), n_axis) + np.pi/2 + 0.01*2*np.pi/r<br/>        x = r * np.cos(fi)<br/>        y = r * np.sin(fi)<br/>        return pd.DataFrame({'x': x, 'y': y, 'r': r - central_distance})<br/><br/>    labels_data = pd.concat([text_coords(r) for r in np.arange(0, 1.25, 0.25) + central_distance])<br/>    labels_data = pd.concat([labels_data.reset_index(drop=True), <br/>                             text_data.drop('r', axis=1).reset_index(drop=True)], <br/>                            axis=1)<br/>    labels_data['value'] = labels_data['value'].round(2)<br/><br/>    plot = (ggplot(circle_df, aes('x', 'y')) +<br/>            geom_polygon(data=circle_coords(1 + central_distance, p_data.shape[1] - 1), alpha=1, fill='beige') +<br/>            geom_path(aes(group='r'), linetype='dashed', alpha=0.5) +<br/>            theme_void() +<br/>            theme(legend_title=element_blank(),<br/>            legend_direction='horizontal',<br/>            legend_position='bottom',<br/>            legend_box_spacing=0) +<br/>            geom_line(data=axis_coords(p_data.shape[1] - 1), mapping=aes(x='x', y='y', group='id'), alpha=0.3) +<br/>            geom_point(data=rescaled_coords_data, mapping=aes(x='x', y='y', group='group', color='group'), size=3) +<br/>            geom_path(data=rescaled_coords_data, mapping=aes(x='x', y='y', group='group', color='group'), size=1) +<br/>            geom_polygon(data=rescaled_coords_data, mapping=aes('x', 'y', group='group', color='group', fill='group'), size=1, alpha=0.05, show_legend=False) +<br/>            geom_text(data=labels_data, mapping=aes(x='x', y='y', label='value'), alpha=0.65, size=8, <br/>             color='#303030') +<br/>            geom_text(data=text_coords(1 + central_distance + axis_name_offset, p_data.shape[1] - 1),<br/>             mapping=aes(x='x', y='y'), <br/>             label=[param for param in p_data.columns[1:]],<br/>             size=9) +<br/>             labs(color='', title='Comparison of car properties') +<br/>             theme(legend_position='bottom',<br/>                   legend_text=element_text(size=7, face='bold'),<br/>                   legend_box_margin=0,<br/>                   legend_margin=-20,<br/>                   plot_title=element_text(size=10, margin={'b': -30}, face='bold')) +<br/>             lims(x=(-1.75, 1.75), y=(-1.5, 1.8)))<br/><br/>    return plot<br/><br/># Use the function to recreate the above plot<br/>multiaxis_radar(p_data, central_distance=0.2, axis_name_offset=0.25)</span></pre><h1 id="8524" class="nf ng fq bf nh ni nj gq nk nl nm gt nn no np nq nr ns nt nu nv nw nx ny nz oa bk">🏁 The Conclusion</h1><p id="1ccb" class="pw-post-body-paragraph ob oc fq od b go oe of og gr oh oi oj ok ol om on oo op oq or os ot ou ov ow fj bk">This article shows how to construct an advanced multiaxis spider chart from scratch in Python. Although no Python package I know of currently supports this kind of chart, utilizing the layered grammar of graphics approach from the <code class="cx pc pd pe pf b">plotnine</code> package provided me with the tools to create one myself. Of course, there is still room for progress, as the final function can be customized further by adding more arguments and options to control various aspects of the chart such as the line and backgorund color, font size, …, but I leave that to the reader for now 😉.</p><p id="dcec" class="pw-post-body-paragraph ob oc fq od b go ox of og gr oy oi oj ok oz om on oo pa oq or os pb ou ov ow fj bk">That’s all folks. I hope you found the article useful and will use it to make many more neat spider charts in the future. Enjoy!</p></div></div></div><div class="ab cb pp pq pr ps" role="separator"><span class="pt by bm pu pv pw"/><span class="pt by bm pu pv pw"/><span class="pt by bm pu pv"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="c9a5" class="nf ng fq bf nh ni py gq nk nl pz gt nn no qa nq nr ns qb nu nv nw qc ny nz oa bk">References</h1><p id="3164" class="pw-post-body-paragraph ob oc fq od b go oe of og gr oh oi oj ok ol om on oo op oq or os ot ou ov ow fj bk">[1] Henderson, H. V., &amp; Velleman, P. F. (1981). Building multiple regression models interactively. Biometrics, 37, 391–411.</p></div></div></div></div>    
</body>
</html>