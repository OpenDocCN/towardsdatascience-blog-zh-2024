- en: The Power of Optimization in Designing Experiments Involving Small Samples
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä¼˜åŒ–åœ¨è®¾è®¡æ¶‰åŠå°æ ·æœ¬å®éªŒä¸­çš„åŠ›é‡
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/the-power-of-optimization-in-designing-experiments-involving-small-samples-de87f9783d3b?source=collection_archive---------6-----------------------#2024-10-21](https://towardsdatascience.com/the-power-of-optimization-in-designing-experiments-involving-small-samples-de87f9783d3b?source=collection_archive---------6-----------------------#2024-10-21)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/the-power-of-optimization-in-designing-experiments-involving-small-samples-de87f9783d3b?source=collection_archive---------6-----------------------#2024-10-21](https://towardsdatascience.com/the-power-of-optimization-in-designing-experiments-involving-small-samples-de87f9783d3b?source=collection_archive---------6-----------------------#2024-10-21)
- en: A step-by-step guide to designing more precise experiments using optimization
    in Python
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä½¿ç”¨Pythonä¸­çš„ä¼˜åŒ–æŠ€æœ¯è®¾è®¡æ›´ç²¾ç¡®å®éªŒçš„é€æ­¥æŒ‡å—
- en: '[](https://medium.com/@leandro.magga?source=post_page---byline--de87f9783d3b--------------------------------)[![Leandro
    Magga](../Images/75d2b6b31635ac2bd409bfb91d151ac4.png)](https://medium.com/@leandro.magga?source=post_page---byline--de87f9783d3b--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--de87f9783d3b--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--de87f9783d3b--------------------------------)
    [Leandro Magga](https://medium.com/@leandro.magga?source=post_page---byline--de87f9783d3b--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@leandro.magga?source=post_page---byline--de87f9783d3b--------------------------------)[![Leandro
    Magga](../Images/75d2b6b31635ac2bd409bfb91d151ac4.png)](https://medium.com/@leandro.magga?source=post_page---byline--de87f9783d3b--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--de87f9783d3b--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--de87f9783d3b--------------------------------)
    [Leandro Magga](https://medium.com/@leandro.magga?source=post_page---byline--de87f9783d3b--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--de87f9783d3b--------------------------------)
    Â·10 min readÂ·Oct 21, 2024
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘å¸ƒäº[Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--de87f9783d3b--------------------------------)
    Â·10åˆ†é’Ÿé˜…è¯»Â·2024å¹´10æœˆ21æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: Experimentation is the foundation for testing hypotheses with scientific rigor.In
    medicine, it is used to assess the effect of new treatments on patients, while
    in the digital world, tech giants like [Amazon](https://www.amazon.jobs/en/teams/aeo),
    [Netflix](https://netflixtechblog.com/experimentation-is-a-major-focus-of-data-science-across-netflix-f67923f8e985),
    and [Uber](https://www.uber.com/en-CL/blog/xp/) run thousands of experiments each
    year to optimize and improve their platforms.
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: å®éªŒæ˜¯ç”¨ç§‘å­¦ä¸¥è°¨çš„æ–¹æ³•æ£€éªŒå‡è®¾çš„åŸºç¡€ã€‚åœ¨åŒ»å­¦é¢†åŸŸï¼Œå®éªŒç”¨äºè¯„ä¼°æ–°ç–—æ³•å¯¹æ‚£è€…çš„æ•ˆæœï¼›è€Œåœ¨æ•°å­—ä¸–ç•Œä¸­ï¼Œåƒ[Amazon](https://www.amazon.jobs/en/teams/aeo)ã€[Netflix](https://netflixtechblog.com/experimentation-is-a-major-focus-of-data-science-across-netflix-f67923f8e985)å’Œ[Uber](https://www.uber.com/en-CL/blog/xp/)è¿™æ ·çš„ç§‘æŠ€å·¨å¤´æ¯å¹´éƒ½ä¼šè¿›è¡Œæˆåƒä¸Šä¸‡æ¬¡çš„å®éªŒï¼Œä»¥ä¼˜åŒ–å’Œæ”¹è¿›ä»–ä»¬çš„å¹³å°ã€‚
- en: For large-scale experiments, random assignment is commonly used and its considered
    the â€œGold Standardâ€. With a substantial amount of data, randomness tends to produce
    comparable groups, where important pre-experiment factors are balanced and the
    exchangeability assumption holds.
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºå¤§è§„æ¨¡å®éªŒï¼Œé€šå¸¸ä½¿ç”¨éšæœºåˆ†é…ï¼Œå¹¶ä¸”è¢«è®¤ä¸ºæ˜¯â€œé»„é‡‘æ ‡å‡†â€ã€‚åœ¨æ•°æ®é‡å……è¶³çš„æƒ…å†µä¸‹ï¼Œéšæœºæ€§å¾€å¾€èƒ½å¤Ÿç”Ÿæˆå¯æ¯”è¾ƒçš„ç»„ï¼Œå…¶ä¸­é‡è¦çš„å®éªŒå‰å› ç´ è¢«å¹³è¡¡ï¼Œå¹¶ä¸”äº¤æ¢æ€§å‡è®¾å¾—ä»¥æˆç«‹ã€‚
- en: However, when the sample for an experiment is very small, random assignment
    often fails to create statistically equivalent groups. So, **how can we split
    units efficiently between treatment and control groups?**
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œå½“å®éªŒçš„æ ·æœ¬éå¸¸å°çš„æ—¶å€™ï¼Œéšæœºåˆ†é…é€šå¸¸æ— æ³•åˆ›å»ºç»Ÿè®¡ä¸Šç­‰æ•ˆçš„ç»„ã€‚å› æ­¤ï¼Œ**æˆ‘ä»¬å¦‚ä½•é«˜æ•ˆåœ°åœ¨å¤„ç†ç»„å’Œæ§åˆ¶ç»„ä¹‹é—´åˆ†é…å•å…ƒå‘¢ï¼Ÿ**
- en: 'What you will learn:'
  id: totrans-9
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä½ å°†å­¦åˆ°çš„å†…å®¹ï¼š
- en: In this post, Iâ€™ll explain an optimization-based approach to constructing equivalent
    groups for an experiment which was proposed by Bertsimas et al. in [this article](https://medium.com/r?url=https%3A%2F%2Fpubsonline.informs.org%2Fdoi%2F10.1287%2Fopre.2015.1361).
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†è§£é‡Šä¸€ç§åŸºäºä¼˜åŒ–çš„æ–¹æ³•ï¼Œç”¨äºæ„å»ºç­‰æ•ˆçš„å®éªŒç»„ï¼Œè¿™æ˜¯Bertsimasç­‰äººåœ¨[è¿™ç¯‡æ–‡ç« ](https://medium.com/r?url=https%3A%2F%2Fpubsonline.informs.org%2Fdoi%2F10.1287%2Fopre.2015.1361)ä¸­æå‡ºçš„ã€‚
- en: 'With a simple example in Python weâ€™ll learn how to:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡Pythonä¸­çš„ä¸€ä¸ªç®€å•ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†å­¦ä¹ å¦‚ä½•ï¼š
- en: Design an optimization-based experiment.
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è®¾è®¡ä¸€ä¸ªåŸºäºä¼˜åŒ–çš„å®éªŒã€‚
- en: Perform inference using bootstrap techniques.
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è‡ªåŠ©æ³•æŠ€æœ¯è¿›è¡Œæ¨æ–­ã€‚
- en: Implement the code in Python for your own experiments
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: åœ¨Pythonä¸­å®ç°ä»£ç ï¼Œä»¥ä¾¿ä½ è‡ªå·±çš„å®éªŒä½¿ç”¨
- en: The Power of Optimization
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä¼˜åŒ–çš„åŠ›é‡
- en: Before diving into our example and Python code, letâ€™s first discuss some insights
    into the benefits of using an optimization-based approach to design experiments.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ·±å…¥ç ”ç©¶æˆ‘ä»¬çš„ä¾‹å­å’ŒPythonä»£ç ä¹‹å‰ï¼Œé¦–å…ˆè®¨è®ºä¸€ä¸‹ä½¿ç”¨åŸºäºä¼˜åŒ–çš„æ–¹æ³•æ¥è®¾è®¡å®éªŒçš„å¥½å¤„ã€‚
- en: Optimization makes statistics more precise, allowing for a more powerful inference.
  id: totrans-17
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ä¼˜åŒ–ä½¿å¾—ç»Ÿè®¡ç»“æœæ›´åŠ ç²¾ç¡®ï¼Œä»è€Œå¯ä»¥è¿›è¡Œæ›´å¼ºæœ‰åŠ›çš„æ¨æ–­ã€‚
- en: The optimization-based approach **matches the experimental groups to minimize
    the en-masse discrepancies in means and variances**. This makes the statistics
    much more precise, concentrating them tightly around their nominal values while
    still being unbiased estimates. This increased precision allows for more powerful
    inference (using the bootstrap algorithm, which weâ€™ll cover later).
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: åŸºäºä¼˜åŒ–çš„æ–¹æ³•**å°†å®éªŒç»„è¿›è¡ŒåŒ¹é…ï¼Œä»¥æœ€å°åŒ–æ•´ä½“å‡å€¼å’Œæ–¹å·®çš„å·®å¼‚**ã€‚è¿™æ ·å¯ä»¥ä½¿ç»Ÿè®¡ç»“æœæ›´åŠ ç²¾ç¡®ï¼Œå°†å…¶ç´§å¯†é›†ä¸­åœ¨åä¹‰å€¼å‘¨å›´ï¼ŒåŒæ—¶ä»ç„¶ä¿æŒæ— åçš„ä¼°è®¡ã€‚è¿™ç§ç²¾åº¦çš„æé«˜ä½¿å¾—æ¨æ–­èƒ½åŠ›æ›´å¼ºï¼ˆæˆ‘ä»¬ç¨åä¼šä»‹ç»ä½¿ç”¨çš„è‡ªåŠ©æ³•ç®—æ³•ï¼‰ã€‚
- en: This allows researchers to draw statistically valid conclusions with less data,
    reducing experimental costs â€” an important benefit in disciplines like oncology
    research, where testing chemotherapy agents in mouse cancer models is both laborious
    and expensive. Moreover, compared to other methods for small sample sizes, optimization
    has been shown to outperform them, as weâ€™ll see later with simulated experiments.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä½¿å¾—ç ”ç©¶äººå‘˜èƒ½å¤Ÿé€šè¿‡æ›´å°‘çš„æ•°æ®å¾—å‡ºç»Ÿè®¡ä¸Šæœ‰æ•ˆçš„ç»“è®ºï¼Œä»è€Œå‡å°‘å®éªŒæˆæœ¬â€”â€”è¿™æ˜¯è‚¿ç˜¤å­¦ç ”ç©¶ç­‰å­¦ç§‘ä¸­çš„ä¸€ä¸ªé‡è¦ä¼˜åŠ¿ï¼Œå› ä¸ºåœ¨å°é¼ ç™Œç—‡æ¨¡å‹ä¸­æµ‹è¯•åŒ–ç–—è¯ç‰©æ—¢ç¹çåˆæ˜‚è´µã€‚æ­¤å¤–ï¼Œä¸å…¶ä»–é€‚ç”¨äºå°æ ·æœ¬é‡çš„æ–¹æ³•ç›¸æ¯”ï¼Œä¼˜åŒ–æ–¹æ³•å·²ç»è¯æ˜åœ¨æ•ˆæœä¸Šä¼˜äºå…¶ä»–æ–¹æ³•ï¼Œæ­£å¦‚æˆ‘ä»¬ç¨åé€šè¿‡æ¨¡æ‹Ÿå®éªŒçœ‹åˆ°çš„é‚£æ ·ã€‚
- en: Now, letâ€™s dive into an example to see how to apply this approach using Python!
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œè®©æˆ‘ä»¬æ·±å…¥ä¸€ä¸ªä¾‹å­ï¼Œçœ‹çœ‹å¦‚ä½•ä½¿ç”¨Pythonåº”ç”¨è¿™ç§æ–¹æ³•ï¼
- en: Implementing the Algorithm in Python
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åœ¨Pythonä¸­å®ç°ç®—æ³•
- en: 'Case Study: A Drug Experiment with 20 Mice'
  id: totrans-22
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ¡ˆä¾‹ç ”ç©¶ï¼š20åªå°é¼ çš„è¯ç‰©å®éªŒ
- en: 'Letâ€™s consider an experiment with 20 mice, where we are interested in studying
    the effect of a drug on tumor growth with varying initial tumor sizes. Suppose
    that the initial tumor sizes are normally distributed with a mean of 200 mg and
    a standard deviation of 300 mg (truncated to ensure non-negative values). We can
    generate the population of mice with the following Python code:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ª20åªå°é¼ çš„å®éªŒï¼Œç ”ç©¶è¯ç‰©å¯¹è‚¿ç˜¤ç”Ÿé•¿çš„å½±å“ï¼Œè‚¿ç˜¤å¤§å°åˆå§‹å€¼ä¸åŒã€‚å‡è®¾åˆå§‹è‚¿ç˜¤å¤§å°å‘ˆæ­£æ€åˆ†å¸ƒï¼Œå‡å€¼ä¸º200 mgï¼Œæ ‡å‡†å·®ä¸º300 mgï¼ˆä¸ºäº†ç¡®ä¿å€¼ä¸ºéè´Ÿæ•°è€Œè¿›è¡Œäº†æˆªæ–­ï¼‰ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ä»¥ä¸‹Pythonä»£ç ç”Ÿæˆå°é¼ ç§ç¾¤ï¼š
- en: '[PRE0]'
  id: totrans-24
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '[PRE1]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Now, we need to divide the 20 rodents into two groups of 10 each â€” one group
    will receive the treatment, while the other will receive a placebo. Weâ€™ll accomplish
    this using optimization.
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œæˆ‘ä»¬éœ€è¦å°†20åªå•®é½¿åŠ¨ç‰©åˆ†æˆä¸¤ç»„ï¼Œæ¯ç»„10åªâ€”â€”ä¸€ç»„å°†æ¥å—æ²»ç–—ï¼Œå¦ä¸€ç»„å°†æ¥å—å®‰æ…°å‰‚ã€‚æˆ‘ä»¬å°†é€šè¿‡ä¼˜åŒ–æ¥å®Œæˆè¿™ä¸€ä»»åŠ¡ã€‚
- en: We will also assume that tumor growth is observed over a one-day period and
    follows the Gompertz model (detailed in [*Mathematical Models in Cancer Research*](https://medium.com/r?url=https%3A%2F%2Fwww.semanticscholar.org%2Fpaper%2FMathematical-models-in-cancer-research-Wheldon%2F9e3176627ff018f369b87b1aa8c97df203020f76)).
    The treatment is assumed to have a deterministic effect of reducing tumor size
    by 250 mg.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿˜å‡è®¾è‚¿ç˜¤ç”Ÿé•¿æ˜¯åœ¨ä¸€å¤©å†…è§‚å¯Ÿçš„ï¼Œå¹¶ä¸”éµå¾ªGompertzæ¨¡å‹ï¼ˆè¯¦è§[*ã€Šç™Œç—‡ç ”ç©¶ä¸­çš„æ•°å­¦æ¨¡å‹ã€‹*](https://medium.com/r?url=https%3A%2F%2Fwww.semanticscholar.org%2Fpaper%2FMathematical-models-in-cancer-research-Wheldon%2F9e3176627ff018f369b87b1aa8c97df203020f76)ï¼‰ã€‚å‡è®¾æ²»ç–—å…·æœ‰ç¡®å®šæ€§æ•ˆæœï¼Œå¯ä»¥å‡å°‘è‚¿ç˜¤å¤§å°250
    mgã€‚
- en: Experimental Design
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å®éªŒè®¾è®¡
- en: We aim to formulate the creation of equivalent groups as an optimization problem,
    where the objective is to minimize the discrepancy in both the mean and varianceof
    the initial tumor weight.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬çš„ç›®æ ‡æ˜¯å°†ç­‰æ•ˆç»„çš„åˆ›å»ºè¡¨è¿°ä¸ºä¸€ä¸ªä¼˜åŒ–é—®é¢˜ï¼Œå…¶ä¸­ç›®æ ‡æ˜¯æœ€å°åŒ–åˆå§‹è‚¿ç˜¤é‡é‡çš„å‡å€¼å’Œæ–¹å·®å·®å¼‚ã€‚
- en: 'To implement this, we need to follow three steps:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å®ç°è¿™ä¸€ç›®æ ‡ï¼Œæˆ‘ä»¬éœ€è¦éµå¾ªä¸‰ä¸ªæ­¥éª¤ï¼š
- en: 'Paso 1: Normalize the Initial Tumor Weight'
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç¬¬1æ­¥ï¼šè§„èŒƒåŒ–åˆå§‹è‚¿ç˜¤é‡é‡
- en: 'First, the entire sample must be pre-processed and the metric should be normalized
    so that it has a mean of zero and unit variance:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œæ•´ä¸ªæ ·æœ¬å¿…é¡»è¿›è¡Œé¢„å¤„ç†ï¼Œå¹¶ä¸”åº¦é‡æ ‡å‡†åº”è¯¥è§„èŒƒåŒ–ï¼Œä½¿å…¶å‡å€¼ä¸ºé›¶ï¼Œæ–¹å·®ä¸ºå•ä½ï¼š
- en: '[PRE2]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Paso 2: Create the groups using optimization'
  id: totrans-34
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ç¬¬2æ­¥ï¼šä½¿ç”¨ä¼˜åŒ–åˆ›å»ºç»„
- en: 'Next, we need to implement the general optimization model that construct *m-groups*
    with *k-subjects* each, minimizing the *maximum discrepancy between any two groups*
    (a full description of the model variables can be found in [the article](https://pubsonline.informs.org/doi/10.1287/opre.2015.1361))
    and passing it the normalized metric:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬éœ€è¦å®ç°ä¸€ä¸ªé€šç”¨çš„ä¼˜åŒ–æ¨¡å‹ï¼Œè¯¥æ¨¡å‹æ„å»ºå…·æœ‰*kä¸ªå—è¯•è€…*çš„*mç»„*ï¼Œå¹¶æœ€å°åŒ–*ä»»æ„ä¸¤ç»„ä¹‹é—´çš„æœ€å¤§å·®å¼‚*ï¼ˆæœ‰å…³æ¨¡å‹å˜é‡çš„å®Œæ•´æè¿°ï¼Œè¯·å‚è§[æ–‡ç« ](https://pubsonline.informs.org/doi/10.1287/opre.2015.1361)ï¼‰ï¼Œå¹¶ä¼ é€’å½’ä¸€åŒ–åº¦é‡ï¼š
- en: '![](../Images/73f213fb1e811cde82574a44e4a94e8a.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/73f213fb1e811cde82574a44e4a94e8a.png)'
- en: Optimization model that creates m-groups of k-units each (from [Bertsimas et
    al. 2015](https://pubsonline.informs.org/doi/10.1287/opre.2015.1361)).
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ›å»ºæ¯ä¸ªå«æœ‰kä¸ªå•ä½çš„mç»„çš„ä¼˜åŒ–æ¨¡å‹ï¼ˆæ¥è‡ª[Bertsimas et al. 2015](https://pubsonline.informs.org/doi/10.1287/opre.2015.1361)ï¼‰ã€‚
- en: 'The mathematical model can be implemented in Python using the ortools library
    with the SCIP solver, as follows:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥æ•°å­¦æ¨¡å‹å¯ä»¥ä½¿ç”¨Pythonä¸­çš„ortoolsåº“å’ŒSCIPæ±‚è§£å™¨å®ç°ï¼Œå…·ä½“å¦‚ä¸‹ï¼š
- en: '[PRE3]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '[PRE4]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '[PRE5]'
  id: totrans-41
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '***Note:*** *The parameter* rho *controls the trade-off between minimizing
    discrepancies in the first moment and second moment and is chosen by the researcher.
    In our example, we have considered* rho *equals 0.5.*'
  id: totrans-42
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***æ³¨æ„ï¼š*** *å‚æ•°* rho *æ§åˆ¶æœ€å°åŒ–ä¸€é˜¶çŸ©å’ŒäºŒé˜¶çŸ©ä¹‹é—´å·®å¼‚çš„æŠ˜è¡·ï¼Œç”±ç ”ç©¶äººå‘˜é€‰æ‹©ã€‚åœ¨æˆ‘ä»¬çš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å‡è®¾* rho *ç­‰äº0.5ã€‚*'
- en: 'Paso 3: Randomize which group receives which treatment'
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: Paso 3ï¼šéšæœºåŒ–åˆ†é…å“ªç»„æ¥å—å“ªç§æ²»ç–—
- en: 'Lastly, we randomly determine which experimental mice group will receive the
    drug, and which will receive the placebo:'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œæˆ‘ä»¬éšæœºå†³å®šå“ªä¸€ç»„å®éªŒå°é¼ å°†æ¥å—è¯ç‰©ï¼Œå“ªä¸€ç»„å°†æ¥å—å®‰æ…°å‰‚ï¼š
- en: '[PRE6]'
  id: totrans-45
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '[PRE7]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'Letâ€™s see the quality of the result by analyzing the mean and variance of the
    initial tumor weights in both groups:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬é€šè¿‡åˆ†æä¸¤ç»„åˆå§‹è‚¿ç˜¤æƒé‡çš„å‡å€¼å’Œæ–¹å·®æ¥æŸ¥çœ‹ç»“æœçš„è´¨é‡ï¼š
- en: '[PRE8]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '[PRE9]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '**This is the group division with minimal discrepancy** in the mean and variance
    of pre-experimental tumor weights!Now letâ€™s conduct the experiment and analyze
    the results.'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¿™æ˜¯é¢„å®éªŒè‚¿ç˜¤æƒé‡å‡å€¼å’Œæ–¹å·®æœ€å°çš„ç»„åˆ†é…**ï¼ç°åœ¨è®©æˆ‘ä»¬è¿›è¡Œå®éªŒå¹¶åˆ†æç»“æœã€‚'
- en: Inference with bootstrap
  id: totrans-51
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è‡ªåŠ©æ³•è¿›è¡Œæ¨æ–­
- en: '**Simulating tumor growth**'
  id: totrans-52
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**æ¨¡æ‹Ÿè‚¿ç˜¤ç”Ÿé•¿**'
- en: 'Given the established treatment assignment, tumor growth is simulated over
    one day using the Gompertz model, assuming an effect of -250 mg for the treated
    group:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: æ ¹æ®å·²ç¡®å®šçš„æ²»ç–—åˆ†é…ï¼Œå‡è®¾æ²»ç–—ç»„çš„æ•ˆæœä¸º-250æ¯«å…‹ï¼Œè‚¿ç˜¤ç”Ÿé•¿åœ¨ä¸€å¤©å†…ä½¿ç”¨Gompertzæ¨¡å‹è¿›è¡Œæ¨¡æ‹Ÿï¼š
- en: '[PRE10]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '[PRE11]'
  id: totrans-55
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '[PRE12]'
  id: totrans-56
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '[PRE13]'
  id: totrans-57
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Now that we have the final tumor weights, we observe that the average final
    tumor weight in the treatment group is 260 mg lower than in the control group.
    However, to determine if this difference is statistically significant, we need
    to apply the following bootstrap mechanism to calculate the p-value.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å·²ç»å¾—åˆ°äº†æœ€ç»ˆçš„è‚¿ç˜¤æƒé‡ï¼Œæˆ‘ä»¬è§‚å¯Ÿåˆ°æ²»ç–—ç»„çš„å¹³å‡æœ€ç»ˆè‚¿ç˜¤é‡é‡æ¯”å¯¹ç…§ç»„ä½260æ¯«å…‹ã€‚ç„¶è€Œï¼Œä¸ºäº†ç¡®å®šè¿™ä¸ªå·®å¼‚æ˜¯å¦å…·æœ‰ç»Ÿè®¡å­¦æ„ä¹‰ï¼Œæˆ‘ä»¬éœ€è¦åº”ç”¨ä»¥ä¸‹è‡ªåŠ©æ³•æœºåˆ¶æ¥è®¡ç®—på€¼ã€‚
- en: '**Bootstrap inference for optimization-based design**'
  id: totrans-59
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '**åŸºäºä¼˜åŒ–è®¾è®¡çš„è‡ªåŠ©æ³•æ¨æ–­**'
- en: â€œIn an optimization-based design, statistics like the average difference between
    groups become more precise but no longer follow the usual distributions. Therefore,
    a bootstrap inference method should be used to draw valid conclusions.â€
  id: totrans-60
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: â€œåœ¨åŸºäºä¼˜åŒ–çš„è®¾è®¡ä¸­ï¼Œè¯¸å¦‚ç»„é—´å¹³å‡å·®å¼‚ä¹‹ç±»çš„ç»Ÿè®¡æ•°æ®å˜å¾—æ›´åŠ ç²¾ç¡®ï¼Œä½†ä¸å†éµå¾ªå¸¸è§„åˆ†å¸ƒã€‚å› æ­¤ï¼Œåº”ä½¿ç”¨è‡ªåŠ©æ³•æ¨æ–­æ–¹æ³•æ¥å¾—å‡ºæœ‰æ•ˆç»“è®ºã€‚â€
- en: 'The boostrap inference method proposed by [Bertsimas et al. (2015)](https://medium.com/r?url=https%3A%2F%2Fpubsonline.informs.org%2Fdoi%2F10.1287%2Fopre.2015.1361)
    involves using sampling with replacement to construct the baseline distribution
    of our estimator. In each iteration, the group division is performed using optimization,
    and finally the the *p-value* is derived as follows:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '[Bertsimas et al. (2015)](https://medium.com/r?url=https%3A%2F%2Fpubsonline.informs.org%2Fdoi%2F10.1287%2Fopre.2015.1361)
    æå‡ºçš„è‡ªåŠ©æ³•æ¨æ–­æ–¹æ³•åŒ…æ‹¬ä½¿ç”¨å¸¦æ”¾å›çš„æŠ½æ ·æ„å»ºä¼°è®¡é‡çš„åŸºå‡†åˆ†å¸ƒã€‚åœ¨æ¯æ¬¡è¿­ä»£ä¸­ï¼Œä½¿ç”¨ä¼˜åŒ–è¿›è¡Œç»„åˆ†é…ï¼Œæœ€åå¾—å‡º*på€¼*ï¼Œå…·ä½“å¦‚ä¸‹ï¼š'
- en: '[PRE14]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: '[PRE15]'
  id: totrans-63
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '[PRE16]'
  id: totrans-64
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: The observed difference of -260 mg between the groups is significant at the
    5% significance level (the p-value less than 0.05). Therefore, we reject the null
    hypothesis of equal means and conclude that the treatment had a statistically
    significant effect.
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: ç»„é—´è§‚å¯Ÿåˆ°çš„-260æ¯«å…‹çš„å·®å¼‚åœ¨5%çš„æ˜¾è‘—æ€§æ°´å¹³ä¸‹æ˜¯æ˜¾è‘—çš„ï¼ˆpå€¼å°äº0.05ï¼‰ã€‚å› æ­¤ï¼Œæˆ‘ä»¬æ‹’ç»é›¶å‡è®¾ï¼ˆå‡å€¼ç›¸ç­‰ï¼‰ï¼Œå¹¶å¾—å‡ºç»“è®ºï¼šæ²»ç–—å…·æœ‰ç»Ÿè®¡å­¦æ˜¾è‘—æ•ˆåº”ã€‚
- en: '**Results over 1000 mice experiments**'
  id: totrans-66
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**1000åªå°é¼ å®éªŒçš„ç»“æœ**'
- en: We can simulate the experiment multiple times, generating populations of mice
    with different initial tumor weights, drawn from the same normal distribution
    with a mean of 200 mg and a standard deviation of 300 mg.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥å¤šæ¬¡æ¨¡æ‹Ÿå®éªŒï¼Œç”Ÿæˆå…·æœ‰ä¸åŒåˆå§‹è‚¿ç˜¤é‡é‡çš„å°é¼ ç¾¤ä½“ï¼Œè¿™äº›å°é¼ æ¥è‡ªç›¸åŒçš„æ­£æ€åˆ†å¸ƒï¼Œå‡å€¼ä¸º200 mgï¼Œæ ‡å‡†å·®ä¸º300 mgã€‚
- en: 'This allows us to compare the optimization-based design with other experimental
    designs. In the following graph, I compare the optimization approach with simple
    random assignment and stratified random assignment (where the strata were created
    using a k-means algorithm based on initial tumor weight):'
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä½¿æˆ‘ä»¬èƒ½å¤Ÿå°†åŸºäºä¼˜åŒ–çš„è®¾è®¡ä¸å…¶ä»–å®éªŒè®¾è®¡è¿›è¡Œæ¯”è¾ƒã€‚åœ¨ä¸‹å›¾ä¸­ï¼Œæˆ‘å°†ä¼˜åŒ–æ–¹æ³•ä¸ç®€å•éšæœºåˆ†é…å’Œåˆ†å±‚éšæœºåˆ†é…è¿›è¡Œäº†æ¯”è¾ƒï¼ˆå…¶ä¸­ï¼Œåˆ†å±‚æ˜¯ä½¿ç”¨åŸºäºåˆå§‹è‚¿ç˜¤é‡é‡çš„k-meansç®—æ³•åˆ›å»ºçš„ï¼‰ï¼š
- en: '![](../Images/95504d0add5f8dacff5e62d5f7f6d1e5.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/95504d0add5f8dacff5e62d5f7f6d1e5.png)'
- en: Results of 1000 simulated experiments to detect an effect of -250 mg (Image
    by author).
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 1000æ¬¡æ¨¡æ‹Ÿå®éªŒçš„ç»“æœï¼Œç”¨äºæ£€æµ‹-250 mgçš„æ•ˆåº”ï¼ˆå›¾ç‰‡æ¥æºï¼šä½œè€…ï¼‰ã€‚
- en: In their article, the authors also compare the optimization-based approach with
    re-randomization and pairwise matching across different effect sizes and group
    sizes. I highly recommend reading the full article if youâ€™re interested in exploring
    the details further!
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ä»–ä»¬çš„æ–‡ç« ä¸­ï¼Œä½œè€…è¿˜å°†åŸºäºä¼˜åŒ–çš„æ–¹æ³•ä¸é‡æ–°éšæœºåŒ–å’Œé…å¯¹åŒ¹é…åœ¨ä¸åŒæ•ˆåº”å¤§å°å’Œç»„å¤§å°ä¸‹è¿›è¡Œäº†æ¯”è¾ƒã€‚å¦‚æœä½ æœ‰å…´è¶£æ·±å…¥æ¢ç´¢ç»†èŠ‚ï¼Œæˆ‘å¼ºçƒˆæ¨èé˜…è¯»å®Œæ•´çš„æ–‡ç« ï¼
- en: Congratulations! Youâ€™ve reached the end ğŸ‰ If you found this article interesting,
    consider following me. I often share ideas about optimization and causal inference.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: æ­å–œï¼ä½ å·²ç»é˜…è¯»å®Œæ¯•ğŸ‰å¦‚æœä½ è§‰å¾—è¿™ç¯‡æ–‡ç« æœ‰è¶£ï¼Œå¯ä»¥è€ƒè™‘å…³æ³¨æˆ‘ã€‚æˆ‘ç»å¸¸åˆ†äº«å…³äºä¼˜åŒ–å’Œå› æœæ¨æ–­çš„æƒ³æ³•ã€‚
