<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>A Comprehensive Guide to Inset Axes in Matplotlib</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>A Comprehensive Guide to Inset Axes in Matplotlib</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/a-comprehensive-guide-to-inset-axes-in-matplotlib-87400e00a4e5?source=collection_archive---------9-----------------------#2024-01-30">https://towardsdatascience.com/a-comprehensive-guide-to-inset-axes-in-matplotlib-87400e00a4e5?source=collection_archive---------9-----------------------#2024-01-30</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="2e0b" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">including 4 ways to make them and 2 ways to style them</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@mmore500?source=post_page---byline--87400e00a4e5--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Matthew Andres Moreno" class="l ep by dd de cx" src="../Images/ca7da9fd9e5c744ee0ebd2aa5d979eb5.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/da:true/resize:fill:88:88/0*BPeYKv9EZYk1X1hH"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--87400e00a4e5--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@mmore500?source=post_page---byline--87400e00a4e5--------------------------------" rel="noopener follow">Matthew Andres Moreno</a></p></div></div></div><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ib ic ah ai aj ak al am an ao ap aq ar id ie if" disabled="">Follow</button></p></div></div></span></div></div><div class="l ig"><span class="bf b bg z dx"><div class="ab cn ih ii ij"><div class="ik il ab"><div class="bf b bg z dx ab im"><span class="in l ig">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--87400e00a4e5--------------------------------" rel="noopener follow"><p class="bf b bg z io ip iq ir is it iu iv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">8 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Jan 30, 2024</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w ea eb q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon ed in kg kh ki"><div class=""><div class="kj kk kl km kn ko kp am kq kr ks ki"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kt ku kv kw kx ky kz"><p class="bf b dy z dx"><span class="kk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kj la lb ab q ee lc ld" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="le"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lf k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lg an ao ap id lh li lj" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep lk cn"><div class="l ae"><div class="ab cb"><div class="ll lm ln lo lp lq ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lg an ao ap id lr ls ld lt lu lv lw lx s ly lz ma mb mc md me u mf mg mh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj mk"><img src="../Images/c3c99ec05194828d72a5d44982ef711f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*mT1mny5OcOz2Mn5tG3SrIg.png"/></div><figcaption class="ms mt mu mi mj mv mw bf b bg z dx">example plot with four inset axes</figcaption></figure><p id="3d6e" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Inset axes are a powerful data visualization technique to highlight specific plot regions or add detailed subplots. They are a great way to make effective use of otherwise-emtpy figure space.</p><p id="8432" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">This tutorial shows <strong class="mz fr">4 methods to create inset axes in <em class="nt">matplotlib</em></strong>, which let you position insets relative to an axes, to an overall, figure, in absolute units (i.e., inches), or using a grid system — the latter useful in particular when working with multiple insets.</p><p id="a1ec" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">We’ll also cover <strong class="mz fr">2 ways to style zoom insets</strong>: with classic leader lines and with color-coded overlays.</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj nu"><img src="../Images/58d7ae54c96c03ad4ab62d5ec2122004.png" data-original-src="https://miro.medium.com/v2/resize:fit:1188/format:webp/1*kjSZEUJyxC9-BtpaHC0yHg.png"/></div><figcaption class="ms mt mu mi mj mv mw bf b bg z dx">inset axes with color-coded overlays</figcaption></figure><p id="20dc" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">At the end of this tutorial, you will be able to determine which approach best meets your needs —and have some code you can copy/paste to make it happen.</p><h1 id="2289" class="nv nw fq bf nx ny nz gq oa ob oc gt od oe of og oh oi oj ok ol om on oo op oq bk">Here’s what we’ll cover.</h1><p id="c0e0" class="pw-post-body-paragraph mx my fq mz b go or nb nc gr os ne nf ng ot ni nj nk ou nm nn no ov nq nr ns fj bk"><strong class="mz fr"><em class="nt">Creating inset axes:</em></strong></p><ol class=""><li id="e795" class="mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns ow ox oy bk"><em class="nt">predefined axes-level location codes: </em><code class="cx oz pa pb pc b">mpl_toolkits.axes_grid1.inset_axes</code>,</li><li id="4132" class="mx my fq mz b go pd nb nc gr pe ne nf ng pf ni nj nk pg nm nn no ph nq nr ns ow ox oy bk"><em class="nt">manual placement with axes-level coordinates:</em> <code class="cx oz pa pb pc b">Axes.inset_axes</code>, and</li><li id="488b" class="mx my fq mz b go pd nb nc gr pe ne nf ng pf ni nj nk pg nm nn no ph nq nr ns ow ox oy bk"><em class="nt">manual placement with figure-level coordinates:</em> <code class="cx oz pa pb pc b">Figure.add_axes</code>;</li><li id="6332" class="mx my fq mz b go pd nb nc gr pe ne nf ng pf ni nj nk pg nm nn no ph nq nr ns ow ox oy bk"><em class="nt">multi-inset auto-layout:</em><code class="cx oz pa pb pc b">Axes.inset_axes</code> with <code class="cx oz pa pb pc b">outset.layout_corner_insets</code>.</li></ol><p id="11bd" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk"><strong class="mz fr"><em class="nt">Adding zoom indicators:</em></strong></p><p id="ce92" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">5. <em class="nt">leader lines:</em> <code class="cx oz pa pb pc b">Axes.indicate_inset_zoom</code> and</p><p id="38a6" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">6. <em class="nt">color-coded overlays:</em> <code class="cx oz pa pb pc b">OutsetGrid.marqueeplot</code>.</p><p id="1f33" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Sections 4 and 6 make use new tools from the open source <em class="nt">outset</em> library for multi-scale data visualization, which I recently released and am excited to share with the community.</p></div></div></div><div class="ab cb pi pj pk pl" role="separator"><span class="pm by bm pn po pp"/><span class="pm by bm pn po pp"/><span class="pm by bm pn po"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="41b3" class="nv nw fq bf nx ny pq gq oa ob pr gt od oe ps og oh oi pt ok ol om pu oo op oq bk">Method 1: Using <code class="cx oz pa pb pc b"><em class="pv">`mpl_toolkits.axes_grid1.inset_axes`</em></code></h1><p id="7143" class="pw-post-body-paragraph mx my fq mz b go or nb nc gr os ne nf ng ot ni nj nk ou nm nn no ov nq nr ns fj bk">This function simplifies adding insets. Here’s how to use it, including an explanation of the `loc` parameter for positioning:</p><pre class="ml mm mn mo mp pw pc px bp py bb bk"><span id="b03e" class="pz nw fq pc b bg qa qb l qc qd">import matplotlib.pyplot as plt<br/>from mpl_toolkits.axes_grid1.inset_locator import inset_axes<br/><br/>fig, ax = plt.subplots(); ax.set_box_aspect(0.5)  # main figure and axes<br/>ax.plot([0, 9], [0, 9])  # example plot<br/><br/># create inset axes &amp; plot on them<br/>inset_ax = inset_axes(ax, width="30%", height=1.2, loc="upper left")<br/>inset_ax.plot([9, 0], [0, 9], color="r")<br/>plt.xticks([]); plt.yticks([])  # strip ticks, which collide w/ main ax</span></pre><p id="0c68" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Note that axes size can be specified <em class="nt">relative to parent axes</em> or in <em class="nt">inches</em>, as shown here with <code class="cx oz pa pb pc b">width</code> and <code class="cx oz pa pb pc b">height</code>, respectively.</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj qe"><img src="../Images/98d9003e021750c68c7cb49d03c2a352.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*GyM9tQyqrkSvNK7g70nxiw.png"/></div></figure><p id="2428" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Supported location codes for <code class="cx oz pa pb pc b">loc</code> are as follows,</p><pre class="ml mm mn mo mp pw pc px bp py bb bk"><span id="5dd0" class="pz nw fq pc b bg qa qb l qc qd">"upper right" | "upper left" | "lower left" | "lower right"<br/>"right" | "center left" | "center right" | "lower center"<br/>"upper center" | "center"</span></pre><h1 id="c1a1" class="nv nw fq bf nx ny nz gq oa ob oc gt od oe of og oh oi oj ok ol om on oo op oq bk">Method 2: Using `Axes.inset_axes`</h1><p id="df6b" class="pw-post-body-paragraph mx my fq mz b go or nb nc gr os ne nf ng ot ni nj nk ou nm nn no ov nq nr ns fj bk">Matplotlib’s <code class="cx oz pa pb pc b">Axes</code> class provides the <code class="cx oz pa pb pc b">inset_axes</code> member function, which is a straightforward way to create insets relative to the parent axes:</p><pre class="ml mm mn mo mp pw pc px bp py bb bk"><span id="ae60" class="pz nw fq pc b bg qa qb l qc qd">import matplotlib.pyplot as plt<br/><br/>fig, ax = plt.subplots(); ax.set_box_aspect(0.5)  # main figure and axes<br/>ax.plot([0, 9], [0, 9])  # example plot<br/><br/># create inset axes &amp; plot on them<br/>ins_ax = ax.inset_axes([.6, .15, .3, .3])  # [x, y, width, height] w.r.t. ax<br/>ins_ax.plot([9, 0], [0, 9], color="r")</span></pre><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj qe"><img src="../Images/fe04a108b514e4df745817db1060d4ff.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*IxwJ0Ute1CTMZKsbeRfjqw.png"/></div></figure><p id="5467" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Coordinates are specified relative to the parent axes, so — for example — (0, 0, 0.5, 0.2) will create an axes in the lower left-hand corner with width that takes up half of axes width and height that takes up 0.2 of axes height.</p><p id="e103" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">To position an inset relative to a parent axes <code class="cx oz pa pb pc b">ax</code> in terms of inches, we must first calculate the size of the parent axes in inches.</p><pre class="ml mm mn mo mp pw pc px bp py bb bk"><span id="e63d" class="pz nw fq pc b bg qa qb l qc qd">w_inch, h_inch = ax.figure.get_size_inches() * ax.get_position().size</span></pre><p id="9fcb" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Then, pass your <code class="cx oz pa pb pc b">x</code>, <code class="cx oz pa pb pc b">y</code>, <code class="cx oz pa pb pc b">w</code>, and <code class="cx oz pa pb pc b">h</code> in inches to <code class="cx oz pa pb pc b">Axes.inset_axes</code> as follows</p><pre class="ml mm mn mo mp pw pc px bp py bb bk"><span id="43b7" class="pz nw fq pc b bg qa qb l qc qd">ax.inset_axes([x/w_inch, y/h_inch, w/w_inch, h/h_inch])</span></pre><h1 id="ad14" class="nv nw fq bf nx ny nz gq oa ob oc gt od oe of og oh oi oj ok ol om on oo op oq bk">Method 3: Using `Figure.add_axes`</h1><p id="5296" class="pw-post-body-paragraph mx my fq mz b go or nb nc gr os ne nf ng ot ni nj nk ou nm nn no ov nq nr ns fj bk">Matplotlib’s <code class="cx oz pa pb pc b">Figure</code> class provides an analogous <code class="cx oz pa pb pc b">add_axes</code> member function, which lets you position insets relative to the overall figure.</p><pre class="ml mm mn mo mp pw pc px bp py bb bk"><span id="6915" class="pz nw fq pc b bg qa qb l qc qd">import matplotlib.pyplot as plt<br/><br/>fig, ax = plt.subplots(); ax.set_box_aspect(0.5)  # main figure and axes<br/>ax.plot([0, 9], [0, 9])  # example plot<br/><br/># create inset axes &amp; plot on them<br/>ins_ax = fig.add_axes([.2, .5, .2, .2])  # [x, y, width, height] w.r.t. fig<br/>ins_ax.plot([9, 0], [0, 9], color="r")<br/></span></pre><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj qe"><img src="../Images/a9c336fd223df3d47c7dd933c78ccfa2.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*ji1dP8EQyqUgTtJI3R0_wA.png"/></div></figure><p id="d4ad" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Similarly to before, coordinates will be specified relative to the parent axes, so — for example — (0.5, 0.5, 0.3, 0.2) will create an axes 2/10ths the height of the overall figure and 3/10ths the width with the lower left corner centered within the figure.</p><h1 id="d3d2" class="nv nw fq bf nx ny nz gq oa ob oc gt od oe of og oh oi oj ok ol om on oo op oq bk">Method 4: <code class="cx oz pa pb pc b">`Axes.inset_axes</code>` with <code class="cx oz pa pb pc b">`outset.layout_corner_insets`</code></h1><p id="bae0" class="pw-post-body-paragraph mx my fq mz b go or nb nc gr os ne nf ng ot ni nj nk ou nm nn no ov nq nr ns fj bk">For this next example, we will use the <em class="nt">outset</em> library, which provides specialized tools for working with inset axes in <em class="nt">matplotlib</em>. It can be installed as <code class="cx oz pa pb pc b">python3 -m pip install outset</code>.</p><p id="e260" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">The <em class="nt">outset</em> library provides the flexible <code class="cx oz pa pb pc b">outset.util.layout_corner_insets</code> utility to position multiple inset axes within a specified corner of a main axes. Here’s how to use it to pick positions for calls to <code class="cx oz pa pb pc b">Axes.inset_axes</code>.</p><pre class="ml mm mn mo mp pw pc px bp py bb bk"><span id="f7eb" class="pz nw fq pc b bg qa qb l qc qd">import matplotlib.pyplot as plt<br/>import outset<br/><br/>fig, ax = plt.subplots(); ax.set_box_aspect(0.5)  # main figure and axes<br/>ax.plot([0, 9], [0, 9])  # example plot<br/><br/># ------ pick inset axes positions: 3 in upper left, one in lower right<br/>inset_positions = outset.util.layout_corner_insets(  # upper left positions<br/>    3, "NW", # number insets and corner to position in<br/>    # optional layout tweaks...<br/>    inset_pad_ratio=(.2,.35), inset_grid_size=(.6,.65), inset_margin_size=.05)<br/>inset_positions.append(  # generate lower right position &amp; tack on to list<br/>    outset.util.layout_corner_insets(1, "SE", inset_grid_size=.4))<br/><br/># ----- create inset axes &amp; plot on them<br/>inset_axes = [*map(ax.inset_axes, inset_positions)]  # create inset axes<br/>for iax in inset_axes:  # example plot<br/>  iax.plot([9, 0], [0, 9], color="r")</span></pre><p id="c632" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Note the optional customizations to inset positioning made through keyword arguments to <code class="cx oz pa pb pc b">outset.util.layout_corner_insets</code>. Here, “pad” refers to spacing between insets, “margin” refers to space between the insets and the main axes, and “grid size” refers to the overall fraction of axes space that insets are stacked into.</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj mk"><img src="../Images/c3c99ec05194828d72a5d44982ef711f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1274/format:webp/1*mT1mny5OcOz2Mn5tG3SrIg.png"/></div></figure></div></div></div><div class="ab cb pi pj pk pl" role="separator"><span class="pm by bm pn po pp"/><span class="pm by bm pn po pp"/><span class="pm by bm pn po"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="2ca4" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">That covers it for techniques to place inset axes!</p><p id="a22c" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">A common use case for inset axes is to provide magnification of an area of interest within the main plot. Next, we’ll look at two ways to visually correspond magnifying insets with a region of the main plot.</p><h1 id="b1e4" class="nv nw fq bf nx ny nz gq oa ob oc gt od oe of og oh oi oj ok ol om on oo op oq bk">Method 5: Zoom Indicator Leaders</h1><p id="6614" class="pw-post-body-paragraph mx my fq mz b go or nb nc gr os ne nf ng ot ni nj nk ou nm nn no ov nq nr ns fj bk">A classic approach depicting zoom relationships draws connecting lines between the corners of the inset axes and the region it is magnifying. This works especially well when plotting small numbers of insets.</p><p id="c60e" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Matplotlib’s <code class="cx oz pa pb pc b">Axes</code> includes the <code class="cx oz pa pb pc b">indicate_inset_zoom</code> member function for this purpose. Here’s how to use it.</p><pre class="ml mm mn mo mp pw pc px bp py bb bk"><span id="3632" class="pz nw fq pc b bg qa qb l qc qd">from math import isclose; import matplotlib.pyplot as plt<br/><br/># set up main fig/axes<br/>fig, main_ax = plt.subplots(); main_ax.set_box_aspect(0.5) <br/>inset_ax = main_ax.inset_axes(<br/>   [0.05, 0.65, 0.3, 0.3],  # [x, y, width, height] w.r.t. axes<br/>    xlim=[4, 5], ylim=[4, 5], # sets viewport &amp; tells relation to main axes<br/>    xticklabels=[], yticklabels=[]<br/>)<br/><br/># add plot content<br/>for ax in main_ax, inset_ax:<br/>    ax.plot([0, 9], [0, 9])  # first example line<br/>    ax.plot([0, 9], [1, 8])  # second example line<br/><br/># add zoom leaders<br/>main_ax.indicate_inset_zoom(inset_ax, edgecolor="blue")<br/><br/># careful! warn if aspect ratio of inset axes doesn't match main axes <br/>if not isclose(inset_ax._get_aspect_ratio(), main_ax._get_aspect_ratio()):<br/>    print("chosen inset x/ylim &amp; width/height skew aspect w.r.t. main axes!")</span></pre><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj qe"><img src="../Images/e7e0941ac965828032dbdb8c35332085.png" data-original-src="https://miro.medium.com/v2/resize:fit:1280/format:webp/1*RJakoBnQJJ5tS95UtEbyww.png"/></div></figure><p id="bb69" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Note that to use <code class="cx oz pa pb pc b">Axes.indicate_inset_zoom</code>, inset axes must be created using <code class="cx oz pa pb pc b">Axes.inset_axes</code>.</p><h1 id="7962" class="nv nw fq bf nx ny nz gq oa ob oc gt od oe of og oh oi oj ok ol om on oo op oq bk">Method 6: Zoom Indicator Overlays</h1><p id="7961" class="pw-post-body-paragraph mx my fq mz b go or nb nc gr os ne nf ng ot ni nj nk ou nm nn no ov nq nr ns fj bk">When working with larger numbers of insets, it may work better to correspond regions with numbered, color-coded highlights instead of leader lines.</p><p id="d9bf" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">The <code class="cx oz pa pb pc b">outset</code> library’s <code class="cx oz pa pb pc b">OutsetGrid</code> provides a <code class="cx oz pa pb pc b">marqueeplot</code> member function for this purpose. Under this scheme, inset positioning is handled by <code class="cx oz pa pb pc b">outset.inset_outsets</code>. Here’s how to create a zoom plot with color-coded position overlays.</p><pre class="ml mm mn mo mp pw pc px bp py bb bk"><span id="a2ce" class="pz nw fq pc b bg qa qb l qc qd">from matplotlib import pyplot as plt<br/>import numpy as np<br/>import outset<br/><br/># example adapted from https://matplotlib.org/stable/gallery/<br/>i, a, b, c, d = np.arange(0.0, 2 * np.pi, 0.01), 1, 7, 3, 11<br/><br/># 3 axes grid: source plot and two zoom frames<br/>grid = outset.OutsetGrid([  # data coords for zoom sections...<br/>     (-10, 8, -8, 9), (-1.6, 5, -0.5, 3)])  # ...as (x0, y0, x1, y1)  <br/>grid.broadcast(plt.plot,  # run plotter over all axes<br/>    # subsequent kwargs go to the plotter<br/>    np.sin(i * a) * np.cos(i * b) * 20,  # line coords<br/>    np.sin(i * c) * np.cos(i * d) * 20,  # line coords<br/>    c="mediumblue",  zorder=-1,  # line styling<br/>)<br/><br/># position insets over the source plot into lower/left ("SW") corner<br/>outset.inset_outsets(grid, insets="SW")<br/><br/>grid.marqueeplot()  # render overlay annotations</span></pre><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj qf"><img src="../Images/aa84177b6c0c709c89142af8471c599f.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*sg8xKqq9NMkZOYtIZhr1Lg.png"/></div></figure><p id="3521" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Note that inset positioning can be more finely controlled via <code class="cx oz pa pb pc b">outset.util.layout_corner_insets</code>, as used for Method 4 above:</p><pre class="ml mm mn mo mp pw pc px bp py bb bk"><span id="806b" class="pz nw fq pc b bg qa qb l qc qd">...  # as before<br/><br/>customized_placements = outset.util.layout_corner_insets(<br/>    2, "SW",  # 2 insets into the lower left corner<br/>    inset_margin_size=0.05, inset_grid_size=(0.8, 0.55)  # layout params<br/>)<br/>outset.inset_outsets(grid, insets=customized_placements)<br/>grid.marqueeplot()  # render overlay annotations</span></pre><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj qg"><img src="../Images/c836552442fb1aa1346f4c2a496a64f9.png" data-original-src="https://miro.medium.com/v2/resize:fit:588/format:webp/0*YHetBXh7RwogtSkG.png"/></div></figure><p id="bd6a" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Inset placements can also be manually specified to <code class="cx oz pa pb pc b">outset.inset_outsets</code>using axes-relative coordinates, too:</p><pre class="ml mm mn mo mp pw pc px bp py bb bk"><span id="8434" class="pz nw fq pc b bg qa qb l qc qd">...  # as before<br/><br/>outset.inset_outsets(grid, insets=[<br/>    (0.05, 0.05, 0.25, 0.25),  # two insets, with axes-relative coords...<br/>    (0.7, 0.7, 0.3, 0.3),    # ...specified (x0, y0, width, height)<br/>])<br/>grid.marqueeplot()  # render overlay annotations</span></pre><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj qf"><img src="../Images/159e656d44376bcdd405434fe0ebc2b8.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*GNWNks-Um2PhW7ppaOL0uQ.png"/></div></figure><p id="c260" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">And, finally, to use bigger, side-by-side magnification panels instead of insets, just omit the call to <code class="cx oz pa pb pc b">outset.inset_outsets</code>.</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div role="button" tabindex="0" class="qi qj ed qk bh ql"><div class="mi mj qh"><img src="../Images/4b8fcba150f2955568561d91775bdf79.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*ZLzInNfF0SrC6Ru3.png"/></div></div></figure><h1 id="05df" class="nv nw fq bf nx ny nz gq oa ob oc gt od oe of og oh oi oj ok ol om on oo op oq bk">Conclusion</h1><p id="5027" class="pw-post-body-paragraph mx my fq mz b go or nb nc gr os ne nf ng ot ni nj nk ou nm nn no ov nq nr ns fj bk">Inset axes are a great way to take your <em class="nt">matplotlib</em> visualizations to the next level, whether you’re looking to highlight specific data regions or add detailed subplots.</p><p id="c53e" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Here, we’ve covered the variety of approaches at your disposal, both built in to <em class="nt">matplotlib</em> and using the <em class="nt">outset</em> library. Each method offers unique advantages, ensuring a good fit for nearly any inset plotting scenario.</p><p id="8106" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Now go make something informative and beautiful! Happy plotting :)</p></div></div></div><div class="ab cb pi pj pk pl" role="separator"><span class="pm by bm pn po pp"/><span class="pm by bm pn po pp"/><span class="pm by bm pn po"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="8e89" class="nv nw fq bf nx ny pq gq oa ob pr gt od oe ps og oh oi pt ok ol om pu oo op oq bk">Further Information</h1><p id="a658" class="pw-post-body-paragraph mx my fq mz b go or nb nc gr os ne nf ng ot ni nj nk ou nm nn no ov nq nr ns fj bk"><em class="nt">matplotlib</em> has some excellent inset example materials that are well worth checking out. In particular,</p><ul class=""><li id="f7d0" class="mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns qm ox oy bk"><a class="af qn" href="https://matplotlib.org/stable/gallery/subplots_axes_and_figures/zoom_inset_axes.html" rel="noopener ugc nofollow" target="_blank">Zoom region inset axes</a></li><li id="10a8" class="mx my fq mz b go pd nb nc gr pe ne nf ng pf ni nj nk pg nm nn no ph nq nr ns qm ox oy bk"><a class="af qn" href="https://matplotlib.org/stable/gallery/axes_grid1/inset_locator_demo.html" rel="noopener ugc nofollow" target="_blank">Inset locator demo</a></li></ul><p id="ab0d" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk"><em class="nt">outset</em> also provides some good example materials, notably one on <a class="af qn" href="https://mmore500.com/outset/example-rain.html" rel="noopener ugc nofollow" target="_blank">zoom plots over rain guage time series data</a>. <em class="nt">outset</em> also provides a useful <a class="af qn" href="https://mmore500.com/outset/quickstart.html" rel="noopener ugc nofollow" target="_blank">quickstart guide</a> and <a class="af qn" href="https://mmore500.com/outset/gallery.html" rel="noopener ugc nofollow" target="_blank">gallery page</a>.</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj qo"><img src="../Images/8567e4f3bf0573fc897b9f29d3c36b2f.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/0*aO90PFzncboUKhBj.png"/></div><figcaption class="ms mt mu mi mj mv mw bf b bg z dx">images from the outset gallery</figcaption></figure><p id="2f6b" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Formal argument-by-argument listings for all code covered here can be found in the API documentation pages for <a class="af qn" href="https://mmore500.com/outset/_autosummary/outset.html" rel="noopener ugc nofollow" target="_blank"><em class="nt">outset</em></a> and <a class="af qn" href="https://matplotlib.org/stable/api/index.html" rel="noopener ugc nofollow" target="_blank"><em class="nt">matplotlib</em></a>.</p><p id="8dfb" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Both projects are open source on GitHub, <em class="nt">m</em>a<em class="nt">tplotlib </em>under a PSF license at <a class="af qn" href="https://github.com/matplotlib/matplotlib" rel="noopener ugc nofollow" target="_blank">matplotlib/matplotlib</a> and <em class="nt">outset</em> under the MIT License at <a class="af qn" href="https://github.com/mmore500/outset" rel="noopener ugc nofollow" target="_blank">mmore500/outset</a> — <em class="nt">outset</em> is a new project, consider leaving a ⭐️!</p><p id="3873" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Joseph Early also has an excellent medium article on inset axes in matplotlib, which you can read <a class="af qn" rel="noopener" target="_blank" href="/mastering-inset-axes-in-matplotlib-458d2fdfd0c0">here</a>.</p><h1 id="45a2" class="nv nw fq bf nx ny nz gq oa ob oc gt od oe of og oh oi oj ok ol om on oo op oq bk">Authorship</h1><p id="8519" class="pw-post-body-paragraph mx my fq mz b go or nb nc gr os ne nf ng ot ni nj nk ou nm nn no ov nq nr ns fj bk">This tutorial is contributed by me, <a class="af qn" href="https://mmore500.com/" rel="noopener ugc nofollow" target="_blank">Matthew Andres Moreno</a>.</p><figure class="ml mm mn mo mp mq mi mj paragraph-image"><div class="mi mj qo"><img src="../Images/ed1a0cffeed1577a791942f2768ce582.png" data-original-src="https://miro.medium.com/v2/resize:fit:1254/format:webp/0*Mp68_z9aOdCUEnaC.jpeg"/></div></figure><p id="1285" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">I currently serve as a postdoctoral scholar at the <a class="af qn" href="https://umich.edu" rel="noopener ugc nofollow" target="_blank">University of Michigan</a>, where my work is supported by the Eric and Wendy Schmidt AI in Science Postdoctoral Fellowship, a Schmidt Futures program.</p><p id="772d" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">My appointment is split between the university’s Ecology and Evolutionary Biology Department, the Center for the Study of Complexity, and the Michigan Institute for Data Science.</p><p id="414c" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Find me on Twitter as <a class="af qn" href="https://twitter.com/morenomatthewa" rel="noopener ugc nofollow" target="_blank">@MorenoMatthewA</a> and on GitHub as <a class="af qn" href="https://github.com/mmore500/" rel="noopener ugc nofollow" target="_blank">@mmore500</a>.</p><p id="7118" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk"><em class="nt">disclosure:</em> I am the author of the <em class="nt">outset</em> library.</p><h1 id="85fd" class="nv nw fq bf nx ny nz gq oa ob oc gt od oe of og oh oi oj ok ol om on oo op oq bk">Citations</h1><p id="4155" class="pw-post-body-paragraph mx my fq mz b go or nb nc gr os ne nf ng ot ni nj nk ou nm nn no ov nq nr ns fj bk"><em class="nt">J. D. Hunter, “Matplotlib: A 2D Graphics Environment”, Computing in Science &amp; Engineering, vol. 9, no. 3, pp. 90–95, 2007. </em><a class="af qn" href="https://doi.org/10.1109/MCSE.2007.55" rel="noopener ugc nofollow" target="_blank"><em class="nt">https://doi.org/10.1109/MCSE.2007.55</em></a></p><p id="be88" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk"><em class="nt">Matthew Andres Moreno. (2023). mmore500/outset. Zenodo. </em><a class="af qn" href="https://doi.org/10.5281/zenodo.10426106" rel="noopener ugc nofollow" target="_blank"><em class="nt">https://doi.org/10.5281/zenodo.10426106</em></a></p><h1 id="9791" class="nv nw fq bf nx ny nz gq oa ob oc gt od oe of og oh oi oj ok ol om on oo op oq bk">Appendix</h1><p id="4da6" class="pw-post-body-paragraph mx my fq mz b go or nb nc gr os ne nf ng ot ni nj nk ou nm nn no ov nq nr ns fj bk">To install dependencies for code snippets in this article,</p><pre class="ml mm mn mo mp pw pc px bp py bb bk"><span id="f136" class="pz nw fq pc b bg qa qb l qc qd">python3 -m pip install \<br/>    matplotlib `# ==3.8.2`\<br/>    numpy `# ==1.26.2` \<br/>    outset `# ==0.1.8`</span></pre><p id="07df" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk"><em class="nt">All images are works of the author.</em></p></div></div></div></div>    
</body>
</html>