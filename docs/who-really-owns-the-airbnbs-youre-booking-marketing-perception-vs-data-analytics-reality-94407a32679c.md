# è°çœŸæ­£æ‹¥æœ‰ä½ é¢„è®¢çš„Airbnbæˆ¿æºï¼Ÿâ€”â€”è¥é”€è®¤çŸ¥ä¸æ•°æ®åˆ†æç°å®

> åŸæ–‡ï¼š[https://towardsdatascience.com/who-really-owns-the-airbnbs-youre-booking-marketing-perception-vs-data-analytics-reality-94407a32679c?source=collection_archive---------0-----------------------#2024-10-03](https://towardsdatascience.com/who-really-owns-the-airbnbs-youre-booking-marketing-perception-vs-data-analytics-reality-94407a32679c?source=collection_archive---------0-----------------------#2024-10-03)

## åœ¨è¿‡å»çš„20å¹´é‡Œï¼ŒAirbnbæŠ•å…¥äº†æ•°åäº¿ç¾å…ƒç”¨äºå“ç‰Œå»ºè®¾ï¼Œå®£æ‰¬å…¶ä½œä¸ºä¸€ç§çœŸå®ã€æ–°é¢–ã€ç¤¾åŒºä¸»å¯¼çš„æ›¿ä»£é…’åº—çš„å½¢è±¡ã€‚ä½†ï¼Œå®ƒçœŸçš„æ˜¯è¿™æ ·å—ï¼Ÿ

[](https://medium.com/@gordunanna?source=post_page---byline--94407a32679c--------------------------------)[![Anna Gordun Peiro](../Images/874ec5096d61e6345104026a4cf602e9.png)](https://medium.com/@gordunanna?source=post_page---byline--94407a32679c--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--94407a32679c--------------------------------)[![Towards Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--94407a32679c--------------------------------) [Anna Gordun Peiro](https://medium.com/@gordunanna?source=post_page---byline--94407a32679c--------------------------------)

Â·å‘è¡¨äº[Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--94407a32679c--------------------------------) Â·é˜…è¯»æ—¶é•¿8åˆ†é’ŸÂ·2024å¹´10æœˆ3æ—¥

--

åœ¨è¿™ç¯‡æ–‡ç« ä¸­ï¼Œæˆ‘å°†ä½¿ç”¨[InsideAirbnb](https://insideairbnb.com/)çš„æ•°æ®æ¥æ­ç¤ºAirbnbçš„æ‰€æœ‰æƒæ¨¡å¼ã€‚æ¥ç€ï¼Œæˆ‘ä¼šå¸¦ä½ èµ°ä¸€éæˆ‘å¾—å‡ºç»“è®ºçš„è¿‡ç¨‹ï¼Œè¿™æ ·ä½ ä¹Ÿå¯ä»¥å¯¹ä½ æ‰€åœ¨çš„åŸå¸‚è¿›è¡Œç±»ä¼¼çš„åˆ†æã€‚

> [**Inside Airbnb**](https://insideairbnb.com/)æ˜¯ä¸€ä¸ªä½¿å‘½é©±åŠ¨çš„é¡¹ç›®ï¼Œæä¾›å…³äºAirbnbå¯¹ä½å®…ç¤¾åŒºå½±å“çš„æ•°æ®å’Œå€¡å¯¼ã€‚æ‰€æœ‰æ•°æ®éƒ½ä½¿ç”¨[åˆ›æ„å…±äº«ç½²å 4.0 å›½é™…è®¸å¯åè®®](http://creativecommons.org/licenses/by/4.0/)è¿›è¡Œè®¸å¯ã€‚

æˆ‘ç›¸ä¿¡ä½ ä¸€å®šè§è¿‡é‚£äº›Airbnbå¹¿å‘Šï¼Œå¹¿å‘Šä¸­æ˜¯é¢å¸¦ç¬‘å®¹çš„æˆ¿ä¸œåœ¨å……æ»¡æ—…æ¸¸æ°”æ¯çš„é‚»é‡Œæ¬¢è¿å®¢äººã€‚å¦‚æœä½ æ²¡è§è¿‡ï¼Œå¯ä»¥çœ‹ä¸€ä¸‹è¿™ä¸ªï¼š

æˆ‘ä¸ªäººåœ¨Airbnbä¸Šå·²ç»å¾…äº†è¶…è¿‡5å¹´ï¼Œå°½ç®¡æˆ‘ä½è¿‡ä¸€äº›éå¸¸ç‹¬ç‰¹å’ŒçœŸå®çš„åœ°æ–¹ï¼ˆæˆ‘æœ€å–œæ¬¢çš„å¿…é¡»æ˜¯é—¨å¤–æœ‰é©¬çš„ç‰§ç¾Šäººå°å±‹ï¼‰ï¼Œä½†æˆ‘æœ€è¿‘æ„è¯†åˆ°ï¼Œæˆ‘æœ€è¿‘çš„ä½“éªŒå¹¶æ²¡æœ‰è¾¾åˆ°Airbnbå¹¿å‘Šæ‰€å®£ä¼ çš„é¢„æœŸã€‚

ä¸Šå‘¨æˆ‘åœ¨Airbnbä½äº†ä¸€ä¸ªå‘¨æœ«ã€‚æˆ‘è¿›è¡Œäº†ä¸€æ¬¡å°å‹å¯»å®æ´»åŠ¨ï¼Œè§£é”äº†è®¸å¤šæŒ‚é”æ‰èƒ½æ‰¾åˆ°é’¥åŒ™ã€‚æˆ‘æ‰“å¼€é—¨ï¼Œè¿›å…¥äº†ä¸€ä¸ªä¸€å°˜ä¸æŸ“çš„å…¬å¯“ï¼Œå’Œç…§ç‰‡ä¸­çš„ä¸€æ¨¡ä¸€æ ·ã€‚ä½†æˆ‘å¾ˆæƒŠè®¶åœ°å‘ç°æ²¡æœ‰ä¹¦ç±æˆ–èœ¡çƒ›ã€‚å®ƒå®Œå…¨ç©ºè¡è¡çš„ï¼Œå°±åƒä»æ¥æ²¡æœ‰äººä½è¿‡ä¸€æ ·ã€‚ç¬¬äºŒå¤©ï¼Œæˆ‘æ²¡æœ‰é‡åˆ°ä»»ä½•é‚»å±…ã€‚æˆ‘æ²¡æœ‰æ”¶åˆ°æˆ¿ä¸œçš„é¤é¦†æ¨èã€‚æœ€åä¸€å¤©ç¦»å¼€æ—¶ï¼Œæˆ‘æŠŠé’¥åŒ™æ”¾åœ¨é‡Œé¢ï¼Œæ²¡æœ‰äººå‘æˆ‘é“åˆ«ã€‚æˆ‘æƒ³ï¼Œæˆ‘æ˜¯ä¸æ˜¯ä½åœ¨äº†ä¸€ä¸ªé…’åº—é‡Œï¼Ÿè¿™å°±æ˜¯Airbnbå˜æˆçš„æ ·å­å—ï¼Ÿ

# **Airbnbå¸Œæœ›ä½ è®¤ä¸ºçš„äº‹æƒ…**

Airbnbä¸“æ³¨äºåƒå½“åœ°äººä¸€æ ·ä½“éªŒç”Ÿæ´»ï¼Œæˆ–è€…ä»–ä»¬æ‰€è¯´çš„ï¼šâ€œçœŸæ­£å±äºçš„æ„Ÿè§‰â€ï¼Œè¿™ä¸€ç‚¹åœ¨ä»–ä»¬çš„è®¸å¤šå¹¿å‘Šæ´»åŠ¨ä¸­å¾—åˆ°äº†ä½“ç°ï¼š

ä½åœ¨é‚£é‡Œï¼ŒAirbnbçš„2016å¹´å¹¿å‘Šæ´»åŠ¨

> ä½åœ¨é‚£é‡Œï¼Œå› ä¸ºå½“ä½ ä½åœ¨å·´é»æ—¶ï¼Œä½ æœ‰è‡ªå·±çš„å®¶ã€‚

è¿™åˆ™ç²¾å¿ƒç­–åˆ’çš„å¹¿å‘Šå®Œç¾åœ°ä½“ç°äº†Airbnbçš„ä»·å€¼ä¸»å¼ ï¼šåƒå½“åœ°äººä¸€æ ·ç”Ÿæ´»ï¼ŒæŠ›å¼€é‚£äº›æ²¡æœ‰çµé­‚ã€æ ‡å‡†åŒ–çš„é…’åº—é¢„è®¢ã€‚ç»§æ‰¿æµªæ¼«åŒ–çš„æœ¬åœ°ä½“éªŒä¹‹åï¼ŒAirbnbçš„è¥é”€æç»˜äº†æˆ¿ä¸œä¸å®¢äººä¹‹é—´å€¼å¾—ä¿¡èµ–å’ŒçœŸè¯šçš„å…³ç³»ã€‚

æ‰€ä»¥ä¸å¥‡æ€ªï¼Œåœ¨æˆ‘ä¸Šæ¬¡æ—…è¡Œæ—¶ï¼Œæˆ‘æ„Ÿè§‰æœ‰äº›è¢«æ¬ºéª—äº†ã€‚æˆ‘é”™è¿‡äº†å®Œæ•´çš„Airbnbä½“éªŒã€‚è¿™æ¿€åŠ±æˆ‘ç ”ç©¶Airbnbçš„æˆ¿æºæ•°æ®ï¼Œä»¥å›ç­”æˆ‘è„‘æµ·ä¸­çº·é£çš„é—®é¢˜ï¼š

+   æˆ‘ä»¬çš„Airbnbä½“éªŒæ˜¯å¦å·²ç»å˜å¾—æ ‡å‡†åŒ–ï¼Œå¹¶ä¼˜åŒ–äº†æœ€å¤§åˆ©æ¶¦ï¼Ÿ

+   Airbnbç¤¾åŒºçš„æœ¬è´¨æ¶ˆå¤±äº†å—ï¼Ÿ

# **ç°å®**

å¤šæˆ¿äº§æ‰€æœ‰æƒæ˜¯æˆ‘ä»¬è¿™äº›å®¢äººæ˜¯å¦èƒ½çœŸæ­£ä½“éªŒåˆ°â€œAirbnbä½“éªŒâ€çš„è½¬æŠ˜ç‚¹ã€‚

**ä¸ºä»€ä¹ˆï¼Ÿ**

å› ä¸ºï¼Œå½“æˆ‘ä»¬ä»â€œæˆ¿åœ°äº§æŠ•èµ„è€…â€æˆ–æ‹¥æœ‰å¤§é‡æˆ¿æºçš„æˆ¿ä¸œé‚£é‡Œé¢„è®¢ä½å®¿æ—¶ï¼Œæˆ‘ä»¬å¾ˆå¯èƒ½æ˜¯åœ¨å…¥ä½ä¸€ç§ç±»ä¼¼é…’åº—çš„å•†ä¸šæ¨¡å¼ï¼Œè¿™äº›äººè´­ä¹°äº†éå¸ƒåŸå¸‚çš„å…¬å¯“æ¥å‡ºç§Ÿã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬æˆ¿ä¸œçš„åŠ¨æœºä¸»è¦æ˜¯ç»æµåˆ©ç›Šã€‚æˆ‘ä»¬çš„ä½å®¿å°†æ›´å¤šåœ°è¢«ä¼˜åŒ–ä¸ºç›ˆåˆ©ï¼Œè€Œä¸æ˜¯Airbnbé€šè¿‡å…¶è¥é”€æ‰¿è¯ºçš„é‚£ç§ä¸ªäººåŒ–ã€åœ°æ–¹æ€§çš„æ°›å›´ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼Œå”¯ä¸€ä¸é…’åº—ä½å®¿çš„çœŸå®åŒºåˆ«å°±æ˜¯æœ‰ä¸€ä¸ªå¨æˆ¿å¯ä¾›ä½¿ç”¨ã€‚

ä¸ºäº†åˆ†æä¸åŒå±‚æ¬¡çš„å¤šæˆ¿äº§æ‰€æœ‰æƒï¼Œæˆ‘å°†æ‹¥æœ‰1-2ä¸ªæˆ¿æºçš„æˆ¿ä¸œå½’ç±»ä¸ºä¸ªäººï¼Œè€Œæ‹¥æœ‰è¶…è¿‡3ä¸ªæˆ¿æºçš„åˆ™å½’ç±»ä¸ºä¸“ä¸šæˆ¿ä¸œã€‚

ä¸ºäº†è¯æ˜æˆ‘çš„è§‚ç‚¹â€”â€”Airbnbä½“éªŒå¯èƒ½åªæ˜¯ä¸€ä¸ªæ„ŸçŸ¥ï¼Œæˆ‘è®¿é—®äº†æ¥è‡ªæ¬§æ´²15ä¸ªåŸå¸‚çš„æ•°æ®é›†ï¼Œå¹¶è¿›è¡Œäº†æ•°æ®åˆ†æï¼Œä»¥æ•æ‰ä¸“ä¸šæˆ¿ä¸œä¸ä¸ªäººæˆ¿ä¸œçš„æ™®åŠæƒ…å†µï¼ˆ*æ‰€æœ‰è¯¦ç»†ä¿¡æ¯å’Œä»£ç å°†åœ¨ä¸‹ä¸€èŠ‚æä¾›*ï¼‰ã€‚ä»¥ä¸‹æ˜¯ç»“æœï¼š

![](../Images/a92b14256e5716d6095296620a117f55.png)

æ¯ä¸ªæ¡å½¢å›¾ä»£è¡¨ä¸€ä¸ªä¸åŒçš„åŸå¸‚ï¼Œä¸”å¯è§†åŒ–è¢«åˆ†ä¸ºä¸¤éƒ¨åˆ†ï¼šå·¦ä¾§ï¼ˆ**ç»¿è‰²**ï¼‰è¡¨ç¤ºç”±**ä¸ªäºº**æ‹¥æœ‰çš„æˆ¿æºç™¾åˆ†æ¯”ï¼Œå³ä¾§ï¼ˆ**äº®è‰²**ï¼‰è¡¨ç¤ºç”±**ä¸“ä¸š**æˆ¿ä¸œæ‹¥æœ‰çš„æˆ¿æºç™¾åˆ†æ¯”ã€‚æ¯ä¸ªæˆ¿ä¸œçš„æˆ¿äº§æ•°é‡è¢«åˆ†ä¸º1, 2, +2, +5, +10å’Œ+100ç±»ã€‚æˆ‘é€‰æ‹©çš„ä¸€äº›åŸå¸‚æœ‰ä¸¥æ ¼çš„ä½å®¿ç›‘ç®¡æ”¿ç­–ï¼Œé™åˆ¶äº†æ¯å¹´å¯ä»¥å‡ºç§Ÿçš„å¤©æ•°ï¼ˆä¾‹å¦‚ï¼šä½›ç½—ä¼¦è¨ã€ä¼¦æ•¦ã€çˆ±ä¸å ¡ã€ç½—é©¬ã€å·´é»ã€å“¥æœ¬å“ˆæ ¹å’Œé˜¿å§†æ–¯ç‰¹ä¸¹ï¼‰ã€‚æœ€åï¼Œå›¾è¡¨çš„æ’åºæ˜¯æ ¹æ®ä¸“ä¸šæˆ¿ä¸œæ‹¥æœ‰çš„ä»½é¢ä»é«˜åˆ°ä½ã€‚

ä»å›¾è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ï¼š

+   åœ¨æˆ‘çš„åˆ†æä¸­ï¼Œå¤§å¤šæ•°Airbnbæˆ¿æºæ˜¯ç”±ä¸“ä¸šæˆ¿ä¸œæ‹¥æœ‰çš„ã€‚

+   **å·´å¡ç½—é‚£**çš„ä¸“ä¸šæˆ¿ä¸œæ‹¥æœ‰ä»½é¢æœ€é«˜ï¼Œè¾¾åˆ°74%ï¼Œè€Œä¸ªäººæˆ¿ä¸œå 26%ã€‚

+   **é˜¿å§†æ–¯ç‰¹ä¸¹**çš„ä¸“ä¸šæˆ¿ä¸œæ‹¥æœ‰ä»½é¢æœ€ä½ï¼Œä»…ä¸º5%ï¼Œå…¶ä½™95%çš„æˆ¿æºç”±ä¸ªäººæ‹¥æœ‰ï¼Œè¿™å¯èƒ½æ˜¯ç”±äºæ”¿åºœä¸¥æ ¼çš„ç§Ÿèµæ³•è§„ï¼Œé™åˆ¶æ¯å¹´æœ€å¤šåªèƒ½å‡ºç§Ÿ30å¤©ã€‚

+   **æ”¾æ¾çš„Airbnbç›‘ç®¡**ä½¿å¾—ä¸“ä¸šæˆ¿ä¸œå¯ä»¥ä¸»å¯¼å¸‚åœºã€‚

+   **ä¸¥æ ¼Airbnbç›‘ç®¡**çš„åŸå¸‚å¾€å¾€å°†ä¸“ä¸šæˆ¿ä¸œæ’é™¤åœ¨å¤–ã€‚

+   ä¼¼ä¹æ²¡æœ‰è®¾å®šæ¯ä¸ªæˆ¿ä¸œæœ€å¤šå¯ä»¥æ‹¥æœ‰å¤šå°‘æˆ¿æºçš„é™åˆ¶ã€‚

æ ¹æ®Airbnbçš„è¯´æ³•ï¼Œæˆ‘ä»¬ä¸ä»–ä»¬çš„ä½“éªŒåº”è¯¥æ˜¯çœŸå®çš„ã€‚ç„¶è€Œï¼Œé€šè¿‡æŸ¥çœ‹æ•°æ®ï¼Œæˆ‘ä»¬å‘ç°**äº”åˆ†ä¹‹ä¸‰çš„æˆ¿æº**æ˜¯ç”±ç§Ÿèµ**æŠ•èµ„è€…**æ‹¥æœ‰çš„ç±»ä¼¼é…’åº—çš„å…¬å¯“ï¼ˆé™¤éç§Ÿèµå—åˆ°ç›‘ç®¡ï¼‰ã€‚è¿™ç§è¥é”€è®¤çŸ¥ä¸ç°å®ä¹‹é—´çš„è„±èŠ‚ï¼Œä¸ä»…çªæ˜¾äº†å“ç‰Œè¥é”€åœ¨æˆ‘ä»¬è§‚æ„Ÿä¸­çš„å½±å“åŠ›ï¼Œè¿˜å¼ºè°ƒäº†InsideAirbnbç­‰ä¸¾æªçš„é‡è¦æ€§ã€‚

æˆ‘ç°åœ¨çŸ¥é“ä¸‹æ¬¡å…¥ä½æ—¶è¯¥æœŸå¾…ä»€ä¹ˆäº†â€”â€”ä½ å‘¢ï¼Ÿä½ ä¼šä½“éªŒåˆ°å®Œæ•´çš„æŒ‚é”å¯»å®ä½“éªŒå—ï¼Ÿå¦‚æœä½ æ„Ÿå…´è¶£ï¼Œå¯ä»¥æ·±å…¥äº†è§£ä¸€ä¸‹ç¼–ç ï¼

# **å¦‚ä½•å¤åˆ¶æˆ‘çš„ç ”ç©¶åˆ°ä½ çš„åŸå¸‚ï¼Ÿ**

æˆ‘å†™äº†ä¸€ä»½æŒ‡å—ï¼Œä»‹ç»äº†å¦‚ä½•æ‰§è¡Œæ•°æ®åˆ†æå¹¶ç”Ÿæˆä¸Šä¸€èŠ‚ä¸­çš„å›¾è¡¨ã€‚æˆ‘æ­£åœ¨ä½¿ç”¨å·´å¡ç½—é‚£å¸‚çš„æ•°æ®é›†æ¥è¯´æ˜ä¸åŒçš„æ•°æ®åˆ†ææ­¥éª¤ã€‚

ä¸‹è½½äº†æ¥è‡ªInsideAirbnbçš„listings.csv.gzæ–‡ä»¶åï¼Œæˆ‘ç›´æ¥åœ¨Pythonä¸­æ‰“å¼€äº†å®ƒä»¬ï¼Œæ²¡æœ‰è§£å‹ã€‚æˆ‘åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ä½¿ç”¨äº†Polarsï¼Œåªæ˜¯ä¸ºäº†ç†Ÿæ‚‰ç›¸å…³å‘½ä»¤ï¼ˆ*ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨Pandas*ï¼‰ï¼š

```py
import polars as pl
df=pl.read_csv('listings.csv.gz')
```

ä»¥ä¸‹æ˜¯æˆ‘ç”¨äºåˆ†æçš„åŸå¸‚ä»¥åŠæ¯ä¸ªæ•°æ®é›†ä¸­çš„æˆ¿æºæ•°é‡ï¼š

![](../Images/e6ebbf09b2cb1ede2bb6782ea7caf50b.png)

ç”¨äºåˆ†æçš„åŸå¸‚ã€‚å›¾ç‰‡ç”±ä½œè€…æä¾›

å¦‚æœä½ å–œæ¬¢è¿™ä¸ªç´§å‡‘çš„æ°”æ³¡å›¾ï¼Œè®°å¾—æŸ¥çœ‹æˆ‘ä¸Šä¸€ç¯‡æ–‡ç« ï¼š

[](/i-found-a-hidden-gem-in-matplotlibs-library-packed-bubble-charts-in-python-d0f5d892beb7?source=post_page-----94407a32679c--------------------------------) [## æˆ‘åœ¨Matplotlibåº“ä¸­å‘ç°äº†ä¸€ä¸ªéšè—çš„å®çŸ³ï¼šPythonä¸­çš„ç´§å‡‘æ°”æ³¡å›¾

### æ˜¯å¦æ›¾æƒ³è¿‡è®¾è®¡é‚£äº›æ¼‚äº®çš„åŸºäºTableauçš„ç´§å‡‘æ°”æ³¡å›¾ï¼Ÿè·Ÿéšæ•™ç¨‹ï¼Œå­¦ä¹ å¦‚ä½•ä½¿ç”¨Matplotlibâ€¦

[towardsdatascience.com](/i-found-a-hidden-gem-in-matplotlibs-library-packed-bubble-charts-in-python-d0f5d892beb7?source=post_page-----94407a32679c--------------------------------)

é¦–æ¬¡æŸ¥çœ‹æ•°æ®é›†ï¼Œå®ƒå¤§è‡´æ˜¯è¿™æ ·çš„ï¼š

![](../Images/458805f8e6b8da369b42f634448630ab.png)

æ•°æ®æ¡†ç‰‡æ®µã€‚å›¾ç‰‡ç”±ä½œè€…æä¾›

å†…å®¹åŸºäºæ¯ä¸ªæˆ¿æºURLä¸­æä¾›çš„æ•°æ®ï¼Œå…¶ä¸­åŒ…å«æ¯ä¸ªæˆ¿æºçš„è¡Œå’Œ75åˆ—ï¼Œè¯¦ç»†è¯´æ˜äº†ä»æè¿°ã€é‚»é‡Œã€å§å®¤æ•°é‡ï¼Œåˆ°è¯„åˆ†ã€æœ€å°‘å…¥ä½å¤©æ•°å’Œä»·æ ¼ç­‰ä¿¡æ¯ã€‚

å¦‚å‰æ‰€è¿°ï¼Œå°½ç®¡è¯¥æ•°æ®é›†å…·æœ‰æ— é™æ½œåŠ›ï¼Œä½†æˆ‘å°†ä¸“æ³¨äºå¤šæˆ¿æºæ‰€æœ‰æƒçš„åˆ†æã€‚

+   **æ•°æ®åˆ†æ**

ä¸‹è½½æ•°æ®åï¼Œæ•°æ®æ¸…ç†å·¥ä½œå‡ ä¹ä¸ç”¨åšï¼š

1- è¿‡æ»¤â€œproperty_typeâ€ä¸ºâ€œEntire rental unitsâ€ä»¥ç­›é€‰æ‰æˆ¿é—´ç±»æˆ¿æºã€‚

2- è¿‡æ»¤â€œhas_availabilityâ€ä¸ºâ€œtâ€ï¼ˆTrueï¼‰ï¼Œä»¥å»é™¤éæ´»è·ƒçš„æˆ¿æºã€‚

```py
import polars as pl
#I renamed the listings.csv.gz file to cityname_listings.csv.gz.
df=pl.read_csv('barcelona_listings.csv.gz')
df=df.filter((pl.col('property_type')=="Entire rental unit")&(pl.col('has_availability')=="t"))
```

ä¸ºäº†å¤„ç†æ•°æ®ï¼Œæˆ‘å°†åŸå§‹æ•°æ®è½¬åŒ–ä¸ºä¸åŒçš„ç»“æ„ï¼Œä¾¿äºé‡åŒ–æ•°æ®é›†ä¸­æœ‰å¤šå°‘æˆ¿æºæ˜¯ç”±åŒä¸€ä½æˆ¿ä¸œæ‹¥æœ‰ã€‚æ¢å¥è¯è¯´ï¼Œè¡¡é‡æœ‰å¤šå°‘å·´å¡ç½—é‚£çš„æˆ¿æºæ˜¯ç”±å¤šæˆ¿ä¸œæ‹¥æœ‰çš„ã€‚è¿™æ˜¯æˆ‘çš„å¤„ç†æ–¹æ³•ï¼š

+   å¯¹â€œhost_idâ€åˆ—æ‰§è¡Œäº†`value_counts`æ“ä½œï¼Œä»¥ç»Ÿè®¡åŒä¸€host_idæ‹¥æœ‰å¤šå°‘ä¸ªæˆ¿æºã€‚

+   åˆ›å»ºäº†5ä¸ªä¸åŒçš„åŒºé—´æ¥é‡åŒ–å¤šæˆ¿æºçº§åˆ«ï¼š1å¤„æˆ¿æºã€2å¤„æˆ¿æºã€+2å¤„æˆ¿æºã€+5å¤„æˆ¿æºã€+10å¤„æˆ¿æºå’Œ+100å¤„æˆ¿æºã€‚

+   å¯¹æ¯ä¸ªhost_idçš„æˆ¿æºæ•°é‡ï¼ˆè¿ç»­å€¼ï¼‰è¿›è¡Œ`polars.cut`æ“ä½œï¼Œå°†å…¶åˆ†æˆæˆ‘è®¾å®šçš„ç¦»æ•£ç±»åˆ«ï¼ˆåŒºé—´ï¼‰ã€‚

```py
host_count=df['host_id'].value_counts().sort('count')
breaks = [1,2,5,10,100] 
labels = ['1','2','+2','+5','+10','+100']
host_count = host_count.with_columns(
    pl.col("count").cut(breaks=breaks, labels=labels, left_closed=False).alias("binned_counts")
)
host_count
```

è¿™æ˜¯ç»“æœã€‚Host_idã€æˆ¿æºæ•°é‡å’Œåˆ†ç±»ã€‚æ˜¾ç¤ºçš„æ•°æ®å¯¹åº”äºå·´å¡ç½—é‚£å¸‚ã€‚

![](../Images/b69ac293e595f0df8b21503008cdbd6a.png)

æˆ¿æºæ•°é‡åŒºé—´ç»Ÿè®¡ã€‚å›¾ç‰‡ç”±ä½œè€…æä¾›

> è¯·èŠ±ä¸€ç‚¹æ—¶é—´æ³¨æ„åˆ°host_idä¸º346367515ï¼ˆåˆ—è¡¨ä¸­çš„æœ€åä¸€ä½ï¼‰æ‹¥æœ‰406ä¸ªæˆ¿æºï¼Ÿæ­¤æ—¶ï¼ŒAirbnbç¤¾åŒºçš„æ°›å›´å¼€å§‹æ„Ÿè§‰åƒä¸€ç§å¹»è§‰äº†å—ï¼Ÿ

ä¸ºäº†å¾—åˆ°ä¸€ä¸ªä¸ä¾èµ–äºhost_idçš„åŸå¸‚æ¦‚å†µï¼Œæˆ‘å°†host_countæ•°æ®æ¡†ä¸åŸå§‹æ•°æ®æ¡†åˆå¹¶ï¼Œä»¥ä¾¿å°†æ¯ä¸ªæˆ¿æºåŒ¹é…åˆ°æ­£ç¡®çš„å¤šæˆ¿æºæ ‡ç­¾ã€‚ä¹‹åï¼Œåªéœ€è¦å¯¹æ¯ä¸ªæˆ¿æºæ ‡ç­¾è¿›è¡Œç®€å•çš„`value_counts()`æ“ä½œï¼Œå°±èƒ½å¾—åˆ°å±äºè¯¥ç±»åˆ«çš„æˆ¿æºæ€»æ•°ã€‚

æˆ‘è¿˜æ·»åŠ äº†ä¸€ä¸ªç™¾åˆ†æ¯”åˆ—ï¼Œä»¥é‡åŒ–æ¯ä¸ªæ ‡ç­¾çš„æƒé‡ã€‚

```py
df=df.join(host_count,on='host_id',how='left')

graph_data=df['binned_counts'].value_counts().sort('binned_counts')
total_sum=graph_data['count'].sum()
graph_data=graph_data.with_columns(((pl.col('count')/total_sum)*100).round().cast(pl.Int32).alias('percentage'))
```

![](../Images/51dc7c597be1a18da6d02d8ef09553bd.png)

æœ€ç»ˆæ•°æ®ç»“æœã€‚å›¾ç‰‡ç”±ä½œè€…æä¾›

åˆ«æ‹…å¿ƒï¼Œæˆ‘ä¹Ÿæ˜¯ä¸€ä¸ªè§†è§‰å‹çš„äººï¼Œè¿™é‡Œæ˜¯è¡¨æ ¼çš„å›¾å½¢å±•ç¤ºï¼š

```py
import plotly.express as px

palette=["#537c78","#7ba591","#cc222b","#f15b4c","#faa41b","#ffd45b"]

# I wrote the text_annotation manually cause I like modifying the x position
text_annotation=['19%','7%','10%','10%','37%','17%']
text_annotation_xpos=[17,5,8,8,35,15]
text_annotation_ypos=[5,4,3,2,1,0]
annotations_text=[
    dict(x=x,y=y,text=text,showarrow=False,font=dict(color="white",weight='bold',size=20))
    for x,y,text in zip(text_annotation_xpos,text_annotation_ypos,text_annotation)

]

fig = px.bar(graph_data, x="percentage",y='binned_counts',orientation='h',color='binned_counts',
             color_discrete_sequence=palette,
            category_orders={"binned_counts": ["1", "2", "+2","+5","+10","+100"]}
            )
fig.update_layout(
    height=700,
    width=1100,
    template='plotly_white',
    annotations=annotations_text,
    xaxis_title="% of listings",
    yaxis_title="Number of listings owned by the same host",
    title=dict(text="Prevalence of multi-property in Barcelona's airbnb listings<br><sup>% of airbnb listings in Barcelona owned by multiproperty hosts</sup>",font=dict(size=30)),
    font=dict(
        family="Franklin Gothic"),
    legend=dict(
        orientation='h',
        x=0.5,
        y=-0.125,
        xanchor='center',
        yanchor='bottom',
        title="Number of properties per host"
    ))

fig.update_yaxes(anchor='free',shift=-10,
                tickfont=dict(size=18,weight='normal'))

fig.show()
```

![](../Images/4072dc64b528545c1e669e00d1d238eb.png)

å·´å¡ç½—é‚£Airbnbçš„å¤šæˆ¿æºç°è±¡ã€‚å›¾ç‰‡ç”±ä½œè€…æä¾›

å›åˆ°æœ€åˆçš„é—®é¢˜ï¼šæˆ‘æ€ä¹ˆå¾—å‡ºç»“è®ºï¼Œå·´å¡ç½—é‚£çš„Airbnbç²¾é«“å·²ç»ä¸§å¤±ï¼Ÿ

+   å¤§å¤šæ•°æˆ¿æºï¼ˆ**64%**ï¼‰å±äºæ‹¥æœ‰è¶…è¿‡5å¤„æˆ¿æºçš„æˆ¿ä¸œã€‚**17%**çš„æˆ¿æºç”±æ‹¥æœ‰è¶…è¿‡100å¤„æˆ¿æºçš„æˆ¿ä¸œç®¡ç†ã€‚

+   åªæœ‰**26%**çš„æˆ¿æºå±äºä»…æ‹¥æœ‰1æˆ–2å¤„æˆ¿æºçš„æˆ¿ä¸œã€‚

å¦‚æœä½ å¸Œæœ›åŒæ—¶åˆ†æå¤šä¸ªåŸå¸‚ï¼Œå¯ä»¥ä½¿ç”¨ä¸€ä¸ªä¸€æ¬¡æ€§å®Œæˆæ‰€æœ‰æ¸…ç†å’Œå¤„ç†çš„å‡½æ•°ï¼š

```py
import polars as pl

def airbnb_per_host(file,ptype,neighbourhood):
    df=pl.read_csv(file)
    if neighbourhood:
        df=df.filter((pl.col('property_type')==ptype)&(pl.col('neighbourhood_group_cleansed')==neighbourhood)&
                    (pl.col('has_availability')=="t"))
    else:
        df=df.filter((pl.col('property_type')==ptype)&(pl.col('has_availability')=="t"))

    host_count=df['host_id'].value_counts().sort('count')
    breaks=[1,2,5,10,100] 
    labels=['1','2','+2','+5','+10','+100']
    host_count = host_count.with_columns(
    pl.col("count").cut(breaks=breaks, labels=labels, left_closed=False).alias("binned_counts"))

    df=df.join(host_count,on='host_id',how='left')

    graph_data=df['binned_counts'].value_counts().sort('binned_counts')
    total_sum=graph_data['count'].sum()
    graph_data=graph_data.with_columns(((pl.col('count')/total_sum)*100).alias('percentage'))

    return graph_data
```

ç„¶åä¸ºä½ æ–‡ä»¶å¤¹ä¸­çš„æ¯ä¸ªåŸå¸‚è¿è¡Œå®ƒï¼š

```py
import os
import glob

# please remember that I renamed my files to : cityname_listings.csv.gz
df_combined = pl.DataFrame({
        "binned_counts": pl.Series(dtype=pl.Categorical),
        "count": pl.Series(dtype=pl.UInt32),
        "percentage": pl.Series(dtype=pl.Float64),
        "city":pl.Series(dtype=pl.String)
    })

city_files =glob.glob("*.csv.gz")

for file in city_files:
    file_name=os.path.basename(file)
    city=file_name.split('_')[0]
    print('Scanning started for --->',city)

    data=airbnb_per_host(file,'Entire rental unit',None)

    data=data.with_columns(pl.lit(city.capitalize()).alias("city"))

    df_combined = pl.concat([df_combined, data], how="vertical")

print('Finished scanning of ' +str(len(city_files)) +' cities')
```

è¯·è®¿é—®æˆ‘çš„GitHubä»“åº“ï¼Œè·å–æ„å»ºæ­¤å›¾è¡¨çš„ä»£ç ï¼Œå› ä¸ºä»£ç æœ‰ç‚¹é•¿ï¼Œæ— æ³•åœ¨æ­¤é™„ä¸Šï¼š

![](../Images/a92b14256e5716d6095296620a117f55.png)

æœ€ç»ˆå¯¹æ¯”å›¾ã€‚å›¾ç‰‡ç”±ä½œè€…æä¾›

[](https://github.com/gopean-art/Airbnb-analysis?source=post_page-----94407a32679c--------------------------------) [## GitHub - gopean-art/Airbnb-analysis: airbnbæ–‡ç« 

### airbnbæ–‡ç« ã€‚é€šè¿‡åœ¨GitHubä¸Šåˆ›å»ºä¸€ä¸ªè´¦æˆ·ï¼Œå‚ä¸gopean-art/Airbnb-analysisçš„å¼€å‘ã€‚

github.com](https://github.com/gopean-art/Airbnb-analysis?source=post_page-----94407a32679c--------------------------------)

å°±è¿™æ ·ï¼

åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ä½ çš„æƒ³æ³•ï¼ŒåŒæ—¶ç¥ä½ åœ¨ä¸‹æ¬¡å…¥ä½æ—¶ï¼Œæ‹¥æœ‰ä¸€ä¸ªéå¸¸å……å®å’ŒçœŸå®çš„Airbnbä½“éªŒğŸ˜‰

*æœ¬æ–‡ä¸­çš„æ‰€æœ‰å›¾ç‰‡å’Œä»£ç å‡ç”±ä½œè€…æä¾›*
