- en: 'Visualizing Routes on Interactive Maps with Python: Part 1'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä½¿ç”¨Pythonåœ¨äº¤äº’å¼åœ°å›¾ä¸Šå¯è§†åŒ–è·¯çº¿ï¼šç¬¬ä¸€éƒ¨åˆ†
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/visualizing-routes-on-interactive-maps-with-python-part-1-44f8d25d0761?source=collection_archive---------2-----------------------#2024-01-16](https://towardsdatascience.com/visualizing-routes-on-interactive-maps-with-python-part-1-44f8d25d0761?source=collection_archive---------2-----------------------#2024-01-16)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/visualizing-routes-on-interactive-maps-with-python-part-1-44f8d25d0761?source=collection_archive---------2-----------------------#2024-01-16](https://towardsdatascience.com/visualizing-routes-on-interactive-maps-with-python-part-1-44f8d25d0761?source=collection_archive---------2-----------------------#2024-01-16)
- en: A pragmatic guide to interactive data visualization for transportation problems
    with Folium
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä¸€æœ¬å…³äºä½¿ç”¨ Folium è§£å†³äº¤é€šé—®é¢˜çš„äº¤äº’å¼æ•°æ®å¯è§†åŒ–çš„å®ç”¨æŒ‡å—
- en: '[](https://medium.com/@carlosjuribe?source=post_page---byline--44f8d25d0761--------------------------------)[![Carlos
    Jimenez Uribe](../Images/902c5f4ac5d404dd99916f145be6756c.png)](https://medium.com/@carlosjuribe?source=post_page---byline--44f8d25d0761--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--44f8d25d0761--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--44f8d25d0761--------------------------------)
    [Carlos Jimenez Uribe](https://medium.com/@carlosjuribe?source=post_page---byline--44f8d25d0761--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@carlosjuribe?source=post_page---byline--44f8d25d0761--------------------------------)[![Carlos
    Jimenez Uribe](../Images/902c5f4ac5d404dd99916f145be6756c.png)](https://medium.com/@carlosjuribe?source=post_page---byline--44f8d25d0761--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--44f8d25d0761--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--44f8d25d0761--------------------------------)
    [Carlos Jimenez Uribe](https://medium.com/@carlosjuribe?source=post_page---byline--44f8d25d0761--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--44f8d25d0761--------------------------------)
    Â·20 min readÂ·Jan 16, 2024
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--44f8d25d0761--------------------------------)
    Â·é˜…è¯»æ—¶é—´ï¼š20åˆ†é’ŸÂ·2024å¹´1æœˆ16æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/3d98e632e08ebe44fd2fb3edfc7b2b72.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3d98e632e08ebe44fd2fb3edfc7b2b72.png)'
- en: 'Image generated by DALLÂ·E 3 with authorâ€™s prompt: â€œa route in Paris on top
    of an interactive mapâ€'
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: ç”± DALLÂ·E 3 æ ¹æ®ä½œè€…çš„æç¤ºç”Ÿæˆçš„å›¾åƒï¼šâ€œå·´é»çš„ä¸€ä¸ªè·¯çº¿ï¼Œä½äºäº¤äº’å¼åœ°å›¾ä¹‹ä¸Šâ€
- en: 'ğŸ‘ï¸ **This is article #6 of the series covering the project â€œ**[**An Intelligent
    Decision Support System for Tourism in Python**](https://medium.com/@carlosjuribe/list/an-intelligent-decision-support-system-for-tourism-in-python-b6ba165b4236)**â€.**
    Please note **the present article is self-contained and independent of the previous
    ones in the series**, so you can read it and code along without needing to read
    the previous ones. Just ignore any references to previous articles when you encounter
    them.'
  id: totrans-8
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ğŸ‘ï¸ **è¿™æ˜¯ç³»åˆ—æ–‡ç« ä¸­çš„ç¬¬6ç¯‡ï¼Œæ¶µç›–äº†é¡¹ç›®â€œ**[**Pythonä¸­çš„æ™ºèƒ½æ—…æ¸¸å†³ç­–æ”¯æŒç³»ç»Ÿ**](https://medium.com/@carlosjuribe/list/an-intelligent-decision-support-system-for-tourism-in-python-b6ba165b4236)**â€**ã€‚è¯·æ³¨æ„ï¼Œ**æœ¬æ–‡æ˜¯ç‹¬ç«‹ä¸”è‡ªè¶³çš„ï¼Œä¸ä¾èµ–äºç³»åˆ—ä¸­çš„å‰å‡ ç¯‡æ–‡ç« **ï¼Œå› æ­¤ä½ å¯ä»¥ç›´æ¥é˜…è¯»æœ¬æ–‡å¹¶è·Ÿéšä»£ç è¿›è¡Œæ“ä½œï¼Œè€Œä¸å¿…é˜…è¯»ä¹‹å‰çš„æ–‡ç« ã€‚é‡åˆ°æ¶‰åŠå‰å‡ ç¯‡æ–‡ç« çš„ä»»ä½•å†…å®¹æ—¶ï¼Œè¯·å¿½ç•¥å®ƒä»¬ã€‚
- en: 'This article is two things at once: **a tutorial on using** `**folium**` **to
    display routes**, and **a guide to *incremental* data visualization**, where the
    priorities are to (1) have something *working*, then (2) something *useful*, and
    only then (3) something *beautiful*. As such, this guide will be a valuable tool
    for people developing **general routing applications**, especially when the goal
    is **to have a prototype, fast**. One such routing application is [**trip plan
    optimization**](https://medium.com/@carlosjuribe/plan-an-optimal-trip-for-your-next-holidays-with-the-help-of-operations-research-and-python-481b1ea38fef),
    the unifying theme of this article series. I invite you to take a look at it if
    you want to learn about how to design and incrementally build a decision support
    system from scratch. If, however, you only want to **visualize routes in an interactive
    way for faster time-to-insights**, this article will demonstrate **a quick but
    powerful approach** to doing soâ€”because I know you need to get it *done*, and
    then get it *good*. Part 2 will demonstrate a **slower but more robust approach**
    to doing the same.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æ–‡æ˜¯ä¸¤ä»¶äº‹çš„ç»“åˆï¼š**ä¸€ä¸ªä½¿ç”¨** `**folium**` **æ˜¾ç¤ºè·¯çº¿çš„æ•™ç¨‹**ï¼Œä»¥åŠ**ä¸€ä¸ªå¢é‡å¼æ•°æ®å¯è§†åŒ–çš„æŒ‡å—**ï¼Œå…¶ä¼˜å…ˆé¡ºåºæ˜¯ï¼ˆ1ï¼‰å…ˆæœ‰â€œå¯ç”¨çš„â€ä¸œè¥¿ï¼Œç„¶åï¼ˆ2ï¼‰æœ‰â€œæœ‰ç”¨çš„â€ä¸œè¥¿ï¼Œæœ€åï¼ˆ3ï¼‰æ‰æ˜¯â€œç¾è§‚çš„â€ä¸œè¥¿ã€‚å› æ­¤ï¼Œè¿™ä»½æŒ‡å—å°†æ˜¯å¼€å‘**é€šç”¨è·¯çº¿åº”ç”¨**çš„å®è´µå·¥å…·ï¼Œå°¤å…¶æ˜¯å½“ç›®æ ‡æ˜¯**å¿«é€Ÿå¾—åˆ°ä¸€ä¸ªåŸå‹**æ—¶ã€‚ä¸€ä¸ªè¿™æ ·çš„è·¯çº¿åº”ç”¨æ˜¯[**æ—…è¡Œè®¡åˆ’ä¼˜åŒ–**](https://medium.com/@carlosjuribe/plan-an-optimal-trip-for-your-next-holidays-with-the-help-of-operations-research-and-python-481b1ea38fef)ï¼Œè¿™æ˜¯æœ¬ç³»åˆ—æ–‡ç« çš„ç»Ÿä¸€ä¸»é¢˜ã€‚å¦‚æœä½ æƒ³äº†è§£å¦‚ä½•ä»å¤´å¼€å§‹è®¾è®¡å’Œå¢é‡æ„å»ºä¸€ä¸ªå†³ç­–æ”¯æŒç³»ç»Ÿï¼Œæˆ‘é‚€è¯·ä½ æŸ¥çœ‹å®ƒã€‚å¦‚æœä½ åªæ˜¯æƒ³**ä»¥äº’åŠ¨æ–¹å¼å¯è§†åŒ–è·¯çº¿ï¼Œä»¥æ›´å¿«åœ°è·å¾—æ´å¯Ÿ**ï¼Œé‚£ä¹ˆæœ¬æ–‡å°†å±•ç¤º**ä¸€ç§å¿«é€Ÿä½†å¼ºå¤§çš„æ–¹æ³•**æ¥åšåˆ°è¿™ä¸€ç‚¹â€”â€”å› ä¸ºæˆ‘çŸ¥é“ä½ éœ€è¦å…ˆè®©å®ƒâ€œå®Œæˆâ€ï¼Œç„¶åå†è®©å®ƒâ€œåšå¥½â€ã€‚ç¬¬äºŒéƒ¨åˆ†å°†å±•ç¤º**ä¸€ç§è¾ƒæ…¢ä½†æ›´ç¨³å¥çš„æ–¹æ³•**æ¥åšåŒæ ·çš„äº‹ã€‚
- en: Table of contents
  id: totrans-10
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç›®å½•
- en: '[1\. Previous sprint recap](#136d)'
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[1\. ä¸Šä¸€è½®å†²åˆºå›é¡¾](#136d)'
- en: '[2\. Data and dependencies set up](#fe23)'
  id: totrans-12
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[2\. æ•°æ®å’Œä¾èµ–é¡¹è®¾ç½®](#fe23)'
- en: '[3\. Showing routes on maps: a pragmatic approach](#aa07)'
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[3\. åœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºè·¯çº¿ï¼šåŠ¡å®çš„åšæ³•](#aa07)'
- en: '[3.1 Displaying **sites**](#85d2)'
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[3.1 æ˜¾ç¤º **ç«™ç‚¹**](#85d2)'
- en: '[3.2 Displaying **routes**](#9910)'
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[3.2 æ˜¾ç¤º **è·¯çº¿**](#9910)'
- en: '[3.3 Enriching the map with **interactive information**](#601f)'
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[3.3 ä½¿ç”¨ **äº’åŠ¨ä¿¡æ¯** ä¸°å¯Œåœ°å›¾](#601f)'
- en: '[3.4 Dealing with closed routes, a.k.a. **tours**](#97a1)'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[3.4 å¤„ç†å°é—­è·¯çº¿ï¼Œå³ **æ—…æ¸¸è·¯çº¿**](#97a1)'
- en: '[3.5 **Bonus:** Adding **KPIs** to the map](#d73b)'
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '[3.5 **å¥–åŠ±ï¼š** å°† **KPI** æ·»åŠ åˆ°åœ°å›¾ä¸Š](#d73b)'
- en: '[4\. Conclusion (or planning for next sprint)](#6468)'
  id: totrans-19
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: '[4\. ç»“è®ºï¼ˆæˆ–ä¸ºä¸‹ä¸€ä¸ªå†²åˆºåšè®¡åˆ’ï¼‰](#6468)'
- en: 1\. Previous sprint recap
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 1\. ä¸Šä¸€è½®å†²åˆºå›é¡¾
- en: 'In the [previous article](/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9),
    we created an optimizer class *Ã  la* scikit-learn to solve the Traveling Salesman
    Problem (TSP) for an arbitrary set of locations in just one simple method call.
    Long story short, if you have a dataframe with site locations, **this optimizer
    can be â€œfittedâ€ to those locations to automatically provide the optimal (minimal
    distance) tour**. For more details see:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨[ä¸Šä¸€ç¯‡æ–‡ç« ](/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9)ä¸­ï¼Œæˆ‘ä»¬åˆ›å»ºäº†ä¸€ä¸ªç±»ä¼¼äºscikit-learnçš„ä¼˜åŒ–å™¨ç±»ï¼Œé€šè¿‡ä¸€æ¬¡ç®€å•çš„æ–¹æ³•è°ƒç”¨å°±èƒ½è§£å†³ä»»æ„ä¸€ç»„ä½ç½®çš„æ—…è¡Œå•†é—®é¢˜ï¼ˆTSPï¼‰ã€‚ç®€è€Œè¨€ä¹‹ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªåŒ…å«ç«™ç‚¹ä½ç½®çš„æ•°æ®æ¡†ï¼Œ**è¿™ä¸ªä¼˜åŒ–å™¨å¯ä»¥è¢«â€œæ‹Ÿåˆâ€åˆ°è¿™äº›ä½ç½®ï¼Œä»è€Œè‡ªåŠ¨æä¾›æœ€ä¼˜çš„ï¼ˆæœ€çŸ­è·ç¦»ï¼‰æ—…æ¸¸è·¯çº¿**ã€‚æ›´å¤šç»†èŠ‚è¯·å‚è§ï¼š
- en: '[](/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9?source=post_page-----44f8d25d0761--------------------------------)
    [## A classy approach to solving Traveling Salesman Problems effectively with
    Python'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9?source=post_page-----44f8d25d0761--------------------------------)
    [## ä¸€ç§ä¼˜é›…çš„è§£å†³æ—…è¡Œå•†é—®é¢˜çš„æ–¹æ³•ï¼Œä½¿ç”¨Pythonæœ‰æ•ˆè§£å†³'
- en: Implementing the TSP model in a scikit-learn-like fashion to ease the building
    and solving of routing optimizationâ€¦
  id: totrans-23
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ä»¥ç±»ä¼¼scikit-learnçš„æ–¹å¼å®ç°TSPæ¨¡å‹ï¼Œç®€åŒ–è·¯çº¿ä¼˜åŒ–çš„æ„å»ºå’Œæ±‚è§£â€¦
- en: towardsdatascience.com](/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9?source=post_page-----44f8d25d0761--------------------------------)
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9?source=post_page-----44f8d25d0761--------------------------------)
- en: 'At the end of it, we concluded that, even though **solving the TSP in** [**a
    one-liner**](/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9#:~:text=this%20one%2Dliner%20has%20you%20covered%3A)
    **is super convenient**, the output of such optimizer was not enough for a finished
    prototype. We needed a way to visualize that output quickly, to intuitively verify
    it and share it with others. Hence, that need is what motivates the goal of this
    sprint, the sixth in the series: take the output of the optimizer, *i.e.*, a **route
    in the form of ordered locations, and show it graphically on a map**. Note that
    the optimizerâ€™s output, a dataframe storing the optimal route, is now our input,
    and the output we need to make is the route displayed on a map. The input is general:
    just **an ordered sequence of locations** that could represent any kind of route:
    the stops a transit bus does on any given day, the set of addresses a postal service
    worker visits to deliver the mail, the path a rider of a food delivery company
    travels to service many residencies. What matters to us is **the visualization
    of *generic* routes**, and weâ€™ll develop the functionality to do that in this
    article.'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œæˆ‘ä»¬å¾—å‡ºç»“è®ºï¼Œå°½ç®¡**åœ¨**[**ä¸€è¡Œä»£ç **](/a-classy-approach-to-solving-traveling-salesman-problems-effectively-dbb44e7d30b9#:~:text=this%20one%2Dliner%20has%20you%20covered%3A)
    **è§£å†³ TSP é—®é¢˜éå¸¸æ–¹ä¾¿**ï¼Œä½†è¿™ç§ä¼˜åŒ–å™¨çš„è¾“å‡ºå¹¶ä¸è¶³ä»¥æ„æˆä¸€ä¸ªå®Œæ•´çš„åŸå‹ã€‚æˆ‘ä»¬éœ€è¦ä¸€ç§æ–¹æ³•æ¥å¿«é€Ÿå¯è§†åŒ–è¯¥è¾“å‡ºï¼Œä»¥ä¾¿ç›´è§‚åœ°éªŒè¯å¹¶ä¸ä»–äººåˆ†äº«ã€‚å› æ­¤ï¼Œè¿™ç§éœ€æ±‚ä¿ƒæˆäº†æœ¬æ¬¡å†²åˆºçš„ç›®æ ‡ï¼Œè¿™æ˜¯ç³»åˆ—ä¸­çš„ç¬¬å…­æ¬¡ï¼šå°†ä¼˜åŒ–å™¨çš„è¾“å‡ºï¼Œ*å³*ï¼Œ**ä»¥æœ‰åºä½ç½®å½¢å¼çš„è·¯çº¿ï¼Œå›¾å½¢åŒ–åœ°æ˜¾ç¤ºåœ¨åœ°å›¾ä¸Š**ã€‚è¯·æ³¨æ„ï¼Œä¼˜åŒ–å™¨çš„è¾“å‡ºï¼Œå³å­˜å‚¨æœ€ä½³è·¯çº¿çš„æ•°æ®æ¡†ï¼Œç°å·²æˆä¸ºæˆ‘ä»¬çš„è¾“å…¥ï¼Œè€Œæˆ‘ä»¬éœ€è¦åˆ¶ä½œçš„è¾“å‡ºæ˜¯æ˜¾ç¤ºåœ¨åœ°å›¾ä¸Šçš„è·¯çº¿ã€‚è¾“å…¥æ˜¯é€šç”¨çš„ï¼šåªæ˜¯**ä¸€ç»„æœ‰åºçš„ä½ç½®**ï¼Œå®ƒå¯ä»¥è¡¨ç¤ºä»»ä½•ç±»å‹çš„è·¯çº¿ï¼šå…¬äº¤è½¦åœ¨æŸä¸€å¤©çš„åœé ç«™ï¼Œé‚®é€’å‘˜ä¸ºäº†æŠ•é€’é‚®ä»¶è€Œè®¿é—®çš„ä¸€ç»„åœ°å€ï¼Œæˆ–è€…å¤–å–å‘˜æœåŠ¡å¤šä¸ªä½å®…çš„è¡Œé©¶è·¯å¾„ã€‚å¯¹æˆ‘ä»¬æ¥è¯´ï¼Œé‡è¦çš„æ˜¯**â€œé€šç”¨â€è·¯çº¿çš„å¯è§†åŒ–**ï¼Œæˆ‘ä»¬å°†åœ¨æœ¬æ–‡ä¸­å¼€å‘å®ç°è¿™ä¸€åŠŸèƒ½çš„æ–¹å¼ã€‚
- en: 2\. Data and dependencies set up
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 2\. æ•°æ®å’Œä¾èµ–é¡¹è®¾ç½®
- en: 2.1 Install dependencies
  id: totrans-27
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.1 å®‰è£…ä¾èµ–é¡¹
- en: 'Weâ€™ll use the beautiful [Folium library](http://localhost:8888/files/TWDS/traveling_tourist_problem/link/to/pip?_xsrf=2%7C7eacd5cc%7Ca559055af22bb4f0efe1c6967f5f14f6%7C1704496168)
    to create maps, which uses the [Leaflet.js](http://localhost:8888/files/TWDS/traveling_tourist_problem/link/to/library?_xsrf=2%7C7eacd5cc%7Ca559055af22bb4f0efe1c6967f5f14f6%7C1704496168)
    library under the hood to allow Python programmers to easily create interactive
    maps. Weâ€™ll also need [Geopy](https://geopy.readthedocs.io/en/stable/), a powerful
    geocoding library (which you already installed if you created the [virtual environment](https://medium.com/@carlosjuribe/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c#:~:text=I%20recommend%20creating%20a%20separate%20virtual%20environment%20in%20which%20to%20install%20all%20the%20libraries%20needed%20to%20follow%20the%20articles%20in%20this%20series.%20Copy%20this%20text)
    at the beginning of the series). Both are standard packages installable through
    `pip` or `conda`. Choose one of these two commands for installation:'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†ä½¿ç”¨ç¾ä¸½çš„[Folium åº“](http://localhost:8888/files/TWDS/traveling_tourist_problem/link/to/pip?_xsrf=2%7C7eacd5cc%7Ca559055af22bb4f0efe1c6967f5f14f6%7C1704496168)æ¥åˆ›å»ºåœ°å›¾ï¼Œè¯¥åº“åœ¨åå°ä½¿ç”¨[Leaflet.js](http://localhost:8888/files/TWDS/traveling_tourist_problem/link/to/library?_xsrf=2%7C7eacd5cc%7Ca559055af22bb4f0efe1c6967f5f14f6%7C1704496168)åº“ï¼Œä½¿
    Python ç¨‹åºå‘˜èƒ½å¤Ÿè½»æ¾åˆ›å»ºäº¤äº’å¼åœ°å›¾ã€‚æˆ‘ä»¬è¿˜éœ€è¦[Geopy](https://geopy.readthedocs.io/en/stable/)ï¼Œä¸€ä¸ªå¼ºå¤§çš„åœ°ç†ç¼–ç åº“ï¼ˆå¦‚æœä½ åœ¨ç³»åˆ—æ–‡ç« å¼€å§‹æ—¶åˆ›å»ºäº†[è™šæ‹Ÿç¯å¢ƒ](https://medium.com/@carlosjuribe/plan-optimal-trips-automatically-with-python-and-operations-research-models-part-2-fc7ee8198b6c#:~:text=I%20recommend%20creating%20a%20separate%20virtual%20environment%20in%20which%20to%20install%20all%20the%20libraries%20needed%20to%20follow%20the%20articles%20in%20this%20series.%20Copy%20this%20text)ï¼Œä½ åº”è¯¥å·²ç»å®‰è£…äº†å®ƒï¼‰ã€‚è¿™ä¸¤ä¸ªéƒ½æ˜¯å¯ä»¥é€šè¿‡
    `pip` æˆ– `conda` å®‰è£…çš„æ ‡å‡†åº“ã€‚é€‰æ‹©ä»¥ä¸‹ä»»ä¸€å‘½ä»¤è¿›è¡Œå®‰è£…ï¼š
- en: '[PRE0]'
  id: totrans-29
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 2.2 Prepare input data
  id: totrans-30
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2.2 å‡†å¤‡è¾“å…¥æ•°æ®
- en: For the introductory example, letâ€™s take a set of famous sites in Paris.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å…¥é—¨ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä»¥å·´é»çš„ä¸€äº›è‘—åæ™¯ç‚¹ä¸ºä¾‹ã€‚
- en: '[PRE1]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![](../Images/f2d9238f1bc6fcf3ac1ae326dfc8493a.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f2d9238f1bc6fcf3ac1ae326dfc8493a.png)'
- en: '**Note:** every image in this article is by the author, unless otherwise stated.'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ³¨æ„ï¼š** æœ¬æ–‡ä¸­çš„æ‰€æœ‰å›¾ç‰‡å‡ç”±ä½œè€…æä¾›ï¼Œé™¤éå¦æœ‰è¯´æ˜ã€‚'
- en: Letâ€™s see a â€œquickâ€ way to plot these sites on a map using `folium`.
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬æ¥çœ‹ä¸€ç§é€šè¿‡ `folium` å¿«é€Ÿç»˜åˆ¶è¿™äº›åœ°ç‚¹åœ¨åœ°å›¾ä¸Šçš„æ–¹æ³•ã€‚
- en: '3\. Showing routes on maps: a pragmatic approach'
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 3\. åœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºè·¯çº¿ï¼šä¸€ç§åŠ¡å®çš„æ–¹æ³•
- en: In case you are not following this article series, let me point out that weâ€™re
    following an **agile approach** in the creation of a decision support system,
    so we build it incrementally in so-called â€œsprintsâ€. This entails we first want
    to arrive at **a working prototype that solves the** [***minimum valuable problem***](https://medium.com/@carlosjuribe/plan-an-optimal-trip-for-your-next-holidays-with-the-help-of-operations-research-and-python-481b1ea38fef#:~:text=a%20workable%20solution.-,2.2.%20Identifying%20the%20Minimum%20Valuable%20Problem,start%20designing%20a%20minimum%20viable%20product%20that%20will%20be%20also%20valuable.,-To%20plan%20the)
    for a trip planning system. This prototype canâ€™t be considered complete until
    we have a minimalist visualization functionality, hence this article. **Once we
    have the prototype ready**, *i.e.*, once the first version of the system is usable
    in a way that adds marginal value, we can start **perfecting its implementation
    to make it easy to extend**, so we can *add to the system more realistic features*
    of the real, more general problem. Thus, weâ€™re interested now in *a good enough
    way* â€” not the *definitive* way â€” to display a route on a map in some meaningful
    manner. The *more definite way* will come in part 2 and part 3, where we will
    refactor the code created here so it follows an [object-oriented design](https://en.wikipedia.org/wiki/Object-oriented_programming)
    (custom types and classes) that can better handle the growing complexity of the
    routes that emerge from the addition of more details and requirements to the trip
    planning problem. But for now, this article (part 1) attempts to demonstrate a
    pragmatic and quicker way of creating interactive routes with Python. Letâ€™s see
    how.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æ²¡æœ‰è·Ÿéšè¿™ç¯‡æ–‡ç« çš„ç³»åˆ—å†…å®¹ï¼Œè®©æˆ‘æŒ‡å‡ºï¼Œæˆ‘ä»¬æ­£åœ¨é‡‡ç”¨**æ•æ·æ–¹æ³•**æ¥åˆ›å»ºå†³ç­–æ”¯æŒç³»ç»Ÿï¼Œå› æ­¤æˆ‘ä»¬æ˜¯é€šè¿‡æ‰€è°“çš„â€œå†²åˆºâ€é€æ­¥æ„å»ºå®ƒã€‚è¿™æ„å‘³ç€æˆ‘ä»¬é¦–å…ˆå¸Œæœ›å®Œæˆ**ä¸€ä¸ªè§£å†³é—®é¢˜çš„å·¥ä½œåŸå‹**ï¼Œè¿™ä¸ªé—®é¢˜æ˜¯å…³äº[***æœ€å°å¯è¡Œé—®é¢˜***](https://medium.com/@carlosjuribe/plan-an-optimal-trip-for-your-next-holidays-with-the-help-of-operations-research-and-python-481b1ea38fef#:~:text=a%20workable%20solution.-,2.2.%20Identifying%20the%20Minimum%20Valuable%20Problem,start%20designing%20a%20minimum%20viable%20product%20that%20will%20be%20also%20valuable.,-To%20plan%20the)çš„æ—…è¡Œè§„åˆ’ç³»ç»Ÿã€‚è¿™ä¸ªåŸå‹åœ¨æˆ‘ä»¬æ²¡æœ‰å®ç°æœ€ç®€åŒ–çš„å¯è§†åŒ–åŠŸèƒ½ä¹‹å‰ï¼Œä¸èƒ½è¢«è®¤ä¸ºæ˜¯å®Œæˆçš„ï¼Œå› æ­¤æ‰æœ‰äº†è¿™ç¯‡æ–‡ç« ã€‚**ä¸€æ—¦æˆ‘ä»¬æœ‰äº†åŸå‹**ï¼Œ*å³*ï¼Œä¸€æ—¦ç³»ç»Ÿçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬åœ¨å¢åŠ è¾¹é™…ä»·å€¼çš„æ–¹å¼ä¸‹å˜å¾—å¯ç”¨ï¼Œæˆ‘ä»¬å°±å¯ä»¥å¼€å§‹**å®Œå–„å®ƒçš„å®ç°ï¼Œä½¿å…¶æ˜“äºæ‰©å±•**ï¼Œè¿™æ ·æˆ‘ä»¬å°±èƒ½*ä¸ºç³»ç»Ÿæ·»åŠ æ›´å¤šç°å®çš„ç‰¹æ€§*ï¼Œä½¿å…¶èƒ½å¤Ÿå¤„ç†æ›´å¹¿æ³›çš„ã€æ›´åŠ å¤æ‚çš„æ—…è¡Œè§„åˆ’é—®é¢˜ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ç°åœ¨å…³æ³¨çš„æ˜¯*ä¸€ç§è¶³å¤Ÿå¥½çš„æ–¹æ³•*â€”â€”è€Œä¸æ˜¯*æœ€ç»ˆçš„*æ–¹æ³•â€”â€”æ¥ä»¥æŸç§æœ‰æ„ä¹‰çš„æ–¹å¼åœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºä¸€æ¡è·¯çº¿ã€‚*æ›´æ˜ç¡®çš„æ–¹æ³•*å°†åœ¨ç¬¬äºŒéƒ¨åˆ†å’Œç¬¬ä¸‰éƒ¨åˆ†ä¸­å‡ºç°ï¼Œæˆ‘ä»¬å°†åœ¨é‚£é‡Œé‡æ„è¿™é‡Œåˆ›å»ºçš„ä»£ç ï¼Œä½¿å…¶éµå¾ª[é¢å‘å¯¹è±¡è®¾è®¡](https://en.wikipedia.org/wiki/Object-oriented_programming)ï¼ˆè‡ªå®šä¹‰ç±»å‹å’Œç±»ï¼‰ï¼Œä»è€Œæ›´å¥½åœ°å¤„ç†éšç€æ—…è¡Œè§„åˆ’é—®é¢˜åŠ å…¥æ›´å¤šç»†èŠ‚å’Œéœ€æ±‚è€Œä¸æ–­å¢åŠ çš„è·¯çº¿å¤æ‚æ€§ã€‚ä½†ç°åœ¨ï¼Œè¿™ç¯‡æ–‡ç« ï¼ˆç¬¬ä¸€éƒ¨åˆ†ï¼‰è¯•å›¾å±•ç¤ºä¸€ç§æ›´åŠ¡å®ã€æ›´å¿«é€Ÿçš„æ–¹å¼æ¥ç”¨
    Python åˆ›å»ºäº¤äº’å¼è·¯çº¿ã€‚è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•å®ç°ã€‚
- en: 3.1 Displaying sites
  id: totrans-38
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.1 æ˜¾ç¤ºç«™ç‚¹
- en: 'We first need to create a map of Paris. We can center it at the average location
    of our group of sites:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬é¦–å…ˆéœ€è¦åˆ›å»ºä¸€ä¸ªå·´é»çš„åœ°å›¾ã€‚æˆ‘ä»¬å¯ä»¥å°†åœ°å›¾ä¸­å¿ƒè®¾ç½®ä¸ºæˆ‘ä»¬ä¸€ç»„ç«™ç‚¹çš„å¹³å‡ä½ç½®ï¼š
- en: '[PRE2]'
  id: totrans-40
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'Then, to display the sites on top of it, we create one marker for each of the
    sites, and add it to the map. Markers only need a location, but to quickly recognize
    which site is at each marker, we pass the site name to the `tooltip` attribute,
    so we see a pop-up with the name of the site any time we hover over the markers:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åï¼Œä¸ºäº†åœ¨å…¶ä¸Šæ˜¾ç¤ºè¿™äº›ç«™ç‚¹ï¼Œæˆ‘ä»¬ä¸ºæ¯ä¸ªç«™ç‚¹åˆ›å»ºä¸€ä¸ªæ ‡è®°ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°åœ°å›¾ä¸Šã€‚æ ‡è®°åªéœ€è¦ä¸€ä¸ªä½ç½®ï¼Œä½†ä¸ºäº†å¿«é€Ÿè¯†åˆ«æ¯ä¸ªæ ‡è®°ä¸Šçš„ç«™ç‚¹ï¼Œæˆ‘ä»¬å°†ç«™ç‚¹åç§°ä¼ é€’ç»™`tooltip`å±æ€§ï¼Œè¿™æ ·å½“æˆ‘ä»¬å°†é¼ æ ‡æ‚¬åœåœ¨æ ‡è®°ä¸Šæ—¶ï¼Œå°±ä¼šçœ‹åˆ°ä¸€ä¸ªå¼¹å‡ºçª—å£ï¼Œæ˜¾ç¤ºç«™ç‚¹çš„åç§°ï¼š
- en: '[PRE3]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '![](../Images/1677ba0c1b0696e0817d650c5184d455.png)'
  id: totrans-43
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1677ba0c1b0696e0817d650c5184d455.png)'
- en: '**Figure 6.1.** Site markers on top of the map'
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾ 6.1.** åœ°å›¾ä¸Šçš„ç«™ç‚¹æ ‡è®°'
- en: Of course, you can zoom in and out, and move around the map if you need to,
    with the `+ | -` buttons in the upper-left corner and by click-and-drag.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç„¶ï¼Œå¦‚æœéœ€è¦ï¼Œä½ å¯ä»¥æ”¾å¤§å’Œç¼©å°å¹¶ç§»åŠ¨åœ°å›¾ï¼Œä½¿ç”¨å·¦ä¸Šè§’çš„`+ | -`æŒ‰é’®ï¼Œæˆ–è€…é€šè¿‡ç‚¹å‡»å’Œæ‹–åŠ¨ã€‚
- en: 3.2 Displaying routes
  id: totrans-46
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 3.2 æ˜¾ç¤ºè·¯çº¿
- en: 'The sites we just displayed arenâ€™t really ordered, but letâ€™s pretend they are.
    Letâ€™s say the dataframe contains **a route in the city**, where the numbers in
    the index indicate the visit order of those sites:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬åˆšåˆšæ˜¾ç¤ºçš„ç«™ç‚¹å®é™…ä¸Šå¹¶æ²¡æœ‰æŒ‰é¡ºåºæ’åˆ—ï¼Œä½†æˆ‘ä»¬å¯ä»¥å‡è®¾å®ƒä»¬æ˜¯æœ‰é¡ºåºçš„ã€‚å‡è®¾æ•°æ®æ¡†ä¸­åŒ…å«**åŸå¸‚ä¸­çš„ä¸€æ¡è·¯çº¿**ï¼Œå…¶ä¸­ç´¢å¼•ä¸­çš„æ•°å­—è¡¨ç¤ºè¿™äº›ç«™ç‚¹çš„è®¿é—®é¡ºåºï¼š
- en: '[PRE4]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '![](../Images/4b98ed2d3e943684bc81b0493cbd4858.png)'
  id: totrans-49
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4b98ed2d3e943684bc81b0493cbd4858.png)'
- en: Now the sites are â€œconnectedâ€ in a specific order (the visit order), so we should
    also represent that fact in the map by **adding lines connecting consecutive stops
    in the route**. These lines, or more precisely, â€œsegmentsâ€, are created with `folium.PolyLine`
    objects. To add them to the map in one go we create some more columns in `df_route`,
    holding the information of the "next stops", so each stop is mapped to its following
    stop, constituting a route segment. That way, **each row can store info about
    both the stops and the segments of the route**.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è¿™äº›ç«™ç‚¹æŒ‰ç…§ç‰¹å®šé¡ºåºï¼ˆè®¿é—®é¡ºåºï¼‰â€œè¿æ¥â€èµ·æ¥ï¼Œå› æ­¤æˆ‘ä»¬ä¹Ÿåº”è¯¥åœ¨åœ°å›¾ä¸Šé€šè¿‡**æ·»åŠ è¿æ¥è¿ç»­åœé ç‚¹çš„çº¿è·¯**æ¥è¡¨ç¤ºè¿™ä¸€äº‹å®ã€‚è¿™äº›çº¿è·¯ï¼Œæˆ–è€…æ›´å‡†ç¡®åœ°è¯´ï¼Œâ€œæ®µè½â€ï¼Œæ˜¯é€šè¿‡
    `folium.PolyLine` å¯¹è±¡åˆ›å»ºçš„ã€‚ä¸ºäº†å°†å®ƒä»¬ä¸€æ¬¡æ€§æ·»åŠ åˆ°åœ°å›¾ä¸Šï¼Œæˆ‘ä»¬åœ¨ `df_route` ä¸­åˆ›å»ºäº†æ›´å¤šçš„åˆ—ï¼Œä¿å­˜â€œä¸‹ä¸€ä¸ªåœé ç‚¹â€çš„ä¿¡æ¯ï¼Œå› æ­¤æ¯ä¸ªåœé ç‚¹éƒ½ä¸å…¶åç»­åœé ç‚¹ç›¸å¯¹åº”ï¼Œæ„æˆä¸€ä¸ªè·¯çº¿æ®µã€‚è¿™æ ·ï¼Œ**æ¯ä¸€è¡Œéƒ½å¯ä»¥å­˜å‚¨æœ‰å…³åœé ç‚¹å’Œè·¯çº¿æ®µçš„ä¿¡æ¯**ã€‚
- en: '[PRE5]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '![](../Images/eed33700b4b1559bf081ba43f77ce8f8.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/eed33700b4b1559bf081ba43f77ce8f8.png)'
- en: 'For a fixed row, the first three columns hold information for the â€œcurrentâ€
    site, and the next three columns hold information for the â€œnext siteâ€ in the route.
    This allows us to create a marker *and* a segment in the same for-loop iteration:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºä¸€ä¸ªå›ºå®šçš„è¡Œï¼Œå‰ä¸‰åˆ—ä¿å­˜â€œå½“å‰â€ç«™ç‚¹çš„ä¿¡æ¯ï¼Œæ¥ä¸‹æ¥çš„ä¸‰åˆ—ä¿å­˜â€œä¸‹ä¸€ä¸ªç«™ç‚¹â€åœ¨è·¯çº¿ä¸­çš„ä¿¡æ¯ã€‚è¿™æ ·ï¼Œæˆ‘ä»¬å°±å¯ä»¥åœ¨åŒä¸€ä¸ª `for` å¾ªç¯è¿­ä»£ä¸­åŒæ—¶åˆ›å»ºä¸€ä¸ªæ ‡è®°
    *å’Œ* ä¸€ä¸ªæ®µè½ï¼š
- en: '[PRE6]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '![](../Images/70230ad30828b59b0859ed5cd8b56318.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/70230ad30828b59b0859ed5cd8b56318.png)'
- en: '**Figure 6.2.** Site markers connected through lines'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾ 6.2.** é€šè¿‡çº¿è·¯è¿æ¥çš„ç«™ç‚¹æ ‡è®°'
- en: Now the order in which the stops are visited is clear, and when you hover over
    each line with the mouse you see which two stops the line is connecting. The same
    is true for markers, the names of the sites they reference are displayed when
    hovering over them.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œåœé ç‚¹çš„è®¿é—®é¡ºåºå˜å¾—æ¸…æ™°ï¼Œå½“ä½ ç”¨é¼ æ ‡æ‚¬åœåœ¨æ¯æ¡çº¿è·¯ä¸Šæ—¶ï¼Œä¼šçœ‹åˆ°è¯¥çº¿è·¯è¿æ¥äº†å“ªä¸¤ä¸ªç«™ç‚¹ã€‚æ ‡è®°ä¹Ÿä¸€æ ·ï¼Œæ‚¬åœæ—¶ä¼šæ˜¾ç¤ºå®ƒä»¬æ‰€æŒ‡å‘ç«™ç‚¹çš„åç§°ã€‚
- en: 3.3 Enriching the map with interactive information
  id: totrans-58
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.3 ä¸°å¯Œåœ°å›¾çš„äº¤äº’ä¿¡æ¯
- en: 'This is all well and good to get a rough idea of what the route looks like,
    but we can make the map a bit more insightful with little extra effort by **adding
    more information that can be displayed interactively**. For starters, where does
    the route start? With the current view, itâ€™s not straightforward which of the
    sites is the â€œinitial oneâ€. There are two markers that are connected to only one
    segment, so it must be one of these, but weâ€™d have to look at the dataframe to
    distinguish the â€œstartâ€ from the â€œfinishâ€ site. A better way is to **indicate
    the initial site with a special icon** so that we can recognize it at a glance.
    We do that by adding a `folium.Icon` object to each marker, making the initial
    site have a distinct icon:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™äº›ä¿¡æ¯å¯¹äºå¤§è‡´äº†è§£è·¯çº¿çš„å¤–è§‚å·²ç»è¶³å¤Ÿï¼Œä½†æˆ‘ä»¬å¯ä»¥é€šè¿‡**æ·»åŠ æ›´å¤šå¯ä»¥äº¤äº’æ˜¾ç¤ºçš„ä¿¡æ¯**ï¼Œç”¨ä¸€ç‚¹é¢å¤–çš„åŠªåŠ›è®©åœ°å›¾å˜å¾—æ›´åŠ æœ‰ç”¨ã€‚é¦–å…ˆï¼Œè·¯çº¿ä»å“ªé‡Œå¼€å§‹ï¼Ÿé€šè¿‡å½“å‰çš„è§†å›¾ï¼Œå¹¶ä¸ç›´è§‚åœ°çœ‹åˆ°å“ªä¸ªç«™ç‚¹æ˜¯â€œèµ·ç‚¹â€ã€‚æœ‰ä¸¤ä¸ªæ ‡è®°ä»…ä¸ä¸€ä¸ªæ®µè½è¿æ¥ï¼Œå› æ­¤å®ƒä»¬å¿…é¡»æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œä½†æˆ‘ä»¬å¾—æŸ¥çœ‹æ•°æ®æ¡†æ‰èƒ½åŒºåˆ†â€œèµ·ç‚¹â€å’Œâ€œç»ˆç‚¹â€ã€‚æ›´å¥½çš„æ–¹å¼æ˜¯**é€šè¿‡ç‰¹æ®Šå›¾æ ‡æ ‡ç¤ºèµ·å§‹ç«™ç‚¹**ï¼Œè¿™æ ·æˆ‘ä»¬ä¸€çœ¼å°±èƒ½è®¤å‡ºå®ƒã€‚æˆ‘ä»¬é€šè¿‡ä¸ºæ¯ä¸ªæ ‡è®°æ·»åŠ ä¸€ä¸ª
    `folium.Icon` å¯¹è±¡æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½¿å¾—èµ·å§‹ç«™ç‚¹å…·æœ‰ä¸€ä¸ªç‹¬ç‰¹çš„å›¾æ ‡ï¼š
- en: '[PRE7]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '![](../Images/dfa8722beb98a4ee063af5e7c0f896d2.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/dfa8722beb98a4ee063af5e7c0f896d2.png)'
- en: '**Figure 6.3.** Route with stop markers colored by type'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾ 6.3.** æŒ‰ç±»å‹ç€è‰²çš„å¸¦åœé æ ‡è®°çš„è·¯çº¿'
- en: At a glance, itâ€™s clear now that the route starts at the marker with a â€œhomeâ€
    icon. Letâ€™s exploit the interactivity a little further by showing some more information
    on the map that helps us understand the route even better. The basic info weâ€™ll
    add is the **distances between stops** and **the visit order number of each stop**.
    Since we have in each row of `df_route_segments` both the starting and ending
    points of segments, we can easily add a column with the distance between consecutive
    stops.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€çœ¼çœ‹å»ï¼Œç°åœ¨æ˜¾ç„¶è·¯çº¿æ˜¯ä»å¸¦æœ‰â€œå®¶â€å›¾æ ‡çš„æ ‡è®°å¼€å§‹çš„ã€‚è®©æˆ‘ä»¬è¿›ä¸€æ­¥åˆ©ç”¨äº¤äº’æ€§ï¼Œé€šè¿‡åœ¨åœ°å›¾ä¸Šæ˜¾ç¤ºä¸€äº›æœ‰åŠ©äºæ›´å¥½ç†è§£è·¯çº¿çš„æ›´å¤šä¿¡æ¯æ¥æé«˜åœ°å›¾çš„å¯ç”¨æ€§ã€‚æˆ‘ä»¬å°†æ·»åŠ çš„åŸºæœ¬ä¿¡æ¯æ˜¯**åœé ç‚¹ä¹‹é—´çš„è·ç¦»**å’Œ**æ¯ä¸ªåœé ç‚¹çš„è®¿é—®é¡ºåºå·**ã€‚ç”±äºåœ¨
    `df_route_segments` çš„æ¯ä¸€è¡Œä¸­éƒ½æœ‰æ®µè½çš„èµ·ç‚¹å’Œç»ˆç‚¹ï¼Œæˆ‘ä»¬å¯ä»¥è½»æ¾åœ°æ·»åŠ ä¸€åˆ—ï¼Œè¡¨ç¤ºè¿ç»­åœé ç‚¹ä¹‹é—´çš„è·ç¦»ã€‚
- en: '***For readers interested in the current article only (*i.e.*, not in the past
    articles)****, I have declared the function* `*ellipsoidal_distance*` *below.
    If, on the contrary, you''ve followed along in the article series, you already
    know about* [*that function*](/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e#:~:text=Here%E2%80%99s%20a%20function%20that%20computes%20the%20ellipsoidal%20distance%20between%20point%201%20and%20point%202%2C%20in%20meters%3A)*,
    as we developed it (and made the case for it) in* [*the article on computing distance
    matrices*](/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e)*.
    Feel free to re-use that function here, to avoid duplicated code. To get the distance
    in meters between location* `*loc1*` *and location* `*loc2*`*, you just need to:*'
  id: totrans-64
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***å¯¹äºåªå¯¹å½“å‰æ–‡ç« æ„Ÿå…´è¶£çš„è¯»è€…ï¼ˆ*å³*ï¼Œä¸å…³å¿ƒä»¥å‰çš„æ–‡ç« ï¼‰****ï¼Œæˆ‘åœ¨ä¸‹é¢å£°æ˜äº†å‡½æ•°* `*ellipsoidal_distance*` *ã€‚å¦‚æœç›¸åï¼Œæ‚¨å·²ç»è·Ÿéšæ•´ä¸ªç³»åˆ—çš„æ–‡ç« ï¼Œæ‚¨å·²ç»äº†è§£äº†*
    [*é‚£ä¸ªå‡½æ•°*](/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e#:~:text=Here%E2%80%99s%20a%20function%20that%20computes%20the%20ellipsoidal%20distance%20between%20point%201%20and%20point%202%2C%20in%20meters%3A)*ï¼Œå› ä¸ºæˆ‘ä»¬åœ¨*
    [*è®¡ç®—è·ç¦»çŸ©é˜µçš„æ–‡ç« *](/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e)*ä¸­å¼€å‘äº†å®ƒï¼ˆå¹¶ä¸ºå…¶è¾©æŠ¤ï¼‰ã€‚æ¬¢è¿åœ¨æ­¤å¤„é‡ç”¨è¯¥å‡½æ•°ï¼Œä»¥é¿å…é‡å¤ä»£ç ã€‚è¦è·å¾—ä½ç½®*
    `*loc1*` *å’Œä½ç½®* `*loc2*` *ä¹‹é—´çš„è·ç¦»ï¼ˆå•ä½ï¼šç±³ï¼‰ï¼Œæ‚¨åªéœ€è¦ï¼š*'
- en: ''
  id: totrans-65
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`***from*** *geoutils* ***import*** *GeoAnalyzer*`'
  id: totrans-66
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`***from*** *geoutils* ***import*** *GeoAnalyzer*`'
- en: ''
  id: totrans-67
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: '`*distance* ***=*** *GeoAnalyzer.****ellipsoidal_distance****(loc1, loc2)*`'
  id: totrans-68
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '`*distance* ***=*** *GeoAnalyzer.****ellipsoidal_distance****(loc1, loc2)*`'
- en: '[PRE8]'
  id: totrans-69
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The function `ellipsoidal_distance` accepts two locations (two tuples of coordinates)
    and returns the [geodesic distance](https://en.wikipedia.org/wiki/Geodesic) between
    them, in meters. For a more in-depth explanation and *justification* of the geodesic
    distance, I invite you to read the [article where we created it](/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e):'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: å‡½æ•°`ellipsoidal_distance`æ¥å—ä¸¤ä¸ªä½ç½®ï¼ˆä¸¤ä¸ªåæ ‡å…ƒç»„ï¼‰ï¼Œå¹¶è¿”å›å®ƒä»¬ä¹‹é—´çš„[åœ°ç†è·ç¦»](https://en.wikipedia.org/wiki/Geodesic)ï¼Œå•ä½ä¸ºç±³ã€‚æœ‰å…³åœ°ç†è·ç¦»çš„æ›´æ·±å…¥è§£é‡Šå’Œ*è®ºè¯*ï¼Œè¯·é˜…è¯»æˆ‘ä»¬[åˆ›å»ºè¯¥è·ç¦»å…¬å¼çš„æ–‡ç« ](/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e)ï¼š
- en: '[](/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e?source=post_page-----44f8d25d0761--------------------------------)
    [## Compute the Distance Matrix of a Set of Sites from Their Coordinates in Python'
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e?source=post_page-----44f8d25d0761--------------------------------)
    [## è®¡ç®—ä¸€ç»„ç«™ç‚¹çš„è·ç¦»çŸ©é˜µï¼ˆåŸºäºå…¶åæ ‡ï¼‰]'
- en: Estimate the distance between any pair of sites from their geographical coordinates
    as a stepping stone to solvingâ€¦
  id: totrans-72
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: ä¼°ç®—ä»»æ„ä¸€å¯¹ç«™ç‚¹ä¹‹é—´çš„è·ç¦»ï¼Œä»¥å…¶åœ°ç†åæ ‡ä¸ºåŸºç¡€ï¼Œä½œä¸ºè§£å†³é—®é¢˜çš„è·³æ¿â€¦â€¦
- en: towardsdatascience.com](/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e?source=post_page-----44f8d25d0761--------------------------------)
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/compute-the-distance-matrix-of-a-set-of-sites-from-their-coordinates-in-python-d5fc92a0ba9e?source=post_page-----44f8d25d0761--------------------------------)
- en: 'We can add the new column `''distance_seg''` because we have both endpoints
    of the segment in each row:'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥æ·»åŠ æ–°çš„åˆ—`'distance_seg'`ï¼Œå› ä¸ºåœ¨æ¯ä¸€è¡Œä¸­æˆ‘ä»¬éƒ½åŒ…å«äº†æ®µçš„ä¸¤ä¸ªç«¯ç‚¹ï¼š
- en: '[PRE9]'
  id: totrans-75
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '![](../Images/5fdf24994639e120b905277d9b1395b9.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/5fdf24994639e120b905277d9b1395b9.png)'
- en: 'Having this new column, we can take their values and include them in the string
    we pass to `tooltip` when creating the lines of the map, thereby **making each
    segmentâ€™s distance available at the tip of the cursor**. While we''re at it, let''s
    add the "stop numbers" to the markers too, so that more context is given to each
    marker on the overall route:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: æ‹¥æœ‰äº†è¿™ä¸€æ–°åˆ—åï¼Œæˆ‘ä»¬å¯ä»¥å°†å…¶å€¼çº³å…¥æˆ‘ä»¬ä¼ é€’ç»™`tooltip`çš„å­—ç¬¦ä¸²ä¸­ï¼Œåœ¨åˆ›å»ºåœ°å›¾ä¸Šçš„çº¿è·¯æ—¶ï¼Œä»è€Œ**ä½¿æ¯ä¸ªæ®µçš„è·ç¦»åœ¨å…‰æ ‡æŒ‡å°–å¯è§**ã€‚åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å°†â€œåœé ç‚¹ç¼–å·â€æ·»åŠ åˆ°æ ‡è®°ä¸Šï¼Œä»¥ä¾¿ä¸ºæ¯ä¸ªæ ‡è®°æä¾›æ›´å¤šçš„è·¯çº¿ä¸Šä¸‹æ–‡ï¼š
- en: '[PRE10]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '![](../Images/87b5e9ccfc0b1c831442855f6e50e9e8.png)'
  id: totrans-79
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/87b5e9ccfc0b1c831442855f6e50e9e8.png)'
- en: '**Figure 6.4.** Interactive information popping up when hovering over a marker'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾ 6.4.** é¼ æ ‡æ‚¬åœåœ¨æ ‡è®°ä¸Šæ—¶æ˜¾ç¤ºçš„äº¤äº’å¼ä¿¡æ¯'
- en: Note how weâ€™ve used a bit of HTML to render the â€œhover textâ€ displayed on markers
    and lines more nicely.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„æˆ‘ä»¬å¦‚ä½•ä½¿ç”¨äº†ä¸€äº›HTMLæ¥æ›´æ¼‚äº®åœ°å‘ˆç°æ ‡è®°å’Œçº¿è·¯ä¸Šçš„â€œæ‚¬åœæ–‡æœ¬â€ã€‚
- en: '![](../Images/34dadd5309a7e1769f25ef83838b095d.png)'
  id: totrans-82
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/34dadd5309a7e1769f25ef83838b095d.png)'
- en: '**Figure 6.5.** Interactive information popping up when hovering over a route
    segment'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾ 6.5.** é¼ æ ‡æ‚¬åœåœ¨è·¯çº¿æ®µä¸Šæ—¶æ˜¾ç¤ºçš„äº¤äº’å¼ä¿¡æ¯'
- en: 'The current behavior seems general enough to be encapsulated into some helper
    functions:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: å½“å‰çš„è¡Œä¸ºçœ‹èµ·æ¥è¶³å¤Ÿé€šç”¨ï¼Œé€‚åˆå°è£…æˆä¸€äº›è¾…åŠ©å‡½æ•°ï¼š
- en: '[PRE11]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 3.4 Dealing with closed routes, a.k.a. tours
  id: totrans-86
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.4 å¤„ç†å°é—­è·¯çº¿ï¼Œäº¦å³ç¯å½¢è·¯çº¿
- en: 'What happens if we have a dataframe `df_route` representing a **closed tour**,
    *i.e.*, a route that starts and ends at the same site? How will the map reflect
    that? Let''s build such a dataframe and test it. We take the previous `df_route`,
    having an open route, and add a new row at the end with the same info as in the
    first row, thus making the route closed:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬æœ‰ä¸€ä¸ªä»£è¡¨**é—­åˆæ—…è¡Œ**çš„DataFrame`df_route`ï¼Œ*å³*ï¼Œä¸€æ¡èµ·å§‹ç‚¹å’Œç»ˆç‚¹ç›¸åŒçš„è·¯çº¿ï¼Œä¼šå‘ç”Ÿä»€ä¹ˆæƒ…å†µï¼Ÿåœ°å›¾ä¼šå¦‚ä½•åæ˜ è¿™ä¸€ç‚¹ï¼Ÿè®©æˆ‘ä»¬æ„å»ºè¿™æ ·çš„ä¸€ä¸ªDataFrameå¹¶è¿›è¡Œæµ‹è¯•ã€‚æˆ‘ä»¬ä»¥ä¹‹å‰çš„`df_route`ä¸ºä¾‹ï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼€æ”¾çš„è·¯çº¿ï¼Œå¹¶åœ¨æœ«å°¾æ·»åŠ ä¸€è¡Œï¼Œå†…å®¹ä¸ç¬¬ä¸€è¡Œç›¸åŒï¼Œä»è€Œä½¿å¾—è¿™æ¡è·¯çº¿é—­åˆï¼š
- en: '[PRE12]'
  id: totrans-88
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '![](../Images/bcca8409f3c17da3142f7e5454f8f0f1.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bcca8409f3c17da3142f7e5454f8f0f1.png)'
- en: 'Thanks to setting `ignore_index=True`, the index number, which represents the
    visit order, has been incremented in one unit automatically. Now we just proceed
    as before, creating the map, but this time with our new helper function `plot_route_on_map`:'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: å¤šäºäº†è®¾ç½®`ignore_index=True`ï¼Œä»£è¡¨è®¿é—®é¡ºåºçš„ç´¢å¼•å·å·²ç»è‡ªåŠ¨å¢åŠ äº†ä¸€ä¸ªå•ä½ã€‚ç°åœ¨æˆ‘ä»¬ç…§å¸¸ç»§ç»­ï¼Œåˆ›å»ºåœ°å›¾ï¼Œä½†è¿™æ¬¡ä½¿ç”¨æˆ‘ä»¬çš„æ–°è¾…åŠ©å‡½æ•°`plot_route_on_map`ï¼š
- en: '[PRE13]'
  id: totrans-91
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '![](../Images/b7a7a6f6de4a883ea751087295a450b3.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b7a7a6f6de4a883ea751087295a450b3.png)'
- en: '**Figure 6.6.** The blue marker indicating the initial site is buried by the
    red marker of the final site'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾6.6ã€‚** è“è‰²æ ‡è®°ï¼ˆè¡¨ç¤ºåˆå§‹ç«™ç‚¹ï¼‰è¢«æœ€ç»ˆç«™ç‚¹çš„çº¢è‰²æ ‡è®°é®æŒ¡'
- en: 'It works *almost fine,* becausethe new line representing the â€œclosingâ€ segment
    is created as it should, but thereâ€™s a problem with the markers: **a new red marker
    is added on top of the previously added blue marker for the initial site**, hiding
    it. This is simply how Folium works, adding elements on top of elements (notice
    how the markerâ€™s shadow is darker for the â€˜hotelâ€™ than for the other markers,
    a subtle way of saying that thereâ€™s more than one marker in that location). To
    avoid losing that helpful blue â€œhomeâ€ icon indicating the starting stop of the
    route, we need to skip adding the last marker (after the `for`-loop ends) *only
    when the last stop coincides with the starting site of the route*. We can do that
    by checking the condition directly, on `df_route`, and by only adding this last
    marker **if the route is not closed**:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒ*å‡ ä¹å®Œç¾*åœ°å·¥ä½œï¼Œå› ä¸ºä»£è¡¨â€œé—­åˆâ€æ®µçš„æ–°è¡Œå¦‚é¢„æœŸåˆ›å»ºï¼Œä½†æ ‡è®°æœ‰é—®é¢˜ï¼š**ä¸€ä¸ªæ–°çš„çº¢è‰²æ ‡è®°è¢«æ·»åŠ åˆ°åˆå§‹ç«™ç‚¹ä¸Šæ–¹ï¼Œè¦†ç›–äº†å…ˆå‰æ·»åŠ çš„è“è‰²æ ‡è®°**ã€‚è¿™å°±æ˜¯Foliumçš„å·¥ä½œæ–¹å¼ï¼Œå®ƒä¼šå°†æ–°å…ƒç´ å åŠ åœ¨ç°æœ‰å…ƒç´ ä¸Šï¼ˆæ³¨æ„â€œé…’åº—â€çš„æ ‡è®°é˜´å½±æ¯”å…¶ä»–æ ‡è®°çš„é˜´å½±æ›´æ·±ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾®å¦™çš„æç¤ºï¼Œè¡¨æ˜è¯¥ä½ç½®æœ‰å¤šä¸ªæ ‡è®°ï¼‰ã€‚ä¸ºäº†é¿å…ä¸¢å¤±æŒ‡ç¤ºè·¯çº¿èµ·å§‹ç«™ç‚¹çš„æœ‰ç”¨è“è‰²â€œä¸»é¡µâ€å›¾æ ‡ï¼Œæˆ‘ä»¬éœ€è¦è·³è¿‡æ·»åŠ æœ€åä¸€ä¸ªæ ‡è®°ï¼ˆå½“`for`å¾ªç¯ç»“æŸåï¼‰*ä»…å½“æœ€åä¸€ä¸ªç«™ç‚¹ä¸è·¯çº¿çš„èµ·å§‹ç«™ç‚¹é‡åˆæ—¶*ã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡ç›´æ¥æ£€æŸ¥`df_route`ä¸­çš„æ¡ä»¶æ¥åšåˆ°è¿™ä¸€ç‚¹ï¼Œåªæœ‰åœ¨**è·¯çº¿æ²¡æœ‰é—­åˆ**çš„æƒ…å†µä¸‹ï¼Œæ‰æ·»åŠ æœ€åä¸€ä¸ªæ ‡è®°ï¼š
- en: '[PRE14]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'After editing `plot_route_on_map` as indicated above, the desired behavior
    is restored, *i.e.*, the â€œhomeâ€ icon for the initial site is not overridden by
    the last stop in the tour:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å¦‚ä¸Šæ‰€è¿°ç¼–è¾‘`plot_route_on_map`ä¹‹åï¼ŒæœŸæœ›çš„è¡Œä¸ºå·²æ¢å¤ï¼Œ*å³*ï¼Œåˆå§‹ç«™ç‚¹çš„â€œä¸»é¡µâ€å›¾æ ‡ä¸ä¼šè¢«æ—…è¡Œä¸­çš„æœ€åä¸€ä¸ªç«™ç‚¹è¦†ç›–ï¼š
- en: '[PRE15]'
  id: totrans-97
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: '![](../Images/0a7ea8abc0572b2ea3188d82e3a8df86.png)'
  id: totrans-98
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0a7ea8abc0572b2ea3188d82e3a8df86.png)'
- en: '**Figure 6.7.** Marker signaling the initial site is visible again'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾6.7ã€‚** æ ‡è®°æ˜¾ç¤ºåˆå§‹ç«™ç‚¹å†æ¬¡å¯è§'
- en: With this final view, *we can easily know the distance between two consecutive
    stops* (and the sites itâ€™s connecting) *with just one move of the cursor*. Besides,
    *we can check the chronological order in which sites are visited just by hovering
    over them*. **This interactivity can help us evaluate the quality of the routes
    we deal with, regardless of the routing problem at hand.**
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™ç§æœ€ç»ˆè§†å›¾ï¼Œ*æˆ‘ä»¬å¯ä»¥é€šè¿‡å…‰æ ‡çš„ä¸€ä¸ªç®€å•æ“ä½œè½»æ¾çŸ¥é“ä¸¤ä¸ªè¿ç»­ç«™ç‚¹ä¹‹é—´çš„è·ç¦»*ï¼ˆä»¥åŠå®ƒä»¬æ‰€è¿æ¥çš„ç«™ç‚¹ï¼‰ã€‚æ­¤å¤–ï¼Œ*æˆ‘ä»¬åªéœ€å°†å…‰æ ‡æ‚¬åœåœ¨ç«™ç‚¹ä¸Šï¼Œå°±èƒ½æŸ¥çœ‹ç«™ç‚¹è®¿é—®çš„æ—¶é—´é¡ºåº*ã€‚**è¿™ç§äº’åŠ¨æ€§å¯ä»¥å¸®åŠ©æˆ‘ä»¬è¯„ä¼°æ‰€å¤„ç†è·¯çº¿çš„è´¨é‡ï¼Œæ— è®ºå½“å‰å¤„ç†çš„æ˜¯ä»€ä¹ˆç±»å‹çš„è·¯å¾„é—®é¢˜ã€‚**
- en: '3.5 Bonus: Adding KPIs to the map'
  id: totrans-101
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.5 é™„åŠ åŠŸèƒ½ï¼šåœ¨åœ°å›¾ä¸Šæ·»åŠ å…³é”®ç»©æ•ˆæŒ‡æ ‡ï¼ˆKPIï¼‰
- en: To cap it all, letâ€™s add a feature that can make the map even more insightful.
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œè®©æˆ‘ä»¬æ·»åŠ ä¸€ä¸ªåŠŸèƒ½ï¼Œä½¿åœ°å›¾å˜å¾—æ›´åŠ å¯Œæœ‰æ´å¯ŸåŠ›ã€‚
- en: Thereâ€™s always information that is not directly associated with any site or
    segment in a route, but with the route as a whole. This information is important
    to know about too, and tends to be global properties, like IDs or names, or relevant
    metrics associated with the routes. We can display them too on a folium map with
    a simple trick.
  id: totrans-103
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: æ€»æ˜¯æœ‰ä¸€äº›ä¿¡æ¯ï¼Œå®ƒä»¬ä¸è·¯çº¿ä¸­çš„ä»»ä½•ç«™ç‚¹æˆ–æ®µè½æ²¡æœ‰ç›´æ¥å…³è”ï¼Œè€Œæ˜¯ä¸æ•´ä¸ªè·¯çº¿ç›¸å…³ã€‚è¿™äº›ä¿¡æ¯ä¹Ÿå¾ˆé‡è¦ï¼Œé€šå¸¸æ˜¯å…¨å±€å±æ€§ï¼Œå¦‚IDã€åç§°ï¼Œæˆ–ä¸è·¯çº¿ç›¸å…³çš„é‡è¦æŒ‡æ ‡ã€‚æˆ‘ä»¬ä¹Ÿå¯ä»¥é€šè¿‡ä¸€ä¸ªç®€å•çš„æŠ€å·§å°†å®ƒä»¬æ˜¾ç¤ºåœ¨Foliumåœ°å›¾ä¸Šã€‚
- en: If we want to display information that isnâ€™t linked to any single marker or
    line, but that pertains to the route as a whole, we can **add it as text blocks
    in folium maps**. This is useful for business dashboards, for example, where one
    usually wants to display things like **the name/ID of the route or various metrics
    that attempt to summarize it** in some relevant sense.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæˆ‘ä»¬æƒ³å±•ç¤ºä¸€äº›ä¸ä»»ä½•å•ä¸€æ ‡è®°æˆ–è¡Œæ— å…³ï¼Œä½†ä¸æ•´ä¸ªè·¯çº¿ç›¸å…³çš„ä¿¡æ¯ï¼Œæˆ‘ä»¬å¯ä»¥**å°†å…¶ä½œä¸ºæ–‡æœ¬å—æ·»åŠ åˆ°foliumåœ°å›¾ä¸­**ã€‚ä¾‹å¦‚ï¼Œåœ¨å•†ä¸šä»ªè¡¨ç›˜ä¸­ï¼Œè¿™éå¸¸æœ‰ç”¨ï¼Œå› ä¸ºé€šå¸¸æˆ‘ä»¬æƒ³è¦æ˜¾ç¤ºåƒ**è·¯çº¿çš„åç§°/IDæˆ–å„ç§è¯•å›¾åœ¨æŸç§ç›¸å…³æ„ä¹‰ä¸Šæ€»ç»“å®ƒçš„æŒ‡æ ‡**ä¹‹ç±»çš„ä¿¡æ¯ã€‚
- en: 'As an example, Iâ€™ll add at the top-left corner a **title for the map**, and
    at the bottom-right corner **two very basic KPIs for routes**: the *number of
    stops* and the *total distance* it traverses. We define the names of the different
    pieces of text we want to display (in the `TAG_` constants), and extract their
    respective values from `df_route_segments`, the dataframe having all the "segments
    data":'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸¾ä¸ªä¾‹å­ï¼Œæˆ‘ä¼šåœ¨å·¦ä¸Šè§’æ·»åŠ ä¸€ä¸ª**åœ°å›¾çš„æ ‡é¢˜**ï¼Œåœ¨å³ä¸‹è§’æ·»åŠ **ä¸¤ä¸ªéå¸¸åŸºç¡€çš„è·¯çº¿KPI**ï¼š*åœé ç«™çš„æ•°é‡*å’Œ*å®ƒç©¿è¶Šçš„æ€»è·ç¦»*ã€‚æˆ‘ä»¬å®šä¹‰äº†æˆ‘ä»¬æƒ³è¦æ˜¾ç¤ºçš„ä¸åŒæ–‡æœ¬çš„åç§°ï¼ˆåœ¨`TAG_`å¸¸é‡ä¸­ï¼‰ï¼Œå¹¶ä»`df_route_segments`ä¸­æå–å®ƒä»¬å„è‡ªçš„å€¼ï¼Œ`df_route_segments`æ˜¯åŒ…å«æ‰€æœ‰â€œæ®µæ•°æ®â€çš„æ•°æ®æ¡†ï¼š
- en: '[PRE16]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: 'For each piece of text we want to add, we need to convert it to HTML and add
    it to the map in a special way. The string having the HTML code for the text needs
    to go inside a `folium.Element`. These are the steps: (1) Make a *basic* HTML
    string with the info to be displayed, (2) style it with more HTML, and (3) add
    it to the mapâ€™s root HTML element. I know, talking about maps gets me lost too,
    so letâ€™s just do it.'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºæ¯ä¸ªæˆ‘ä»¬æƒ³è¦æ·»åŠ çš„æ–‡æœ¬ï¼Œæˆ‘ä»¬éœ€è¦å°†å…¶è½¬æ¢ä¸ºHTMLï¼Œå¹¶ä»¥ç‰¹æ®Šæ–¹å¼å°†å…¶æ·»åŠ åˆ°åœ°å›¾ä¸­ã€‚åŒ…å«æ–‡æœ¬HTMLä»£ç çš„å­—ç¬¦ä¸²éœ€è¦æ”¾å…¥ä¸€ä¸ª`folium.Element`ä¸­ã€‚æ­¥éª¤å¦‚ä¸‹ï¼š(1)
    åˆ›å»ºä¸€ä¸ª*åŸºæœ¬çš„*HTMLå­—ç¬¦ä¸²æ¥æ˜¾ç¤ºä¿¡æ¯ï¼Œ(2) ä½¿ç”¨æ›´å¤šHTMLè¿›è¡Œæ ·å¼è®¾ç½®ï¼Œ(3) å°†å…¶æ·»åŠ åˆ°åœ°å›¾çš„æ ¹HTMLå…ƒç´ ä¸­ã€‚æˆ‘çŸ¥é“ï¼Œè°ˆè®ºåœ°å›¾è®©æˆ‘ä¹Ÿä¼šè¿·å¤±ï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜æ˜¯ç›´æ¥åšå§ã€‚
- en: '**ğŸ’¡Tip:** If youâ€™re using Jupyter Notebook or Lab, I recommend you use the
    `IPython.display.HTML` class to gain quick feedback on your HTML code, like this:'
  id: totrans-108
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '**ğŸ’¡å°è´´å£«ï¼š** å¦‚æœä½ æ­£åœ¨ä½¿ç”¨Jupyter Notebookæˆ–Labï¼Œå»ºè®®ä½ ä½¿ç”¨`IPython.display.HTML`ç±»æ¥å¿«é€ŸæŸ¥çœ‹ä½ çš„HTMLä»£ç åé¦ˆï¼Œåƒè¿™æ ·ï¼š'
- en: '[PRE17]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: Adding a title to the map
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä¸ºåœ°å›¾æ·»åŠ æ ‡é¢˜
- en: 'First, create the basic HTML string for the title:'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œåˆ›å»ºæ ‡é¢˜çš„åŸºæœ¬HTMLå­—ç¬¦ä¸²ï¼š
- en: '[PRE18]'
  id: totrans-112
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: Second, style this basic HTML string as you wish. Here, I want the title to
    be black, located at the top-left of the map, and, **for improved readability,
    I want the text to have some background white shadow:**
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬äºŒï¼ŒæŒ‰ä½ å–œæ¬¢çš„æ ·å¼æ¥è°ƒæ•´è¿™ä¸ªåŸºæœ¬HTMLå­—ç¬¦ä¸²ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘å¸Œæœ›æ ‡é¢˜æ˜¯é»‘è‰²çš„ï¼Œä½äºåœ°å›¾çš„å·¦ä¸Šè§’ï¼Œå¹¶ä¸”**ä¸ºäº†æé«˜å¯è¯»æ€§ï¼Œæˆ‘å¸Œæœ›æ–‡å­—æœ‰ä¸€äº›ç™½è‰²èƒŒæ™¯é˜´å½±ï¼š**
- en: '[PRE19]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: '![](../Images/a80195cb4a8cdd736d9e79e6042ac78b.png)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a80195cb4a8cdd736d9e79e6042ac78b.png)'
- en: '**Figure 6.8.** Title of the map, invariant to zoom level'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾ 6.8.** åœ°å›¾çš„æ ‡é¢˜ï¼Œä¸å—ç¼©æ”¾çº§åˆ«å½±å“'
- en: 'That looks nice. Now, the same thing for the KPIs:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: çœ‹èµ·æ¥ä¸é”™ã€‚ç°åœ¨ï¼ŒåšåŒæ ·çš„äº‹æƒ…æ¥æ˜¾ç¤ºKPIï¼š
- en: '**Adding KPIs to the map**'
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: '**å°†KPIæ·»åŠ åˆ°åœ°å›¾ä¸­**'
- en: 'As we did before, first, we create the basic HTML string for the KPIs. For
    this case, the display will be different, and of course, it depends on personal
    taste: I like my KPIs displayed horizontally at the bottom-right of the map. Feel
    free to change the style parameters to ones that suit your aesthetic preferences.'
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: å’Œä¹‹å‰ä¸€æ ·ï¼Œé¦–å…ˆï¼Œæˆ‘ä»¬ä¸ºKPIåˆ›å»ºåŸºæœ¬çš„HTMLå­—ç¬¦ä¸²ã€‚å¯¹äºè¿™ç§æƒ…å†µï¼Œæ˜¾ç¤ºæ–¹å¼ä¼šæœ‰æ‰€ä¸åŒï¼Œå½“ç„¶ï¼Œä¹Ÿå–å†³äºä¸ªäººå£å‘³ï¼šæˆ‘å–œæ¬¢æˆ‘çš„KPIæ˜¾ç¤ºåœ¨åœ°å›¾çš„å³ä¸‹è§’ï¼Œæ°´å¹³æ’åˆ—ã€‚å¯ä»¥éšæ„æ›´æ”¹æ ·å¼å‚æ•°ï¼Œé€‰æ‹©ç¬¦åˆä½ å®¡ç¾åå¥½çš„æ ·å¼ã€‚
- en: '[PRE20]'
  id: totrans-120
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'The style is very similar, the only change is a slightly smaller font size.
    We keep the white background shadow as itâ€™s key for the clarity of the KPIs displayed:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: æ ·å¼éå¸¸ç›¸ä¼¼ï¼Œå”¯ä¸€çš„å˜åŒ–æ˜¯å­—ä½“ç¨å¾®å°ä¸€ç‚¹ã€‚æˆ‘ä»¬ä¿ç•™ç™½è‰²èƒŒæ™¯é˜´å½±ï¼Œå› ä¸ºå®ƒå¯¹å±•ç¤ºKPIçš„æ¸…æ™°åº¦è‡³å…³é‡è¦ï¼š
- en: '[PRE21]'
  id: totrans-122
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: '![](../Images/113d40a7fb08134fb884cabf905fb1b0.png)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/113d40a7fb08134fb884cabf905fb1b0.png)'
- en: '**Figure 6.9.** KPIs on top of the map, invariant to zoom level'
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾ 6.9.** åœ°å›¾ä¸Šæ–¹çš„KPIï¼Œä¸å—ç¼©æ”¾çº§åˆ«å½±å“'
- en: Alright, this is starting to look great! Letâ€™s combine both the title and KPIs
    now!
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: å¥½çš„ï¼Œå¼€å§‹çœ‹èµ·æ¥å¾ˆæ£’äº†ï¼ç°åœ¨æˆ‘ä»¬æ¥å°†æ ‡é¢˜å’ŒKPIç»“åˆèµ·æ¥ï¼
- en: '[PRE22]'
  id: totrans-126
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: '![](../Images/b7446aa528e9fd1534d9d3f85362f53f.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b7446aa528e9fd1534d9d3f85362f53f.png)'
- en: '**Figure 6.10.** Summary information of the route, title at the top and KPIs
    at the bottom, invariant to zoom level'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾ 6.10.** è·¯çº¿çš„æ€»ç»“ä¿¡æ¯ï¼Œæ ‡é¢˜åœ¨é¡¶éƒ¨ï¼ŒKPIåœ¨åº•éƒ¨ï¼Œä¸å—ç¼©æ”¾çº§åˆ«å½±å“'
- en: 'Thanks to the text weâ€™ve added, the map now conveys more useful information
    on the route (and looks more professional, doesnâ€™t it?). Without even moving the
    mouse, **we can see valuable information on the corners; and thanks to interactivity,
    with a very quick hovering around, we can see the names and visiting order of
    the different sites, as well as the distance between any pair of stops**. *Letâ€™s
    make this functionality* ***reusable*** *by wrapping it up into helper functions*,
    and letâ€™s create a new, more general function, `display_route_on_map`, that will
    create a map like `plot_route_on_map` did, with the added option of including
    the name and KPI information to the map. First, the functions to obtain the HTML
    strings:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: æ„Ÿè°¢æˆ‘ä»¬æ·»åŠ çš„æ–‡æœ¬ï¼Œåœ°å›¾ç°åœ¨ä¼ è¾¾äº†æ›´å¤šæœ‰ç”¨çš„è·¯çº¿ä¿¡æ¯ï¼ˆçœ‹èµ·æ¥ä¹Ÿæ›´ä¸“ä¸šäº†ï¼Œä¸æ˜¯å—ï¼Ÿï¼‰ã€‚ç”šè‡³ä¸éœ€è¦ç§»åŠ¨é¼ æ ‡ï¼Œ**æˆ‘ä»¬å°±èƒ½çœ‹åˆ°åœ°å›¾è§’è½çš„æœ‰ä»·å€¼ä¿¡æ¯ï¼›è€Œå¾—ç›Šäºäº’åŠ¨æ€§ï¼Œé€šè¿‡å¿«é€Ÿæ‚¬åœï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸åŒæ™¯ç‚¹çš„åç§°å’Œå‚è§‚é¡ºåºï¼Œä»¥åŠä»»æ„ä¸¤ä¸ªåœé ç‚¹ä¹‹é—´çš„è·ç¦»**ã€‚*è®©æˆ‘ä»¬é€šè¿‡å°†å…¶å°è£…ä¸ºå¸®åŠ©å‡½æ•°ï¼Œä½¿è¿™ä¸ªåŠŸèƒ½*
    ***å¯é‡ç”¨*** *ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªæ–°çš„ã€æ›´é€šç”¨çš„å‡½æ•°`display_route_on_map`ï¼Œè¯¥å‡½æ•°å°†åƒ`plot_route_on_map`ä¸€æ ·åˆ›å»ºåœ°å›¾ï¼Œå¢åŠ äº†å°†åç§°å’ŒKPIä¿¡æ¯åŒ…å«åˆ°åœ°å›¾ä¸Šçš„é€‰é¡¹ã€‚é¦–å…ˆæ˜¯è·å–HTMLå­—ç¬¦ä¸²çš„å‡½æ•°ï¼š*
- en: '[PRE23]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'We can control the addition of the title and KPIs to the map with the attribute
    `include_kpis` of the new function:'
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥é€šè¿‡æ–°å‡½æ•°çš„`include_kpis`å±æ€§æ¥æ§åˆ¶æ˜¯å¦å°†æ ‡é¢˜å’ŒKPIæ·»åŠ åˆ°åœ°å›¾ä¸­ï¼š
- en: '[PRE24]'
  id: totrans-132
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'Letâ€™s do a final test of our `display_route_on_map` function with a tour on
    a different city: **New York**. The dataframe below has a set of iconic sites
    of the city (and a random hotel) in no particular order:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ç”¨ä¸€ä¸ªä¸åŒåŸå¸‚çš„æ—…æ¸¸è¿›è¡Œæœ€ç»ˆæµ‹è¯•ï¼Œ**çº½çº¦**ã€‚ä¸‹é¢çš„æ•°æ®æ¡†åŒ…å«äº†è¿™åº§åŸå¸‚çš„ä¸€äº›æ ‡å¿—æ€§æ™¯ç‚¹ï¼ˆå’Œä¸€å®¶éšæœºé…’åº—ï¼‰ï¼Œé¡ºåºæ²¡æœ‰ç‰¹åˆ«è§„å®šï¼š
- en: '[PRE25]'
  id: totrans-134
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: '![](../Images/401caa233636364b644aaf54e86c5e26.png)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/401caa233636364b644aaf54e86c5e26.png)'
- en: 'With the dataframe of the route ready, a nice visualization is just a single
    function call away:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: å½“è·¯çº¿çš„æ•°æ®æ¡†å‡†å¤‡å¥½æ—¶ï¼Œä¸€ä¸ªæ¼‚äº®çš„å¯è§†åŒ–å°±åªå·®è°ƒç”¨ä¸€ä¸ªå‡½æ•°ï¼š
- en: '[PRE26]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: '![](../Images/712885bbfb26632d9d605e6015d2e28b.png)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/712885bbfb26632d9d605e6015d2e28b.png)'
- en: '**Figure 6.11.** Interactive map for a random route in New York'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: '**å›¾6.11.** çº½çº¦éšæœºè·¯çº¿çš„äº’åŠ¨åœ°å›¾'
- en: 'We get a simple, yet powerful visualization of the route on top of Manhattan.
    At a glance, we know how much distance the route covers, and we donâ€™t even need
    to bother counting red markers: the â€œNum stopsâ€ KPI is telling us already. For
    more context, **all markers and route segments are interactive and will display
    some useful information in pop-ups** when we caringly pass our mouse over them.
    Mission accomplished!'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¾—åˆ°äº†æ›¼å“ˆé¡¿è·¯çº¿çš„ä¸€ä¸ªç®€å•è€Œå¼ºå¤§çš„å¯è§†åŒ–ã€‚åªéœ€ä¸€çœ¼ï¼Œæˆ‘ä»¬å°±èƒ½çŸ¥é“è·¯çº¿çš„è¦†ç›–è·ç¦»ï¼Œç”šè‡³ä¸éœ€è¦éº»çƒ¦åœ°æ•°çº¢è‰²æ ‡è®°ï¼šå› ä¸ºâ€œç«™ç‚¹æ•°é‡â€KPIå·²ç»å‘Šè¯‰äº†æˆ‘ä»¬ã€‚æ›´å…·ä½“åœ°è¯´ï¼Œ**æ‰€æœ‰æ ‡è®°å’Œè·¯çº¿æ®µéƒ½æ˜¯äº’åŠ¨çš„ï¼Œå½“æˆ‘ä»¬å°å¿ƒåœ°å°†é¼ æ ‡æ‚¬åœåœ¨å®ƒä»¬ä¸Šé¢æ—¶ï¼Œä¼šå¼¹å‡ºä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯**ã€‚ä»»åŠ¡å®Œæˆï¼
- en: 4\. Conclusion (or planning for next sprint)
  id: totrans-141
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 4\. ç»“è®ºï¼ˆæˆ–ä¸‹ä¸€ä¸ªå†²åˆºçš„è®¡åˆ’ï¼‰
- en: In this article, weâ€™ve developed a pragmatic approach to taking generic routes
    stored in dataframes and displaying them on top of maps using interactive markers
    and segments that help us gain more context and get more information. If that
    was all you were after, I hope Iâ€™ve served you well and youâ€™re able to expand
    on it for your own projects.
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æœ¬æ–‡ä¸­ï¼Œæˆ‘ä»¬å¼€å‘äº†ä¸€ç§åŠ¡å®çš„æ–¹æ³•ï¼Œåˆ©ç”¨æ•°æ®æ¡†ä¸­å­˜å‚¨çš„é€šç”¨è·¯çº¿ï¼Œå¹¶é€šè¿‡äº’åŠ¨æ ‡è®°å’Œæ®µè½å°†å…¶æ˜¾ç¤ºåœ¨åœ°å›¾ä¸Šï¼Œè¿™æœ‰åŠ©äºæˆ‘ä»¬è·å¾—æ›´å¤šèƒŒæ™¯ä¿¡æ¯å¹¶è·å–æ›´å¤šæ•°æ®ã€‚å¦‚æœè¿™æ­£æ˜¯ä½ æ‰€éœ€è¦çš„ï¼Œæˆ‘å¸Œæœ›æˆ‘èƒ½ä¸ºä½ æä¾›å¸®åŠ©ï¼Œå¹¶ä¸”ä½ èƒ½å¤Ÿåœ¨è‡ªå·±çš„é¡¹ç›®ä¸­æ‰©å±•è¿™ä¸€ç‚¹ã€‚
- en: If youâ€™re a reader of the [â€œ**An Intelligent Decision Support System for Tourism
    in Python**â€ article series](https://medium.com/@carlosjuribe/list/an-intelligent-decision-support-system-for-tourism-in-python-b6ba165b4236),
    and you want to keep learning **applied prescriptive analytics** through the building
    of a trip planning system, please keep on reading, as in the next sprint **weâ€™re
    going to integrate this mapping functionality with the Traveling Salesman Optimizer**
    we created in the previous sprint, so we can easily evaluate the optimal tours
    we generate. Stay tuned to witness the *tour de force* weâ€™re gonna build together!
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ æ˜¯[â€œ**Pythonä¸­çš„æ™ºèƒ½æ—…æ¸¸å†³ç­–æ”¯æŒç³»ç»Ÿ**â€æ–‡ç« ç³»åˆ—](https://medium.com/@carlosjuribe/list/an-intelligent-decision-support-system-for-tourism-in-python-b6ba165b4236)çš„è¯»è€…ï¼Œå¹¶ä¸”å¸Œæœ›é€šè¿‡æ„å»ºæ—…è¡Œè§„åˆ’ç³»ç»Ÿç»§ç»­å­¦ä¹ **åº”ç”¨æ€§è§„èŒƒåˆ†æ**ï¼Œè¯·ç»§ç»­é˜…è¯»ï¼Œå› ä¸ºåœ¨ä¸‹ä¸€ä¸ªå†²åˆºä¸­ï¼Œ**æˆ‘ä»¬å°†æŠŠè¿™ä¸ªåœ°å›¾åŠŸèƒ½ä¸ä¹‹å‰å†²åˆºä¸­åˆ›å»ºçš„æ—…è¡Œå•†ä¼˜åŒ–å™¨é›†æˆåœ¨ä¸€èµ·**ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥è½»æ¾è¯„ä¼°ç”Ÿæˆçš„æœ€ä½³æ—…æ¸¸è·¯çº¿ã€‚æ•¬è¯·å…³æ³¨ï¼Œè§è¯æˆ‘ä»¬å°†å…±åŒæ„å»ºçš„*å£®ä¸½æˆæœ*ï¼
- en: '![Carlos Jimenez Uribe](../Images/5bbb2a597db31fdc3ff42b2ff8a4aa78.png)'
  id: totrans-144
  prefs: []
  type: TYPE_IMG
  zh: '![å¡æ´›æ–¯Â·å‰æ¢…å†…æ–¯Â·ä¹Œé‡Œè´](../Images/5bbb2a597db31fdc3ff42b2ff8a4aa78.png)'
- en: '[Carlos Jimenez Uribe](https://medium.com/@carlosjuribe?source=post_page-----44f8d25d0761--------------------------------)'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: '[å¡æ´›æ–¯Â·å‰æ¢…å†…æ–¯Â·ä¹Œé‡Œè´](https://medium.com/@carlosjuribe?source=post_page-----44f8d25d0761--------------------------------)'
- en: An intelligent decision support system for tourism in Python
  id: totrans-146
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä½¿ç”¨Pythonå¼€å‘çš„æ—…æ¸¸æ™ºèƒ½å†³ç­–æ”¯æŒç³»ç»Ÿ
- en: '[View list](https://medium.com/@carlosjuribe/list/an-intelligent-decision-support-system-for-tourism-in-python-b6ba165b4236?source=post_page-----44f8d25d0761--------------------------------)6
    stories![](../Images/4d41d313535ec5ba63dd9f3d2c823d70.png)![](../Images/f50edafda4058f43f32e514b3400fbbd.png)![](../Images/84bde15c0216d8a1a8bba8a299b5ba52.png)'
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: '[æŸ¥çœ‹åˆ—è¡¨](https://medium.com/@carlosjuribe/list/an-intelligent-decision-support-system-for-tourism-in-python-b6ba165b4236?source=post_page-----44f8d25d0761--------------------------------)6ç¯‡æ•…äº‹![](../Images/4d41d313535ec5ba63dd9f3d2c823d70.png)![](../Images/f50edafda4058f43f32e514b3400fbbd.png)![](../Images/84bde15c0216d8a1a8bba8a299b5ba52.png)'
- en: Thanks for reading, and see you in the next one! ğŸ“ˆğŸ˜Š
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: æ„Ÿè°¢é˜…è¯»ï¼Œæˆ‘ä»¬ä¸‹æ¬¡å†è§ï¼ğŸ“ˆğŸ˜Š
- en: Feel free to follow me, ask me questions, **give me feedback**, or contact me
    on [LinkedIn](https://www.linkedin.com/in/carlosjuribe/).
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: éšæ—¶æ¬¢è¿å…³æ³¨æˆ‘ï¼Œå‘æˆ‘æé—®ï¼Œ**ç»™æˆ‘åé¦ˆ**ï¼Œæˆ–é€šè¿‡[LinkedIn](https://www.linkedin.com/in/carlosjuribe/)ä¸æˆ‘è”ç³»ã€‚
