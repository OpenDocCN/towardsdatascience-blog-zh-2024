- en: 'Welch’s t-Test: The Reliable Way to Compare 2 Population Means with Unequal
    Variances'
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
- en: 原文：[https://towardsdatascience.com/welchs-t-test-the-reliable-way-to-compare-2-population-means-with-unequal-variances-bbf7a62967bc?source=collection_archive---------6-----------------------#2024-06-14](https://towardsdatascience.com/welchs-t-test-the-reliable-way-to-compare-2-population-means-with-unequal-variances-bbf7a62967bc?source=collection_archive---------6-----------------------#2024-06-14)
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
- en: Discover why Welch’s t-Test is the go-to method for accurate statistical comparison,
    even when variances differ.
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '[](https://vitorihaldijiran.medium.com/?source=post_page---byline--bbf7a62967bc--------------------------------)[![Vito
    Rihaldijiran](../Images/bc704b6dbbe4c36c5d35d1b83810094f.png)](https://vitorihaldijiran.medium.com/?source=post_page---byline--bbf7a62967bc--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--bbf7a62967bc--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--bbf7a62967bc--------------------------------)
    [Vito Rihaldijiran](https://vitorihaldijiran.medium.com/?source=post_page---byline--bbf7a62967bc--------------------------------)'
  prefs: []
  type: TYPE_NORMAL
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--bbf7a62967bc--------------------------------)
    ·8 min read·Jun 14, 2024
  prefs: []
  type: TYPE_NORMAL
- en: --
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/496b36f28f38276b8d3995b7d278c81d.png)'
  prefs: []
  type: TYPE_IMG
- en: Photo by [Simon Maage](https://unsplash.com/@simonmaage) on [Unsplash](https://unsplash.com/photos/two-pizzas-sitting-on-top-of-plates-on-a-table-eL_eKs7HkLU)
  prefs: []
  type: TYPE_NORMAL
- en: 'Part 1: Background'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'In the first semester of my postgrad, I had the opportunity to take the course
    STAT7055: Introductory Statistics for Business and Finance. Throughout the course,
    I definitely felt a bit exhausted at times, but the amount of knowledge I gained
    about the application of various statistical methods in different situations was
    truly priceless. During the 8th week of lectures, something really interesting
    caught my attention, specifically the concept of Hypothesis Testing when comparing
    two populations. I found it fascinating to learn about how the approach differs
    based on whether the samples are independent or paired, as well as what to do
    when we know or don’t know the population variance of the two populations, along
    with how to conduct hypothesis testing for two proportions. However, there is
    one aspect that wasn’t covered in the material, and it keeps me wondering how
    to tackle this particular scenario, which is performing Hypothesis Testing from
    two population means when the variances are unequal, known as the **Welch t-Test**.'
  prefs: []
  type: TYPE_NORMAL
- en: To grasp the concept of how the Welch t-Test is applied, we can explore a dataset
    for the example case. Each stage of this process involves utilizing the dataset
    from real-world data.
  prefs: []
  type: TYPE_NORMAL
- en: 'Part 2: The Dataset'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: 'The dataset I’m using contains real-world data on World Agricultural Supply
    and Demand Estimates (WASDE) that are regularly updated. The WASDE dataset is
    put together by the World Agricultural Outlook Board (WAOB). It is a monthly report
    that provides annual predictions for various global regions and the United States
    when it comes to wheat, rice, coarse grains, oilseeds, and cotton. Furthermore,
    the dataset also covers forecasts for sugar, meat, poultry, eggs, and milk in
    the United States. It is sourced from the Nasdaq website, and you are welcome
    to access it for free here: [WASDE dataset](https://data.nasdaq.com/databases/WASDE).
    There are 3 datasets, but I only use the first one, which is the Supply and Demand
    Data. Column definitions can be seen here:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/8a10961af52d6fff8213aa7d77495e7f.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 1: Column Definitions by [NASDAQ](https://data.nasdaq.com/databases/WASDE)'
  prefs: []
  type: TYPE_NORMAL
- en: I am going to use two different samples from specific regions, commodities,
    and items to simplify the testing process. Additionally, we will be using the
    R Programming Language for the end-to-end procedure.
  prefs: []
  type: TYPE_NORMAL
- en: 'Now let’s do a proper data preparation:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE0]'
  prefs: []
  type: TYPE_PRE
- en: I divided two samples into two different regions, namely Argentina and Australia.
    And the focus is production in wheat commodities.
  prefs: []
  type: TYPE_NORMAL
- en: Now we’re set. But wait..
  prefs: []
  type: TYPE_NORMAL
- en: Before delving further into the application of the Welch t-Test, I can’t help
    but wonder why it is necessary to test whether the two population variances are
    equal or not.
  prefs: []
  type: TYPE_NORMAL
- en: 'Part 3: Testing Equality of Variances'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When conducting hypothesis testing to compare two population means without knowledge
    of the population variances, it’s crucial to confirm the equality of variances
    in order to select the appropriate statistical test. If the variances turn out
    to be the same, we opt for the pooled variance t-test; otherwise, we can use Welch’s
    t-test. This important step guarantees the precision of the outcomes, since using
    an incorrect test could result in wrong conclusions due to higher risks of Type
    I and Type II errors. By checking for equality in variances, we make sure that
    the hypothesis testing process relies on accurate assumptions, ultimately leading
    to more dependable and valid conclusions.
  prefs: []
  type: TYPE_NORMAL
- en: Then how do we test the two population variances?
  prefs: []
  type: TYPE_NORMAL
- en: 'We have to generate two hypotheses as below:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/1badb6467e2577b9c1e5d5e12b045426.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 2: null and alternative hypotheses for testing equality variances by
    author'
  prefs: []
  type: TYPE_NORMAL
- en: 'The rule of thumb is very simple:'
  prefs: []
  type: TYPE_NORMAL
- en: If the test statistic falls into rejection region, then Reject H0 or Null Hypothesis.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: Otherwise, we Fail to Reject H0 or Null Hypothesis.
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
- en: 'We can set the hypotheses like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE1]'
  prefs: []
  type: TYPE_PRE
- en: Now we should do the test statistic. But how do we get this test statistic?
    we use **F-Test.**
  prefs: []
  type: TYPE_NORMAL
- en: An F-test is any statistical test used to compare the variances of two samples
    or the ratio of variances between multiple samples. The test statistic, random
    variable F, is used to determine if the tested data has an F-distribution under
    the true null hypothesis, and true customary assumptions about the error term.
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/cc246bde9db07f87f7f2c5037cc78124.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 3: Illustration Probability Density Function (PDF) of F Distribution
    by [Wikipedia](https://en.wikipedia.org/wiki/F-distribution)'
  prefs: []
  type: TYPE_NORMAL
- en: 'we can generate the test statistic value with dividing **two sample variances**
    like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/939a42400c131cb5b197645d6c10bf33.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 4: F test formula by author'
  prefs: []
  type: TYPE_NORMAL
- en: 'and the rejection region is:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/105d6c38ba508ff4c923308c85641cdd.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 5: Rejection Region of F test by author'
  prefs: []
  type: TYPE_NORMAL
- en: where n is the sample size and alpha is significance level. so when the F value
    falls into either of these rejection region, we reject null hypothesis.
  prefs: []
  type: TYPE_NORMAL
- en: but..
  prefs: []
  type: TYPE_NORMAL
- en: 'the trick is: The labeling of sample 1 and sample 2 is actually random, so
    let’s **make sure to place the larger sample variance on top every time**. This
    way, our F-statistic will consistently be greater than 1, and **we just need to
    refer to the upper cut-off to reject H0 at significance level α whenever**.'
  prefs: []
  type: TYPE_NORMAL
- en: 'we can do this by:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE2]'
  prefs: []
  type: TYPE_PRE
- en: 'we’ll use 5% significance level (0.05), so the decision rule is:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE3]'
  prefs: []
  type: TYPE_PRE
- en: the result is **we reject Null Hypothesis at significance level of 5%**, in
    other words, from this test we believe the population variances from the two populations
    are not equal. Now we know why we should use Welch t-Test instead of Pooled Variance
    t-Test.
  prefs: []
  type: TYPE_NORMAL
- en: 'Part 4: The main course, Welch t-Test'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: The Welch t-test, also called Welch’s unequal variances t-test, is a statistical
    method used for comparing the means of two separate samples. Instead of assuming
    equal variances like the standard pooled variance t-test, the Welch t-test is
    more robust as it does not make this assumption. This adjustment in degrees of
    freedom leads to a more precise evaluation of the difference between the two sample
    means. By not assuming equal variances, the Welch t-test offers a more dependable
    outcome when working with real-world data where this assumption may not be true.
    It is preferred for its adaptability and dependability, ensuring that conclusions
    drawn from statistical analyses remain valid even if the equal variances assumption
    is not met.
  prefs: []
  type: TYPE_NORMAL
- en: 'The test statistic formula is:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/8e868f241b0b45b6848abeb41ea68fac.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 6: test statistic formula of Welch t-Test by author'
  prefs: []
  type: TYPE_NORMAL
- en: 'where:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/a4f7446496cfeaeca33ea42a07ef1bdf.png)'
  prefs: []
  type: TYPE_IMG
- en: 'and the Degree of Freedom can be defined like this:'
  prefs: []
  type: TYPE_NORMAL
- en: '![](../Images/1f96a4ce53fcb1a6f40483856d451659.png)'
  prefs: []
  type: TYPE_IMG
- en: 'Figure 7: Degree of Freedom formula by author'
  prefs: []
  type: TYPE_NORMAL
- en: The rejection region for the Welch t-test depends on the chosen significance
    level and whether the test is one-tailed or two-tailed.
  prefs: []
  type: TYPE_NORMAL
- en: '**Two-tailed test**: The null hypothesis is rejected if the absolute value
    of the test statistic |t| is greater than the critical value from the t-distribution
    with ν degrees of freedom at α/2.'
  prefs: []
  type: TYPE_NORMAL
- en: ∣t∣>tα/2,ν​
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**One-tailed test**: The null hypothesis is rejected if the test statistic
    t is greater than the critical value from the t-distribution with ν degrees of
    freedom at α for an upper-tailed test, or if t is less than the negative critical
    value for a lower-tailed test.'
  prefs: []
  type: TYPE_NORMAL
- en: '**Upper-tailed test**: t > tα,ν'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '**Lower-tailed test**: t < −tα,ν'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: So let’s do one example with **One-tailed Welch t-Test.**
  prefs: []
  type: TYPE_NORMAL
- en: 'lets generate the hypotheses:'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE4]'
  prefs: []
  type: TYPE_PRE
- en: 'this is a **Upper Tailed Test,** so the rejection region is: t > tα,ν'
  prefs: []
  type: TYPE_NORMAL
- en: 'and by using the formula given above, and by using same significance level
    (0.05):'
  prefs: []
  type: TYPE_NORMAL
- en: '[PRE5]'
  prefs: []
  type: TYPE_PRE
- en: the result is **we Fail to Reject H0 at significance level of 5%, then Population
    mean of Wheat production in Argentina equals that in Australia.**
  prefs: []
  type: TYPE_NORMAL
- en: That’s how to conduct Welch t-Test. Now your turn. Happy experimenting!
  prefs: []
  type: TYPE_NORMAL
- en: 'Part 5: Conclusion'
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: When comparing two population means during hypothesis testing, it is really
    important to start by checking if the variances are equal. This initial step is
    crucial as it helps in deciding which statistical test to use, guaranteeing precise
    and dependable outcomes. If it turns out that the variances are indeed equal,
    you can go ahead and apply the standard t-test with pooled variances. However,
    in cases where the variances are not equal, it is recommended to go with Welch’s
    t-test.
  prefs: []
  type: TYPE_NORMAL
- en: Welch’s t-test provides a strong solution for comparing means when the assumption
    of equal variances does not hold true. By adjusting the degrees of freedom to
    accommodate for the uneven variances, Welch’s t-test gives a more precise and
    dependable evaluation of the statistical importance of the difference between
    two sample means. This adaptability makes it a popular choice in various practical
    situations where sample sizes and variances can vary significantly.
  prefs: []
  type: TYPE_NORMAL
- en: In conclusion, checking for equality of variances and utilizing Welch’s t-test
    when needed ensures the accuracy of hypothesis testing. This approach reduces
    the chances of Type I and Type II errors, resulting in more reliable conclusions.
    By selecting the appropriate test based on the equality of variances, we can confidently
    analyze the findings and make well-informed decisions grounded on empirical evidence.
  prefs: []
  type: TYPE_NORMAL
- en: Resources
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
- en: '*Nasdaq Data Link*. (n.d.). *Nasdaq Data Link*. Retrieved June 14, 2024, from
    [https://data.nasdaq.com](https://data.nasdaq.com)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*F-Test in Statistics*. (2024, June 14). *F-Test in Statistics*. [https://www.geeksforgeeks.org/f-test/](https://www.geeksforgeeks.org/f-test/)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
- en: '*Two Independent Samples Unequal Variance (Welch’s Test) — ENV710 Statistics
    Review Website*. (n.d.). *Two Independent Samples Unequal Variance (Welch’s Test)
    — ENV710 Statistics Review Website*. Retrieved June 14, 2024, from [https://sites.nicholas.duke.edu/statsreview/means/welch/](https://sites.nicholas.duke.edu/statsreview/means/welch/)'
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
