<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Getting Started with Powerful Data Tables in Your Python Web Apps</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Getting Started with Powerful Data Tables in Your Python Web Apps</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/getting-started-with-powerful-data-tables-in-your-python-web-apps-1e48dc44caf2?source=collection_archive---------1-----------------------#2024-10-06">https://towardsdatascience.com/getting-started-with-powerful-data-tables-in-your-python-web-apps-1e48dc44caf2?source=collection_archive---------1-----------------------#2024-10-06</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="cbaf" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">Using AG Grid to build a Finance app in pure Python with Reflex</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@tgotsman12?source=post_page---byline--1e48dc44caf2--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Tom Gotsman" class="l ep by dd de cx" src="../Images/c19e7853986a9b242c91b7479765fddf.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*uIStUV67opx_3bQgzoE-RA.png"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--1e48dc44caf2--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@tgotsman12?source=post_page---byline--1e48dc44caf2--------------------------------" rel="noopener follow">Tom Gotsman</a></p></div></div></div><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ib ic ah ai aj ak al am an ao ap aq ar id ie if" disabled="">Follow</button></p></div></div></span></div></div><div class="l ig"><span class="bf b bg z dx"><div class="ab cn ih ii ij"><div class="ik il ab"><div class="bf b bg z dx ab im"><span class="in l ig">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--1e48dc44caf2--------------------------------" rel="noopener follow"><p class="bf b bg z io ip iq ir is it iu iv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">6 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Oct 6, 2024</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w ea eb q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon ed in kg kh ki"><div class=""><div class="kj kk kl km kn ko kp am kq kr ks ki"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kt ku kv kw kx ky kz"><p class="bf b dy z dx"><span class="kk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kj lc ld ab q ee le lf" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lb"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count la lb">1</span></p></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lg k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lh an ao ap id li lj lk" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep ll cn"><div class="l ae"><div class="ab cb"><div class="lm ln lo lp lq lr ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ml"><img src="../Images/a43f1c7b91e88cd20e85272af6acbe18.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*7slerBx3BxMwkHBxM-2_mQ.gif"/></div></div></figure><p id="788c" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">These past few months, I’ve been exploring various data visualization and manipulation tools for web applications. As a Python developer, I often need to handle large datasets and display them in interactive, customizable tables. One question that consistently bothered me was: How can I build a powerful data grid UI that integrates seamlessly with my Python backend?</p><p id="e10f" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">There are countless options out there to build sophisticated data grids, but as a Python engineer, I have limited experience with JavaScript or any front-end framework. I was looking for a way to create a feature-rich data grid using only the language I’m most comfortable with — Python!</p><p id="5413" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">I decided to use Reflex, an open-source framework that lets me build web apps entirely in Python. What’s more, Reflex now offers integration with <a class="af nt" href="https://www.ag-grid.com" rel="noopener ugc nofollow" target="_blank">AG Grid</a>, a feature-rich data grid library designed for displaying and manipulating tabular data in web applications which offers a wide array of functionalities including:</p><p id="a0ad" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">- In-place cell editing</p><p id="ae00" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">- Real-time data updates</p><p id="93f0" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">- Pagination and infinite scrolling</p><p id="49d6" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">- Column filtering, reordering, resizing, and hiding</p><p id="18ca" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">- Row grouping and aggregation</p><p id="69be" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">- Built-in theming</p><p id="3190" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk"><strong class="mz fr"><em class="nu">Disclaimer:</em></strong><em class="nu"> I work as a Founding Engineer at Reflex where I contribute to the open-source framework.</em></p><p id="eab8" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">In this tutorial we will cover how to build a full Finance app from scratch in pure Python to display stock data in an interactive grid and graph with advanced features like sorting, filtering, and pagination — Check out the full live <a class="af nt" href="https://ag-grid-app.reflex.run" rel="noopener ugc nofollow" target="_blank">app</a> and <a class="af nt" href="https://github.com/reflex-dev/reflex-examples/tree/main/ag_grid_finance" rel="noopener ugc nofollow" target="_blank">code</a>.</p></div></div></div><div class="ab cb nv nw nx ny" role="separator"><span class="nz by bm oa ob oc"/><span class="nz by bm oa ob oc"/><span class="nz by bm oa ob"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="2053" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk"><strong class="mz fr">Setup</strong></p><p id="5dcf" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">First we import the necessary libraries, including yfinance for fetching the stock data.</p><pre class="mm mn mo mp mq od oe of bp og bb bk"><span id="3d0c" class="oh oi fq oe b bg oj ok l ol om">import reflex as rx<br/>from reflex_ag_grid import ag_grid<br/>import yfinance as yf<br/>from datetime import datetime, timedelta<br/>import pandas as pd</span></pre><p id="54da" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk"><strong class="mz fr">Fetching and transforming data</strong></p><p id="9ea7" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Next, we define the State class, which contains the application’s state and logic. The <code class="cx on oo op oe b">fetch_stock_data</code> function fetches stock data for the specified companies and transforms it into a format suitable for display in AG Grid. We call this function when clicking on a button, by linking the <code class="cx on oo op oe b">on_click</code> trigger of the button to this state function.</p><p id="789c" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">We define state variables, any fields in your app that may change over time (A State Var is directly rendered into the frontend of the app).</p><p id="b434" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">The <code class="cx on oo op oe b">data</code> state variable stores the raw stock data fetched from Yahoo Finance. We transform this data to round the values and store it as a list of dictionaries, which is the format that AG Grid expects. The transformed data is sorted by date and ticker in descending order and stored in the <code class="cx on oo op oe b">dict_data</code> state variable.</p><p id="8ef3" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">The <code class="cx on oo op oe b">datetime_now</code> state variable stores the current datetime when the data was fetched.</p><pre class="mm mn mo mp mq od oe of bp og bb bk"><span id="86a8" class="oh oi fq oe b bg oj ok l ol om"># The list of companies to fetch data for<br/>companies = ["AAPL", "MSFT", "GOOGL", "AMZN", "META"]<br/><br/>class State(rx.State):<br/>    # The data fetched from Yahoo Finance<br/>    data: pd.DataFrame<br/>    # The data to be displayed in the AG Grid<br/>    dict_data: list[dict] = [\{}]<br/>    # The datetime of the current fetched data<br/>    datetime_now: datetime = datetime.now()<br/><br/>    def fetch_stock_data(self):<br/>        self.datetime_now = datetime.now()<br/>        start_date = self.datetime_now - timedelta(days=180)<br/><br/>        # Fetch data for all tickers in a single download<br/>        self.data = yf.download(companies, start=start_date, end=self.datetime_now, group_by='ticker')<br/>        rows = []<br/>        for ticker in companies:<br/>            # Check if the DataFrame has a multi-level column index (for multiple tickers)<br/>            if isinstance(self.data.columns, pd.MultiIndex):<br/>                ticker_data = self.data[ticker]  # Select the data for the current ticker<br/>            else:<br/>                ticker_data = self.data  # If only one ticker, no multi-level index exists<br/><br/>            for date, row in ticker_data.iterrows():<br/>                rows.append({<br/>                    "ticker": ticker,<br/>                    "date": date.strftime("%Y-%m-%d"),<br/>                    "open": round(row["Open"], 2),<br/>                    "high": round(row["High"], 2),<br/>                    "mid": round((row["High"] + row["Low"]) / 2, 2),<br/>                    "low": round(row["Low"], 2),<br/>                    "close": round(row["Close"], 2),<br/>                    "volume": int(row["Volume"]),<br/>                })<br/>        <br/>        self.dict_data = sorted(rows, key=lambda x: (x["date"], x["ticker"]), reverse=True)</span></pre><pre class="oq od oe of bp og bb bk"><span id="78d9" class="oh oi fq oe b bg oj ok l ol om">rx.button(<br/>    "Fetch Latest Data", <br/>    on_click=State.fetch_stock_data, <br/>)</span></pre></div></div></div><div class="ab cb nv nw nx ny" role="separator"><span class="nz by bm oa ob oc"/><span class="nz by bm oa ob oc"/><span class="nz by bm oa ob"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="d5d4" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk"><strong class="mz fr">Defining the AG Grid columns</strong></p></div></div><div class="mr"><div class="ab cb"><div class="lm or ln os lo ot cf ou cg ov ci bh"><figure class="mm mn mo mp mq mr ox oy paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ow"><img src="../Images/410489edcdb8b2cad6343e9d68d6e819.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*cJKsTAZTKvw9GA0D16y0CA.png"/></div></div><figcaption class="oz pa pb mj mk pc pd bf b bg z dx">Columns of AG Grid by Author</figcaption></figure></div></div></div><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="9f80" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">The <code class="cx on oo op oe b">column_defs</code> list defines the columns to be displayed in the AG Grid. The <code class="cx on oo op oe b">header_name</code> is used to set the header title for each column. The <code class="cx on oo op oe b">field</code> key represents the id of each column. The <code class="cx on oo op oe b">filter</code> key is used to insert the filter feature.</p><pre class="mm mn mo mp mq od oe of bp og bb bk"><span id="1b8b" class="oh oi fq oe b bg oj ok l ol om">column_defs = [<br/>    ag_grid.column_def(field="ticker", header_name="Ticker", filter=ag_grid.filters.text, checkbox_selection=True),<br/>    ag_grid.column_def(field="date", header_name="Date", filter=ag_grid.filters.date),<br/>    ag_grid.column_def(field="open", header_name="Open", filter=ag_grid.filters.number),<br/>    ag_grid.column_def(field="high", header_name="High", filter=ag_grid.filters.number),<br/>    ag_grid.column_def(field="low", header_name="Low", filter=ag_grid.filters.number),<br/>    ag_grid.column_def(field="close", header_name="Close", filter=ag_grid.filters.number),<br/>    ag_grid.column_def(field="volume", header_name="Volume", filter=ag_grid.filters.number),<br/>]</span></pre><p id="30b3" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk"><strong class="mz fr">Displaying AG Grid</strong></p></div></div><div class="mr"><div class="ab cb"><div class="lm or ln os lo ot cf ou cg ov ci bh"><figure class="mm mn mo mp mq mr ox oy paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk pe"><img src="../Images/3e62e5927a59fff92bcf2004f089b96e.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*dNm352B_sCIW7wJKW04x_Q.png"/></div></div><figcaption class="oz pa pb mj mk pc pd bf b bg z dx">AG Grid by Author</figcaption></figure></div></div></div><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="cfed" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Now for the most important part of our app, AG Grid itself!</p><p id="3afd" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">• <code class="cx on oo op oe b">id</code> is required because it uniquely identifies the Ag-Grid instance on the page</p><p id="89c1" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">• <code class="cx on oo op oe b">column_defs</code> is the list of column definitions we defined earlier</p><p id="db4e" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">• <code class="cx on oo op oe b">row_data</code> is the data to be displayed in the grid, which is stored in the <code class="cx on oo op oe b">dict_data</code> State var</p><p id="924e" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">• <code class="cx on oo op oe b">pagination</code>, <code class="cx on oo op oe b">pagination_page_size</code> and <code class="cx on oo op oe b">pagination_page_size_selector</code> parameters enable pagination with specific variables in the grid</p><p id="a64d" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">• <code class="cx on oo op oe b">theme</code> enables you to set the theme of the grid</p><pre class="mm mn mo mp mq od oe of bp og bb bk"><span id="8b5b" class="oh oi fq oe b bg oj ok l ol om">ag_grid(<br/>    id="myAgGrid",<br/>    column_defs=column_defs,<br/>    row_data=State.dict_data,<br/>    pagination=True,<br/>    pagination_page_size=20,<br/>    pagination_page_size_selector=[10, 20, 50, 100],<br/>    theme=State.grid_theme,<br/>    on_selection_changed=State.handle_selection,<br/>    width="100%",<br/>    height="60vh",<br/>)</span></pre><p id="36df" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk"><strong class="mz fr">Changing AG Grid Theming</strong></p></div></div><div class="mr"><div class="ab cb"><div class="lm or ln os lo ot cf ou cg ov ci bh"><figure class="mm mn mo mp mq mr ox oy paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk pf"><img src="../Images/7f28782cd14effe58aa9a24b70c22562.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*b1NFCJyVbuLvM2h5PaZ2GA.png"/></div></div><figcaption class="oz pa pb mj mk pc pd bf b bg z dx">Changing AG Grid Theme by Author</figcaption></figure></div></div></div><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="1c7c" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">We set <code class="cx on oo op oe b">theme</code> using the <code class="cx on oo op oe b">grid_theme</code> State var in the <code class="cx on oo op oe b">rx.select</code> component.</p><p id="5145" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Every state var has a built-in function to set it’s value for convenience, called <code class="cx on oo op oe b">set_VARNAME</code>, in this case <code class="cx on oo op oe b">set_grid_theme</code>.</p><pre class="mm mn mo mp mq od oe of bp og bb bk"><span id="9497" class="oh oi fq oe b bg oj ok l ol om">class State(rx.State):<br/>    ...<br/>    # The theme of the AG Grid<br/>    grid_theme: str = "quartz"<br/>    # The list of themes for the AG Grid<br/>    themes: list[str] = ["quartz", "balham", "alpine", "material"]<br/><br/>rx.select(<br/>    State.themes,<br/>    value=State.grid_theme,<br/>    on_change=State.set_grid_theme,<br/>    size="1",<br/>)</span></pre><p id="485b" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk"><strong class="mz fr">Showing Company Data in a Graph</strong></p></div></div><div class="mr"><div class="ab cb"><div class="lm or ln os lo ot cf ou cg ov ci bh"><figure class="mm mn mo mp mq mr ox oy paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk pg"><img src="../Images/5acd3ed80718d6d637cb82546383d0ea.png" data-original-src="https://miro.medium.com/v2/resize:fit:2000/format:webp/1*nz9yLQiKGCReYOFEuypZxQ.png"/></div></div><figcaption class="oz pa pb mj mk pc pd bf b bg z dx">Showing 6 Months of Selected Company Data by Author</figcaption></figure></div></div></div><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="ac2b" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">The <code class="cx on oo op oe b">on_selection_changed</code> event trigger, shown in the AG grid code above, is called when the user selects a row in the grid. This calls the function <code class="cx on oo op oe b">handle_selection</code> method in the State class, which sets the <code class="cx on oo op oe b">selected_rows</code> state var to the new selected row and calls the function <code class="cx on oo op oe b">update_line_graph</code>.</p><p id="501d" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">The <code class="cx on oo op oe b">update_line_graph</code> function gets the relevant ticker and uses it to set the <code class="cx on oo op oe b">company</code> state var. The Date, Mid, and DateDifference data for that company for the past 6 months is then set to the state var <code class="cx on oo op oe b">dff_ticker_hist</code>.</p><p id="6713" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">Finally it is rendered in an <code class="cx on oo op oe b">rx.recharts.line_chart</code>, using <code class="cx on oo op oe b">rx.recharts.error_bar</code> to show the DateDifference data which are the highs and the lows for the day.</p><pre class="mm mn mo mp mq od oe of bp og bb bk"><span id="a650" class="oh oi fq oe b bg oj ok l ol om">class State(rx.State):<br/>    ...<br/>    # The selected rows in the AG Grid<br/>    selected_rows: list[dict] = None<br/>    # The currently selected company in AG Grid<br/>    company: str<br/>    # The data fetched from Yahoo Finance<br/>    data: pd.DataFrame<br/>    # The data to be displayed in the line graph<br/>    dff_ticker_hist: list[dict] = None<br/><br/>    def handle_selection(self, selected_rows, _, __):<br/>        self.selected_rows = selected_rows<br/>        self.update_line_graph()<br/>    <br/>    def update_line_graph(self):<br/>        if self.selected_rows:<br/>            ticker = self.selected_rows[0]["ticker"]<br/>        else:<br/>            self.dff_ticker_hist = None<br/>            return<br/>        self.company = ticker<br/>        <br/>        dff_ticker_hist = self.data[ticker].reset_index()<br/>        dff_ticker_hist["Date"] = pd.to_datetime(dff_ticker_hist["Date"]).dt.strftime("%Y-%m-%d")<br/>        <br/>        dff_ticker_hist["Mid"] = (dff_ticker_hist["Open"] + dff_ticker_hist["Close"]) / 2<br/>        dff_ticker_hist["DayDifference"] = dff_ticker_hist.apply(<br/>            lambda row: [row["High"] - row["Mid"], row["Mid"] - row["Low"]], axis=1<br/>        )<br/>        <br/>        self.dff_ticker_hist = dff_ticker_hist.to_dict(orient="records")<br/><br/><br/>rx.recharts.line_chart(<br/>    rx.recharts.line(<br/>        rx.recharts.error_bar(<br/>            data_key="DayDifference",<br/>            direction="y",<br/>            width=4,<br/>            stroke_width=2,<br/>            stroke="red",<br/>        ),<br/>        data_key="Mid",<br/>    ),<br/>    rx.recharts.x_axis(data_key="Date"),<br/>    rx.recharts.y_axis(domain=["auto", "auto"]),<br/>    data=State.dff_ticker_hist,<br/>    width="100%",<br/>    height=300,<br/>)</span></pre></div></div></div><div class="ab cb nv nw nx ny" role="separator"><span class="nz by bm oa ob oc"/><span class="nz by bm oa ob oc"/><span class="nz by bm oa ob"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h2 id="e72c" class="ph oi fq bf pi pj pk pl pm pn po pp pq ng pr ps pt nk pu pv pw no px py pz qa bk">Conclusion</h2><p id="f4d9" class="pw-post-body-paragraph mx my fq mz b go qb nb nc gr qc ne nf ng qd ni nj nk qe nm nn no qf nq nr ns fj bk">Using AG Grid inside the Reflex ecosystem empowered me as a Python developer to create sophisticated, data-rich web applications with ease. Whether you’re building complex dashboards, data analysis tools, or an application that demands powerful data grid capabilities, Reflex AG Grid has you covered.</p><p id="a1c4" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">I’m excited to see what you’ll build with Reflex AG Grid! Share your projects, ask questions, and join the discussion in our <a class="af nt" href="https://forum.reflex.dev" rel="noopener ugc nofollow" target="_blank">community forums</a>. Together, let’s push the boundaries of what’s possible with Python web development!</p></div></div></div><div class="ab cb nv nw nx ny" role="separator"><span class="nz by bm oa ob oc"/><span class="nz by bm oa ob oc"/><span class="nz by bm oa ob"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="7635" class="pw-post-body-paragraph mx my fq mz b go na nb nc gr nd ne nf ng nh ni nj nk nl nm nn no np nq nr ns fj bk">If you have questions, please comment them below or message me on Twitter at <a class="af nt" href="https://twitter.com/tgotsman12" rel="noopener ugc nofollow" target="_blank">@tgotsman12</a> or on <a class="af nt" href="https://www.linkedin.com/in/tom-gotsman/" rel="noopener ugc nofollow" target="_blank">LinkedIn</a>. Share your app creations on social media and tag me, and I’ll be happy to provide feedback or help retweet!</p></div></div></div></div>    
</body>
</html>