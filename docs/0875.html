<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Packaging Your TypeScript Client into a Python Backend</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Packaging Your TypeScript Client into a Python Backend</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/packaging-your-typescript-client-into-a-python-backend-b087e50c5c1a?source=collection_archive---------6-----------------------#2024-04-05">https://towardsdatascience.com/packaging-your-typescript-client-into-a-python-backend-b087e50c5c1a?source=collection_archive---------6-----------------------#2024-04-05</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><figure class="fr fs ft fu fv fw fo fp paragraph-image"><div role="button" tabindex="0" class="fx fy ed fz bh ga"><div class="fo fp fq"><img src="../Images/b458042bef9c23c961a0c8f73536f6cc.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*YASPhhfIdC0paqxZ"/></div></div><figcaption class="gd ge gf fo fp gg gh bf b bg z dx">Photo by <a class="af gi" href="https://unsplash.com/@markusspiske?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Markus Spiske</a> on <a class="af gi" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><h2 id="7466" class="gj gk gl bf b dy gm gn go gp gq gr dx gs" aria-label="kicker paragraph">A FULL HANDS-ON GUIDE</h2><div/><div><h2 id="69cc" class="pw-subtitle-paragraph hn gu gl bf b ho hp hq hr hs ht hu hv hw hx hy hz ia ib ic cq dx">Combine your React Application with the FastAPI web-server</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="id ie if ig ih ab"><div><div class="ab ii"><div><div class="bm" aria-hidden="false"><a href="https://itay-bittan.medium.com/?source=post_page---byline--b087e50c5c1a--------------------------------" rel="noopener follow"><div class="l ij ik by il im"><div class="l ed"><img alt="Itay Bittan" class="l ep by dd de cx" src="../Images/328e4d9b0b98b65e59e42983e9d1afaa.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*muDXT05dXJPYOSI3CUM_Ig.jpeg"/><div class="in by l dd de em n io eo"/></div></div></a></div></div><div class="ip ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--b087e50c5c1a--------------------------------" rel="noopener follow"><div class="l iq ir by il is"><div class="l ed"><img alt="Towards Data Science" class="l ep by br it cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="in by l br it em n io eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="iu ab q"><div class="ab q iv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b iw ix bk"><a class="af ag ah ai aj ak al am an ao ap aq ar iy" data-testid="authorName" href="https://itay-bittan.medium.com/?source=post_page---byline--b087e50c5c1a--------------------------------" rel="noopener follow">Itay Bittan</a></p></div></div></div><span class="iz ja" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b iw ix dx"><button class="jb jc ah ai aj ak al am an ao ap aq ar jd je jf" disabled="">Follow</button></p></div></div></span></div></div><div class="l jg"><span class="bf b bg z dx"><div class="ab cn jh ji jj"><div class="jk jl ab"><div class="bf b bg z dx ab jm"><span class="jn l jg">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar iy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--b087e50c5c1a--------------------------------" rel="noopener follow"><p class="bf b bg z jo jp jq jr js jt ju jv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="iz ja" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">6 min read</span><div class="jw jx l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Apr 5, 2024</span></div></span></div></span></div></div></div><div class="ab cp jy jz ka kb kc kd ke kf kg kh ki kj kk kl km kn"><div class="h k w ea eb q"><div class="ld l"><div class="ab q le lf"><div class="pw-multi-vote-icon ed jn lg lh li"><div class=""><div class="lj lk ll lm ln lo lp am lq lr ls li"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l lt lu lv lw lx ly lz"><p class="bf b dy z dx"><span class="lk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao lj mc md ab q ee me mf" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="mb"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count ma mb">1</span></p></button></div></div></div><div class="ab q ko kp kq kr ks kt ku kv kw kx ky kz la lb lc"><div class="mg k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al mh an ao ap jd mi mj mk" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep ml cn"><div class="l ae"><div class="ab cb"><div class="mm mn mo mp mq gb ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al mh an ao ap jd mr ms mf mt mu mv mw mx s my mz na nb nc nd ne u nf ng nh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al mh an ao ap jd mr ms mf mt mu mv mw mx s my mz na nb nc nd ne u nf ng nh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al mh an ao ap jd mr ms mf mt mu mv mw mx s my mz na nb nc nd ne u nf ng nh"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><p id="9e33" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">In this guide, you will learn how to package a simple TypeScript <a class="af gi" href="https://react.dev/" rel="noopener ugc nofollow" target="_blank">React Application</a> into a <strong class="nk gv">Python package</strong> and serve it from your <a class="af gi" href="https://fastapi.tiangolo.com/" rel="noopener ugc nofollow" target="_blank">FastAPI</a> Python web server. Check out the <a class="af gi" href="https://github.com/itayB/vite-project" rel="noopener ugc nofollow" target="_blank">client</a> and the <a class="af gi" href="https://github.com/itayB/backend" rel="noopener ugc nofollow" target="_blank">server</a> repos, if you want to see the full code. Let’s get started!</p><p id="4294" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">During the development process, you probably use two different IDEs:</p><ol class=""><li id="7ec6" class="ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od oe of og bk">TypeScript or JavaScript React App window, running on a dedicated listening port (e.g., 5173) to serve the client/frontend pages.</li><li id="c050" class="ni nj gl nk b ho oh nm nn hr oi np nq nr oj nt nu nv ok nx ny nz ol ob oc od oe of og bk">Python FastAPI, running on a different port (e.g., 8080) to serve a REST API.</li></ol><p id="1f72" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">In other words, you have two different servers running locally. Whenever you want to call your FastAPI server, the browser interacts with two different servers.</p><figure class="on oo op oq or fw fo fp paragraph-image"><div role="button" tabindex="0" class="fx fy ed fz bh ga"><div class="fo fp om"><img src="../Images/ddea8edae4c7663617a54bd567a9a9d5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*NiIJb0auuune5vsnpEwlsQ.png"/></div></div><figcaption class="gd ge gf fo fp gg gh bf b bg z dx">Local development (Image by Author)</figcaption></figure><p id="cf06" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">While it works fine locally (in <code class="cx os ot ou ov b">localhost</code>), you’ll encounter a “Cross-Origin Request Blocked” error in your browser when you deploy that code. Before taking your code to production, the best practice is to serve both client pages and REST API from the same backend web server. That way the browser will interact with a single backend. It’s better for security, performance, and simplicity.</p><figure class="on oo op oq or fw fo fp paragraph-image"><div role="button" tabindex="0" class="fx fy ed fz bh ga"><div class="fo fp ow"><img src="../Images/9b7ad97acecff8862df24587b69f1b25.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Ht6hQcgrUhOIXE1h4FBQrQ.png"/></div></div><figcaption class="gd ge gf fo fp gg gh bf b bg z dx">Preparing for Production (Image by Author)</figcaption></figure><h2 id="b98a" class="ox oy gl bf oz pa pb pc pd pe pf pg ph nr pi pj pk nv pl pm pn nz po pp pq gr bk">1. Create a Simple React Application</h2><p id="d5b3" class="pw-post-body-paragraph ni nj gl nk b ho pr nm nn hr ps np nq nr pt nt nu nv pu nx ny nz pv ob oc od fj bk">First, in your <code class="cx os ot ou ov b">workspace</code> directory, let’s create a new TypeScript React application using <a class="af gi" href="https://vitejs.dev/" rel="noopener ugc nofollow" target="_blank">vite</a>:</p><pre class="on oo op oq or pw ov px bp py bb bk"><span id="2fa1" class="pz oy gl ov b bg qa qb l qc qd">~/workspace ➜ npm create vite@latest<br/>✔ Project name: … vite-project<br/>✔ Select a framework: › React<br/>✔ Select a variant: › TypeScript</span></pre><p id="5ed7" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">Then, enter into the new project directory, install the dependencies, and run the application (<a class="af gi" href="http://localhost:5174/" rel="noopener ugc nofollow" target="_blank">http://localhost:5173</a>):</p><pre class="on oo op oq or pw ov px bp py bb bk"><span id="c98b" class="pz oy gl ov b bg qa qb l qc qd">~/workspace ➜ cd vite-project<br/>~/workspace/vite-project ➜ npm install<br/>~/workspace/vite-project ➜ npm run dev</span></pre><p id="3b61" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">You should see something like:</p><figure class="on oo op oq or fw fo fp paragraph-image"><div role="button" tabindex="0" class="fx fy ed fz bh ga"><div class="fo fp qe"><img src="../Images/a3d3ba1a5cafb7f5ac88a61678ae6210.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*FvDjJCwUuyhz-BUJeweo_Q.png"/></div></div><figcaption class="gd ge gf fo fp gg gh bf b bg z dx">First Vite React Template (Image by Author)</figcaption></figure><p id="ebbd" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">Now, let’s make a small addition to the template — we’ll add an async HTTP call to the future FastAPI backend to get its status:</p><pre class="on oo op oq or pw ov px bp py bb bk"><span id="2f5f" class="pz oy gl ov b bg qa qb l qc qd">function App() {<br/>  ...<br/>  const [health, setHealth] = useState('');<br/><br/>  useEffect(() =&gt; {<br/>    const getStatus = async () =&gt; {<br/>      const response = await fetch('/v1/health-check/liveness', {<br/>        method: 'GET',<br/>      });<br/>      let status: { [status: string]: string } = {};<br/>      try {<br/>        status = await response.json();<br/>      } catch (err) {<br/>        console.log(`failed to get backend status. ${err}`);<br/>      }<br/>      setHealth(status['status'] || 'unknown');<br/>    };<br/>    getStatus();<br/>  }, []);<br/><br/>  return (<br/>  ...<br/>     &lt;div&gt;Backend Status: {health}&lt;/div&gt;<br/>  ...<br/>  )<br/>}</span></pre><p id="a932" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">And now we should get something like this:</p><figure class="on oo op oq or fw fo fp paragraph-image"><div role="button" tabindex="0" class="fx fy ed fz bh ga"><div class="fo fp qe"><img src="../Images/fbc82ab99eee369cf0e6acce971c153d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*QTTHhBYLHq7gtMAQq8UyLg.png"/></div></div><figcaption class="gd ge gf fo fp gg gh bf b bg z dx">With a Backend call (Image by Author)</figcaption></figure><p id="a52f" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">At this point, the <strong class="nk gv">Backend Status</strong> is <code class="cx os ot ou ov b">unknown</code> because we haven’t implemented it yet. No worries, we will handle that shortly. Lastly, let’s build the client for packaging it later on:</p><pre class="on oo op oq or pw ov px bp py bb bk"><span id="a1a7" class="pz oy gl ov b bg qa qb l qc qd">~/workspace/vite-project ➜ npm run build</span></pre><p id="c07f" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">The build output should create a <code class="cx os ot ou ov b">dist</code> folder with the final optimized code that looks like this:</p><pre class="on oo op oq or pw ov px bp py bb bk"><span id="9c95" class="pz oy gl ov b bg qa qb l qc qd">└── dist/<br/>    ├── assets/<br/>    ├── static/<br/>    └── index.html</span></pre><h2 id="1b5e" class="ox oy gl bf oz pa pb pc pd pe pf pg ph nr pi pj pk nv pl pm pn nz po pp pq gr bk">2. Building a Python Package</h2><p id="1c9c" class="pw-post-body-paragraph ni nj gl nk b ho pr nm nn hr ps np nq nr pt nt nu nv pu nx ny nz pv ob oc od fj bk">At this point, we are switching to Python. I prefer to work in a <a class="af gi" href="https://docs.python.org/3/library/venv.html" rel="noopener ugc nofollow" target="_blank">virtual environment</a> for isolation. In a dedicated virtual environment, we will install <code class="cx os ot ou ov b">twine</code> and <code class="cx os ot ou ov b">build</code> , for creating our Python package:</p><pre class="on oo op oq or pw ov px bp py bb bk"><span id="7f58" class="pz oy gl ov b bg qa qb l qc qd">~/workspace/vite-project ➜ python3 -m venv venv<br/>~/workspace/vite-project ➜ . venv/bin/activate<br/>~/workspace/vite-project (venv) ➜ python -m pip install --upgrade pip<br/>~/workspace/vite-project (venv) ➜ pip install twine==5.0.0 build==1.2.1</span></pre><p id="6658" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">Let’s create a new <code class="cx os ot ou ov b">setup.py</code> file in the root folder (<code class="cx os ot ou ov b">vite-project</code>), with the following content:</p><pre class="on oo op oq or pw ov px bp py bb bk"><span id="264b" class="pz oy gl ov b bg qa qb l qc qd">from setuptools import setup<br/>from pathlib import Path<br/><br/><br/>cwd = Path(__file__).parent<br/>long_description = (cwd / "README.md").read_text()<br/><br/>setup(<br/>    name="vite-project",<br/>    version="0.0.1",<br/>    package_dir={"vite_project": "dist"},<br/>    package_data={"vite_project": ["**/*.*"]},<br/>    long_description=long_description,<br/>    long_description_content_type="text/markdown",<br/>)</span></pre><p id="631d" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">and run the following to create the package:</p><pre class="on oo op oq or pw ov px bp py bb bk"><span id="81d0" class="pz oy gl ov b bg qa qb l qc qd">~/workspace/vite-project (venv) ➜ python setup.py sdist -d tmp<br/>~/workspace/vite-project (venv) ➜ python -m build --wheel --outdir tmp<br/>~/workspace/vite-project (venv) ➜ twine upload -u ${USERNAME} -p ${PASSWORD} --repository-url ${REPO_URL} tmp/*</span></pre><p id="ef63" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">The last line above is optional if you intend to upload your package to a remote repository such as <a class="af gi" href="https://pypi.org/" rel="noopener ugc nofollow" target="_blank">PyPI</a>, <a class="af gi" href="https://jfrog.com/artifactory/" rel="noopener ugc nofollow" target="_blank">JFrog Artifactory</a>, etc.</p><h2 id="006d" class="ox oy gl bf oz pa pb pc pd pe pf pg ph nr pi pj pk nv pl pm pn nz po pp pq gr bk">3. Create a FastAPI Python web-server</h2><p id="7289" class="pw-post-body-paragraph ni nj gl nk b ho pr nm nn hr ps np nq nr pt nt nu nv pu nx ny nz pv ob oc od fj bk">The final step is to build the Python server and use the client package. For that, we will:</p><ul class=""><li id="905e" class="ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od qf of og bk">Create a new <code class="cx os ot ou ov b">backend</code>directory.</li><li id="4110" class="ni nj gl nk b ho oh nm nn hr oi np nq nr oj nt nu nv ok nx ny nz ol ob oc od qf of og bk">Create a new virtual environment.</li><li id="5dc3" class="ni nj gl nk b ho oh nm nn hr oi np nq nr oj nt nu nv ok nx ny nz ol ob oc od qf of og bk">Install the relevant packages and our client package:</li></ul><pre class="on oo op oq or pw ov px bp py bb bk"><span id="1504" class="pz oy gl ov b bg qa qb l qc qd">~/workspace/backend ➜ python3 -m venv venv<br/>~/workspace/backend ➜ . venv/bin/activate<br/>~/workspace/backend (venv) ➜ python -m pip install --upgrade pip<br/>~/workspace/backend (venv) ➜ pip install fastapi==0.110.0 uvicorn==0.29.0<br/>~/workspace/backend (venv) ➜ pip install ~/workspace/vite-project/tmp/vite-project-0.0.1.tar.gz</span></pre><p id="ebfa" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">Note that we installed our client package from a local path that we created earlier. If you uploaded your package to a remote repository, you can install it with:</p><pre class="on oo op oq or pw ov px bp py bb bk"><span id="a666" class="pz oy gl ov b bg qa qb l qc qd">~/workspace/backend (venv) ➜ pip install --extra-index-url https://${USERNAME}:${PASSWORD}@${REPO_URL} vite-project==0.0.1</span></pre><p id="4623" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">Next, let’s create a simple Python server (2 files):</p><h2 id="aeee" class="ox oy gl bf oz pa pb pc pd pe pf pg ph nr pi pj pk nv pl pm pn nz po pp pq gr bk"><strong class="al">__main__.py</strong></h2><pre class="on oo op oq or pw ov px bp py bb bk"><span id="f999" class="pz oy gl ov b bg qa qb l qc qd">from distutils.sysconfig import get_python_lib<br/>from fastapi import FastAPI<br/>from fastapi.responses import FileResponse<br/>from fastapi.staticfiles import StaticFiles<br/>from backend.health_router import router<br/>from uvicorn import run<br/><br/><br/>def create_app():<br/>    app = FastAPI(<br/>        title="Backend Server",<br/>    )<br/>    app.include_router(router)<br/><br/>    client_path = f"{get_python_lib()}/vite_project"<br/>    app.mount("/assets", StaticFiles(directory=f"{client_path}/assets"), name="assets")<br/>    app.mount("/static", StaticFiles(directory=f"{client_path}/static"), name="static")<br/><br/>    @app.get("/{catchall:path}")<br/>    async def serve_react_app(catchall: str):<br/>        return FileResponse(f"{client_path}/index.html")<br/><br/>    return app<br/><br/><br/>def main():<br/>    app = create_app()<br/>    run(app, host="0.0.0.0", port=8080)<br/><br/><br/>if __name__ == "__main__":<br/>    main()</span></pre><h2 id="d5cc" class="ox oy gl bf oz pa pb pc pd pe pf pg ph nr pi pj pk nv pl pm pn nz po pp pq gr bk">health_router.py</h2><pre class="on oo op oq or pw ov px bp py bb bk"><span id="6c83" class="pz oy gl ov b bg qa qb l qc qd">from typing import Literal<br/>from typing_extensions import TypedDict<br/>from fastapi import APIRouter, status<br/><br/>STATUS = Literal["success", "error", "partial", "unknown"]<br/><br/><br/>class ReturnHealthcheckStruct(TypedDict):<br/>    status: STATUS<br/><br/><br/>router = APIRouter(<br/>    prefix="/v1/health-check",<br/>    tags=["Health Check"],<br/>)<br/><br/><br/>@router.get(<br/>    "/liveness",<br/>    summary="Perform a Liveness Health Check",<br/>    response_description="Return HTTP Status Code 200 (OK)",<br/>    status_code=status.HTTP_200_OK,<br/>    response_model=ReturnHealthcheckStruct,<br/>)<br/>async def liveness() -&gt; ReturnHealthcheckStruct:<br/>    return {"status": "success"}</span></pre><p id="5b93" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">In the implementation above, we added support for serving any static file from our client application by mounting the <code class="cx os ot ou ov b">static</code> and <code class="cx os ot ou ov b">assets</code> folders, as well as any other client file to be served by our Python server.</p><p id="18b8" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">We also created a simple GET endpoint, <code class="cx os ot ou ov b">v1/health-check/liveness</code> that returns a simple <code class="cx os ot ou ov b">{“status": “success"}</code> JSON response. That way we can ensure that our server handles both client static files and our server-side RESTful API.</p><p id="828b" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">Now, if we go to <a class="af gi" href="http://localhost:8080" rel="noopener ugc nofollow" target="_blank">localhost:8080</a> we can see our client up and running. Pay attention to the <strong class="nk gv">Backend Status</strong> below, it’s now <code class="cx os ot ou ov b">success</code> (rather than <code class="cx os ot ou ov b">unknown</code>).</p><figure class="on oo op oq or fw fo fp paragraph-image"><div role="button" tabindex="0" class="fx fy ed fz bh ga"><div class="fo fp qe"><img src="../Images/dcee5308f6c616195bfc292a2ea1e253.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*gzhrIyKXAzf5Brybi5y2iw.png"/></div></div><figcaption class="gd ge gf fo fp gg gh bf b bg z dx">Running a Python server together with React Application (Image by Author)</figcaption></figure><h1 id="a0c8" class="qg oy gl bf oz qh qi hq pd qj qk ht ph ql qm qn qo qp qq qr qs qt qu qv qw qx bk">Summary</h1><p id="3d58" class="pw-post-body-paragraph ni nj gl nk b ho pr nm nn hr ps np nq nr pt nt nu nv pu nx ny nz pv ob oc od fj bk">In this tutorial, we created a simple React Application that does a single call to the backend. We wrapped this client application as a Python package and served it from our FastAPI Python web server.</p><p id="888f" class="pw-post-body-paragraph ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od fj bk">Using this approach allows you to leverage the best tools in both worlds: TypeScript and React for the frontend, and Python with FastAPI for the backend. Yet, we want to keep high cohesion and low coupling between those two components. That way, you will get all the benefits:</p><ul class=""><li id="bc01" class="ni nj gl nk b ho nl nm nn hr no np nq nr ns nt nu nv nw nx ny nz oa ob oc od qf of og bk">Velocity, by separating front-end and backend to different repositories, each part can be developed by a different team.</li><li id="7905" class="ni nj gl nk b ho oh nm nn hr oi np nq nr oj nt nu nv ok nx ny nz ol ob oc od qf of og bk">Stability and Quality, by locking a versioned client package and bumping it only when the server is ready to support a new client version.</li><li id="57e0" class="ni nj gl nk b ho oh nm nn hr oi np nq nr oj nt nu nv ok nx ny nz ol ob oc od qf of og bk">Safety — The browser interacts with only one backend server. We don’t need to enable CORS or any other security-compromising workarounds.</li><li id="2a5f" class="ni nj gl nk b ho oh nm nn hr oi np nq nr oj nt nu nv ok nx ny nz ol ob oc od qf of og bk">Simplicity — By working via a single server</li></ul></div></div></div></div>    
</body>
</html>