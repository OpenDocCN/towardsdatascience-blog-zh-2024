<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>I found a hidden gem in Matplotlib’s library: Packed Bubble Charts in Python</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>I found a hidden gem in Matplotlib’s library: Packed Bubble Charts in Python</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/i-found-a-hidden-gem-in-matplotlibs-library-packed-bubble-charts-in-python-d0f5d892beb7?source=collection_archive---------0-----------------------#2024-07-28">https://towardsdatascience.com/i-found-a-hidden-gem-in-matplotlibs-library-packed-bubble-charts-in-python-d0f5d892beb7?source=collection_archive---------0-----------------------#2024-07-28</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="501e" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">Ever wished to design those beautiful Tableau based packed bubble charts? Follow along for a tutorial on the <em class="hd">Matplotlib</em> solution</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="he hf hg hh hi ab"><div><div class="ab hj"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@gordunanna?source=post_page---byline--d0f5d892beb7--------------------------------" rel="noopener follow"><div class="l hk hl by hm hn"><div class="l ed"><img alt="Anna Gordun Peiro" class="l ep by dd de cx" src="../Images/874ec5096d61e6345104026a4cf602e9.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*xcymf5kJLwwvARr1elDC_g@2x.jpeg"/><div class="ho by l dd de em n hp eo"/></div></div></a></div></div><div class="hq ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--d0f5d892beb7--------------------------------" rel="noopener follow"><div class="l hr hs by hm ht"><div class="l ed"><img alt="Towards Data Science" class="l ep by br hu cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="ho by l br hu em n hp eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hv ab q"><div class="ab q hw"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hx hy bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hz" data-testid="authorName" href="https://medium.com/@gordunanna?source=post_page---byline--d0f5d892beb7--------------------------------" rel="noopener follow">Anna Gordun Peiro</a></p></div></div></div><span class="ia ib" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hx hy dx"><button class="ic id ah ai aj ak al am an ao ap aq ar ie if ig" disabled="">Follow</button></p></div></div></span></div></div><div class="l ih"><span class="bf b bg z dx"><div class="ab cn ii ij ik"><div class="il im ab"><div class="bf b bg z dx ab in"><span class="io l ih">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hz ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--d0f5d892beb7--------------------------------" rel="noopener follow"><p class="bf b bg z ip iq ir is it iu iv iw bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="ia ib" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">7 min read</span><div class="ix iy l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Jul 28, 2024</span></div></span></div></span></div></div></div><div class="ab cp iz ja jb jc jd je jf jg jh ji jj jk jl jm jn jo"><div class="h k w ea eb q"><div class="ke l"><div class="ab q kf kg"><div class="pw-multi-vote-icon ed io kh ki kj"><div class=""><div class="kk kl km kn ko kp kq am kr ks kt kj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l ku kv kw kx ky kz la"><p class="bf b dy z dx"><span class="kl">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kk ld le ab q ee lf lg" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lc"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count lb lc">5</span></p></button></div></div></div><div class="ab q jp jq jr js jt ju jv jw jx jy jz ka kb kc kd"><div class="lh k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al li an ao ap ie lj lk ll" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep lm cn"><div class="l ae"><div class="ab cb"><div class="ln lo lp lq lr ls ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al li an ao ap ie lt lu lg lv lw lx ly lz s ma mb mc md me mf mg u mh mi mj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al li an ao ap ie lt lu lg lv lw lx ly lz s ma mb mc md me mf mg u mh mi mj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al li an ao ap ie lt lu lg lv lw lx ly lz s ma mb mc md me mf mg u mh mi mj"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mn mo mp mq mr ms mk ml paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml mm"><img src="../Images/29a20958991f74913d6a2bd0c40f86c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S6VkCD3s72MhxCI4qskyWQ.png"/></div></div><figcaption class="my mz na mk ml nb nc bf b bg z dx">Bubble chart illustrating women’s participation share at the 2020 Summer Olympics</figcaption></figure><h1 id="eff4" class="nd ne fq bf nf ng nh gq ni nj nk gt nl nm nn no np nq nr ns nt nu nv nw nx ny bk">What are packed bubble charts?</h1><p id="310e" class="pw-post-body-paragraph nz oa fq ob b go oc od oe gr of og oh oi oj ok ol om on oo op oq or os ot ou fj bk">Packed bubble charts are used to display data in a cluster of circles. Each entry is displayed as an individual circle and two main variables can be used: size of the bubbles and colour.</p><p id="bdc6" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">Here are some of my favourite packed bubble charts:</p><p id="c583" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk"><strong class="ob fr">Ukraine grain exports</strong>: Colour used to display country income group and bubble size as tonnes of grain.</p><figure class="mn mo mp mq mr ms"><div class="pa ip l ed"><div class="pb pc l"/></div></figure><p id="1498" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk"><strong class="ob fr">Essential and Frontline Workers: </strong>Colour used to define group of workers, bubble size as number of workers and clusters for industry sectors</p><figure class="mn mo mp mq mr ms"><div class="pa ip l ed"><div class="pb pc l"/></div></figure><p id="89e2" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">While these examples haven’t been done with Python, would it be possible to build a simpler packed bubble chart only using Matplotlib? Let’s see how:</p></div></div></div><div class="ab cb pd pe pf pg" role="separator"><span class="ph by bm pi pj pk"/><span class="ph by bm pi pj pk"/><span class="ph by bm pi pj"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="4a68" class="nd ne fq bf nf ng pl gq ni nj pm gt nl nm pn no np nq po ns nt nu pp nw nx ny bk"><strong class="al">Python code for Bubble charts</strong></h1><p id="a1bc" class="pw-post-body-paragraph nz oa fq ob b go oc od oe gr of og oh oi oj ok ol om on oo op oq or os ot ou fj bk">Last week, I randomly came across an example on the miscellaneous section of Matplotlib’s documentation <a class="af pq" href="https://matplotlib.org/stable/gallery/misc/packed_bubbles.html" rel="noopener ugc nofollow" target="_blank">[Link]</a> .</p><blockquote class="pr ps pt"><p id="1149" class="nz oa pu ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">Is this a hidden gem in the Matplotlib’s misc. documentation section?</p></blockquote><p id="0c05" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">Here is the example that came with the code:</p><figure class="mn mo mp mq mr ms mk ml paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml pv"><img src="../Images/d4ab8f8f5daac342b3c45420bf05cc3c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*3YIrxJ6IVRGxfmp01RrVLg.png"/></div></div><figcaption class="my mz na mk ml nb nc bf b bg z dx">Bubble chart tutorial example</figcaption></figure><h1 id="eefe" class="nd ne fq bf nf ng nh gq ni nj nk gt nl nm nn no np nq nr ns nt nu nv nw nx ny bk"><strong class="al">How does it work?</strong></h1><p id="813d" class="pw-post-body-paragraph nz oa fq ob b go oc od oe gr of og oh oi oj ok ol om on oo op oq or os ot ou fj bk">Surprisingly frictionless to use, here is how to create your first bubble chart</p><pre class="mn mo mp mq mr pw px py bp pz bb bk"><span id="8545" class="qa ne fq px b bg qb qc l qd qe">#ADD YOUR DATA HERE<br/>browser_market_share = {<br/>    'browsers': ['firefox', 'chrome', 'safari', 'edge', 'ie', 'opera'],<br/>    'market_share': [8.61, 69.55, 8.36, 4.12, 2.76, 2.43],<br/>    'color': ['#5A69AF', '#579E65', '#F9C784', '#FC944A', '#F24C00', '#00B825']<br/>}<br/>#STEP 3<br/>bubble_chart = BubbleChart(area=browser_market_share['market_share'],<br/>                           bubble_spacing=0.1)<br/>#STEP 4<br/>bubble_chart.collapse()<br/><br/>#STEP 5<br/><br/>fig, ax = plt.subplots(subplot_kw=dict(aspect="equal"))<br/>bubble_chart.plot(<br/>    ax, browser_market_share['browsers'], browser_market_share['color'])<br/>ax.axis("off")<br/>ax.relim()<br/>ax.autoscale_view()<br/>ax.set_title('Browser market share')<br/><br/>plt.show()</span></pre><p id="8922" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">1- Add your own data or use the one provided in the example. You need one variable for bubble size, another one for the labels and colours.</p><p id="b6a8" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">2- Copy&amp;paste&amp;run all functions in the code provided</p><p id="0e62" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">3- Create your bubble distribution by calling <em class="pu">BubbleChart</em> with bubble size as variable</p><p id="4658" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">4- Collapse all bubbles so they are tangents to each other but without crashing</p><p id="f252" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">5- Create chart and add colours, labels and title.</p><p id="72e2" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk"><strong class="ob fr">Important:</strong></p><ul class=""><li id="e10b" class="nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou qf qg qh bk">Aspect has to be kept as <em class="pu">equal, </em>or your bubbles won’t be perfect circles.</li><li id="a3fb" class="nz oa fq ob b go qi od oe gr qj og oh oi qk ok ol om ql oo op oq qm os ot ou qf qg qh bk"><em class="pu">relim</em>() and <em class="pu">autoscale_view</em>() have to be kept as well, since you can’t choose where in the grid your bubbles will appear</li></ul><blockquote class="pr ps pt"><p id="fb3c" class="nz oa pu ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">I agree that it doesn’t look the best, especially after seeing those beautiful examples that we saw earlier.So I’ve spent a couple of days turning it into something better and here is how:</p></blockquote></div></div></div><div class="ab cb pd pe pf pg" role="separator"><span class="ph by bm pi pj pk"/><span class="ph by bm pi pj pk"/><span class="ph by bm pi pj"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="7ec6" class="nd ne fq bf nf ng pl gq ni nj pm gt nl nm pn no np nq po ns nt nu pp nw nx ny bk"><strong class="al">Chart customisation:</strong></h1><p id="df14" class="pw-post-body-paragraph nz oa fq ob b go oc od oe gr of og oh oi oj ok ol om on oo op oq or os ot ou fj bk">For my chart, I am using an Olympic Historical Dataset from Olympedia.org which Joseph Cheng shared in <a class="af pq" href="https://www.kaggle.com/datasets/josephcheng123456/olympic-historical-dataset-from-olympediaorg" rel="noopener ugc nofollow" target="_blank">Kaggle</a> with a public domain license.</p><figure class="mn mo mp mq mr ms mk ml paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml qn"><img src="../Images/c0195a7a8a47069b4f3689148040561c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*2aX4R3SiSMm-hZRU5_NMVQ.png"/></div></div><figcaption class="my mz na mk ml nb nc bf b bg z dx">Screenshot of dataset</figcaption></figure><p id="630a" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">It contains event to Athlete level Olympic Games Results from Athens 1896 to Beijing 2022. After an EDA (Exploratory Data Analysis) I transformed it into a dataset that details the number of female athletes in each sport/event per year. My bubble chart idea is to show which sports have a 50/50 female to male ratio athletes and how it has evolved during time.</p><p id="7f54" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">My plotting data is composed of two different datasets, one for each year: <strong class="ob fr">2020</strong> and <strong class="ob fr">1996</strong>. For each dataset I’ve computed the total sum of athletes that participated to each event <em class="pu">(athlete_sum)</em> and how much that sum represents compared to the number of total athletes (male + female) <em class="pu">(difference)</em>. See a screenshot of the data below:</p><figure class="mn mo mp mq mr ms mk ml paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml qo"><img src="../Images/6e8fbc2fc66be383a150729ea13db5cf.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/1*Och6FjobkHIKzJRFTX-Y6g.png"/></div></div><figcaption class="my mz na mk ml nb nc bf b bg z dx">Screen shot of plotting dataset</figcaption></figure><p id="d962" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">This is my approach to visualise it:</p><ul class=""><li id="9b1d" class="nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou qf qg qh bk"><strong class="ob fr">Size proportion. </strong>Using radius of bubbles to compare number athletes per sport. Bigger bubbles will represent highly competitive events, such as Athletics</li><li id="d1d1" class="nz oa fq ob b go qi od oe gr qj og oh oi qk ok ol om ql oo op oq qm os ot ou qf qg qh bk"><strong class="ob fr">Multi variable interpretation</strong>. Making use of colours to represent female representation. Light green bubbles will represent events with a 50/50 split, such as Hockey.</li></ul><p id="5356" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">Here is my starting point (using the code and approach from above):</p><figure class="mn mo mp mq mr ms mk ml paragraph-image"><div class="mk ml qp"><img src="../Images/fa4d2fdc067970e969d7087a77fbb1a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1072/format:webp/1*PzE3XmQjAnvNNcx1L1BCAA.png"/></div><figcaption class="my mz na mk ml nb nc bf b bg z dx">First result</figcaption></figure><p id="4c45" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">Some easy fixes: increasing figure size and changing labels to empty if the size isn’t over 250 to avoid having words outside bubbles.</p><pre class="mn mo mp mq mr pw px py bp pz bb bk"><span id="5199" class="qa ne fq px b bg qb qc l qd qe">fig, ax = plt.subplots(figsize=(12,8),subplot_kw=dict(aspect="equal"))<br/><br/>#Labels edited directly in dataset<br/></span></pre><figure class="mn mo mp mq mr ms mk ml paragraph-image"><div class="mk ml qq"><img src="../Images/bab961d1ad7748271c92f5c0cd8b1f9e.png" data-original-src="https://miro.medium.com/v2/resize:fit:1366/format:webp/1*9cEQGvkFvM4aP5kls9zJtA.png"/></div><figcaption class="my mz na mk ml nb nc bf b bg z dx">Second result</figcaption></figure><p id="8c2e" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">Well, now at least it’s readable. But, why is <em class="pu">Athletics </em>pink<em class="pu"> </em>and<em class="pu"> Boxing </em>blue<em class="pu">? </em>Let’s add a legend to illustrate the relationship between colours and female representation.</p><blockquote class="pr ps pt"><p id="695f" class="nz oa pu ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">Because it’s not your regular barplot chart, <em class="fq">plt.legend()</em> doesn’t do the trick here.</p></blockquote><p id="93d0" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">Using matplotlib Annotation Bbox we can create rectangles (or circles) to show meaning behind each colour. We can also do the same thing to show a bubble scale.</p><pre class="mn mo mp mq mr pw px py bp pz bb bk"><span id="81af" class="qa ne fq px b bg qb qc l qd qe">import matplotlib.pyplot as plt<br/>from matplotlib.offsetbox import (AnnotationBbox, DrawingArea,<br/>                                  TextArea,HPacker)<br/>from matplotlib.patches import Circle,Rectangle<br/><br/># This is an example for one section of the legend<br/><br/># Define where the annotation (legend) will be<br/>xy = [50, 128]<br/><br/># Create your colored rectangle or circle<br/>da = DrawingArea(20, 20, 0, 0)<br/>p = Rectangle((10 ,10),10,10,color="#fc8d62ff")<br/>da.add_artist(p)<br/><br/># Add text <br/><br/>text = TextArea("20%", textprops=dict(color="#fc8d62ff", size=14,fontweight='bold'))<br/><br/># Combine rectangle and text<br/>vbox = HPacker(children=[da, text], align="top", pad=0, sep=3)<br/><br/># Annotate both in a box (change alpha if you want to see the box)<br/>ab = AnnotationBbox(vbox, xy,<br/>                    xybox=(1.005, xy[1]),<br/>                    xycoords='data',<br/>                    boxcoords=("axes fraction", "data"),<br/>                    box_alignment=(0.2, 0.5),<br/>                    bboxprops=dict(alpha=0)<br/>                    )<br/>#Add to your bubble chart<br/>ax.add_artist(ab)</span></pre><p id="1e71" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">I’ve also added a subtitle and a text description under the chart just by using <em class="pu">plt.text()</em></p><h1 id="051a" class="nd ne fq bf nf ng nh gq ni nj nk gt nl nm nn no np nq nr ns nt nu nv nw nx ny bk">And ta-da:</h1><figure class="mn mo mp mq mr ms mk ml paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml mm"><img src="../Images/29a20958991f74913d6a2bd0c40f86c8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*S6VkCD3s72MhxCI4qskyWQ.png"/></div></div><figcaption class="my mz na mk ml nb nc bf b bg z dx">Final visualisation</figcaption></figure><p id="6aa1" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">Straightforward and user friendly interpretations of the graph:</p><ul class=""><li id="71f1" class="nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou qf qg qh bk">Majority of bubbles are light green → green means 50% females → majority of Olympic competitions have an even 50/50 female to male split <em class="pu">(yay🙌)</em></li><li id="fc37" class="nz oa fq ob b go qi od oe gr qj og oh oi qk ok ol om ql oo op oq qm os ot ou qf qg qh bk">Only one sport (Baseball), in dark green colour, has no female participation.</li><li id="401f" class="nz oa fq ob b go qi od oe gr qj og oh oi qk ok ol om ql oo op oq qm os ot ou qf qg qh bk">3 sports have only female participation but the number of athletes is fairly low.</li><li id="b99d" class="nz oa fq ob b go qi od oe gr qj og oh oi qk ok ol om ql oo op oq qm os ot ou qf qg qh bk">The biggest sports in terms of athlete number (Swimming, Athletics and Gymnastics) are very close to having a 50/50 split</li></ul></div></div></div><div class="ab cb pd pe pf pg" role="separator"><span class="ph by bm pi pj pk"/><span class="ph by bm pi pj pk"/><span class="ph by bm pi pj"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="35f1" class="nd ne fq bf nf ng pl gq ni nj pm gt nl nm pn no np nq po ns nt nu pp nw nx ny bk">Bonus visualisation.</h1><figure class="mn mo mp mq mr ms mk ml paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml qr"><img src="../Images/c12088d38b9bbcd9ff40ad9d5b85fb60.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*EpouQIQcIvXmmsA9759XgA.jpeg"/></div></div><figcaption class="my mz na mk ml nb nc bf b bg z dx">Comparison between 2020 and 1996 female participation share</figcaption></figure><p id="3f4a" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">Here I am using packed bubble charts to illustrate an additional variable: <strong class="ob fr">time</strong>. The chart to the left represents the Olympic games’ participation in <strong class="ob fr">2020</strong> and the one to the right the games in <strong class="ob fr">1996</strong>. Putting them side to side brings on some interesting insights:</p><ul class=""><li id="623f" class="nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou qf qg qh bk">Way more bubbles on the left compared to the right → More sports in 2020 Olympics compared to the 1996 Olympics</li><li id="a102" class="nz oa fq ob b go qi od oe gr qj og oh oi qk ok ol om ql oo op oq qm os ot ou qf qg qh bk">Barely any light green bubbles in 1996 Olympics → Female participation in 1996 was much lower than in 2020 and very far from a 50/50 split</li><li id="2498" class="nz oa fq ob b go qi od oe gr qj og oh oi qk ok ol om ql oo op oq qm os ot ou qf qg qh bk">Boxing had a 0% female participation in 1996 ( dark green) and a 30% female participation in 2020 (blue).</li></ul><p id="796c" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">Visualising and comparing two datasets can be complex, especially when there are three variables that have to be compared at the same time. However, packed bubble charts will captivate your audience, not only with their visual appeal but also with their ease of use and intuitive understanding.</p><blockquote class="pr ps pt"><p id="c5e4" class="nz oa pu ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">I’ve also collected a few other customisation options that I haven’t used, check them out below.</p></blockquote><h1 id="455b" class="nd ne fq bf nf ng nh gq ni nj nk gt nl nm nn no np nq nr ns nt nu nv nw nx ny bk"><strong class="al">Other customisations</strong></h1><p id="17a4" class="pw-post-body-paragraph nz oa fq ob b go oc od oe gr of og oh oi oj ok ol om on oo op oq or os ot ou fj bk">Increase bubble_spacing for a more relaxed view (2 vs 0.1)</p><pre class="mn mo mp mq mr pw px py bp pz bb bk"><span id="11e9" class="qa ne fq px b bg qb qc l qd qe">bubble_chart = BubbleChart(area=browser_market_share['market_share'],<br/>                           bubble_spacing=2)</span></pre><figure class="mn mo mp mq mr ms mk ml paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml qs"><img src="../Images/9a27dfc8b1cac685e7b0e5d0582612d7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*pFxE4dJARZWG3O2aEi_7Ig.jpeg"/></div></div><figcaption class="my mz na mk ml nb nc bf b bg z dx">effect of bubble spacing</figcaption></figure><p id="98e5" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">It’s also possible to obtain a horizontal view only by updating def_init. The modification calculates the new x coordinates for each bubble computed with their and past bubbles radius and bubble spacing. Y coordinates are set to 0.</p><pre class="mn mo mp mq mr pw px py bp pz bb bk"><span id="cb52" class="qa ne fq px b bg qb qc l qd qe"> def __init__(self, area, bubble_spacing=0):<br/>        area = np.asarray(area)<br/>        r = np.sqrt(area / np.pi)<br/><br/>        self.bubble_spacing = bubble_spacing<br/>        self.bubbles = np.ones((len(area), 4))<br/>        self.bubbles[:, 2] = r<br/>        self.bubbles[:, 3] = area<br/><br/>        # UPDATE: Position the bubbles in a horizontal row, touching each other<br/>        self.bubbles[:, 0] = np.cumsum(r * 2 + self.bubble_spacing) - r - self.bubble_spacing / 2<br/>        self.bubbles[:, 1] = 0  </span></pre><figure class="mn mo mp mq mr ms mk ml paragraph-image"><div role="button" tabindex="0" class="mt mu ed mv bh mw"><div class="mk ml qt"><img src="../Images/e0ffdb119dabefcb86a1cf0a2a441ea7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*fRxgR2eyNMFhenauGdAW4Q.png"/></div></div><figcaption class="my mz na mk ml nb nc bf b bg z dx">Horizontal customisation</figcaption></figure><h1 id="7a50" class="nd ne fq bf nf ng nh gq ni nj nk gt nl nm nn no np nq nr ns nt nu nv nw nx ny bk">Potential improvements✨</h1><p id="5fe0" class="pw-post-body-paragraph nz oa fq ob b go oc od oe gr of og oh oi oj ok ol om on oo op oq or os ot ou fj bk">I’d love to see something similar done in Plotly since this graph is screaming for some interactivity (especially for the bubbles that are too small to have a label) and maybe a slider to change years and update the graph automatically.</p></div></div></div><div class="ab cb pd pe pf pg" role="separator"><span class="ph by bm pi pj pk"/><span class="ph by bm pi pj pk"/><span class="ph by bm pi pj"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h1 id="2fd6" class="nd ne fq bf nf ng pl gq ni nj pm gt nl nm pn no np nq po ns nt nu pp nw nx ny bk">Final points</h1><p id="8c1d" class="pw-post-body-paragraph nz oa fq ob b go oc od oe gr of og oh oi oj ok ol om on oo op oq or os ot ou fj bk">The matplotlib’s little gem solution for packed bubble charts will save you hours of circle drawing and has great potential of becoming a powerful alternative to Tableau. In this article, we have explored how to create them, customise them and add legends. By the end of it, we have obtained a final visualisation with visual appeal, ease of reading and that allows you to tell a story and captivate your audience.</p><p id="79d2" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">I’ve also given you a little flavour of gender equality at the Olympic games and how fast it has improved in the past 20 years.</p><blockquote class="pr ps pt"><p id="cfeb" class="nz oa pu ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">Fyi, Paris 2024 will be the first time in history where we will see an equal number of female/male participants</p></blockquote><p id="4c89" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk">Happy coding and Olympic watching!</p><p id="4408" class="pw-post-body-paragraph nz oa fq ob b go ov od oe gr ow og oh oi ox ok ol om oy oo op oq oz os ot ou fj bk"><em class="pu">All images in this article are by the author</em></p></div></div></div></div>    
</body>
</html>