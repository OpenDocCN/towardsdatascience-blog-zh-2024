<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Customizing RStudio Container with Docker Compose</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Customizing RStudio Container with Docker Compose</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/customizing-rstudio-container-with-docker-compose-60cdfe0e8894?source=collection_archive---------1-----------------------#2024-03-23">https://towardsdatascience.com/customizing-rstudio-container-with-docker-compose-60cdfe0e8894?source=collection_archive---------1-----------------------#2024-03-23</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="d5ee" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">A step-by-step guide for customizing and launching RStudio Server inside a container with Docker Compose</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@rami.krispin?source=post_page---byline--60cdfe0e8894--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Rami Krispin" class="l ep by dd de cx" src="../Images/8af28c282d42a2a27c28aa8af4c8d482.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*YPncNkgBc5VW-9coln432w.jpeg"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--60cdfe0e8894--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@rami.krispin?source=post_page---byline--60cdfe0e8894--------------------------------" rel="noopener follow">Rami Krispin</a></p></div></div></div><div class="hz ia l"><div class="ab ib"><div class="ab"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewbox="0 0 16 16"><path fill="#437AFF" d="M15.163 8c0 .65-.459 1.144-.863 1.575-.232.244-.471.5-.563.719s-.086.543-.092.875c-.006.606-.018 1.3-.49 1.781-.47.481-1.15.494-1.744.5-.324.006-.655.013-.857.094s-.465.337-.704.575c-.422.412-.906.881-1.542.881-.637 0-1.12-.469-1.543-.881-.239-.238-.49-.482-.704-.575-.214-.094-.532-.088-.857-.094-.593-.006-1.273-.019-1.744-.5s-.484-1.175-.49-1.781c-.006-.332-.012-.669-.092-.875-.08-.207-.33-.475-.563-.719-.404-.431-.863-.925-.863-1.575s.46-1.144.863-1.575c.233-.244.472-.5.563-.719.092-.219.086-.544.092-.875.006-.606.019-1.3.49-1.781s1.15-.494 1.744-.5c.325-.006.655-.012.857-.094.202-.081.465-.337.704-.575C7.188 1.47 7.671 1 8.308 1s1.12.469 1.542.881c.239.238.49.481.704.575s.533.088.857.094c.594.006 1.273.019 1.745.5.47.481.483 1.175.49 1.781.005.331.011.669.091.875s.33.475.563.719c.404.431.863.925.863 1.575"/><path fill="#fff" d="M7.328 10.5c.195 0 .381.08.519.22.137.141.215.331.216.53 0 .066.026.13.072.177a.24.24 0 0 0 .346 0 .25.25 0 0 0 .071-.177c.001-.199.079-.389.216-.53a.73.73 0 0 1 .519-.22h1.959c.13 0 .254-.053.346-.146a.5.5 0 0 0 .143-.354V6a.5.5 0 0 0-.143-.354.49.49 0 0 0-.346-.146h-1.47c-.324 0-.635.132-.865.366-.23.235-.359.552-.359.884v2.5c0 .066-.025.13-.071.177a.24.24 0 0 1-.346 0 .25.25 0 0 1-.072-.177v-2.5c0-.332-.13-.65-.359-.884A1.21 1.21 0 0 0 6.84 5.5h-1.47a.49.49 0 0 0-.346.146A.5.5 0 0 0 4.88 6v4c0 .133.051.26.143.354a.49.49 0 0 0 .347.146z"/></svg></div></div></div><span class="ic id" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ie if ah ai aj ak al am an ao ap aq ar ig ih ii" disabled="">Follow</button></p></div></div></span></div></div><div class="l ij"><span class="bf b bg z dx"><div class="ab cn ik il im"><div class="in io ab"><div class="bf b bg z dx ab ip"><span class="iq l ij">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--60cdfe0e8894--------------------------------" rel="noopener follow"><p class="bf b bg z ir is it iu iv iw ix iy bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="ic id" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">6 min read</span><div class="iz ja l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Mar 23, 2024</span></div></span></div></span></div></div></div><div class="ab cp jb jc jd je jf jg jh ji jj jk jl jm jn jo jp jq"><div class="h k w ea eb q"><div class="kg l"><div class="ab q kh ki"><div class="pw-multi-vote-icon ed iq kj kk kl"><div class=""><div class="km kn ko kp kq kr ks am kt ku kv kl"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kw kx ky kz la lb lc"><p class="bf b dy z dx"><span class="kn">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao km ld le ab q ee lf lg" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lh"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg></button></div></div></div><div class="ab q jr js jt ju jv jw jx jy jz ka kb kc kd ke kf"><div class="li k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lj an ao ap ig lk ll lm" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep ln cn"><div class="l ae"><div class="ab cb"><div class="lo lp lq lr ls lt ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lj an ao ap ig lu lv lg lw lx ly lz ma s mb mc md me mf mg mh u mi mj mk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lj an ao ap ig lu lv lg lw lx ly lz ma s mb mc md me mf mg mh u mi mj mk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lj an ao ap ig lu lv lg lw lx ly lz ma s mb mc md me mf mg mh u mi mj mk"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><p id="6f5e" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">In this post, we will review the steps of setting up a <a class="af nh" href="https://docs.docker.com/compose/" rel="noopener ugc nofollow" target="_blank">Docker-Compose</a> workflow to launch an RStudio Server inside a container. We will introduce the Docker Compose settings process and discuss when you should consider using it. Last but not least, we will demonstrate how to transition the <code class="cx ni nj nk nl b">docker run</code> workflow that was introduced in the <a class="af nh" href="https://medium.com/towards-data-science/running-rstudio-inside-a-container-e9db5e809ff8" rel="noopener">previous post</a> and launch the <a class="af nh" href="https://hub.docker.com/r/rocker/rstudio" rel="noopener ugc nofollow" target="_blank">Rocker RStudio image</a> with the Docker Compose process.</p><p id="cd01" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">Related articles:</p><div class="nm nn no np nq nr"><a rel="noopener follow" target="_blank" href="/running-rstudio-inside-a-container-e9db5e809ff8?source=post_page-----60cdfe0e8894--------------------------------"><div class="ns ab ij"><div class="nt ab co cb nu nv"><h2 class="bf fr hw z ir nw it iu nx iw iy fp bk">Running RStudio Inside a Container</h2><div class="ny l"><h3 class="bf b hw z ir nw it iu nx iw iy dx">A step-by-step guide for setting up an RStudio server inside a container with your local RStudio settings</h3></div><div class="nz l"><p class="bf b dy z ir nw it iu nx iw iy dx">towardsdatascience.com</p></div></div><div class="oa l"><div class="ob l oc od oe oa of lt nr"/></div></div></a></div><p id="d322" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">By the end of this tutorial, you will be able to transition your <code class="cx ni nj nk nl b">docker run</code> settings to a <code class="cx ni nj nk nl b">docker-compose.yml</code> file and seamlessly launch your RStudio container with the <code class="cx ni nj nk nl b">docker-compose</code> command.</p><figure class="oj ok ol om on oo og oh paragraph-image"><div role="button" tabindex="0" class="op oq ed or bh os"><div class="og oh oi"><img src="../Images/49748bef7511670c428781da1624c48a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*r_Ks3tqTAqFaTIy72cWlqw.gif"/></div></div><figcaption class="ou ov ow og oh ox oy bf b bg z dx">Launching RStudio Server inside a container with Docker Compose (screenshot by the author)</figcaption></figure><h2 id="1210" class="oz pa fq bf pb pc pd pe pf pg ph pi pj mu pk pl pm my pn po pp nc pq pr ps pt bk">Motivation</h2><p id="fbcc" class="pw-post-body-paragraph ml mm fq mn b go pu mp mq gr pv ms mt mu pw mw mx my px na nb nc py ne nf ng fj bk">Before getting started, let’s explain what Docker Compose is and when you should consider using it.</p><p id="883b" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">Starting with the <strong class="mn fr">what — </strong>Docker Compose is a simplistic framework for launching single or multiple containers. It is a wrapper of the <code class="cx ni nj nk nl b">docker run</code> command, and it manages the container launch settings using a YAML file. It is recommended to set a Docker Compose workflow instead of using the <code class="cx ni nj nk nl b">docker run</code> command <strong class="mn fr">when</strong>:</p><ul class=""><li id="f50c" class="ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng pz qa qb bk">The number of arguments of the<code class="cx ni nj nk nl b">docker run</code> command increases, and it becomes convoluted to manage it via the CLI</li><li id="c467" class="ml mm fq mn b go qc mp mq gr qd ms mt mu qe mw mx my qf na nb nc qg ne nf ng pz qa qb bk">You regularly use and work with the container</li><li id="2047" class="ml mm fq mn b go qc mp mq gr qd ms mt mu qe mw mx my qf na nb nc qg ne nf ng pz qa qb bk">The level of complexity is high (e.g., launching multiple containers in parallel, etc.)</li></ul><p id="b04a" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">We use the <code class="cx ni nj nk nl b">docker-compose.yml</code> file to set up a Docker Compose framework and launch it with the <code class="cx ni nj nk nl b">docker-compose</code> command. This process includes mapping the <code class="cx ni nj nk nl b">docker run</code> arguments into YAML format. Simple <code class="cx ni nj nk nl b">docker-compose.yml</code> file settings will include the following two arguments:</p><ul class=""><li id="879c" class="ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng pz qa qb bk"><strong class="mn fr">Version</strong> — the Docker Compose version, which is currently 3.9</li><li id="f973" class="ml mm fq mn b go qc mp mq gr qd ms mt mu qe mw mx my qf na nb nc qg ne nf ng pz qa qb bk"><strong class="mn fr">Services</strong> — a list of containers to launch and their corresponding arguments</li></ul><p id="c940" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">Let’s illustrate the mapping process of the <code class="cx ni nj nk nl b">docker run</code> command arguments to the <code class="cx ni nj nk nl b">docker-compose.yml</code> file with the below example:</p><pre class="oj ok ol om on qh nl qi bp qj bb bk"><span id="4301" class="qk pa fq nl b bg ql qm l qn qo">docker run -argument_a argument_a_values \<br/>-argument_b argument_b_values \<br/>-argument_c argument_c_values \<br/>IMAGE_NAME/IMAGE_TAG</span></pre><p id="a37e" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">Where this command has the following three arguments — <code class="cx ni nj nk nl b">argument_a</code>, <code class="cx ni nj nk nl b">argument_b</code>, <code class="cx ni nj nk nl b">argument_c</code>, and their corresponding values are <code class="cx ni nj nk nl b">argument_a_values</code>, <code class="cx ni nj nk nl b">argument_b_values</code>, <code class="cx ni nj nk nl b">argument_c_values</code>, and calling the following image — <code class="cx ni nj nk nl b">IMAGE_NAME/IMAGE_TAG</code>.</p><p id="fc76" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">The below <code class="cx ni nj nk nl b">docker-compose.yml</code> represents the mapping of the above <code class="cx ni nj nk nl b">docker run</code> arguments:</p><pre class="oj ok ol om on qh nl qi bp qj bb bk"><span id="deb5" class="qk pa fq nl b bg ql qm l qn qo">version: "3.9"<br/>services:<br/>  my_service:<br/>    image: "IMAGE_NAME/IMAGE_TAG"<br/>    argument_a:<br/>      - "argument_a_values"<br/>    argument_b:<br/>      - "argument_b_values"<br/>    argument_c:<br/>      - "argument_c_values"</span></pre><p id="80b6" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">The <code class="cx ni nj nk nl b">version</code> and <code class="cx ni nj nk nl b">services</code> arguments, as mentioned above, define the Docker Compose version and the list of images to launch during the run time, respectively. In this case, we use the most recent version, 3.9, and define a single container under the <code class="cx ni nj nk nl b">services</code> argument named <code class="cx ni nj nk nl b">my_service</code>. Under the <code class="cx ni nj nk nl b">my_service</code> section, we define the run time arguments corresponding to the above <code class="cx ni nj nk nl b">docker run</code> command arguments following the standard YAML format.</p><p id="697b" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">It is important to note that naming convention mapping between the <code class="cx ni nj nk nl b">docker run</code> command arguments and their settings in the <code class="cx ni nj nk nl b">docker-compose.yml</code> file is not always one-to-one. The Docker Compose documentation is a great resource for identifying the argument settings.</p><p id="ef40" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">In the next section, we will connect the dots and map the <code class="cx ni nj nk nl b">docker run</code> command we set in the previous tutorial to a <code class="cx ni nj nk nl b">docker-compose.yml</code> file.</p><h2 id="28d5" class="oz pa fq bf pb pc pd pe pf pg ph pi pj mu pk pl pm my pn po pp nc pq pr ps pt bk">Setting RStudio with Docker Compose</h2><p id="d467" class="pw-post-body-paragraph ml mm fq mn b go pu mp mq gr pv ms mt mu pw mw mx my px na nb nc py ne nf ng fj bk">Recall that in the <a class="af nh" rel="noopener" target="_blank" href="/running-rstudio-inside-a-container-e9db5e809ff8">previous tutorial</a>, we used the below <code class="cx ni nj nk nl b">docker run</code> command to launch the RStudio server inside a container:</p><pre class="oj ok ol om on qh nl qi bp qj bb bk"><span id="f5ef" class="qk pa fq nl b bg ql qm l qn qo">docker run --rm -ti \<br/>-v .:/home/rstudio \<br/>-v $HOME/.config/rstudio:/home/rstudio/.config/rstudio \<br/>-v $HOME/.Renviron:/home/rstudio/.Renviron \<br/>-e PASSWORD=yourpassword \<br/>-p 8787:8787 rocker/rstudio</span></pre><p id="ccf3" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">In short, the above run command uses the following arguments:</p><ul class=""><li id="6f7e" class="ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng pz qa qb bk">Volume or <code class="cx ni nj nk nl b">v</code> to mount local folders with the container file system</li><li id="c790" class="ml mm fq mn b go qc mp mq gr qd ms mt mu qe mw mx my qf na nb nc qg ne nf ng pz qa qb bk">Environment or <code class="cx ni nj nk nl b">e</code> to set the RStudio server password as an environment variable</li><li id="de8f" class="ml mm fq mn b go qc mp mq gr qd ms mt mu qe mw mx my qf na nb nc qg ne nf ng pz qa qb bk">Port or <code class="cx ni nj nk nl b">p</code> to map between the local and container ports</li></ul><p id="9cae" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">The below YAML file represents the mapping of the above <code class="cx ni nj nk nl b">docker run</code> command:</p><pre class="oj ok ol om on qh nl qi bp qj bb bk"><span id="3be0" class="qk pa fq nl b bg ql qm l qn qo">version: "3.9"<br/>services:<br/>  rstudio:<br/>    image: "rocker/rstudio"<br/>    ports:<br/>      - "8787:8787"<br/>    volumes:<br/>      - type: "bind"<br/>        source: "."<br/>        target: "/home/rstudio"<br/>      - type: "bind"<br/>        source: "$HOME/.config/rstudio"<br/>        target: "/home/rstudio/.config/rstudio"<br/>      - type: "bind"<br/>        source: "$HOME/.Renviron"<br/>        target: "/home/rstudio/.Renviron"<br/>    environment:<br/>      - PASSWORD=yourpassword</span></pre><p id="30de" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">Where we set a single service named <code class="cx ni nj nk nl b">rstudio</code> under the <code class="cx ni nj nk nl b">services</code> argument and defined the corresponding run arguments:</p><ul class=""><li id="673b" class="ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng pz qa qb bk"><code class="cx ni nj nk nl b">image</code> — defines the image name, in this case, using the RStudio Rocker image <code class="cx ni nj nk nl b">rocker/rstudio</code></li><li id="1581" class="ml mm fq mn b go qc mp mq gr qd ms mt mu qe mw mx my qf na nb nc qg ne nf ng pz qa qb bk"><code class="cx ni nj nk nl b">ports</code> — sets the port mapping between the local machine and the container</li><li id="9d94" class="ml mm fq mn b go qc mp mq gr qd ms mt mu qe mw mx my qf na nb nc qg ne nf ng pz qa qb bk"><code class="cx ni nj nk nl b">volumes</code> — maps the folders mount, using the <code class="cx ni nj nk nl b">type</code> argument to define the type of mount and the <code class="cx ni nj nk nl b">source</code> and <code class="cx ni nj nk nl b">target</code> arguments to define the local and container folder path mapping. More details on the volume arguments can be found <a class="af nh" href="https://docs.docker.com/storage/" rel="noopener ugc nofollow" target="_blank">here</a>.</li><li id="e914" class="ml mm fq mn b go qc mp mq gr qd ms mt mu qe mw mx my qf na nb nc qg ne nf ng pz qa qb bk"><code class="cx ni nj nk nl b">environment</code> — defines environment variables, in this case, we set <code class="cx ni nj nk nl b">PASSWORD</code> variable to define the RStudio server password</li></ul><p id="a904" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">Once the YAML file is set, we can use the <code class="cx ni nj nk nl b">docker-compose</code> command on the CLI to launch the RStudio container:</p><pre class="oj ok ol om on qh nl qi bp qj bb bk"><span id="2c6a" class="qk pa fq nl b bg ql qm l qn qo">docker-compose up</span></pre><p id="d94b" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">Where the <code class="cx ni nj nk nl b">up</code> argument is used to launch the container. You should expect the following output:</p><pre class="oj ok ol om on qh nl qi bp qj bb bk"><span id="8e00" class="qk pa fq nl b bg ql qm l qn qo">[+] Running 2/2<br/> ✔ Network rstudio-docker_default      Created                                                                                                                                                                   0.1s<br/> ✔ Container rstudio-docker-rstudio-1  Created                                                                                                                                                                   0.1s<br/>Attaching to rstudio-docker-rstudio-1<br/>rstudio-docker-rstudio-1  | [s6-init] making user provided files available at /var/run/s6/etc...<br/>rstudio-docker-rstudio-1  | exited 0.<br/>rstudio-docker-rstudio-1  | [s6-init] ensuring user provided files have correct perms...<br/>rstudio-docker-rstudio-1  | exited 0.<br/>rstudio-docker-rstudio-1  | [fix-attrs.d] applying ownership &amp; permissions fixes...<br/>rstudio-docker-rstudio-1  | [fix-attrs.d] done.<br/>rstudio-docker-rstudio-1  | [cont-init.d] executing container initialization scripts...<br/>rstudio-docker-rstudio-1  | [cont-init.d] 01_set_env: executing...<br/>rstudio-docker-rstudio-1  | skipping /var/run/s6/container_environment/HOME<br/>rstudio-docker-rstudio-1  | skipping /var/run/s6/container_environment/PASSWORD<br/>rstudio-docker-rstudio-1  | skipping /var/run/s6/container_environment/RSTUDIO_VERSION<br/>rstudio-docker-rstudio-1  | [cont-init.d] 01_set_env: exited 0.<br/>rstudio-docker-rstudio-1  | [cont-init.d] 02_userconf: executing...<br/>rstudio-docker-rstudio-1  | [cont-init.d] 02_userconf: exited 0.<br/>rstudio-docker-rstudio-1  | [cont-init.d] done.<br/>rstudio-docker-rstudio-1  | [services.d] starting services<br/>rstudio-docker-rstudio-1  | [services.d] done.</span></pre><p id="616e" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">After launching the container, you can access the RStudio server from your browser using the local host address with the port number, in this case — <a class="af nh" href="http://localhost:8787" rel="noopener ugc nofollow" target="_blank">http://localhost:8787</a>:</p><figure class="oj ok ol om on oo og oh paragraph-image"><div role="button" tabindex="0" class="op oq ed or bh os"><div class="og oh qp"><img src="../Images/5a36f324527f067e61dabcf0f8cce827.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*XtrAGBIjuCIoCzUYvUgR0g.png"/></div></div><figcaption class="ou ov ow og oh ox oy bf b bg z dx">RStudio Server inside a container (screenshot by the author)</figcaption></figure><p id="a468" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk"><strong class="mn fr">Note:</strong> Once launching the container with the <code class="cx ni nj nk nl b">docker-compose up</code> command, it keeps the CLI attached to the terminal until stopping it. Alternatively, you can add the <code class="cx ni nj nk nl b">d</code> argument to run it in a detach mode:</p><pre class="oj ok ol om on qh nl qi bp qj bb bk"><span id="0737" class="qk pa fq nl b bg ql qm l qn qo">docker-compose up -d</span></pre><p id="1a57" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">Likewise, the <code class="cx ni nj nk nl b">docker-compose down</code> command stops the container run time.</p><h2 id="389e" class="oz pa fq bf pb pc pd pe pf pg ph pi pj mu pk pl pm my pn po pp nc pq pr ps pt bk">Summary</h2><p id="695f" class="pw-post-body-paragraph ml mm fq mn b go pu mp mq gr pv ms mt mu pw mw mx my px na nb nc py ne nf ng fj bk">In this tutorial, we reviewed how to set up a Docker Compose framework to launch your RStudio container. This includes setting a <code class="cx ni nj nk nl b">docker-compose.yml</code> file and using the<code class="cx ni nj nk nl b"> docker-compose</code> command to launch the container concisely.</p><p id="a7fa" class="pw-post-body-paragraph ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng fj bk">The motivations for wrapping your <code class="cx ni nj nk nl b">docker run</code> command with Docker Compose are:</p><ul class=""><li id="9af8" class="ml mm fq mn b go mo mp mq gr mr ms mt mu mv mw mx my mz na nb nc nd ne nf ng pz qa qb bk">Efficient and concise — required a one-time setting and, afterward, the launch time is simple with the<code class="cx ni nj nk nl b">docker-compose</code> command (as opposed to a long <code class="cx ni nj nk nl b">docker run</code> command)</li><li id="b904" class="ml mm fq mn b go qc mp mq gr qd ms mt mu qe mw mx my qf na nb nc qg ne nf ng pz qa qb bk">Higher complexity — it simplifies the process of launching a single or multiple containers seamlessly. For example, one good use case would be running the RStudio and Postgres database together. In this case, you can set the Docker Compose process to launch the two containers to work side-by-side</li></ul><h2 id="0058" class="oz pa fq bf pb pc pd pe pf pg ph pi pj mu pk pl pm my pn po pp nc pq pr ps pt bk">Resources</h2><ul class=""><li id="ca3d" class="ml mm fq mn b go pu mp mq gr pv ms mt mu pw mw mx my px na nb nc py ne nf ng pz qa qb bk">Running RStudio Inside a Container — <a class="af nh" rel="noopener" target="_blank" href="/running-rstudio-inside-a-container-e9db5e809ff8">https://towardsdatascience.com/running-rstudio-inside-a-container-e9db5e809ff8</a></li><li id="20d7" class="ml mm fq mn b go qc mp mq gr qd ms mt mu qe mw mx my qf na nb nc qg ne nf ng pz qa qb bk">Docker Compose — <a class="af nh" href="https://docs.docker.com/compose/" rel="noopener ugc nofollow" target="_blank">https://docs.docker.com/compose/</a></li><li id="a01f" class="ml mm fq mn b go qc mp mq gr qd ms mt mu qe mw mx my qf na nb nc qg ne nf ng pz qa qb bk">The Rocker Project — <a class="af nh" href="https://rocker-project.org/" rel="noopener ugc nofollow" target="_blank">https://rocker-project.org/</a></li><li id="fa64" class="ml mm fq mn b go qc mp mq gr qd ms mt mu qe mw mx my qf na nb nc qg ne nf ng pz qa qb bk">Docker Hub — <a class="af nh" href="https://hub.docker.com/" rel="noopener ugc nofollow" target="_blank">https://hub.docker.com/</a></li><li id="f72c" class="ml mm fq mn b go qc mp mq gr qd ms mt mu qe mw mx my qf na nb nc qg ne nf ng pz qa qb bk">RStudio Docker Compose template — <a class="af nh" href="https://github.com/RamiKrispin/rstudio-docker-template" rel="noopener ugc nofollow" target="_blank">https://github.com/RamiKrispin/rstudio-docker-template</a></li></ul></div></div></div></div>    
</body>
</html>