<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Bringing Structure to Your Data</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Bringing Structure to Your Data</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/bringing-structure-to-your-data-9acbd1051a1f?source=collection_archive---------4-----------------------#2024-10-14">https://towardsdatascience.com/bringing-structure-to-your-data-9acbd1051a1f?source=collection_archive---------4-----------------------#2024-10-14</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="734b" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">Testing assumptions with path models</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@doriandrost?source=post_page---byline--9acbd1051a1f--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Dorian Drost" class="l ep by dd de cx" src="../Images/1795395ad0586eafd83d3e2f7b975ca8.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*5v2p4tW_yrIG7b5PxYyFvA.jpeg"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--9acbd1051a1f--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@doriandrost?source=post_page---byline--9acbd1051a1f--------------------------------" rel="noopener follow">Dorian Drost</a></p></div></div></div><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ib ic ah ai aj ak al am an ao ap aq ar id ie if" disabled="">Follow</button></p></div></div></span></div></div><div class="l ig"><span class="bf b bg z dx"><div class="ab cn ih ii ij"><div class="ik il ab"><div class="bf b bg z dx ab im"><span class="in l ig">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--9acbd1051a1f--------------------------------" rel="noopener follow"><p class="bf b bg z io ip iq ir is it iu iv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">11 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Oct 14, 2024</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w ea eb q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon ed in kg kh ki"><div class=""><div class="kj kk kl km kn ko kp am kq kr ks ki"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kt ku kv kw kx ky kz"><p class="bf b dy z dx"><span class="kk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kj lc ld ab q ee le lf" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lb"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count la lb">5</span></p></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lg k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lh an ao ap id li lj lk" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep ll cn"><div class="l ae"><div class="ab cb"><div class="lm ln lo lp lq lr ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ml"><img src="../Images/699faed9c69cc5392024f88bcb54515a.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*XfYwiN1YUCSLluu9"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">In complicated path models, it might become difficult to find your way. Photo by <a class="af nc" href="https://unsplash.com/@darshan394?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Deva Darshan</a> on <a class="af nc" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8c11" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Data Scientists often collect a multitude of variables and search for relationships between them. During this journey, it is helpful to have assumptions and hypotheses on how exactly variables relate to each other. Does a student’s motivation to study for the next exam influence their grades? Or do good grades lead to motivation to study at all? And what exactly are the behavioral patterns that motivated people show that lead to good grades in the end?</p><p id="e7b1" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">To give some structure to questions like the aforementioned and to provide a tool to test them empirically, I want to explain <strong class="nf fr">path models</strong>, also called <strong class="nf fr">Structural Equation Models</strong> (<strong class="nf fr">SEM</strong>s) in this article. While in social sciences like psychology path models are commonly used, I feel they are not that prominent in other areas like data science and computer science. Hence I want to give an overview of the main concept of <strong class="nf fr">path analysis</strong> and introduce <strong class="nf fr">semopy</strong>, which is a package for applying path analysis in python. Throughout this article, we will analyze artificial data to showcase typical problems that can be solved with path models and introduce the concepts of <strong class="nf fr">moderators</strong> and <strong class="nf fr">mediators</strong>. Be aware that this data has been generated for demonstration purposes and may not be realistic in every detail.</p><h1 id="06d1" class="nz oa fq bf ob oc od gq oe of og gt oh oi oj ok ol om on oo op oq or os ot ou bk">Research question</h1><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ov"><img src="../Images/6cdfe9a9cc52258ea24150f4549a83c5.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*QwJG0kXGjyyAFMDb"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Before analysing data, we need to have an idea what we search for. Photo by <a class="af nc" href="https://unsplash.com/@ansia_lasa?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Ansia Lasa</a> on <a class="af nc" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="74b6" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">If we want to analyze data, we need to have a research question in mind that we want to investigate. For this article, let us investigate school children and the grades they achieve. We might be interested in factors that foster learning and achieving good grades. That could be the amount of fun they have in school, their feeling of belonging to class, their interest in the subject, their number of friends in the class, their relationship with the teacher, their intelligence and much more. So we go into different schools and collect data by handing out questionnaires on the feeling of belonging, the relationship with the teacher, the interest in the topic and the fun the pupils have in school, we conduct an IQ test with the pupils and we ask them how many friends they have. And of course we collect their grades in the exams.</p><h2 id="4d25" class="ow oa fq bf ob ox oy oz oe pa pb pc oh nm pd pe pf nq pg ph pi nu pj pk pl pm bk">It all starts with data</h2><p id="5971" class="pw-post-body-paragraph nd ne fq nf b go pn nh ni gr po nk nl nm pp no np nq pq ns nt nu pr nw nx ny fj bk">We now have data for all the variables shown here:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ps"><img src="../Images/5739918f543b62f0a6cb408917f34e52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*GjzV6uU9D9H_Vbm6dscNjA.png"/></div></div></figure><p id="2429" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Our next step is to investigate, <em class="pt">how exactly</em> the variables influence the grade. We can make different assumptions about the influences and we can verify these assumptions with the data. Let us start with the most trivial case, where we assume that each variable has a direct influence on the grades that is independent of all the other variables. For example, we would assume that higher intelligence leads to a better grade, no matter the interest in the topic or the fun the pupil has in school. A likewise relationship with the grades we would hypothesize for the other variables as well. Visually displayed, this relationship would look like this:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk pu"><img src="../Images/1b64a11ded44737b91d9a4448f124893.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*ZnlJo83aIB4iSLiFLonpJw.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Model assuming all variables directly influence the variable grades<em class="pv">. Image by author.</em></figcaption></figure><p id="06f6" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Each arrow describes an influence between the variables. We could also formulate this relationship as a weighted sum, like this:</p><p id="0d2d" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">grades = a*<em class="pt">feeling_of_belonging</em> + b*<em class="pt">number_of_friends</em> + c*<em class="pt">relationship_with_teacher</em> + d*<em class="pt">fun_in_school</em> + e*<em class="pt">intelligence</em> + f*<em class="pt">interest_in_topic</em></p><p id="13c2" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Here a,b,c,d,e and f are weights that tell us, how strong the influence of the different variables is on our outcome <em class="pt">grades</em>. Okay, that is our assumption. Now we want to test this assumption given the data. Let’s say we have a data frame called <em class="pt">data</em>, where we have one column for each of the aforementioned variables. Then we can use semopy in python like this:</p><pre class="mm mn mo mp mq pw px py bp pz bb bk"><span id="e83c" class="qa oa fq px b bg qb qc l qd qe">import semopy <br/><br/>path = """<br/>grades ~ intelligence + interest_in_topic <br/>+ feeling_of_belonging + relationship_with_teacher <br/>+ fun_in_school + number_of_friends<br/>"""<br/><br/>m = semopy.Model(path)<br/>m.fit(data)</span></pre><p id="2369" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">In the last lines, we create a <em class="pt">semopy.Model</em> object and fit it with the data. The most interesting part is the variable <em class="pt">path</em> before. Here we specify the assumption we just had, namely that the variable <em class="pt">grades</em> is a combination of all the other variables. On the left part of the tilde (~) we have the variable that we expect to be dependent on the variables right to the tilde. Note that we didn’t explicitly specify the weights a,b,c,d,e and f. These weights are actually what we want to know, so let us run the following line to get a result:</p><pre class="mm mn mo mp mq pw px py bp pz bb bk"><span id="4b3c" class="qa oa fq px b bg qb qc l qd qe">m.inspect()</span></pre><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk qf"><img src="../Images/288f1d1a5a7d95f8d419748c33f4b1a8.png" data-original-src="https://miro.medium.com/v2/resize:fit:1074/format:webp/1*knZvyBpKFQ9PyBJbiFMYRA.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Results of the assumption that all variables directly influence the variable grade. Image by author.</figcaption></figure><p id="f4d6" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The weights a,b,c,d,e and f are what we see in the column <em class="pt">Estimate</em>. What information can we extract from this table? First, we see that some weights are bigger and some are smaller. For example, the <em class="pt">feeling_of_belonging</em> has the biggest weight (0.40), indicating that it has the strongest influence. <em class="pt">Interest_in_topic</em>, for example, has a much lower influence (0.08) and other variables like <em class="pt">intelligence</em> and <em class="pt">number_of_friends</em> have a weight of (almost) zero.</p><p id="3417" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Also, take a look at the <em class="pt">p-value</em> column. If you are familiar with statistical tests, you may already know how to interpret this. If not, don’t worry. There is a vast pile of literature on how to understand the topic of <a class="af nc" href="https://en.wikipedia.org/wiki/Statistical_significance" rel="noopener ugc nofollow" target="_blank"><strong class="nf fr">significance</strong></a> (this is what this column indicates) and I encourage you to deepen your knowledge about it. However, for the moment, we can just say that this column gives us some idea of how likely it is, that an effect we found is just random noise. For example, the influence of <em class="pt">number_of_friends</em> on grades is very small (-0.01) and it is very likely (0.42), that it is just a coincidence. Hence we would say there is <strong class="nf fr">no effect</strong>, although the weight is not exactly zero. The other way round, if the p-value is (close to) zero, we can assume that we indeed found an effect that is not just coincidence.</p><p id="1560" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Okay, so according to our analysis, there are three variables that have an influence on the grade, that are <em class="pt">interest_in_topic</em> (0.08), <em class="pt">feeling_of_belonging</em> (0.40) and <em class="pt">relationship_with_teacher</em> (0.19). The other variables have no influence. Is this our final answer?</p><p id="3c32" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">It is not! Remember, that the calculations performed by semopy were influenced by the assumptions we gave it. We said that we assume all variables to directly influence the grades independent of each other. But what if the actual relationship looks different? There are many other ways variables could influence each other, so let us come up with some different assumptions and thereby explore the concepts of <strong class="nf fr">mediators</strong> and <strong class="nf fr">moderators</strong>.</p><h1 id="71ec" class="nz oa fq bf ob oc od gq oe of og gt oh oi oj ok ol om on oo op oq or os ot ou bk">Mediators</h1><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk qg"><img src="../Images/4c0a1f6a78fb9ba86852b4021058d8f7.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*qA2rUSlhdMygBJuT"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Mediators can be like billard balls, where the one pushes the other. Photo by <a class="af nc" href="https://unsplash.com/@steve_mushero?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Steve Mushero</a> on <a class="af nc" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="8ddb" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Instead of saying that both <em class="pt">number_of_friends</em> and <em class="pt">feeling_of_belonging</em> influence grades directly, let us think in a different direction. If you don’t have any friends in class, you would not feel a sense of belonging to the class, would you? This feeling of (not) belonging might then influence the grade. So the relationship would rather look like this:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk qh"><img src="../Images/8330d79ef552182c20b9da174ccac5bb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1092/format:webp/1*8WYGqUCx1Ot95oX1U0lWXQ.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Model assuming that number_of_friends influences feeling_of_belongig which in turn influences grades. Image by author.</figcaption></figure><p id="fd61" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Note that the direct effect of <em class="pt">number_of_friends</em> on <em class="pt">grades</em> has vanished but we have an influence of <em class="pt">number_of_friends</em> on <em class="pt">feeling_of_belonging</em>, which in turn influences <em class="pt">grades</em>. We can take this assumption and let semopy test it:</p><pre class="mm mn mo mp mq pw px py bp pz bb bk"><span id="9f60" class="qa oa fq px b bg qb qc l qd qe">path = """<br/>feeling_of_belonging ~ number_of_friends<br/>grades ~ feeling_of_belonging<br/>"""<br/>m = semopy.Model(path)<br/>m.fit(data)</span></pre><p id="5653" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Here we said that <em class="pt">feeling_of_belonging</em> depends on <em class="pt">number_of_friends</em> and that <em class="pt">grades</em> depends on <em class="pt">feeling_of_belonging</em>. You see the output in the following. There is still a weight of 0.40 between <em class="pt">feeling_of_belonging</em> and <em class="pt">grades</em>, but now we also have a weight of 0.29 between <em class="pt">number_of_friends</em> and <em class="pt">feeling_of_belonging</em>. Looks like our assumption is valid. The number of friends influences the feeling of belonging and this, in turn, influences the grade.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk qi"><img src="../Images/1f378a7e073ab5a5a4d63537cf4de2cb.png" data-original-src="https://miro.medium.com/v2/resize:fit:1192/format:webp/1*t7NdbFIdZa1y7b9VdWEElA.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Results of the assumption of number_of_friends influencing feeling_of_belonging. Image by author.</figcaption></figure><p id="f065" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">The kind of influence we have modelled here is called a <strong class="nf fr">mediator</strong> because one variable mediates the influence of another. In other words, <em class="pt">number_of_friends</em> does not have a direct influence on <em class="pt">grades</em>, but an indirect one, mediated through the <em class="pt">feeling_of_belonging</em>.</p><p id="5bac" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Mediations can help us understand the exact ways and processes by which some variables influence each other. Students who have clear goals and ideas of what they want to become are less likely to drop out of high school, but what exactly are the behavioral patterns that lead to performing well in school? Is it learning more? Is it seeking help if one doesn’t understand a topic? These could both be mediators that (partly) explain the influence of clear goals on academic achievement.</p><h1 id="76f3" class="nz oa fq bf ob oc od gq oe of og gt oh oi oj ok ol om on oo op oq or os ot ou bk">Moderators</h1><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk qj"><img src="../Images/9815aa6f25875b7f31257e1b1e824262.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*IofQqy2mHfqaeMpM"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">A moderator can be like a valve, that only allows a certain throughput. Photo by <a class="af nc" href="https://unsplash.com/@igalness?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Igal Ness</a> on <a class="af nc" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><p id="cd01" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">We just saw that assuming a different relationship between the variables helped describe the data more effectively. Maybe we can do something similar to make sense of the fact that intelligence has no influence on the grade in our data. This is surprising, as we would expect more intelligent pupils to reach higher grades on average, wouldn’t we? However, if a pupil is just not interested in the topic they wouldn’t spend much effort, would they? Maybe there is not a direct influence of intelligence on the grades, but there is a joint force of intelligence and interest. If pupils are interested in the topics, the more intelligent ones will receive higher grades, but if they are not interested, it doesn’t matter, because they don’t spend any effort. We could visualize this relationship like this:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk qk"><img src="../Images/5b1518740959175a4cbe2918fc9a8721.png" data-original-src="https://miro.medium.com/v2/resize:fit:1182/format:webp/1*ia4BYAsxR9-_S6-tZj6V6Q.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Model assuming that interest_in_topic moderatues the influence of intelligence on grades. Image by author.</figcaption></figure><p id="d5df" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">That is, we assume there is an effect of <em class="pt">intelligence</em> on the <em class="pt">grades</em>, but this effect is influenced by <em class="pt">interest_in_topic</em>. If interest is high, pupils will make use of their cognitive abilities and achieve higher grades, but if interest is low, they will not.</p><p id="5ebf" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">If we want to test this assumption in semopy, we have to create a new variable that is the product of <em class="pt">intelligence</em> and <em class="pt">interest_in_topic</em>. Do you see how multiplying the variables reflects the ideas we just had? If <em class="pt">interest_in_topic</em> is near zero, the whole product is close to zero, no matter the <em class="pt">intelligence</em>. If <em class="pt">interest_in_topic</em> is high though, the product will be mainly driven by the high or low <em class="pt">intelligence</em>. So, we calculate a new column of our dataframe, call it <em class="pt">intelligence_x_interest</em> and feed semopy with our assumed relationship between this variable and the grades:</p><pre class="mm mn mo mp mq pw px py bp pz bb bk"><span id="49de" class="qa oa fq px b bg qb qc l qd qe">path = """<br/>grades ~ intellgence_x_interest<br/>"""<br/>m = semopy.Model(path)<br/>m.fit(data)</span></pre><p id="4538" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">And we find an effect:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk ql"><img src="../Images/caccfe4c42e37ed16aa2ed026cb363b1.png" data-original-src="https://miro.medium.com/v2/resize:fit:1058/format:webp/1*h45lltOiIMXL0N1B82Fpfg.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Result of the assumption of the product of intelligence and interest influencing grades. Image by author.</figcaption></figure><p id="2833" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Previously, <em class="pt">intelligence</em> had no effect on <em class="pt">grades</em> and <em class="pt">interest_in_topic</em> had a very small one (0.08). But if we combine them, we find a very big effect of 0.81. Looks like this combination of both variables describes our data much better.</p><p id="3411" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">This interaction of variables is called <strong class="nf fr">moderation</strong>. We would say that <em class="pt">interest_in_topic</em> moderates the influence of <em class="pt">intelligence</em> on <em class="pt">grades</em> because the strength of the connection between <em class="pt">intelligence</em> and <em class="pt">grades</em> depends on the <em class="pt">interest</em>. Moderations can be important to understand how relations between variables differ in different circumstances or between different groups of participants. For example, longer experience in a job influences the salary positively, but for men, this influence is even stronger than for women. In this case, gender is the moderator for the effect of work experience on salary.</p><h1 id="d318" class="nz oa fq bf ob oc od gq oe of og gt oh oi oj ok ol om on oo op oq or os ot ou bk">Summing up</h1><p id="1967" class="pw-post-body-paragraph nd ne fq nf b go pn nh ni gr po nk nl nm pp no np nq pq ns nt nu pr nw nx ny fj bk">If we combine all the previous steps, our new model looks like this:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk qm"><img src="../Images/6b6afe9978fc8a769b9bd5e1137ca139.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*hygoaAaugOCsIWFSAla-qA.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Full model with all the previous assumptions. Image by author.</figcaption></figure><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk qn"><img src="../Images/136f86dc292ae0b157a2e61087332838.png" data-original-src="https://miro.medium.com/v2/resize:fit:1258/format:webp/1*TMgsofSvrTyJkFhr6P0Vtg.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Results of the full model. Image by author.</figcaption></figure><p id="2da9" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">Now we have a more sophisticated and more plausible structure for our data. Note that <em class="pt">fun_in_school</em> still has no influence on the <em class="pt">grades</em> (hence I gave it a dashed line in the visualization above). Either there is none in the data, or we just did not find the correct interplay with the other variables yet. We might even be missing some interesting variables. Just like <em class="pt">intelligence</em> only made sense to look at in combination with <em class="pt">interest_in_topic</em>, maybe there is another variable that is required to understand the influence <em class="pt">fun_in_school</em> has on the grades. This shows you, that for path analysis, it is important to make sense of your data and have an idea what you want to investigate. It all starts with assumptions which you derive from theory (or sometimes from gut feeling) and which you then test with the data to better understand it.</p><p id="358a" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">This is what path models are about. Let us sum up what we just learned.</p><ul class=""><li id="22a3" class="nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny qo qp qq bk">Path models allow us to test assumptions on how exactly variables influence each other.</li><li id="0580" class="nd ne fq nf b go qr nh ni gr qs nk nl nm qt no np nq qu ns nt nu qv nw nx ny qo qp qq bk"><strong class="nf fr">Mediations</strong> appear, if a variable <em class="pt">a</em> does not have a direct influence on a variable <em class="pt">c</em>, but influences another variable <em class="pt">b</em>, which then influences <em class="pt">c</em>.</li><li id="c49a" class="nd ne fq nf b go qr nh ni gr qs nk nl nm qt no np nq qu ns nt nu qv nw nx ny qo qp qq bk">We speak of <strong class="nf fr">moderations</strong> if the influence of a variable <em class="pt">a</em> on a variable <em class="pt">c</em> becomes stronger or less strong depending on another variable <em class="pt">b</em>. This can be modelled by calculating the product of variables.</li><li id="5396" class="nd ne fq nf b go qr nh ni gr qs nk nl nm qt no np nq qu ns nt nu qv nw nx ny qo qp qq bk"><strong class="nf fr">Semopy</strong> can be used to test path models with given data in python.</li></ul><p id="0b9d" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">I hope I have been able to convince you of the usefulness of path models. What I showed you is just the very beginning of it though. Many more sophisticated assumptions can be tested with path models or other models derived from them, that go way beyond the scope of this article.</p><h1 id="5e0f" class="nz oa fq bf ob oc od gq oe of og gt oh oi oj ok ol om on oo op oq or os ot ou bk">References</h1><p id="8642" class="pw-post-body-paragraph nd ne fq nf b go pn nh ni gr po nk nl nm pp no np nq pq ns nt nu pr nw nx ny fj bk">You can find semopy here:</p><ul class=""><li id="2301" class="nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny qo qp qq bk"><a class="af nc" href="https://semopy.com/index.html" rel="noopener ugc nofollow" target="_blank">https://semopy.com/index.html</a></li></ul><p id="7c29" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">If you want to learn more about path analysis, Wikipedia can be a good entry point:</p><ul class=""><li id="ee3d" class="nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny qo qp qq bk"><a class="af nc" href="https://en.wikipedia.org/wiki/Structural_equation_modeling" rel="noopener ugc nofollow" target="_blank">https://en.wikipedia.org/wiki/Structural_equation_modeling</a></li></ul><p id="4d06" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">I use this book for statistical background (unfortunately, it is available in German only):</p><ul class=""><li id="1079" class="nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny qo qp qq bk">Eid, M., Gollwitzer, M., &amp; Schmitt, M. (2015). Statistik und Forschungsmethoden.</li></ul><p id="8056" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk">This is how the data for this article has been generated:</p><pre class="mm mn mo mp mq pw px py bp pz bb bk"><span id="e5dd" class="qa oa fq px b bg qb qc l qd qe">import numpy as np<br/>import pandas as pd<br/><br/>np.random.seed(42)<br/><br/>N = 7500<br/><br/>def norm(x):<br/>    return (x - np.mean(x)) / np.std(x)<br/>    <br/><br/>number_of_friends = [int(x) for x in np.random.exponential(2, N)]<br/><br/># let's assume the questionairs here had a range from 0 to 5<br/>relationship_with_teacher = np.random.normal(3.5,1,N)<br/>relationship_with_teacher = np.clip(relationship_with_teacher, 0,5)<br/>fun_in_school = np.random.normal(2.5, 2, N)<br/>fun_in_school = np.clip(fun_in_school, 0,5)<br/><br/># let's assume the interest_in_topic questionaire goes from 0 to 10<br/>interest_in_topic = 10-np.random.exponential(1, N)<br/>interest_in_topic = np.clip(interest_in_topic, 0, 10)<br/><br/>intelligence = np.random.normal(100, 15, N)<br/># normalize variables<br/>interest_in_topic = norm(interest_in_topic)<br/>fun_in_school = norm(fun_in_school)<br/>intelligence = norm(intelligence)<br/>relationship_with_teacher = norm(relationship_with_teacher)<br/>number_of_friends = norm(number_of_friends)<br/><br/># create dependend variables<br/>feeling_of_belonging = np.multiply(0.3, number_of_friends) + np.random.normal(0, 1, N)<br/>grades = 0.8 * intelligence * interest_in_topic + 0.2 * relationship_with_teacher + 0.4*feeling_of_belonging + np.random.normal(0,0.5,N)<br/><br/>data = pd.DataFrame({<br/>    "grades":grades,<br/>    "intelligence":intelligence,<br/>    "number_of_friends":number_of_friends,<br/>    "fun_in_school":fun_in_school,<br/>    "feeling_of_belonging": feeling_of_belonging,<br/>    "interest_in_topic":interest_in_topic,<br/>    "intellgence_x_interest" : intelligence * interest_in_topic,<br/>    "relationship_with_teacher":relationship_with_teacher<br/>})</span></pre><p id="731f" class="pw-post-body-paragraph nd ne fq nf b go ng nh ni gr nj nk nl nm nn no np nq nr ns nt nu nv nw nx ny fj bk"><em class="pt">Like this article? </em><a class="af nc" href="https://medium.com/@doriandrost" rel="noopener"><em class="pt">Follow me</em></a><em class="pt"> to be notified of my future posts.</em></p></div></div></div></div>    
</body>
</html>