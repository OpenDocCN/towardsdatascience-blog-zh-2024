<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>The Arcane Network</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>The Arcane Network</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/the-arcane-network-95d3f19749be?source=collection_archive---------3-----------------------#2024-12-02">https://towardsdatascience.com/the-arcane-network-95d3f19749be?source=collection_archive---------3-----------------------#2024-12-02</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><figure class="fr fs ft fu fv fw fo fp paragraph-image"><div role="button" tabindex="0" class="fx fy ed fz bh ga"><div class="fo fp fq"><img src="../Images/4302fc9ae4ee9be837e375bae43e5b52.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*1X90lhBuFkDTkPt_uK7vlw.png"/></div></div></figure><div/><div><h2 id="12c8" class="pw-subtitle-paragraph hc ge gf bf b hd he hf hg hh hi hj hk hl hm hn ho hp hq hr cq dx">How to use network science and Python to map out the popular show</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hs ht hu hv hw ab"><div><div class="ab hx"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@janosovm?source=post_page---byline--95d3f19749be--------------------------------" rel="noopener follow"><div class="l hy hz by ia ib"><div class="l ed"><img alt="Milan Janosov" class="l ep by dd de cx" src="../Images/b7ede67b165cdd368d96f13f46c68ccb.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*ONtu-5PrUgdsazs0lKoNgQ.png"/><div class="ic by l dd de em n id eo"/></div></div></a></div></div><div class="ie ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--95d3f19749be--------------------------------" rel="noopener follow"><div class="l if ig by ia ih"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ii cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="ic by l br ii em n id eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="ij ab q"><div class="ab q ik"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b il im bk"><a class="af ag ah ai aj ak al am an ao ap aq ar in" data-testid="authorName" href="https://medium.com/@janosovm?source=post_page---byline--95d3f19749be--------------------------------" rel="noopener follow">Milan Janosov</a></p></div></div></div><div class="io ip l"><div class="ab iq"><div class="ab"><svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewbox="0 0 16 16"><path fill="#437AFF" d="M15.163 8c0 .65-.459 1.144-.863 1.575-.232.244-.471.5-.563.719s-.086.543-.092.875c-.006.606-.018 1.3-.49 1.781-.47.481-1.15.494-1.744.5-.324.006-.655.013-.857.094s-.465.337-.704.575c-.422.412-.906.881-1.542.881-.637 0-1.12-.469-1.543-.881-.239-.238-.49-.482-.704-.575-.214-.094-.532-.088-.857-.094-.593-.006-1.273-.019-1.744-.5s-.484-1.175-.49-1.781c-.006-.332-.012-.669-.092-.875-.08-.207-.33-.475-.563-.719-.404-.431-.863-.925-.863-1.575s.46-1.144.863-1.575c.233-.244.472-.5.563-.719.092-.219.086-.544.092-.875.006-.606.019-1.3.49-1.781s1.15-.494 1.744-.5c.325-.006.655-.012.857-.094.202-.081.465-.337.704-.575C7.188 1.47 7.671 1 8.308 1s1.12.469 1.542.881c.239.238.49.481.704.575s.533.088.857.094c.594.006 1.273.019 1.745.5.47.481.483 1.175.49 1.781.005.331.011.669.091.875s.33.475.563.719c.404.431.863.925.863 1.575"/><path fill="#fff" d="M7.328 10.5c.195 0 .381.08.519.22.137.141.215.331.216.53 0 .066.026.13.072.177a.24.24 0 0 0 .346 0 .25.25 0 0 0 .071-.177c.001-.199.079-.389.216-.53a.73.73 0 0 1 .519-.22h1.959c.13 0 .254-.053.346-.146a.5.5 0 0 0 .143-.354V6a.5.5 0 0 0-.143-.354.49.49 0 0 0-.346-.146h-1.47c-.324 0-.635.132-.865.366-.23.235-.359.552-.359.884v2.5c0 .066-.025.13-.071.177a.24.24 0 0 1-.346 0 .25.25 0 0 1-.072-.177v-2.5c0-.332-.13-.65-.359-.884A1.21 1.21 0 0 0 6.84 5.5h-1.47a.49.49 0 0 0-.346.146A.5.5 0 0 0 4.88 6v4c0 .133.051.26.143.354a.49.49 0 0 0 .347.146z"/></svg></div></div></div><span class="ir is" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b il im dx"><button class="it iu ah ai aj ak al am an ao ap aq ar iv iw ix" disabled="">Follow</button></p></div></div></span></div></div><div class="l iy"><span class="bf b bg z dx"><div class="ab cn iz ja jb"><div class="jc jd ab"><div class="bf b bg z dx ab je"><span class="jf l iy">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar in ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--95d3f19749be--------------------------------" rel="noopener follow"><p class="bf b bg z jg jh ji jj jk jl jm jn bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="ir is" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">7 min read</span><div class="jo jp l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Dec 2, 2024</span></div></span></div></span></div></div></div><div class="ab cp jq jr js jt ju jv jw jx jy jz ka kb kc kd ke kf"><div class="h k w ea eb q"><div class="kv l"><div class="ab q kw kx"><div class="pw-multi-vote-icon ed jf ky kz la"><div class=""><div class="lb lc ld le lf lg lh am li lj lk la"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l ll lm ln lo lp lq lr"><p class="bf b dy z dx"><span class="lc">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao lb lu lv ab q ee lw lx" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lt"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count ls lt">2</span></p></button></div></div></div><div class="ab q kg kh ki kj kk kl km kn ko kp kq kr ks kt ku"><div class="ly k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lz an ao ap iv ma mb mc" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep md cn"><div class="l ae"><div class="ab cb"><div class="me mf mg mh mi gb ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lz an ao ap iv mj mk lx ml mm mn mo mp s mq mr ms mt mu mv mw u mx my mz"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lz an ao ap iv mj mk lx ml mm mn mo mp s mq mr ms mt mu mv mw u mx my mz"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lz an ao ap iv mj mk lx ml mm mn mo mp s mq mr ms mt mu mv mw u mx my mz"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><p id="97b9" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">The second season of <em class="nw">Arcane</em>, a recent blockbuster series on Netflix based on the universe of one of the most popular online video games ever, League of Legends, is set in a fantasy world with heavy steampunk design, closed with astonishing visuals and a record-breaking budget. As a good network and data scientist with a particular interest in turning pop cultural items into data visualization, this was all I needed after finishing the closing season to map out the hidden connections and turn the storyline of Arcane into a network visualization — using Python. Hence, by the end of this tutorial, you will have hands-on skills on how to create and visualize the network behind Arcane.</p><p id="2d07" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">However, these skills and methods are absolutely not specific to this story. In fact, they highlight the general approach network science provides to map out, design, visualize, and interpret networks of any complex system. These systems can range from transportation and COVID-19 spreading network patterns to brain networks to various social networks, such as that of the Arcane series.</p><p id="b140" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk"><em class="nw">All images created by the author.</em></p><h1 id="b677" class="nx ny gf bf nz oa ob hf oc od oe hi of og oh oi oj ok ol om on oo op oq or os bk">1. Collecting the list of characters</h1><p id="558c" class="pw-post-body-paragraph na nb gf nc b hd ot ne nf hg ou nh ni nj ov nl nm nn ow np nq nr ox nt nu nv fj bk">Since here we are going to map out the connections behind all characters, first, we need to get a list of each character. For this, the Arcane <a class="af oy" href="https://arcane.fandom.com/wiki/Category:Characters" rel="noopener ugc nofollow" target="_blank">fan wiki </a>site is an excellent source of free-to-use information (CC BY-SA 3.0), which we can easily access by simple web scraping techniques. Namely, we will use urllib to download, and with BeautifulSoup, we will extract the names and fan wiki profile URLs of each character listed on the main character page.</p><p id="b93a" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">First downloading the character listing site’s html:</p><pre class="oz pa pb pc pd pe pf pg bp ph bb bk"><span id="1317" class="pi ny gf pf b bg pj pk l pl pm">import urllib<br/>import bs4 as bs<br/>from urllib.request import urlopen<br/><br/><br/>url_char = 'https://arcane.fandom.com/wiki/Category:Characters'<br/><br/>sauce = urlopen(url_char).read()<br/>soup  = bs.BeautifulSoup(sauce,'lxml')</span></pre><p id="7994" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">Then, I extracted all the potentially relevant names. One can easily figure out what tags to feed the parsed html stored in the ‘soup’ variable by just right-clicking on a desired element (in this case, a character profile) and selecting the element inspection option in any browser.</p><p id="1a7a" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">From this, I learned that the name and url of a character are stored in a line which has ‘title=’ in it, but does not contain ‘:’ (which corresponds to categories). Additionally, I created a still_character flag, which helped me decide which subpages on the character listing page still belong to legitimate characters of the story.</p><pre class="oz pa pb pc pd pe pf pg bp ph bb bk"><span id="a178" class="pi ny gf pf b bg pj pk l pl pm">import re<br/><br/>chars = soup.find_all('li')<br/>still_character = True<br/>names_urls = {}<br/><br/>for char in chars:<br/><br/>    if '" title="' in str(char) and ':' not in char.text and still_character:<br/>    <br/>        char_name = char.text.strip().rstrip()<br/><br/>        if char_name == 'Arcane': <br/>            still_character = False        <br/>            <br/>        char_url = 'https://arcane.fandom.com' + re.search(r'href="([^"]+)"', str(char)).group(1)<br/>        <br/>        if still_character:<br/>            names_urls[char_name] = char_url</span></pre><p id="4699" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">The previous code block will create a dictionary (‘names_urls’) which stores the name and url of each character as key-value pairs. Now let’s have a quick look at what we have and print the name-url dictionary and the total length of it:</p><pre class="oz pa pb pc pd pe pf pg bp ph bb bk"><span id="ecaf" class="pi ny gf pf b bg pj pk l pl pm">for name, url in names_urls.items():<br/>    print(name, url)</span></pre><p id="275c" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">A sample of the output from this code block, where we can text each link — pointing to the biography profile of each character:</p><figure class="oz pa pb pc pd fw fo fp paragraph-image"><div role="button" tabindex="0" class="fx fy ed fz bh ga"><div class="fo fp pn"><img src="../Images/3ad33d86437ab3146554e91a80d70500.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*kB6J2-L3MR4FV9HRsxEyGg.png"/></div></div></figure><pre class="oz pa pb pc pd pe pf pg bp ph bb bk"><span id="6319" class="pi ny gf pf b bg pj pk l pl pm">print(len(names_urls))</span></pre><p id="2c78" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">Which code cell returns the result of 67, implying the total number of named characters we have to deal with. This means we are already done with the first task — we have a comprehensive list of characters as well as easy access to their full textual profile on their fan wiki sites.</p><h1 id="b50b" class="nx ny gf bf nz oa ob hf oc od oe hi of og oh oi oj ok ol om on oo op oq or os bk">2. Collecting profiles</h1><p id="f4f3" class="pw-post-body-paragraph na nb gf nc b hd ot ne nf hg ou nh ni nj ov nl nm nn ow np nq nr ox nt nu nv fj bk">To map out the connections between two characters, we figure out a way to quantify the relationship between each two characters. To capture this, I rely on how frequently the two character’s biographies reference each other. On the technical end, to achieve this, we will need to collect these complete biographies we just got the links to. We will get that again using simple web scraping techniques, and then save the source of each site in a separate file locally as follows.</p><pre class="oz pa pb pc pd pe pf pg bp ph bb bk"><span id="a88c" class="pi ny gf pf b bg pj pk l pl pm"># output folder for the profile htmls<br/>import os<br/>folderout = 'fandom_profiles'<br/>if not os.path.exists(folderout):<br/>    os.makedirs(folderout)<br/>      <br/># crawl and save the profile htmls<br/>for ind, (name, url) in enumerate(names_urls.items()):<br/>    if not os.path.exists(folderout + '/' + name + '.html'):<br/>        fout = open(folderout + '/' + name + '.html', "w")<br/>        fout.write(str(urlopen(url).read()))<br/>        fout.close()</span></pre><p id="ab14" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">By the end of this section, our folder ‘fandom_profiles’ should contain the fanwiki profiles of each Arcane character — ready to be processed as we work our way towards building the Arcane network.</p><h1 id="035b" class="nx ny gf bf nz oa ob hf oc od oe hi of og oh oi oj ok ol om on oo op oq or os bk">3. The Arcane network</h1><p id="9456" class="pw-post-body-paragraph na nb gf nc b hd ot ne nf hg ou nh ni nj ov nl nm nn ow np nq nr ox nt nu nv fj bk">To build the network between characters, we assume that the intensity of interactions between two characters is signaled by the number of times each character’s profile mentions the other. Hence, the nodes of this network are the characters, which are linked with connections of varying strength based on the number of times each character’s wiki site source references any other character’s wiki.</p><h2 id="c6cd" class="po ny gf bf nz pp pq pr oc ps pt pu of nj pv pw px nn py pz qa nr qb qc qd qe bk">Building the network</h2><p id="8ffa" class="pw-post-body-paragraph na nb gf nc b hd ot ne nf hg ou nh ni nj ov nl nm nn ow np nq nr ox nt nu nv fj bk">In the following code block, we build up the edge list — the list of connections that contains both the source and the target node (character) of each connection, as well as the weight (co-reference frequency) between the two characters. Additionally, to conduct the in-profile search effectively, I create a names_ids which only contains the specific identifier of each character, without the rest of the web address.</p><pre class="oz pa pb pc pd pe pf pg bp ph bb bk"><span id="7609" class="pi ny gf pf b bg pj pk l pl pm"># extract the name mentions from the html sources<br/># and build the list of edges in a dictionary<br/>edges = {}<br/>names_ids  = {n : u.split('/')[-1] for n, u in names_urls.items()}<br/><br/>for fn in [fn for fn in os.listdir(folderout) if '.html' in fn]:<br/><br/>    name = fn.split('.html')[0]<br/>    <br/>    with open(folderout + '/' + fn) as myfile:<br/>        text = myfile.read()<br/>        soup  = bs.BeautifulSoup(text,'lxml')<br/>        text = ' '.join([str(a) for a in soup.find_all('p')[2:]])<br/>        soup = bs.BeautifulSoup(text,'lxml')<br/>        <br/>        <br/>        for n, i in names_ids.items():<br/>            <br/>            w = text.split('Image Gallery')[0].count('/' + i) <br/>            if w&gt;0:<br/>                edge = '\t'.join(sorted([name, n]))<br/>                if edge not in edges:<br/>                    edges[edge] = w<br/>                else:<br/>                    edges[edge] += w<br/><br/>len(edges)</span></pre><p id="64c1" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">As this code block runs, it should return around 180 edges.</p><p id="8a2e" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">Next, we use the NetworkX graph analytics library to turn the edge list into a graph object and output the number of nodes and edges the graph has:</p><pre class="oz pa pb pc pd pe pf pg bp ph bb bk"><span id="03e8" class="pi ny gf pf b bg pj pk l pl pm">#  create the networkx graph from the dict of edges<br/>import networkx as nx<br/>G = nx.Graph()<br/>for e, w in edges.items():<br/>    if w&gt;0:<br/>        e1, e2 = e.split('\t')<br/>        G.add_edge(e1, e2, weight=w)<br/><br/>G.remove_edges_from(nx.selfloop_edges(G))<br/><br/>print('Number of nodes: ', G.number_of_nodes())<br/>print('Number of edges: ', G.number_of_edges())</span></pre><p id="a901" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">The output of this code block:</p><figure class="oz pa pb pc pd fw fo fp paragraph-image"><div role="button" tabindex="0" class="fx fy ed fz bh ga"><div class="fo fp qf"><img src="../Images/0efcd63ba520a218c408ab4c57c3bcac.png" data-original-src="https://miro.medium.com/v2/resize:fit:560/format:webp/1*nUlpcWslNl-06BFp_kqqVw.png"/></div></div></figure><p id="1af5" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">This output tells us that while we started with 67 characters, 16 of them ended up not being connected to anyone in the network, hence the smaller number of nodes in the constructed graph.</p><h2 id="2644" class="po ny gf bf nz pp pq pr oc ps pt pu of nj pv pw px nn py pz qa nr qb qc qd qe bk">Visualizing the network</h2><p id="ef3a" class="pw-post-body-paragraph na nb gf nc b hd ot ne nf hg ou nh ni nj ov nl nm nn ow np nq nr ox nt nu nv fj bk">Once we have the network, we can visualize it! First, let’s create a simple draft visualization of the network using Matplotlib and the built-in tools of NetworkX.</p><pre class="oz pa pb pc pd pe pf pg bp ph bb bk"><span id="9fe9" class="pi ny gf pf b bg pj pk l pl pm"># take a very brief look at the network<br/>import matplotlib.pyplot as plt<br/>f, ax = plt.subplots(1,1,figsize=(15,15))<br/>nx.draw(G, ax=ax, with_labels=True)<br/>plt.savefig('test.png')</span></pre><p id="ca0a" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">The output image of this cell:</p><figure class="oz pa pb pc pd fw fo fp paragraph-image"><div role="button" tabindex="0" class="fx fy ed fz bh ga"><div class="fo fp qg"><img src="../Images/3b7a5aa717021a4b84c3d48a813ef25d.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*DPTJLRyJ8bGLFUu-3svL0Q.png"/></div></div></figure><p id="6da5" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">While this network already gives a few hints about the main structure and most frequent characteristics of the show, we can design a much more detailed visualization using the open-source network visualization software Gephi. For this, we need to export the network into a .gexf graph data file first, as follows.</p><pre class="oz pa pb pc pd pe pf pg bp ph bb bk"><span id="8825" class="pi ny gf pf b bg pj pk l pl pm">nx.write_gexf(G, 'arcane_network.gexf')</span></pre><p id="974a" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">Now, the tutorial on how to visualize this network using Gephi:</p><figure class="oz pa pb pc pd fw fo fp paragraph-image"><div role="button" tabindex="0" class="fx fy ed fz bh ga"><div class="fo fp qh"><img src="../Images/aae9b3347f0af50a8557d15dbb93153c.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*PiDQHbIy2j2-Wst8xi5_PA.png"/></div></div><figcaption class="qi qj qk fo fp ql qm bf b bg z dx">Video tutorial on Youtube: <a class="af oy" href="https://www.youtube.com/watch?v=utm91FhZalQ" rel="noopener ugc nofollow" target="_blank">https://www.youtube.com/watch?v=utm91FhZalQ</a></figcaption></figure><h2 id="7e85" class="po ny gf bf nz pp pq pr oc ps pt pu of nj pv pw px nn py pz qa nr qb qc qd qe bk">Extras</h2><p id="95bb" class="pw-post-body-paragraph na nb gf nc b hd ot ne nf hg ou nh ni nj ov nl nm nn ow np nq nr ox nt nu nv fj bk">Here comes an extension part, which I am referring to in the video. After exporting the node table, including the network community indices, I read that table using Pandas and assigned individual colors to each community. I got the colors (and their hex codes) from ChatGPT, asking it to align with the main color themes of the show. Then, this block of code exports the color—which I again used in Gephi to color the final graph.</p><pre class="oz pa pb pc pd pe pf pg bp ph bb bk"><span id="3bec" class="pi ny gf pf b bg pj pk l pl pm">import pandas as pd<br/>nodes = pd.read_csv('nodes.csv')<br/><br/>pink = '#FF4081'<br/>blue = '#00FFFF'<br/>gold = '#FFD700'<br/>silver = '#C0C0C0'<br/>green = '#39FF14'<br/><br/>cmap = {0 : green, <br/>        1 : pink,<br/>        2 : gold,<br/>        3 : blue, <br/>    }<br/><br/>nodes['color'] = nodes.modularity_class.map(cmap)<br/>nodes.set_index('Id')[['color']].to_csv('arcane_colors.csv')</span></pre><h1 id="3418" class="nx ny gf bf nz oa ob hf oc od oe hi of og oh oi oj ok ol om on oo op oq or os bk">Summary</h1><p id="d72b" class="pw-post-body-paragraph na nb gf nc b hd ot ne nf hg ou nh ni nj ov nl nm nn ow np nq nr ox nt nu nv fj bk">As we color the network based on the communities we found (communities meaning highly interconnected subgraphs of the original network), we uncovered four major groups, each corresponding to specific sets of characters within the storyline. Not so surprisingly, the algorithm clustered together the main protagonist family with Jinx, Vi, and Vander (pink). Then, we also see the cluster of the underground figures of Zaun (blue), such as Silco, while the elite of Piltover (blue) and the militarist enforce (green) are also well-grouped together.</p><p id="81e0" class="pw-post-body-paragraph na nb gf nc b hd nd ne nf hg ng nh ni nj nk nl nm nn no np nq nr ns nt nu nv fj bk">The beauty and use of such community structures is that while such explanations put it in context very easily, usually, it would be very hard to come up with a similar map only based on intuition. While the methodology presented here clearly shows how we can use network science to extract the hidden connections of virtual (or real) social systems, let it be the partners of a law firm, the co-workers of an accounting firm, and the HR department of a major oil company.</p></div></div></div></div>    
</body>
</html>