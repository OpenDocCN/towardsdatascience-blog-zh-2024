<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
  "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title>Step by Step Basics: Code Autodocumentation</title>
<link href="../Styles/Style.css" type="text/css" rel="stylesheet"/>
</head>
<body>
<h1>Step by Step Basics: Code Autodocumentation</h1>
<blockquote>原文：<a href="https://towardsdatascience.com/step-by-step-basics-code-autodocumentation-fa0d9ae4ac71?source=collection_archive---------2-----------------------#2024-03-22">https://towardsdatascience.com/step-by-step-basics-code-autodocumentation-fa0d9ae4ac71?source=collection_archive---------2-----------------------#2024-03-22</a></blockquote><div><div class="em fe ff fg fh fi"/><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><div/><div><h2 id="063f" class="pw-subtitle-paragraph gn fp fq bf b go gp gq gr gs gt gu gv gw gx gy gz ha hb hc cq dx">Generate flawless documentation of Python code using Sphinx</h2><div><div class="speechify-ignore ab cp"><div class="speechify-ignore bh l"><div class="hd he hf hg hh ab"><div><div class="ab hi"><div><div class="bm" aria-hidden="false"><a href="https://medium.com/@lucydickinson?source=post_page---byline--fa0d9ae4ac71--------------------------------" rel="noopener follow"><div class="l hj hk by hl hm"><div class="l ed"><img alt="Lucy Dickinson" class="l ep by dd de cx" src="../Images/5a075bb38f9133678d55a26b2683729f.png" width="44" height="44" loading="lazy" data-testid="authorPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:88:88/1*8rl5Zaq1h_zK_zPUPbHKHg.jpeg"/><div class="hn by l dd de em n ho eo"/></div></div></a></div></div><div class="hp ab ed"><div><div class="bm" aria-hidden="false"><a href="https://towardsdatascience.com/?source=post_page---byline--fa0d9ae4ac71--------------------------------" rel="noopener follow"><div class="l hq hr by hl hs"><div class="l ed"><img alt="Towards Data Science" class="l ep by br ht cx" src="../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png" width="24" height="24" loading="lazy" data-testid="publicationPhoto" data-original-src="https://miro.medium.com/v2/resize:fill:48:48/1*CJe3891yB1A1mzMdqemkdg.jpeg"/><div class="hn by l br ht em n ho eo"/></div></div></a></div></div></div></div></div><div class="bn bh l"><div class="ab"><div style="flex:1"><span class="bf b bg z bk"><div class="hu ab q"><div class="ab q hv"><div class="ab q"><div><div class="bm" aria-hidden="false"><p class="bf b hw hx bk"><a class="af ag ah ai aj ak al am an ao ap aq ar hy" data-testid="authorName" href="https://medium.com/@lucydickinson?source=post_page---byline--fa0d9ae4ac71--------------------------------" rel="noopener follow">Lucy Dickinson</a></p></div></div></div><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span><p class="bf b hw hx dx"><button class="ib ic ah ai aj ak al am an ao ap aq ar id ie if" disabled="">Follow</button></p></div></div></span></div></div><div class="l ig"><span class="bf b bg z dx"><div class="ab cn ih ii ij"><div class="ik il ab"><div class="bf b bg z dx ab im"><span class="in l ig">Published in</span><div><div class="l" aria-hidden="false"><a class="af ag ah ai aj ak al am an ao ap aq ar hy ab q" data-testid="publicationName" href="https://towardsdatascience.com/?source=post_page---byline--fa0d9ae4ac71--------------------------------" rel="noopener follow"><p class="bf b bg z io ip iq ir is it iu iv bk">Towards Data Science</p></a></div></div></div><div class="h k"><span class="hz ia" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div></div><span class="bf b bg z dx"><div class="ab ae"><span data-testid="storyReadTime">9 min read</span><div class="iw ix l" aria-hidden="true"><span class="l" aria-hidden="true"><span class="bf b bg z dx">·</span></span></div><span data-testid="storyPublishDate">Mar 22, 2024</span></div></span></div></span></div></div></div><div class="ab cp iy iz ja jb jc jd je jf jg jh ji jj jk jl jm jn"><div class="h k w ea eb q"><div class="kd l"><div class="ab q ke kf"><div class="pw-multi-vote-icon ed in kg kh ki"><div class=""><div class="kj kk kl km kn ko kp am kq kr ks ki"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" aria-label="clap"><path fill-rule="evenodd" d="M11.37.828 12 3.282l.63-2.454zM15.421 1.84l-1.185-.388-.338 2.5zM9.757 1.452l-1.184.389 1.523 2.112zM20.253 11.84 17.75 7.438c-.238-.353-.57-.584-.93-.643a.96.96 0 0 0-.753.183 1.13 1.13 0 0 0-.443.695c.014.019.03.033.044.053l2.352 4.138c1.614 2.95 1.1 5.771-1.525 8.395a7 7 0 0 1-.454.415c.997-.13 1.927-.61 2.773-1.457 2.705-2.704 2.517-5.585 1.438-7.377M12.066 9.01c-.129-.687.08-1.299.573-1.773l-2.062-2.063a1.123 1.123 0 0 0-1.555 0 1.1 1.1 0 0 0-.273.521z" clip-rule="evenodd"/><path fill-rule="evenodd" d="M14.741 8.309c-.18-.267-.446-.455-.728-.502a.67.67 0 0 0-.533.127c-.146.113-.59.458-.199 1.296l1.184 2.503a.448.448 0 0 1-.236.755.445.445 0 0 1-.483-.248L7.614 6.106A.816.816 0 1 0 6.459 7.26l3.643 3.644a.446.446 0 1 1-.631.63L5.83 7.896l-1.03-1.03a.82.82 0 0 0-1.395.577.81.81 0 0 0 .24.576l1.027 1.028 3.643 3.643a.444.444 0 0 1-.144.728.44.44 0 0 1-.486-.098l-3.64-3.64a.82.82 0 0 0-1.335.263.81.81 0 0 0 .178.89l1.535 1.534 2.287 2.288a.445.445 0 0 1-.63.63l-2.287-2.288a.813.813 0 0 0-1.393.578c0 .216.086.424.238.577l4.403 4.403c2.79 2.79 5.495 4.119 8.681.931 2.269-2.271 2.708-4.588 1.342-7.086z" clip-rule="evenodd"/></svg></div></div></div><div class="pw-multi-vote-count l kt ku kv kw kx ky kz"><p class="bf b dy z dx"><span class="kk">--</span></p></div></div></div><div><div class="bm" aria-hidden="false"><button class="ao kj lc ld ab q ee le lf" aria-label="responses"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewbox="0 0 24 24" class="lb"><path d="M18.006 16.803c1.533-1.456 2.234-3.325 2.234-5.321C20.24 7.357 16.709 4 12.191 4S4 7.357 4 11.482c0 4.126 3.674 7.482 8.191 7.482.817 0 1.622-.111 2.393-.327.231.2.48.391.744.559 1.06.693 2.203 1.044 3.399 1.044.224-.008.4-.112.486-.287a.49.49 0 0 0-.042-.518c-.495-.67-.845-1.364-1.04-2.057a4 4 0 0 1-.125-.598zm-3.122 1.055-.067-.223-.315.096a8 8 0 0 1-2.311.338c-4.023 0-7.292-2.955-7.292-6.587 0-3.633 3.269-6.588 7.292-6.588 4.014 0 7.112 2.958 7.112 6.593 0 1.794-.608 3.469-2.027 4.72l-.195.168v.255c0 .056 0 .151.016.295.025.231.081.478.154.733.154.558.398 1.117.722 1.659a5.3 5.3 0 0 1-2.165-.845c-.276-.176-.714-.383-.941-.59z"/></svg><p class="bf b dy z dx"><span class="pw-responses-count la lb">6</span></p></button></div></div></div><div class="ab q jo jp jq jr js jt ju jv jw jx jy jz ka kb kc"><div class="lg k j i d"/><div class="h k"><div><div class="bm" aria-hidden="false"><button aria-controls="addToCatalogBookmarkButton" aria-expanded="false" aria-label="Add to list bookmark button" data-testid="headerBookmarkButton" class="af ee ah ai aj ak al lh an ao ap id li lj lk" disabled=""><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24" class="av"><path fill="#000" d="M17.5 1.25a.5.5 0 0 1 1 0v2.5H21a.5.5 0 0 1 0 1h-2.5v2.5a.5.5 0 0 1-1 0v-2.5H15a.5.5 0 0 1 0-1h2.5zm-11 4.5a1 1 0 0 1 1-1H11a.5.5 0 0 0 0-1H7.5a2 2 0 0 0-2 2v14a.5.5 0 0 0 .8.4l5.7-4.4 5.7 4.4a.5.5 0 0 0 .8-.4v-8.5a.5.5 0 0 0-1 0v7.48l-5.2-4a.5.5 0 0 0-.6 0l-5.2 4z"/></svg></button></div></div></div><div class="ep ll cn"><div class="l ae"><div class="ab cb"><div class="lm ln lo lp lq lr ci bh"><div class="ab"><div class="bm bh" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="Listen" data-testid="audioPlayButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M3 12a9 9 0 1 1 18 0 9 9 0 0 1-18 0m9-10C6.477 2 2 6.477 2 12s4.477 10 10 10 10-4.477 10-10S17.523 2 12 2m3.376 10.416-4.599 3.066a.5.5 0 0 1-.777-.416V8.934a.5.5 0 0 1 .777-.416l4.599 3.066a.5.5 0 0 1 0 .832" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Listen</p></div></button></div></div></div></div></div></div></div></div><div class="bm" aria-hidden="false" aria-describedby="postFooterSocialMenu" aria-labelledby="postFooterSocialMenu"><div><div class="bm" aria-hidden="false"><button aria-controls="postFooterSocialMenu" aria-expanded="false" aria-label="Share Post" data-testid="headerSocialShareButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M15.218 4.931a.4.4 0 0 1-.118.132l.012.006a.45.45 0 0 1-.292.074.5.5 0 0 1-.3-.13l-2.02-2.02v7.07c0 .28-.23.5-.5.5s-.5-.22-.5-.5v-7.04l-2 2a.45.45 0 0 1-.57.04h-.02a.4.4 0 0 1-.16-.3.4.4 0 0 1 .1-.32l2.8-2.8a.5.5 0 0 1 .7 0l2.8 2.79a.42.42 0 0 1 .068.498m-.106.138.008.004v-.01zM16 7.063h1.5a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-11c-1.1 0-2-.9-2-2v-10a2 2 0 0 1 2-2H8a.5.5 0 0 1 .35.15.5.5 0 0 1 .15.35.5.5 0 0 1-.15.35.5.5 0 0 1-.35.15H6.4c-.5 0-.9.4-.9.9v10.2a.9.9 0 0 0 .9.9h11.2c.5 0 .9-.4.9-.9v-10.2c0-.5-.4-.9-.9-.9H16a.5.5 0 0 1 0-1" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">Share</p></div></button></div></div></div><div class="bm" aria-hidden="false"><div><div class="bm" aria-hidden="false"><button aria-label="More options" data-testid="headerStoryOptionsButton" class="af ee ah ai aj ak al lh an ao ap id ls lt lf lu lv lw lx ly s lz ma mb mc md me mf u mg mh mi"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="none" viewbox="0 0 24 24"><path fill="currentColor" fill-rule="evenodd" d="M4.385 12c0 .55.2 1.02.59 1.41.39.4.86.59 1.41.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.02.2-1.41.59-.4.39-.59.86-.59 1.41m5.62 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.42.59s1.02-.2 1.41-.59c.4-.39.59-.86.59-1.41s-.2-1.02-.59-1.41a1.93 1.93 0 0 0-1.41-.59c-.55 0-1.03.2-1.42.59s-.58.86-.58 1.41m5.6 0c0 .55.2 1.02.58 1.41.4.4.87.59 1.43.59s1.03-.2 1.42-.59.58-.86.58-1.41-.2-1.02-.58-1.41a1.93 1.93 0 0 0-1.42-.59c-.56 0-1.04.2-1.43.59s-.58.86-.58 1.41" clip-rule="evenodd"/></svg><div class="j i d"><p class="bf b bg z dx">More</p></div></button></div></div></div></div></div></div></div></div></div><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk ml"><img src="../Images/0aa56838fa603355f02b854e8a8f9352.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/0*8ygNBT0T0gWZD7Wi"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Photo by <a class="af nc" href="https://unsplash.com/@dustinhumes_photography?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Dustin Humes</a> on <a class="af nc" href="https://unsplash.com/?utm_source=medium&amp;utm_medium=referral" rel="noopener ugc nofollow" target="_blank">Unsplash</a></figcaption></figure><blockquote class="nd ne nf"><p id="0fa7" class="ng nh ni nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">You can build beautiful, standardised and stylised documentation using just the docstrings in a few simple steps.</p></blockquote><p id="3ea0" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">A Data Scientist holds many responsibilities when working on a project, and one that is usually left until the last minute is documentation. Perhaps you’re diligent with writing docstrings for classes and functions (well done!) — but should that be the resting place of your documentation?</p><p id="80a5" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">In my opinion, documentation should sit independently from your code. Your team (or you in a few months time) shouldn’t have to trawl through hundreds of lines of code in your python modules to understand what’s going on. You can build beautiful, standardised and stylised documentation using just the docstrings in a few simple steps and make your project speak for itself.</p><p id="f618" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">In this article, I’ll focus on using the <a class="af nc" href="https://www.sphinx-doc.org/en/master/index.html" rel="noopener ugc nofollow" target="_blank">Sphinx framework</a> for autodocumenting python modules. I’ll also be using the <a class="af nc" href="https://drivendata.github.io/cookiecutter-data-science/" rel="noopener ugc nofollow" target="_blank">Cookiecutter Data Science</a> project template in Visual Studio Code (VS Code) due to its seamless integration with Sphinx and standardised directory structure. Whilst the <a class="af nc" href="https://sphinx-rtd-tutorial.readthedocs.io/en/latest/index.html" rel="noopener ugc nofollow" target="_blank">official sphinx tutorial documentation</a> is a great resource for those wanting to take a deep dive into this topic, my aim for this article is to be a helpful ‘quick start’ guide to take you through the key steps. Enjoy :)</p></div></div></div><div class="ab cb od oe of og" role="separator"><span class="oh by bm oi oj ok"/><span class="oh by bm oi oj ok"/><span class="oh by bm oi oj"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h2 id="c21e" class="ol om fq bf on oo op oq or os ot ou ov nq ow ox oy nu oz pa pb ny pc pd pe pf bk">A note on docstrings</h2><p id="a0e5" class="pw-post-body-paragraph ng nh fq nj b go pg nl nm gr ph no np nq pi ns nt nu pj nw nx ny pk oa ob oc fj bk">The key to good documentation is docstrings. These are the comment blocks that sit within each class, class method and function that describe the nature of the code, along with the inputs, outputs and raised errors. There are three core docstring formats. These are Google, reStructuredText (reST) and NumPy. They all contain the same information, the only difference is that they are formatted differently. You can see examples of each docstring format <a class="af nc" href="https://realpython.com/documenting-python-code/#docstring-formats" rel="noopener ugc nofollow" target="_blank">here</a>.</p><p id="37a5" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">I’ll be using the Google docstring format as it is easy to read and takes up less space than the others. The below code block is a typical example of a Google docstring:</p><pre class="mm mn mo mp mq pl pm pn bp po bb bk"><span id="bddb" class="pp om fq pm b bg pq pr l ps pt">"""Description of the function, class or method etc.<br/><br/>Args:<br/>    varA (str): Description of varA<br/>    varB (bool): Description of varB<br/><br/>Returns:<br/>    list: Description of returned list<br/><br/>Raises:<br/>    ValueError: Description of raised error<br/>"""</span></pre><p id="ec52" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><em class="ni">Top tip. download the ‘autoDocstring — Python Docstring Generator’ in VS Code to automatically generate a docstring when you type three double quotation marks (i.e. the start of a docstring). Be sure to finish writing the function before generating the docstring so that all inputs/outputs/errors get included in the docstring template that gets generated for you!</em></p><p id="b339" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">Let’s move on to making the documentation!</p></div></div></div><div class="ab cb od oe of og" role="separator"><span class="oh by bm oi oj ok"/><span class="oh by bm oi oj ok"/><span class="oh by bm oi oj"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="3e10" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">For the purpose of this demo, I have created a python module <code class="cx pu pv pw pm b">demo.py</code> which contains a class and three basic functions (all annotated with docstrings with the exception of one function). It is this module that I’ll be building documentation for in this article. The contents of this demo.py module is below:</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><div class="mj mk px"><img src="../Images/ea51927a8000f6c5b5725d577acb8c78.png" data-original-src="https://miro.medium.com/v2/resize:fit:1400/format:webp/1*Qggg19SHKxBaV4oYOl6ayQ.png"/></div></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Contents of demo.py module to be documented. Snapshot taken using CodeSnap extension in VS Code.</figcaption></figure><h2 id="41d3" class="ol om fq bf on oo op oq or os ot ou ov nq ow ox oy nu oz pa pb ny pc pd pe pf bk">1. Setup</h2><p id="ffd3" class="pw-post-body-paragraph ng nh fq nj b go pg nl nm gr ph no np nq pi ns nt nu pj nw nx ny pk oa ob oc fj bk">First thing is to get everything setup. You’ll need to install VS Code and setup a new project along with Sphinx. There are a few options here. You can either a) set up a new project using Cookiecutter (where the relevant Sphinx setup will be generated along with standardised directories) or b) create your own project structure and install sphinx separately.</p><p id="04f5" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><strong class="nj fr">option A — install Cookiecutter</strong></p><p id="f65b" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">In the terminal, pip install Cookiecutter and then create a new project:</p><pre class="mm mn mo mp mq pl pm pn bp po bb bk"><span id="4335" class="pp om fq pm b bg pq pr l ps pt">pip install cookiecutter<br/>cookiecutter https://github.com/drivendata/cookiecutter-data-science</span></pre><p id="6ff5" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">Next, answer the questions that appear in the terminal window and your new project will be created. The Sphinx framework will be stored in the /docs directory of your project.</p><p id="314f" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><strong class="nj fr">option B — Sphinx quickstart</strong></p><p id="3435" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">If the Cookiecutter template doesn’t take your fancy, you can create your own project structure from scratch and install sphinx. It is a good idea to make a documentation directory and install sphinx there. In the terminal:</p><pre class="mm mn mo mp mq pl pm pn bp po bb bk"><span id="82c3" class="pp om fq pm b bg pq pr l ps pt">mkdir docs<br/>cd docs<br/><br/>pip install sphinx<br/>sphinx-quickstart</span></pre><h2 id="aa10" class="ol om fq bf on oo op oq or os ot ou ov nq ow ox oy nu oz pa pb ny pc pd pe pf bk">2. Understanding Sphinx folder structure</h2><p id="d1f1" class="pw-post-body-paragraph ng nh fq nj b go pg nl nm gr ph no np nq pi ns nt nu pj nw nx ny pk oa ob oc fj bk">After you’ve installed Sphinx using one of the options above, there will be some files that appear in the documentation directory in your project. The <code class="cx pu pv pw pm b">conf.py</code> file is the key configuration file which you’ll edit to make your documentation bespoke — more detail on this in the next section. The <code class="cx pu pv pw pm b">index.rst</code> file acts as a contents for your documentation. You can find more information on the <code class="cx pu pv pw pm b">index.rst</code> file <a class="af nc" href="https://sphinx-rtd-tutorial.readthedocs.io/en/latest/build-the-docs.html" rel="noopener ugc nofollow" target="_blank">here</a>. The <code class="cx pu pv pw pm b">getting-started.rst</code> and <code class="cx pu pv pw pm b">commands.rst</code> files are suggested templates for your documentation. You can remove these if necessary. The make files (<code class="cx pu pv pw pm b">make.bat</code> and <code class="cx pu pv pw pm b">Makefile</code>) are used to actually make the documentation. You don’t need to edit these but will call them in the terminal window when you’re ready to make the documentation.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk py"><img src="../Images/34322e8b906de18a36631968b18687fb.png" data-original-src="https://miro.medium.com/v2/resize:fit:528/format:webp/1*8szuZ0RgfOjPfERLLs0RzA.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Default Sphinx files installed</figcaption></figure><h2 id="07bc" class="ol om fq bf on oo op oq or os ot ou ov nq ow ox oy nu oz pa pb ny pc pd pe pf bk">3. Conf.py file</h2><p id="88c2" class="pw-post-body-paragraph ng nh fq nj b go pg nl nm gr ph no np nq pi ns nt nu pj nw nx ny pk oa ob oc fj bk">The configuration file is where the magic happens. This file is used during the build process and so it is crucial that you have this set up correctly. Below are some steps to modifying the <code class="cx pu pv pw pm b">conf.py</code> file:</p><p id="b4aa" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><strong class="nj fr">Uncomment the sys.path line</strong> (line 20 in my setup):</p><pre class="mm mn mo mp mq pl pm pn bp po bb bk"><span id="d4a6" class="pp om fq pm b bg pq pr l ps pt">#  sys.path.insert(0,  os.path.abspath('.')) </span></pre><p id="8216" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><strong class="nj fr">Change the pathway of the os.path.abspath </strong>to the relative location of the code you want documenting (relative to the <code class="cx pu pv pw pm b">conf.py</code> file). For example, the python modules that I want documenting sits within the src/ directory of my project. Hence I will change the os.path.abspath to the look in /src directory which is located in the parent folder of the <code class="cx pu pv pw pm b">conf.py</code> file. You can specify the relative location using the . and / syntax:</p><pre class="mm mn mo mp mq pl pm pn bp po bb bk"><span id="81a5" class="pp om fq pm b bg pq pr l ps pt">sys.path.insert(0,  os.path.abspath('../src'))<br/><br/>"""<br/># you can use the following syntax to specify relative locations:<br/><br/>'.' # current path of conf.py<br/>'..' # parent path of conf.py<br/>'../..' # parent of the parent path of conf.py<br/>"""</span></pre><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk pz"><img src="../Images/24776be77700370824f484404b8be450.png" data-original-src="https://miro.medium.com/v2/resize:fit:584/format:webp/1*VYvRYBBBYXOiPCcnDw_QOA.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">The relative location of the directory containing the python modules to the documentation folder. In this example, ‘demo.py’ is the module to be documented, located in the src/data/ directory.</figcaption></figure><p id="5143" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><strong class="nj fr">Add in the relevant extensions</strong>. You’ll need to add in some extensions to the <code class="cx pu pv pw pm b">conf.py</code> file to gain extra functionality when creating your documentation. These are all optional and you can have some fun exploring the different extensions available <a class="af nc" href="https://www.sphinx-doc.org/en/master/usage/extensions/index.html" rel="noopener ugc nofollow" target="_blank">here</a>. Here are the 5 extensions that I recommend at minimum:</p><ul class=""><li id="88ea" class="ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc qa qb qc bk"><a class="af nc" href="https://www.sphinx-doc.org/en/master/usage/extensions/autodoc.html" rel="noopener ugc nofollow" target="_blank"><strong class="nj fr">sphinx.ext.autodoc</strong></a><strong class="nj fr"> </strong>— use documentation from docstrings</li><li id="54b3" class="ng nh fq nj b go qd nl nm gr qe no np nq qf ns nt nu qg nw nx ny qh oa ob oc qa qb qc bk"><a class="af nc" href="https://pypi.org/project/autodocsumm/" rel="noopener ugc nofollow" target="_blank"><strong class="nj fr">autodocsumm</strong></a><strong class="nj fr"> </strong>— generate a tabular summary of all docstrings at the top of the html page by listing out the docstring summaries only. Useful when you have a lot of docstrings. <em class="ni">Note. you will need to pip install autodocsumm in the terminal.</em></li><li id="a9b1" class="ng nh fq nj b go qd nl nm gr qe no np nq qf ns nt nu qg nw nx ny qh oa ob oc qa qb qc bk"><a class="af nc" href="https://www.sphinx-doc.org/en/master/usage/extensions/napoleon.html" rel="noopener ugc nofollow" target="_blank"><strong class="nj fr">sphinx.ext.napoleon</strong></a> — enables Sphinx to parse google docstrings</li><li id="1c39" class="ng nh fq nj b go qd nl nm gr qe no np nq qf ns nt nu qg nw nx ny qh oa ob oc qa qb qc bk"><a class="af nc" href="https://www.sphinx-doc.org/en/master/usage/extensions/viewcode.html" rel="noopener ugc nofollow" target="_blank"><strong class="nj fr">sphinx.ext.viewcode</strong></a> — adds a link to a html page containing the source code for each module</li><li id="1963" class="ng nh fq nj b go qd nl nm gr qe no np nq qf ns nt nu qg nw nx ny qh oa ob oc qa qb qc bk"><a class="af nc" href="https://www.sphinx-doc.org/en/master/usage/extensions/coverage.html" rel="noopener ugc nofollow" target="_blank"><strong class="nj fr">sphinx.ext.coverage</strong></a> — provides a summary of how many classes/functions etc have docstrings. Good coverage signifies that a codebase is well explained.</li></ul><p id="9513" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">Here’s how to include these extensions in the <code class="cx pu pv pw pm b">conf.py</code> file (line 29 in my setup):</p><pre class="mm mn mo mp mq pl pm pn bp po bb bk"><span id="f951" class="pp om fq pm b bg pq pr l ps pt">#  add in the extension names to the empty list variable 'extensions'<br/>extensions = [<br/>      'sphinx.ext.autodoc', <br/>      'sphinx.ext.napoleon', <br/>      'autodocsumm', <br/>      'sphinx.ext.coverage'<br/>]<br/><br/># add in this line for the autosummary functionality<br/>auto_doc_default_options = {'autosummary': True}</span></pre><p id="1876" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><strong class="nj fr">Change the theme</strong>. The default theme of the documentation is quite clean, although you may prefer to play around with different options by changing the ‘html_theme’ variable (line 94 in my setup) from ‘default’ to one of the standard <a class="af nc" href="https://www.sphinx-doc.org/en/master/usage/theming.html" rel="noopener ugc nofollow" target="_blank">theme options</a> or some <a class="af nc" href="https://sphinx-themes.org/" rel="noopener ugc nofollow" target="_blank">third party options</a>. In this demo, I’ll show the default and Read the Docs themes.</p><pre class="mm mn mo mp mq pl pm pn bp po bb bk"><span id="793c" class="pp om fq pm b bg pq pr l ps pt">html_theme = 'sphinx_rtd_theme' # read the docs theme. This variable is 'default' by default.</span></pre><p id="752e" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><em class="ni">Note. you will need to pip install any non-standard (third party) themes.</em></p><h2 id="1103" class="ol om fq bf on oo op oq or os ot ou ov nq ow ox oy nu oz pa pb ny pc pd pe pf bk">4. Make the html pages</h2><p id="b824" class="pw-post-body-paragraph ng nh fq nj b go pg nl nm gr ph no np nq pi ns nt nu pj nw nx ny pk oa ob oc fj bk">Now that your <code class="cx pu pv pw pm b">conf.py</code> file is set up and you have glorious docstrings in your code, we’re ready to do some scraping and build some html pages.</p><p id="4a7a" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><strong class="nj fr">Generate .rst files of your python packages</strong></p><p id="8b8b" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">These files are the precursor to the html pages and are the native format for Sphinx. These need to be generated before making the html files. You’ll use the <a class="af nc" href="https://www.sphinx-doc.org/en/master/man/sphinx-apidoc.html" rel="noopener ugc nofollow" target="_blank">sphinx.apidoc</a> command, which uses the autodoc extension to locate all python modules (e.g. any .py files) within the sys.path location that you specified in the <code class="cx pu pv pw pm b">conf.py</code> file. There are some optional parameters to include when using the apidoc command which you can find in the <a class="af nc" href="https://www.sphinx-doc.org/en/master/man/sphinx-apidoc.html" rel="noopener ugc nofollow" target="_blank">documentation</a>, but I used the following template:</p><p id="e6e5" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><em class="ni">Note. in the terminal, change directory to the root of the project to run the following code.</em></p><pre class="mm mn mo mp mq pl pm pn bp po bb bk"><span id="d77f" class="pp om fq pm b bg pq pr l ps pt">sphinx-apidoc -f -o output_dir module_dir/</span></pre><blockquote class="nd ne nf"><p id="a38f" class="ng nh ni nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><strong class="nj fr">-f </strong>(force overwriting any existing generated files).</p><p id="e3c1" class="ng nh ni nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><strong class="nj fr">-o output_dir</strong> (directory to place the output files. If it does not exist, it is created). Note. replace ‘output_dir’ with a directory name of your choice. I set mine to the /docs directory.</p><p id="c724" class="ng nh ni nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><strong class="nj fr">module_dir</strong> (location of python packages to document)</p></blockquote><p id="afa8" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">After running this command, there should be newly generated .rst files in the docs folder.</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk qi"><img src="../Images/84b4615becbbe6f7809c3c9c02672edf.png" data-original-src="https://miro.medium.com/v2/resize:fit:536/format:webp/1*-ANTC6n6qDOnNrtY2mcFhg.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Contents of documentation folder after running sphinx-apidoc command to generate .rst files</figcaption></figure><p id="b017" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">Notice that two new .rst files have been generated: <code class="cx pu pv pw pm b">data.rst</code> and <code class="cx pu pv pw pm b">modules.rst</code>. In addition to <code class="cx pu pv pw pm b">modules.rst</code>, a .rst file will be generated for each directory that contains at least one python module. In my example, <code class="cx pu pv pw pm b">data.rst</code> is generated as I have saved my demo.py file in the src/data<strong class="nj fr"> </strong>directory. If you have multiple directories of python modules within the location you specified in sys.path in the <code class="cx pu pv pw pm b">conf.py</code> file, then multiple .rst files will be generated. <em class="ni">Note. These files do not contain the scraped documentation just yet, they just contain the information required for autodoc to make the html files in the next step.</em></p><p id="c78d" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><strong class="nj fr">Edit index.rst file</strong></p><p id="d53d" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">Remember, <code class="cx pu pv pw pm b">index.rst</code> acts as a contents page so we must edit this file to include all python modules we want documenting. Luckily, the <code class="cx pu pv pw pm b">modules.rst</code> references the source location of all python modules identified in the sys.path, so you can simply add this file to <code class="cx pu pv pw pm b">index.rst</code>.</p><p id="b23c" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">To do this, open the <code class="cx pu pv pw pm b">index.rst</code> file and add ‘modules’ underneath the toctree (table of contents tree) section. Make sure there is a line in between the :maxdepth: parameter and the names of the the .rst files.<br/><em class="ni">Note. ‘getting-started’ and ‘commands’ will already be in the index.rst file. You can delete them from this file if you do not want to generate html pages (although a ‘getting-started’ page is probably a good idea!</em>)</p><figure class="mm mn mo mp mq mr mj mk paragraph-image"><div class="mj mk qj"><img src="../Images/8e03e40dede70fa331d9dc1a90c7fef3.png" data-original-src="https://miro.medium.com/v2/resize:fit:686/format:webp/1*BqlWf1Riq6tEj7fbYEbbqA.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx">Contents of the index.rst file. I have added in ‘modules’ so that the modules.rst file is used in the html generation process.</figcaption></figure><p id="cd47" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><strong class="nj fr">Make html files</strong></p><p id="4e27" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">Now we can use the make files in your documentation directory to build the html files. These files will appear in the <strong class="nj fr">_build/html/ </strong>directory within your documentation folder. You can preview these in VS code if you download the ‘HTML Preview’ extension.</p><p id="b58a" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">Change directory to where the make.bat file is located and run the following command in cmd terminal:</p><pre class="mm mn mo mp mq pl pm pn bp po bb bk"><span id="1cf3" class="pp om fq pm b bg pq pr l ps pt">make html</span></pre><p id="a522" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><em class="ni">Note</em>. <em class="ni">if you are using windows powershell terminal (rather than cmd), use the following syntax:</em></p><pre class="mm mn mo mp mq pl pm pn bp po bb bk"><span id="8203" class="pp om fq pm b bg pq pr l ps pt">.\make.bat html</span></pre><p id="174e" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><strong class="nj fr"><em class="ni">Top tip</em></strong><em class="ni">. if a warning arises when using the make html command that states ‘autodoc: failed to import module’, this is most likely due to autodoc not being able to find your modules as the sys.path has not been configured correctly in conf.py. Make sure this points to the directory where your python modules are located.</em></p><p id="851c" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk"><strong class="nj fr">Editing html files</strong></p><p id="d720" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">If you wish to edit your docstrings and update your html files with the changes, then you can do so using the following command:</p><pre class="mm mn mo mp mq pl pm pn bp po bb bk"><span id="cc7b" class="pp om fq pm b bg pq pr l ps pt">make clean html</span></pre><h2 id="0a85" class="ol om fq bf on oo op oq or os ot ou ov nq ow ox oy nu oz pa pb ny pc pd pe pf bk">Let’s take a look at our documentation!</h2><p id="7faa" class="pw-post-body-paragraph ng nh fq nj b go pg nl nm gr ph no np nq pi ns nt nu pj nw nx ny pk oa ob oc fj bk">As I mentioned above, I have created some documentation of my python module <code class="cx pu pv pw pm b">demo.py</code> in two different themes seen in the images below; ‘default’ (left image) and ‘Read the Docs’ (right image). The content is identical but the look and feel are different. Let’s take note of the core features:</p><ul class=""><li id="78f9" class="ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc qa qb qc bk">Navigation bar on left hand side</li><li id="9d95" class="ng nh fq nj b go qd nl nm gr qe no np nq qf ns nt nu qg nw nx ny qh oa ob oc qa qb qc bk">A summary of all classes or functions belonging to the module in tables at the top of the page (thanks to the ‘autodocsumm’ extension)</li><li id="9de2" class="ng nh fq nj b go qd nl nm gr qe no np nq qf ns nt nu qg nw nx ny qh oa ob oc qa qb qc bk">Detailed list of docstring components for all functions and classes below the summary</li></ul></div></div><div class="mr"><div class="ab cb"><div class="lm qk ln ql lo qm cf qn cg qo ci bh"><div class="mm mn mo mp mq ab ke"><figure class="lb mr qp qq qr qs qt paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><img src="../Images/c7e255289a5c54caa52b9ecefa753d20.png" data-original-src="https://miro.medium.com/v2/resize:fit:984/format:webp/1*AZX7Ig8X2IbnwLr1ksX0Eg.png"/></div></figure><figure class="lb mr qu qq qr qs qt paragraph-image"><div role="button" tabindex="0" class="ms mt ed mu bh mv"><img src="../Images/e7850408e20f8add5d9dbac68615fe35.png" data-original-src="https://miro.medium.com/v2/resize:fit:1018/format:webp/1*KcRKEAoZHHVXiM6HmGmjLQ.png"/></div><figcaption class="mx my mz mj mk na nb bf b bg z dx qv ed qw qx">Examples of documentation html pages for a sample python module using default theme (left image) and the read the docs theme (right image), generated using Sphinx.</figcaption></figure></div></div></div></div><div class="ab cb"><div class="ci bh ev ew ex ey"><p id="0b22" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">Once you’ve created the html pages, you’ll notice a variety of hierarchical html pages will be generated. These will include a home page and pages for each package and module. Have a look around the pages to familiarise yourself with their structure and read the official documentation to see how you can customise them further.</p><p id="05b3" class="pw-post-body-paragraph ng nh fq nj b go nk nl nm gr nn no np nq nr ns nt nu nv nw nx ny nz oa ob oc fj bk">For example, if you wanted to be able to see the raw code of each function in the documentation, add the extension ‘sphinx.ext.viewcode’ to the <code class="cx pu pv pw pm b">conf.py</code> file. This will add a hyperlink next to each function or class method which will reveal the raw code to allow for easy interrogation without having to delve into the codebase.</p></div></div></div><div class="ab cb od oe of og" role="separator"><span class="oh by bm oi oj ok"/><span class="oh by bm oi oj ok"/><span class="oh by bm oi oj"/></div><div class="fj fk fl fm fn"><div class="ab cb"><div class="ci bh ev ew ex ey"><h2 id="8813" class="ol om fq bf on oo op oq or os ot ou ov nq ow ox oy nu oz pa pb ny pc pd pe pf bk">Closing thoughts</h2><p id="e2c5" class="pw-post-body-paragraph ng nh fq nj b go pg nl nm gr ph no np nq pi ns nt nu pj nw nx ny pk oa ob oc fj bk">And there we have it. Simple and beautiful documentation of your Python modules made in a few easy steps using Sphinx! I hope you have enjoyed learning about autodocumentation and find it to be a useful tool to implement in your projects. If you have any useful tips then feel free to add a comment :)</p></div></div></div></div>    
</body>
</html>