- en: Powering Experiments with CUPED and Double Machine Learning
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用CUPED和双重机器学习为实验赋能
- en: 原文：[https://towardsdatascience.com/powering-experiments-with-cuped-and-double-machine-learning-34dc2f3d3284?source=collection_archive---------2-----------------------#2024-08-15](https://towardsdatascience.com/powering-experiments-with-cuped-and-double-machine-learning-34dc2f3d3284?source=collection_archive---------2-----------------------#2024-08-15)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/powering-experiments-with-cuped-and-double-machine-learning-34dc2f3d3284?source=collection_archive---------2-----------------------#2024-08-15](https://towardsdatascience.com/powering-experiments-with-cuped-and-double-machine-learning-34dc2f3d3284?source=collection_archive---------2-----------------------#2024-08-15)
- en: Causal AI, exploring the integration of causal reasoning into machine learning
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 因果AI，探索因果推理与机器学习的结合
- en: '[](https://medium.com/@raz1470?source=post_page---byline--34dc2f3d3284--------------------------------)[![Ryan
    O''Sullivan](../Images/7cd161d38d67d2c0b7da2d8f3e7d33fe.png)](https://medium.com/@raz1470?source=post_page---byline--34dc2f3d3284--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--34dc2f3d3284--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--34dc2f3d3284--------------------------------)
    [Ryan O''Sullivan](https://medium.com/@raz1470?source=post_page---byline--34dc2f3d3284--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@raz1470?source=post_page---byline--34dc2f3d3284--------------------------------)[![Ryan
    O''Sullivan](../Images/7cd161d38d67d2c0b7da2d8f3e7d33fe.png)](https://medium.com/@raz1470?source=post_page---byline--34dc2f3d3284--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--34dc2f3d3284--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--34dc2f3d3284--------------------------------)
    [Ryan O''Sullivan](https://medium.com/@raz1470?source=post_page---byline--34dc2f3d3284--------------------------------)'
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--34dc2f3d3284--------------------------------)
    ·17 min read·Aug 15, 2024
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·发布于[Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--34dc2f3d3284--------------------------------)
    ·阅读时长17分钟·2024年8月15日
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/9853e8cbe533bacb89e3bddd32cb8708.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9853e8cbe533bacb89e3bddd32cb8708.png)'
- en: Photo by [Karsten Würth](https://unsplash.com/@karsten_wuerth?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 图片来源：[Karsten Würth](https://unsplash.com/@karsten_wuerth?utm_source=medium&utm_medium=referral)
    于[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: What is this series of articles about?
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 这系列文章讲的是什么？
- en: Welcome to my series on Causal AI, where we will explore the integration of
    causal reasoning into machine learning models. Expect to explore a number of practical
    applications across different business contexts.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 欢迎来到我的因果AI系列文章，我们将在这里探索因果推理如何融入机器学习模型。你将看到跨多个业务场景的多种实际应用。
- en: In the last article we covered *safeguarding demand forecasting with causal
    graphs*. Today, we turn our attention to powering experiments using CUPED and
    double machine learning.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 在上一篇文章中，我们介绍了*如何通过因果图保护需求预测*。今天，我们将重点讨论如何使用CUPED和双重机器学习为实验赋能。
- en: 'If you missed the last article on safeguarding demand forecasting, check it
    out here:'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你错过了上一篇关于保护需求预测的文章，可以在这里查看：
- en: '[](/safeguarding-demand-forecasting-with-causal-graphs-591511fc8e0e?source=post_page-----34dc2f3d3284--------------------------------)
    [## Safeguarding Demand Forecasting with Causal Graphs'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/safeguarding-demand-forecasting-with-causal-graphs-591511fc8e0e?source=post_page-----34dc2f3d3284--------------------------------)
    [## 使用因果图保护需求预测'
- en: Causal AI, exploring the integration of causal reasoning into machine learning
  id: totrans-13
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 因果AI，探索因果推理与机器学习的结合
- en: towardsdatascience.com](/safeguarding-demand-forecasting-with-causal-graphs-591511fc8e0e?source=post_page-----34dc2f3d3284--------------------------------)
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/safeguarding-demand-forecasting-with-causal-graphs-591511fc8e0e?source=post_page-----34dc2f3d3284--------------------------------)
- en: Introduction
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 引言
- en: 'In this article, we evaluate whether CUPED and double machine learning can
    enhance the effectiveness of your experiments. We will use a case study to explore
    the following areas:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在本文中，我们将评估CUPED和双重机器学习是否能够增强你的实验效果。我们将通过案例研究来探索以下几个方面：
- en: 'The building blocks of experimentation: Hypothesis testing, power analysis,
    bootstrapping.'
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 实验的构建模块：假设检验、功效分析、自助法。
- en: What is CUPED and how can it help power experiments?
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 什么是CUPED，它如何帮助增强实验效果？
- en: What are the conceptual similarities between CUPED and double machine learning?
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: CUPED和双重机器学习在概念上有哪些相似之处？
- en: When should we use double machine learning rather than CUPED?
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 什么时候我们应该使用双重机器学习，而不是CUPED？
- en: 'The full notebook can be found here:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 完整的笔记本可以在这里找到：
- en: '[](https://github.com/raz1470/causal_ai/blob/main/notebooks/powering%20your%20experiments%20-%20cuped.ipynb?source=post_page-----34dc2f3d3284--------------------------------)
    [## causal_ai/notebooks/powering your experiments - cuped.ipynb at main · raz1470/causal_ai'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://github.com/raz1470/causal_ai/blob/main/notebooks/powering%20your%20experiments%20-%20cuped.ipynb?source=post_page-----34dc2f3d3284--------------------------------)
    [## causal_ai/notebooks/powering your experiments - cuped.ipynb at main · raz1470/causal_ai'
- en: This project introduces Causal AI and how it can drive business value. - causal_ai/notebooks/powering
    your experiments…
  id: totrans-23
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 该项目介绍了因果人工智能及其如何推动商业价值。 - causal_ai/notebooks/powering your experiments…
- en: github.com](https://github.com/raz1470/causal_ai/blob/main/notebooks/powering%20your%20experiments%20-%20cuped.ipynb?source=post_page-----34dc2f3d3284--------------------------------)
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: '[github.com](https://github.com/raz1470/causal_ai/blob/main/notebooks/powering%20your%20experiments%20-%20cuped.ipynb?source=post_page-----34dc2f3d3284--------------------------------)'
- en: Case study
  id: totrans-25
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 案例研究
- en: Background
  id: totrans-26
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 背景
- en: You’ve recently joined the experimentation team at a leading online retailer
    known for its vast product catalog and dynamic user base. The data science team
    has deployed an advanced recommender system designed to enhance user experience
    and drive sales. This system integrates in real-time with the retailer’s platform
    and involves significant infrastructure and engineering costs.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 你最近加入了一个领先的在线零售商的实验团队，该零售商以其庞大的产品目录和动态用户群体而闻名。数据科学团队已部署了一种先进的推荐系统，旨在提升用户体验并推动销售。该系统与零售平台实时集成，涉及大量基础设施和工程成本。
- en: The finance team is eager to understand the system’s financial impact, specifically
    how much additional revenue it generates compared to a baseline scenario without
    recommendations. To evaluate the recommender system’s effectiveness, you plan
    to conduct a randomized controlled experiment.
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: 财务团队迫切希望了解系统的财务影响，特别是它相比没有推荐的基准情境所产生的额外收入。为了评估推荐系统的有效性，您计划进行一个随机对照实验。
- en: 'Data-generating process: Pre-experiment'
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据生成过程：实验前
- en: 'We start by creating some pre-experiment data. The data-generating process
    we use has the following characteristics:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先创建一些实验前的数据。我们使用的数据生成过程具有以下特点：
- en: 3 observed covariates related to the recency (x_recency), frequency (x_frequency)
    and value (x_value) of previous sales.
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 3个观察到的协变量与先前销售的近期性（x_recency）、频率（x_frequency）和价值（x_value）相关。
- en: 1 unobserved covariate, the users monthly income (u_income).
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 1个未观察到的协变量，用户的月收入（u_income）。
- en: '![](../Images/bac77761d4e1524256fb74b839f98e5c.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bac77761d4e1524256fb74b839f98e5c.png)'
- en: User generated image
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成的图像
- en: 'A complex relationship between covariates is used to estimate our target metric,
    sales value:'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用协变量之间的复杂关系来估计我们的目标指标——销售值：
- en: '![](../Images/34a926a337c172ee066ca3cd38c4ce74.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/34a926a337c172ee066ca3cd38c4ce74.png)'
- en: User generated image
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成的图像
- en: 'The python code below is used to create the pre-experiment data:'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 下面的python代码用于创建实验前的数据：
- en: '[PRE0]'
  id: totrans-39
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '![](../Images/69b2bc0d3c5278b6ed231416969a3a30.png)'
  id: totrans-40
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/69b2bc0d3c5278b6ed231416969a3a30.png)'
- en: User generated image
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成的图像
- en: 'The building blocks of experimentation: Hypothesis testing, power analysis,
    bootstrapping'
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 实验的基本构建块：假设检验、效能分析、自助法
- en: Before we get onto CUPED, I thought it would be worthwhile covering some foundational
    knowledge on experimentation.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们进入CUPED之前，我认为有必要先讲解一些关于实验的基础知识。
- en: Hypothesis testing
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 假设检验
- en: 'Hypothesis testing helps determine if observed differences in an experiment
    are statistically significant or just random noise. In our experiment, we divide
    users into two groups:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 假设检验有助于判断实验中观察到的差异是否具有统计学意义，或者仅仅是随机噪音。在我们的实验中，我们将用户分为两组：
- en: '**Control Group**: Receives no recommendations.'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**对照组**：不接受推荐。'
- en: '**Treatment Group**: Receives personalised recommendations from the system.'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**实验组**：接受系统的个性化推荐。'
- en: 'We define our hypotheses as follows:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将假设定义如下：
- en: '**Null Hypothesis (H₀)**: The recommender system does not affect revenue. Any
    observed differences are due to chance.'
  id: totrans-49
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**原假设 (H₀)**：推荐系统对收入没有影响。任何观察到的差异都是由于偶然因素造成的。'
- en: '**Alternative Hypothesis (Hₐ)**: The recommender system increases revenue.
    Users receiving recommendations generate significantly more revenue compared to
    those who do not.'
  id: totrans-50
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**备择假设 (Hₐ)**：推荐系统增加了收入。接受推荐的用户相比未接受推荐的用户产生了显著更多的收入。'
- en: 'To assess the hypotheses you will be comparing the mean revenue in the control
    and treatment group. However, there are a few things to be aware of:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 为了评估假设，你将比较控制组和处理组的平均收入。然而，有几个方面需要注意：
- en: '**Type I error (False positive)**: If the experiment concludes that the recommender
    system significantly increases revenue when in reality, it has no effect.'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第一类错误（假阳性）**：如果实验得出结论认为推荐系统显著提高了收入，尽管实际上它没有任何效果。'
- en: '**Type II error (Beta, False negative)**: If the experiment finds no significant
    increase in revenue from the recommender system when in reality, it does lead
    to a meaningful increase'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**第二类错误（Beta，假阴性）**：如果实验未能发现推荐系统在收入上有显著增加，尽管它实际上确实带来了有意义的增长。'
- en: '**Significance Level (Alpha)**: If you set the significance level to 0.05,
    you are accepting a 5% chance of incorrectly concluding that the recommender system
    improves revenue when it does not (false positive).'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**显著性水平（Alpha）**：如果将显著性水平设置为0.05，则意味着你接受5%的概率错误地得出推荐系统提高收入的结论，尽管实际上并没有提升（假阳性）。'
- en: '**Power (1 — Beta)**: Achieving a power of 0.80 means you have an 80% chance
    of detecting a significant increase in revenue due to the recommender system if
    it truly has an effect. A higher power reduces the risk of false negatives.'
  id: totrans-55
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**功效（1 — Beta）**：达到0.80的功效意味着在推荐系统确实有作用的情况下，你有80%的机会检测到收入的显著增长。较高的功效可以降低假阴性的风险。'
- en: 'As you start to think about designing the experiment, you set some initial
    goals:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 当你开始思考实验设计时，你会设定一些初步目标：
- en: '**You want to reliably detect the effect** — Making sure you balance the risks
    of detecting a non-existent effect vs the risk of not detecting a real effect.'
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**你希望可靠地检测到效应** — 确保你平衡了检测虚假效应与未能检测到真实效应的风险。'
- en: '**As quickly as possible** — Finance are on your case!'
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**尽可能快** — 财务部门在催促你！'
- en: '**Keeping the sample size as cost efficient as possible** — The business case
    from the data science team suggests the system is going to drive a large increase
    in revenue so they don’t want the control group being too big.'
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**保持样本量尽可能具有成本效益** — 数据科学团队的商业案例表明该系统将大幅增加收入，因此他们不希望控制组的样本量过大。'
- en: But how can you meet these goals? Let’s delve into power analysis next!
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: 但是，如何实现这些目标呢？接下来让我们深入探讨功效分析！
- en: Power analysis
  id: totrans-61
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 功效分析
- en: 'When we talk about powering experiments, we are usually referring to the process
    of determining the minimum sample size needed to detect an effect of a certain
    size with a given confidence. There are 3 components to power analysis:'
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们讨论实验的功效时，通常是指确定在给定置信度下，检测到某一特定大小效应所需的最小样本量的过程。功效分析包括3个组件：
- en: '**Effect size** — The difference between the mean value of H₀ and Hₐ. We generally
    need to make sensible assumptions around this based on understanding what matters
    to the business/industry we are operating within.'
  id: totrans-63
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**效应大小** — H₀和Hₐ的平均值之间的差异。我们通常需要根据对业务/行业的理解，做出合理的假设。'
- en: '**Significance level** — The probability of incorrectly concluding there is
    an effect when there isn’t, typically set at 0.05.'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**显著性水平** — 错误得出存在效应结论的概率，通常设定为0.05。'
- en: '**Power** — The probability of correctly detecting an effect when there is
    one, typically set at 0.80.'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**功效** — 正确检测到效果的概率，通常设定为0.80。'
- en: I found the intuition behind these quite hard to grasp at first, but visualising
    it can really help. So lets give it a try! The key areas are where H₀ and Hₐ crossover
    — See if you it helps you tie together the components discussed above…
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 我最初发现这些直觉很难理解，但可视化真的可以帮助理解。让我们试试吧！关键区域是H₀和Hₐ交叉的地方——看看它是否能帮助你将上面讨论的各个组件联系起来……
- en: '![](../Images/01eaf60212908ac7aab73804366e2e8d.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/01eaf60212908ac7aab73804366e2e8d.png)'
- en: User generated image
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成的图片
- en: A larger sample size leads to a smaller **standard error**. With a smaller standard
    error, the sampling distributions of H₀ and Hₐ become narrower and less overlapping.
    This decreased overlap makes it easier to detect a difference, leading to higher
    power.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 更大的样本量会导致更小的**标准误差**。标准误差较小时，H₀和Hₐ的抽样分布变得更窄，重叠部分减少。这种重叠的减少使得检测差异变得更加容易，从而提高了统计功效。
- en: 'The function below shows how we can use the statsmodels python package to carry
    out a power analysis:'
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 以下函数展示了如何使用statsmodels Python包来进行功效分析：
- en: '[PRE1]'
  id: totrans-71
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: So let’s test it out with our pre-experiment data!
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，让我们用预实验数据来进行测试！
- en: '[PRE2]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![](../Images/e766581806e322906648a66eb2e665bc.png)'
  id: totrans-74
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e766581806e322906648a66eb2e665bc.png)'
- en: User generated image
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成图像
- en: We can see that given the distribution of our target metric, we would need a
    sample size of 1,645 to detect an increase of 5%.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以看到，鉴于我们目标指标的分布，要检测出5%的增加，我们需要的样本量是1,645。
- en: 'Data-generating process: Experimental data'
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 数据生成过程：实验数据
- en: Rather than rush into setting up the experiment, you decide to take the pre-experiment
    data and simulate the experiment.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 在你急于设置实验之前，你决定利用实验前的数据来模拟实验。
- en: 'The following function randomly selects users to be treated and applies a treatment
    effect. At the end of the function we record the mean difference before and after
    the treatment was applied as well as the true ATE (average treatment effect):'
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 以下函数随机选择用户进行治疗，并应用治疗效应。在函数的最后，我们记录治疗前后均值的差异以及真实的ATE（平均治疗效应）：
- en: '[PRE3]'
  id: totrans-80
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'We can feed through the minimum sample size we previously calculated:'
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 我们可以输入之前计算的最小样本量：
- en: '[PRE4]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'Let’s start by inspecting the data we created for treated users to help you
    understand what the function is doing:'
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们首先检查一下我们为接受治疗的用户创建的数据，帮助你理解该函数的作用：
- en: '![](../Images/d5448f96a7709846f3ac08aad74204b5.png)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d5448f96a7709846f3ac08aad74204b5.png)'
- en: User generated image
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成图像
- en: 'Next let’s take a look at the results which the function prints:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，让我们看一下该函数打印的结果：
- en: '![](../Images/e68cb71f6cabe6971c08e46b1d947b0b.png)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e68cb71f6cabe6971c08e46b1d947b0b.png)'
- en: User generated image
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成图像
- en: Interesting, we see that after we select users to be treated, but before we
    treat them, there is already a difference in means. This difference is due to
    chance. This means that when we look at the difference after users are treated
    we don’t correctly estimate the ATE (average treatment effect). We will come back
    to this point when we cover CUPED.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 有趣的是，我们看到在选择需要治疗的用户后，但在我们进行治疗之前，已经存在均值的差异。这个差异是由随机因素造成的。这意味着，当我们查看治疗后的用户差异时，我们并没有正确估计ATE（平均治疗效应）。当我们讲解CUPED时，会回到这一点。
- en: '![](../Images/874eed4c5f7388d5a8c7717f0613b3bd.png)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/874eed4c5f7388d5a8c7717f0613b3bd.png)'
- en: User generated image
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成图像
- en: Next let’s explore a more sophisticated way of making an inference than just
    taking the difference in means…
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 接下来，我们将探讨一种比仅仅取均值差异更复杂的推断方法……
- en: Bootstrapping
  id: totrans-93
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 自助法
- en: Bootstrapping is a powerful statistical technique that involves resampling data
    with replacement. These resampled datasets, called bootstrap samples, help us
    estimate the variability of a statistic (like the mean or median) from our original
    data. This is particularly attractive when it comes to experimentation as it enables
    us to calculate confidence intervals. Let’s walk through it step by step using
    a simple example…
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 自助法是一种强大的统计技术，涉及带有放回的重抽样数据。这些重抽样的数据集被称为自助法样本，帮助我们估计从原始数据中提取统计量（如均值或中位数）的变异性。在实验中，这种方法尤其具有吸引力，因为它使我们能够计算置信区间。让我们通过一个简单的例子一步步演示…
- en: You have run an experiment with a control and treatment group each made up of
    1k users.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 你已经进行了一个实验，控制组和治疗组各有1k用户。
- en: Create bootstrap samples — Randomly select (with replacement) 1k users from
    the control and then treatment group. This gives us 1 bootstrap sample for control
    and one for treatment.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建自助法样本 —— 从控制组和治疗组中随机选择（有放回）1k用户。这为控制组和治疗组各提供一个自助法样本。
- en: Repeat this process n times (e.g. 10k times).
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重复这个过程n次（例如10k次）。
- en: For each pair of bootstrap samples calculate the mean difference between control
    and treatment.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对每一对自助法样本，计算控制组和治疗组之间的均值差异。
- en: We now have a distribution (made up of the mean difference between 10k bootstrap
    samples) which we can use to calculate confidence intervals.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在我们有了一个分布（由10k个自助法样本的均值差异组成），我们可以使用它来计算置信区间。
- en: '![](../Images/3346768ff5436682708eccc93ac03db7.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/3346768ff5436682708eccc93ac03db7.png)'
- en: User generated image
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成图像
- en: Applying it to our case study
  id: totrans-102
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 将其应用于我们的案例研究
- en: 'Let’s use our case study to illustrate how it works. Below we use the sciPy
    stats python package to help calculate bootstrap confidence intervals:'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过案例研究来说明它是如何工作的。下面我们使用sciPy stats Python包来帮助计算自助法置信区间：
- en: '[PRE5]'
  id: totrans-104
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'When we run it for our case study data we can see that we now have some confidence
    intervals:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们为我们的案例研究数据运行这个方法时，我们可以看到我们现在有了一些置信区间：
- en: '[PRE6]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '![](../Images/95dea5cf92e093d0a197aec611dafefb.png)'
  id: totrans-107
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/95dea5cf92e093d0a197aec611dafefb.png)'
- en: User generated image
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成图像
- en: Our ground truth ATE is 143 (the actual treatment effect from our experiment
    data generator function), which falls within our confidence intervals. However,
    it’s worth noting that the mean difference hasn’t changed (it’s still 93 as before
    when we simply calculated the mean difference of control and treatment), and the
    pre-treatment difference is still there.
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的真实ATE（平均处理效应）是143（来自我们实验数据生成函数的实际处理效应），该值位于我们的置信区间内。然而，值得注意的是，均值差异并没有发生变化（它仍然是93，就像我们在仅计算控制组和处理组均值差异时一样），并且处理前的差异仍然存在。
- en: So what if we wanted to come up with narrower confidence intervals? And is there
    any way we can deal with the pre-treatment differences? This leads us nicely into
    CUPED…
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 那么，如果我们想要得出更窄的置信区间怎么办？有没有办法处理处理前的差异呢？这将我们引导到CUPED……
- en: What is CUPED and how can it help power experiments?
  id: totrans-111
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 什么是CUPED，它如何帮助提升实验效能？
- en: Background
  id: totrans-112
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 背景
- en: 'CUPED (controlled experiments using pre-experiment data) is a powerful technique
    for improving the accuracy of experiments developed by researchers at Microsoft.
    The original paper is an insightful read for anyone interested in experimentation:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: CUPED（使用实验前数据的控制实验）是一种强大的技术，旨在通过微软研究人员开发的技术来提高实验的准确性。原始论文对于任何对实验感兴趣的人来说，都是一篇具有洞察力的阅读材料：
- en: '[https://ai.stanford.edu/~ronnyk/2009controlledExperimentsOnTheWebSurvey.pdf](https://ai.stanford.edu/~ronnyk/2009controlledExperimentsOnTheWebSurvey.pdf)'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://ai.stanford.edu/~ronnyk/2009controlledExperimentsOnTheWebSurvey.pdf](https://ai.stanford.edu/~ronnyk/2009controlledExperimentsOnTheWebSurvey.pdf)'
- en: 'The core idea of CUPED is to use data collected before your experiment begins
    to reduce the variance in your target metric. By doing so, you can make your experiment
    more sensitive, which has two major benefits:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: CUPED的核心思想是使用实验开始前收集的数据来减少目标指标的方差。通过这样做，你可以使实验更敏感，从而获得两个主要好处：
- en: You can detect smaller effects with the same sample size.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以在相同的样本量下检测到更小的效果。
- en: You can detect the same effect with a smaller sample size.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以在更小的样本量下检测到相同的效果。
- en: Think of it like removing the “background noise” so you can see the “signal”
    more clearly.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: 可以把它想象成去除“背景噪声”，这样你可以更清晰地看到“信号”。
- en: Variance, standard deviation, standard error
  id: totrans-119
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 方差、标准差、标准误差
- en: When you read about CUPED you may hear people talk about it reducing the variance,
    standard deviation or standard error. If you are anything like me, you might find
    yourself forgetting how these are related, so before we go any further let’s recap
    on this!
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 当你了解CUPED时，可能会听到人们谈论它如何减少方差、标准差或标准误。如果你像我一样，可能会忘记这些概念之间的关系，因此在我们继续深入之前，让我们回顾一下这些概念！
- en: '**Variance**: Variance measures the average squared deviation of each data
    point from the mean, reflecting the overall spread or dispersion within a dataset.'
  id: totrans-121
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**方差**：方差衡量每个数据点与均值的平方偏差的平均值，反映了数据集内的整体分布或离散程度。'
- en: '**Standard Deviation**: Standard deviation is the square root of variance,
    representing the average distance of each data point from the mean, and providing
    a more interpretable measure of spread.'
  id: totrans-122
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标准差**：标准差是方差的平方根，表示每个数据点与均值的平均距离，并提供了一个更易于理解的离散度量。'
- en: '**Standard Error**: Standard error quantifies the precision of the sample mean
    as an estimate of the population mean, calculated as the standard deviation divided
    by the square root of the sample size.'
  id: totrans-123
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标准误差**：标准误差量化了样本均值作为总体均值估计的精度，计算方法是将标准差除以样本大小的平方根。'
- en: How does CUPED work?
  id: totrans-124
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: CUPED是如何工作的？
- en: To understand how CUPED works, let’s break it down…
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: 为了理解CUPED是如何工作的，我们先来分解一下……
- en: '**Pre-experiment covariate** — In the lightest implementation of CUPED, the
    pre-experiment covariate would be the target metric measured in a time period
    before the experiment. So if your target metric was sales value, your covariate
    could be each customers sales value 4 weeks prior to the experiment.'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: '**实验前协变量** — 在CUPED的最简单实现中，实验前协变量是实验开始前的一段时间内测量的目标指标。因此，如果你的目标指标是销售额，那么你的协变量可以是每个客户在实验前4周的销售额。'
- en: It’s important that your covariate is correlated with your target metric and
    that it is unaffected by the treatment. This is why we would typically use pre-treatment
    data from the control group.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 你的协变量与目标指标相关，并且不受处理的影响，这一点非常重要。这也是为什么我们通常使用控制组的处理前数据。
- en: '**Regression adjustment** — Linear regression is used to model the relationship
    between the covariate (measured before the experiment) and the target metric (measured
    across the experiment period). We can then calculate the CUPED adjusted target
    metric by removing the influence of the covariate:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '**回归调整** — 使用线性回归来建模协变量（实验前测量）与目标指标（实验期间测量）之间的关系。然后，我们可以通过去除协变量的影响来计算 CUPED
    调整后的目标指标：'
- en: '![](../Images/ee1f5375c1228403ad307b357c55788c.png)'
  id: totrans-129
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ee1f5375c1228403ad307b357c55788c.png)'
- en: User generated image
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成的图片
- en: It is worth noting that taking away the mean of the covariate is done to centre
    the outcome variable around the mean to make it interpretable when compared to
    the original target metric.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 值得注意的是，去除协变量的均值是为了使结果变量围绕均值进行中心化，这样当与原始目标指标进行比较时，更容易解释。
- en: '**Variance reduction** — After the regression adjustment the variance in our
    target metric has reduced. Lower variance means that the differences between the
    control and treatment group are easier to detect, thus increasing the statistical
    power of the experiment.'
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: '**方差减少** — 经过回归调整后，我们目标指标的方差减少了。方差较小意味着控制组和实验组之间的差异更容易被检测到，从而增加了实验的统计效能。'
- en: Applying it to our case study
  id: totrans-133
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 将其应用到我们的案例研究中
- en: 'Let’s use our case study to illustrate how it works. Below we code CUPED up
    in a function:'
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过案例研究来说明它是如何工作的。下面我们将 CUPED 编写成一个函数：
- en: '[PRE7]'
  id: totrans-135
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'When we apply it to our case study data and compare the adjusted target metric
    to the original target metric, we see that the variance has reduced:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们将其应用到我们的案例研究数据中，并将调整后的目标指标与原始目标指标进行比较时，我们看到方差已减少：
- en: '[PRE8]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '![](../Images/979220e2d8fa0775cb942bf17a1d1505.png)'
  id: totrans-138
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/979220e2d8fa0775cb942bf17a1d1505.png)'
- en: User generated image
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成的图片
- en: Does it reduce the standard error?
  id: totrans-140
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是否减少了标准误差？
- en: 'Now we have applied CUPED and reduced the variance, lets run our bootstrapping
    function to see what impact it has:'
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经应用了 CUPED 并减少了方差，让我们运行引导法函数，看看它产生了什么影响：
- en: '[PRE9]'
  id: totrans-142
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '![](../Images/7e4f9adbcabe4f1f983b968fa2ced17c.png)'
  id: totrans-143
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/7e4f9adbcabe4f1f983b968fa2ced17c.png)'
- en: User generated image
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成的图片
- en: 'If you compare this to our previous result using the original target metric
    you see that the confidence intervals are narrower:'
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 如果将其与我们之前使用原始目标指标的结果进行比较，你会发现置信区间更窄了：
- en: '[PRE10]'
  id: totrans-146
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '![](../Images/2ca14804954a90f551baa3be1187c7a4.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/2ca14804954a90f551baa3be1187c7a4.png)'
- en: User generated image
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成的图片
- en: The bootstrap difference in means also moves closer to the ground truth treatment
    effect. This is because CUPED is also very effective at dealing with pre-existing
    differences between the control and treatment group.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 引导法（bootstrap）均值差异也逐渐接近真实的处理效应。这是因为 CUPED 对处理控制组和实验组之间的先前差异非常有效。
- en: Does it reduce the minimum sample size?
  id: totrans-150
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它是否减少了最小样本量？
- en: The next question is does it reduce the minimum sample size we need. Well lets
    find out!
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: 下一个问题是，它是否减少了我们所需的最小样本量。让我们来看看吧！
- en: '[PRE11]'
  id: totrans-152
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '![](../Images/5c4826146a3028c94472f710ed1844fa.png)'
  id: totrans-153
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/5c4826146a3028c94472f710ed1844fa.png)'
- en: User generated image
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成的图片
- en: The minimum sample size needed has reduced from 1,645 to 901\. Both Finance
    and the Data Science team are going to be pleased as we can run the experiment
    for a shorter time period with a smaller control sample!
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 所需的最小样本量从 1,645 减少到了 901。无论是财务团队还是数据科学团队都将非常高兴，因为我们可以在较短的时间内用更小的控制样本来进行实验！
- en: What are the conceptual similarities between CUPED and double machine learning?
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: CUPED 和双重机器学习之间有哪些概念上的相似之处？
- en: Background
  id: totrans-157
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 背景
- en: 'When I first read about CUPED, I thought of double machine learning and the
    similarities. If you aren’t familiar with double machine learning, check out my
    article from earlier in the series:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: 当我第一次读到 CUPED 时，我就想到了双重机器学习及其相似之处。如果你不熟悉双重机器学习，查看我在系列文章中的早期内容：
- en: '[](/de-biasing-treatment-effects-with-double-machine-learning-63b16fcb3e97?source=post_page-----34dc2f3d3284--------------------------------)
    [## De-biasing Treatment Effects with Double Machine Learning'
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/de-biasing-treatment-effects-with-double-machine-learning-63b16fcb3e97?source=post_page-----34dc2f3d3284--------------------------------)
    [## 使用双重机器学习消除处理效应偏差'
- en: Causal AI, exploring the integration of causal reasoning into machine learning
  id: totrans-160
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 因果 AI，探索因果推理与机器学习的结合
- en: towardsdatascience.com](/de-biasing-treatment-effects-with-double-machine-learning-63b16fcb3e97?source=post_page-----34dc2f3d3284--------------------------------)
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/de-biasing-treatment-effects-with-double-machine-learning-63b16fcb3e97?source=post_page-----34dc2f3d3284--------------------------------)
- en: 'Pay attention to the first stage outcome model in double machine learning:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意双重机器学习中的第一阶段结果模型：
- en: '***Outcome model (de-noising):*** Machine learning model used to estimate the
    outcome using just the control features. The outcome model residuals are then
    calculated.'
  id: totrans-163
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***结果模型（去噪）：*** 用于仅使用控制特征估计结果的机器学习模型。然后计算结果模型的残差。'
- en: This is conceptually very similar to what we are doing with CUPED!
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 这在概念上与我们使用CUPED的做法非常相似！
- en: How does it compare to CUPED?
  id: totrans-165
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 它与CUPED相比如何？
- en: 'Let’s feed through our case study data and see if we get a similar result:'
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们通过案例研究数据，看看是否得到类似的结果：
- en: '[PRE12]'
  id: totrans-167
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '![](../Images/edd156ca7a8178703d554a058002f2aa.png)'
  id: totrans-168
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/edd156ca7a8178703d554a058002f2aa.png)'
- en: User generated image
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成的图像
- en: We get an almost identical result!
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 我们得到几乎完全相同的结果！
- en: 'When we plot the residuals we can see that the variance is reduced like in
    CUPED (although we don’t add the mean to scale for interpretation):'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 当我们绘制残差时，可以看到方差像在CUPED中一样减少（尽管我们没有添加均值来进行缩放以便于解释）：
- en: '[PRE13]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: '![](../Images/895d86f01f26912525e039620b535abc.png)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/895d86f01f26912525e039620b535abc.png)'
- en: User generated image
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 用户生成的图像
- en: “So what?” I hear you ask!
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: “那又怎么样？”我听到你问！
- en: Firstly, I think it’s an interesting observation for anyone using double machine
    learning — The first stage outcome model help reduce the variance and therefore
    we should get similar benefits to CUPED.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，我认为这对任何使用双重机器学习的人来说是一个有趣的观察——第一阶段结果模型有助于减少方差，因此我们应该能够获得类似CUPED的好处。
- en: Secondly, it raises the question when is each method appropriate? Let’s close
    things off by covering off this question…
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: 其次，它提出了一个问题：每种方法什么时候合适？让我们通过回答这个问题来结束本部分…
- en: When should we use double machine learning rather than CUPED?
  id: totrans-178
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 我们什么时候应该使用双重机器学习而不是CUPED？
- en: 'There are several reasons why it may make sense to tend towards CUPED:'
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 有几个原因说明为什么倾向于使用CUPED可能是合理的：
- en: It’s easier to understand.
  id: totrans-180
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这更容易理解。
- en: It’s simpler to implement.
  id: totrans-181
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它更易于实现。
- en: It’s one model rather than three, meaning you have less challenges with overfitting.
  id: totrans-182
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 这是一个模型，而不是三个模型，这意味着你会面临更少的过拟合挑战。
- en: 'However, there are a couple of exceptions where double machine learning outperforms
    CUPED:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 然而，也有一些例外情况，双重机器学习优于CUPED：
- en: '**Biased treatment assignment** — When the treatment assignment is biased,
    for example when you are using observational data, double machine learning can
    deal with this. My article from earlier in the series builds on this:'
  id: totrans-184
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**偏倚的处理分配**——当处理分配存在偏倚时，例如使用观察数据时，双重机器学习可以处理这个问题。我的上一篇文章深入探讨了这一点：'
- en: '[](/de-biasing-treatment-effects-with-double-machine-learning-63b16fcb3e97?source=post_page-----34dc2f3d3284--------------------------------)
    [## De-biasing Treatment Effects with Double Machine Learning'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/de-biasing-treatment-effects-with-double-machine-learning-63b16fcb3e97?source=post_page-----34dc2f3d3284--------------------------------)
    [## 使用双重机器学习去偏治疗效果](https://example.org)'
- en: Causal AI, exploring the integration of causal reasoning into machine learning
  id: totrans-186
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 因果AI，探索因果推理与机器学习的结合
- en: towardsdatascience.com](/de-biasing-treatment-effects-with-double-machine-learning-63b16fcb3e97?source=post_page-----34dc2f3d3284--------------------------------)
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/de-biasing-treatment-effects-with-double-machine-learning-63b16fcb3e97?source=post_page-----34dc2f3d3284--------------------------------)
- en: '**Heterogenous treatment effects** — When you want to understand effects at
    an individual level, for example finding out who it is worth sending discounts
    to, double machine learning can help with this. There is a good case study which
    illustrates this in my previous article on optimising treatment strategies:'
  id: totrans-188
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**异质治疗效果**——当你想了解个体层面的效果时，例如找出哪些人值得发送折扣，双重机器学习可以提供帮助。在我之前关于优化治疗策略的文章中，有一个很好的案例研究说明了这一点：'
- en: '[](/using-double-machine-learning-and-linear-programming-to-optimise-treatment-strategies-920c20a29553?source=post_page-----34dc2f3d3284--------------------------------)
    [## Using Double Machine Learning and Linear Programming to optimise treatment
    strategies'
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: '[](/using-double-machine-learning-and-linear-programming-to-optimise-treatment-strategies-920c20a29553?source=post_page-----34dc2f3d3284--------------------------------)
    [## 使用双重机器学习和线性编程优化治疗策略](https://example.org)'
- en: Causal AI, exploring the integration of causal reasoning into machine learning
  id: totrans-190
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 因果AI，探索因果推理与机器学习的结合
- en: towardsdatascience.com](/using-double-machine-learning-and-linear-programming-to-optimise-treatment-strategies-920c20a29553?source=post_page-----34dc2f3d3284--------------------------------)
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: towardsdatascience.com](/using-double-machine-learning-and-linear-programming-to-optimise-treatment-strategies-920c20a29553?source=post_page-----34dc2f3d3284--------------------------------)
- en: Final thoughts
  id: totrans-192
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 最后的思考
- en: 'Today we did a whistle stop tour of experimentation, covering hypothesis testing,
    power analysis and bootstrapping. We then explored how CUPED can reduce the standard
    error and increase the power of our experiments. Finally, we touched on it’s similarities
    to double machine learning and discussed when each method should be used. There
    are a few additional key points which are worth mentioning in terms CUPED:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 今天我们进行了快速浏览实验的过程，涵盖了假设检验、功效分析和自助法（bootstrapping）。然后，我们探讨了 CUPED 如何减少标准误差并提高实验的功效。最后，我们提到了它与双重机器学习（double
    machine learning）的相似性，并讨论了何时应该使用每种方法。关于 CUPED，还有一些额外的关键点值得一提：
- en: We don’t have to use linear regression — If we have multiple covariates, maybe
    some with non-linear relationships, we could use a machine learning technique
    like boosting.
  id: totrans-194
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 我们不必使用线性回归——如果我们有多个协变量，其中一些具有非线性关系，我们可以使用机器学习技术，例如提升方法（boosting）。
- en: If we do go down the route of using a machine learning technique, we need to
    make sure not to overfit the data.
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果我们选择使用机器学习技术，我们需要确保不会对数据进行过拟合。
- en: Some careful thought should go into when to run CUPED — Are you going to run
    it before you start your experiment and then run a power analysis to determine
    your reduced sample size? Or are you just going to run it after your experiment
    to reduce the standard error?
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 何时运行 CUPED 需要仔细思考——你是打算在实验开始前运行 CUPED，然后进行功效分析以确定减少后的样本量？还是打算在实验结束后运行它以减少标准误差？
- en: Follow me if you want to continue this journey into Causal AI – In the next
    article we will investigate whether multi-collinearity is harming your causal
    inferences in marketing mix modelling!
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想继续深入了解因果 AI，请跟随我——在下一篇文章中，我们将探讨多重共线性是否在市场营销组合模型中影响你的因果推断！
