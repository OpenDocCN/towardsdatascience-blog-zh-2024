- en: Real-Time Twitch Chat Sentiment Analysis with Apache Flink
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å®æ—¶TwitchèŠå¤©æƒ…æ„Ÿåˆ†æä¸Apache Flink
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/real-time-twitch-chat-sentiment-analysis-with-apache-flink-e165ac1a8dcf?source=collection_archive---------5-----------------------#2024-03-27](https://towardsdatascience.com/real-time-twitch-chat-sentiment-analysis-with-apache-flink-e165ac1a8dcf?source=collection_archive---------5-----------------------#2024-03-27)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/real-time-twitch-chat-sentiment-analysis-with-apache-flink-e165ac1a8dcf?source=collection_archive---------5-----------------------#2024-03-27](https://towardsdatascience.com/real-time-twitch-chat-sentiment-analysis-with-apache-flink-e165ac1a8dcf?source=collection_archive---------5-----------------------#2024-03-27)
- en: Learn how to empower creators by real-time sentiment analysis with Apache Flink
    to decipher audience emotions to steer content for viewer satisfaction
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å­¦ä¹ å¦‚ä½•é€šè¿‡å®æ—¶æƒ…æ„Ÿåˆ†æä¸Apache Flinkèµ‹èƒ½åˆ›ä½œè€…ï¼Œè§£è¯»è§‚ä¼—æƒ…ç»ªï¼Œè°ƒæ•´å†…å®¹ä»¥æé«˜è§‚ä¼—æ»¡æ„åº¦
- en: '[](https://vojay.medium.com/?source=post_page---byline--e165ac1a8dcf--------------------------------)[![Volker
    Janz](../Images/0825160d6d521f4152948f0187cf354b.png)](https://vojay.medium.com/?source=post_page---byline--e165ac1a8dcf--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--e165ac1a8dcf--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--e165ac1a8dcf--------------------------------)
    [Volker Janz](https://vojay.medium.com/?source=post_page---byline--e165ac1a8dcf--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://vojay.medium.com/?source=post_page---byline--e165ac1a8dcf--------------------------------)[![Volker
    Janz](../Images/0825160d6d521f4152948f0187cf354b.png)](https://vojay.medium.com/?source=post_page---byline--e165ac1a8dcf--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--e165ac1a8dcf--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--e165ac1a8dcf--------------------------------)
    [Volker Janz](https://vojay.medium.com/?source=post_page---byline--e165ac1a8dcf--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--e165ac1a8dcf--------------------------------)
    Â·22 min readÂ·Mar 27, 2024
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--e165ac1a8dcf--------------------------------)
    Â·22åˆ†é’Ÿé˜…è¯»Â·2024å¹´3æœˆ27æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/e55f68a621ce60805ded66c172ab01cb.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e55f68a621ce60805ded66c172ab01cb.png)'
- en: Photo by [Joey kwok](https://unsplash.com/@spideyjoey?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: ç”± [Joey kwok](https://unsplash.com/@spideyjoey?utm_source=medium&utm_medium=referral)
    æä¾›çš„ç…§ç‰‡ï¼Œæ¥æºäº [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: ğŸš€ Letâ€™s learn about Apache Flink and sentiment analysis by building a real-time
    sentiment analysis streaming application for the Twitch chat.
  id: totrans-8
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: ğŸš€ è®©æˆ‘ä»¬é€šè¿‡æ„å»ºä¸€ä¸ªå®æ—¶æƒ…æ„Ÿåˆ†ææµåº”ç”¨ç¨‹åºï¼Œå­¦ä¹ Apache Flinkå’Œæƒ…æ„Ÿåˆ†æï¼Œä¸ºTwitchèŠå¤©æä¾›æ”¯æŒã€‚
- en: â€“ [Introduction and demo](#cbac)
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [ä»‹ç»ä¸æ¼”ç¤º](#cbac)
- en: â€“ [Apache Flink](#590a)
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [Apache Flink](#590a)
- en: â€“ [NLP and sentiment analysis](#0d10)
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [NLPä¸æƒ…æ„Ÿåˆ†æ](#0d10)
- en: â€“ [Setting up a Flink project](#138d)
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [è®¾ç½®Flinké¡¹ç›®](#138d)
- en: â€“ [Prepare the project](#acf0)
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [å‡†å¤‡é¡¹ç›®](#acf0)
- en: âˆ’âˆ’ [Project settings in IntelliJ](#d36b)
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: âˆ’âˆ’ [IntelliJä¸­çš„é¡¹ç›®è®¾ç½®](#d36b)
- en: âˆ’âˆ’ [Rename and reduce main class](#5b50)
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: âˆ’âˆ’ [é‡å‘½åå¹¶ç®€åŒ–ä¸»ç±»](#5b50)
- en: âˆ’âˆ’ [pom.xml project settings](#9c6a)
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: âˆ’âˆ’ [pom.xmlé¡¹ç›®è®¾ç½®](#9c6a)
- en: âˆ’âˆ’ [Run configuration](#88d6)
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: âˆ’âˆ’ [è¿è¡Œé…ç½®](#88d6)
- en: âˆ’âˆ’ [Local Flink Web UI](#d646)
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: âˆ’âˆ’ [æœ¬åœ°Flink Web UI](#d646)
- en: â€“ [Read the Twitch chat](#cc63)
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [è¯»å–TwitchèŠå¤©](#cc63)
- en: âˆ’âˆ’ [Add Twitch4J dependency](#db06)
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: âˆ’âˆ’ [æ·»åŠ Twitch4Jä¾èµ–](#db06)
- en: âˆ’âˆ’ [Create POJO for Twitch chat messages](#9ce2)
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: âˆ’âˆ’ [ä¸ºTwitchèŠå¤©æ¶ˆæ¯åˆ›å»ºPOJO](#9ce2)
- en: âˆ’âˆ’ [Create custom Twitch source function for Flink](#b69b)
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: âˆ’âˆ’ [ä¸ºFlinkåˆ›å»ºè‡ªå®šä¹‰Twitchæºå‡½æ•°](#b69b)
- en: âˆ’âˆ’ [Use source function](#78d2)
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: âˆ’âˆ’ [ä½¿ç”¨sourceå‡½æ•°](#78d2)
- en: â€“ [Twitch chat sentiment analysis](#b566)
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [TwitchèŠå¤©æƒ…æ„Ÿåˆ†æ](#b566)
- en: âˆ’âˆ’ [Add Stanford CoreNLP dependencies](#600f)
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: âˆ’âˆ’ [æ·»åŠ Stanford CoreNLPä¾èµ–](#600f)
- en: âˆ’âˆ’ [Create sentiment analysis map function](#eea7)
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: âˆ’âˆ’ [åˆ›å»ºæƒ…æ„Ÿåˆ†æmapå‡½æ•°](#eea7)
- en: âˆ’âˆ’ [Use map function](#75ee)
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: âˆ’âˆ’ [ä½¿ç”¨mapå‡½æ•°](#75ee)
- en: â€“ [Conclusion](#35a9)
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: â€“ [ç»“è®º](#35a9)
- en: '***Disclaimer****: Within this article and demo, I am only analyzing my own
    chat messages, without storing data or processing other users messages. Please
    be advised to consult the Twitch* [*Terms of Service*](https://www.twitch.tv/p/en/legal/terms-of-service/)
    *and* [*Developer Services Agreement*](https://www.twitch.tv/p/en/legal/developer-agreement/)*,
    as well as the official* [*Twitch API documentation*](https://dev.twitch.tv/docs/api/)
    *before using it for other purposes.*'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: '***å…è´£å£°æ˜***ï¼šåœ¨æœ¬æ–‡å’Œæ¼”ç¤ºä¸­ï¼Œæˆ‘ä»…åˆ†ææˆ‘è‡ªå·±çš„èŠå¤©æ¶ˆæ¯ï¼Œæœªå­˜å‚¨æ•°æ®æˆ–å¤„ç†å…¶ä»–ç”¨æˆ·çš„æ¶ˆæ¯ã€‚åœ¨å°†å…¶ç”¨äºå…¶ä»–ç›®çš„ä¹‹å‰ï¼Œè¯·å’¨è¯¢Twitchçš„[*æœåŠ¡æ¡æ¬¾*](https://www.twitch.tv/p/en/legal/terms-of-service/)å’Œ[*å¼€å‘è€…æœåŠ¡åè®®*](https://www.twitch.tv/p/en/legal/developer-agreement/)ï¼Œä»¥åŠå®˜æ–¹çš„[*Twitch
    APIæ–‡æ¡£*](https://dev.twitch.tv/docs/api/)ã€‚'
- en: Introduction and demo
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä»‹ç»ä¸æ¼”ç¤º
- en: In this blog post, I will guide you through building a real-time sentiment analysis
    application for Twitch chat using [Apache Flink](https://flink.apache.org/). This
    application will be able to process live messages from a Twitch channel and determine
    the overall sentiment of the chat.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç¯‡åšå®¢æ–‡ç« ä¸­ï¼Œæˆ‘å°†æŒ‡å¯¼ä½ å¦‚ä½•ä½¿ç”¨[Apache Flink](https://flink.apache.org/)æ„å»ºä¸€ä¸ªå®æ—¶æƒ…æ„Ÿåˆ†æåº”ç”¨ç¨‹åºï¼Œç”¨äºåˆ†æ
    Twitch èŠå¤©ã€‚è¯¥åº”ç”¨ç¨‹åºèƒ½å¤Ÿå¤„ç†æ¥è‡ª Twitch é¢‘é“çš„å®æ—¶æ¶ˆæ¯ï¼Œå¹¶åˆ¤æ–­èŠå¤©çš„æ•´ä½“æƒ…æ„Ÿã€‚
- en: 'The project was built with the following environment:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥é¡¹ç›®æ„å»ºä½¿ç”¨äº†ä»¥ä¸‹ç¯å¢ƒï¼š
- en: '**OS**: macOS Sonoma'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**æ“ä½œç³»ç»Ÿ**ï¼šmacOS Sonoma'
- en: '**Java**: 11'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Java**ï¼š11'
- en: '**Flink**: 1.17.2'
  id: totrans-35
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**Flink**ï¼š1.17.2'
- en: '![](../Images/e46b1477e09e4b3e113640ed6cebc535.png)'
  id: totrans-36
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e46b1477e09e4b3e113640ed6cebc535.png)'
- en: Real-time Twitch chat sentiment analysis with Apache Flink (by author)
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: å®æ—¶ Twitch èŠå¤©æƒ…æ„Ÿåˆ†æä¸ Apache Flinkï¼ˆä½œè€…ï¼‰
- en: 'The underlying idea of this article is: to further educate ourselves in the
    field of Data Engineering, we should follow our passion and grow through actual
    projects.'
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æ–‡çš„åŸºæœ¬æ€è·¯æ˜¯ï¼šä¸ºäº†åœ¨æ•°æ®å·¥ç¨‹é¢†åŸŸè¿›ä¸€æ­¥æå‡è‡ªå·±ï¼Œæˆ‘ä»¬åº”è¯¥è·Ÿéšè‡ªå·±çš„çƒ­æƒ…ï¼Œé€šè¿‡å®é™…é¡¹ç›®æ¥æˆé•¿ã€‚
- en: Find a problem that interests and motivates you, and try to solve it.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰¾åˆ°ä¸€ä¸ªè®©ä½ æ„Ÿå…´è¶£å¹¶æ¿€åŠ±ä½ çš„é—®é¢˜ï¼Œå¹¶å°è¯•è§£å†³å®ƒã€‚
- en: By the end of this blog post, you will have a working application that can be
    used to track the sentiment of a Twitch chat in real-time. It can be used with
    one ore more Twitch channels. You will also learn the basics of [Apache Flink](https://flink.apache.org/)
    and sentiment analysis in Java.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ°è¿™ç¯‡åšå®¢æ–‡ç« ç»“æŸæ—¶ï¼Œä½ å°†æ‹¥æœ‰ä¸€ä¸ªå¯ä»¥å®æ—¶è·Ÿè¸ª Twitch èŠå¤©æƒ…æ„Ÿçš„å·¥ä½œåº”ç”¨ç¨‹åºã€‚å®ƒå¯ä»¥ç”¨äºä¸€ä¸ªæˆ–å¤šä¸ª Twitch é¢‘é“ã€‚ä½ è¿˜å°†å­¦ä¹  [Apache
    Flink](https://flink.apache.org/) å’Œ Java ä¸­çš„æƒ…æ„Ÿåˆ†æåŸºç¡€ã€‚
- en: '**You can find the final result also on Github** ğŸª„: [https://github.com/vojay-dev/flitch](https://github.com/vojay-dev/flitch)'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: '**ä½ è¿˜å¯ä»¥åœ¨ Github ä¸Šæ‰¾åˆ°æœ€ç»ˆç»“æœ** ğŸª„ï¼š[https://github.com/vojay-dev/flitch](https://github.com/vojay-dev/flitch)'
- en: Apache Flink
  id: totrans-42
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Apache Flink
- en: Streams of data are everywhere. Almost all data that is generated is generated
    as a stream of data naturally, even if we mostly process data in batches. This
    can be GPS data, interaction tracking for apps or websites, sensor data or messages
    in a Twitch chat.
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: æ•°æ®æµæ— å¤„ä¸åœ¨ã€‚å‡ ä¹æ‰€æœ‰ç”Ÿæˆçš„æ•°æ®æœ¬è´¨ä¸Šéƒ½æ˜¯ä½œä¸ºæ•°æ®æµç”Ÿæˆçš„ï¼Œå³ä½¿æˆ‘ä»¬é€šå¸¸å¤„ç†çš„æ˜¯æ‰¹é‡æ•°æ®ã€‚è¿™äº›æ•°æ®å¯ä»¥æ˜¯ GPS æ•°æ®ã€åº”ç”¨ç¨‹åºæˆ–ç½‘ç«™çš„äº¤äº’è·Ÿè¸ªã€ä¼ æ„Ÿå™¨æ•°æ®æˆ–
    Twitch èŠå¤©ä¸­çš„æ¶ˆæ¯ã€‚
- en: '***Stream processing means to process data in motion***'
  id: totrans-44
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***æµå¤„ç†æ„å‘³ç€å¤„ç†åŠ¨æ€æ•°æ®***'
- en: A stream processing application usually consists of data sources, which generate
    streams of data, operators to process the data and sinks. These days, there are
    many frameworks and services that allow to implement stream processing applications
    and often concepts are similar. One of them is [Apache Flink](https://flink.apache.org/).
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªæµå¤„ç†åº”ç”¨ç¨‹åºé€šå¸¸ç”±æ•°æ®æºã€ç”Ÿæˆæ•°æ®æµã€æ“ä½œç¬¦ç”¨äºå¤„ç†æ•°æ®å’Œæ¥æ”¶ç«¯ç»„æˆã€‚å¦‚ä»Šï¼Œæœ‰è®¸å¤šæ¡†æ¶å’ŒæœåŠ¡å¯ä»¥ç”¨æ¥å®ç°æµå¤„ç†åº”ç”¨ç¨‹åºï¼Œå¹¶ä¸”æ¦‚å¿µä¸Šå¾€å¾€æ˜¯ç±»ä¼¼çš„ã€‚å…¶ä¸­ä¹‹ä¸€æ˜¯[Apache
    Flink](https://flink.apache.org/)ã€‚
- en: '[Apache Flink](https://flink.apache.org/) is not only a framework but also
    a distributed process engine. It allows to create and run **stateful** computations
    on **unbounded** and **bounded** data streams. **Ubounded** streams have a defined
    start, but no defined end while **bounded** data streams have a defined start
    and end. This might sound familiar, since that can also be seen as a batch of
    data but represented as a stream.'
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: '[Apache Flink](https://flink.apache.org/) ä¸ä»…æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œè¿˜æ˜¯ä¸€ä¸ªåˆ†å¸ƒå¼å¤„ç†å¼•æ“ã€‚å®ƒå…è®¸åœ¨**æœ‰çŠ¶æ€**çš„è®¡ç®—ä¸­å¯¹**æ— ç•Œ**å’Œ**æœ‰ç•Œ**æ•°æ®æµè¿›è¡Œåˆ›å»ºå’Œæ‰§è¡Œã€‚**æ— ç•Œ**æ•°æ®æµæœ‰ä¸€ä¸ªæ˜ç¡®çš„å¼€å§‹ï¼Œä½†æ²¡æœ‰æ˜ç¡®çš„ç»“æŸï¼Œè€Œ**æœ‰ç•Œ**æ•°æ®æµåˆ™æœ‰æ˜ç¡®çš„å¼€å§‹å’Œç»“æŸã€‚è¿™ä¸ªæ¦‚å¿µå¯èƒ½å¬èµ·æ¥æœ‰ç‚¹ç†Ÿæ‚‰ï¼Œå› ä¸ºè¿™ä¹Ÿå¯ä»¥è¢«è§†ä¸ºä¸€ä¸ªæ•°æ®æ‰¹æ¬¡ï¼Œåªä¸è¿‡å®ƒæ˜¯ä»¥æµçš„å½¢å¼å‘ˆç°çš„ã€‚'
- en: '![](../Images/c65239a997c588ae867dcc6bfa8a2beb.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c65239a997c588ae867dcc6bfa8a2beb.png)'
- en: Flink concepts (by author)
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: Flink æ¦‚å¿µï¼ˆä½œè€…ï¼‰
- en: Flink offers APIs to define streaming applications. With those you can control
    data sources, transformations and data sinks. With the SQL / Table API you can
    define streaming applications using SQL, which is an amazing feature but please
    keep in mind that streaming SQL behaves differently from batch SQL, which might
    require a shift in how to approach problems. Then, there is the DataStream API
    which can be used to compose your streaming pipeline with predefined functions.
    This can be used in Python, Java and Scala. If you need full control over events,
    state and time, the ProcessFunction layer is the way to go.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: Flink æä¾›äº†å®šä¹‰æµåº”ç”¨ç¨‹åºçš„ APIã€‚é€šè¿‡è¿™äº› APIï¼Œä½ å¯ä»¥æ§åˆ¶æ•°æ®æºã€æ•°æ®è½¬æ¢å’Œæ•°æ®æ¥æ”¶ç«¯ã€‚é€šè¿‡ SQL / Table APIï¼Œä½ å¯ä»¥ä½¿ç”¨
    SQL å®šä¹‰æµåº”ç”¨ç¨‹åºï¼Œè¿™æ˜¯ä¸€ä¸ªéå¸¸æ£’çš„åŠŸèƒ½ï¼Œä½†è¯·è®°ä½ï¼Œæµ SQL ä¸æ‰¹å¤„ç† SQL è¡Œä¸ºä¸åŒï¼Œè¿™å¯èƒ½è¦æ±‚ä½ æ”¹å˜è§£å†³é—®é¢˜çš„æ–¹æ³•ã€‚æ¥ä¸‹æ¥ï¼Œè¿˜æœ‰ DataStream
    APIï¼Œå¯ä»¥ç”¨æ¥é€šè¿‡é¢„å®šä¹‰çš„å‡½æ•°ç»„åˆä½ çš„æµç®¡é“ã€‚å®ƒå¯ä»¥åœ¨ Pythonã€Java å’Œ Scala ä¸­ä½¿ç”¨ã€‚å¦‚æœä½ éœ€è¦å®Œå…¨æ§åˆ¶äº‹ä»¶ã€çŠ¶æ€å’Œæ—¶é—´ï¼Œé‚£ä¹ˆ ProcessFunction
    å±‚æ˜¯ä½ çš„æœ€ä½³é€‰æ‹©ã€‚
- en: '![](../Images/d485c1cf66873673c44c2b23823c9f90.png)'
  id: totrans-50
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d485c1cf66873673c44c2b23823c9f90.png)'
- en: Flink APIs (by author)
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: Flink APIï¼ˆä½œè€…ï¼‰
- en: For this use-case, we will use the DataStream API in Java to define a custom
    source to read the Twitch chat as a stream of data. Futhermore, we will define
    a custom map function, which takes each Twitch message as input, performs the
    sentiment analysis on it and returns a tuple with the message and the analysis
    result. Finally, we simply use a pre-defined sink to print the result. In this
    particular case, we only look at one invdividual event at a time, this is called
    **stateless stream processing**. Bare in mind that one of the key features of
    Flink is to remember information across multiple events, e.g. in form of windowing
    functions. This is called **stateful stream processing**.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºè¿™ä¸ªç”¨ä¾‹ï¼Œæˆ‘ä»¬å°†åœ¨Javaä¸­ä½¿ç”¨DataStream APIæ¥å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰æºï¼Œä»¥ä¾¿å°†TwitchèŠå¤©ä½œä¸ºæ•°æ®æµè¯»å–ã€‚æ­¤å¤–ï¼Œæˆ‘ä»¬è¿˜å°†å®šä¹‰ä¸€ä¸ªè‡ªå®šä¹‰çš„mapå‡½æ•°ï¼Œå®ƒå°†æ¯æ¡Twitchæ¶ˆæ¯ä½œä¸ºè¾“å…¥ï¼Œå¯¹å…¶è¿›è¡Œæƒ…æ„Ÿåˆ†æï¼Œå¹¶è¿”å›ä¸€ä¸ªåŒ…å«æ¶ˆæ¯å’Œåˆ†æç»“æœçš„å…ƒç»„ã€‚æœ€åï¼Œæˆ‘ä»¬ä»…ä½¿ç”¨ä¸€ä¸ªé¢„å®šä¹‰çš„sinkæ¥æ‰“å°ç»“æœã€‚åœ¨è¿™ä¸ªç‰¹å®šçš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬ä¸€æ¬¡åªæŸ¥çœ‹ä¸€ä¸ªäº‹ä»¶ï¼Œè¿™è¢«ç§°ä¸º**æ— çŠ¶æ€æµå¤„ç†**ã€‚è¯·è®°ä½ï¼ŒFlinkçš„ä¸€ä¸ªå…³é”®ç‰¹æ€§æ˜¯èƒ½å¤Ÿè·¨å¤šä¸ªäº‹ä»¶è®°ä½ä¿¡æ¯ï¼Œä¾‹å¦‚é€šè¿‡çª—å£å‡½æ•°çš„å½¢å¼ã€‚è¿™è¢«ç§°ä¸º**æœ‰çŠ¶æ€æµå¤„ç†**ã€‚
- en: '![](../Images/b08d47365c06f9e10a96bd63298dfe55.png)'
  id: totrans-53
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b08d47365c06f9e10a96bd63298dfe55.png)'
- en: Flink state (by author)
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: FlinkçŠ¶æ€ï¼ˆä½œè€…ï¼‰
- en: 'If you are interested in a more advanced Flink use-case including state and
    other advanced techniques like the Broadcast State Pattern, have a look at my
    talk at the Big Data Conference Europe 2023:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ å¯¹æ›´é«˜çº§çš„Flinkç”¨ä¾‹æ„Ÿå…´è¶£ï¼ŒåŒ…æ‹¬çŠ¶æ€ç®¡ç†å’Œå…¶ä»–é«˜çº§æŠ€æœ¯ï¼ˆå¦‚å¹¿æ’­çŠ¶æ€æ¨¡å¼ï¼‰ï¼Œå¯ä»¥çœ‹çœ‹æˆ‘åœ¨2023å¹´æ¬§æ´²å¤§æ•°æ®å¤§ä¼šä¸Šçš„æ¼”è®²ï¼š
- en: ğŸ“¼ [Real-time Customer Engagement in Gaming Using Kafka and Flink](https://www.youtube.com/watch?v=djikIGOm90U)
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ“¼ [ä½¿ç”¨Kafkaå’ŒFlinkå®ç°æ¸¸æˆä¸­çš„å®æ—¶å®¢æˆ·äº’åŠ¨](https://www.youtube.com/watch?v=djikIGOm90U)
- en: NLP and sentiment analysis
  id: totrans-57
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: NLPå’Œæƒ…æ„Ÿåˆ†æ
- en: Imagine Natural Language Processing (NLP) as your super-powered translator for
    computer brains. It lets them understand the nuances of human language, just like
    you can tell the difference between a sarcastic â€œgood jobâ€ and a genuine one.
    This goes beyond simple keyword matching and delves into the complexities of grammar,
    syntax, and semantics.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: æƒ³è±¡ä¸€ä¸‹ï¼Œè‡ªç„¶è¯­è¨€å¤„ç†ï¼ˆNLPï¼‰å°±åƒæ˜¯ä½ ç”µè„‘å¤§è„‘çš„è¶…çº§ç¿»è¯‘å™¨ã€‚å®ƒè®©è®¡ç®—æœºèƒ½å¤Ÿç†è§£äººç±»è¯­è¨€çš„ç»†å¾®å·®åˆ«ï¼Œå°±åƒä½ èƒ½åˆ†è¾¨å‡ºè®½åˆºçš„â€œå¥½å·¥ä½œâ€å’ŒçœŸè¯šçš„â€œå¥½å·¥ä½œâ€ä¹‹é—´çš„ä¸åŒã€‚è¿™ä¸ä»…ä»…æ˜¯ç®€å•çš„å…³é”®è¯åŒ¹é…ï¼Œè€Œæ˜¯æ·±å…¥æ¢è®¨è¯­æ³•ã€å¥æ³•å’Œè¯­ä¹‰çš„å¤æ‚æ€§ã€‚
- en: 'Here are some NLP applications you might encounter:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ å¯èƒ½é‡åˆ°çš„ä¸€äº›NLPåº”ç”¨åŒ…æ‹¬ï¼š
- en: '**Spam filtering**: NLP can identify suspicious patterns in emails, separating
    legitimate messages from spam.'
  id: totrans-60
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**åƒåœ¾é‚®ä»¶è¿‡æ»¤**ï¼šNLPå¯ä»¥è¯†åˆ«ç”µå­é‚®ä»¶ä¸­çš„å¯ç–‘æ¨¡å¼ï¼Œå¸®åŠ©å°†åˆæ³•é‚®ä»¶ä¸åƒåœ¾é‚®ä»¶åŒºåˆ†å¼€æ¥ã€‚'
- en: '**Machine translation**: NLP helps bridge the language gap by analyzing the
    structure and meaning of sentences for accurate translation.'
  id: totrans-61
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**æœºå™¨ç¿»è¯‘**ï¼šNLPé€šè¿‡åˆ†æå¥å­çš„ç»“æ„å’Œæ„ä¹‰æ¥å¸®åŠ©å¼¥åˆè¯­è¨€é¸¿æ²Ÿï¼Œç¡®ä¿ç¿»è¯‘çš„å‡†ç¡®æ€§ã€‚'
- en: '**Voice assistants**: Siri, Alexa, and Google Assistant all leverage NLP to
    understand your voice commands and respond intelligently.'
  id: totrans-62
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**è¯­éŸ³åŠ©æ‰‹**ï¼šSiriã€Alexaå’ŒGoogle Assistantéƒ½åˆ©ç”¨NLPæ¥ç†è§£ä½ çš„è¯­éŸ³å‘½ä»¤å¹¶æ™ºèƒ½å›åº”ã€‚'
- en: One other application of NLP is sentiment analysis. Think of it like an emotional
    compass for text. It assigns a sentiment score (positive, negative, or neutral)
    to a piece of text, helping us gauge the overall feeling behind it.
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: NLPçš„å¦ä¸€ä¸ªåº”ç”¨æ˜¯æƒ…æ„Ÿåˆ†æã€‚å¯ä»¥æŠŠå®ƒæƒ³è±¡æˆæ–‡æœ¬çš„æƒ…æ„ŸæŒ‡å—é’ˆã€‚å®ƒä¸ºä¸€æ®µæ–‡æœ¬åˆ†é…ä¸€ä¸ªæƒ…æ„Ÿåˆ†æ•°ï¼ˆç§¯æã€æ¶ˆææˆ–ä¸­æ€§ï¼‰ï¼Œå¸®åŠ©æˆ‘ä»¬è¡¡é‡æ–‡æœ¬èƒŒåçš„æ•´ä½“æƒ…æ„Ÿã€‚
- en: 'There are two main approaches to sentiment analysis:'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: æƒ…æ„Ÿåˆ†ææœ‰ä¸¤ç§ä¸»è¦æ–¹æ³•ï¼š
- en: '**Lexicon-based**: This approach relies on pre-built dictionaries containing
    words with predefined sentiment scores. The sentiment score of a text is calculated
    based on the scores of the identified words.'
  id: totrans-65
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**åŸºäºè¯å…¸**ï¼šè¿™ç§æ–¹æ³•ä¾èµ–äºé¢„å…ˆæ„å»ºçš„å­—å…¸ï¼Œå­—å…¸ä¸­åŒ…å«å…·æœ‰é¢„å®šä¹‰æƒ…æ„Ÿåˆ†æ•°çš„å•è¯ã€‚æ–‡æœ¬çš„æƒ…æ„Ÿåˆ†æ•°æ˜¯æ ¹æ®æ‰€è¯†åˆ«å•è¯çš„æƒ…æ„Ÿåˆ†æ•°è®¡ç®—çš„ã€‚'
- en: '**Machine Learning-based**: This method utilizes machine learning algorithms
    trained on massive datasets of text labeled with sentiment. These algorithms can
    learn complex relationships between words and their emotional connotations, leading
    to more nuanced sentiment analysis.'
  id: totrans-66
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**åŸºäºæœºå™¨å­¦ä¹ **ï¼šè¿™ç§æ–¹æ³•åˆ©ç”¨åœ¨å¤§é‡æ ‡æ³¨æƒ…æ„Ÿçš„æ–‡æœ¬æ•°æ®é›†ä¸Šè®­ç»ƒçš„æœºå™¨å­¦ä¹ ç®—æ³•ã€‚è¿™äº›ç®—æ³•èƒ½å¤Ÿå­¦ä¹ å•è¯ä¹‹é—´åŠå…¶æƒ…æ„Ÿå†…æ¶µçš„å¤æ‚å…³ç³»ï¼Œä»è€Œå®ç°æ›´ç»†è‡´çš„æƒ…æ„Ÿåˆ†æã€‚'
- en: '![](../Images/4e822594adf58749fb9ba3ba5ef4470e.png)'
  id: totrans-67
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4e822594adf58749fb9ba3ba5ef4470e.png)'
- en: Sentiment analysis example (by author)
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: æƒ…æ„Ÿåˆ†æç¤ºä¾‹ï¼ˆä½œè€…ï¼‰
- en: This is perfect for deciphering those Twitch chat vibes!
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å¯¹äºè§£è¯»TwitchèŠå¤©ä¸­çš„æ°›å›´éå¸¸æœ‰ç”¨ï¼
- en: In our Twitch chat example, we can use sentiment analysis to see if the chat
    is overflowing with happiness or tilting over a missed play. This can be fascinating
    for streamers to understand their audienceâ€™s real-time reaction and maybe even
    adjust their content accordingly! It could be used for real-time monitoring of
    the communities mood.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬çš„ Twitch èŠå¤©ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æƒ…æ„Ÿåˆ†ææ¥æŸ¥çœ‹èŠå¤©æ˜¯å¦å……æ»¡äº†å¿«ä¹ï¼Œæˆ–è€…æ˜¯å¦å› ä¸ºé”™è¿‡ä¸€å±€è€Œæƒ…ç»ªä½è½ã€‚è¿™å¯¹äºä¸»æ’­æ¥è¯´ï¼Œå¯ä»¥å¸®åŠ©ä»–ä»¬äº†è§£è§‚ä¼—çš„å®æ—¶ååº”ï¼Œç”šè‡³æ ¹æ®åé¦ˆè°ƒæ•´å†…å®¹ï¼å®ƒå¯ä»¥ç”¨äºå®æ—¶ç›‘æ§ç¤¾åŒºçš„æƒ…ç»ªã€‚
- en: Setting up a Flink project
  id: totrans-71
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è®¾ç½® Flink é¡¹ç›®
- en: A simple and fast way to setup a Flink project is Maven. Maven is a tool that
    can be used for building and managing primarily Java-based projects. Maven can
    support you as a developer by addressing the aspects of how your project is buil
    and how its dependencies are managed.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: è®¾ç½® Flink é¡¹ç›®çš„ç®€å•å¿«æ·æ–¹æ³•æ˜¯ Mavenã€‚Maven æ˜¯ä¸€ä¸ªç”¨äºæ„å»ºå’Œç®¡ç†ä¸»è¦æ˜¯åŸºäº Java çš„é¡¹ç›®çš„å·¥å…·ã€‚Maven èƒ½å¤Ÿå¸®åŠ©å¼€å‘è€…å¤„ç†é¡¹ç›®æ„å»ºçš„å„ä¸ªæ–¹é¢ï¼Œå¹¶ç®¡ç†å…¶ä¾èµ–å…³ç³»ã€‚
- en: Maven also includes a project templating toolkit called Archetype. With Archetype
    you can quickly generate a new project based on an existing template.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: Maven è¿˜åŒ…æ‹¬ä¸€ä¸ªåä¸º Archetype çš„é¡¹ç›®æ¨¡æ¿å·¥å…·ã€‚ä½¿ç”¨ Archetypeï¼Œä½ å¯ä»¥æ ¹æ®ç°æœ‰æ¨¡æ¿å¿«é€Ÿç”Ÿæˆä¸€ä¸ªæ–°é¡¹ç›®ã€‚
- en: There are Archetypes for all kinds of projects, from a simple Java project (`maven-archetype-quickstart`)
    to framework specific project skeletons, for example to create Flink based projects
    (`flink-quickstart-java`).
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€æœ‰ç±»å‹çš„é¡¹ç›®éƒ½æœ‰åŸå‹å¯ä¾›é€‰æ‹©ï¼Œä»ç®€å•çš„ Java é¡¹ç›®ï¼ˆ`maven-archetype-quickstart`ï¼‰åˆ°æ¡†æ¶ç‰¹å®šçš„é¡¹ç›®éª¨æ¶ï¼Œä¾‹å¦‚åˆ›å»ºåŸºäº
    Flink çš„é¡¹ç›®ï¼ˆ`flink-quickstart-java`ï¼‰ã€‚
- en: 'We will use this to create the demo application:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†ä½¿ç”¨è¿™ä¸ªæ¥åˆ›å»ºæ¼”ç¤ºåº”ç”¨ç¨‹åºï¼š
- en: '[PRE0]'
  id: totrans-76
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: 'Most of the parameters are optional, if you donâ€™t add them, the CLI tool will
    ask you to enter the details while it is creating your project. With `-q` we reduce
    the output. After executing the above command, we will get the following output:'
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: å¤§å¤šæ•°å‚æ•°æ˜¯å¯é€‰çš„ï¼Œå¦‚æœä½ ä¸æ·»åŠ å®ƒä»¬ï¼ŒCLI å·¥å…·ä¼šåœ¨åˆ›å»ºé¡¹ç›®æ—¶è¦æ±‚ä½ è¾“å…¥ç›¸å…³ç»†èŠ‚ã€‚ä½¿ç”¨ `-q` å¯ä»¥å‡å°‘è¾“å‡ºã€‚æ‰§è¡Œä¸Šè¿°å‘½ä»¤åï¼Œæˆ‘ä»¬å°†å¾—åˆ°ä»¥ä¸‹è¾“å‡ºï¼š
- en: '[PRE1]'
  id: totrans-78
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Press `enter` to confirm and you will get a folder named after your `artifactId`
    with the generated project boilerplate.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‰ `enter` ç¡®è®¤ï¼Œä½ å°†å¾—åˆ°ä¸€ä¸ªä»¥ `artifactId` å‘½åçš„æ–‡ä»¶å¤¹ï¼Œé‡Œé¢åŒ…å«ç”Ÿæˆçš„é¡¹ç›®æ¨¡æ¿ã€‚
- en: '![](../Images/145bdd5fb2440c1c8d0e5dae9add44da.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/145bdd5fb2440c1c8d0e5dae9add44da.png)'
- en: Maven Archetype for Flink (by author)
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: Flink çš„ Maven åŸå‹ï¼ˆç”±ä½œè€…æä¾›ï¼‰
- en: From here, you can use the Java IDE of your choice. However, I recommend using
    [IntelliJ](https://www.jetbrains.com/idea). There is a completely free to use
    [IntelliJ IDEA Community Edition](https://www.jetbrains.com/idea/download).
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: ä»è¿™é‡Œï¼Œä½ å¯ä»¥ä½¿ç”¨ä½ é€‰æ‹©çš„ Java IDEã€‚ä¸è¿‡ï¼Œæˆ‘æ¨èä½¿ç”¨ [IntelliJ](https://www.jetbrains.com/idea)ã€‚ä½ å¯ä»¥å…è´¹ä½¿ç”¨
    [IntelliJ IDEA Community Edition](https://www.jetbrains.com/idea/download)ã€‚
- en: Prepare the project
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å‡†å¤‡é¡¹ç›®
- en: Before we get to the actual implementation, we will prepare the generated project
    a bit for our use-case.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å®é™…å®ç°ä¹‹å‰ï¼Œæˆ‘ä»¬å°†ç¨å¾®å‡†å¤‡ä¸€ä¸‹ç”Ÿæˆçš„é¡¹ç›®ï¼Œä»¥é€‚åº”æˆ‘ä»¬çš„ç”¨ä¾‹ã€‚
- en: Project settings in IntelliJ
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: IntelliJ ä¸­çš„é¡¹ç›®è®¾ç½®
- en: If you are using IntelliJ, we now have to adjust the module and project settings,
    to ensure we are using the right Java version and also have the correct language
    level.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ IntelliJï¼Œç°åœ¨éœ€è¦è°ƒæ•´æ¨¡å—å’Œé¡¹ç›®è®¾ç½®ï¼Œç¡®ä¿æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯æ­£ç¡®çš„ Java ç‰ˆæœ¬ï¼Œå¹¶ä¸”è®¾ç½®äº†æ­£ç¡®çš„è¯­è¨€çº§åˆ«ã€‚
- en: With the project opened in IntelliJ, click on *File* â†’ *Project Structure*.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ IntelliJ ä¸­æ‰“å¼€é¡¹ç›®åï¼Œç‚¹å‡» *File* â†’ *Project Structure*ã€‚
- en: Within the *Project Structure* window, navigate to *Project* and ensure to use
    the **Java 11 SDK**.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ *Project Structure* çª—å£ä¸­ï¼Œè¿›å…¥ *Project* å¹¶ç¡®ä¿ä½¿ç”¨ **Java 11 SDK**ã€‚
- en: '![](../Images/a5b31219b3207121e668789a569e111a.png)'
  id: totrans-89
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a5b31219b3207121e668789a569e111a.png)'
- en: Project settings (by author)
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: é¡¹ç›®è®¾ç½®ï¼ˆç”±ä½œè€…æä¾›ï¼‰
- en: Finally, navigate to *Modules* and change the language level to **11**.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œè¿›å…¥ *Modules* å¹¶å°†è¯­è¨€çº§åˆ«æ›´æ”¹ä¸º **11**ã€‚
- en: '![](../Images/cb22316ceadf7e852814bf460bb8b45b.png)'
  id: totrans-92
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/cb22316ceadf7e852814bf460bb8b45b.png)'
- en: Module settings (by author)
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: æ¨¡å—è®¾ç½®ï¼ˆç”±ä½œè€…æä¾›ï¼‰
- en: Rename and reduce main class
  id: totrans-94
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: é‡å‘½åå¹¶å‡å°‘ä¸»ç±»
- en: Rename the generated class `DataStreamJob` simply to `App`.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: å°†ç”Ÿæˆçš„ç±» `DataStreamJob` ç®€å•åœ°é‡å‘½åä¸º `App`ã€‚
- en: '![](../Images/276f020259185a0efb176433f7c80f0e.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/276f020259185a0efb176433f7c80f0e.png)'
- en: Rename class (by author)
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: é‡å‘½åç±»ï¼ˆç”±ä½œè€…æä¾›ï¼‰
- en: 'Then replace the code with the following content:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åç”¨ä»¥ä¸‹å†…å®¹æ›¿æ¢ä»£ç ï¼š
- en: '[PRE2]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: With this, we create a execution environment, read data from a bounded stream
    with two elements (â€œHelloâ€ and â€œWorldâ€), print the elements to STDOUT and execute
    the application with the name â€œFlitchâ€.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™ä¸ªï¼Œæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªæ‰§è¡Œç¯å¢ƒï¼Œä»ä¸€ä¸ªåŒ…å«ä¸¤ä¸ªå…ƒç´ ï¼ˆâ€œHelloâ€å’Œâ€œWorldâ€ï¼‰çš„æœ‰ç•Œæµä¸­è¯»å–æ•°æ®ï¼Œå°†å…ƒç´ æ‰“å°åˆ° STDOUTï¼Œå¹¶ä»¥â€œFlitchâ€ä½œä¸ºåç§°æ‰§è¡Œåº”ç”¨ç¨‹åºã€‚
- en: '**But for now, letâ€™s not start the application since more adjustments are necessary.**'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: '**ä½†ç°åœ¨ï¼Œè®©æˆ‘ä»¬å…ˆä¸å¯åŠ¨åº”ç”¨ç¨‹åºï¼Œå› ä¸ºè¿˜éœ€è¦åšæ›´å¤šçš„è°ƒæ•´ã€‚**'
- en: '`pom.xml` project settings'
  id: totrans-102
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '`pom.xml` é¡¹ç›®è®¾ç½®'
- en: The `pom.xml` file in Maven is a configuration file that serves as the projectâ€™s
    blueprint. It stands for â€œProject Object Modelâ€ and contains information and configurations
    for the project, such as project dependencies, project version, build plugins,
    and goals, among others. Maven uses this file to understand the project structure,
    manage dependencies, and perform various tasks during the build process.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: Maven ä¸­çš„ `pom.xml` æ–‡ä»¶æ˜¯ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œä½œä¸ºé¡¹ç›®çš„è“å›¾ã€‚å®ƒä»£è¡¨äº†â€œé¡¹ç›®å¯¹è±¡æ¨¡å‹â€ï¼ˆProject Object Modelï¼‰ï¼Œå¹¶åŒ…å«äº†é¡¹ç›®çš„ç›¸å…³ä¿¡æ¯å’Œé…ç½®ï¼Œå¦‚é¡¹ç›®ä¾èµ–é¡¹ã€é¡¹ç›®ç‰ˆæœ¬ã€æ„å»ºæ’ä»¶å’Œç›®æ ‡ç­‰ã€‚Maven
    ä½¿ç”¨è¿™ä¸ªæ–‡ä»¶æ¥ç†è§£é¡¹ç›®ç»“æ„ã€ç®¡ç†ä¾èµ–é¡¹ï¼Œå¹¶åœ¨æ„å»ºè¿‡ç¨‹ä¸­æ‰§è¡Œå„ç§ä»»åŠ¡ã€‚
- en: Letâ€™s change the following aspects, so that we use the desired Java version,
    have a proper name and adjust the main class of the demo.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬æ›´æ”¹ä»¥ä¸‹å‡ ä¸ªæ–¹é¢ï¼Œä»¥ä¾¿ä½¿ç”¨æ‰€éœ€çš„ Java ç‰ˆæœ¬ï¼Œæ‹¥æœ‰ä¸€ä¸ªåˆé€‚çš„åç§°ï¼Œå¹¶è°ƒæ•´ç¤ºä¾‹çš„ä¸»ç±»ã€‚
- en: '**Set target Java version to 11 (LTS):**'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '**å°†ç›®æ ‡ Java ç‰ˆæœ¬è®¾ç½®ä¸º 11ï¼ˆLTSï¼‰ï¼š**'
- en: '[PRE3]'
  id: totrans-106
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '**Change name:**'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ›´æ”¹åç§°ï¼š**'
- en: '[PRE4]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '**Change main class:**'
  id: totrans-109
  prefs: []
  type: TYPE_NORMAL
  zh: '**æ›´æ”¹ä¸»ç±»ï¼š**'
- en: '[PRE5]'
  id: totrans-110
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Run configuration
  id: totrans-111
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: è¿è¡Œé…ç½®
- en: Run configurations in IntelliJ are settings that specify how to launch and debug
    your project. They allow you to customize aspects like the main class to run,
    program arguments, and environment variables. You can create multiple configurations
    to easily switch between different running or debugging scenarios, streamlining
    your development process.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: IntelliJ ä¸­çš„è¿è¡Œé…ç½®æ˜¯æŒ‡å®šå¦‚ä½•å¯åŠ¨å’Œè°ƒè¯•é¡¹ç›®çš„è®¾ç½®ã€‚å®ƒä»¬å…è®¸ä½ è‡ªå®šä¹‰ä¸»ç±»ã€ç¨‹åºå‚æ•°å’Œç¯å¢ƒå˜é‡ç­‰æ–¹é¢ã€‚ä½ å¯ä»¥åˆ›å»ºå¤šä¸ªé…ç½®ï¼Œè½»æ¾åœ¨ä¸åŒçš„è¿è¡Œæˆ–è°ƒè¯•åœºæ™¯ä¹‹é—´åˆ‡æ¢ï¼Œä»è€Œç®€åŒ–å¼€å‘è¿‡ç¨‹ã€‚
- en: But before we create one, letâ€™s see what happens if we run our application.
    So without further ado, letâ€™s start our main class `App` by simply clicking the
    play button.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†åœ¨åˆ›å»ºä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆçœ‹çœ‹è¿è¡Œåº”ç”¨ç¨‹åºæ—¶ä¼šå‘ç”Ÿä»€ä¹ˆã€‚æ‰€ä»¥ï¼Œä¸å†å¤šè¯´ï¼Œè®©æˆ‘ä»¬é€šè¿‡ç®€å•åœ°ç‚¹å‡»æ’­æ”¾æŒ‰é’®æ¥å¯åŠ¨ä¸»ç±» `App`ã€‚
- en: '**The application will fail, this is on purpose.**'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: '**åº”ç”¨ç¨‹åºå°†å¤±è´¥ï¼Œè¿™æ˜¯æ•…æ„çš„ã€‚**'
- en: '![](../Images/fa265b3c95e57d588ad77d2be842ab5e.png)'
  id: totrans-115
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/fa265b3c95e57d588ad77d2be842ab5e.png)'
- en: Run the app (by author)
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: è¿è¡Œåº”ç”¨ç¨‹åºï¼ˆä½œè€…ï¼‰
- en: 'The reason it failed is a `java.lang.NoClassDefFoundError`. This is, because
    we have dependencies defined in our `pom.xml`, which are not in the classpath
    of Java when running the application:'
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒå¤±è´¥çš„åŸå› æ˜¯ `java.lang.NoClassDefFoundError`ã€‚è¿™æ˜¯å› ä¸ºæˆ‘ä»¬åœ¨ `pom.xml` ä¸­å®šä¹‰äº†ä¾èµ–é¡¹ï¼Œè€Œåœ¨è¿è¡Œåº”ç”¨ç¨‹åºæ—¶ï¼ŒJava
    çš„ç±»è·¯å¾„ä¸­æ²¡æœ‰è¿™äº›ä¾èµ–é¡¹ï¼š
- en: '[PRE6]'
  id: totrans-118
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The relevant part is the **scope**. In Maven, the scope of a dependency specifies
    the visibility and the lifecycle of the dependency in relation to the project.
    It determines how and when a dependency is included in your project, affecting
    classpath and module builds.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: ç›¸å…³éƒ¨åˆ†æ˜¯ **èŒƒå›´**ã€‚åœ¨ Maven ä¸­ï¼Œä¾èµ–é¡¹çš„èŒƒå›´æŒ‡å®šäº†ä¾èµ–é¡¹ç›¸å¯¹äºé¡¹ç›®çš„å¯è§æ€§å’Œç”Ÿå‘½å‘¨æœŸã€‚å®ƒå†³å®šäº†ä¾èµ–é¡¹å¦‚ä½•ä»¥åŠä½•æ—¶è¢«åŒ…å«åˆ°é¡¹ç›®ä¸­ï¼Œä»è€Œå½±å“ç±»è·¯å¾„å’Œæ¨¡å—æ„å»ºã€‚
- en: Scope `provided` means that the dependencies are expected to be provided by
    the JDK or the runtime environment when executing or deploying your project, thus
    not packaged.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: '`provided` èŒƒå›´æ„å‘³ç€åœ¨æ‰§è¡Œæˆ–éƒ¨ç½²é¡¹ç›®æ—¶ï¼ŒæœŸæœ›ç”± JDK æˆ–è¿è¡Œæ—¶ç¯å¢ƒæä¾›ä¾èµ–é¡¹ï¼Œå› æ­¤ä¸è¿›è¡Œæ‰“åŒ…ã€‚'
- en: When using Flink in a production environment, you will have a running Flink
    cluster somewhere, either on-premises or in the cloud. This environment already
    has the required dependencies in the classpath per default and we submit our application
    JAR to this production cluster. Thus, we do not need to package these dependencies
    with the JAR.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: å½“åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ Flink æ—¶ï¼Œä½ ä¼šåœ¨æŸå¤„ï¼ˆæ— è®ºæ˜¯æœ¬åœ°è¿˜æ˜¯äº‘ç«¯ï¼‰è¿è¡Œ Flink é›†ç¾¤ã€‚è¿™ä¸ªç¯å¢ƒé»˜è®¤å·²ç»å°†æ‰€éœ€çš„ä¾èµ–é¡¹åŒ…å«åœ¨ç±»è·¯å¾„ä¸­ï¼Œå¹¶ä¸”æˆ‘ä»¬å°†åº”ç”¨ç¨‹åº
    JAR æäº¤åˆ°è¿™ä¸ªç”Ÿäº§é›†ç¾¤ã€‚å› æ­¤ï¼Œæˆ‘ä»¬ä¸éœ€è¦å°†è¿™äº›ä¾èµ–é¡¹ä¸ JAR ä¸€èµ·æ‰“åŒ…ã€‚
- en: However, that also means when we run the application locally, these are not
    in the classpath. And since we have a plain Java setup, we get the `java.lang.NoClassDefFoundError`.
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œè¿™ä¹Ÿæ„å‘³ç€å½“æˆ‘ä»¬åœ¨æœ¬åœ°è¿è¡Œåº”ç”¨ç¨‹åºæ—¶ï¼Œè¿™äº›ä¾èµ–é¡¹ä¸åœ¨ç±»è·¯å¾„ä¸­ã€‚è€Œç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯çº¯ Java ç¯å¢ƒï¼Œå› æ­¤ä¼šå‡ºç° `java.lang.NoClassDefFoundError`ã€‚
- en: There are multiple solutions for this problem. We could define different profiles
    with different scopes in Maven, so that the scope is different in our local environment.
  id: totrans-123
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªé—®é¢˜æœ‰å¤šç§è§£å†³æ–¹æ¡ˆã€‚æˆ‘ä»¬å¯ä»¥åœ¨ Maven ä¸­å®šä¹‰ä¸åŒçš„æ„å»ºé…ç½®æ–‡ä»¶ï¼ˆprofileï¼‰ï¼Œä¸ºä¸åŒçš„ç¯å¢ƒè®¾ç½®ä¸åŒçš„èŒƒå›´ï¼Œä»¥ä¾¿åœ¨æœ¬åœ°ç¯å¢ƒä¸­ä½¿ç”¨ä¸åŒçš„èŒƒå›´ã€‚
- en: But since we are using IntelliJ, there is also a way to solve it with the run
    configuration. Click on *Run* â†’ *Edit Configurationsâ€¦* and then click on the **+**
    or *Add new* to create a new run configuration. From the list, select â€œApplicationâ€
    and name it â€œFlitchâ€.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†ç”±äºæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ IntelliJï¼Œä¹Ÿæœ‰ä¸€ç§æ–¹æ³•å¯ä»¥é€šè¿‡è¿è¡Œé…ç½®æ¥è§£å†³æ­¤é—®é¢˜ã€‚ç‚¹å‡» *Run* â†’ *Edit Configurationsâ€¦*ï¼Œç„¶åç‚¹å‡»
    **+** æˆ– *Add new* åˆ›å»ºä¸€ä¸ªæ–°çš„è¿è¡Œé…ç½®ã€‚åœ¨åˆ—è¡¨ä¸­é€‰æ‹©â€œApplicationâ€å¹¶å°†å…¶å‘½åä¸ºâ€œFlitchâ€ã€‚
- en: Ensure to select Java 11 and enter `de.vojay.flitch.App` as your main class.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: ç¡®ä¿é€‰æ‹© Java 11ï¼Œå¹¶è¾“å…¥ `de.vojay.flitch.App` ä½œä¸ºä¸»ç±»ã€‚
- en: To solve the `java.lang.NoClassDefFoundError`, we now have to enable the option
    *Add dependencies with â€œprovidedâ€ scope to classpath*.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†è§£å†³`java.lang.NoClassDefFoundError`ï¼Œæˆ‘ä»¬ç°åœ¨éœ€è¦å¯ç”¨é€‰é¡¹*å°†â€œprovidedâ€èŒƒå›´çš„ä¾èµ–é¡¹æ·»åŠ åˆ°ç±»è·¯å¾„*ã€‚
- en: '![](../Images/341fbe9ef1b6dd2e3f33420ce528f6bd.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/341fbe9ef1b6dd2e3f33420ce528f6bd.png)'
- en: Run configuration (by author)
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: è¿è¡Œé…ç½®ï¼ˆä½œè€…ï¼‰
- en: Your run configuration is ready, lets click â€œRunâ€ and enjoy our first streaming
    application.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ çš„è¿è¡Œé…ç½®å·²å‡†å¤‡å¥½ï¼Œè®©æˆ‘ä»¬ç‚¹å‡»â€œè¿è¡Œâ€å¹¶äº«å—æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæµåº”ç”¨ç¨‹åºã€‚
- en: It works ğŸ‰. The streaming application will run until the bounded stream is processed.
    You will also find the output of the two elements of your stream in the logs.
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: å®ƒè¿è¡Œäº†ğŸ‰ã€‚è¯¥æµåº”ç”¨ç¨‹åºå°†åœ¨å¤„ç†å®Œè¾¹ç•Œæµä¹‹å‰ä¸€ç›´è¿è¡Œã€‚ä½ è¿˜å°†åœ¨æ—¥å¿—ä¸­æ‰¾åˆ°ä½ æµä¸­çš„ä¸¤ä¸ªå…ƒç´ çš„è¾“å‡ºã€‚
- en: '![](../Images/0718a522b627323d624d088c065c7b98.png)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/0718a522b627323d624d088c065c7b98.png)'
- en: First successful run (by author)
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€æ¬¡æˆåŠŸè¿è¡Œï¼ˆä½œè€…ï¼‰
- en: Local Flink Web UI
  id: totrans-133
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æœ¬åœ°Flink Web UI
- en: Thereâ€™s still one thing before we turn our attention to the fun part. The Flink
    Web UI is a user-friendly interface that allows developers and administrators
    to monitor and manage their Apache Flink applications. It provides a real-time
    overview of running or completed jobs, displays metrics such as throughput and
    latency, and offers detailed insights into the jobâ€™s execution plan. Essentially,
    itâ€™s a convenient dashboard where you can visualize the performance and status
    of your Flink applications, making the process of debugging, optimizing, and managing
    your streaming or batch processing jobs much easier and more intuitive.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬å°†æ³¨æ„åŠ›è½¬å‘æœ‰è¶£çš„éƒ¨åˆ†ä¹‹å‰ï¼Œè¿˜æœ‰ä¸€ä»¶äº‹éœ€è¦åšã€‚Flink Web UIæ˜¯ä¸€ä¸ªç”¨æˆ·å‹å¥½çš„ç•Œé¢ï¼Œå…è®¸å¼€å‘äººå‘˜å’Œç®¡ç†å‘˜ç›‘æ§å’Œç®¡ç†ä»–ä»¬çš„Apache Flinkåº”ç”¨ç¨‹åºã€‚å®ƒæä¾›äº†æ­£åœ¨è¿è¡Œæˆ–å·²å®Œæˆä½œä¸šçš„å®æ—¶æ¦‚è§ˆï¼Œæ˜¾ç¤ºäº†ååé‡å’Œå»¶è¿Ÿç­‰åº¦é‡æŒ‡æ ‡ï¼Œå¹¶æä¾›äº†ä½œä¸šæ‰§è¡Œè®¡åˆ’çš„è¯¦ç»†æ´å¯Ÿã€‚åŸºæœ¬ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ªæ–¹ä¾¿çš„ä»ªè¡¨ç›˜ï¼Œä½ å¯ä»¥åœ¨å…¶ä¸­å¯è§†åŒ–Flinkåº”ç”¨ç¨‹åºçš„æ€§èƒ½å’ŒçŠ¶æ€ï¼Œä½¿å¾—è°ƒè¯•ã€ä¼˜åŒ–å’Œç®¡ç†æµå¤„ç†æˆ–æ‰¹å¤„ç†ä½œä¸šçš„è¿‡ç¨‹å˜å¾—æ›´åŠ ç®€å•å’Œç›´è§‚ã€‚
- en: When you run a Flink application locally like in this example, you usually do
    not have the Flink Web UI enabled. However, there is a way to also get the Flink
    Web UI in a local execution environment. I find this useful, especially to get
    an idea of the execution plan before running streaming applications in production.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ä½ åƒæœ¬ä¾‹ä¸­é‚£æ ·åœ¨æœ¬åœ°è¿è¡ŒFlinkåº”ç”¨ç¨‹åºæ—¶ï¼Œé€šå¸¸æ²¡æœ‰å¯ç”¨Flink Web UIã€‚ç„¶è€Œï¼Œæœ‰ä¸€ç§æ–¹æ³•å¯ä»¥åœ¨æœ¬åœ°æ‰§è¡Œç¯å¢ƒä¸­ä¹Ÿè·å¾—Flink Web UIã€‚æˆ‘è§‰å¾—è¿™å¾ˆæœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨è¿è¡Œç”Ÿäº§ç¯å¢ƒä¸­çš„æµåº”ç”¨ç¨‹åºä¹‹å‰ï¼Œèƒ½å¤Ÿäº†è§£æ‰§è¡Œè®¡åˆ’ã€‚
- en: 'Letâ€™s start by adding a dependency to the `pom.xml`:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬ä»æ·»åŠ ä¾èµ–é¡¹åˆ°`pom.xml`å¼€å§‹ï¼š
- en: '[PRE7]'
  id: totrans-137
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'And slightly change the code in our main class `App.java`:'
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: å¹¶ç¨å¾®ä¿®æ”¹æˆ‘ä»¬ä¸»ç±»`App.java`ä¸­çš„ä»£ç ï¼š
- en: '[PRE8]'
  id: totrans-139
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: The streaming application will now process a sequence of numbers, so that it
    will not finish immediately. Also with `createLocalEnvironmentWithWebUI` we will
    have the Flink Web UI available locally on port `8081` while the application is
    running.
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨ï¼Œæµåº”ç”¨ç¨‹åºå°†å¤„ç†ä¸€ç³»åˆ—æ•°å­—ï¼Œå› æ­¤å®ƒä¸ä¼šç«‹å³å®Œæˆã€‚æ­¤å¤–ï¼Œä½¿ç”¨`createLocalEnvironmentWithWebUI`ï¼Œæˆ‘ä»¬å°†åœ¨åº”ç”¨ç¨‹åºè¿è¡Œæ—¶é€šè¿‡ç«¯å£`8081`åœ¨æœ¬åœ°æä¾›Flink
    Web UIã€‚
- en: Start again and open [http://localhost:8081/](http://localhost:8081/) in your
    browser. Apart from various metrics, you can also see the execution plan of your
    Flink application.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: é‡æ–°å¯åŠ¨å¹¶åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€[http://localhost:8081/](http://localhost:8081/)ã€‚é™¤äº†å„ç§åº¦é‡æŒ‡æ ‡ï¼Œä½ è¿˜å¯ä»¥çœ‹åˆ°ä½ çš„Flinkåº”ç”¨ç¨‹åºçš„æ‰§è¡Œè®¡åˆ’ã€‚
- en: '![](../Images/d241e32e3d4e642fcb33f54117488f69.png)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d241e32e3d4e642fcb33f54117488f69.png)'
- en: Flink Web UI (by author)
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: Flink Web UIï¼ˆä½œè€…ï¼‰
- en: Now we have a proper local setup and can get started connecting our application
    to Twitch and run sentiment analysis on chat messages.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªåˆé€‚çš„æœ¬åœ°è®¾ç½®ï¼Œå¯ä»¥å¼€å§‹å°†æˆ‘ä»¬çš„åº”ç”¨ç¨‹åºè¿æ¥åˆ°Twitchå¹¶å¯¹èŠå¤©æ¶ˆæ¯è¿›è¡Œæƒ…æ„Ÿåˆ†æã€‚
- en: Read the Twitch chat
  id: totrans-145
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: é˜…è¯»TwitchèŠå¤©
- en: '[Twitch](https://www.twitch.tv/), the leading live streaming platform for gamers,
    offers a comprehensive API and a chat feature thatâ€™s deeply integrated with the
    Internet Relay Chat (IRC) protocol.'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: '[Twitch](https://www.twitch.tv/)ï¼Œé¢†å…ˆçš„æ¸¸æˆç©å®¶ç›´æ’­å¹³å°ï¼Œæä¾›å…¨é¢çš„APIå’Œä¸€ä¸ªä¸äº’è”ç½‘ä¸­ç»§èŠå¤©ï¼ˆIRCï¼‰åè®®æ·±åº¦é›†æˆçš„èŠå¤©åŠŸèƒ½ã€‚'
- en: '![](../Images/31fb16b46f763b431e6eb957b698c3f5.png)'
  id: totrans-147
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/31fb16b46f763b431e6eb957b698c3f5.png)'
- en: Photo by [Caspar Camille Rubin](https://unsplash.com/@casparrubin?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡æ¥è‡ª[Caspar Camille Rubin](https://unsplash.com/@casparrubin?utm_source=medium&utm_medium=referral)äº[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: At its core, the Twitch API allows applications to interact with Twitchâ€™s data.
    This includes retrieving information about live streams, VODs (Video on Demand),
    users, and game details. The API is RESTful, meaning it follows the architectural
    style of the web, making it straightforward to use with common HTTP requests.
    Developers can use this API to create custom experiences, such as displaying live
    stream stats, searching for channels, or even automating stream setups.
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: Twitch API çš„æ ¸å¿ƒåŠŸèƒ½æ˜¯å…è®¸åº”ç”¨ç¨‹åºä¸ Twitch çš„æ•°æ®è¿›è¡Œäº¤äº’ã€‚è¿™åŒ…æ‹¬è·å–å…³äºç›´æ’­ã€ç‚¹æ’­è§†é¢‘ï¼ˆVODï¼‰ã€ç”¨æˆ·å’Œæ¸¸æˆè¯¦æƒ…çš„ä¿¡æ¯ã€‚API æ˜¯
    RESTful çš„ï¼Œæ„å‘³ç€å®ƒéµå¾ª Web çš„æ¶æ„é£æ ¼ï¼Œä½¿ç”¨å¸¸è§çš„ HTTP è¯·æ±‚éå¸¸ç®€å•ã€‚å¼€å‘äººå‘˜å¯ä»¥ä½¿ç”¨æ­¤ API åˆ›å»ºè‡ªå®šä¹‰ä½“éªŒï¼Œä¾‹å¦‚æ˜¾ç¤ºç›´æ’­ç»Ÿè®¡ä¿¡æ¯ã€æœç´¢é¢‘é“ï¼Œç”šè‡³è‡ªåŠ¨åŒ–æµè®¾ç½®ã€‚
- en: The Twitch chat is a vital aspect of the Twitch experience, allowing viewers
    to interact with streamers and other viewers in real-time. Underneath the modern
    interface of Twitch Chat lies the Internet Relay Chat (IRC) protocol, a staple
    of online communication since the late 80s. This reliance on IRC allows for a
    wide range of possibilities when it comes to reading and interacting with chat
    through custom applications.
  id: totrans-150
  prefs: []
  type: TYPE_NORMAL
  zh: Twitch èŠå¤©æ˜¯ Twitch ä½“éªŒçš„ä¸€ä¸ªé‡è¦æ–¹é¢ï¼Œå®ƒå…è®¸è§‚ä¼—ä¸ä¸»æ’­å’Œå…¶ä»–è§‚ä¼—å®æ—¶äº’åŠ¨ã€‚åœ¨ Twitch èŠå¤©çš„ç°ä»£ç•Œé¢èƒŒåæ˜¯äº’è”ç½‘ä¸­ç»§èŠå¤©ï¼ˆIRCï¼‰åè®®ï¼Œè‡ª
    80 å¹´ä»£æœ«ä»¥æ¥ä¸€ç›´æ˜¯åœ¨çº¿é€šä¿¡çš„ä¸€ä¸ªé‡è¦ç»„æˆéƒ¨åˆ†ã€‚å¯¹ IRC çš„ä¾èµ–ä½¿å¾—é€šè¿‡è‡ªå®šä¹‰åº”ç”¨ç¨‹åºè¯»å–å’Œä¸èŠå¤©äº’åŠ¨æ—¶ï¼Œæ‹¥æœ‰äº†å¹¿æ³›çš„å¯èƒ½æ€§ã€‚
- en: For our purpose, we simply want to read the chat, without writing messages ourselves.
    Fortunately, Twitch allows anonymous connections to the chat for read-only application
    use-cases.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºæˆ‘ä»¬çš„ç›®çš„ï¼Œæˆ‘ä»¬åªéœ€è¦è¯»å–èŠå¤©å†…å®¹ï¼Œè€Œä¸éœ€è¦è‡ªå·±å‘é€æ¶ˆæ¯ã€‚å¹¸è¿çš„æ˜¯ï¼ŒTwitch å…è®¸åŒ¿åè¿æ¥åˆ°èŠå¤©ï¼Œä»¥ä¾›åªè¯»åº”ç”¨åœºæ™¯ä½¿ç”¨ã€‚
- en: 'To reduce the implementation effort, we will use an existing library to interact
    with Twitch: Twitch4J. Twitch4J is a modern Java library designed to simplify
    the integration with Twitchâ€™s features, including its API, Chat (via IRC), PubSub
    (for real-time notifications), and Webhooks. Essentially, itâ€™s a powerful toolkit
    for Java developers looking to interact with Twitch services without having to
    directly manage low-level details like HTTP requests or IRC protocol handling.'
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å‡å°‘å®ç°å·¥ä½œé‡ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ç°æœ‰çš„åº“ä¸ Twitch è¿›è¡Œäº¤äº’ï¼šTwitch4Jã€‚Twitch4J æ˜¯ä¸€ä¸ªç°ä»£ Java åº“ï¼Œæ—¨åœ¨ç®€åŒ–ä¸ Twitch
    ç‰¹æ€§ï¼ˆåŒ…æ‹¬å…¶ APIã€èŠå¤©ï¼ˆé€šè¿‡ IRCï¼‰ã€PubSubï¼ˆå®æ—¶é€šçŸ¥ï¼‰å’Œ Webhooksï¼‰çš„é›†æˆã€‚æœ¬è´¨ä¸Šï¼Œå®ƒæ˜¯ä¸€ä¸ªå¼ºå¤§çš„å·¥å…·åŒ…ï¼Œä¾› Java å¼€å‘äººå‘˜ä¸ Twitch
    æœåŠ¡è¿›è¡Œäº¤äº’ï¼Œè€Œæ— éœ€ç›´æ¥ç®¡ç†åƒ HTTP è¯·æ±‚æˆ– IRC åè®®å¤„ç†è¿™æ ·çš„ä½çº§ç»†èŠ‚ã€‚
- en: Add Twitch4J dependency
  id: totrans-153
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ·»åŠ  Twitch4J ä¾èµ–
- en: 'The first step is to add Twitch4J as a dependency to the `pom.xml`:'
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€æ­¥æ˜¯å°† Twitch4J ä½œä¸ºä¾èµ–æ·»åŠ åˆ° `pom.xml` ä¸­ï¼š
- en: '[PRE9]'
  id: totrans-155
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Create POJO for Twitch chat messages
  id: totrans-156
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä¸º Twitch èŠå¤©æ¶ˆæ¯åˆ›å»º POJO
- en: We would like to have a lightweight, serializable Plain Old Java Object (POJO)
    in order to represent Twitch chat messages within our application. We are interested
    in the channel where the message was written, the user and the content itself.
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¸Œæœ›æœ‰ä¸€ä¸ªè½»é‡çº§ã€å¯åºåˆ—åŒ–çš„æ™®é€š Java å¯¹è±¡ï¼ˆPOJOï¼‰ï¼Œç”¨æ¥åœ¨æˆ‘ä»¬çš„åº”ç”¨ä¸­è¡¨ç¤º Twitch èŠå¤©æ¶ˆæ¯ã€‚æˆ‘ä»¬æ„Ÿå…´è¶£çš„æ˜¯æ¶ˆæ¯å‘å¸ƒçš„é¢‘é“ã€ç”¨æˆ·ä»¥åŠæ¶ˆæ¯å†…å®¹æœ¬èº«ã€‚
- en: 'Create a new class `TwitchMessage` with the following implementation:'
  id: totrans-158
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ›å»ºä¸€ä¸ªæ–°çš„ç±» `TwitchMessage`ï¼Œå¹¶å®ç°ä»¥ä¸‹å†…å®¹ï¼š
- en: '[PRE10]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: 'As a side note: You do not have to write basic functions like `toString()`
    on your own, you can use IntelliJ to generate it for you. Simply click on *Code*
    â†’ *Generateâ€¦* â†’ `toString()` to get the result above.'
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: æ—ç™½ï¼šä½ ä¸å¿…è‡ªå·±ç¼–å†™åƒ `toString()` è¿™æ ·çš„åŸºæœ¬å‡½æ•°ï¼Œä½ å¯ä»¥ä½¿ç”¨ IntelliJ è®©å®ƒä¸ºä½ ç”Ÿæˆã€‚åªéœ€ç‚¹å‡» *ä»£ç * â†’ *ç”Ÿæˆâ€¦* â†’ `toString()`
    å³å¯å¾—åˆ°ä¸Šé¢çš„ç»“æœã€‚
- en: '![](../Images/b3202075c87edca8319d6db7ae8379d1.png)'
  id: totrans-161
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b3202075c87edca8319d6db7ae8379d1.png)'
- en: Generate toString (by author)
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: ç”Ÿæˆ toStringï¼ˆç”±ä½œè€…æä¾›ï¼‰
- en: Create custom Twitch source function for Flink
  id: totrans-163
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä¸º Flink åˆ›å»ºè‡ªå®šä¹‰çš„ Twitch æºå‡½æ•°
- en: We will now use Twitch4J to implement a custom Twitch source function for Flink.
    The source function will generate an unbounded stream of data, in this case Twitch
    chat messages. That also means, the application will not terminate until we explicitly
    stop it.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç°åœ¨å°†ä½¿ç”¨ Twitch4J æ¥ä¸º Flink å®ç°ä¸€ä¸ªè‡ªå®šä¹‰çš„ Twitch æºå‡½æ•°ã€‚è¯¥æºå‡½æ•°å°†ç”Ÿæˆä¸€ä¸ªæ— ç•Œçš„æ•°æ®æµï¼Œåœ¨æœ¬ä¾‹ä¸­æ˜¯ Twitch èŠå¤©æ¶ˆæ¯ã€‚è¿™ä¹Ÿæ„å‘³ç€ï¼Œç›´åˆ°æˆ‘ä»¬æ˜ç¡®åœæ­¢å®ƒï¼Œåº”ç”¨ç¨‹åºå°†ä¸ä¼šç»ˆæ­¢ã€‚
- en: 'The Twitch client can be built like this:'
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: Twitch å®¢æˆ·ç«¯å¯ä»¥è¿™æ ·æ„å»ºï¼š
- en: '[PRE11]'
  id: totrans-166
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'With this example we get a `client` that joins the Twitch channel called *vojay*.
    **Yes, I once was an active streamer myself**. Fun fact: I teached people game
    development and general software development in my streams. I also enjoyed playing
    retro games live on stream ğŸ®. But that is a different topic, letâ€™s focus on the
    project ğŸ˜‰.'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ä¸ªç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†è·å¾—ä¸€ä¸ª `client`ï¼Œå®ƒåŠ å…¥åä¸º *vojay* çš„ Twitch é¢‘é“ã€‚**æ˜¯çš„ï¼Œæˆ‘æ›¾ç»ä¹Ÿæ˜¯ä¸€ä½æ´»è·ƒçš„ä¸»æ’­**ã€‚æœ‰è¶£çš„æ˜¯ï¼šæˆ‘åœ¨æˆ‘çš„ç›´æ’­ä¸­æ•™äººä»¬æ¸¸æˆå¼€å‘å’Œä¸€èˆ¬çš„è½¯ä»¶å¼€å‘ã€‚æˆ‘è¿˜å–œæ¬¢åœ¨ç›´æ’­ä¸­ç©å¤å¤æ¸¸æˆ
    ğŸ®ã€‚ä½†é‚£æ˜¯å¦ä¸€ä¸ªè¯é¢˜ï¼Œè®©æˆ‘ä»¬ä¸“æ³¨äºè¿™ä¸ªé¡¹ç›® ğŸ˜‰ã€‚
- en: You should also notice, that there is no authentication in the example above.
    As said before, since we only want to read the chat, no authentication is needed.
    In fact, we simply join an IRC chat anonymously and read the messages.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: ä½ è¿˜åº”è¯¥æ³¨æ„åˆ°ï¼Œåœ¨ä¸Šé¢çš„ç¤ºä¾‹ä¸­æ²¡æœ‰è¿›è¡Œèº«ä»½éªŒè¯ã€‚æ­£å¦‚å‰é¢æ‰€è¯´ï¼Œç”±äºæˆ‘ä»¬åªæƒ³è¯»å–èŠå¤©ï¼Œå› æ­¤ä¸éœ€è¦èº«ä»½éªŒè¯ã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬åªæ˜¯åŒ¿ååŠ å…¥ IRC èŠå¤©å¹¶è¯»å–æ¶ˆæ¯ã€‚
- en: Since we want to establish the connection to the Twitch chat only once per source
    instance, we have to extend the abstract `RichSourceFunction` class, in order
    to be able to override the `open` function, which allows to add code for initialization.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±äºæˆ‘ä»¬å¸Œæœ›æ¯ä¸ªæºå®ä¾‹åªä¸ Twitch èŠå¤©å»ºç«‹ä¸€æ¬¡è¿æ¥ï¼Œå› æ­¤æˆ‘ä»¬å¿…é¡»æ‰©å±•æŠ½è±¡ç±» `RichSourceFunction`ï¼Œä»¥ä¾¿èƒ½å¤Ÿé‡å†™ `open`
    å‡½æ•°ï¼Œå…è®¸åœ¨æ­¤å¤„æ·»åŠ åˆå§‹åŒ–ä»£ç ã€‚
- en: '[PRE12]'
  id: totrans-170
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: We also use our `TwitchMessage` POJO for the generic parameter to tell Flink
    that this source generates elements of type `TwitchMessage`.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿˜ä½¿ç”¨ `TwitchMessage` POJO ä½œä¸ºé€šç”¨å‚æ•°ï¼Œå‘Šè¯‰ Flink è¿™ä¸ªæºä¼šç”Ÿæˆ `TwitchMessage` ç±»å‹çš„å…ƒç´ ã€‚
- en: Furthermore, want to be able to pass an array of Twitch channels we want to
    listen on in the constructor of the source function.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œæˆ‘ä»¬å¸Œæœ›èƒ½å¤Ÿåœ¨æºå‡½æ•°çš„æ„é€ å‡½æ•°ä¸­ä¼ é€’ä¸€ä¸ªæˆ‘ä»¬æƒ³è¦ç›‘å¬çš„ Twitch é¢‘é“æ•°ç»„ã€‚
- en: To control the state of our source function, we use a `boolean` variable called
    `running`, which we set to `true` in the `open` function.
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†æ§åˆ¶æˆ‘ä»¬æºå‡½æ•°çš„çŠ¶æ€ï¼Œæˆ‘ä»¬ä½¿ç”¨ä¸€ä¸ªåä¸º `running` çš„ `boolean` å˜é‡ï¼Œå¹¶åœ¨ `open` å‡½æ•°ä¸­å°†å…¶è®¾ç½®ä¸º `true`ã€‚
- en: 'Based on this, the constructor and `open` function look like the following:'
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: åŸºäºæ­¤ï¼Œæ„é€ å‡½æ•°å’Œ `open` å‡½æ•°çœ‹èµ·æ¥å¦‚ä¸‹ï¼š
- en: '[PRE13]'
  id: totrans-175
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: With that, we have all we need to consume messages and emit them for further
    processing as a stream of data.
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ ·ï¼Œæˆ‘ä»¬å°±æ‹¥æœ‰äº†æ‰€éœ€çš„ä¸€åˆ‡ï¼Œå¯ä»¥æ¶ˆè´¹æ¶ˆæ¯å¹¶å°†å…¶ä½œä¸ºæ•°æ®æµè¿›è¡Œè¿›ä¸€æ­¥å¤„ç†ã€‚
- en: The `run` function of a source function is where the magic happens. Here we
    generate the data and with a given `SourceContext`, we can emit data.
  id: totrans-177
  prefs: []
  type: TYPE_NORMAL
  zh: æºå‡½æ•°çš„ `run` å‡½æ•°æ˜¯é­”æ³•å‘ç”Ÿçš„åœ°æ–¹ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬ç”Ÿæˆæ•°æ®ï¼Œå¹¶é€šè¿‡ç»™å®šçš„ `SourceContext`ï¼Œæˆ‘ä»¬å¯ä»¥å‘å°„æ•°æ®ã€‚
- en: The `SimpleEventHandler` provided by Twitch4J can be used to react on specific
    messages.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: Twitch4J æä¾›çš„ `SimpleEventHandler` å¯ä»¥ç”¨æ¥å“åº”ç‰¹å®šçš„æ¶ˆæ¯ã€‚
- en: Whenever we get an event of type `IRCMessageEvent`, which is a message in the
    Twitch chat, we generate an instance of our POJO and emit it to the stream via
    the context.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯å½“æˆ‘ä»¬æ¥æ”¶åˆ° `IRCMessageEvent` ç±»å‹çš„äº‹ä»¶ï¼Œä¹Ÿå°±æ˜¯ä¸€æ¡ Twitch èŠå¤©æ¶ˆæ¯æ—¶ï¼Œæˆ‘ä»¬å°±ä¼šç”Ÿæˆæˆ‘ä»¬çš„ POJO å®ä¾‹ï¼Œå¹¶é€šè¿‡ä¸Šä¸‹æ–‡å°†å…¶å‘å°„åˆ°æµä¸­ã€‚
- en: To ensure our source function does not terminate, we will add a loop with an
    artificial delay, which will run until our `boolean` variable `running` is set
    to `false`. This will be done in the `cancel` function, which is called by the
    Flink environment on shutdown.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ç¡®ä¿æˆ‘ä»¬çš„æºå‡½æ•°ä¸ä¼šç»ˆæ­¢ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªå¸¦æœ‰äººå·¥å»¶è¿Ÿçš„å¾ªç¯ï¼Œç›´åˆ°æˆ‘ä»¬çš„ `boolean` å˜é‡ `running` è¢«è®¾ç½®ä¸º `false`ã€‚è¿™å°†åœ¨
    `cancel` å‡½æ•°ä¸­å®Œæˆï¼Œè¯¥å‡½æ•°åœ¨ Flink ç¯å¢ƒå…³é—­æ—¶è¢«è°ƒç”¨ã€‚
- en: '[PRE14]'
  id: totrans-181
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: 'Putting it all together, this is the full implementation of our custom Twitch
    source function for Flink `TwitchSource.java`:'
  id: totrans-182
  prefs: []
  type: TYPE_NORMAL
  zh: å°†æ‰€æœ‰å†…å®¹æ•´åˆåœ¨ä¸€èµ·ï¼Œè¿™æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰çš„ Twitch æºå‡½æ•°åœ¨ Flink ä¸­çš„å®Œæ•´å®ç° `TwitchSource.java`ï¼š
- en: '[PRE15]'
  id: totrans-183
  prefs: []
  type: TYPE_PRE
  zh: '[PRE15]'
- en: Use source function
  id: totrans-184
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä½¿ç”¨æºå‡½æ•°
- en: 'With this custom source function, we can already extend our streaming pipeline
    in `App.java` to simply print each chat message written to the chat:'
  id: totrans-185
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™ä¸ªè‡ªå®šä¹‰æºå‡½æ•°ï¼Œæˆ‘ä»¬å·²ç»å¯ä»¥æ‰©å±• `App.java` ä¸­çš„æµå¤„ç†ç®¡é“ï¼Œç®€å•åœ°æ‰“å°æ¯æ¡å†™å…¥èŠå¤©çš„æ¶ˆæ¯ï¼š
- en: '[PRE16]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE16]'
- en: With `addSource` we can add our source function. The elements are then processed
    by the next step in the stream, which is `print()`. With this sink, we will again
    output each element to STDOUT.
  id: totrans-187
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ `addSource` æˆ‘ä»¬å¯ä»¥æ·»åŠ æˆ‘ä»¬çš„æºå‡½æ•°ã€‚å…ƒç´ éšåå°†ç”±æµä¸­çš„ä¸‹ä¸€ä¸ªæ­¥éª¤è¿›è¡Œå¤„ç†ï¼Œè¯¥æ­¥éª¤æ˜¯ `print()`ã€‚é€šè¿‡è¿™ä¸ªæ¥æ”¶å™¨ï¼Œæˆ‘ä»¬å°†å†æ¬¡å°†æ¯ä¸ªå…ƒç´ è¾“å‡ºåˆ°
    STDOUTã€‚
- en: When running the application now and writing to the chat at [https://twitch.tv/vojay](https://www.twitch.tv/popout/vojay/chat),
    the messages will be processed and printed by our streaming application ğŸ‰.
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è¿è¡Œåº”ç”¨ç¨‹åºå¹¶åœ¨[https://twitch.tv/vojay](https://www.twitch.tv/popout/vojay/chat)çš„èŠå¤©å®¤ä¸­å‘é€æ¶ˆæ¯æ—¶ï¼Œè¿™äº›æ¶ˆæ¯å°†ç”±æˆ‘ä»¬çš„æµåª’ä½“åº”ç”¨ç¨‹åºå¤„ç†å¹¶æ‰“å°å‡ºæ¥ğŸ‰ã€‚
- en: '![](../Images/a308cbba3475c4b7ba1ab2b77ef0178c.png)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a308cbba3475c4b7ba1ab2b77ef0178c.png)'
- en: Twitch source for Flink (by author)
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: Flink çš„ Twitch æºï¼ˆä½œè€…æä¾›ï¼‰
- en: Twitch chat sentiment analysis
  id: totrans-191
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Twitch èŠå¤©æƒ…æ„Ÿåˆ†æ
- en: 'Now that we can read the Twitch chat as a stream of data, it is time to process
    each message. The basic idea is: for each Twitch message, we detect the individual
    sentences of the message and calculate the sentiment for each of the sentences.
    The output will be a structure like this:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å¯ä»¥å°† Twitch èŠå¤©ä½œä¸ºæ•°æ®æµè¯»å–ï¼Œæ˜¯æ—¶å€™å¤„ç†æ¯æ¡æ¶ˆæ¯äº†ã€‚åŸºæœ¬æ€è·¯æ˜¯ï¼šå¯¹äºæ¯æ¡ Twitch æ¶ˆæ¯ï¼Œæˆ‘ä»¬æ£€æµ‹æ¶ˆæ¯ä¸­çš„å„ä¸ªå¥å­ï¼Œå¹¶è®¡ç®—æ¯ä¸ªå¥å­çš„æƒ…æ„Ÿã€‚è¾“å‡ºå°†æ˜¯åƒè¿™æ ·çš„ç»“æ„ï¼š
- en: '[PRE17]'
  id: totrans-193
  prefs: []
  type: TYPE_PRE
  zh: '[PRE17]'
- en: 'Letâ€™s break it down: the result contains the original POJO of the Twitch chat
    message together with another tuple with 2 elements:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬æ¥åˆ†è§£ä¸€ä¸‹ï¼šç»“æœåŒ…å« Twitch èŠå¤©æ¶ˆæ¯çš„åŸå§‹ POJOï¼Œä»¥åŠå¦ä¸€ä¸ªåŒ…å« 2 ä¸ªå…ƒç´ çš„å…ƒç»„ï¼š
- en: A list of **sentiment scores** (`List<Integer>`) containing the score for each
    sentence in the message, from 0 (very negative) to 4 (very positive) and
  id: totrans-195
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ª**æƒ…æ„Ÿåˆ†æ•°åˆ—è¡¨**ï¼ˆ`List<Integer>`ï¼‰ï¼ŒåŒ…å«æ¶ˆæ¯ä¸­æ¯ä¸ªå¥å­çš„åˆ†æ•°ï¼ŒèŒƒå›´ä»0ï¼ˆéå¸¸è´Ÿé¢ï¼‰åˆ°4ï¼ˆéå¸¸ç§¯æï¼‰ã€‚
- en: 'a list of **sentiment classes** (`List<String>`) containing the readable class
    for each sentence in the message, for example: Neutral or Negative.'
  id: totrans-196
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸€ä¸ª**æƒ…æ„Ÿç±»åˆ«åˆ—è¡¨**ï¼ˆ`List<String>`ï¼‰ï¼ŒåŒ…å«æ¶ˆæ¯ä¸­æ¯ä¸ªå¥å­çš„å¯è¯»ç±»åˆ«ï¼Œä¾‹å¦‚ï¼šä¸­æ€§æˆ–è´Ÿé¢ã€‚
- en: '![](../Images/370607a498f8c196cf9fb7a621cec6e0.png)'
  id: totrans-197
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/370607a498f8c196cf9fb7a621cec6e0.png)'
- en: Sentiment map function (by author)
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: æƒ…æ„Ÿæ˜ å°„å‡½æ•°ï¼ˆä½œè€…æä¾›ï¼‰
- en: Add Stanford CoreNLP dependencies
  id: totrans-199
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ·»åŠ Stanford CoreNLPä¾èµ–é¡¹
- en: To perform the sentiment analysis, we will use the [CoreNLP library](https://stanfordnlp.github.io/CoreNLP/)
    by the [Stanford NLP Group](https://nlp.stanford.edu/). There are alternatives
    like [Apache OpenNLP](https://opennlp.apache.org/) or the [Deep Java Library](https://djl.ai/).
    In this project, we will focus on CoreNLP but feel free to create alternative
    versions using one of the other libraries, which can be a great way to learn more
    about it.
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†æ‰§è¡Œæƒ…æ„Ÿåˆ†æï¼Œæˆ‘ä»¬å°†ä½¿ç”¨[CoreNLPåº“](https://stanfordnlp.github.io/CoreNLP/)ç”±[æ–¯å¦ç¦NLPç»„](https://nlp.stanford.edu/)æä¾›ã€‚ä¹Ÿæœ‰åƒ[Apache
    OpenNLP](https://opennlp.apache.org/)æˆ–[Deep Java Library](https://djl.ai/)è¿™æ ·çš„æ›¿ä»£æ–¹æ¡ˆã€‚åœ¨è¿™ä¸ªé¡¹ç›®ä¸­ï¼Œæˆ‘ä»¬å°†ä¸“æ³¨äºCoreNLPï¼Œä½†ä¹Ÿå¯ä»¥éšæ„ä½¿ç”¨å…¶ä»–åº“åˆ›å»ºæ›¿ä»£ç‰ˆæœ¬ï¼Œè¿™ä¹Ÿæ˜¯å­¦ä¹ æ›´å¤šç›¸å…³å†…å®¹çš„å¥½æ–¹æ³•ã€‚
- en: CoreNLP is a comprehensive tool for NLP in Java, supporting multiple languages
    including Arabic, Chinese, English, French, German, Hungarian, Italian, and Spanish.
    It processes text to provide linguistic annotations such as sentence boundaries,
    parts of speech, named entities, and more through a **pipeline system** that generates
    **CoreDocuments**. These documents hold all annotation information, which can
    be accessed easily or exported.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: CoreNLPæ˜¯ä¸€ä¸ªå…¨é¢çš„Java NLPå·¥å…·ï¼Œæ”¯æŒå¤šç§è¯­è¨€ï¼ŒåŒ…æ‹¬é˜¿æ‹‰ä¼¯è¯­ã€ä¸­æ–‡ã€è‹±è¯­ã€æ³•è¯­ã€å¾·è¯­ã€åŒˆç‰™åˆ©è¯­ã€æ„å¤§åˆ©è¯­å’Œè¥¿ç­ç‰™è¯­ã€‚å®ƒé€šè¿‡ä¸€ä¸ª**ç®¡é“ç³»ç»Ÿ**å¤„ç†æ–‡æœ¬ï¼Œæä¾›è¯­è¨€å­¦æ ‡æ³¨ï¼Œå¦‚å¥å­è¾¹ç•Œã€è¯æ€§ã€å‘½åå®ä½“ç­‰ï¼Œå¹¶ç”Ÿæˆ**CoreDocuments**ã€‚è¿™äº›æ–‡æ¡£åŒ…å«æ‰€æœ‰çš„æ ‡æ³¨ä¿¡æ¯ï¼Œå¯ä»¥è½»æ¾è®¿é—®æˆ–å¯¼å‡ºã€‚
- en: In the context of CoreNLP, a **pipeline** is essentially a sequence of processing
    steps designed to analyze text. When you input raw text into CoreNLP, the pipeline
    passes the text through various **annotators** (*processing units*), each responsible
    for a different aspect of NLP. These annotators might identify sentence boundaries,
    recognize parts of speech, detect named entities, parse sentence structures, and
    more, depending on the specific tasks you want to perform.
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨CoreNLPçš„ä¸Šä¸‹æ–‡ä¸­ï¼Œ**ç®¡é“**æœ¬è´¨ä¸Šæ˜¯ä¸€ç³»åˆ—ç”¨äºåˆ†ææ–‡æœ¬çš„å¤„ç†æ­¥éª¤ã€‚å½“ä½ å°†åŸå§‹æ–‡æœ¬è¾“å…¥åˆ°CoreNLPæ—¶ï¼Œç®¡é“ä¼šå°†æ–‡æœ¬é€šè¿‡ä¸åŒçš„**æ ‡æ³¨å™¨**ï¼ˆ*å¤„ç†å•å…ƒ*ï¼‰ä¼ é€’ï¼Œæ¯ä¸ªæ ‡æ³¨å™¨è´Ÿè´£NLPçš„ä¸åŒæ–¹é¢ã€‚è¿™äº›æ ‡æ³¨å™¨å¯èƒ½ä¼šè¯†åˆ«å¥å­è¾¹ç•Œã€è¯†åˆ«è¯æ€§ã€æ£€æµ‹å‘½åå®ä½“ã€è§£æå¥å­ç»“æ„ç­‰ï¼Œå…·ä½“å–å†³äºä½ æƒ³è¦æ‰§è¡Œçš„ä»»åŠ¡ã€‚
- en: 'In our case, we will use the **sentences annotation** to split the Twitch message
    into sentences and then use the **sentiment core annotations** on each sentence
    to get the sentiment of it. But first, we need to add the required dependencies
    to the `pom.xml` of our project:'
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬çš„æ¡ˆä¾‹ä¸­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨**å¥å­æ ‡æ³¨**å°†Twitchæ¶ˆæ¯æ‹†åˆ†æˆå¥å­ï¼Œç„¶åå¯¹æ¯ä¸ªå¥å­ä½¿ç”¨**æƒ…æ„Ÿæ ¸å¿ƒæ ‡æ³¨**ä»¥è·å–å…¶æƒ…æ„Ÿã€‚ä½†é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦å°†æ‰€éœ€çš„ä¾èµ–é¡¹æ·»åŠ åˆ°æˆ‘ä»¬é¡¹ç›®çš„`pom.xml`ä¸­ï¼š
- en: '[PRE18]'
  id: totrans-204
  prefs: []
  type: TYPE_PRE
  zh: '[PRE18]'
- en: The first dependency represents the library itself while the second dependency
    will fetch all the related pre-trained models into your local `.m2` folder. Donâ€™t
    be surprised, the first time Maven resolves the dependencies will take a while
    due to the download of the models.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: ç¬¬ä¸€ä¸ªä¾èµ–é¡¹ä»£è¡¨åº“æœ¬èº«ï¼Œè€Œç¬¬äºŒä¸ªä¾èµ–é¡¹å°†æŠŠæ‰€æœ‰ç›¸å…³çš„é¢„è®­ç»ƒæ¨¡å‹æ‹‰å–åˆ°ä½ çš„æœ¬åœ°`.m2`æ–‡ä»¶å¤¹ä¸­ã€‚ä¸è¦æƒŠè®¶ï¼Œç¬¬ä¸€æ¬¡Mavenè§£æä¾èµ–é¡¹æ—¶éœ€è¦ä¸€äº›æ—¶é—´ï¼Œå› ä¸ºå®ƒéœ€è¦ä¸‹è½½æ¨¡å‹ã€‚
- en: Create sentiment analysis map function
  id: totrans-206
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åˆ›å»ºæƒ…æ„Ÿåˆ†ææ˜ å°„å‡½æ•°
- en: For the map function, we will use the abstract class `RichMapFunction` as a
    basis, so that we can again override the `open` function in order to initialize
    the pipeline for sentiment analysis only once per instance. When extending the
    `RichMapFunction`, we need to specify to generics, one for the type of input and
    another one for the type of output. The input will be one Twitch message POJO,
    so `TwitchMessage` and the output will be the message again together with its
    sentiment in form of a list of scores and another list of classes, as described
    before.
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºmapå‡½æ•°ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨æŠ½è±¡ç±»`RichMapFunction`ä½œä¸ºåŸºç¡€ï¼Œä»¥ä¾¿æˆ‘ä»¬å¯ä»¥é‡å†™`open`å‡½æ•°ï¼Œåªåœ¨æ¯ä¸ªå®ä¾‹ä¸­åˆå§‹åŒ–ä¸€æ¬¡æƒ…æ„Ÿåˆ†æç®¡é“ã€‚åœ¨æ‰©å±•`RichMapFunction`æ—¶ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šä¸¤ä¸ªæ³›å‹ï¼Œä¸€ä¸ªç”¨äºè¾“å…¥ç±»å‹ï¼Œå¦ä¸€ä¸ªç”¨äºè¾“å‡ºç±»å‹ã€‚è¾“å…¥å°†æ˜¯ä¸€ä¸ªTwitchæ¶ˆæ¯çš„POJOï¼Œå³`TwitchMessage`ï¼Œè¾“å‡ºå°†æ˜¯åŒ…å«æƒ…æ„Ÿåˆ†æ•°åˆ—è¡¨å’Œç±»åˆ«åˆ—è¡¨çš„æ¶ˆæ¯ï¼Œæ­£å¦‚ä¹‹å‰æ‰€è¿°ã€‚
- en: 'Letâ€™s start by creating a new class called `AnalyzeSentiment` and extend the
    `RichMapFunction`:'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬å…ˆåˆ›å»ºä¸€ä¸ªåä¸º `AnalyzeSentiment` çš„æ–°ç±»ï¼Œå¹¶æ‰©å±• `RichMapFunction`ï¼š
- en: '[PRE19]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE19]'
- en: 'When initializing the Stanford CoreNLP pipeline, we have to specify the types
    of annotators we want to use in our pipeline, so that the library only loads the
    required models. This can be achieved via a `Properties` object, passed to the
    constructor of `StanfordCoreNLP`. This is how we initialize the pipeline for our
    use-case:'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨åˆå§‹åŒ– Stanford CoreNLP ç®¡é“æ—¶ï¼Œæˆ‘ä»¬å¿…é¡»æŒ‡å®šè¦åœ¨ç®¡é“ä¸­ä½¿ç”¨çš„æ ‡æ³¨å™¨ç±»å‹ï¼Œä»¥ä¾¿åº“ä»…åŠ è½½æ‰€éœ€çš„æ¨¡å‹ã€‚è¿™å¯ä»¥é€šè¿‡ä¼ é€’ç»™ `StanfordCoreNLP`
    æ„é€ å‡½æ•°çš„ `Properties` å¯¹è±¡æ¥å®ç°ã€‚ä»¥ä¸‹æ˜¯æˆ‘ä»¬ä¸ºè¿™ä¸ªç”¨ä¾‹åˆå§‹åŒ–ç®¡é“çš„æ–¹å¼ï¼š
- en: '[PRE20]'
  id: totrans-211
  prefs: []
  type: TYPE_PRE
  zh: '[PRE20]'
- en: 'To make our map operator more readable, we extract the core logic to get the
    sentiment to a dedicated function. We start by processing the message with the
    pipeline:'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†ä½¿æˆ‘ä»¬çš„ map æ“ä½œç¬¦æ›´å…·å¯è¯»æ€§ï¼Œæˆ‘ä»¬å°†è·å–æƒ…æ„Ÿçš„æ ¸å¿ƒé€»è¾‘æå–åˆ°ä¸€ä¸ªä¸“ç”¨å‡½æ•°ä¸­ã€‚æˆ‘ä»¬ä»é€šè¿‡ç®¡é“å¤„ç†æ¶ˆæ¯å¼€å§‹ï¼š
- en: '[PRE21]'
  id: totrans-213
  prefs: []
  type: TYPE_PRE
  zh: '[PRE21]'
- en: 'Then we process each individual sentence:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶åæˆ‘ä»¬å¤„ç†æ¯ä¸ªå•ç‹¬çš„å¥å­ï¼š
- en: '[PRE22]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE22]'
- en: 'Get the score of the sentence and add it to a list of scores:'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: è·å–å¥å­çš„åˆ†æ•°å¹¶å°†å…¶æ·»åŠ åˆ°åˆ†æ•°åˆ—è¡¨ä¸­ï¼š
- en: '[PRE23]'
  id: totrans-217
  prefs: []
  type: TYPE_PRE
  zh: '[PRE23]'
- en: 'And get the class of the sentence and add it to a list of classes:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: è·å–å¥å­çš„ç±»åˆ«å¹¶å°†å…¶æ·»åŠ åˆ°ç±»åˆ«åˆ—è¡¨ä¸­ï¼š
- en: '[PRE24]'
  id: totrans-219
  prefs: []
  type: TYPE_PRE
  zh: '[PRE24]'
- en: 'With that, the full function to get the sentiment tuple with the scores and
    classes looks like this:'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ ·ï¼Œè·å–æƒ…æ„Ÿå…ƒç»„ï¼ˆåŒ…æ‹¬åˆ†æ•°å’Œç±»åˆ«ï¼‰çš„å®Œæ•´å‡½æ•°çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š
- en: '[PRE25]'
  id: totrans-221
  prefs: []
  type: TYPE_PRE
  zh: '[PRE25]'
- en: The map function itself simply calls this function and puts everything together
    into a tuple to emit it to the stream.
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: map å‡½æ•°æœ¬èº«åªæ˜¯è°ƒç”¨è¿™ä¸ªå‡½æ•°ï¼Œå¹¶å°†æ‰€æœ‰å†…å®¹ç»„åˆæˆä¸€ä¸ªå…ƒç»„ï¼Œå‘é€åˆ°æµä¸­ã€‚
- en: 'Putting everything together, this is the full implementation of our custom
    map function `AnalyzeSentiment.java`:'
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: æŠŠæ‰€æœ‰å†…å®¹æ”¾åœ¨ä¸€èµ·ï¼Œè¿™æ˜¯æˆ‘ä»¬è‡ªå®šä¹‰ map å‡½æ•° `AnalyzeSentiment.java` çš„å®Œæ•´å®ç°ï¼š
- en: '[PRE26]'
  id: totrans-224
  prefs: []
  type: TYPE_PRE
  zh: '[PRE26]'
- en: Use map function
  id: totrans-225
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ map å‡½æ•°
- en: We now have all ingredients for our real-time sentiment analysis streaming application
    ğŸš€. That means, we can switch back to our `App` class, where we define how the
    streaming application looks like.
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç°åœ¨æ‹¥æœ‰äº†å®æ—¶æƒ…æ„Ÿåˆ†ææµåº”ç”¨æ‰€éœ€çš„æ‰€æœ‰å…ƒç´  ğŸš€ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥åˆ‡æ¢å›æˆ‘ä»¬çš„ `App` ç±»ï¼Œåœ¨è¿™é‡Œå®šä¹‰æµåº”ç”¨çš„å…·ä½“æ ·å­ã€‚
- en: 'Here, we will also introduce another useful Apache Flink feature, which is
    the `ParameterTool`. A generic helper class allowing to parameterize your application
    in different ways. We will use it to add a program argument `--twitchChannels`
    that allows to pass a comma-separated list of Twitch channels we want to use in
    our `TwitchSource`:'
  id: totrans-227
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬è¿˜å°†ä»‹ç» Apache Flink çš„å¦ä¸€ä¸ªæœ‰ç”¨ç‰¹æ€§ï¼Œå³ `ParameterTool`ã€‚è¿™æ˜¯ä¸€ä¸ªé€šç”¨çš„è¾…åŠ©ç±»ï¼Œå…è®¸ä»¥ä¸åŒçš„æ–¹å¼å¯¹åº”ç”¨ç¨‹åºè¿›è¡Œå‚æ•°åŒ–ã€‚æˆ‘ä»¬å°†ä½¿ç”¨å®ƒæ¥æ·»åŠ ç¨‹åºå‚æ•°
    `--twitchChannels`ï¼Œå…è®¸ä¼ é€’ä¸€ä¸ªé€—å·åˆ†éš”çš„ Twitch é¢‘é“åˆ—è¡¨ï¼Œæˆ‘ä»¬å¸Œæœ›åœ¨ `TwitchSource` ä¸­ä½¿ç”¨è¿™äº›é¢‘é“ï¼š
- en: '[PRE27]'
  id: totrans-228
  prefs: []
  type: TYPE_PRE
  zh: '[PRE27]'
- en: 'Also we will include our new map function in the pipeline:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬è¿˜å°†åœ¨ç®¡é“ä¸­åŒ…æ‹¬æˆ‘ä»¬æ–°çš„ map å‡½æ•°ï¼š
- en: '[PRE28]'
  id: totrans-230
  prefs: []
  type: TYPE_PRE
  zh: '[PRE28]'
- en: 'This is how our `App` class looks in the end:'
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™å°±æ˜¯æœ€ç»ˆæˆ‘ä»¬çš„ `App` ç±»çš„æ ·å­ï¼š
- en: '[PRE29]'
  id: totrans-232
  prefs: []
  type: TYPE_PRE
  zh: '[PRE29]'
- en: 'Before we run it again, we need to adjust our run configuration again by adding
    the new `--twitchChannels` parameter. As we marked it as **required**, the application
    would fail otherwise. Navigate to *Run* â†’ *Edit Configurationsâ€¦* and add:'
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆ‘ä»¬å†æ¬¡è¿è¡Œä¹‹å‰ï¼Œæˆ‘ä»¬éœ€è¦é€šè¿‡æ·»åŠ æ–°çš„ `--twitchChannels` å‚æ•°æ¥è°ƒæ•´æˆ‘ä»¬çš„è¿è¡Œé…ç½®ã€‚å¦‚æˆ‘ä»¬æ‰€æ ‡è®°çš„ï¼Œ**è¯¥å‚æ•°æ˜¯å¿…éœ€çš„**ï¼Œå¦åˆ™åº”ç”¨ç¨‹åºå°†ä¼šå¤±è´¥ã€‚å‰å¾€
    *Run* â†’ *Edit Configurationsâ€¦* å¹¶æ·»åŠ ï¼š
- en: '`--twitchChannels vojay,valorant`'
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: '`--twitchChannels vojay,valorant`'
- en: as program arguments. **You can use any Twitch channel here, feel free to browse
    Twitch for bigger channels and see what happens.**
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: ä½œä¸ºç¨‹åºå‚æ•°ã€‚**ä½ å¯ä»¥åœ¨è¿™é‡Œä½¿ç”¨ä»»ä½• Twitch é¢‘é“ï¼Œéšæ—¶æµè§ˆ Twitch æŸ¥çœ‹æ›´å¤§çš„é¢‘é“å¹¶è§‚å¯Ÿå‘ç”Ÿçš„æƒ…å†µã€‚**
- en: '![](../Images/1af0e4eb58a9d5447c2310ac491f19a0.png)'
  id: totrans-236
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1af0e4eb58a9d5447c2310ac491f19a0.png)'
- en: Run configuration with twitchChannels parameter (by author)
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨å¸¦æœ‰ twitchChannels å‚æ•°çš„è¿è¡Œé…ç½®ï¼ˆä½œè€…ï¼‰
- en: Now it is time to run your streaming application again and enjoy the show!
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æ˜¯æ—¶å€™å†æ¬¡è¿è¡Œä½ çš„æµåº”ç”¨å¹¶äº«å—æ•´ä¸ªè¿‡ç¨‹äº†ï¼
- en: '![](../Images/9fa3cbde399e5bc2d238f4b3919a2d84.png)'
  id: totrans-239
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9fa3cbde399e5bc2d238f4b3919a2d84.png)'
- en: Photo by [Stanley Li](https://unsplash.com/@djravine?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: æ‘„å½±ï¼šç”± [Stanley Li](https://unsplash.com/@djravine?utm_source=medium&utm_medium=referral)
    æ‹æ‘„ï¼Œæ¥æºï¼š[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: Conclusion
  id: totrans-241
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“è®º
- en: And there you have it! Weâ€™ve built a real-time sentiment analysis application
    for Twitch chat using Apache Flink. Now you can not only see the chat flow by,
    but also understand the emotional pulse of the audience. This might be the boilerplate
    for a more advanced version. Track the sentiment throughout a stream, see how
    the viewers react to big plays or funny moments, and use that knowledge to create
    even more engaging content.
  id: totrans-242
  prefs: []
  type: TYPE_NORMAL
  zh: å°±è¿™æ ·ï¼æˆ‘ä»¬å·²ç»æ„å»ºäº†ä¸€ä¸ªå®æ—¶æƒ…æ„Ÿåˆ†æåº”ç”¨ï¼Œé€‚ç”¨äºTwitchèŠå¤©ï¼Œä½¿ç”¨çš„æ˜¯Apache Flinkã€‚ç°åœ¨ä½ ä¸ä»…å¯ä»¥çœ‹åˆ°èŠå¤©æµï¼Œè¿˜èƒ½ç†è§£è§‚ä¼—çš„æƒ…æ„Ÿè„‰åŠ¨ã€‚è¿™å¯èƒ½æ˜¯æ›´é«˜çº§ç‰ˆæœ¬çš„åŸºç¡€ã€‚è¿½è¸ªæ•´ä¸ªç›´æ’­è¿‡ç¨‹ä¸­çš„æƒ…æ„Ÿï¼Œçœ‹çœ‹è§‚ä¼—å¦‚ä½•ååº”äºé‡å¤§æ“ä½œæˆ–æœ‰è¶£æ—¶åˆ»ï¼Œå¹¶åˆ©ç”¨è¿™äº›çŸ¥è¯†åˆ›é€ æ›´å…·å¸å¼•åŠ›çš„å†…å®¹ã€‚
- en: 'Some inspiration to turn this prototype into a valuable, production-ready project:'
  id: totrans-243
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ˜¯ä¸€äº›çµæ„Ÿï¼Œå¸®åŠ©ä½ å°†è¿™ä¸ªåŸå‹è½¬åŒ–ä¸ºä¸€ä¸ªæœ‰ä»·å€¼çš„ã€å¯æŠ•å…¥ç”Ÿäº§çš„é¡¹ç›®ï¼š
- en: âš™ï¸ **Adjust model**
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: âš™ï¸ **è°ƒæ•´æ¨¡å‹**
- en: Use a model that is trained specifically on social media data (e.g., [RoBERTa](https://huggingface.co/cardiffnlp/twitter-roberta-base-sentiment))
    or even better, train a model directly with historical Twitch chat data to incorporate
    Twitch-specific communication aspects like specific emoji codes.
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ä¸“é—¨é’ˆå¯¹ç¤¾äº¤åª’ä½“æ•°æ®è®­ç»ƒçš„æ¨¡å‹ï¼ˆä¾‹å¦‚ï¼Œ[RoBERTa](https://huggingface.co/cardiffnlp/twitter-roberta-base-sentiment)ï¼‰ï¼Œæˆ–è€…æ›´å¥½çš„æ–¹å¼æ˜¯ï¼Œç›´æ¥ç”¨å†å²çš„TwitchèŠå¤©æ•°æ®è®­ç»ƒæ¨¡å‹ï¼Œæ¥èå…¥Twitchç‰¹æœ‰çš„äº¤æµå…ƒç´ ï¼Œå¦‚ç‰¹å®šçš„è¡¨æƒ…ç¬¦å·ä»£ç ã€‚
- en: ğŸ§® **Apply windowing**
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ§® **åº”ç”¨çª—å£å‡½æ•°**
- en: Extend the Flink pipeline with a window function, for example, a tumbling window
    per minute, and aggregate the sentiment score as an average per minute.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡çª—å£å‡½æ•°æ‰©å±•Flinkç®¡é“ï¼Œä¾‹å¦‚æ¯åˆ†é’Ÿçš„æ»šåŠ¨çª—å£ï¼Œå¹¶è®¡ç®—æ¯åˆ†é’Ÿçš„æƒ…æ„Ÿåˆ†æ•°å¹³å‡å€¼ã€‚
- en: ğŸ“¦ **Persist results**
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ“¦ **æŒä¹…åŒ–ç»“æœ**
- en: Persist the resulting stream with an aggregate per minute in Kafka or a Time
    Series Database (TSDB).
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: å°†ç»“æœæµä»¥æ¯åˆ†é’Ÿèšåˆçš„å½¢å¼æŒä¹…åŒ–åˆ°Kafkaæˆ–æ—¶é—´åºåˆ—æ•°æ®åº“ï¼ˆTSDBï¼‰ä¸­ã€‚
- en: ğŸ“Š **Create dashboard**
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: ğŸ“Š **åˆ›å»ºä»ªè¡¨ç›˜**
- en: Create a dashboard on the aggregated data, visualizing the average sentiment
    per minute in a graph.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ±‡æ€»æ•°æ®ä¸Šåˆ›å»ºä¸€ä¸ªä»ªè¡¨ç›˜ï¼Œç»˜åˆ¶æ¯åˆ†é’Ÿçš„å¹³å‡æƒ…æ„Ÿå›¾è¡¨ã€‚
- en: With these suggestions, you can combine the result with other metadata, like
    the actual category/game played of the stream or the time of the day, to create
    sophisticated recommendations about what content results in a positive Twitch
    chat experience.
  id: totrans-252
  prefs: []
  type: TYPE_NORMAL
  zh: é€šè¿‡è¿™äº›å»ºè®®ï¼Œä½ å¯ä»¥å°†ç»“æœä¸å…¶ä»–å…ƒæ•°æ®ç»“åˆèµ·æ¥ï¼Œæ¯”å¦‚æµåª’ä½“çš„å®é™…åˆ†ç±»/æ¸¸æˆç±»å‹æˆ–æ—¶é—´ï¼Œä»¥æ­¤æ¥åˆ›å»ºæ›´å¤æ‚çš„æ¨èç³»ç»Ÿï¼Œå¸®åŠ©ä½ äº†è§£å“ªäº›å†…å®¹èƒ½å¸¦æ¥ç§¯æçš„TwitchèŠå¤©ä½“éªŒã€‚
- en: So, the next time you tune into your favorite streamer, keep an eye out for
    that sentiment analysis running in the background. It might just reveal some fascinating
    insights about the passionate world of the Twitch chat!
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥ä¸‹æ¬¡å½“ä½ è§‚çœ‹ä½ æœ€å–œæ¬¢çš„ä¸»æ’­æ—¶ï¼Œä¸å¦¨ç•™æ„ä¸€ä¸‹åå°è¿è¡Œçš„æƒ…æ„Ÿåˆ†æã€‚å®ƒå¯èƒ½ä¼šæ­ç¤ºå…³äºTwitchèŠå¤©è¿™ä¸ªå……æ»¡æ¿€æƒ…çš„ä¸–ç•Œçš„ä¸€äº›æœ‰è¶£è§è§£ï¼
- en: 'But the most important thing about this article is: get inspired, learn and
    inspire others. The cool thing about Data Engineering and related fields:'
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: ä½†è¿™ç¯‡æ–‡ç« æœ€é‡è¦çš„ä¸€ç‚¹æ˜¯ï¼šè·å–çµæ„Ÿï¼Œå­¦ä¹ å¹¶å¯å‘ä»–äººã€‚æ•°æ®å·¥ç¨‹åŠç›¸å…³é¢†åŸŸæœ€é…·çš„åœ°æ–¹åœ¨äºï¼š
- en: '***data is everywhere***'
  id: totrans-255
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: '***æ•°æ®æ— å¤„ä¸åœ¨***'
- en: so there is always the next interesting question around the corner that can
    be used to learn and ideally share your inspiration with others.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: æ‰€ä»¥ï¼Œæ€»ä¼šæœ‰ä¸‹ä¸€ä¸ªæœ‰è¶£çš„é—®é¢˜ç­‰å¾…ä½ å»æ¢ç´¢ï¼Œå¹¶å¯ä»¥ç”¨æ¥å­¦ä¹ ï¼Œç†æƒ³æƒ…å†µä¸‹å°†ä½ çš„çµæ„Ÿä¸ä»–äººåˆ†äº«ã€‚
- en: '![](../Images/258f31d4a003728a74203f1bdb1d1f6f.png)'
  id: totrans-257
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/258f31d4a003728a74203f1bdb1d1f6f.png)'
- en: Photo by [Alexander Sinn](https://unsplash.com/@swimstaralex?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡ç”±[Alexander Sinn](https://unsplash.com/@swimstaralex?utm_source=medium&utm_medium=referral)æä¾›ï¼Œæ¥è‡ª[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: Enjoy and let me know about your experiences in the comments âœŒï¸.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: äº«å—è¿™ä¸ªè¿‡ç¨‹ï¼Œå¹¶åœ¨è¯„è®ºä¸­å‘Šè¯‰æˆ‘ä½ çš„ä½“éªŒ âœŒï¸ã€‚
