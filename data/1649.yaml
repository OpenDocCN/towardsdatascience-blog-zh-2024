- en: 'A Powerful EDA Tool: Group-By Aggregation'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ä¸€ç§å¼ºå¤§çš„EDAå·¥å…·ï¼šåˆ†ç»„èšåˆ
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/a-powerful-eda-tool-group-by-aggregation-696736c5f3a1?source=collection_archive---------5-----------------------#2024-07-04](https://towardsdatascience.com/a-powerful-eda-tool-group-by-aggregation-696736c5f3a1?source=collection_archive---------5-----------------------#2024-07-04)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/a-powerful-eda-tool-group-by-aggregation-696736c5f3a1?source=collection_archive---------5-----------------------#2024-07-04](https://towardsdatascience.com/a-powerful-eda-tool-group-by-aggregation-696736c5f3a1?source=collection_archive---------5-----------------------#2024-07-04)
- en: '![](../Images/691a811bf777523ac010794feed190fa.png)'
  id: totrans-2
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/691a811bf777523ac010794feed190fa.png)'
- en: Photo by [Mourizal Zativa](https://unsplash.com/@mourimoto?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
    on [Unsplash](https://unsplash.com/s/photos/lego-pieces?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: ç…§ç‰‡ç”±[Mourizal Zativa](https://unsplash.com/@mourimoto?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)æä¾›ï¼Œæ¥è‡ª[Unsplash](https://unsplash.com/s/photos/lego-pieces?utm_source=unsplash&utm_medium=referral&utm_content=creditCopyText)
- en: Learn how to use group-by aggregation to uncover insights from your data
  id: totrans-4
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å­¦ä¹ å¦‚ä½•ä½¿ç”¨åˆ†ç»„èšåˆä»æ•°æ®ä¸­å‘ç°æ´å¯Ÿ
- en: '[](https://medium.com/@pararawendy19?source=post_page---byline--696736c5f3a1--------------------------------)[![Pararawendy
    Indarjo](../Images/afba0cb7f3af9554a187bbc7a3c00e60.png)](https://medium.com/@pararawendy19?source=post_page---byline--696736c5f3a1--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--696736c5f3a1--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--696736c5f3a1--------------------------------)
    [Pararawendy Indarjo](https://medium.com/@pararawendy19?source=post_page---byline--696736c5f3a1--------------------------------)'
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@pararawendy19?source=post_page---byline--696736c5f3a1--------------------------------)[![Pararawendy
    Indarjo](../Images/afba0cb7f3af9554a187bbc7a3c00e60.png)](https://medium.com/@pararawendy19?source=post_page---byline--696736c5f3a1--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--696736c5f3a1--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--696736c5f3a1--------------------------------)
    [Pararawendy Indarjo](https://medium.com/@pararawendy19?source=post_page---byline--696736c5f3a1--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--696736c5f3a1--------------------------------)
    Â·7 min readÂ·Jul 4, 2024
  id: totrans-6
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº[Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--696736c5f3a1--------------------------------)
    Â·é˜…è¯»æ—¶é—´ï¼š7åˆ†é’ŸÂ·2024å¹´7æœˆ4æ—¥
- en: --
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: Exploratory Data Analysis (EDA) is the core competency of a data analyst. Every
    day, data analysts are tasked with seeing the â€œunseen,â€ or extracting useful insights
    from a vast ocean of data.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: æ¢ç´¢æ€§æ•°æ®åˆ†æï¼ˆEDAï¼‰æ˜¯æ•°æ®åˆ†æå¸ˆçš„æ ¸å¿ƒèƒ½åŠ›ã€‚æ¯å¤©ï¼Œæ•°æ®åˆ†æå¸ˆçš„ä»»åŠ¡æ˜¯çœ‹åˆ°â€œæœªè§ä¹‹äº‹â€ï¼Œæˆ–è€…ä»æµ©ç€šçš„æ•°æ®æµ·æ´‹ä¸­æå–æœ‰ç”¨çš„æ´å¯Ÿã€‚
- en: 'In this regard, Iâ€™d like share a technique that I find beneficial for extracting
    relevant insights from data: group-by aggregation.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™æ–¹é¢ï¼Œæˆ‘æƒ³åˆ†äº«ä¸€ç§æˆ‘è®¤ä¸ºæœ‰åŠ©äºä»æ•°æ®ä¸­æå–ç›¸å…³æ´å¯Ÿçš„æŠ€å·§ï¼šåˆ†ç»„èšåˆã€‚
- en: 'To this end, the rest of this article will be arranged as follows:'
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºæ­¤ï¼Œæœ¬æ–‡çš„å…¶ä½™éƒ¨åˆ†å°†æŒ‰ä»¥ä¸‹æ–¹å¼å®‰æ’ï¼š
- en: Explanation of group-by aggregation in Pandas
  id: totrans-11
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨Pandasä¸­è¿›è¡Œåˆ†ç»„èšåˆçš„è§£é‡Š
- en: 'The dataset: Metro Interstate Traffic'
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æ•°æ®é›†ï¼šåœ°é“å·é™…äº¤é€š
- en: Metro Traffic EDA
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ°é“äº¤é€šæ¢ç´¢æ€§æ•°æ®åˆ†æï¼ˆEDAï¼‰
- en: Group-By Aggregation
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åˆ†ç»„èšåˆ
- en: Group-by aggregation is a data manipulation technique that consists of two steps.
    First, we group the data based on the values of specific columns. Second, we perform
    some aggregation operations (e.g., sum, average, median, count unique) on top
    of the grouped data.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ†ç»„èšåˆæ˜¯ä¸€ç§æ•°æ®æ“ä½œæŠ€å·§ï¼ŒåŒ…å«ä¸¤ä¸ªæ­¥éª¤ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æ ¹æ®ç‰¹å®šåˆ—çš„å€¼å¯¹æ•°æ®è¿›è¡Œåˆ†ç»„ã€‚å…¶æ¬¡ï¼Œæˆ‘ä»¬åœ¨åˆ†ç»„æ•°æ®ä¸Šæ‰§è¡Œä¸€äº›èšåˆæ“ä½œï¼ˆä¾‹å¦‚ï¼Œæ±‚å’Œã€å¹³å‡ã€æ±‚ä¸­ä½æ•°ã€è®¡æ•°å”¯ä¸€å€¼ç­‰ï¼‰ã€‚
- en: Group-by aggregation is especially useful when our data is granular, as in typical
    fact tables (transactions data) and time series data with narrow intervals. By
    aggregating at a higher level than raw data granularity, we can represent the
    data in a more compact way â€” and may distill useful insights in the process.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: åˆ†ç»„èšåˆåœ¨æ•°æ®ç²’åº¦è¾ƒç»†æ—¶å°¤å…¶æœ‰ç”¨ï¼Œå…¸å‹çš„å¦‚äº‹å®è¡¨ï¼ˆäº¤æ˜“æ•°æ®ï¼‰å’Œé—´éš”è¾ƒçª„çš„æ—¶é—´åºåˆ—æ•°æ®ã€‚é€šè¿‡åœ¨æ¯”åŸå§‹æ•°æ®ç²’åº¦æ›´é«˜çš„å±‚æ¬¡è¿›è¡Œèšåˆï¼Œæˆ‘ä»¬å¯ä»¥ä»¥æ›´ç´§å‡‘çš„æ–¹å¼è¡¨ç¤ºæ•°æ®â€”â€”å¹¶ä¸”å¯èƒ½åœ¨æ­¤è¿‡ç¨‹ä¸­æç‚¼å‡ºæœ‰ç”¨çš„æ´å¯Ÿã€‚
- en: In pandas, we can perform group-by aggregation using the following general syntax
    form.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨pandasä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ä»¥ä¸‹é€šç”¨è¯­æ³•å½¢å¼è¿›è¡Œåˆ†ç»„èšåˆã€‚
- en: '[PRE0]'
  id: totrans-18
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Where `base_col` is the column whose values become the grouping basis, `agg_col`
    is the new column defined by taking `agg_func` aggregation on `ori_col` column.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ä¸­ï¼Œ`base_col`æ˜¯ä½œä¸ºåˆ†ç»„åŸºç¡€çš„åˆ—ï¼Œ`agg_col`æ˜¯é€šè¿‡å¯¹`ori_col`åˆ—è¿›è¡Œ`agg_func`èšåˆåå®šä¹‰çš„æ–°åˆ—ã€‚
- en: For example, consider the infamous Titanic dataset whose five rows are displayed
    below.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œè€ƒè™‘è‘—åçš„æ³°å¦å°¼å…‹å·æ•°æ®é›†ï¼Œä»¥ä¸‹æ˜¾ç¤ºäº†å…¶äº”è¡Œæ•°æ®ã€‚
- en: '[PRE1]'
  id: totrans-21
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![](../Images/4868ab3226336b94d70b44529881f531.png)'
  id: totrans-22
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/4868ab3226336b94d70b44529881f531.png)'
- en: Titanic dataâ€™s first 5 rows (Image by Author)
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: æ³°å¦å°¼å…‹å·æ•°æ®çš„å‰5è¡Œï¼ˆä½œè€…æä¾›çš„å›¾ç‰‡ï¼‰
- en: We can group this data by the `survived` column and then aggregate it by taking
    the median of the `fare` column to get the results below.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥é€šè¿‡`survived`åˆ—å¯¹è¿™äº›æ•°æ®è¿›è¡Œåˆ†ç»„ï¼Œç„¶åé€šè¿‡è®¡ç®—`fare`åˆ—çš„ä¸­ä½æ•°æ¥èšåˆï¼Œå¾—åˆ°ä»¥ä¸‹ç»“æœã€‚
- en: '![](../Images/11515715275245f95bac895b569a7168.png)'
  id: totrans-25
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/11515715275245f95bac895b569a7168.png)'
- en: Median fare of titanic passengers, by survival status (Image by Author)
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‰ç”Ÿå­˜çŠ¶æ€åˆ’åˆ†çš„æ³°å¦å°¼å…‹å·ä¹˜å®¢ç¥¨ä»·ä¸­ä½æ•°ï¼ˆä½œè€…æä¾›çš„å›¾ç‰‡ï¼‰
- en: 'Suddenly, we see an interesting insight: survived passengers have a higher
    fare median, which has more than doubled. This could be related to prioritizing
    safety boats for higher cabin class passengers (i.e., passengers with higher fare
    tickets).'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: çªç„¶é—´ï¼Œæˆ‘ä»¬çœ‹åˆ°ä¸€ä¸ªæœ‰è¶£çš„è§è§£ï¼šç”Ÿè¿˜çš„ä¹˜å®¢æœ‰æ›´é«˜çš„ç¥¨ä»·ä¸­ä½æ•°ï¼Œä¸”å‡ ä¹ç¿»å€ã€‚è¿™å¯èƒ½ä¸ä¼˜å…ˆä¸ºé«˜çº§èˆ±ä¹˜å®¢ï¼ˆå³ç¥¨ä»·è¾ƒé«˜çš„ä¹˜å®¢ï¼‰æä¾›æ•‘ç”Ÿè‰‡æœ‰å…³ã€‚
- en: Hopefully, this simple example demonstrates the potential of group by aggregation
    in gathering insights from data. Okay then, letâ€™s try group-by-aggregation on
    a more interesting dataset!
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: å¸Œæœ›è¿™ä¸ªç®€å•çš„ä¾‹å­èƒ½å¤Ÿå±•ç¤ºé€šè¿‡åˆ†ç»„èšåˆä»æ•°æ®ä¸­æå–è§è§£çš„æ½œåŠ›ã€‚é‚£ä¹ˆï¼Œç°åœ¨è®©æˆ‘ä»¬åœ¨ä¸€ä¸ªæ›´æœ‰è¶£çš„æ•°æ®é›†ä¸Šå°è¯•ä¸€ä¸‹åˆ†ç»„èšåˆï¼
- en: The Dataset
  id: totrans-29
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ•°æ®é›†
- en: We will use the Metro Interstate Traffic Volume dataset. Itâ€™s a publicly available
    dataset with a [Creative Common 4.0 license](https://archive.ics.uci.edu/dataset/492/metro+interstate+traffic+volume)
    (which allows for sharing and adaptation of the dataset for any purpose).
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†ä½¿ç”¨åœ°é“å·é™…äº¤é€šé‡æ•°æ®é›†ã€‚è¿™æ˜¯ä¸€ä¸ªå…¬å¼€å¯ç”¨çš„æ•°æ®é›†ï¼Œå…·æœ‰[åˆ›æ„å…±äº«4.0è®¸å¯è¯](https://archive.ics.uci.edu/dataset/492/metro+interstate+traffic+volume)ï¼ˆå…è®¸ä»¥ä»»ä½•ç›®çš„å…±äº«å’Œä¿®æ”¹æ•°æ®é›†ï¼‰ã€‚
- en: The dataset contains hourly Minneapolis-St Paul, MN traffic volume for westbound
    I-94, which also includes weather details from 2012â€“2018\. The data dictionary
    information can be found on its [UCI Machine Learning repo](https://archive.ics.uci.edu/dataset/492/metro+interstate+traffic+volume)
    page.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥æ•°æ®é›†åŒ…å«2012-2018å¹´é—´æ˜å°¼é˜¿æ³¢åˆ©æ–¯-åœ£ä¿ç½—ï¼Œæ˜å°¼è‹è¾¾å·I-94è¥¿è¡Œçš„æ¯å°æ—¶äº¤é€šé‡æ•°æ®ï¼ŒåŒæ—¶ä¹ŸåŒ…å«å¤©æ°”è¯¦æƒ…ã€‚æ•°æ®å­—å…¸ä¿¡æ¯å¯ä»¥åœ¨å…¶[UCIæœºå™¨å­¦ä¹ åº“](https://archive.ics.uci.edu/dataset/492/metro+interstate+traffic+volume)é¡µé¢æ‰¾åˆ°ã€‚
- en: '[PRE2]'
  id: totrans-32
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: '![](../Images/32fdeb6df51b8acd7fcde2589ae5b6ff.png)'
  id: totrans-33
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/32fdeb6df51b8acd7fcde2589ae5b6ff.png)'
- en: Traffic data (df) head (Image by Author)
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: äº¤é€šæ•°æ®ï¼ˆdfï¼‰å¤´éƒ¨ï¼ˆä½œè€…æä¾›çš„å›¾ç‰‡ï¼‰
- en: For this blog demo, we will only use data from 2016 onwards, as there is missing
    traffic data from earlier periods (try to check yourself for exercise!).
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºè¿™ä¸ªåšå®¢ç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†ä»…ä½¿ç”¨2016å¹´åŠä¹‹åçš„æ•°æ®ï¼Œå› ä¸ºæ—©æœŸçš„äº¤é€šæ•°æ®ç¼ºå¤±ï¼ˆè‡ªå·±å°è¯•æ£€æŸ¥ä¸€ä¸‹ï¼Œä½œä¸ºç»ƒä¹ ï¼ï¼‰ã€‚
- en: Furthermore, we will add a new column `is_congested`, which will have a value
    of 1 if the `traffic_volume` exceeds 5000 and 0 otherwise.
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œæˆ‘ä»¬å°†æ·»åŠ ä¸€ä¸ªæ–°çš„åˆ—`is_congested`ï¼Œå¦‚æœ`traffic_volume`è¶…è¿‡5000ï¼Œåˆ™å€¼ä¸º1ï¼Œå¦åˆ™ä¸º0ã€‚
- en: '[PRE3]'
  id: totrans-37
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: Metro Traffic EDA
  id: totrans-38
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: åœ°é“äº¤é€šEDA
- en: Using group-by aggregation as the main weapon, we will try to answer the following
    analysis questions.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥åˆ†ç»„èšåˆä½œä¸ºä¸»è¦æ–¹æ³•ï¼Œæˆ‘ä»¬å°†å°è¯•å›ç­”ä»¥ä¸‹åˆ†æé—®é¢˜ã€‚
- en: How is the monthly progression of the traffic volume?
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: äº¤é€šé‡çš„æœˆåº¦å˜åŒ–å¦‚ä½•ï¼Ÿ
- en: How is the traffic profile of each day in a week (Monday, Tuesday, etc)?
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸€å‘¨å†…æ¯å¤©çš„äº¤é€šæ¦‚å†µå¦‚ä½•ï¼ˆæ˜ŸæœŸä¸€ã€æ˜ŸæœŸäºŒç­‰ï¼‰ï¼Ÿ
- en: How are typical hourly traffic volume across 24 hours, broken down by weekday
    vs weekend?
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å…¸å‹çš„24å°æ—¶äº¤é€šé‡æ˜¯å¦‚ä½•å˜åŒ–çš„ï¼ŒæŒ‰å·¥ä½œæ—¥ä¸å‘¨æœ«è¿›è¡ŒåŒºåˆ†ï¼Ÿ
- en: What are the top weather conditions that correspond to higher congestion rates?
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å“ªäº›å¤©æ°”æ¡ä»¶ä¸æ›´é«˜çš„æ‹¥å µç‡ç›¸å…³ï¼Ÿ
- en: Monthly progression of traffic volume
  id: totrans-44
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: äº¤é€šé‡çš„æœˆåº¦å˜åŒ–
- en: This question requires us to aggregate (sum) traffic volumes at month level.
    Because we donâ€™t have the `month` column, we need to derive one based on `date_time`
    column.
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªé—®é¢˜è¦æ±‚æˆ‘ä»¬æŒ‰æœˆèšåˆï¼ˆæ±‚å’Œï¼‰äº¤é€šé‡æ•°æ®ã€‚ç”±äºæˆ‘ä»¬æ²¡æœ‰`month`åˆ—ï¼Œæˆ‘ä»¬éœ€è¦åŸºäº`date_time`åˆ—æ´¾ç”Ÿå‡ºè¯¥åˆ—ã€‚
- en: With `month`column in place, we can group based on this column, and take the
    sum of `traffic_volume`. The codes are given below.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: æœ‰äº†`month`åˆ—ï¼Œæˆ‘ä»¬å¯ä»¥åŸºäºè¯¥åˆ—è¿›è¡Œåˆ†ç»„ï¼Œå¹¶è®¡ç®—`traffic_volume`çš„æ€»å’Œã€‚ä»£ç å¦‚ä¸‹æ‰€ç¤ºã€‚
- en: '[PRE4]'
  id: totrans-47
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '![](../Images/dae775c6786baf7cb6a9c5ecad22263a.png)'
  id: totrans-48
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/dae775c6786baf7cb6a9c5ecad22263a.png)'
- en: monthly_traffic head (Image by Author)
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: æœˆåº¦äº¤é€šå¤´éƒ¨ï¼ˆä½œè€…æä¾›çš„å›¾ç‰‡ï¼‰
- en: We can draw line plot from this dataframe!
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥ä»è¿™ä¸ªæ•°æ®æ¡†ä¸­ç»˜åˆ¶æŠ˜çº¿å›¾ï¼
- en: '[PRE5]'
  id: totrans-51
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '![](../Images/6ab9165cf2cfe4d78db6ad1b200f250b.png)'
  id: totrans-52
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6ab9165cf2cfe4d78db6ad1b200f250b.png)'
- en: Monthly traffic volume (Image by Author)
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: æœˆåº¦äº¤é€šé‡ï¼ˆä½œè€…æä¾›çš„å›¾ç‰‡ï¼‰
- en: The above visualization shows that traffic volume has generally increased over
    the months within the considered data period.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸Šé¢çš„å¯è§†åŒ–æ˜¾ç¤ºï¼Œåœ¨æ‰€è€ƒè™‘çš„æ•°æ®æœŸé—´å†…ï¼Œäº¤é€šé‡æ™®éå¢åŠ ã€‚
- en: Daily traffic profile
  id: totrans-55
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ¯æ—¥äº¤é€šæ¦‚å†µ
- en: 'To analyze this, we need to create two additional columns: `date` and `dayname`.
    The former is used as the primary group-by basis, whereas the latter is used as
    a breakdown when displaying the data.'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†åˆ†æè¿™ä¸€ç‚¹ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸¤ä¸ªé¢å¤–çš„åˆ—ï¼š`date`å’Œ`dayname`ã€‚å‰è€…ç”¨ä½œä¸»è¦çš„åˆ†ç»„ä¾æ®ï¼Œè€Œåè€…ç”¨äºåœ¨å±•ç¤ºæ•°æ®æ—¶è¿›è¡Œç»†åˆ†ã€‚
- en: In the following codes, we define `date` and `dayname` columns. Later on, we
    group-by based on both columns to get the sum of `traffic_volume`. Note that since
    `dayname` is more coarse (higher aggregation level) than `date` , it effectively
    means we aggregate based on `date` values.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ¥ä¸‹æ¥çš„ä»£ç ä¸­ï¼Œæˆ‘ä»¬å®šä¹‰äº†`date`å’Œ`dayname`åˆ—ã€‚ä¹‹åï¼Œæˆ‘ä»¬åŸºäºè¿™ä¸¤åˆ—è¿›è¡Œåˆ†ç»„ï¼Œä»¥è·å–`traffic_volume`çš„æ€»å’Œã€‚è¯·æ³¨æ„ï¼Œç”±äº`dayname`æ¯”`date`æ›´ç²—ç•¥ï¼ˆèšåˆå±‚çº§è¾ƒé«˜ï¼‰ï¼Œå®é™…ä¸Šæ„å‘³ç€æˆ‘ä»¬æ˜¯åŸºäº`date`å€¼è¿›è¡Œèšåˆçš„ã€‚
- en: '[PRE6]'
  id: totrans-58
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '![](../Images/276b382c99b6e35b87a65c410af1b682.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/276b382c99b6e35b87a65c410af1b682.png)'
- en: daily_traffic head (Image by Author)
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: daily_trafficå¤´éƒ¨æ•°æ®ï¼ˆå›¾åƒæ¥æºï¼šä½œè€…ï¼‰
- en: The above table contains different realizations of daily total traffic volume
    per day name. Box plot visualizations are appropriate to show those variations
    of traffic volume, allowing us to comprehend how traffic volumes differ on Monday,
    Tuesday, and so on.
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸Šè¡¨åŒ…å«äº†æŒ‰æ˜ŸæœŸåç§°åˆ’åˆ†çš„æ¯æ—¥æ€»äº¤é€šé‡çš„ä¸åŒè¡¨ç°å½¢å¼ã€‚ç®±å½¢å›¾å¯æœ‰æ•ˆå±•ç¤ºè¿™äº›äº¤é€šé‡çš„å˜åŒ–ï¼Œè®©æˆ‘ä»¬èƒ½å¤Ÿç†è§£æ˜ŸæœŸä¸€ã€æ˜ŸæœŸäºŒç­‰çš„äº¤é€šé‡å·®å¼‚ã€‚
- en: '[PRE7]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '![](../Images/f16f99935a28b55c6b2cb92e791c7921.png)'
  id: totrans-63
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/f16f99935a28b55c6b2cb92e791c7921.png)'
- en: The above plot shows that all weekdays (Mon-Fri) have roughly the same traffic
    density. Weekends (Saturday and Sunday) have lower traffic, with Sunday having
    the least of the two.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸Šå›¾æ˜¾ç¤ºï¼Œæ‰€æœ‰å·¥ä½œæ—¥ï¼ˆå‘¨ä¸€è‡³å‘¨äº”ï¼‰çš„äº¤é€šå¯†åº¦å¤§è‡´ç›¸åŒã€‚å‘¨æœ«ï¼ˆå‘¨å…­å’Œå‘¨æ—¥ï¼‰çš„äº¤é€šè¾ƒå°‘ï¼Œå…¶ä¸­å‘¨æ—¥çš„äº¤é€šæœ€å°‘ã€‚
- en: Hourly traffic patterns, broken down by weekend status
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æŒ‰å‘¨æœ«çŠ¶æ€ç»†åˆ†çš„å°æ—¶äº¤é€šæ¨¡å¼
- en: Similar as previous questions, we need to engineer two new columns to answer
    this question, i.e., `hour` and `is_weekend`.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ä¹‹å‰çš„é—®é¢˜ç±»ä¼¼ï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»ºä¸¤ä¸ªæ–°åˆ—æ¥å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œå³`hour`å’Œ`is_weekend`ã€‚
- en: Using the same trick, we will group by `is_weekend` and `hour` columns to get
    averages of `traffic_volume`.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨ç›¸åŒçš„æŠ€å·§ï¼Œæˆ‘ä»¬å°†æŒ‰`is_weekend`å’Œ`hour`åˆ—è¿›è¡Œåˆ†ç»„ï¼Œä»¥è·å–`traffic_volume`çš„å¹³å‡å€¼ã€‚
- en: '[PRE8]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '![](../Images/d375c70aabf7ca5a524c4d0c70828ef4.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d375c70aabf7ca5a524c4d0c70828ef4.png)'
- en: hourly_traffic head (Image by Author)
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: hourly_trafficå¤´éƒ¨æ•°æ®ï¼ˆå›¾åƒæ¥æºï¼šä½œè€…ï¼‰
- en: For the visualization, we can use bar chart with break down on `is_weekend`
    flag.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºå¯è§†åŒ–ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¡å½¢å›¾ï¼Œå¹¶æŒ‰ç…§`is_weekend`æ ‡å¿—è¿›è¡Œç»†åˆ†ã€‚
- en: '[PRE9]'
  id: totrans-72
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '![](../Images/c34979eebbbc1661a4b9e0f846e0921b.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c34979eebbbc1661a4b9e0f846e0921b.png)'
- en: Hourly traffic pattern, by weekend status (Image by Author)
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: æŒ‰å‘¨æœ«çŠ¶æ€åˆ’åˆ†çš„å°æ—¶äº¤é€šæ¨¡å¼ï¼ˆå›¾åƒæ¥æºï¼šä½œè€…ï¼‰
- en: 'Very interesting and rich visualization! Observations:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: éå¸¸æœ‰è¶£ä¸”ä¸°å¯Œçš„å¯è§†åŒ–ï¼è§‚å¯Ÿç»“æœï¼š
- en: Weekday traffic has a bimodal distribution pattern. It reaches its highest traffic
    between 6 and 8 a.m. and 16 and 17 p.m. This is somewhat intuitive because those
    time windows represent people going to work and returning home from work.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å·¥ä½œæ—¥çš„äº¤é€šå‘ˆåŒå³°åˆ†å¸ƒæ¨¡å¼ã€‚å®ƒåœ¨æ—©ä¸Š6ç‚¹åˆ°8ç‚¹å’Œä¸‹åˆ4ç‚¹åˆ°5ç‚¹ä¹‹é—´è¾¾åˆ°äº¤é€šé‡çš„å³°å€¼ã€‚è¿™æ˜¯ç›´è§‚çš„ï¼Œå› ä¸ºè¿™äº›æ—¶é—´æ®µä»£è¡¨ç€äººä»¬ä¸Šä¸‹ç­çš„æ—¶é—´ã€‚
- en: Weekend traffic follows a completely different pattern. It has a unimodal shape
    with a large peak window (12â€“17). Despite being generally inferior (less traffic)
    to weekday equivalent hours, it is worth noting that weekend traffic is actually
    higher during late-night hours (22â€“2). This could be because people are staying
    out until late on weekend nights.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å‘¨æœ«çš„äº¤é€šéµå¾ªå®Œå…¨ä¸åŒçš„æ¨¡å¼ã€‚å®ƒå‘ˆå•å³°å½¢çŠ¶ï¼Œä¸”æœ‰ä¸€ä¸ªè¾ƒå¤§çš„é«˜å³°åŒºé—´ï¼ˆ12â€“17ç‚¹ï¼‰ã€‚å°½ç®¡æ€»ä½“ä¸Šï¼ˆäº¤é€šé‡è¾ƒå°‘ï¼‰ä½äºå·¥ä½œæ—¥çš„åŒä¸€æ—¶æ®µï¼Œä½†å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå‘¨æœ«çš„æ·±å¤œæ—¶æ®µï¼ˆ22â€“2ç‚¹ï¼‰äº¤é€šå®é™…ä¸Šæ›´é«˜ã€‚è¿™å¯èƒ½æ˜¯å› ä¸ºäººä»¬åœ¨å‘¨æœ«æ™šä¸Šå¾…å¾—æ›´æ™šã€‚
- en: Top weather associated with congestion
  id: totrans-78
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: ä¸æ‹¥å µç›¸å…³çš„å¤©æ°”ç±»å‹
- en: To answer this question, we need to calculate congestion rate for each weather
    condition in the dataset (utilizing `is_congested` column). Can we calculate it
    using group-by aggregation? Yes we can!
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†å›ç­”è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬éœ€è¦è®¡ç®—æ•°æ®é›†ä¸­æ¯ç§å¤©æ°”æ¡ä»¶ä¸‹çš„æ‹¥å µç‡ï¼ˆåˆ©ç”¨`is_congested`åˆ—ï¼‰ã€‚æˆ‘ä»¬èƒ½é€šè¿‡åˆ†ç»„èšåˆæ¥è®¡ç®—å—ï¼Ÿå½“ç„¶å¯ä»¥ï¼
- en: The key observation to make is that the `is_congested` column is binary. Thus,
    the congestion rate can be calculated by simply averaging this column! Average
    of a binary column equals to `count(rows with value = 1)/count(all rows)` â€” which
    is the congestion rate definition.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: éœ€è¦æ³¨æ„çš„å…³é”®ç‚¹æ˜¯ï¼Œ`is_congested`åˆ—æ˜¯äºŒè¿›åˆ¶çš„ã€‚å› æ­¤ï¼Œæ‹¥å µç‡å¯ä»¥é€šè¿‡ç®€å•åœ°å¯¹è¯¥åˆ—æ±‚å¹³å‡å€¼æ¥è®¡ç®—ï¼äºŒè¿›åˆ¶åˆ—çš„å¹³å‡å€¼ç­‰äº`count(rows
    with value = 1)/count(all rows)` â€”â€” è¿™å°±æ˜¯æ‹¥å µç‡çš„å®šä¹‰ã€‚
- en: Based on this neat observation, all we need to do is taking the average (mean)
    of `is_congested` grouped by `weather_description`. Following that, we sort the
    results descending by `congested_rate`.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: åŸºäºè¿™ä¸€ç²¾å¦™çš„è§‚å¯Ÿï¼Œæˆ‘ä»¬æ‰€è¦åšçš„å°±æ˜¯æŒ‰`weather_description`åˆ†ç»„ï¼Œå¯¹`is_congested`æ±‚å¹³å‡å€¼ï¼ˆå³å‡å€¼ï¼‰ã€‚æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬æŒ‰`congested_rate`é™åºæ’åˆ—ç»“æœã€‚
- en: '[PRE10]'
  id: totrans-82
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '![](../Images/dcb0a5842e7936cb2dee5f7fa295da63.png)'
  id: totrans-83
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/dcb0a5842e7936cb2dee5f7fa295da63.png)'
- en: congested_weather head (Image by Author)
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: æ‹¥å µå¤©æ°”å¤´ï¼ˆå›¾ç‰‡ç”±ä½œè€…æä¾›ï¼‰
- en: '[PRE11]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '![](../Images/b7b2ea4c435d20fdc4c0983da5822c05.png)'
  id: totrans-86
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/b7b2ea4c435d20fdc4c0983da5822c05.png)'
- en: Top weather based on congestion rate (Image by Author)
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: åŸºäºæ‹¥å µç‡çš„å¤©æ°”æ’è¡Œï¼ˆå›¾ç‰‡ç”±ä½œè€…æä¾›ï¼‰
- en: 'From the graph:'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: ä»å›¾è¡¨æ¥çœ‹ï¼š
- en: The top three weather conditions with the highest congestion rates are sleet,
    light shower snow, and very heavy rain.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æ‹¥å µç‡æœ€é«˜çš„ä¸‰ç§å¤©æ°”æƒ…å†µæ˜¯å†°é›¹ã€å°é˜µé›ªå’Œæš´é›¨ã€‚
- en: Meanwhile, light rain and snow, thunderstorms with drizzle, freezing rain, and
    squalls have not caused any congestion. People must be staying indoors during
    such extreme weather!
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: ä¸æ­¤åŒæ—¶ï¼Œå°é›¨å’Œé›ªã€å¸¦æ¯›æ¯›é›¨çš„é›·æš´ã€å†°å†»é›¨å’Œé˜µé£å¹¶æœªå¼•èµ·ä»»ä½•æ‹¥å µã€‚åœ¨å¦‚æ­¤æç«¯çš„å¤©æ°”ä¸‹ï¼Œäººä»¬ä¸€å®šéƒ½å¾…åœ¨å®¤å†…äº†ï¼
- en: Closing
  id: totrans-91
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“å°¾
- en: In this blog post, we covered how to use group-by-aggregation in EDA exercises.
    As we can see, this technique is highly effective in revealing interesting, useful
    insights from data, particularly when dealing with granular data.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™ç¯‡åšå®¢æ–‡ç« ä¸­ï¼Œæˆ‘ä»¬ä»‹ç»äº†å¦‚ä½•åœ¨EDAç»ƒä¹ ä¸­ä½¿ç”¨åˆ†ç»„èšåˆã€‚æ­£å¦‚æˆ‘ä»¬æ‰€çœ‹åˆ°çš„ï¼Œè¿™é¡¹æŠ€æœ¯åœ¨ä»æ•°æ®ä¸­æ­ç¤ºæœ‰è¶£ä¸”æœ‰ç”¨çš„è§è§£æ—¶éå¸¸æœ‰æ•ˆï¼Œå°¤å…¶æ˜¯åœ¨å¤„ç†ç²’åº¦æ•°æ®æ—¶ã€‚
- en: I hope you can practice doing group-by aggregation during your next EDA project!
    All in all, thanks for reading, and letâ€™s connect with me on [LinkedIn](https://www.linkedin.com/in/pararawendy-indarjo/)!
    ğŸ‘‹
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: å¸Œæœ›ä½ èƒ½åœ¨ä¸‹ä¸€ä¸ªEDAé¡¹ç›®ä¸­ç»ƒä¹ ä½¿ç”¨åˆ†ç»„èšåˆï¼æ€»çš„æ¥è¯´ï¼Œæ„Ÿè°¢ä½ çš„é˜…è¯»ï¼Œæ¬¢è¿åœ¨[LinkedIn](https://www.linkedin.com/in/pararawendy-indarjo/)ä¸Šä¸æˆ‘è”ç³»ï¼ğŸ‘‹
