- en: 'Time Series Forecasting: A Practical Guide to Exploratory Data Analysis'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ—¶é—´åºåˆ—é¢„æµ‹ï¼šæ¢ç´¢æ€§æ•°æ®åˆ†æå®ç”¨æŒ‡å—
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/time-series-forecasting-a-practical-guide-to-exploratory-data-analysis-a101dc5f85b1?source=collection_archive---------0-----------------------#2024-05-09](https://towardsdatascience.com/time-series-forecasting-a-practical-guide-to-exploratory-data-analysis-a101dc5f85b1?source=collection_archive---------0-----------------------#2024-05-09)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/time-series-forecasting-a-practical-guide-to-exploratory-data-analysis-a101dc5f85b1?source=collection_archive---------0-----------------------#2024-05-09](https://towardsdatascience.com/time-series-forecasting-a-practical-guide-to-exploratory-data-analysis-a101dc5f85b1?source=collection_archive---------0-----------------------#2024-05-09)
- en: How to use Exploratory Data Analysis to drive information from time series data
    and enhance feature engineering using Python
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å¦‚ä½•åˆ©ç”¨æ¢ç´¢æ€§æ•°æ®åˆ†æä»æ—¶é—´åºåˆ—æ•°æ®ä¸­æå–ä¿¡æ¯ï¼Œå¹¶ä½¿ç”¨Pythonå¢å¼ºç‰¹å¾å·¥ç¨‹
- en: '[](https://medium.com/@maicolnicolini96?source=post_page---byline--a101dc5f85b1--------------------------------)[![Maicol
    Nicolini](../Images/97e78725ba70c95e340b76527c358498.png)](https://medium.com/@maicolnicolini96?source=post_page---byline--a101dc5f85b1--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--a101dc5f85b1--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--a101dc5f85b1--------------------------------)
    [Maicol Nicolini](https://medium.com/@maicolnicolini96?source=post_page---byline--a101dc5f85b1--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@maicolnicolini96?source=post_page---byline--a101dc5f85b1--------------------------------)[![Maicol
    Nicolini](../Images/97e78725ba70c95e340b76527c358498.png)](https://medium.com/@maicolnicolini96?source=post_page---byline--a101dc5f85b1--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--a101dc5f85b1--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--a101dc5f85b1--------------------------------)
    [Maicol Nicolini](https://medium.com/@maicolnicolini96?source=post_page---byline--a101dc5f85b1--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--a101dc5f85b1--------------------------------)
    Â·15 min readÂ·May 9, 2024
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘è¡¨äº[Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--a101dc5f85b1--------------------------------)
    Â·15åˆ†é’Ÿé˜…è¯»Â·2024å¹´5æœˆ9æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/32bbea6cf3c9513a36265783549ae925.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/32bbea6cf3c9513a36265783549ae925.png)'
- en: Photo by [Ales Krivec](https://unsplash.com/@aleskrivec?utm_source=medium&utm_medium=referral)
    on [Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: ç”±[Ales Krivec](https://unsplash.com/@aleskrivec?utm_source=medium&utm_medium=referral)æ‹æ‘„ï¼Œæ¥æºäº[Unsplash](https://unsplash.com/?utm_source=medium&utm_medium=referral)
- en: Introduction
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å¼•è¨€
- en: 'Time series analysis certainly represents one of the most widespread topics
    in the field of data science and machine learning: whether predicting financial
    events, energy consumption, product sales or stock market trends, this field has
    always been of great interest to businesses.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: æ—¶é—´åºåˆ—åˆ†ææ— ç–‘æ˜¯æ•°æ®ç§‘å­¦å’Œæœºå™¨å­¦ä¹ é¢†åŸŸæœ€å¹¿æ³›çš„ä¸»é¢˜ä¹‹ä¸€ï¼šæ— è®ºæ˜¯é¢„æµ‹é‡‘èäº‹ä»¶ã€èƒ½æºæ¶ˆè€—ã€äº§å“é”€å”®è¿˜æ˜¯è‚¡å¸‚è¶‹åŠ¿ï¼Œè¿™ä¸ªé¢†åŸŸä¸€ç›´æ˜¯ä¼ä¸šå…³æ³¨çš„é‡ç‚¹ã€‚
- en: Obviously, the great increase in data availability, combined with the constant
    progress in machine learning models, has made this topic even more interesting
    today. Alongside traditional forecasting methods derived from statistics (e.g.
    regressive models, ARIMA models, exponential smoothing), techniques relating to
    machine learning (e.g. tree-based models) and deep learning (e.g. LSTM Networks,
    CNNs, Transformer-based Models) have emerged for some time now.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: æ˜¾ç„¶ï¼Œæ•°æ®å¯ç”¨æ€§çš„æå¤§å¢åŠ ï¼ŒåŠ ä¸Šæœºå™¨å­¦ä¹ æ¨¡å‹çš„ä¸æ–­è¿›æ­¥ï¼Œä½¿å¾—è¿™ä¸ªè¯é¢˜ä»Šå¤©æ›´åŠ å¼•äººå…³æ³¨ã€‚é™¤äº†ä¼ ç»Ÿçš„ç»Ÿè®¡é¢„æµ‹æ–¹æ³•ï¼ˆå¦‚å›å½’æ¨¡å‹ã€ARIMAæ¨¡å‹ã€æŒ‡æ•°å¹³æ»‘ï¼‰ï¼Œä¸æœºå™¨å­¦ä¹ ï¼ˆå¦‚åŸºäºæ ‘çš„æ¨¡å‹ï¼‰å’Œæ·±åº¦å­¦ä¹ ï¼ˆå¦‚LSTMç½‘ç»œã€CNNã€åŸºäºTransformerçš„æ¨¡å‹ï¼‰ç›¸å…³çš„æŠ€æœ¯å·²ç»å­˜åœ¨ä¸€æ®µæ—¶é—´äº†ã€‚
- en: 'Despite the huge differences between these techniques, there is a preliminary
    step that must be done, no matter what the model is: *Exploratory Data Analysis.*'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: å°½ç®¡è¿™äº›æŠ€æœ¯ä¹‹é—´å­˜åœ¨å·¨å¤§å·®å¼‚ï¼Œä½†æ— è®ºæ¨¡å‹æ˜¯ä»€ä¹ˆï¼Œéƒ½å¿…é¡»å®Œæˆä¸€ä¸ªåˆæ­¥æ­¥éª¤ï¼š*æ¢ç´¢æ€§æ•°æ®åˆ†æ*ã€‚
- en: 'In statistics, **Exploratory Data Analysis** (EDA) is a discipline consisting
    in analyzing and visualizing data in order to summarize their main characteristics
    and gain relevant information from them. This is of considerable importance in
    the data science field because it allows to lay the foundations to another important
    step: *feature engineering*. That is, the practice that consists on creating,
    transforming and extracting features from the dataset so that the model can work
    to the best of its possibilities.'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç»Ÿè®¡å­¦ä¸­ï¼Œ**æ¢ç´¢æ€§æ•°æ®åˆ†æ**ï¼ˆEDAï¼‰æ˜¯ä¸€é—¨åˆ†æå’Œå¯è§†åŒ–æ•°æ®çš„å­¦ç§‘ï¼Œæ—¨åœ¨æ€»ç»“å…¶ä¸»è¦ç‰¹å¾å¹¶ä»ä¸­è·å–ç›¸å…³ä¿¡æ¯ã€‚è¿™åœ¨æ•°æ®ç§‘å­¦é¢†åŸŸå…·æœ‰é‡è¦æ„ä¹‰ï¼Œå› ä¸ºå®ƒä¸ºå¦ä¸€ä¸ªé‡è¦æ­¥éª¤å¥ å®šäº†åŸºç¡€ï¼š*ç‰¹å¾å·¥ç¨‹*ã€‚å³ï¼Œåˆ›å»ºã€è½¬æ¢å’Œæå–æ•°æ®é›†ç‰¹å¾çš„å®è·µï¼Œä»¥ä¾¿æ¨¡å‹èƒ½å¤Ÿå‘æŒ¥æœ€ä½³æ€§èƒ½ã€‚
- en: The objective of this article is therefore to define a clear exploratory data
    analysis template, focused on time series, which can summarize and highlight the
    most important characteristics of the dataset. To do this, we will use some common
    Python libraries such as *Pandas*, *Seaborn* and S*tatsmodel*.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: å› æ­¤ï¼Œæœ¬æ–‡çš„ç›®æ ‡æ˜¯å®šä¹‰ä¸€ä¸ªæ¸…æ™°çš„æ¢ç´¢æ€§æ•°æ®åˆ†ææ¨¡æ¿ï¼Œä¸“æ³¨äºæ—¶é—´åºåˆ—ï¼Œå¯ä»¥æ€»ç»“å¹¶çªå‡ºæ•°æ®é›†çš„æœ€é‡è¦ç‰¹å¾ã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ä¸€äº›å¸¸è§çš„Pythonåº“ï¼Œå¦‚*Pandas*ã€*Seaborn*å’Œ*Statsmodel*ã€‚
- en: Data
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ•°æ®
- en: 'Letâ€™s first define the dataset: for the purposes of this article, we will take
    Kaggleâ€™s [**Hourly Energy Consumption**](https://www.kaggle.com/datasets/robikscube/hourly-energy-consumption)data.
    This dataset relates to PJM Hourly Energy Consumption data, a regional transmission
    organization in the United States, that serves electricity to Delaware, Illinois,
    Indiana, Kentucky, Maryland, Michigan, New Jersey, North Carolina, Ohio, Pennsylvania,
    Tennessee, Virginia, West Virginia, and the District of Columbia.'
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬é¦–å…ˆå®šä¹‰æ•°æ®é›†ï¼šä¸ºäº†æœ¬æ–‡çš„ç›®çš„ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨Kaggleçš„[**æ¯å°æ—¶èƒ½æºæ¶ˆè€—**](https://www.kaggle.com/datasets/robikscube/hourly-energy-consumption)æ•°æ®é›†ã€‚è¯¥æ•°æ®é›†ä¸PJMæ¯å°æ—¶èƒ½æºæ¶ˆè€—æ•°æ®æœ‰å…³ï¼ŒPJMæ˜¯ç¾å›½ä¸€ä¸ªåŒºåŸŸä¼ è¾“ç»„ç»‡ï¼Œå‘ç‰¹æ‹‰åå·ã€ä¼Šåˆ©è¯ºä¼Šå·ã€å°ç¬¬å®‰çº³å·ã€è‚¯å¡”åŸºå·ã€é©¬é‡Œå…°å·ã€å¯†æ­‡æ ¹å·ã€æ–°æ³½è¥¿å·ã€åŒ—å¡ç½—æ¥çº³å·ã€ä¿„äº¥ä¿„å·ã€å®¾å¤•æ³•å°¼äºšå·ã€ç”°çº³è¥¿å·ã€å¼—å‰å°¼äºšå·ã€è¥¿å¼—å‰å°¼äºšå·å’Œå“¥ä¼¦æ¯”äºšç‰¹åŒºæä¾›ç”µåŠ›ã€‚
- en: The hourly power consumption data comes from PJMâ€™s website and are in megawatts
    (MW).
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯å°æ—¶çš„ç”µåŠ›æ¶ˆè€—æ•°æ®æ¥è‡ªPJMç½‘ç«™ï¼Œå•ä½ä¸ºå…†ç“¦ï¼ˆMWï¼‰ã€‚
- en: Exploratory Data Analysis
  id: totrans-17
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ¢ç´¢æ€§æ•°æ®åˆ†æ
- en: Letâ€™s now define which are the most significant analyses to be performed when
    dealing with time series.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è®©æˆ‘ä»¬å®šä¹‰åœ¨å¤„ç†æ—¶é—´åºåˆ—æ—¶éœ€è¦è¿›è¡Œçš„æœ€é‡è¦çš„åˆ†æã€‚
- en: 'For sure, one of the most important thing is to plot the data: graphs can highlight
    many features, such as patterns, unusual observations, changes over time, and
    relationships between variables. As already said, the insight that emerge from
    these plots must then be taken into consideration, as much as possible, into the
    forecasting model. Moreover, some mathematical tools such as descriptive statistics
    and time series decomposition, will also be very useful.'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: å½“ç„¶ï¼Œå…¶ä¸­æœ€é‡è¦çš„äº‹æƒ…ä¹‹ä¸€æ˜¯ç»˜åˆ¶æ•°æ®å›¾è¡¨ï¼šå›¾å½¢å¯ä»¥çªå‡ºæ˜¾ç¤ºè®¸å¤šç‰¹å¾ï¼Œå¦‚æ¨¡å¼ã€å¼‚å¸¸è§‚å¯Ÿã€éšæ—¶é—´å˜åŒ–çš„å˜åŒ–ä»¥åŠå˜é‡ä¹‹é—´çš„å…³ç³»ã€‚å¦‚å‰æ‰€è¿°ï¼Œä»è¿™äº›å›¾è¡¨ä¸­å¾—å‡ºçš„è§è§£å¿…é¡»å°½å¯èƒ½åœ°çº³å…¥é¢„æµ‹æ¨¡å‹ä¸­ã€‚æ­¤å¤–ï¼Œä¸€äº›æ•°å­¦å·¥å…·ï¼Œå¦‚æè¿°æ€§ç»Ÿè®¡å’Œæ—¶é—´åºåˆ—åˆ†è§£ï¼Œä¹Ÿå°†éå¸¸æœ‰ç”¨ã€‚
- en: 'Said that, the EDA Iâ€™m proposing in this article consists on six steps: Descriptive
    Statistics, Time Plot, Seasonal Plots, Box Plots, Time Series Decomposition, Lag
    Analysis.'
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: ä¹Ÿå°±æ˜¯è¯´ï¼Œæœ¬æ–‡æå‡ºçš„æ¢ç´¢æ€§æ•°æ®åˆ†æï¼ˆEDAï¼‰åŒ…å«å…­ä¸ªæ­¥éª¤ï¼šæè¿°æ€§ç»Ÿè®¡ã€æ—¶é—´å›¾ã€å­£èŠ‚æ€§å›¾ã€ç®±å‹å›¾ã€æ—¶é—´åºåˆ—åˆ†è§£ã€æ»ååˆ†æã€‚
- en: 1\. Descriptive Statistics
  id: totrans-21
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 1\. æè¿°æ€§ç»Ÿè®¡
- en: Descriptive statistic is a summary statistic that quantitatively describes or
    summarizes features from a collection of structured data.
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: æè¿°æ€§ç»Ÿè®¡æ˜¯å®šé‡æè¿°æˆ–æ€»ç»“ç»“æ„åŒ–æ•°æ®é›†åˆç‰¹å¾çš„æ±‡æ€»ç»Ÿè®¡é‡ã€‚
- en: 'Some metrics that are commonly used to describe a dataset are: measures of
    central tendency (e.g. *mean*, *median*), measures of dispersion (e.g. *range*,
    *standard deviation*), and measure of position (e.g. *percentiles*, *quartile*).
    All of them can be summarized by the so called **five number summary**, which
    include: minimum, first quartile (Q1), median or second quartile (Q2), third quartile
    (Q3) and maximum of a distribution.'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: æè¿°æ•°æ®é›†æ—¶å¸¸ç”¨çš„ä¸€äº›æŒ‡æ ‡åŒ…æ‹¬ï¼šé›†ä¸­è¶‹åŠ¿åº¦é‡ï¼ˆä¾‹å¦‚*å‡å€¼*ã€*ä¸­ä½æ•°*ï¼‰ã€ç¦»æ•£ç¨‹åº¦åº¦é‡ï¼ˆä¾‹å¦‚*èŒƒå›´*ã€*æ ‡å‡†å·®*ï¼‰å’Œä½ç½®åº¦é‡ï¼ˆä¾‹å¦‚*ç™¾åˆ†ä½æ•°*ã€*å››åˆ†ä½æ•°*ï¼‰ã€‚æ‰€æœ‰è¿™äº›æŒ‡æ ‡éƒ½å¯ä»¥é€šè¿‡æ‰€è°“çš„**äº”æ•°æ±‡æ€»**è¿›è¡Œæ€»ç»“ï¼Œå…¶ä¸­åŒ…æ‹¬ï¼šæœ€å°å€¼ã€ç¬¬ä¸€å››åˆ†ä½æ•°ï¼ˆQ1ï¼‰ã€ä¸­ä½æ•°æˆ–ç¬¬äºŒå››åˆ†ä½æ•°ï¼ˆQ2ï¼‰ã€ç¬¬ä¸‰å››åˆ†ä½æ•°ï¼ˆQ3ï¼‰å’Œåˆ†å¸ƒçš„æœ€å¤§å€¼ã€‚
- en: 'In Python, these information can be easily retrieved using the well know `describe`
    method from Pandas:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨Pythonä¸­ï¼Œè¿™äº›ä¿¡æ¯å¯ä»¥é€šè¿‡Pandasä¸­è‘—åçš„`describe`æ–¹æ³•è½»æ¾æ£€ç´¢ï¼š
- en: '[PRE0]'
  id: totrans-25
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: '![](../Images/569c28931bca7ee75e4366dbbd6b91db.png)'
  id: totrans-26
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/569c28931bca7ee75e4366dbbd6b91db.png)'
- en: 1\. PJME statistic summary.
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 1\. PJMEç»Ÿè®¡æ±‡æ€»ã€‚
- en: 2\. Time plot
  id: totrans-28
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 2\. æ—¶é—´å›¾
- en: The obvious graph to start with is the time plot. That is, the observations
    are plotted against the time they were observed, with consecutive observations
    joined by lines.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: å¼€å§‹æ—¶ï¼Œæœ€æ˜æ˜¾çš„å›¾è¡¨æ˜¯æ—¶é—´å›¾ã€‚è¿™æ„å‘³ç€ï¼Œè§‚æµ‹ç»“æœæ˜¯æ ¹æ®å…¶è§‚æµ‹æ—¶é—´ç»˜åˆ¶çš„ï¼Œè¿ç»­çš„è§‚æµ‹ç‚¹é€šè¿‡çº¿æ¡è¿æ¥ã€‚
- en: 'In Python , we can use Pandas and Matplotlib:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ Python ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ Pandas å’Œ Matplotlibï¼š
- en: '[PRE1]'
  id: totrans-31
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: '![](../Images/d9bd55add95ba151a92842566151524f.png)'
  id: totrans-32
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d9bd55add95ba151a92842566151524f.png)'
- en: 2.1 PJME Consumption Time Plot.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 2.1 PJME æ¶ˆè€—æ—¶é—´å›¾ã€‚
- en: 'This plot already provides several information:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªå›¾è¡¨å·²ç»æä¾›äº†è‹¥å¹²ä¿¡æ¯ï¼š
- en: As we could expect, the pattern shows yearly seasonality.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æ­£å¦‚æˆ‘ä»¬æ‰€é¢„æœŸçš„ï¼Œå›¾å½¢æ˜¾ç¤ºäº†å¹´åº¦å­£èŠ‚æ€§å˜åŒ–ã€‚
- en: Focusing on a single year, it seems that more pattern emerges. Likely, the consumptions
    will have a peak in winter and one another in summer, due to the greater electricity
    consumption.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: èšç„¦äºå•ä¸€å¹´ä»½æ—¶ï¼Œä¼¼ä¹ä¼šæœ‰æ›´å¤šçš„æ¨¡å¼å‡ºç°ã€‚å¾ˆå¯èƒ½ï¼Œèƒ½è€—åœ¨å†¬å­£ä¼šæœ‰ä¸€ä¸ªé«˜å³°ï¼Œå¤å­£ä¹Ÿä¼šæœ‰ä¸€ä¸ªé«˜å³°ï¼ŒåŸå› æ˜¯æ›´å¤§çš„ç”µåŠ›æ¶ˆè€—ã€‚
- en: The series does not exhibit a clear increasing/decreasing trend over the years,
    the average consumptions remains stationary.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: è¯¥ç³»åˆ—æ²¡æœ‰è¡¨ç°å‡ºæ˜ç¡®çš„å¢é•¿/ä¸‹é™è¶‹åŠ¿ï¼Œå¹³å‡èƒ½è€—ä¿æŒç¨³å®šã€‚
- en: There is an anomalous value around 2023, probably it should be imputed when
    implementing the model.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: åœ¨2023å¹´å·¦å³å‡ºç°äº†ä¸€ä¸ªå¼‚å¸¸å€¼ï¼Œå¯èƒ½åœ¨å®ç°æ¨¡å‹æ—¶åº”è¯¥è¿›è¡Œè¡¥å¿ã€‚
- en: 3\. Seasonal Plots
  id: totrans-39
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3. å­£èŠ‚æ€§å›¾
- en: A seasonal plot is fundamentally a time plot where data are plotted against
    the individual â€œseasonsâ€ of the series they belong.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: å­£èŠ‚æ€§å›¾åŸºæœ¬ä¸Šæ˜¯ä¸€ä¸ªæ—¶é—´å›¾ï¼Œå…¶ä¸­æ•°æ®æ ¹æ®å…¶æ‰€å±çš„å„ä¸ªâ€œå­£èŠ‚â€è¿›è¡Œç»˜åˆ¶ã€‚
- en: 'Regarding energy consumption, we usually have hourly data available, so there
    could be several seasonality: *yearly*, *weekly*, *daily*. Before going deep into
    these plots, letâ€™s first set up some variables in our Pandas dataframe:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: å…³äºèƒ½æºæ¶ˆè€—ï¼Œæˆ‘ä»¬é€šå¸¸æœ‰æ¯å°æ—¶çš„æ•°æ®ï¼Œå› æ­¤å¯èƒ½ä¼šæœ‰å‡ ç§å­£èŠ‚æ€§ï¼š*å¹´åº¦*ã€*æ¯å‘¨*ã€*æ¯æ—¥*ã€‚åœ¨æ·±å…¥åˆ†æè¿™äº›å›¾è¡¨ä¹‹å‰ï¼Œæˆ‘ä»¬å…ˆåœ¨ Pandas æ•°æ®æ¡†ä¸­è®¾ç½®ä¸€äº›å˜é‡ï¼š
- en: '[PRE2]'
  id: totrans-42
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 3.1 Seasonal plot â€” Yearly consumption
  id: totrans-43
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.1 å­£èŠ‚æ€§å›¾ â€” å¹´åº¦æ¶ˆè´¹
- en: A very interesting plot is the one referring to the energy consumption grouped
    by year over months, this highlights yearly seasonality and can inform us about
    ascending/descending trends over the years.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªéå¸¸æœ‰è¶£çš„å›¾è¡¨æ˜¯å…³äºæŒ‰å¹´åˆ†ç»„çš„æ¯æœˆèƒ½è€—å›¾ï¼Œè¿™çªå‡ºäº†å¹´åº¦å­£èŠ‚æ€§å˜åŒ–ï¼Œå¹¶ä¸”å¯ä»¥å‘Šè¯‰æˆ‘ä»¬å¤šå¹´é—´çš„ä¸Šå‡/ä¸‹é™è¶‹åŠ¿ã€‚
- en: 'Here is the Python code:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ Python ä»£ç ï¼š
- en: '[PRE3]'
  id: totrans-46
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '![](../Images/d81109dc87e66d8794e60ec39136e05a.png)'
  id: totrans-47
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d81109dc87e66d8794e60ec39136e05a.png)'
- en: 3.1 PJME Yearly Seasonal Plot
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 3.1 PJME å¹´åº¦å­£èŠ‚æ€§å›¾
- en: 'This plot shows every year has actually a very predefined pattern: the consumption
    increases significantly during winter and has a peak in summer (due to heating/cooling
    systems), while has a minima in spring and in autumn when no heating or cooling
    is usually required.'
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: è¯¥å›¾æ˜¾ç¤ºæ¯å¹´å®é™…ä¸Šæœ‰ä¸€ä¸ªéå¸¸é¢„å®šä¹‰çš„æ¨¡å¼ï¼šå†¬å­£æ¶ˆè´¹æ˜¾è‘—å¢åŠ ï¼Œå¤å­£è¾¾åˆ°å³°å€¼ï¼ˆç”±äºä¾›æš–/åˆ¶å†·ç³»ç»Ÿï¼‰ï¼Œè€Œæ˜¥å­£å’Œç§‹å­£é€šå¸¸ä¸éœ€è¦ä¾›æš–æˆ–åˆ¶å†·ï¼Œå› æ­¤æ¶ˆè´¹æœ€å°ã€‚
- en: Furthermore, this plot tells us thatâ€™s not a clear increasing/decreasing pattern
    in the overall consumptions across years.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: æ­¤å¤–ï¼Œè¯¥å›¾å‘Šè¯‰æˆ‘ä»¬ï¼Œåœ¨æ•´ä½“èƒ½è€—ä¸Šï¼Œè·¨å¹´å¹¶æ²¡æœ‰æ˜ç¡®çš„å¢é•¿/ä¸‹é™è¶‹åŠ¿ã€‚
- en: 3.2 Seasonal plot â€” Weekly consumption
  id: totrans-51
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.2 å­£èŠ‚æ€§å›¾ â€” æ¯å‘¨æ¶ˆè´¹
- en: Another useful plot is the weekly plot, it depicts the consumptions during the
    week over months and can also suggest if and how weekly consumptions are changing
    over a single year.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: å¦ä¸€ä¸ªæœ‰ç”¨çš„å›¾è¡¨æ˜¯æ¯å‘¨å›¾è¡¨ï¼Œå®ƒæç»˜äº†æ¯æœˆå†…ä¸€å‘¨çš„èƒ½è€—å˜åŒ–ï¼Œè¿˜å¯ä»¥æç¤ºæˆ‘ä»¬èƒ½è€—åœ¨å•ä¸€å¹´ä»½ä¸­çš„å˜åŒ–æƒ…å†µã€‚
- en: 'Letâ€™s see how to figure it out with Python:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ç”¨ Python æ¥è§£å†³è¿™ä¸ªé—®é¢˜ï¼š
- en: '[PRE4]'
  id: totrans-54
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '![](../Images/072c928e8b54ab3ce70e7607a0e5f7f1.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/072c928e8b54ab3ce70e7607a0e5f7f1.png)'
- en: 3.2 PJME Weekly Seasonal Plot
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 3.2 PJME æ¯å‘¨å­£èŠ‚æ€§å›¾
- en: 3.3 Seasonal plot â€” Daily consumption
  id: totrans-57
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.3 å­£èŠ‚æ€§å›¾ â€” æ—¥å¸¸æ¶ˆè´¹
- en: Finally, the last seasonal plot I want to show is the daily consumption plot.
    As you can guess, it represents how consumption change over the day. In this case,
    data are first grouped by day of week and then aggregated taking the mean.
  id: totrans-58
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œæˆ‘æƒ³å±•ç¤ºçš„æœ€åä¸€ä¸ªå­£èŠ‚æ€§å›¾æ˜¯æ—¥å¸¸èƒ½è€—å›¾ã€‚å¦‚ä½ æ‰€çŒœæµ‹ï¼Œå®ƒè¡¨ç¤ºèƒ½è€—åœ¨ä¸€å¤©å†…çš„å˜åŒ–ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ•°æ®é¦–å…ˆæŒ‰æ˜ŸæœŸå‡ åˆ†ç»„ï¼Œç„¶åèšåˆè®¡ç®—å‡å€¼ã€‚
- en: 'Hereâ€™s the code:'
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™æ˜¯ä»£ç ï¼š
- en: '[PRE5]'
  id: totrans-60
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '![](../Images/9e0cc04edfadccf0216f2b1c90e5e291.png)'
  id: totrans-61
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9e0cc04edfadccf0216f2b1c90e5e291.png)'
- en: 3.3 PJME Daily Seasonal Plot
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: 3.3 PJME æ—¥å¸¸å­£èŠ‚æ€§å›¾
- en: Often, this plot show a very typical pattern, someone calls it â€œM profileâ€ since
    consumptions seems to depict an â€œMâ€ during the day. Sometimes this pattern is
    clear, others not (like in this case).
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: é€šå¸¸ï¼Œè¿™ä¸ªå›¾æ˜¾ç¤ºå‡ºä¸€ä¸ªéå¸¸å…¸å‹çš„æ¨¡å¼ï¼Œæœ‰äººç§°ä¹‹ä¸ºâ€œMå‹â€ï¼Œå› ä¸ºèƒ½è€—ä¼¼ä¹åœ¨ä¸€å¤©å†…å½¢æˆä¸€ä¸ªâ€œMâ€å½¢ã€‚æœ‰æ—¶è¿™ä¸ªæ¨¡å¼å¾ˆæ˜æ˜¾ï¼Œæœ‰æ—¶åˆ™ä¸æ˜æ˜¾ï¼ˆå°±åƒåœ¨è¿™ä¸ªæ¡ˆä¾‹ä¸­ï¼‰ã€‚
- en: However, this plots usually shows a relative peak in the middle of the day (from
    10 am to 2 pm), then a relative minima (from 2 pm to 6 pm) and another peak (from
    6 pm to 8 pm). Finally, it also shows the difference in consumptions from weekends
    and other days.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: ç„¶è€Œï¼Œè¿™äº›å›¾è¡¨é€šå¸¸æ˜¾ç¤ºå‡ºä¸€å¤©ä¸­é—´çš„ç›¸å¯¹å³°å€¼ï¼ˆä»ä¸Šåˆ10ç‚¹åˆ°ä¸‹åˆ2ç‚¹ï¼‰ï¼Œç„¶åæ˜¯ä¸€ä¸ªç›¸å¯¹çš„æœ€ä½å€¼ï¼ˆä»ä¸‹åˆ2ç‚¹åˆ°6ç‚¹ï¼‰ï¼Œå†åˆ°å¦ä¸€ä¸ªå³°å€¼ï¼ˆä»ä¸‹åˆ6ç‚¹åˆ°8ç‚¹ï¼‰ã€‚æœ€åï¼Œå®ƒè¿˜æ˜¾ç¤ºäº†å‘¨æœ«å’Œå…¶ä»–æ—¥æœŸçš„æ¶ˆè´¹å·®å¼‚ã€‚
- en: 3.4 Seasonal plot â€” Feature Engineering
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 3.4 å­£èŠ‚æ€§å›¾è¡¨ â€” ç‰¹å¾å·¥ç¨‹
- en: Letâ€™s now see how to use this information for feature engineering. Letâ€™s suppose
    we are using some ML model that requires good quality features (e.g. ARIMA models
    or tree-based models).
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹å¦‚ä½•ä½¿ç”¨è¿™äº›ä¿¡æ¯è¿›è¡Œç‰¹å¾å·¥ç¨‹ã€‚å‡è®¾æˆ‘ä»¬æ­£åœ¨ä½¿ç”¨ä¸€äº›éœ€è¦é«˜è´¨é‡ç‰¹å¾çš„æœºå™¨å­¦ä¹ æ¨¡å‹ï¼ˆä¾‹å¦‚ARIMAæ¨¡å‹æˆ–åŸºäºæ ‘çš„æ¨¡å‹ï¼‰ã€‚
- en: 'These are the main evidences coming from seasonal plots:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ˜¯æ¥è‡ªå­£èŠ‚æ€§å›¾è¡¨çš„ä¸»è¦è¯æ®ï¼š
- en: 'Yearly consumptions do not change a lot over years: this suggests the possibility
    to use, when available, yearly seasonality features coming from lag or exogenous
    variables.'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: å¹´åº¦æ¶ˆè´¹åœ¨å‡ å¹´é—´å˜åŒ–ä¸å¤§ï¼šè¿™æç¤ºæˆ‘ä»¬å¯ä»¥åœ¨å¯ç”¨çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨æ¥è‡ªæ»åæˆ–å¤–ç”Ÿå˜é‡çš„å¹´åº¦å­£èŠ‚æ€§ç‰¹å¾ã€‚
- en: 'Weekly consumptions follow the same pattern across months: this suggests to
    use weekly features coming from lag or exogenous variables.'
  id: totrans-69
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æ¯å‘¨çš„æ¶ˆè´¹åœ¨å„ä¸ªæœˆä»½é—´éµå¾ªç›¸åŒçš„æ¨¡å¼ï¼šè¿™æç¤ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ¥è‡ªæ»åæˆ–å¤–ç”Ÿå˜é‡çš„æ¯å‘¨ç‰¹å¾ã€‚
- en: 'Daily consumption differs from normal days and weekends: this suggest to use
    categorical features able to identify when a day is a normal day and when it is
    not.'
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: æ—¥å¸¸æ¶ˆè´¹åœ¨æ™®é€šå·¥ä½œæ—¥å’Œå‘¨æœ«æœ‰æ‰€ä¸åŒï¼šè¿™æç¤ºæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ç±»åˆ«ç‰¹å¾æ¥è¯†åˆ«æŸä¸€å¤©æ˜¯å¦ä¸ºæ™®é€šå·¥ä½œæ—¥ã€‚
- en: 4\. Box Plots
  id: totrans-71
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4\. ç®±å‹å›¾
- en: 'Boxplot are a useful way to identify how data are distributed. Briefly, boxplots
    depict percentiles, which represent 1st (Q1), 2nd (Q2/median) and 3rd (Q3) quartile
    of a distribution and whiskers, which represent the range of the data. Every value
    beyond the whiskers can be thought as an *outlier*, more in depth, whiskers are
    often computed as:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: ç®±å‹å›¾æ˜¯è¯†åˆ«æ•°æ®åˆ†å¸ƒçš„ä¸€ç§æœ‰ç”¨æ–¹å¼ã€‚ç®€è€Œè¨€ä¹‹ï¼Œç®±å‹å›¾æç»˜äº†åˆ†ä½æ•°ï¼Œä»£è¡¨åˆ†å¸ƒçš„ç¬¬1å››åˆ†ä½æ•°ï¼ˆQ1ï¼‰ã€ç¬¬2å››åˆ†ä½æ•°ï¼ˆQ2/ä¸­ä½æ•°ï¼‰å’Œç¬¬3å››åˆ†ä½æ•°ï¼ˆQ3ï¼‰ï¼Œä»¥åŠé¡»çŠ¶çº¿ï¼Œä»£è¡¨æ•°æ®çš„èŒƒå›´ã€‚ä»»ä½•è¶…å‡ºé¡»çŠ¶çº¿çš„å€¼éƒ½å¯ä»¥è¢«è§†ä¸º*å¼‚å¸¸å€¼*ï¼Œæ›´æ·±å…¥åœ°è¯´ï¼Œé¡»çŠ¶çº¿é€šå¸¸æ˜¯é€šè¿‡ä»¥ä¸‹æ–¹å¼è®¡ç®—çš„ï¼š
- en: '![](../Images/06e5f1fe1b65dbcd7f018e268cf2ba24.png)'
  id: totrans-73
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/06e5f1fe1b65dbcd7f018e268cf2ba24.png)'
- en: 4\. Whiskers Formula
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 4\. é¡»çŠ¶çº¿å…¬å¼
- en: 4.1 Box Plots â€” Total consumption
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.1 ç®±å‹å›¾ â€” æ€»æ¶ˆè´¹
- en: 'Letâ€™s first compute the box plot regarding the total consumption, this can
    be easily done with *Seaborn*:'
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆè®©æˆ‘ä»¬è®¡ç®—å…³äºæ€»æ¶ˆè´¹çš„ç®±å‹å›¾ï¼Œè¿™å¯ä»¥é€šè¿‡*Seaborn*è½»æ¾å®Œæˆï¼š
- en: '[PRE6]'
  id: totrans-77
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '![](../Images/bcb675b3d2364e13ed03d36cc3cbc140.png)'
  id: totrans-78
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/bcb675b3d2364e13ed03d36cc3cbc140.png)'
- en: 4.1 PJME Boxplot
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 4.1 PJME ç®±å‹å›¾
- en: Even if this plot seems not to be much informative, it tells us we are dealing
    with a Gaussian-like distribution, with a tail more accentuated towards the right.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: å³ä½¿è¿™ä¸ªå›¾è¡¨çœ‹èµ·æ¥ä¿¡æ¯ä¸å¤šï¼Œå®ƒå‘Šè¯‰æˆ‘ä»¬æˆ‘ä»¬æ­£å¤„ç†ä¸€ä¸ªç±»ä¼¼é«˜æ–¯åˆ†å¸ƒçš„æƒ…å†µï¼Œä¸”å°¾éƒ¨åœ¨å³ä¾§æ›´åŠ çªå‡ºã€‚
- en: 4.2 Box Plots â€” Day month distribution
  id: totrans-81
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.2 ç®±å‹å›¾ â€” å¤©æœˆåˆ†å¸ƒ
- en: 'A very interesting plot is the day/month box plot. It is obtained creating
    a â€œday monthâ€ variable and grouping consumptions by it. Here is the code, referring
    only from year 2017:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ä¸ªéå¸¸æœ‰è¶£çš„å›¾è¡¨æ˜¯æŒ‰å¤©/æœˆåˆ†ç®±å›¾ã€‚å®ƒæ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ªâ€œå¤© æœˆâ€å˜é‡å¹¶æŒ‰æ­¤å˜é‡å¯¹æ¶ˆè´¹è¿›è¡Œåˆ†ç»„å¾—åˆ°çš„ã€‚ä»¥ä¸‹æ˜¯ä»£ç ï¼Œåªæ¶‰åŠä»2017å¹´å¼€å§‹çš„æ•°æ®ï¼š
- en: '[PRE7]'
  id: totrans-83
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '![](../Images/6ebf1b885874f81ddd75c7a79a975425.png)'
  id: totrans-84
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/6ebf1b885874f81ddd75c7a79a975425.png)'
- en: 4.2 PJME Year/Month Boxplot
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 4.2 PJME å¹´/æœˆç®±å‹å›¾
- en: It can be seen that consumption are less uncertain in summer/winter months (i.e.
    when we have peaks) while are more dispersed in spring/autumn (i.e. when temperatures
    are more variable). Finally, consumption in summer 2018 are higher than 2017,
    maybe due to a warmer summer. When feature engineering, remember to include (if
    available) the temperature curve, probably it can be used as an exogenous variable.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: å¯ä»¥çœ‹å‡ºï¼Œå¤å­£/å†¬å­£æœˆä»½çš„æ¶ˆè´¹ä¸ç¡®å®šæ€§è¾ƒä½ï¼ˆå³ï¼Œå½“æˆ‘ä»¬æœ‰å³°å€¼æ—¶ï¼‰ï¼Œè€Œæ˜¥å­£/ç§‹å­£åˆ™æ›´ä¸ºåˆ†æ•£ï¼ˆå³ï¼Œå½“æ¸©åº¦æ›´ä¸ºå˜åŒ–æ—¶ï¼‰ã€‚æœ€åï¼Œ2018å¹´å¤å­£çš„æ¶ˆè´¹é«˜äº2017å¹´ï¼Œå¯èƒ½æ˜¯ç”±äºå¤å­£æ°”æ¸©è¾ƒé«˜ã€‚åœ¨è¿›è¡Œç‰¹å¾å·¥ç¨‹æ—¶ï¼Œè¯·è®°å¾—åŒ…å«ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰æ¸©åº¦æ›²çº¿ï¼Œå®ƒå¯èƒ½ä½œä¸ºå¤–ç”Ÿå˜é‡ä½¿ç”¨ã€‚
- en: 4.3 Box Plots â€” Day distribution
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.3 ç®±å‹å›¾ â€” å¤©åˆ†å¸ƒ
- en: Another useful plot is the one referring consumption distribution over the week,
    this is similar to the weekly consumption seasonal plot.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: å¦ä¸€ä¸ªæœ‰ç”¨çš„å›¾è¡¨æ˜¯æ˜¾ç¤ºä¸€å‘¨å†…æ¶ˆè´¹åˆ†å¸ƒçš„å›¾è¡¨ï¼Œè¿™ä¸æ¯å‘¨æ¶ˆè´¹å­£èŠ‚æ€§å›¾è¡¨ç±»ä¼¼ã€‚
- en: '[PRE8]'
  id: totrans-89
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '![](../Images/ad9f40a6f45d4957e36315b08229a7a7.png)'
  id: totrans-90
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ad9f40a6f45d4957e36315b08229a7a7.png)'
- en: 4.3 PJME Day Boxplot
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 4.3 PJME å¤©ç®±å‹å›¾
- en: As seen before, consumptions are noticeably lower on weekends. Anyway, there
    are several outliers pointing out that calendar features like â€œday of weekâ€ for
    sure are useful but could not fully explain the series.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚å‰æ‰€è§ï¼Œæ¶ˆè´¹åœ¨å‘¨æœ«æ˜æ˜¾è¾ƒä½ã€‚ä¸è¿‡ï¼Œæœ‰å‡ ä¸ªå¼‚å¸¸å€¼è¡¨æ˜åƒâ€œæ˜ŸæœŸå‡ â€è¿™æ ·çš„æ—¥å†ç‰¹å¾ç¡®å®æœ‰ç”¨ï¼Œä½†å¯èƒ½æ— æ³•å®Œå…¨è§£é‡Šè¯¥åºåˆ—ã€‚
- en: 4.4 Box Plots â€” Hour distribution
  id: totrans-93
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 4.4 ç®±å‹å›¾ â€” å°æ—¶åˆ†å¸ƒ
- en: 'Letâ€™s finally see hour distribution box plot. It is similar to the daily consumption
    seasonal plot since it provides how consumptions are distributed over the day.
    Following, the code:'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åæˆ‘ä»¬æ¥çœ‹å°æ—¶åˆ†å¸ƒç®±å‹å›¾ã€‚å®ƒä¸æ¯æ—¥æ¶ˆè´¹å­£èŠ‚æ€§å›¾ç±»ä¼¼ï¼Œå› ä¸ºå®ƒå±•ç¤ºäº†æ¶ˆè´¹å¦‚ä½•åœ¨ä¸€å¤©å†…åˆ†å¸ƒã€‚æ¥ä¸‹æ¥æ˜¯ä»£ç ï¼š
- en: '[PRE9]'
  id: totrans-95
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '![](../Images/807ad6d26cec4a5520a05176ff392043.png)'
  id: totrans-96
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/807ad6d26cec4a5520a05176ff392043.png)'
- en: 4.4 PJME Hour Boxplot
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 4.4 PJMEå°æ—¶ç®±å‹å›¾
- en: Note that the â€œMâ€ shape seen before is now much more crushed. Furthermore there
    are a lot of outliers, this tells us data not only relies on daily seasonality
    (e.g. the consumption on todayâ€™s 12 am is similar to the consumption of yesterday
    12 am) but also on something else, probably some exogenous climatic feature like
    temperature or humidity.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: æ³¨æ„ï¼Œä¹‹å‰çœ‹åˆ°çš„â€œMâ€å½¢çŠ¶ç°åœ¨å˜å¾—æ›´åŠ å‹ç¼©ã€‚æ­¤å¤–ï¼Œæœ‰å¾ˆå¤šç¦»ç¾¤ç‚¹ï¼Œè¿™å‘Šè¯‰æˆ‘ä»¬æ•°æ®ä¸ä»…ä¾èµ–äºæ—¥å¸¸å­£èŠ‚æ€§ï¼ˆä¾‹å¦‚ä»Šå¤©12ç‚¹çš„æ¶ˆè´¹ä¸æ˜¨å¤©12ç‚¹çš„æ¶ˆè´¹ç›¸ä¼¼ï¼‰ï¼Œè¿˜ä¾èµ–äºå…¶ä»–å› ç´ ï¼Œå¯èƒ½æ˜¯æŸäº›å¤–éƒ¨æ°”å€™å› ç´ ï¼Œå¦‚æ¸©åº¦æˆ–æ¹¿åº¦ã€‚
- en: 5\. Time Series Decomposition
  id: totrans-99
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 5. æ—¶é—´åºåˆ—åˆ†è§£
- en: As already said, time series data can exhibit a variety of patterns. Often,
    it is helpful to split a time series into several components, each representing
    an underlying pattern category.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚å‰æ‰€è¿°ï¼Œæ—¶é—´åºåˆ—æ•°æ®å¯èƒ½è¡¨ç°å‡ºå¤šç§æ¨¡å¼ã€‚é€šå¸¸ï¼Œå°†æ—¶é—´åºåˆ—åˆ†è§£ä¸ºå¤šä¸ªæˆåˆ†ï¼Œæ¯ä¸ªæˆåˆ†ä»£è¡¨ä¸€ä¸ªæ½œåœ¨çš„æ¨¡å¼ç±»åˆ«ï¼Œè¿™å¯¹åˆ†æéå¸¸æœ‰å¸®åŠ©ã€‚
- en: 'We can think of a time series as comprising three components: a *trend* component,
    a *seasonal* component and a *remainder* component (containing anything else in
    the time series). For some time series (e.g., energy consumption series), there
    can be more than one seasonal component, corresponding to different seasonal periods
    (daily, weekly, monthly, yearly).'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å¯ä»¥å°†æ—¶é—´åºåˆ—çœ‹ä½œç”±ä¸‰ä¸ªæˆåˆ†ç»„æˆï¼š*è¶‹åŠ¿*æˆåˆ†ã€*å­£èŠ‚æ€§*æˆåˆ†å’Œ*æ®‹å·®*æˆåˆ†ï¼ˆåŒ…å«æ—¶é—´åºåˆ—ä¸­çš„å…¶ä»–æ‰€æœ‰å› ç´ ï¼‰ã€‚å¯¹äºæŸäº›æ—¶é—´åºåˆ—ï¼ˆä¾‹å¦‚ï¼Œèƒ½æºæ¶ˆè´¹åºåˆ—ï¼‰ï¼Œå¯èƒ½å­˜åœ¨å¤šä¸ªå­£èŠ‚æ€§æˆåˆ†ï¼Œå¯¹åº”ä¸åŒçš„å­£èŠ‚å‘¨æœŸï¼ˆæ¯æ—¥ã€æ¯å‘¨ã€æ¯æœˆã€æ¯å¹´ï¼‰ã€‚
- en: 'There are two main type of decomposition: *additive* and *multiplicative*.'
  id: totrans-102
  prefs: []
  type: TYPE_NORMAL
  zh: æ—¶é—´åºåˆ—åˆ†è§£æœ‰ä¸¤ç§ä¸»è¦ç±»å‹ï¼š*åŠ æ€§*å’Œ*ä¹˜æ€§*ã€‚
- en: 'For the additive decomposition, we represent a series (ğ‘¦) as the sum of a seasonal
    component (ğ‘†), a trend (ğ‘‡) and a remainder (ğ‘…):'
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: å¯¹äºåŠ æ€§åˆ†è§£ï¼Œæˆ‘ä»¬å°†ä¸€ä¸ªæ—¶é—´åºåˆ—ï¼ˆğ‘¦ï¼‰è¡¨ç¤ºä¸ºå­£èŠ‚æ€§æˆåˆ†ï¼ˆğ‘†ï¼‰ã€è¶‹åŠ¿ï¼ˆğ‘‡ï¼‰å’Œæ®‹å·®ï¼ˆğ‘…ï¼‰çš„å’Œï¼š
- en: '![](../Images/e17ee10b8116c19d217f65fd55260dfd.png)'
  id: totrans-104
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e17ee10b8116c19d217f65fd55260dfd.png)'
- en: 'Similarly, a multiplicative decomposition can be written as:'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: åŒæ ·ï¼Œä¹˜æ€§åˆ†è§£å¯ä»¥å†™æˆï¼š
- en: '![](../Images/e242c6a97fc1dad2ad2fc5598e1b1ea4.png)'
  id: totrans-106
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/e242c6a97fc1dad2ad2fc5598e1b1ea4.png)'
- en: Generally speaking, additive decomposition best represent series with constant
    variance while multiplicative decomposition best suits time series with non-stationary
    variances.
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€èˆ¬æ¥è¯´ï¼ŒåŠ æ€§åˆ†è§£æœ€é€‚åˆæ–¹å·®æ’å®šçš„åºåˆ—ï¼Œè€Œä¹˜æ€§åˆ†è§£æœ€é€‚åˆæ–¹å·®éå¹³ç¨³çš„æ—¶é—´åºåˆ—ã€‚
- en: 'In Python, time series decomposition can be easily fulfilled with *Statsmodel*
    library:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨Pythonä¸­ï¼Œæ—¶é—´åºåˆ—åˆ†è§£å¯ä»¥é€šè¿‡*Statsmodel*åº“è½»æ¾å®ç°ï¼š
- en: '[PRE10]'
  id: totrans-109
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '![](../Images/1e6aac354ac11d476f1aa4d7b27c75ec.png)'
  id: totrans-110
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/1e6aac354ac11d476f1aa4d7b27c75ec.png)'
- en: 5.1 PJME Series Decomposition â€” Additive Decompose.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 5.1 PJMEç³»åˆ—åˆ†è§£ â€” åŠ æ€§åˆ†è§£ã€‚
- en: '![](../Images/ce50a9bfc23a07acefea8bb56927df5f.png)'
  id: totrans-112
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/ce50a9bfc23a07acefea8bb56927df5f.png)'
- en: 5.2 PJME Series Decomposition â€” Multiplicative Decompose.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 5.2 PJMEç³»åˆ—åˆ†è§£ â€” ä¹˜æ€§åˆ†è§£ã€‚
- en: 'The above plots refers to 2017\. In both cases, we see the trend has several
    local peaks, with higher values in summer. From the seasonal component, we can
    see the series actually has several periodicities, this plot highlights more the
    weekly one, but if we focus on a particular month (January) of the same year,
    daily seasonality emerges too:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸Šè¿°å›¾è¡¨æ˜¯æŒ‡2017å¹´ã€‚åœ¨è¿™ä¸¤ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°è¶‹åŠ¿æœ‰å‡ ä¸ªå±€éƒ¨å³°å€¼ï¼Œå¤å­£çš„å€¼è¾ƒé«˜ã€‚ä»å­£èŠ‚æ€§æˆåˆ†ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹åˆ°åºåˆ—å®é™…ä¸Šæœ‰å‡ ä¸ªå‘¨æœŸæ€§ï¼Œè¿™ä¸ªå›¾çªå‡ºæ˜¾ç¤ºäº†æ¯å‘¨çš„å‘¨æœŸæ€§ï¼Œä½†å¦‚æœæˆ‘ä»¬ä¸“æ³¨äºåŒä¸€å¹´ï¼ˆ2017å¹´ï¼‰ä¸­çš„æŸä¸ªæœˆï¼ˆå¦‚1æœˆï¼‰ï¼Œæ—¥å¸¸å­£èŠ‚æ€§ä¹Ÿä¼šæ˜¾ç°å‡ºæ¥ï¼š
- en: '[PRE11]'
  id: totrans-115
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '![](../Images/38852e4d20f443b471e67673aa590562.png)'
  id: totrans-116
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/38852e4d20f443b471e67673aa590562.png)'
- en: 5.3 PJME Series Decomposition â€” Additive Decompose, focus on January 2017.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 5.3 PJMEç³»åˆ—åˆ†è§£ â€” åŠ æ€§åˆ†è§£ï¼Œå…³æ³¨2017å¹´1æœˆã€‚
- en: '![](../Images/c81aba4ff062cc4f588cb56dc5a7fe2f.png)'
  id: totrans-118
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/c81aba4ff062cc4f588cb56dc5a7fe2f.png)'
- en: 5.4 PJME Series Decomposition â€” Multiplicative Decompose, focus on January 2017.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 5.4 PJMEç³»åˆ—åˆ†è§£ â€” ä¹˜æ€§åˆ†è§£ï¼Œå…³æ³¨2017å¹´1æœˆã€‚
- en: 6\. Lag Analysis
  id: totrans-120
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 6. æ»ååˆ†æ
- en: In time series forecasting, a lag is simply a past value of the series. For
    example, for daily series, the first lag refers to the value the series had the
    previous day, the second to the value of the day before and so on.
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æ—¶é—´åºåˆ—é¢„æµ‹ä¸­ï¼Œæ»åæ˜¯æŒ‡åºåˆ—çš„è¿‡å»å€¼ã€‚ä¾‹å¦‚ï¼Œå¯¹äºæ—¥å¸¸åºåˆ—ï¼Œç¬¬ä¸€ä¸ªæ»åæ˜¯æŒ‡åºåˆ—å‰ä¸€å¤©çš„å€¼ï¼Œç¬¬äºŒä¸ªæ»åæ˜¯æŒ‡å‰ä¸¤å¤©çš„å€¼ï¼Œä»¥æ­¤ç±»æ¨ã€‚
- en: 'Lag analysis is based on computing correlations between the series and a lagged
    version of the series itself, this is also called *autocorrelation.* For a k-lagged
    version of a series, we define the autocorrelation coefficient as:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: æ»ååˆ†æåŸºäºè®¡ç®—åºåˆ—ä¸è¯¥åºåˆ—çš„æ»åç‰ˆæœ¬ä¹‹é—´çš„ç›¸å…³æ€§ï¼Œè¿™ä¹Ÿç§°ä¸º*è‡ªç›¸å…³*ã€‚å¯¹äºkæ»åçš„åºåˆ—ï¼Œæˆ‘ä»¬å®šä¹‰è‡ªç›¸å…³ç³»æ•°ä¸ºï¼š
- en: '![](../Images/012a2b1804fb4a04bed04ce8fa487838.png)'
  id: totrans-123
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/012a2b1804fb4a04bed04ce8fa487838.png)'
- en: Where *y* bar represent the mean value of the series and *k* the lag.
  id: totrans-124
  prefs: []
  type: TYPE_NORMAL
  zh: å…¶ä¸­ï¼Œ*y* barè¡¨ç¤ºåºåˆ—çš„å‡å€¼ï¼Œ*k*è¡¨ç¤ºæ»åã€‚
- en: The autocorrelation coefficients make up the *autocorrelation function* (ACF)
    for the series, this is simply a plot depicting the auto-correlation coefficient
    versus the number of lags taken into consideration.
  id: totrans-125
  prefs: []
  type: TYPE_NORMAL
  zh: è‡ªç›¸å…³ç³»æ•°æ„æˆäº†åºåˆ—çš„*è‡ªç›¸å…³å‡½æ•°*ï¼ˆACFï¼‰ï¼Œè¿™åªæ˜¯ä¸€ä¸ªå›¾è¡¨ï¼Œå±•ç¤ºäº†è‡ªç›¸å…³ç³»æ•°ä¸æ‰€è€ƒè™‘æ»åæ•°é‡ä¹‹é—´çš„å…³ç³»ã€‚
- en: When data has a trend, the autocorrelations for small lags are usually large
    and positive because observations close in time are also nearby in value. When
    data show seasonality, autocorrelation values will be larger in correspondence
    of seasonal lags (and multiples of the seasonal period) than for other lags. Data
    with both trend and seasonality will show a combination of these effects.
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: å½“æ•°æ®å…·æœ‰è¶‹åŠ¿æ—¶ï¼Œå°æ»åçš„è‡ªç›¸å…³é€šå¸¸å¾ˆå¤§ä¸”ä¸ºæ­£ï¼Œå› ä¸ºæ—¶é—´æ¥è¿‘çš„è§‚æµ‹å€¼ä¹Ÿé€šå¸¸æ•°å€¼ç›¸è¿‘ã€‚å½“æ•°æ®å‘ˆç°å­£èŠ‚æ€§æ—¶ï¼Œä¸å­£èŠ‚æ»åï¼ˆä»¥åŠå­£èŠ‚å‘¨æœŸçš„å€æ•°ï¼‰å¯¹åº”çš„è‡ªç›¸å…³å€¼å°†å¤§äºå…¶ä»–æ»åçš„è‡ªç›¸å…³å€¼ã€‚å…·æœ‰è¶‹åŠ¿å’Œå­£èŠ‚æ€§çš„æ•°æ®å°†è¡¨ç°å‡ºè¿™äº›æ•ˆåº”çš„ç»„åˆã€‚
- en: In practice, a more useful function is the *partial autocorrelation function*
    (PACF). It is similar to the ACF, except that it shows only the direct autocorrelation
    between two lags. For example, the partial autocorrelation for lag 3 refers to
    the only correlation lag 1 and 2 do not explain. In other words, the partial correlation
    refers to the direct effect a certain lag has on the current time value.
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: å®é™…ä¸Šï¼Œæ›´æœ‰ç”¨çš„å‡½æ•°æ˜¯*éƒ¨åˆ†è‡ªç›¸å…³å‡½æ•°*ï¼ˆPACFï¼‰ã€‚å®ƒç±»ä¼¼äºACFï¼Œåªä¸è¿‡å®ƒåªæ˜¾ç¤ºä¸¤ä¸ªæ»åä¹‹é—´çš„ç›´æ¥è‡ªç›¸å…³ã€‚ä¾‹å¦‚ï¼Œæ»å3çš„éƒ¨åˆ†è‡ªç›¸å…³æŒ‡çš„æ˜¯æ»å1å’Œæ»å2æ— æ³•è§£é‡Šçš„ç›¸å…³æ€§ã€‚æ¢å¥è¯è¯´ï¼Œéƒ¨åˆ†è‡ªç›¸å…³æŒ‡çš„æ˜¯æŸä¸ªæ»åå¯¹å½“å‰æ—¶é—´å€¼çš„ç›´æ¥å½±å“ã€‚
- en: Before moving to the Python code, it is important to highlight that autocorrelation
    coefficient emerges more clearly if the series is *stationary,* so often is better
    to first differentiate the series to stabilize the signal.
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿›å…¥Pythonä»£ç ä¹‹å‰ï¼Œéœ€è¦å¼ºè°ƒçš„æ˜¯ï¼Œå¦‚æœåºåˆ—æ˜¯*å¹³ç¨³*çš„ï¼Œè‡ªç›¸å…³ç³»æ•°ä¼šæ›´ä¸ºæ˜æ˜¾ï¼Œå› æ­¤é€šå¸¸æœ€å¥½å…ˆå¯¹åºåˆ—è¿›è¡Œå·®åˆ†ä»¥ç¨³å®šä¿¡å·ã€‚
- en: 'Said that, here is the code to plot PACF for different hours of the day:'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: è¯è™½å¦‚æ­¤ï¼Œä¸‹é¢æ˜¯ç»˜åˆ¶ä¸åŒæ—¶é—´æ®µPACFçš„ä»£ç ï¼š
- en: '[PRE12]'
  id: totrans-130
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: '![](../Images/44dbff41f17b2e610d813960ecfb0c5b.png)'
  id: totrans-131
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/44dbff41f17b2e610d813960ecfb0c5b.png)'
- en: 6.1 PJME Lag Analysis â€” Partial Auto Correlation Function (h=0).
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 6.1 PJMEæ»ååˆ†æ â€” éƒ¨åˆ†è‡ªç›¸å…³å‡½æ•°ï¼ˆh=0ï¼‰ã€‚
- en: '![](../Images/d7d2d2e6976b720b7bff2e0a9c82c8e8.png)'
  id: totrans-133
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/d7d2d2e6976b720b7bff2e0a9c82c8e8.png)'
- en: 6.2 PJME Lag Analysis â€” Partial Auto Correlation Function (h=4).
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 6.2 PJMEæ»ååˆ†æ â€” éƒ¨åˆ†è‡ªç›¸å…³å‡½æ•°ï¼ˆh=4ï¼‰ã€‚
- en: '![](../Images/a32acfd15df172f5e3ace8d54843d633.png)'
  id: totrans-135
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a32acfd15df172f5e3ace8d54843d633.png)'
- en: 6.3 PJME Lag Analysis â€” Partial Auto Correlation Function (h=8).
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 6.3 PJMEæ»ååˆ†æ â€” éƒ¨åˆ†è‡ªç›¸å…³å‡½æ•°ï¼ˆh=8ï¼‰ã€‚
- en: '![](../Images/30eaf2c891649106e9ec2e6a1ce93aa4.png)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/30eaf2c891649106e9ec2e6a1ce93aa4.png)'
- en: 6.4 PJME Lag Analysis â€” Partial Auto Correlation Function (h=12).
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 6.4 PJMEæ»ååˆ†æ â€” éƒ¨åˆ†è‡ªç›¸å…³å‡½æ•°ï¼ˆh=12ï¼‰ã€‚
- en: '![](../Images/9337dca06ee8f7ca5b4ff221128e89f9.png)'
  id: totrans-139
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9337dca06ee8f7ca5b4ff221128e89f9.png)'
- en: 6.5 PJME Lag Analysis â€” Partial Auto Correlation Function (h=16).
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 6.5 PJMEæ»ååˆ†æ â€” éƒ¨åˆ†è‡ªç›¸å…³å‡½æ•°ï¼ˆh=16ï¼‰ã€‚
- en: '![](../Images/9f5f6bfa3c2cba4da0413c467eac4548.png)'
  id: totrans-141
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/9f5f6bfa3c2cba4da0413c467eac4548.png)'
- en: 6.6 PJME Lag Analysis â€” Partial Auto Correlation Function (h=20).
  id: totrans-142
  prefs: []
  type: TYPE_NORMAL
  zh: 6.6 PJMEæ»ååˆ†æ â€” éƒ¨åˆ†è‡ªç›¸å…³å‡½æ•°ï¼ˆh=20ï¼‰ã€‚
- en: As you can see, the PACF simply consists on plotting Pearson partial auto-correlation
    coefficients for different lags. Of course, the non-lagged series shows a perfect
    auto-correlation with itself, so lag 0 will always be 1\. The blue band represent
    the *confidence interval:* if a lag exceed that band, then it is statistically
    significant and we can assert it is has great importance.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚ä½ æ‰€è§ï¼ŒPACFå®é™…ä¸Šå°±æ˜¯ç»˜åˆ¶ä¸åŒæ»åçš„Pearsonéƒ¨åˆ†è‡ªç›¸å…³ç³»æ•°ã€‚å½“ç„¶ï¼Œæœªæ»åçš„åºåˆ—ä¸è‡ªèº«æœ‰å®Œç¾çš„è‡ªç›¸å…³ï¼Œå› æ­¤æ»å0çš„è‡ªç›¸å…³ç³»æ•°æ°¸è¿œæ˜¯1ã€‚è“è‰²åŒºåŸŸè¡¨ç¤º*ç½®ä¿¡åŒºé—´*ï¼šå¦‚æœæŸä¸ªæ»åè¶…è¿‡äº†è¿™ä¸ªåŒºé—´ï¼Œåˆ™è¯´æ˜è¯¥æ»ååœ¨ç»Ÿè®¡ä¸Šæ˜¯æ˜¾è‘—çš„ï¼Œæˆ‘ä»¬å¯ä»¥æ–­è¨€å®ƒå…·æœ‰é‡è¦æ€§ã€‚
- en: 6.1 Lag analysis â€” Feature Engineering
  id: totrans-144
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 6.1 æ»ååˆ†æ â€” ç‰¹å¾å·¥ç¨‹
- en: Lag analysis is one of the most impactful study on time series feature engineering.
    As already said, a lag with high correlation is an important lag for the series,
    then it should be taken into consideration.
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: æ»ååˆ†ææ˜¯æ—¶é—´åºåˆ—ç‰¹å¾å·¥ç¨‹ä¸­æœ€å…·å½±å“åŠ›çš„ç ”ç©¶ä¹‹ä¸€ã€‚å¦‚å‰æ‰€è¿°ï¼Œå…·æœ‰é«˜ç›¸å…³æ€§çš„æ»åæ˜¯åºåˆ—ä¸­é‡è¦çš„æ»åï¼Œå› æ­¤åº”äºˆä»¥è€ƒè™‘ã€‚
- en: A widely used feature engineering technique consists on making an **hourly division**
    of the dataset. That is, splitting data in 24 subset, each one referring to an
    hour of the day. This has the effect to regularize and smooth the signal, making
    it more simple to forecast.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸€ç§å¹¿æ³›ä½¿ç”¨çš„ç‰¹å¾å·¥ç¨‹æŠ€æœ¯æ˜¯å¯¹æ•°æ®é›†è¿›è¡Œ**æŒ‰å°æ—¶åˆ’åˆ†**ã€‚å³å°†æ•°æ®åˆ’åˆ†ä¸º24ä¸ªå­é›†ï¼Œæ¯ä¸ªå­é›†å¯¹åº”ä¸€å¤©ä¸­çš„ä¸€ä¸ªå°æ—¶ã€‚è¿™ç§åšæ³•æœ‰åŠ©äºå¹³æ»‘ä¿¡å·ï¼Œä½¿å…¶æ›´åŠ è§„å¾‹ï¼Œä»è€Œæ›´æ˜“äºé¢„æµ‹ã€‚
- en: Each subset should then be feature engineered, trained and fine-tuned. The final
    forecast will be achieved combining the results of these 24 models. Said that,
    every hourly model will have its peculiarities, most of them will regard important
    lags.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: æ¯ä¸ªå­é›†åº”è¿›è¡Œç‰¹å¾å·¥ç¨‹ï¼Œè®­ç»ƒå¹¶è¿›è¡Œå¾®è°ƒã€‚æœ€ç»ˆçš„é¢„æµ‹å°†é€šè¿‡ç»“åˆè¿™24ä¸ªæ¨¡å‹çš„ç»“æœæ¥å®ç°ã€‚è¯è™½å¦‚æ­¤ï¼Œæ¯ä¸ªå°æ—¶çš„æ¨¡å‹éƒ½ä¼šæœ‰å…¶ç‰¹æ®Šæ€§ï¼Œå…¶ä¸­å¤§éƒ¨åˆ†å°†æ¶‰åŠé‡è¦çš„æ»åã€‚
- en: 'Before moving on, letâ€™s define two types of lag we can deal with when doing
    lag analysis:'
  id: totrans-148
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ç»§ç»­ä¹‹å‰ï¼Œè®©æˆ‘ä»¬å®šä¹‰åœ¨è¿›è¡Œæ»ååˆ†ææ—¶å¯ä»¥å¤„ç†çš„ä¸¤ç§æ»åç±»å‹ï¼š
- en: '**Auto-regressive lags**: lags close to lag 0, for which we expect high values
    (recent lags are more likely to predict the present value). They are a representation
    on how much trend the series shows.'
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**è‡ªå›å½’æ»å**ï¼šæ¥è¿‘æ»å0çš„æ»åï¼Œæˆ‘ä»¬é¢„æœŸå…¶å€¼è¾ƒé«˜ï¼ˆè¿‘æœŸçš„æ»åæ›´å¯èƒ½é¢„æµ‹å½“å‰å€¼ï¼‰ã€‚å®ƒä»¬æ˜¯åºåˆ—ä¸­è¶‹åŠ¿çš„ä½“ç°ã€‚'
- en: '**Seasonal lags**: lags referring to seasonal periods. When hourly splitting
    the data, they usually represent weekly seasonality.'
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**å­£èŠ‚æ€§æ»å**ï¼šæŒ‡ä¸å­£èŠ‚æ€§å‘¨æœŸç›¸å…³çš„æ»åã€‚å½“æŒ‰å°æ—¶åˆ’åˆ†æ•°æ®æ—¶ï¼Œå®ƒä»¬é€šå¸¸ä»£è¡¨æ¯å‘¨çš„å­£èŠ‚æ€§ã€‚'
- en: Note that auto-regressive lag 1 can also be taught as a *daily seasonal lag*
    for the series.
  id: totrans-151
  prefs: []
  type: TYPE_NORMAL
  zh: è¯·æ³¨æ„ï¼Œè‡ªå›å½’æ»å1ä¹Ÿå¯ä»¥è¢«è§†ä¸ºç³»åˆ—çš„*æ—¥å¸¸å­£èŠ‚æ€§æ»å*ã€‚
- en: Letâ€™s now discuss about the PACF plots printed above.
  id: totrans-152
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨è®©æˆ‘ä»¬è®¨è®ºä¸€ä¸‹ä¸Šé¢æ‰“å°çš„PACFå›¾ã€‚
- en: Night Hours
  id: totrans-153
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å¤œé—´å°æ—¶
- en: Consumption on night hours (0, 4) relies more on auto-regressive than on weekly
    lags, since the most important are all localized on the first five. Seasonal periods
    such as 7, 14, 21, 28 seems not to be too much important, this advises us to pay
    particular attention on lag 1 to 5 when feature engineering.
  id: totrans-154
  prefs: []
  type: TYPE_NORMAL
  zh: å¤œé—´å°æ—¶ï¼ˆ0, 4ï¼‰çš„æ¶ˆè´¹æ›´å¤šä¾èµ–äºè‡ªå›å½’æ»åè€Œéå‘¨æ»åï¼Œå› ä¸ºæœ€é‡è¦çš„æ»åéƒ½é›†ä¸­åœ¨å‰äº”ä¸ªã€‚åƒ7ã€14ã€21ã€28è¿™æ ·çš„å­£èŠ‚æ€§å‘¨æœŸä¼¼ä¹å¹¶ä¸å¤ªé‡è¦ï¼Œè¿™æé†’æˆ‘ä»¬åœ¨è¿›è¡Œç‰¹å¾å·¥ç¨‹æ—¶è¦ç‰¹åˆ«å…³æ³¨æ»å1åˆ°5ã€‚
- en: Day Hours
  id: totrans-155
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ—¥é—´å°æ—¶
- en: Consumption on day hours (8, 12, 16, 20) exhibit both auto-regressive and seasonal
    lags. This particularly true for hours 8 and 12 - when consumption is particularly
    high â€” while seasonal lags become less important approaching the night. For these
    subsets we should also include seasonal lag as well as auto-regressive ones.
  id: totrans-156
  prefs: []
  type: TYPE_NORMAL
  zh: ç™½å¤©å°æ—¶ï¼ˆ8, 12, 16, 20ï¼‰çš„æ¶ˆè´¹å±•ç°å‡ºè‡ªå›å½’æ»åå’Œå­£èŠ‚æ€§æ»åä¸¤è€…çš„ç‰¹å¾ã€‚ç‰¹åˆ«æ˜¯å¯¹äº8ç‚¹å’Œ12ç‚¹çš„å°æ—¶â€”â€”è¿™æ—¶æ¶ˆè´¹é‡ç‰¹åˆ«é«˜â€”â€”è€Œå­£èŠ‚æ€§æ»ååœ¨æ¥è¿‘å¤œé—´æ—¶å˜å¾—ä¸é‚£ä¹ˆé‡è¦ã€‚å¯¹äºè¿™äº›å­é›†ï¼Œæˆ‘ä»¬ä¹Ÿåº”è¯¥åŒ…æ‹¬å­£èŠ‚æ€§æ»åä»¥åŠè‡ªå›å½’æ»åã€‚
- en: 'Finally, here are some tips when feature engineering lags:'
  id: totrans-157
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€åï¼Œè¿™é‡Œæœ‰ä¸€äº›å…³äºç‰¹å¾å·¥ç¨‹æ»åçš„å»ºè®®ï¼š
- en: Do not to take into consideration too many lags since this will probably lead
    to over fitting. Generally, auto-regressive lags goes from 1 to 7, while weekly
    lags should be 7, 14, 21 and 28\. But itâ€™s not mandatory to take each of them
    as features.
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: ä¸è¦è€ƒè™‘è¿‡å¤šçš„æ»åï¼Œå› ä¸ºè¿™å¯èƒ½å¯¼è‡´è¿‡æ‹Ÿåˆã€‚é€šå¸¸ï¼Œè‡ªå›å½’æ»åä»1åˆ°7ï¼Œè€Œå‘¨æ»ååº”è¯¥æ˜¯7ã€14ã€21å’Œ28ã€‚ç„¶è€Œï¼Œæ˜¯å¦å°†å®ƒä»¬ä½œä¸ºç‰¹å¾å¹¶ä¸æ˜¯å¼ºåˆ¶æ€§çš„ã€‚
- en: Taking into consideration lags that are not auto-regressive or seasonal is usually
    a bad idea since they could bring to overfitting as well. Rather, try to understand
    while a certain lag is important.
  id: totrans-159
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è€ƒè™‘éè‡ªå›å½’æˆ–éå­£èŠ‚æ€§çš„æ»åé€šå¸¸æ˜¯ä¸€ä¸ªåä¸»æ„ï¼Œå› ä¸ºå®ƒä»¬ä¹Ÿå¯èƒ½å¯¼è‡´è¿‡æ‹Ÿåˆã€‚ç›¸åï¼Œå°è¯•ç†è§£æŸä¸ªæ»åä¸ºä»€ä¹ˆé‡è¦ã€‚
- en: Transforming lags can often lead to more powerful features. For example, seasonal
    lags can be aggregated using a weighted mean to create a single feature representing
    the seasonality of the series.
  id: totrans-160
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: è½¬æ¢æ»åé€šå¸¸ä¼šå¯¼è‡´æ›´å¼ºå¤§çš„ç‰¹å¾ã€‚ä¾‹å¦‚ï¼Œå­£èŠ‚æ€§æ»åå¯ä»¥é€šè¿‡åŠ æƒå‡å€¼è¿›è¡Œèšåˆï¼Œåˆ›å»ºä¸€ä¸ªå•ä¸€ç‰¹å¾æ¥è¡¨ç¤ºåºåˆ—çš„å­£èŠ‚æ€§ã€‚
- en: Free Resources
  id: totrans-161
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: å…è´¹èµ„æº
- en: 'Finally, I would like to mention a very useful (and free) book explaining time
    series, which I have personally used a lot: [Forecasting: Principles and Practice](https://otexts.com/fpp3/).'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 'æœ€åï¼Œæˆ‘æƒ³æåˆ°ä¸€æœ¬éå¸¸æœ‰ç”¨ï¼ˆä¸”å…è´¹çš„ï¼‰è§£é‡Šæ—¶é—´åºåˆ—çš„ä¹¦ï¼Œæˆ‘ä¸ªäººä½¿ç”¨è¿‡å¾ˆå¤šæ¬¡ï¼š[Forecasting: Principles and Practice](https://otexts.com/fpp3/)ã€‚'
- en: Even though it is meant to use R instead of Python, this textbook provides a
    great introduction to forecasting methods, covering the most important aspects
    of time series analysis.
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: å°½ç®¡è¿™æœ¬æ•™ææ—¨åœ¨ä½¿ç”¨Rè€ŒéPythonï¼Œä½†å®ƒä¸ºé¢„æµ‹æ–¹æ³•æä¾›äº†å¾ˆå¥½çš„ä»‹ç»ï¼Œæ¶µç›–äº†æ—¶é—´åºåˆ—åˆ†æçš„æœ€é‡è¦æ–¹é¢ã€‚
- en: Conclusion
  id: totrans-164
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç»“è®º
- en: The aim of this article was to present a comprehensive Exploratory Data Analysis
    template for time series forecasting.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: æœ¬æ–‡çš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªå…¨é¢çš„æ—¶é—´åºåˆ—é¢„æµ‹æ¢ç´¢æ€§æ•°æ®åˆ†ææ¨¡æ¿ã€‚
- en: EDA is a fundamental step in any type of data science study since it allows
    to understand the nature and the peculiarities of the data and lays the foundation
    to feature engineering, which in turn can dramatically improve model performance.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: EDAï¼ˆæ¢ç´¢æ€§æ•°æ®åˆ†æï¼‰æ˜¯ä»»ä½•æ•°æ®ç§‘å­¦ç ”ç©¶ä¸­çš„åŸºç¡€æ­¥éª¤ï¼Œå› ä¸ºå®ƒæœ‰åŠ©äºç†è§£æ•°æ®çš„æ€§è´¨å’Œç‰¹ç‚¹ï¼Œå¹¶ä¸ºç‰¹å¾å·¥ç¨‹å¥ å®šåŸºç¡€ï¼Œç‰¹å¾å·¥ç¨‹åè¿‡æ¥å¯ä»¥æ˜¾è‘—æå‡æ¨¡å‹çš„æ€§èƒ½ã€‚
- en: We have then described some of the most used analysis for time series EDA, these
    can be both statistical/mathematical and graphical. Obviously, the intention of
    this work was only to give a practical framework to start with, subsequent investigations
    need to be carried out based on the type of historical series being examined and
    the business context.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬æ¥ç€æè¿°äº†ä¸€äº›æœ€å¸¸ç”¨çš„æ—¶é—´åºåˆ—EDAåˆ†ææ–¹æ³•ï¼Œè¿™äº›æ–¹æ³•æ—¢å¯ä»¥æ˜¯ç»Ÿè®¡/æ•°å­¦æ€§çš„ï¼Œä¹Ÿå¯ä»¥æ˜¯å›¾å½¢åŒ–çš„ã€‚æ˜¾ç„¶ï¼Œæœ¬å·¥ä½œçš„ç›®çš„æ˜¯æä¾›ä¸€ä¸ªå®è·µæ¡†æ¶ä¾›å¤§å®¶å…¥æ‰‹ï¼Œåç»­çš„ç ”ç©¶éœ€è¦æ ¹æ®æ‰€ç ”ç©¶çš„å†å²åºåˆ—ç±»å‹å’Œä¸šåŠ¡èƒŒæ™¯è¿›è¡Œè¿›ä¸€æ­¥çš„æ¢ç´¢ã€‚
- en: Thanks for having followed me until the end.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: æ„Ÿè°¢ä½ ä¸€ç›´è·Ÿéšæˆ‘ç›´åˆ°æœ€åã€‚
- en: '*Unless otherwise noted, all images are by the author.*'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: '*é™¤éå¦æœ‰è¯´æ˜ï¼Œæ‰€æœ‰å›¾ç‰‡å‡æ¥è‡ªä½œè€…ã€‚*'
