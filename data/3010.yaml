- en: 'Ranking Basics: Pointwise, Pairwise, Listwise'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: æ’ååŸºç¡€ï¼šç‚¹å¯¹ã€æˆå¯¹ã€åˆ—è¡¨
- en: åŸæ–‡ï¼š[https://towardsdatascience.com/ranking-basics-pointwise-pairwise-listwise-cd5318f86e1b?source=collection_archive---------3-----------------------#2024-12-14](https://towardsdatascience.com/ranking-basics-pointwise-pairwise-listwise-cd5318f86e1b?source=collection_archive---------3-----------------------#2024-12-14)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: åŸæ–‡ï¼š[https://towardsdatascience.com/ranking-basics-pointwise-pairwise-listwise-cd5318f86e1b?source=collection_archive---------3-----------------------#2024-12-14](https://towardsdatascience.com/ranking-basics-pointwise-pairwise-listwise-cd5318f86e1b?source=collection_archive---------3-----------------------#2024-12-14)
- en: Because thy neighbour matters
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å› ä¸ºé‚»è¿‘çš„å¯¹è±¡å¾ˆé‡è¦
- en: '[](https://medium.com/@kunals726?source=post_page---byline--cd5318f86e1b--------------------------------)[![Kunal
    Santosh Sawant](../Images/f8689b4e61020ca714c28806d51f9b72.png)](https://medium.com/@kunals726?source=post_page---byline--cd5318f86e1b--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--cd5318f86e1b--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--cd5318f86e1b--------------------------------)
    [Kunal Santosh Sawant](https://medium.com/@kunals726?source=post_page---byline--cd5318f86e1b--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@kunals726?source=post_page---byline--cd5318f86e1b--------------------------------)[![Kunal
    Santosh Sawant](../Images/f8689b4e61020ca714c28806d51f9b72.png)](https://medium.com/@kunals726?source=post_page---byline--cd5318f86e1b--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--cd5318f86e1b--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--cd5318f86e1b--------------------------------)
    [Kunal Santosh Sawant](https://medium.com/@kunals726?source=post_page---byline--cd5318f86e1b--------------------------------)'
- en: Â·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--cd5318f86e1b--------------------------------)
    Â·6 min readÂ·Dec 14, 2024
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: Â·å‘å¸ƒäº [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--cd5318f86e1b--------------------------------)
    Â·6åˆ†é’Ÿé˜…è¯»Â·2024å¹´12æœˆ14æ—¥
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/54cb29c9cdd0f38ae586510bb08af75b.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/54cb29c9cdd0f38ae586510bb08af75b.png)'
- en: Image taken from unsplash.com
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: å›¾ç‰‡æ¥è‡ª unsplash.com
- en: First, letâ€™s talk about where ranking comes into play. Ranking is a big deal
    in e-commerce and search applications â€” essentially, any scenario where you need
    to organize documents based on a query. Itâ€™s a little different from classic classification
    or regression problems. For instance, in the Titanic dataset, you predict whether
    a passenger survives or not, and in house price prediction, you estimate the price
    of a house. But with ranking, the game changes. Instead of predicting a single
    value or category, youâ€™re trying to order documents based on relevance.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: é¦–å…ˆï¼Œè®©æˆ‘ä»¬è®¨è®ºæ’åçš„ä½œç”¨ã€‚æ’ååœ¨ç”µå­å•†åŠ¡å’Œæœç´¢åº”ç”¨ä¸­éå¸¸é‡è¦â€”â€”åŸºæœ¬ä¸Šæ˜¯ä»»ä½•éœ€è¦æ ¹æ®æŸ¥è¯¢æ¥ç»„ç»‡æ–‡æ¡£çš„åœºæ™¯ã€‚è¿™ä¸ç»å…¸çš„åˆ†ç±»æˆ–å›å½’é—®é¢˜æœ‰äº›ä¸åŒã€‚ä¾‹å¦‚ï¼Œåœ¨æ³°å¦å°¼å…‹å·æ•°æ®é›†ä¸­ï¼Œä½ é¢„æµ‹ä¹˜å®¢æ˜¯å¦å¹¸å­˜ï¼Œåœ¨æˆ¿ä»·é¢„æµ‹ä¸­ï¼Œä½ ä¼°è®¡æˆ¿å­çš„ä»·æ ¼ã€‚ä½†åœ¨æ’åä¸­ï¼Œæƒ…å†µä¸åŒã€‚ä½ ä¸æ˜¯åœ¨é¢„æµ‹å•ä¸€çš„å€¼æˆ–ç±»åˆ«ï¼Œè€Œæ˜¯åœ¨å°è¯•æ ¹æ®ç›¸å…³æ€§å¯¹æ–‡æ¡£è¿›è¡Œæ’åºã€‚
- en: 'Take an example: You search for â€œsareeâ€ on an e-commerce website like Amazon.
    You donâ€™t just want a random list of sarees; you want the most relevant ones to
    appear at the top, right? Thatâ€™s where Learning to Rank (LTR) steps in â€” it ranks
    documents (or products) based on how well they match your query.'
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸¾ä¸ªä¾‹å­ï¼šä½ åœ¨åƒäºšé©¬é€Šè¿™æ ·çš„ç”µå­å•†åŠ¡ç½‘ç«™ä¸Šæœç´¢â€œçº±ä¸½â€ã€‚ä½ ä¸æƒ³è¦ä¸€ä¸ªéšæœºçš„çº±ä¸½åˆ—è¡¨ï¼›ä½ å¸Œæœ›æœ€ç›¸å…³çš„äº§å“å‡ºç°åœ¨é¡¶éƒ¨ï¼Œå¯¹å§ï¼Ÿè¿™å°±æ˜¯å­¦ä¹ æ’åºï¼ˆLTRï¼‰çš„ä½œç”¨â€”â€”å®ƒæ ¹æ®æ–‡æ¡£ï¼ˆæˆ–äº§å“ï¼‰ä¸æŸ¥è¯¢çš„åŒ¹é…ç¨‹åº¦æ¥å¯¹å®ƒä»¬è¿›è¡Œæ’åã€‚
- en: Now that we know where ranking fits in, letâ€™s dive into the nitty-gritty of
    different approaches and methods.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: ç°åœ¨æˆ‘ä»¬å·²ç»äº†è§£äº†æ’åçš„ä½œç”¨ï¼Œè®©æˆ‘ä»¬æ·±å…¥æ¢è®¨ä¸åŒçš„æ’åæ–¹æ³•å’ŒæŠ€æœ¯ã€‚
- en: 'There are three main methods for Learning to Rank (LTR):'
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: å­¦ä¹ æ’åºï¼ˆLTRï¼‰æœ‰ä¸‰ç§ä¸»è¦æ–¹æ³•ï¼š
- en: '**Pointwise**'
  id: totrans-12
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**ç‚¹å¯¹ï¼ˆPointwiseï¼‰**'
- en: '**Pairwise**'
  id: totrans-13
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**æˆå¯¹ï¼ˆPairwiseï¼‰**'
- en: '**Listwise**'
  id: totrans-14
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**åˆ—è¡¨ï¼ˆListwiseï¼‰**'
- en: To make things easier to follow, letâ€™s establish some notation that weâ€™ll use
    to explain these methods.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†æ›´å®¹æ˜“ç†è§£ï¼Œè®©æˆ‘ä»¬å…ˆå®šä¹‰ä¸€äº›ç¬¦å·ï¼Œç”¨äºè§£é‡Šè¿™äº›æ–¹æ³•ã€‚
- en: 'Weâ€™ll work with a set of queries ***q1,q2,â€¦,qn*** and each query has a corresponding
    set of documents ***d1,d2,d3,â€¦,dm***â€‹. For example:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬å°†å¤„ç†ä¸€ç»„æŸ¥è¯¢ ***q1, q2, â€¦, qn***ï¼Œæ¯ä¸ªæŸ¥è¯¢éƒ½æœ‰å¯¹åº”çš„ä¸€ç»„æ–‡æ¡£ ***d1, d2, d3, â€¦, dm***ã€‚ä¾‹å¦‚ï¼š
- en: Query ***q1*** is associated with documents ***d1***,***d2***,***d3***
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æŸ¥è¯¢ ***q1*** ä¸æ–‡æ¡£ ***d1***, ***d2***, ***d3*** ç›¸å…³è”ã€‚
- en: Query ***q2*** associated with documents ***d4***,***d5***.
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æŸ¥è¯¢ ***q2*** ä¸æ–‡æ¡£ ***d4***, ***d5*** ç›¸å…³è”ã€‚
- en: With this setup in mind, letâ€™s break down each method and how they approach
    the ranking problem.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: æ—¢ç„¶æˆ‘ä»¬å·²ç»äº†è§£äº†æ’åçš„å®šä½ï¼Œè®©æˆ‘ä»¬æ·±å…¥åˆ†ææ¯ç§æ–¹æ³•åŠå…¶å¦‚ä½•è§£å†³æ’åé—®é¢˜ã€‚
- en: Pointwise
  id: totrans-20
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: ç‚¹å¯¹ï¼ˆPointwiseï¼‰
- en: 'In the **pointwise approach**, we treat the ranking problem as a simple classification
    task. For each query-document pair, we assign a target label that indicates the
    relevance of the document to the query. For example:'
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨**ç‚¹å¯¹ç‚¹æ–¹æ³•**ä¸­ï¼Œæˆ‘ä»¬å°†æ’åé—®é¢˜è§†ä¸ºä¸€ä¸ªç®€å•çš„åˆ†ç±»ä»»åŠ¡ã€‚å¯¹äºæ¯ä¸ªæŸ¥è¯¢-æ–‡æ¡£å¯¹ï¼Œæˆ‘ä»¬åˆ†é…ä¸€ä¸ªç›®æ ‡æ ‡ç­¾ï¼Œè¡¨ç¤ºæ–‡æ¡£ä¸æŸ¥è¯¢çš„ç›¸å…³æ€§ã€‚ä¾‹å¦‚ï¼š
- en: Label `1` if the document is relevant.
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ ‡ç­¾ `1` è¡¨ç¤ºæ–‡æ¡£ç›¸å…³ã€‚
- en: Label `0` if the document is not relevant.
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: æ ‡ç­¾ `0` è¡¨ç¤ºæ–‡æ¡£ä¸ç›¸å…³ã€‚
- en: 'Using our earlier example, the data would look like this:'
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥æˆ‘ä»¬ä¹‹å‰çš„ä¾‹å­ä¸ºä¾‹ï¼Œæ•°æ®çœ‹èµ·æ¥æ˜¯è¿™æ ·çš„ï¼š
- en: '***q1,d1***â†’label: 1'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***q1,d1***â†’æ ‡ç­¾: 1'
- en: '***q1,d2***â†’label: 0'
  id: totrans-26
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***q1,d2***â†’æ ‡ç­¾: 0'
- en: '***q1,d3***â†’label: 1'
  id: totrans-27
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***q1,d3***â†’æ ‡ç­¾: 1'
- en: '***q2,d4***â†’label: 0'
  id: totrans-28
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***q2,d4***â†’æ ‡ç­¾: 0'
- en: '***q2,d5***â†’label: 1'
  id: totrans-29
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***q2,d5***â†’æ ‡ç­¾: 1'
- en: We train the model using this labeled data, leveraging features from both the
    queries and the documents to predict the label. After training, the model predicts
    the relevance of each document to a given query as a probability (ranging from
    0 to 1). This probability can be interpreted as the relevance score.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ä½¿ç”¨è¿™äº›æ ‡æ³¨æ•°æ®è®­ç»ƒæ¨¡å‹ï¼Œåˆ©ç”¨æŸ¥è¯¢å’Œæ–‡æ¡£ä¸­çš„ç‰¹å¾æ¥é¢„æµ‹æ ‡ç­¾ã€‚è®­ç»ƒå®Œæˆåï¼Œæ¨¡å‹ä¼šé¢„æµ‹æ¯ä¸ªæ–‡æ¡£ä¸ç»™å®šæŸ¥è¯¢çš„ç›¸å…³æ€§ä½œä¸ºä¸€ä¸ªæ¦‚ç‡å€¼ï¼ˆèŒƒå›´ä»0åˆ°1ï¼‰ã€‚è¿™ä¸ªæ¦‚ç‡å€¼å¯ä»¥è§£é‡Šä¸ºç›¸å…³æ€§åˆ†æ•°ã€‚
- en: 'For example, after training, the model might produce the following scores:'
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œè®­ç»ƒåï¼Œæ¨¡å‹å¯èƒ½ä¼šç”Ÿæˆä»¥ä¸‹åˆ†æ•°ï¼š
- en: '***q1â€‹,d1***â€‹â†’score: 0.6'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***q1â€‹,d1***â€‹â†’åˆ†æ•°: 0.6'
- en: '***q1,d2***â†’score: 0.1'
  id: totrans-33
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***q1,d2***â†’åˆ†æ•°: 0.1'
- en: '***q1,d3***â†’score: 0.4'
  id: totrans-34
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***q1,d3***â†’åˆ†æ•°: 0.4'
- en: 'Using these scores, we re-rank the documents in descending order of relevance:
    ***d1,d3,d2***. This new ranking order is then presented to the user, ensuring
    the most relevant documents appear at the top.'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: ä½¿ç”¨è¿™äº›åˆ†æ•°ï¼Œæˆ‘ä»¬å°†æ–‡æ¡£æŒ‰ç›¸å…³æ€§é™åºé‡æ–°æ’åºï¼š***d1,d3,d2***ã€‚ç„¶åå°†è¿™ä¸ªæ–°çš„æ’åºå‘ˆç°ç»™ç”¨æˆ·ï¼Œç¡®ä¿æœ€ç›¸å…³çš„æ–‡æ¡£å‡ºç°åœ¨æœ€å‰é¢ã€‚
- en: '**Pairwise**'
  id: totrans-36
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**æˆå¯¹æ¯”**'
- en: The main drawback of the **pointwise approach** is that it misses the **context**
    in which the user interacts with a document. When a user clicks on or finds a
    document relevant, there are often multiple factors at play â€” one of the most
    important being the **neighboring items**.
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '**ç‚¹å¯¹ç‚¹æ–¹æ³•**çš„ä¸»è¦ç¼ºç‚¹æ˜¯å®ƒå¿½ç•¥äº†ç”¨æˆ·ä¸æ–‡æ¡£äº’åŠ¨æ—¶çš„**ä¸Šä¸‹æ–‡**ã€‚å½“ç”¨æˆ·ç‚¹å‡»æˆ–è®¤ä¸ºæŸä¸ªæ–‡æ¡£ç›¸å…³æ—¶ï¼Œå¾€å¾€æœ‰å¤šä¸ªå› ç´ åœ¨èµ·ä½œç”¨â€”â€”å…¶ä¸­ä¸€ä¸ªæœ€é‡è¦çš„å› ç´ å°±æ˜¯**é‚»è¿‘é¡¹**ã€‚'
- en: For instance, if a user clicks on a document, it might not necessarily mean
    that the document is highly relevant. It could simply be that the other documents
    presented were of poor quality. Similarly, if you had shown a different set of
    documents for the same query, the userâ€™s interaction might have been entirely
    different.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼Œå¦‚æœç”¨æˆ·ç‚¹å‡»äº†æŸä¸ªæ–‡æ¡£ï¼Œè¿™å¹¶ä¸ä¸€å®šæ„å‘³ç€è¯¥æ–‡æ¡£éå¸¸ç›¸å…³ã€‚å¯èƒ½åªæ˜¯å› ä¸ºå±•ç¤ºçš„å…¶ä»–æ–‡æ¡£è´¨é‡è¾ƒå·®ã€‚ç±»ä¼¼åœ°ï¼Œå¦‚æœä½ ä¸ºç›¸åŒçš„æŸ¥è¯¢å±•ç¤ºäº†ä¸€ç»„ä¸åŒçš„æ–‡æ¡£ï¼Œç”¨æˆ·çš„äº’åŠ¨å¯èƒ½ä¼šå®Œå…¨ä¸åŒã€‚
- en: Imagine presenting ***d4***â€‹ for query ***q1***â€‹. If ***d4â€‹*** is more relevant
    than ***d1***â€‹, the user might have clicked on ***d4â€‹*** instead. This context
    â€” how documents compare to each other is completely overlooked in the pointwise
    approach.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: æƒ³è±¡ä¸€ä¸‹ï¼Œå¯¹äºæŸ¥è¯¢***q1***ï¼Œæˆ‘ä»¬å±•ç¤ºäº†***d4***â€‹ã€‚å¦‚æœ***d4***â€‹æ¯”***d1***â€‹æ›´ç›¸å…³ï¼Œç”¨æˆ·å¯èƒ½ä¼šç‚¹å‡»***d4***â€‹è€Œä¸æ˜¯***d1***ã€‚åœ¨ç‚¹å¯¹ç‚¹æ–¹æ³•ä¸­ï¼Œè¿™ç§æ–‡æ¡£ä¹‹é—´çš„æ¯”è¾ƒå®Œå…¨è¢«å¿½è§†ã€‚
- en: To capture this **relative relevance**, we turn to the **pairwise approach**.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: ä¸ºäº†æ•æ‰è¿™ç§**ç›¸å¯¹ç›¸å…³æ€§**ï¼Œæˆ‘ä»¬è½¬å‘äº†**æˆå¯¹æ¯”æ–¹æ³•**ã€‚
- en: In the pairwise method, instead of looking at query-document pairs in isolation,
    we focus on **pairs of documents** for the same query and try to predict which
    one is more relevant. This helps incorporate the context of comparison between
    documents.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨æˆå¯¹æ¯”æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬ä¸æ˜¯å•ç‹¬çœ‹æŸ¥è¯¢-æ–‡æ¡£å¯¹ï¼Œè€Œæ˜¯èšç„¦äºåŒä¸€æŸ¥è¯¢ä¸‹çš„**æ–‡æ¡£å¯¹**ï¼Œå¹¶å°è¯•é¢„æµ‹å“ªä¸ªæ–‡æ¡£æ›´ç›¸å…³ã€‚è¿™æœ‰åŠ©äºç»“åˆæ–‡æ¡£ä¹‹é—´çš„æ¯”è¾ƒä¸Šä¸‹æ–‡ã€‚
- en: Weâ€™ll generate the data similarly for now, but the way we use it will be slightly
    more complex. Letâ€™s break that down next.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: æˆ‘ä»¬ç°åœ¨ä¼šç±»ä¼¼åœ°ç”Ÿæˆæ•°æ®ï¼Œä½†æˆ‘ä»¬ä½¿ç”¨å®ƒçš„æ–¹å¼ä¼šç¨å¾®å¤æ‚ä¸€äº›ã€‚æ¥ä¸‹æ¥æˆ‘ä»¬å°†åˆ†è§£å®ƒã€‚
- en: 'Imagine the training data for the **pairwise approach** structured as follows:'
  id: totrans-43
  prefs: []
  type: TYPE_NORMAL
  zh: æƒ³è±¡ä¸€ä¸‹ï¼Œ**æˆå¯¹æ¯”æ–¹æ³•**çš„è®­ç»ƒæ•°æ®ç»“æ„å¦‚ä¸‹ï¼š
- en: '***q1,(d1,d2)***â†’label: 1(indicating ***d1***â€‹ is more relevant than ***d2***â€‹)'
  id: totrans-44
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***q1,(d1,d2)***â†’æ ‡ç­¾: 1ï¼ˆè¡¨ç¤º***d1***â€‹æ¯”***d2***â€‹æ›´ç›¸å…³ï¼‰'
- en: '***q1,(d2,d3)***â†’label: 0 (indicating ***d2***â€‹ is less relevant than ***d3***â€‹)'
  id: totrans-45
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***q1,(d2,d3)***â†’æ ‡ç­¾: 0ï¼ˆè¡¨ç¤º***d2***â€‹æ¯”***d3***â€‹ä¸å¤ªç›¸å…³ï¼‰'
- en: '***q1,(d1,d3)***â†’label: 1 (indicating ***d1*** is more relevant than ***d3â€‹***)'
  id: totrans-46
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***q1,(d1,d3)***â†’æ ‡ç­¾: 1ï¼ˆè¡¨ç¤º***d1***æ¯”***d3***â€‹æ›´ç›¸å…³ï¼‰'
- en: '***q2,(d4,d5)***â†’label: 0(indicating ***d4*** is less relevant than ***d5***â€‹)'
  id: totrans-47
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***q2,(d4,d5)***â†’æ ‡ç­¾: 0ï¼ˆè¡¨ç¤º***d4***æ¯”***d5***â€‹ä¸å¤ªç›¸å…³ï¼‰'
- en: Here, we assign the labels based on user interactions. For instance, ***d1***â€‹
    and ***d3***â€‹ both being clicked indicates they are relevant, so we maintain their
    order for simplicity in this explanation.
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ ¹æ®ç”¨æˆ·çš„äº’åŠ¨åˆ†é…æ ‡ç­¾ã€‚ä¾‹å¦‚ï¼Œ***d1*** å’Œ ***d3*** éƒ½è¢«ç‚¹å‡»è¡¨ç¤ºå®ƒä»¬ç›¸å…³ï¼Œå› æ­¤æˆ‘ä»¬ä¿æŒå®ƒä»¬çš„é¡ºåºï¼Œä¾¿äºåœ¨æ­¤è§£é‡Šã€‚
- en: 'Model Training Process:'
  id: totrans-49
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: æ¨¡å‹è®­ç»ƒè¿‡ç¨‹ï¼š
- en: Although the training data is in pairs, the model doesnâ€™t directly process these
    pairs. Instead, we treat it similarly to a classification problem, where each
    **query-document pair** is passed to the model separately.
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: å°½ç®¡è®­ç»ƒæ•°æ®æ˜¯æˆå¯¹çš„ï¼Œä½†æ¨¡å‹å¹¶ä¸ä¼šç›´æ¥å¤„ç†è¿™äº›å¯¹ã€‚ç›¸åï¼Œæˆ‘ä»¬å°†å…¶ç±»ä¼¼äºåˆ†ç±»é—®é¢˜å¤„ç†ï¼Œæ¯ä¸ª**æŸ¥è¯¢-æ–‡æ¡£å¯¹**éƒ½ä¼šå•ç‹¬ä¼ é€’ç»™æ¨¡å‹ã€‚
- en: 'For example:'
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: ä¾‹å¦‚ï¼š
- en: '***s1 = f(q1,d1)***'
  id: totrans-52
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***s1 = f(q1,d1)***'
- en: '***s2 = f(q1,d2)***'
  id: totrans-53
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***s2 = f(q1,d2)***'
- en: '***s3 = f(q1,d3)***'
  id: totrans-54
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***s3 = f(q1,d3)***'
- en: The model generates scores ***s1,s2,s3***â€‹ for the documents. These scores are
    used to compare the relevance of document pairs.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: æ¨¡å‹ä¸ºæ–‡æ¡£ç”Ÿæˆè¯„åˆ† ***s1,s2,s3***ã€‚è¿™äº›è¯„åˆ†ç”¨äºæ¯”è¾ƒæ–‡æ¡£å¯¹çš„ç›¸å…³æ€§ã€‚
- en: '**Penalizing the Model:**'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: '**æƒ©ç½šæ¨¡å‹ï¼š**'
- en: 'If the model predicts scores that violate the true order of relevance, it is
    penalized. For example:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: å¦‚æœæ¨¡å‹é¢„æµ‹çš„è¯„åˆ†è¿åäº†çœŸå®çš„ç›¸å…³æ€§é¡ºåºï¼Œé‚£ä¹ˆå®ƒä¼šå—åˆ°æƒ©ç½šã€‚ä¾‹å¦‚ï¼š
- en: If ***s1<s2***, but the training data indicates ***d1>d2***â€‹, the model is penalized
    because it failed to rank ***d1***â€‹ higher than ***d2***â€‹.
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚æœ ***s1<s2***ï¼Œä½†è®­ç»ƒæ•°æ®è¡¨æ˜ ***d1>d2***ï¼Œåˆ™æ¨¡å‹ä¼šå—åˆ°æƒ©ç½šï¼Œå› ä¸ºå®ƒæœªèƒ½å°† ***d1*** æ’åœ¨ ***d2*** ä¹‹å‰ã€‚
- en: If ***s2<s3***â€‹, and the training data indicates ***d2<d3***â€‹, the model did
    the right thing, so no penalty is applied.
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: å¦‚æœ ***s2<s3***ï¼Œå¹¶ä¸”è®­ç»ƒæ•°æ®è¡¨æ˜ ***d2<d3***ï¼Œé‚£ä¹ˆæ¨¡å‹åšå¯¹äº†ï¼Œå› æ­¤ä¸éœ€è¦æƒ©ç½šã€‚
- en: '**This pairwise comparison helps the model learn the relative order of documents
    for a query, rather than just predicting a standalone relevance score like in
    the pointwise approach.**'
  id: totrans-60
  prefs: []
  type: TYPE_NORMAL
  zh: '**è¿™ç§æˆå¯¹æ¯”è¾ƒå¸®åŠ©æ¨¡å‹å­¦ä¹ æ–‡æ¡£çš„ç›¸å¯¹é¡ºåºï¼Œè€Œä¸æ˜¯åƒç‚¹å¯¹ç‚¹æ–¹æ³•é‚£æ ·ä»…é¢„æµ‹ç‹¬ç«‹çš„ç›¸å…³æ€§è¯„åˆ†ã€‚**'
- en: '**Challenges:**'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: '**æŒ‘æˆ˜ï¼š**'
- en: One of the main challenges of implementing pairwise models is the **computational
    complexity** â€” since we need to compare all possible pairs of documents, the process
    scales as O(nÂ²). Additionally, pairwise methods donâ€™t consider the **global ranking**
    of documents; they focus only on individual pairs during comparisons, which can
    lead to inconsistencies in the overall ranking.
  id: totrans-62
  prefs: []
  type: TYPE_NORMAL
  zh: å®ç°æˆå¯¹æ¨¡å‹çš„ä¸»è¦æŒ‘æˆ˜ä¹‹ä¸€æ˜¯**è®¡ç®—å¤æ‚åº¦**â€”â€”å› ä¸ºæˆ‘ä»¬éœ€è¦æ¯”è¾ƒæ‰€æœ‰å¯èƒ½çš„æ–‡æ¡£å¯¹ï¼Œè¿™ä¸€è¿‡ç¨‹çš„è§„æ¨¡æ˜¯ O(nÂ²)ã€‚æ­¤å¤–ï¼Œæˆå¯¹æ–¹æ³•å¹¶ä¸è€ƒè™‘æ–‡æ¡£çš„**å…¨å±€æ’åº**ï¼›å®ƒä»¬ä»…åœ¨æ¯”è¾ƒè¿‡ç¨‹ä¸­å…³æ³¨ä¸ªåˆ«å¯¹ï¼Œè¿™å¯èƒ½å¯¼è‡´æ•´ä½“æ’åºçš„ä¸ä¸€è‡´ã€‚
- en: Listwise
  id: totrans-63
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Listwise
- en: In listwise ranking, the goal is to optimize the entire list of documents based
    on their relevance to a query. Instead of treating individual documents separately,
    the focus is on the order in which they appear in the list.
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ Listwise æ’åºä¸­ï¼Œç›®æ ‡æ˜¯åŸºäºæ–‡æ¡£ä¸æŸ¥è¯¢çš„ç›¸å…³æ€§æ¥ä¼˜åŒ–æ•´ä¸ªæ–‡æ¡£åˆ—è¡¨ã€‚ä¸å…¶å•ç‹¬å¤„ç†æ¯ä¸ªæ–‡æ¡£ï¼Œä¸å¦‚ä¸“æ³¨äºå®ƒä»¬åœ¨åˆ—è¡¨ä¸­å‡ºç°çš„é¡ºåºã€‚
- en: 'Hereâ€™s a breakdown of how this works in ListNet and LambdaRank:'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: ä»¥ä¸‹æ˜¯ ListNet å’Œ LambdaRank ä¸­å·¥ä½œåŸç†çš„åˆ†è§£ï¼š
- en: '**NDCG (Normalized Discounted Cumulative Gain)**: Iâ€™ll dive deeper into NDCG
    in another blog, but for now, think of it as a way to measure how well the ordering
    of items matches their relevance. It rewards relevant items appearing at the top
    of the list and normalizes the score for easier comparison.'
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: '**NDCGï¼ˆå½’ä¸€åŒ–æŠ˜æ‰£ç´¯ç§¯å¢ç›Šï¼‰**ï¼šæˆ‘å°†åœ¨å¦ä¸€ç¯‡åšå®¢ä¸­æ·±å…¥æ¢è®¨ NDCGï¼Œä½†ç°åœ¨å¯ä»¥æŠŠå®ƒçœ‹ä½œä¸€ç§è¡¡é‡é¡¹ç›®æ’åºä¸å…¶ç›¸å…³æ€§åŒ¹é…ç¨‹åº¦çš„æ–¹å¼ã€‚å®ƒå¥–åŠ±ç›¸å…³é¡¹ç›®å‡ºç°åœ¨åˆ—è¡¨é¡¶éƒ¨ï¼Œå¹¶å¯¹è¯„åˆ†è¿›è¡Œå½’ä¸€åŒ–ï¼Œä»¥ä¾¿æ›´å®¹æ˜“è¿›è¡Œæ¯”è¾ƒã€‚'
- en: 'In listwise ranking, if you have a list of documents (d1, d2, d3), the model
    considers all possible permutations of these documents:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨ Listwise æ’åºä¸­ï¼Œå¦‚æœä½ æœ‰ä¸€ä¸ªæ–‡æ¡£åˆ—è¡¨ï¼ˆd1, d2, d3ï¼‰ï¼Œæ¨¡å‹ä¼šè€ƒè™‘è¿™äº›æ–‡æ¡£çš„æ‰€æœ‰å¯èƒ½æ’åˆ—ï¼š
- en: '***(d1, d2, d3)***'
  id: totrans-68
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***(d1, d2, d3)***'
- en: '***(d1, d3, d2)***'
  id: totrans-69
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***(d1, d3, d2)***'
- en: '***(d2, d1, d3)***'
  id: totrans-70
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***(d2, d1, d3)***'
- en: '***(d2, d3, d1)***'
  id: totrans-71
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***(d2, d3, d1)***'
- en: '***(d3, d1, d2)***'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***(d3, d1, d2)***'
- en: '***(d3, d2, d1)***'
  id: totrans-73
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '***(d3, d2, d1)***'
- en: '**Training Process:**'
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: '**è®­ç»ƒè¿‡ç¨‹ï¼š**'
- en: '**Score Prediction**: The model predicts a score for each document in the list,
    and the documents are ranked according to these scores.For example: ***s1 = f(q1,d1),
    s2 = f(q1,d2)***'
  id: totrans-75
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**è¯„åˆ†é¢„æµ‹**ï¼šæ¨¡å‹ä¸ºåˆ—è¡¨ä¸­çš„æ¯ä¸ªæ–‡æ¡£é¢„æµ‹ä¸€ä¸ªè¯„åˆ†ï¼Œæ–‡æ¡£å°†æ ¹æ®è¿™äº›è¯„åˆ†è¿›è¡Œæ’åºã€‚ä¾‹å¦‚ï¼š ***s1 = f(q1,d1), s2 = f(q1,d2)***'
- en: '**Ideal Ranking**: The ideal ranking is calculated by sorting the documents
    based on their **true relevance**. For example, ***d1*** might be the most relevant,
    followed by ***d2***, and then ***d3.***'
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**ç†æƒ³æ’åº**ï¼šç†æƒ³æ’åºæ˜¯é€šè¿‡æ ¹æ®æ–‡æ¡£çš„**çœŸå®ç›¸å…³æ€§**å¯¹å…¶è¿›è¡Œæ’åºæ¥è®¡ç®—çš„ã€‚ä¾‹å¦‚ï¼Œ***d1*** å¯èƒ½æ˜¯æœ€ç›¸å…³çš„ï¼Œå…¶æ¬¡æ˜¯ ***d2***ï¼Œç„¶åæ˜¯
    ***d3***ã€‚'
- en: '**NDCG Calculation**: NDCG is calculated for each permutation of the document
    list. It checks how close the predicted ranking is to the ideal ranking, considering
    both relevance and the positions of the documents.'
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**NDCGè®¡ç®—**ï¼šNDCGæ˜¯é’ˆå¯¹æ¯ä¸ªæ–‡æ¡£åˆ—è¡¨çš„æ’åˆ—è¿›è¡Œè®¡ç®—çš„ã€‚å®ƒæ£€æŸ¥é¢„æµ‹æ’åºä¸ç†æƒ³æ’åºçš„æ¥è¿‘ç¨‹åº¦ï¼ŒåŒæ—¶è€ƒè™‘åˆ°æ–‡æ¡£çš„ç›¸å…³æ€§å’Œä½ç½®ã€‚'
- en: '**Penalizing Incorrect Rankings**: If the predicted ranking differs from the
    ideal, the NDCG score will drop. For example, if the ideal ranking is ***(d1,
    d3, d2)*** but the model ranks ***(d2, d1, d3)***, the NDCG score will be lower
    because the most relevant document (***d1***) isnâ€™t ranked at the top.'
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**æƒ©ç½šé”™è¯¯æ’åº**ï¼šå¦‚æœé¢„æµ‹æ’åºä¸ç†æƒ³æ’åºä¸åŒï¼ŒNDCGåˆ†æ•°å°†ä¸‹é™ã€‚ä¾‹å¦‚ï¼Œå¦‚æœç†æƒ³æ’åºæ˜¯***(d1, d3, d2)***ï¼Œè€Œæ¨¡å‹æ’åºä¸º***(d2,
    d1, d3)***ï¼Œé‚£ä¹ˆNDCGåˆ†æ•°ä¼šè¾ƒä½ï¼Œå› ä¸ºæœ€ç›¸å…³çš„æ–‡æ¡£ï¼ˆ***d1***)æ²¡æœ‰æ’åœ¨æœ€å‰é¢ã€‚'
- en: '**Gradient Calculation**: The model calculates gradients based on how much
    the NDCG score would change if the order of documents was adjusted. These gradients
    guide the model on how to improve its predictions.'
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**æ¢¯åº¦è®¡ç®—**ï¼šæ¨¡å‹æ ¹æ®å¦‚æœè°ƒæ•´æ–‡æ¡£é¡ºåºï¼ŒNDCGåˆ†æ•°ä¼šå‘ç”Ÿçš„å˜åŒ–æ¥è®¡ç®—æ¢¯åº¦ã€‚è¿™äº›æ¢¯åº¦æŒ‡å¼•æ¨¡å‹å¦‚ä½•æ”¹è¿›é¢„æµ‹ã€‚'
- en: This process helps the model learn to optimize the entire ranking list, improving
    the relevance of documents presented to users.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: è¿™ä¸ªè¿‡ç¨‹å¸®åŠ©æ¨¡å‹å­¦ä¹ å¦‚ä½•ä¼˜åŒ–æ•´ä¸ªæ’åºåˆ—è¡¨ï¼Œæé«˜å‘ˆç°ç»™ç”¨æˆ·çš„æ–‡æ¡£çš„ç›¸å…³æ€§ã€‚
- en: '**Summary**'
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '**æ€»ç»“**'
- en: When it comes to Learning to Rank, thereâ€™s no one-size-fits-all approach. Pointwise
    models are super easy to set up and update, but they donâ€™t always take into account
    how documents relate to each other. That said, if you need something simple and
    fast, theyâ€™re a great option.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: åœ¨å­¦ä¹ æ’åºï¼ˆLearning to Rankï¼‰ä¸­ï¼Œå¹¶æ²¡æœ‰ä¸€ç§é€šç”¨çš„è§£å†³æ–¹æ¡ˆã€‚åŸºäºç‚¹çš„æ¨¡å‹éå¸¸å®¹æ˜“è®¾ç½®å’Œæ›´æ–°ï¼Œä½†å®ƒä»¬å¹¶ä¸æ€»æ˜¯è€ƒè™‘åˆ°æ–‡æ¡£ä¹‹é—´çš„ç›¸äº’å…³ç³»ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¦‚æœä½ éœ€è¦ä¸€ä¸ªç®€å•ä¸”å¿«é€Ÿçš„æ–¹æ³•ï¼Œå®ƒä»¬æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚
- en: On the other hand, ***pairwise*** and ***listwise*** methods are more powerful
    because they look at how documents compare to one another. But with that **power
    comes more complexity** ğŸ˜›, and listwise can be a real challenge because of its
    high complexity in training.
  id: totrans-83
  prefs: []
  type: TYPE_NORMAL
  zh: å¦ä¸€æ–¹é¢ï¼Œ***æˆå¯¹æ’åºï¼ˆpairwiseï¼‰***å’Œ***åˆ—è¡¨æ’åºï¼ˆlistwiseï¼‰***æ–¹æ³•æ›´ä¸ºå¼ºå¤§ï¼Œå› ä¸ºå®ƒä»¬è€ƒè™‘äº†æ–‡æ¡£ä¹‹é—´çš„ç›¸äº’æ¯”è¾ƒã€‚ä½†æ˜¯ï¼Œè¿™ç§**åŠ›é‡å¸¦æ¥äº†æ›´å¤šçš„å¤æ‚æ€§**ğŸ˜›ï¼Œè€Œä¸”åˆ—è¡¨æ’åºç”±äºè®­ç»ƒçš„é«˜å¤æ‚åº¦ï¼Œå¯èƒ½ä¼šæˆä¸ºä¸€ä¸ªçœŸæ­£çš„æŒ‘æˆ˜ã€‚
- en: Personally, I find the ***pairwise*** approach to be the sweet spot. It strikes
    a good balance between complexity and performance, making it ideal for many situations.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: å°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œæˆ‘è®¤ä¸º***æˆå¯¹æ’åºï¼ˆpairwiseï¼‰***æ–¹æ³•æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„å¹³è¡¡ç‚¹ã€‚å®ƒåœ¨å¤æ‚æ€§å’Œæ€§èƒ½ä¹‹é—´è¾¾åˆ°äº†è‰¯å¥½çš„å¹³è¡¡ï¼Œä½¿å…¶åœ¨è®¸å¤šæƒ…å†µä¸‹éƒ½å¾ˆç†æƒ³ã€‚
- en: At the end of the day, the method you choose really depends on your situation.
    How big and complicated is your dataset? Knowing the pros and cons of each method
    will help you pick the one that works best for what youâ€™re trying to do.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: æœ€ç»ˆï¼Œä½ é€‰æ‹©çš„æ–¹æ³•ç¡®å®å–å†³äºä½ çš„å…·ä½“æƒ…å†µã€‚ä½ çš„æ•°æ®é›†æœ‰å¤šå¤§ä¸”å¤šå¤æ‚ï¼Ÿäº†è§£æ¯ç§æ–¹æ³•çš„ä¼˜ç¼ºç‚¹å°†å¸®åŠ©ä½ é€‰æ‹©æœ€é€‚åˆä½ éœ€æ±‚çš„æ–¹æ³•ã€‚
- en: Thatâ€™s a wrap for today! Stay tuned for the next part, Until then happy ranking!
    ğŸ˜Š
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: ä»Šå¤©çš„å†…å®¹å°±åˆ°è¿™é‡Œï¼æ•¬è¯·æœŸå¾…ä¸‹ä¸€éƒ¨åˆ†ï¼Œåœ¨é‚£ä¹‹å‰ç¥ä½ æ’åºæ„‰å¿«ï¼ğŸ˜Š
- en: 'References:'
  id: totrans-87
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: å‚è€ƒæ–‡çŒ®ï¼š
- en: '[From RankNet to LambdaRank to LambdaMART: An Overview](https://www.microsoft.com/en-us/research/uploads/prod/2016/02/MSR-TR-2010-82.pdf)'
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: '[ä»RankNetåˆ°LambdaRankå†åˆ°LambdaMARTï¼šæ¦‚è¿°](https://www.microsoft.com/en-us/research/uploads/prod/2016/02/MSR-TR-2010-82.pdf)'
- en: '[Learning to Rank: From Pairwise Approach to Listwise Approach](https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/tr-2007-40.pdf)'
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '[å­¦ä¹ æ’åºï¼šä»æˆå¯¹æ’åºæ–¹æ³•åˆ°åˆ—è¡¨æ’åºæ–¹æ³•](https://www.microsoft.com/en-us/research/wp-content/uploads/2016/02/tr-2007-40.pdf)'
- en: '[Introduction to Learning to Rank](https://everdark.github.io/k9/notebooks/ml/learning_to_rank/learning_to_rank.html)'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '[å­¦ä¹ æ’åºç®€ä»‹](https://everdark.github.io/k9/notebooks/ml/learning_to_rank/learning_to_rank.html)'
