- en: How to Improve LLM Responses With Better Sampling Parameters
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何通过更好的采样参数改进LLM的响应
- en: 原文：[https://towardsdatascience.com/how-to-improve-llm-responses-with-better-sampling-parameters-b31a348381f7?source=collection_archive---------2-----------------------#2024-09-02](https://towardsdatascience.com/how-to-improve-llm-responses-with-better-sampling-parameters-b31a348381f7?source=collection_archive---------2-----------------------#2024-09-02)
  id: totrans-1
  prefs:
  - PREF_BQ
  type: TYPE_NORMAL
  zh: 原文：[https://towardsdatascience.com/how-to-improve-llm-responses-with-better-sampling-parameters-b31a348381f7?source=collection_archive---------2-----------------------#2024-09-02](https://towardsdatascience.com/how-to-improve-llm-responses-with-better-sampling-parameters-b31a348381f7?source=collection_archive---------2-----------------------#2024-09-02)
- en: A deep dive into stochastic decoding with temperature, top_p, top_k, and min_p
  id: totrans-2
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 深入探讨温度、top_p、top_k和min_p的随机解码
- en: '[](https://medium.com/@leoneversberg?source=post_page---byline--b31a348381f7--------------------------------)[![Dr.
    Leon Eversberg](../Images/56dc3579a29933f7047a9ce60be4697a.png)](https://medium.com/@leoneversberg?source=post_page---byline--b31a348381f7--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--b31a348381f7--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--b31a348381f7--------------------------------)
    [Dr. Leon Eversberg](https://medium.com/@leoneversberg?source=post_page---byline--b31a348381f7--------------------------------)'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: '[](https://medium.com/@leoneversberg?source=post_page---byline--b31a348381f7--------------------------------)[![Dr.
    Leon Eversberg](../Images/56dc3579a29933f7047a9ce60be4697a.png)](https://medium.com/@leoneversberg?source=post_page---byline--b31a348381f7--------------------------------)[](https://towardsdatascience.com/?source=post_page---byline--b31a348381f7--------------------------------)[![Towards
    Data Science](../Images/a6ff2676ffcc0c7aad8aaf1d79379785.png)](https://towardsdatascience.com/?source=post_page---byline--b31a348381f7--------------------------------)
    [Dr. Leon Eversberg](https://medium.com/@leoneversberg?source=post_page---byline--b31a348381f7--------------------------------)'
- en: ·Published in [Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--b31a348381f7--------------------------------)
    ·10 min read·Sep 2, 2024
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: ·发表于[Towards Data Science](https://towardsdatascience.com/?source=post_page---byline--b31a348381f7--------------------------------)
    ·阅读时间10分钟·2024年9月2日
- en: --
  id: totrans-5
  prefs: []
  type: TYPE_NORMAL
  zh: --
- en: '![](../Images/a757570a7c6383a8115db038505b49a0.png)'
  id: totrans-6
  prefs: []
  type: TYPE_IMG
  zh: '![](../Images/a757570a7c6383a8115db038505b49a0.png)'
- en: When calling the OpenAI API with the Python SDK, have you ever wondered what
    exactly the temperature and top_p parameters do?
  id: totrans-7
  prefs: []
  type: TYPE_NORMAL
  zh: 在使用Python SDK调用OpenAI API时，你是否曾经想过`temperature`和`top_p`参数到底是做什么的？
- en: When you ask a Large Language Model (LLM) a question, the model outputs a probability
    for every possible token in its vocabulary.
  id: totrans-8
  prefs: []
  type: TYPE_NORMAL
  zh: 当你向大型语言模型（LLM）提问时，模型会为其词汇表中的每个可能令牌输出一个概率。
- en: After sampling a token from this probability distribution, we can append the
    selected token to our input prompt so that the LLM can output the probabilities
    for the next token.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 在从这个概率分布中采样一个令牌后，我们可以将选定的令牌附加到输入提示中，以便大型语言模型（LLM）可以输出下一个令牌的概率。
- en: This sampling process can be controlled by parameters such as the famous `temperature`
    and `top_p`.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 这个采样过程可以通过如著名的`temperature`（温度）和`top_p`等参数进行控制。
- en: In this article, I will explain and visualize the sampling strategies that define
    the output behavior of LLMs. By understanding what these parameters do and setting
    them according to our use case, we can improve the output generated by LLMs.
  id: totrans-11
  prefs: []
  type: TYPE_NORMAL
  zh: 在这篇文章中，我将解释并可视化定义LLM输出行为的采样策略。通过理解这些参数的作用并根据我们的使用案例设置它们，我们可以改进LLM生成的输出。
- en: For this article, I’ll use [VLLM](https://github.com/vllm-project/vllm) as the
    inference engine and Microsoft’s new [Phi-3.5-mini-instruct](https://huggingface.co/microsoft/Phi-3.5-mini-instruct)
    model with AWQ quantization. To run this model locally, I’m using my laptop’s
    NVIDIA GeForce RTX 2060 GPU.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 对于本文，我将使用[VLLM](https://github.com/vllm-project/vllm)作为推理引擎，并使用微软的新模型[Phi-3.5-mini-instruct](https://huggingface.co/microsoft/Phi-3.5-mini-instruct)，该模型采用AWQ量化技术。为了在本地运行这个模型，我使用了我笔记本电脑的NVIDIA
    GeForce RTX 2060 GPU。
- en: Table Of Contents
  id: totrans-13
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 目录
- en: · [Understanding Sampling With Logprobs](#6e79)
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: · [理解带Logprobs的采样](#6e79)
- en: ∘ [LLM Decoding Theory](#082f)
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: ∘ [LLM 解码理论](#082f)
- en: ∘ [Retrieving Logprobs With the OpenAI Python SDK](#fcbc)
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: ∘ [使用OpenAI Python SDK获取Logprobs](#fcbc)
- en: · [Greedy Decoding](#798b)
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: · [贪心解码](#798b)
- en: · [Temperature](#7d10)
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: · [温度](#7d10)
- en: · [Top-k Sampling](#0110)
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: · [Top-k 采样](#0110)
- en: · [Top-p Sampling](#52d3)
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: · [Top-p 采样](#52d3)
- en: · [Combining Top-p](#c163)…
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: · [组合 Top-p](#c163)…
